[{"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/13", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/13/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/13/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/13", "id": 828165132, "node_id": "MDExOlB1bGxSZXF1ZXN0NTkwMDAzMjkx", "number": 13, "title": "Remove destroy method, not needed anymore", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-10T18:30:06Z", "updated_at": "2021-03-10T18:30:15Z", "closed_at": "2021-03-10T18:30:12Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/13", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/13", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/13.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/13.patch", "merged_at": "2021-03-10T18:30:12Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/13/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/13/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/12", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/12/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/12/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/12", "id": 828164064, "node_id": "MDExOlB1bGxSZXF1ZXN0NTkwMDAyMzUz", "number": 12, "title": "Make Protocol generic over a single IO struct", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-10T18:29:18Z", "updated_at": "2021-03-10T18:29:29Z", "closed_at": "2021-03-10T18:29:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/12", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/12", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/12.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/12.patch", "merged_at": "2021-03-10T18:29:26Z"}, "body": "Breaking: Changed the generic argument of the Protocol struct to be a single IO handle (AsyncRead + AsyncWrite) in place of a R: AsyncRead and W: AsyncWrite. This is a change in the public API. If you have seperate reader and writer structs, a Duplex handle is provided that combines the reader and writer. If you have a struct that is both AsyncRead and AsyncWrite, the Protocol is now generic just over that struct.", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/12/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/12/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/11", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/11/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/11/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/11", "id": 828162748, "node_id": "MDExOlB1bGxSZXF1ZXN0NTkwMDAxMTQ2", "number": 11, "title": "Dev", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-10T18:28:17Z", "updated_at": "2021-03-10T18:28:26Z", "closed_at": "2021-03-10T18:28:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/11", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/11", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/11.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/11.patch", "merged_at": "2021-03-10T18:28:23Z"}, "body": "- Make event non_exhaustive\r\n- Cleanups and internal changes\r\n- Make clippy happy", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/11/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/11/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/10", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/10/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/10/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/10", "id": 825890213, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg3OTQxNzAz", "number": 10, "title": "Extensions", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-09T12:59:03Z", "updated_at": "2021-03-10T17:54:03Z", "closed_at": "2021-03-10T17:54:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/10", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/10", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/10.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/10.patch", "merged_at": "2021-03-10T17:54:01Z"}, "body": "This PR adds support for protocol extension.\r\n\r\nIt should have full support for everything from the NodeJS version.\r\n\r\n- Extensions can be registered either on the outer stream or on a channel.\r\n- Extensions are identified by a string. Upon registering an extension, a `Options` message is sent with the extension names. Each extension message is then identified by the ID from the last `Options` message.\r\n- Extension messages for \"unknown\" extensions are dropped (without raising an error).\r\n\r\nThis all works.\r\n\r\nAdditionally, Extensions implement `AsyncRead` and `AsyncWrite` traits! This should make it straightforward to use extensions for other protocols. AsyncRead and AsyncWrite are the most used abstraction for protocols I think.\r\n\r\nSee `examples/extension.rs` for an example on how to use this.\r\n\r\nAlso, together with #8 and #9 (on which this PR depends) this is all now fast and smooth. I'm getting higher throughput per second than the NodeJS version finally :slightly_smiling_face: ", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/10/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/10/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/9", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/9/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/9/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/9", "id": 825772758, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg3ODM0Mzg5", "number": 9, "title": "Refactor Writer to not allocate for each message.", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-09T11:29:27Z", "updated_at": "2021-03-10T17:53:02Z", "closed_at": "2021-03-10T17:52:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/9", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/9", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/9.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/9.patch", "merged_at": "2021-03-10T17:52:59Z"}, "body": "- This turned out to be a bigger refactor than expected. The writer now\r\nhas a single, adaptive write buffer and does not allocate per message.\r\nInstead the message is copied to the write buffer when encoding.\r\n\r\n- Adds a new Frame abstraction to deal with handshake, ping and channel\r\n  messages.\r\n\r\n- The new Writer struct supports three methods of sending frames:\r\n  1) Append directly to the write buffer iwth `try_queue_direct`. Fails if the\r\n     write buffer is full. This is used for handshake messages because\r\n     they have to be written before the encryption is set up after\r\n     a successfull handshake.\r\n  2) Push messages into an unbounded high-priority queue with\r\n     `queue_frame`. This is used for messages generated via commands to\r\n     the protocol.\r\n  3) Park a message in the single park slot. This is used to store the\r\n     result from polling the outbound_rx receiver.", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/9/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/9/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/8", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/8/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/8/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/8", "id": 824868562, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg3MDMyNDcz", "number": 8, "title": "Refactor reader and fix unneeded memcpys.", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-08T19:16:01Z", "updated_at": "2021-03-10T17:52:23Z", "closed_at": "2021-03-10T17:52:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/8", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/8", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/8.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/8.patch", "merged_at": "2021-03-10T17:52:20Z"}, "body": "Before the reader had a performance bug where it would allocate and copy the full read buffer on each message. Now this only happens once the read buffer filled up. Also the new structure is much simpler and better to follow. \r\n\r\nThere's still a few allocations to save possibly, but now this is not a performance leak anymore.", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/8/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/8/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/7", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/7/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/7/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/7", "id": 806474032, "node_id": "MDExOlB1bGxSZXF1ZXN0NTcxODg2NTAy", "number": 7, "title": "Refactor: Use poll functions internally", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-11T15:03:15Z", "updated_at": "2021-03-03T21:26:17Z", "closed_at": "2021-03-03T21:26:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/7", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/7", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/7.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/7.patch", "merged_at": "2021-03-03T21:26:16Z"}, "body": "This is a first major refactor in the internals to use poll functions and not async functions internally.\r\n\r\nThis PR removes all internal async functions from the Protocol struct and instead uses manually implemented poll functions.\r\nIt also adds a `commands()` function that gives a handle to the main protocol to send commands to it. The handle can be sent to other threads.\r\n\r\nThe PR also includes other changes:\r\n* The `ProtocolStream` wrapper is made obsolete, the `Protocol` struct directly implements `Stream`\r\n* Refactored the ChannelMap struct\r\n* Add a first full test\r\n* Update dependencies\r\n* Fix examples", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/7/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/7/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/5", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/5/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/5/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/5", "id": 625152829, "node_id": "MDExOlB1bGxSZXF1ZXN0NDIzNDI2NDg5", "number": 5, "title": "fix leading zero issue during encoding with tests", "user": {"login": "mattsse", "id": 19890894, "node_id": "MDQ6VXNlcjE5ODkwODk0", "avatar_url": "https://avatars.githubusercontent.com/u/19890894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattsse", "html_url": "https://github.com/mattsse", "followers_url": "https://api.github.com/users/mattsse/followers", "following_url": "https://api.github.com/users/mattsse/following{/other_user}", "gists_url": "https://api.github.com/users/mattsse/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattsse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattsse/subscriptions", "organizations_url": "https://api.github.com/users/mattsse/orgs", "repos_url": "https://api.github.com/users/mattsse/repos", "events_url": "https://api.github.com/users/mattsse/events{/privacy}", "received_events_url": "https://api.github.com/users/mattsse/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-26T19:51:15Z", "updated_at": "2020-06-01T15:38:20Z", "closed_at": "2020-06-01T15:38:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/5", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/5", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/5.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/5.patch", "merged_at": "2020-06-01T15:38:20Z"}, "body": "The issue with the leading zeros comes from [pre filling the vec with zeros](https://github.com/Frando/hypercore-protocol-rs/blob/master/src/message.rs#L71).\r\nThe prost encoding uses `BufMut` which uses `extend_from_slice` to append! the buffer.\r\n\r\nThis is fixed by allocating only with `Vec::with_capacity(msg.encoded_len())`.\r\n\r\nAlso a test to validate the encoding+decoding roundtrips for each message is provided.", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/5/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/5/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/3", "repository_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs", "labels_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/3/comments", "events_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/3/events", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/3", "id": 611868234, "node_id": "MDExOlB1bGxSZXF1ZXN0NDEyOTQ2MDYz", "number": 3, "title": "Dev branch: Use channels and other fixes/changes", "user": {"login": "Frando", "id": 43627, "node_id": "MDQ6VXNlcjQzNjI3", "avatar_url": "https://avatars.githubusercontent.com/u/43627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frando", "html_url": "https://github.com/Frando", "followers_url": "https://api.github.com/users/Frando/followers", "following_url": "https://api.github.com/users/Frando/following{/other_user}", "gists_url": "https://api.github.com/users/Frando/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frando/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frando/subscriptions", "organizations_url": "https://api.github.com/users/Frando/orgs", "repos_url": "https://api.github.com/users/Frando/repos", "events_url": "https://api.github.com/users/Frando/events{/privacy}", "received_events_url": "https://api.github.com/users/Frando/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-04T13:17:45Z", "updated_at": "2020-05-06T19:31:11Z", "closed_at": "2020-05-06T19:31:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/pulls/3", "html_url": "https://github.com/datrs/hypercore-protocol-rs/pull/3", "diff_url": "https://github.com/datrs/hypercore-protocol-rs/pull/3.diff", "patch_url": "https://github.com/datrs/hypercore-protocol-rs/pull/3.patch", "merged_at": "2020-05-06T19:31:11Z"}, "body": "This branch has:\r\n\r\n* Implement the varint message delimiter parsing/handling as a state machine on a `futures::io::AsyncRead`, exposed as a `futures::stream::Stream`\r\n* Simplify the main protocol logic\r\n* Change the architecture to use `futures::mpsc::channel` to communicate between protocol channels that are on the same underlying socket/stream. \r\n* Expose the protocol as a `futures::stream::Stream` of `Event`s\r\n* Update examples to new API\r\n* Update hypercore example to **actually work** (albeit with a far too simple replication logic)\r\n* No longer uses a fork of `snow`, but instead the `master` branch after my PRs were merged\r\n\r\nWill need some more cleanup and/or docs, then will merge.", "reactions": {"url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/3/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datrs/hypercore-protocol-rs/issues/3/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]