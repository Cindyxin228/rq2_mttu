[{"url": "https://api.github.com/repos/kolapapa/surge-ping/issues/34", "repository_url": "https://api.github.com/repos/kolapapa/surge-ping", "labels_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/34/comments", "events_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/34/events", "html_url": "https://github.com/kolapapa/surge-ping/pull/34", "id": 1606844229, "node_id": "PR_kwDOE2N_bM5LIZK3", "number": 34, "title": "Multiplatform changes", "user": {"login": "matislovas", "id": 19519945, "node_id": "MDQ6VXNlcjE5NTE5OTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/19519945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matislovas", "html_url": "https://github.com/matislovas", "followers_url": "https://api.github.com/users/matislovas/followers", "following_url": "https://api.github.com/users/matislovas/following{/other_user}", "gists_url": "https://api.github.com/users/matislovas/gists{/gist_id}", "starred_url": "https://api.github.com/users/matislovas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matislovas/subscriptions", "organizations_url": "https://api.github.com/users/matislovas/orgs", "repos_url": "https://api.github.com/users/matislovas/repos", "events_url": "https://api.github.com/users/matislovas/events{/privacy}", "received_events_url": "https://api.github.com/users/matislovas/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-03-02T13:50:56Z", "updated_at": "2023-06-29T08:59:47Z", "closed_at": "2023-03-23T03:21:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/kolapapa/surge-ping/pulls/34", "html_url": "https://github.com/kolapapa/surge-ping/pull/34", "diff_url": "https://github.com/kolapapa/surge-ping/pull/34.diff", "patch_url": "https://github.com/kolapapa/surge-ping/pull/34.patch", "merged_at": "2023-03-23T03:21:49Z"}, "body": "So I've made some changes, for this crate to work on not only one platform (my guess it was `macOS`,  that it was tested with previously), but on `linux` and `windows` as well.\r\n\r\n- On windows, there isn't such thing as `DGRAM + ICMP` socket, so we have to use RAW socket.\r\n- On `linux`, `DGRAM + ICMP` works (if there are sufficient group permissions for user to open this socket), but socket itself operates on ICMP protocol level (you do not have access to IP packet). You can fetch additional IP header info (like `ttl`) with `recvmsg` syscall, but this API is not available on `tokio::net::UdpSocket`.\r\n- On linux, you cannot set `PingIdentifier` field manually, when on DGRAM + ICMP socket. This is set by kernel to _internal_  socket's port value.\r\n\r\nThere are some additional changes, which I personally found useful (e.g. `send_ping()` without waiting for reply, exposing native socket, to add some `socketopts` ...) and added them to API.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/kolapapa/surge-ping/issues/34/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 1}, "timeline_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/34/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/kolapapa/surge-ping/issues/33", "repository_url": "https://api.github.com/repos/kolapapa/surge-ping", "labels_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/33/comments", "events_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/33/events", "html_url": "https://github.com/kolapapa/surge-ping/pull/33", "id": 1532720605, "node_id": "PR_kwDOE2N_bM5HWjFK", "number": 33, "title": "Fix tokio features", "user": {"login": "Qwanve", "id": 44913094, "node_id": "MDQ6VXNlcjQ0OTEzMDk0", "avatar_url": "https://avatars.githubusercontent.com/u/44913094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qwanve", "html_url": "https://github.com/Qwanve", "followers_url": "https://api.github.com/users/Qwanve/followers", "following_url": "https://api.github.com/users/Qwanve/following{/other_user}", "gists_url": "https://api.github.com/users/Qwanve/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qwanve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qwanve/subscriptions", "organizations_url": "https://api.github.com/users/Qwanve/orgs", "repos_url": "https://api.github.com/users/Qwanve/repos", "events_url": "https://api.github.com/users/Qwanve/events{/privacy}", "received_events_url": "https://api.github.com/users/Qwanve/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-13T18:10:58Z", "updated_at": "2023-03-17T09:34:18Z", "closed_at": "2023-03-17T09:30:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/kolapapa/surge-ping/pulls/33", "html_url": "https://github.com/kolapapa/surge-ping/pull/33", "diff_url": "https://github.com/kolapapa/surge-ping/pull/33.diff", "patch_url": "https://github.com/kolapapa/surge-ping/pull/33.patch", "merged_at": "2023-03-17T09:30:36Z"}, "body": "Without these features, there are unresolved imports that cause the crate to not compile. The suggested fix seems to be for the user to depend on tokio with the correct features, but it isn't documented anywhere explicitly that I could find and it seems wrong to have the user fix something that should be handled by the library.", "reactions": {"url": "https://api.github.com/repos/kolapapa/surge-ping/issues/33/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/kolapapa/surge-ping/issues/33/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]