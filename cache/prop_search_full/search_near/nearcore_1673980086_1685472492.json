[{"url": "https://api.github.com/repos/near/nearcore/issues/9126", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9126/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9126/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9126/events", "html_url": "https://github.com/near/nearcore/pull/9126", "id": 1732418580, "node_id": "PR_kwDOCQUkYs5Rsb-W", "number": 9126, "title": "fix(test): import correct retry library", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-30T14:43:20Z", "updated_at": "2023-05-30T16:10:55Z", "closed_at": "2023-05-30T16:10:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9126", "html_url": "https://github.com/near/nearcore/pull/9126", "diff_url": "https://github.com/near/nearcore/pull/9126.diff", "patch_url": "https://github.com/near/nearcore/pull/9126.patch", "merged_at": "2023-05-30T16:10:55Z"}, "body": "I didn't test #9111 properly, this doesn't actually\r\nwork as expected. We need `retrying` not `retry`.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9126/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9123", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9123/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9123/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9123/events", "html_url": "https://github.com/near/nearcore/pull/9123", "id": 1731078397, "node_id": "PR_kwDOCQUkYs5Rn6js", "number": 9123, "title": "fix: clear previous epoch block/chunk production metrics", "user": {"login": "VanBarbascu", "id": 8384611, "node_id": "MDQ6VXNlcjgzODQ2MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/8384611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VanBarbascu", "html_url": "https://github.com/VanBarbascu", "followers_url": "https://api.github.com/users/VanBarbascu/followers", "following_url": "https://api.github.com/users/VanBarbascu/following{/other_user}", "gists_url": "https://api.github.com/users/VanBarbascu/gists{/gist_id}", "starred_url": "https://api.github.com/users/VanBarbascu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VanBarbascu/subscriptions", "organizations_url": "https://api.github.com/users/VanBarbascu/orgs", "repos_url": "https://api.github.com/users/VanBarbascu/repos", "events_url": "https://api.github.com/users/VanBarbascu/events{/privacy}", "received_events_url": "https://api.github.com/users/VanBarbascu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-29T17:48:30Z", "updated_at": "2023-05-30T20:36:58Z", "closed_at": "2023-05-30T14:54:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9123", "html_url": "https://github.com/near/nearcore/pull/9123", "diff_url": "https://github.com/near/nearcore/pull/9123.diff", "patch_url": "https://github.com/near/nearcore/pull/9123.patch", "merged_at": "2023-05-30T14:54:58Z"}, "body": "Information about the block/chunk production was not cleared between epochs.\r\n\r\nClear the metrics before adding new data.\r\nAdd `epoch_height` as a field.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9123/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9122", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9122/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9122/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9122/events", "html_url": "https://github.com/near/nearcore/pull/9122", "id": 1730595809, "node_id": "PR_kwDOCQUkYs5RmRFG", "number": 9122, "title": "fix: tests for invalid state parts", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-05-29T11:25:51Z", "updated_at": "2023-05-30T12:25:07Z", "closed_at": "2023-05-30T12:25:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9122", "html_url": "https://github.com/near/nearcore/pull/9122", "diff_url": "https://github.com/near/nearcore/pull/9122.diff", "patch_url": "https://github.com/near/nearcore/pull/9122.patch", "merged_at": "2023-05-30T12:25:07Z"}, "body": "Check that invalid state parts don't pass validation. Add missing `StorageError` kind for one of test cases. Now we check two scenarios:\r\n* MissingTrieValue - should be returned if some trie value is missing during validation - e.g. some intermediate node wasn't sent;\r\n* UnexpectedTrieValue - should be returned if some extra trie value was included to state part. Necessary to check, otherwise malicious actor can spam nodes with large amounts of non-existent nodes.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9122/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9122/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9120", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9120/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9120/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9120/events", "html_url": "https://github.com/near/nearcore/pull/9120", "id": 1727801321, "node_id": "PR_kwDOCQUkYs5Rcz6t", "number": 9120, "title": "refactor: use proper type for FlatState iterator values", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}, {"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-26T15:05:36Z", "updated_at": "2023-05-30T15:46:17Z", "closed_at": "2023-05-30T15:46:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9120", "html_url": "https://github.com/near/nearcore/pull/9120", "diff_url": "https://github.com/near/nearcore/pull/9120.diff", "patch_url": "https://github.com/near/nearcore/pull/9120.patch", "merged_at": "2023-05-30T15:46:16Z"}, "body": "use `FlatStateValue` instead of ra aw `Box<[u8]>`.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9120/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9119", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9119/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9119/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9119/events", "html_url": "https://github.com/near/nearcore/pull/9119", "id": 1727577240, "node_id": "PR_kwDOCQUkYs5RcDHF", "number": 9119, "title": "near-vm: add a nightly feature", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-26T12:56:18Z", "updated_at": "2023-05-30T10:56:56Z", "closed_at": "2023-05-30T09:24:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9119", "html_url": "https://github.com/near/nearcore/pull/9119", "diff_url": "https://github.com/near/nearcore/pull/9119.diff", "patch_url": "https://github.com/near/nearcore/pull/9119.patch", "merged_at": "2023-05-30T09:24:38Z"}, "body": "This replaces the wasmer2 test instead of adding a new one because of #8590.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9119/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9117", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9117/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9117/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9117/events", "html_url": "https://github.com/near/nearcore/pull/9117", "id": 1727463757, "node_id": "PR_kwDOCQUkYs5RbqWr", "number": 9117, "title": "refactor: remove redundant flat storage methods from RuntimeAdapter", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}, {"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-26T11:40:47Z", "updated_at": "2023-05-30T09:04:37Z", "closed_at": "2023-05-30T09:04:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9117", "html_url": "https://github.com/near/nearcore/pull/9117", "diff_url": "https://github.com/near/nearcore/pull/9117.diff", "patch_url": "https://github.com/near/nearcore/pull/9117.patch", "merged_at": "2023-05-30T09:04:36Z"}, "body": "With #9093 `RuntimeAdapter` has access to `FlatStorageManager` which makes all other flat storage related methods redundant. This PR removes those methods to keep `RuntimeAdapter` trait leaner.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9117/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9115", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9115/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9115/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9115/events", "html_url": "https://github.com/near/nearcore/pull/9115", "id": 1726812050, "node_id": "PR_kwDOCQUkYs5RZc-O", "number": 9115, "title": "feat: report validator stake", "user": {"login": "VanBarbascu", "id": 8384611, "node_id": "MDQ6VXNlcjgzODQ2MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/8384611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VanBarbascu", "html_url": "https://github.com/VanBarbascu", "followers_url": "https://api.github.com/users/VanBarbascu/followers", "following_url": "https://api.github.com/users/VanBarbascu/following{/other_user}", "gists_url": "https://api.github.com/users/VanBarbascu/gists{/gist_id}", "starred_url": "https://api.github.com/users/VanBarbascu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VanBarbascu/subscriptions", "organizations_url": "https://api.github.com/users/VanBarbascu/orgs", "repos_url": "https://api.github.com/users/VanBarbascu/repos", "events_url": "https://api.github.com/users/VanBarbascu/events{/privacy}", "received_events_url": "https://api.github.com/users/VanBarbascu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-26T02:50:57Z", "updated_at": "2023-05-30T20:34:03Z", "closed_at": "2023-05-30T16:46:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9115", "html_url": "https://github.com/near/nearcore/pull/9115", "diff_url": "https://github.com/near/nearcore/pull/9115.diff", "patch_url": "https://github.com/near/nearcore/pull/9115.patch", "merged_at": "2023-05-30T16:46:42Z"}, "body": "Get validator version on the go from every block we process and report it.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9115/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9113", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9113/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9113/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9113/events", "html_url": "https://github.com/near/nearcore/pull/9113", "id": 1726024360, "node_id": "PR_kwDOCQUkYs5RWxeP", "number": 9113, "title": "do not spend time tracing finite_wasm_gas", "user": {"login": "Ekleog-NEAR", "id": 96595974, "node_id": "U_kgDOBcHwBg", "avatar_url": "https://avatars.githubusercontent.com/u/96595974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ekleog-NEAR", "html_url": "https://github.com/Ekleog-NEAR", "followers_url": "https://api.github.com/users/Ekleog-NEAR/followers", "following_url": "https://api.github.com/users/Ekleog-NEAR/following{/other_user}", "gists_url": "https://api.github.com/users/Ekleog-NEAR/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ekleog-NEAR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ekleog-NEAR/subscriptions", "organizations_url": "https://api.github.com/users/Ekleog-NEAR/orgs", "repos_url": "https://api.github.com/users/Ekleog-NEAR/repos", "events_url": "https://api.github.com/users/Ekleog-NEAR/events{/privacy}", "received_events_url": "https://api.github.com/users/Ekleog-NEAR/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-25T15:15:45Z", "updated_at": "2023-05-26T12:36:59Z", "closed_at": "2023-05-26T12:36:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9113", "html_url": "https://github.com/near/nearcore/pull/9113", "diff_url": "https://github.com/near/nearcore/pull/9113.diff", "patch_url": "https://github.com/near/nearcore/pull/9113.patch", "merged_at": "2023-05-26T12:36:59Z"}, "body": "This should fix the issue we hit in https://github.com/near/nearcore/pull/9066 with one test being too slow.\r\n\r\nIntrinsic-ifying could help even more, but this should already bring a significant multiplier to the performance, which hopefully should be enough to handle all practical concerns.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9113/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9112", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9112/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9112/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9112/events", "html_url": "https://github.com/near/nearcore/pull/9112", "id": 1725846959, "node_id": "PR_kwDOCQUkYs5RWK4p", "number": 9112, "title": "fix(state-viewer): View actually latest state in `view-trie`, `dump-state` and other commands", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-25T13:36:14Z", "updated_at": "2023-05-26T13:54:33Z", "closed_at": "2023-05-26T13:54:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9112", "html_url": "https://github.com/near/nearcore/pull/9112", "diff_url": "https://github.com/near/nearcore/pull/9112.diff", "patch_url": "https://github.com/near/nearcore/pull/9112.patch", "merged_at": "2023-05-26T13:54:32Z"}, "body": "`load_trie()` used to consider the latest state `prev_chunk_root()` of the latest block. However, the latest state is available in `ChunkExtra` after the block processing.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9112/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9111", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9111/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9111/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9111/events", "html_url": "https://github.com/near/nearcore/pull/9111", "id": 1725682406, "node_id": "PR_kwDOCQUkYs5RVmrQ", "number": 9111, "title": "feat: swarmable FT loadtest", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-25T12:00:36Z", "updated_at": "2023-05-30T14:22:41Z", "closed_at": "2023-05-30T12:45:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9111", "html_url": "https://github.com/near/nearcore/pull/9111", "diff_url": "https://github.com/near/nearcore/pull/9111.diff", "patch_url": "https://github.com/near/nearcore/pull/9111.patch", "merged_at": "2023-05-30T12:45:35Z"}, "body": "To make the locust-based loadtest swarmable:\r\n- Create N accounts with deterministic name and keys\r\n- N workers pick one each to fund their users\r\n\r\nNote that the naive approach to share the same funding account across workers doesn't work. They will constantly invalidate each others transactions due to nonces.\r\n\r\nThis commit also moves some code out of `locustfile.py` to `base.py` and `ft.py` for a better separation of concerns.\r\n\r\nAnd it includes small fixes/improvements:\r\n- allow multiple FT contracts per worker\r\n- refresh_nonce sometimes raises a `KeyError` when the account was just created, catch it crudely in a try-catch retry loop\r\n- Provide `locust_name` arguments to show better statistics on requests", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9111/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9110", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9110/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9110/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9110/events", "html_url": "https://github.com/near/nearcore/pull/9110", "id": 1725641730, "node_id": "PR_kwDOCQUkYs5RVd2Y", "number": 9110, "title": "Fix: split_storage_migration.sh adjustments", "user": {"login": "andrei-near", "id": 122784628, "node_id": "U_kgDOB1GLdA", "avatar_url": "https://avatars.githubusercontent.com/u/122784628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrei-near", "html_url": "https://github.com/andrei-near", "followers_url": "https://api.github.com/users/andrei-near/followers", "following_url": "https://api.github.com/users/andrei-near/following{/other_user}", "gists_url": "https://api.github.com/users/andrei-near/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrei-near/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrei-near/subscriptions", "organizations_url": "https://api.github.com/users/andrei-near/orgs", "repos_url": "https://api.github.com/users/andrei-near/repos", "events_url": "https://api.github.com/users/andrei-near/events{/privacy}", "received_events_url": "https://api.github.com/users/andrei-near/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-25T11:34:42Z", "updated_at": "2023-05-26T12:09:11Z", "closed_at": "2023-05-26T12:09:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9110", "html_url": "https://github.com/near/nearcore/pull/9110", "diff_url": "https://github.com/near/nearcore/pull/9110.diff", "patch_url": "https://github.com/near/nearcore/pull/9110.patch", "merged_at": "2023-05-26T12:09:09Z"}, "body": "1) set -eou pipefail: \r\n   -e : immediately exit if any command has a non-zero exit status\r\n   -o pipefail : setting prevents errors in a pipeline from being masked\r\n   -u : reference to any unreferenced variable causes the program to immediately exit\r\n2) install awscli \r\n3) check if \"cold_head_height\" appeared. This means that cold storage migration is complete\r\n", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9110/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9110/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9109", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9109/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9109/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9109/events", "html_url": "https://github.com/near/nearcore/pull/9109", "id": 1725463615, "node_id": "PR_kwDOCQUkYs5RU28d", "number": 9109, "title": "refactor: Clean flat state via range", "user": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}, {"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-05-25T09:36:46Z", "updated_at": "2023-05-26T09:03:53Z", "closed_at": "2023-05-26T09:03:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9109", "html_url": "https://github.com/near/nearcore/pull/9109", "diff_url": "https://github.com/near/nearcore/pull/9109.diff", "patch_url": "https://github.com/near/nearcore/pull/9109.patch", "merged_at": "2023-05-26T09:03:52Z"}, "body": "Use range deletion in `clean_state` when removing values from `FlatState` column. Addresses https://github.com/near/nearcore/issues/8332", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9109/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9108", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9108/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9108/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9108/events", "html_url": "https://github.com/near/nearcore/pull/9108", "id": 1724937083, "node_id": "PR_kwDOCQUkYs5RTGYu", "number": 9108, "title": "chore: bump crates version to 0.17.0", "user": {"login": "miraclx", "id": 16881812, "node_id": "MDQ6VXNlcjE2ODgxODEy", "avatar_url": "https://avatars.githubusercontent.com/u/16881812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miraclx", "html_url": "https://github.com/miraclx", "followers_url": "https://api.github.com/users/miraclx/followers", "following_url": "https://api.github.com/users/miraclx/following{/other_user}", "gists_url": "https://api.github.com/users/miraclx/gists{/gist_id}", "starred_url": "https://api.github.com/users/miraclx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miraclx/subscriptions", "organizations_url": "https://api.github.com/users/miraclx/orgs", "repos_url": "https://api.github.com/users/miraclx/repos", "events_url": "https://api.github.com/users/miraclx/events{/privacy}", "received_events_url": "https://api.github.com/users/miraclx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-05-25T01:16:57Z", "updated_at": "2023-06-06T20:13:32Z", "closed_at": "2023-05-26T19:23:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9108", "html_url": "https://github.com/near/nearcore/pull/9108", "diff_url": "https://github.com/near/nearcore/pull/9108.diff", "patch_url": "https://github.com/near/nearcore/pull/9108.patch", "merged_at": "2023-05-26T19:23:05Z"}, "body": "Tagged: https://github.com/near/nearcore/releases/tag/crates-0.17.0\r\n\r\nA bunch of new crates have been introduced into the workspace that are now expected to be published going forward.\r\n\r\nThese crates depend on the current state (repo version) of our already published crates which introduces a conflict.\r\n\r\nThis patch reconsolidates the versions across the workspace to `0.17.0` following a series of fixes to the publishing pipeline.\r\n\r\nCheck here for a full changelog: https://github.com/near/nearcore/compare/crates-0.16.1...crates-0.17.0", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9108/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9107", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9107/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9107/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9107/events", "html_url": "https://github.com/near/nearcore/pull/9107", "id": 1724922627, "node_id": "PR_kwDOCQUkYs5RTDUR", "number": 9107, "title": "fix: implement valid AccountId generation from arbitrary data", "user": {"login": "miraclx", "id": 16881812, "node_id": "MDQ6VXNlcjE2ODgxODEy", "avatar_url": "https://avatars.githubusercontent.com/u/16881812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miraclx", "html_url": "https://github.com/miraclx", "followers_url": "https://api.github.com/users/miraclx/followers", "following_url": "https://api.github.com/users/miraclx/following{/other_user}", "gists_url": "https://api.github.com/users/miraclx/gists{/gist_id}", "starred_url": "https://api.github.com/users/miraclx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miraclx/subscriptions", "organizations_url": "https://api.github.com/users/miraclx/orgs", "repos_url": "https://api.github.com/users/miraclx/repos", "events_url": "https://api.github.com/users/miraclx/events{/privacy}", "received_events_url": "https://api.github.com/users/miraclx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-25T00:58:10Z", "updated_at": "2023-05-31T14:42:54Z", "closed_at": "2023-05-26T15:19:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9107", "html_url": "https://github.com/near/nearcore/pull/9107", "diff_url": "https://github.com/near/nearcore/pull/9107.diff", "patch_url": "https://github.com/near/nearcore/pull/9107.patch", "merged_at": "2023-05-26T15:19:03Z"}, "body": "Looks like the former implementation of `Arbitrary` for `AccountId` would assume all strings were well-formed `AccountId`'s. Skipping the validation logic. Which is untrue.\r\n\r\nThis patch swaps out the derive for a custom implementation that ensures all arbitrary byte slices are validated before an `AccountId` is constructed.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9107/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9107/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9106", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9106/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9106/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9106/events", "html_url": "https://github.com/near/nearcore/pull/9106", "id": 1724914386, "node_id": "PR_kwDOCQUkYs5RTBm3", "number": 9106, "title": "chore: revert near-account-id's MSRV", "user": {"login": "miraclx", "id": 16881812, "node_id": "MDQ6VXNlcjE2ODgxODEy", "avatar_url": "https://avatars.githubusercontent.com/u/16881812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miraclx", "html_url": "https://github.com/miraclx", "followers_url": "https://api.github.com/users/miraclx/followers", "following_url": "https://api.github.com/users/miraclx/following{/other_user}", "gists_url": "https://api.github.com/users/miraclx/gists{/gist_id}", "starred_url": "https://api.github.com/users/miraclx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miraclx/subscriptions", "organizations_url": "https://api.github.com/users/miraclx/orgs", "repos_url": "https://api.github.com/users/miraclx/repos", "events_url": "https://api.github.com/users/miraclx/events{/privacy}", "received_events_url": "https://api.github.com/users/miraclx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-05-25T00:46:38Z", "updated_at": "2023-05-26T14:53:24Z", "closed_at": "2023-05-26T14:53:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9106", "html_url": "https://github.com/near/nearcore/pull/9106", "diff_url": "https://github.com/near/nearcore/pull/9106.diff", "patch_url": "https://github.com/near/nearcore/pull/9106.patch", "merged_at": "2023-05-26T14:53:22Z"}, "body": "As it turns out, `cargo-package` normalizes crate manifests before it's eventually published to crates.io. This means we don't have to be locked on to `rustc 1.64` which stabilized workspace inheritance.\r\n\r\n~Although, compiling with `--all-features` activates the `arbitrary` dependency which requires `rustc 1.63`.~\r\n\r\n~From experimentation, it looks like when fuzzing, both `cargo-fuzz` and `afl.rs` inject the `fuzzing` CFG attribute.~\r\n\r\n~Which means, we can introduce the dep only when fuzzing, which should alleviate the pin, and keep us compiling just fine at `rustc 1.61`.~\r\n\r\nReverting back to `rustc 1.63` as the minimum supported rust version to compile with `--all-features` activated.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9106/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9104", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9104/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9104/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9104/events", "html_url": "https://github.com/near/nearcore/pull/9104", "id": 1724379869, "node_id": "PR_kwDOCQUkYs5RRNc5", "number": 9104, "title": "fix: flat-storage verify cmd", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-24T16:35:46Z", "updated_at": "2023-05-25T15:40:57Z", "closed_at": "2023-05-25T15:40:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9104", "html_url": "https://github.com/near/nearcore/pull/9104", "diff_url": "https://github.com/near/nearcore/pull/9104.diff", "patch_url": "https://github.com/near/nearcore/pull/9104.patch", "merged_at": "2023-05-25T15:40:57Z"}, "body": "* don't skip delayed receipts\r\n* properly deserialise values as `FlatStateValue`", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9104/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9103", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9103/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9103/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9103/events", "html_url": "https://github.com/near/nearcore/pull/9103", "id": 1724336562, "node_id": "PR_kwDOCQUkYs5RREAX", "number": 9103, "title": "make sure diffrunner fuzzer actually runs with contract prepare version v2", "user": {"login": "Ekleog-NEAR", "id": 96595974, "node_id": "U_kgDOBcHwBg", "avatar_url": "https://avatars.githubusercontent.com/u/96595974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ekleog-NEAR", "html_url": "https://github.com/Ekleog-NEAR", "followers_url": "https://api.github.com/users/Ekleog-NEAR/followers", "following_url": "https://api.github.com/users/Ekleog-NEAR/following{/other_user}", "gists_url": "https://api.github.com/users/Ekleog-NEAR/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ekleog-NEAR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ekleog-NEAR/subscriptions", "organizations_url": "https://api.github.com/users/Ekleog-NEAR/orgs", "repos_url": "https://api.github.com/users/Ekleog-NEAR/repos", "events_url": "https://api.github.com/users/Ekleog-NEAR/events{/privacy}", "received_events_url": "https://api.github.com/users/Ekleog-NEAR/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-24T16:08:25Z", "updated_at": "2023-05-25T11:34:40Z", "closed_at": "2023-05-25T11:34:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9103", "html_url": "https://github.com/near/nearcore/pull/9103", "diff_url": "https://github.com/near/nearcore/pull/9103.diff", "patch_url": "https://github.com/near/nearcore/pull/9103.patch", "merged_at": "2023-05-25T11:34:40Z"}, "body": "Without that, it tries running with contract prepare version v1 since the near-vm landing revert.\r\nIn turn, this means that gas accounting becomes nonsensical, as near-vm has its own gas accounting that is only compatible with contract prepare version v1, and is only expected to be consistent with contract prepare version v1", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9103/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9093", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9093/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9093/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9093/events", "html_url": "https://github.com/near/nearcore/pull/9093", "id": 1721532492, "node_id": "PR_kwDOCQUkYs5RHilT", "number": 9093, "title": "feat: enable FlatState values inlining migration in the background", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-23T08:38:54Z", "updated_at": "2023-05-25T17:15:07Z", "closed_at": "2023-05-25T17:15:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9093", "html_url": "https://github.com/near/nearcore/pull/9093", "diff_url": "https://github.com/near/nearcore/pull/9093.diff", "patch_url": "https://github.com/near/nearcore/pull/9093.patch", "merged_at": "2023-05-25T17:15:06Z"}, "body": "Part of #8243.\r\n\r\nThis PR enables the migration added in #9037 to be executed in the background on the running node.\r\nIt supports graceful stop when the node is shut down. The implementation is heavily inspired by state sync background dumping to S3.\r\n\r\nThis PR also introduces a new column `DBCol::Misc`. For now it only stores the status of the migration, but it can hold any small pieces of data, similar to `DBCol::BlockMisc`.\r\n\r\n`FlatStorageManager` is exposed as part of `RuntimeAdapter` in this PR. This is the first step in cleaning `RuntimeAdapter` from all other flat storage related methods, as the manager can be directly used instead.\r\n\r\nTested by manually running a node and checking metrics and log messages. After that flat storage was checked with `flat-storage verify` cmd.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9093/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9093/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9091", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9091/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9091/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9091/events", "html_url": "https://github.com/near/nearcore/pull/9091", "id": 1720946597, "node_id": "PR_kwDOCQUkYs5RFhor", "number": 9091, "title": "jsonrpc: encode state proofs using base64 and remove deprecated field", "user": {"login": "mina86", "id": 32383, "node_id": "MDQ6VXNlcjMyMzgz", "avatar_url": "https://avatars.githubusercontent.com/u/32383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mina86", "html_url": "https://github.com/mina86", "followers_url": "https://api.github.com/users/mina86/followers", "following_url": "https://api.github.com/users/mina86/following{/other_user}", "gists_url": "https://api.github.com/users/mina86/gists{/gist_id}", "starred_url": "https://api.github.com/users/mina86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mina86/subscriptions", "organizations_url": "https://api.github.com/users/mina86/orgs", "repos_url": "https://api.github.com/users/mina86/repos", "events_url": "https://api.github.com/users/mina86/events{/privacy}", "received_events_url": "https://api.github.com/users/mina86/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-23T01:00:13Z", "updated_at": "2023-05-25T16:34:55Z", "closed_at": "2023-05-25T16:01:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9091", "html_url": "https://github.com/near/nearcore/pull/9091", "diff_url": "https://github.com/near/nearcore/pull/9091.diff", "patch_url": "https://github.com/near/nearcore/pull/9091.patch", "merged_at": "2023-05-25T16:01:29Z"}, "body": "Change ViewStateResult::proof serialisation to base64.  This has been\r\nthe plan all along but back when proof was added\u00b9 I forgot to follow\r\nup with encoding change.  At the moment the proof is sent as an array\r\nof integers which is inefficient and inconsistent with how binary data\r\nis other JSON messages is encoded.\r\n\r\nFurthermore, follow up with the deprecation notices: don\u2019t include\r\nproof field in StateItem and don\u2019t include proof field in the response\r\nif it hasn\u2019t been requested.\r\n\r\n\u00b9 See commit faa1811d1625: \u2018add proof to ViewState response\u2019.\r\n", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9091/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9088", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9088/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9088/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9088/events", "html_url": "https://github.com/near/nearcore/pull/9088", "id": 1719488729, "node_id": "PR_kwDOCQUkYs5RAbzl", "number": 9088, "title": "test: Add test for `iter_flat_state_entries`", "user": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1142533406, "node_id": "MDU6TGFiZWwxMTQyNTMzNDA2", "url": "https://api.github.com/repos/near/nearcore/labels/A-testing", "name": "A-testing", "color": "0000ff", "default": false, "description": "Area: Unit testing / integration testing"}, {"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-05-22T11:27:18Z", "updated_at": "2023-05-26T08:41:39Z", "closed_at": "2023-05-26T08:41:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9088", "html_url": "https://github.com/near/nearcore/pull/9088", "diff_url": "https://github.com/near/nearcore/pull/9088.diff", "patch_url": "https://github.com/near/nearcore/pull/9088.patch", "merged_at": "2023-05-26T08:41:38Z"}, "body": "Add test for `iter_flat_state_entries` as mention in PR https://github.com/near/nearcore/pull/9079#event-9289899654", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9088/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9082", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9082/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9082/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9082/events", "html_url": "https://github.com/near/nearcore/pull/9082", "id": 1716333723, "node_id": "PR_kwDOCQUkYs5Q2CKB", "number": 9082, "title": "fix: check for latest complete epoch before an iteration of state dump", "user": {"login": "ppca", "id": 16693342, "node_id": "MDQ6VXNlcjE2NjkzMzQy", "avatar_url": "https://avatars.githubusercontent.com/u/16693342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppca", "html_url": "https://github.com/ppca", "followers_url": "https://api.github.com/users/ppca/followers", "following_url": "https://api.github.com/users/ppca/following{/other_user}", "gists_url": "https://api.github.com/users/ppca/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppca/subscriptions", "organizations_url": "https://api.github.com/users/ppca/orgs", "repos_url": "https://api.github.com/users/ppca/repos", "events_url": "https://api.github.com/users/ppca/events{/privacy}", "received_events_url": "https://api.github.com/users/ppca/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-18T22:14:45Z", "updated_at": "2023-05-23T21:50:06Z", "closed_at": "2023-05-23T21:50:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9082", "html_url": "https://github.com/near/nearcore/pull/9082", "diff_url": "https://github.com/near/nearcore/pull/9082.diff", "patch_url": "https://github.com/near/nearcore/pull/9082.patch", "merged_at": "2023-05-23T21:50:05Z"}, "body": "ND-437: basically even when the node is in progress for an epoch, also check if the latest local complete epoch is newer than the epoch it's in progress for, if so, switch to dump for the latest complete epoch.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9082/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9079", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9079/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9079/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9079/events", "html_url": "https://github.com/near/nearcore/pull/9079", "id": 1716040227, "node_id": "PR_kwDOCQUkYs5Q1Bmd", "number": 9079, "title": "refactor: convenient iteration over flat state entries", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-05-18T18:00:28Z", "updated_at": "2023-05-19T14:21:22Z", "closed_at": "2023-05-19T14:21:22Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9079", "html_url": "https://github.com/near/nearcore/pull/9079", "diff_url": "https://github.com/near/nearcore/pull/9079.diff", "patch_url": "https://github.com/near/nearcore/pull/9079.patch", "merged_at": "2023-05-19T14:21:22Z"}, "body": "Needed for #8927.\r\n\r\n1. From what I see in https://doc.rust-lang.org/rust-by-example/scope/lifetime/explicit.html, lifetimes introduce restriction over passed variables - they must outlive function lifetime. But this doesn't make sense for iterator. It doesn't save much memory, because iterator is expected to return lots of vectors anyway. And slices `from` and `to` are converted to vectors inside anyway. This allows us to construct DB keys inside `iter_flat_state_entries`.\r\n2. Construction of DB keys is hidden inside `flat` module now. You give state keys and receive state keys back, without knowing how they are stored on the lower level.\r\n\r\n## Testing\r\n\r\n@jbajic would you like to cover `iter_flat_state_entries` with some test? \r\nThis function will be covered by integration tests for state parts anyway and it is not used much currently.\r\nBut it seems nice to have a test which creates flat storage for, say, 3 shards, writes some KV pairs to it and then checks that flat state iterator gives us correct data.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9079/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9078", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9078/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9078/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9078/events", "html_url": "https://github.com/near/nearcore/pull/9078", "id": 1715275920, "node_id": "PR_kwDOCQUkYs5QyZ5j", "number": 9078, "title": "refactor: minor: prefer borrowing instead of using `ref`", "user": {"login": "akhi3030", "id": 4679209, "node_id": "MDQ6VXNlcjQ2NzkyMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4679209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akhi3030", "html_url": "https://github.com/akhi3030", "followers_url": "https://api.github.com/users/akhi3030/followers", "following_url": "https://api.github.com/users/akhi3030/following{/other_user}", "gists_url": "https://api.github.com/users/akhi3030/gists{/gist_id}", "starred_url": "https://api.github.com/users/akhi3030/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akhi3030/subscriptions", "organizations_url": "https://api.github.com/users/akhi3030/orgs", "repos_url": "https://api.github.com/users/akhi3030/repos", "events_url": "https://api.github.com/users/akhi3030/events{/privacy}", "received_events_url": "https://api.github.com/users/akhi3030/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-18T09:01:21Z", "updated_at": "2023-05-22T12:44:46Z", "closed_at": "2023-05-22T12:44:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9078", "html_url": "https://github.com/near/nearcore/pull/9078", "diff_url": "https://github.com/near/nearcore/pull/9078.diff", "patch_url": "https://github.com/near/nearcore/pull/9078.patch", "merged_at": "2023-05-22T12:44:46Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9078/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9078/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9076", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9076/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9076/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9076/events", "html_url": "https://github.com/near/nearcore/pull/9076", "id": 1714395853, "node_id": "PR_kwDOCQUkYs5QvcMr", "number": 9076, "title": "refactor: put `sync_prev_prev_hash` to `obtain_state_part`", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-05-17T18:04:13Z", "updated_at": "2023-05-22T11:42:30Z", "closed_at": "2023-05-22T11:42:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9076", "html_url": "https://github.com/near/nearcore/pull/9076", "diff_url": "https://github.com/near/nearcore/pull/9076.diff", "patch_url": "https://github.com/near/nearcore/pull/9076.patch", "merged_at": "2023-05-22T11:42:30Z"}, "body": "Replace `block_hash` in `RuntimeAdapter::obtain_state_part` with `prev_hash`.\r\n\r\nThis doesn't impact functionality but is quite convenient for flat storage integration here: #8927. Existing obstacle is that flat storage includes aggregated updates until flat storage block hash, **included**. So if we want block hash to correspond to state root, state root must be **post state root** for a block.\r\n\r\nExisting tests must not fail. Notably, contract precompilation tests passed incorrect hash, but we didn't notice that because block hash was used only for getting shard uids.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9076/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9075", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9075/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9075/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9075/events", "html_url": "https://github.com/near/nearcore/pull/9075", "id": 1714132440, "node_id": "PR_kwDOCQUkYs5QuibJ", "number": 9075, "title": "test: locust based loadtest PoC", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-05-17T15:13:03Z", "updated_at": "2023-05-25T10:06:54Z", "closed_at": "2023-05-25T10:06:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9075", "html_url": "https://github.com/near/nearcore/pull/9075", "diff_url": "https://github.com/near/nearcore/pull/9075.diff", "patch_url": "https://github.com/near/nearcore/pull/9075.patch", "merged_at": "2023-05-25T10:06:53Z"}, "body": "Introduce the base structure to send transaction with locust.\r\n\r\nEventually, this will be made into a full TPS benchmark suite as detailed in #8999.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9075/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9074", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9074/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9074/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9074/events", "html_url": "https://github.com/near/nearcore/pull/9074", "id": 1713931608, "node_id": "PR_kwDOCQUkYs5Qt2Zw", "number": 9074, "title": "core: minor code deduplication", "user": {"login": "mina86", "id": 32383, "node_id": "MDQ6VXNlcjMyMzgz", "avatar_url": "https://avatars.githubusercontent.com/u/32383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mina86", "html_url": "https://github.com/mina86", "followers_url": "https://api.github.com/users/mina86/followers", "following_url": "https://api.github.com/users/mina86/following{/other_user}", "gists_url": "https://api.github.com/users/mina86/gists{/gist_id}", "starred_url": "https://api.github.com/users/mina86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mina86/subscriptions", "organizations_url": "https://api.github.com/users/mina86/orgs", "repos_url": "https://api.github.com/users/mina86/repos", "events_url": "https://api.github.com/users/mina86/events{/privacy}", "received_events_url": "https://api.github.com/users/mina86/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-17T13:32:08Z", "updated_at": "2023-05-17T18:17:45Z", "closed_at": "2023-05-17T15:13:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9074", "html_url": "https://github.com/near/nearcore/pull/9074", "diff_url": "https://github.com/near/nearcore/pull/9074.diff", "patch_url": "https://github.com/near/nearcore/pull/9074.patch", "merged_at": "2023-05-17T15:13:07Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9074/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9074/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9072", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9072/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9072/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9072/events", "html_url": "https://github.com/near/nearcore/pull/9072", "id": 1713806118, "node_id": "PR_kwDOCQUkYs5QtaeQ", "number": 9072, "title": "refactor: Extract `update_cache` in store", "user": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}], "state": "closed", "locked": false, "assignee": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2023-05-17T12:32:14Z", "updated_at": "2023-05-22T18:58:12Z", "closed_at": "2023-05-22T18:58:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9072", "html_url": "https://github.com/near/nearcore/pull/9072", "diff_url": "https://github.com/near/nearcore/pull/9072.diff", "patch_url": "https://github.com/near/nearcore/pull/9072.patch", "merged_at": "2023-05-22T18:58:10Z"}, "body": "Partially addresses issue #7425 ", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9072/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9071", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9071/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9071/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9071/events", "html_url": "https://github.com/near/nearcore/pull/9071", "id": 1713770587, "node_id": "PR_kwDOCQUkYs5QtSjn", "number": 9071, "title": "feat(state-viewer): Display kickouts information", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-17T12:12:46Z", "updated_at": "2023-05-17T14:43:09Z", "closed_at": "2023-05-17T14:43:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9071", "html_url": "https://github.com/near/nearcore/pull/9071", "diff_url": "https://github.com/near/nearcore/pull/9071.diff", "patch_url": "https://github.com/near/nearcore/pull/9071.patch", "merged_at": "2023-05-17T14:43:08Z"}, "body": "Extends the `neard view-state epoch-info` command to show only the kickouts.\r\nFixes that tool not to panic while displaying EpochInfo which doesn't have the corresponding blocks.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9071/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9070", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9070/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9070/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9070/events", "html_url": "https://github.com/near/nearcore/pull/9070", "id": 1713659441, "node_id": "PR_kwDOCQUkYs5Qs54B", "number": 9070, "title": "fix: don't panic on SIGTERM during flat storage creation", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-05-17T11:10:23Z", "updated_at": "2023-05-19T18:00:35Z", "closed_at": "2023-05-19T18:00:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9070", "html_url": "https://github.com/near/nearcore/pull/9070", "diff_url": "https://github.com/near/nearcore/pull/9070.diff", "patch_url": "https://github.com/near/nearcore/pull/9070.patch", "merged_at": "2023-05-19T18:00:35Z"}, "body": "Fixes panicking of threads fetching state on flat storage creation.\r\n\r\nIf binary is stopped by SIGTERM, channel for receiving messages with state part stats can be disconnected. We shouldn't panic in such case, it's enough to log an error. Still, the node will stall for ~5 minutes because existing rayon threads need to finish heavy IO work. \r\n\r\nOriginal thread https://near.zulipchat.com/#narrow/stream/308695-pagoda.2Fprivate/topic/Flat.20storage.20crash.20on.20SIGTERM.201.2E34-RC1/near/358803319", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9070/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9070/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9069", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9069/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9069/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9069/events", "html_url": "https://github.com/near/nearcore/pull/9069", "id": 1713650902, "node_id": "PR_kwDOCQUkYs5Qs3_r", "number": 9069, "title": "feature: Add transaction pool size to Config", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5349008307, "node_id": "LA_kwDOCQUkYs8AAAABPtNjsw", "url": "https://api.github.com/repos/near/nearcore/labels/A-congestion", "name": "A-congestion", "color": "1863F5", "default": false, "description": "Work aimed at ensuring good system performance under congestion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-17T11:05:10Z", "updated_at": "2023-06-12T09:58:35Z", "closed_at": "2023-05-26T13:34:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9069", "html_url": "https://github.com/near/nearcore/pull/9069", "diff_url": "https://github.com/near/nearcore/pull/9069.diff", "patch_url": "https://github.com/near/nearcore/pull/9069.patch", "merged_at": "2023-05-26T13:34:46Z"}, "body": "So that it will be read from `config.json` that each node provides\r\n\r\nThis is a part of https://github.com/near/nearcore/issues/3284", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9069/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9068", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9068/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9068/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9068/events", "html_url": "https://github.com/near/nearcore/pull/9068", "id": 1713535500, "node_id": "PR_kwDOCQUkYs5QseuN", "number": 9068, "title": "chore: add support for workspace inheritance to themis", "user": {"login": "miraclx", "id": 16881812, "node_id": "MDQ6VXNlcjE2ODgxODEy", "avatar_url": "https://avatars.githubusercontent.com/u/16881812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miraclx", "html_url": "https://github.com/miraclx", "followers_url": "https://api.github.com/users/miraclx/followers", "following_url": "https://api.github.com/users/miraclx/following{/other_user}", "gists_url": "https://api.github.com/users/miraclx/gists{/gist_id}", "starred_url": "https://api.github.com/users/miraclx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miraclx/subscriptions", "organizations_url": "https://api.github.com/users/miraclx/orgs", "repos_url": "https://api.github.com/users/miraclx/repos", "events_url": "https://api.github.com/users/miraclx/events{/privacy}", "received_events_url": "https://api.github.com/users/miraclx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-17T09:51:22Z", "updated_at": "2023-05-17T21:02:09Z", "closed_at": "2023-05-17T21:02:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9068", "html_url": "https://github.com/near/nearcore/pull/9068", "diff_url": "https://github.com/near/nearcore/pull/9068.diff", "patch_url": "https://github.com/near/nearcore/pull/9068.patch", "merged_at": "2023-05-17T21:02:07Z"}, "body": "`themis` needs to read directly from package manifests in some cases. Since we updated to workspace inheritance, this format has changed.\r\n\r\nTo avoid the flow potentially breaking in the future, this patch allows the interpretation of `.workspace = true` entries.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9068/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9068/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9067", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9067/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9067/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9067/events", "html_url": "https://github.com/near/nearcore/pull/9067", "id": 1712929221, "node_id": "PR_kwDOCQUkYs5QqdHY", "number": 9067, "title": "Switch to using serde_with", "user": {"login": "mina86", "id": 32383, "node_id": "MDQ6VXNlcjMyMzgz", "avatar_url": "https://avatars.githubusercontent.com/u/32383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mina86", "html_url": "https://github.com/mina86", "followers_url": "https://api.github.com/users/mina86/followers", "following_url": "https://api.github.com/users/mina86/following{/other_user}", "gists_url": "https://api.github.com/users/mina86/gists{/gist_id}", "starred_url": "https://api.github.com/users/mina86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mina86/subscriptions", "organizations_url": "https://api.github.com/users/mina86/orgs", "repos_url": "https://api.github.com/users/mina86/repos", "events_url": "https://api.github.com/users/mina86/events{/privacy}", "received_events_url": "https://api.github.com/users/mina86/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-05-17T00:58:56Z", "updated_at": "2023-05-18T16:59:16Z", "closed_at": "2023-05-18T16:56:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9067", "html_url": "https://github.com/near/nearcore/pull/9067", "diff_url": "https://github.com/near/nearcore/pull/9067.diff", "patch_url": "https://github.com/near/nearcore/pull/9067.patch", "merged_at": "2023-05-18T16:56:39Z"}, "body": "Using serde_with to customise serde serialisation removes some of the\r\ncode while at the same time enables more powerful customisation\r\nannotations.\r\n\r\nBringing the dependency forces update of base64 and chrono\r\ndependencies.\r\n", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9067/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9067/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9066", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9066/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9066/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9066/events", "html_url": "https://github.com/near/nearcore/pull/9066", "id": 1712318743, "node_id": "PR_kwDOCQUkYs5QoaQK", "number": 9066, "title": "finite-wasm: add a nightly feature", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-05-16T16:04:59Z", "updated_at": "2023-05-25T12:41:45Z", "closed_at": "2023-05-25T12:41:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9066", "html_url": "https://github.com/near/nearcore/pull/9066", "diff_url": "https://github.com/near/nearcore/pull/9066.diff", "patch_url": "https://github.com/near/nearcore/pull/9066.patch", "merged_at": "2023-05-25T12:41:44Z"}, "body": "It seems to have been fairly uneventful, except for one thing: we get different error outputs from wasmer2 vs near-vm.\r\n\r\nI do believe this is not a protocol-affecting change though, as these error messages don't make it onto the chain?\r\n\r\nReview note: best reviewed commit-by-commit. See individual descriptions.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9066/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9064", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9064/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9064/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9064/events", "html_url": "https://github.com/near/nearcore/pull/9064", "id": 1711615960, "node_id": "PR_kwDOCQUkYs5QmBV_", "number": 9064, "title": "fix(metrics): Enforce 'near_' prefix for new metrics", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-16T09:22:29Z", "updated_at": "2023-05-17T08:59:12Z", "closed_at": "2023-05-16T11:59:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9064", "html_url": "https://github.com/near/nearcore/pull/9064", "diff_url": "https://github.com/near/nearcore/pull/9064.diff", "patch_url": "https://github.com/near/nearcore/pull/9064.patch", "merged_at": "2023-05-16T11:59:57Z"}, "body": "Expect metrics exported by nearcore to have a common prefix. This helps in the following cases:\r\n* Avoids name conflicts with metrics from other systems.\r\n* Helps filter and query metrics\r\n* Makes it easy to understand which binary export a certain metric.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9064/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9064/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9063", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9063/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9063/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9063/events", "html_url": "https://github.com/near/nearcore/pull/9063", "id": 1711602341, "node_id": "PR_kwDOCQUkYs5Ql-aN", "number": 9063, "title": "properly align all fields in vm offsets", "user": {"login": "Ekleog-NEAR", "id": 96595974, "node_id": "U_kgDOBcHwBg", "avatar_url": "https://avatars.githubusercontent.com/u/96595974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ekleog-NEAR", "html_url": "https://github.com/Ekleog-NEAR", "followers_url": "https://api.github.com/users/Ekleog-NEAR/followers", "following_url": "https://api.github.com/users/Ekleog-NEAR/following{/other_user}", "gists_url": "https://api.github.com/users/Ekleog-NEAR/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ekleog-NEAR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ekleog-NEAR/subscriptions", "organizations_url": "https://api.github.com/users/Ekleog-NEAR/orgs", "repos_url": "https://api.github.com/users/Ekleog-NEAR/repos", "events_url": "https://api.github.com/users/Ekleog-NEAR/events{/privacy}", "received_events_url": "https://api.github.com/users/Ekleog-NEAR/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-16T09:14:31Z", "updated_at": "2023-05-16T12:52:47Z", "closed_at": "2023-05-16T12:52:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9063", "html_url": "https://github.com/near/nearcore/pull/9063", "diff_url": "https://github.com/near/nearcore/pull/9063.diff", "patch_url": "https://github.com/near/nearcore/pull/9063.patch", "merged_at": "2023-05-16T12:52:47Z"}, "body": "See also prior discussion at https://github.com/near/nearcore-private/pull/73 ; before we decided that the issue does not actually deserve being a security issue (as it shouldn\u2019t be exploitable on x86_64, the only platform we run in production)", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9063/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9062", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9062/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9062/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9062/events", "html_url": "https://github.com/near/nearcore/pull/9062", "id": 1710964034, "node_id": "PR_kwDOCQUkYs5Qj1k8", "number": 9062, "title": "[neard] Add `view-state clear-cache` command to neard", "user": {"login": "shreyan-gupta", "id": 16697830, "node_id": "MDQ6VXNlcjE2Njk3ODMw", "avatar_url": "https://avatars.githubusercontent.com/u/16697830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shreyan-gupta", "html_url": "https://github.com/shreyan-gupta", "followers_url": "https://api.github.com/users/shreyan-gupta/followers", "following_url": "https://api.github.com/users/shreyan-gupta/following{/other_user}", "gists_url": "https://api.github.com/users/shreyan-gupta/gists{/gist_id}", "starred_url": "https://api.github.com/users/shreyan-gupta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shreyan-gupta/subscriptions", "organizations_url": "https://api.github.com/users/shreyan-gupta/orgs", "repos_url": "https://api.github.com/users/shreyan-gupta/repos", "events_url": "https://api.github.com/users/shreyan-gupta/events{/privacy}", "received_events_url": "https://api.github.com/users/shreyan-gupta/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-15T23:03:32Z", "updated_at": "2023-05-18T17:18:20Z", "closed_at": "2023-05-18T17:18:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9062", "html_url": "https://github.com/near/nearcore/pull/9062", "diff_url": "https://github.com/near/nearcore/pull/9062.diff", "patch_url": "https://github.com/near/nearcore/pull/9062.patch", "merged_at": "2023-05-18T17:18:19Z"}, "body": "This PR is related to issue https://github.com/near/nearcore/issues/8650\r\n\r\nIn this PR we are adding a new `clear-cache` subcommand under neard command `view-state`.\r\n\r\nThe idea is to create a command to reset state/delete all recoverable data from the DB. `clear-cache` command, for now, deletes all data in the column `DBCol::CachedContractCode`.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9062/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9059", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9059/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9059/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9059/events", "html_url": "https://github.com/near/nearcore/pull/9059", "id": 1710081495, "node_id": "PR_kwDOCQUkYs5Qg2Vf", "number": 9059, "title": "param-estimator: use value_enum for vm_kind", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-15T13:14:10Z", "updated_at": "2023-05-15T18:46:26Z", "closed_at": "2023-05-15T18:46:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9059", "html_url": "https://github.com/near/nearcore/pull/9059", "diff_url": "https://github.com/near/nearcore/pull/9059.diff", "patch_url": "https://github.com/near/nearcore/pull/9059.patch", "merged_at": "2023-05-15T18:46:25Z"}, "body": "This change lets param-estimator automatically pick up new `VMKind`s. But more importantly its just way less error prone now.\r\n\r\nFixes https://github.com/near/nearcore/issues/8918", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9059/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9057", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9057/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9057/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9057/events", "html_url": "https://github.com/near/nearcore/pull/9057", "id": 1709919401, "node_id": "PR_kwDOCQUkYs5QgSrd", "number": 9057, "title": "chore: fix publish pipeline", "user": {"login": "miraclx", "id": 16881812, "node_id": "MDQ6VXNlcjE2ODgxODEy", "avatar_url": "https://avatars.githubusercontent.com/u/16881812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miraclx", "html_url": "https://github.com/miraclx", "followers_url": "https://api.github.com/users/miraclx/followers", "following_url": "https://api.github.com/users/miraclx/following{/other_user}", "gists_url": "https://api.github.com/users/miraclx/gists{/gist_id}", "starred_url": "https://api.github.com/users/miraclx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miraclx/subscriptions", "organizations_url": "https://api.github.com/users/miraclx/orgs", "repos_url": "https://api.github.com/users/miraclx/repos", "events_url": "https://api.github.com/users/miraclx/events{/privacy}", "received_events_url": "https://api.github.com/users/miraclx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-15T11:43:11Z", "updated_at": "2023-05-17T09:26:28Z", "closed_at": "2023-05-17T09:26:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9057", "html_url": "https://github.com/near/nearcore/pull/9057", "diff_url": "https://github.com/near/nearcore/pull/9057.diff", "patch_url": "https://github.com/near/nearcore/pull/9057.patch", "merged_at": "2023-05-17T09:26:26Z"}, "body": "The publishing pipeline has been borked for quite a while for a variety of reasons, between workspace inheritance, crate aliases, etc..\r\n\r\nThis patch is only one part of the solution. The rest of it is patched in a fork of cargo-workspaces: https://github.com/miraclx/cargo-workspaces/pull/1.\r\n\r\nThat patch also now includes pre-emptive error reports, which would help move any potential errors thrown at CI runtime on master to CI runtime at the PR level. ~I'll extend the buildkite pipeline in a bit.~ (this will come in a follow-up PR)\r\n\r\nFixes #8604.\r\nFurther context: https://github.com/near/nearcore/pull/8605", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9057/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9056", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9056/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9056/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9056/events", "html_url": "https://github.com/near/nearcore/pull/9056", "id": 1709792243, "node_id": "PR_kwDOCQUkYs5Qf2pK", "number": 9056, "title": "fix: Adjust transaction pool size after draining iterator", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-15T10:26:50Z", "updated_at": "2023-06-12T09:58:33Z", "closed_at": "2023-05-15T11:03:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9056", "html_url": "https://github.com/near/nearcore/pull/9056", "diff_url": "https://github.com/near/nearcore/pull/9056.diff", "patch_url": "https://github.com/near/nearcore/pull/9056.patch", "merged_at": "2023-05-15T11:03:03Z"}, "body": "Previous logic didn't take into account that the pool can be modified by the iterator created for it.\r\n\r\nI think overall this behavior is quite confusing and I'm not sure it is warranted, so I'm looking for ways to simplify this.\r\n\r\nThis is a part of https://github.com/near/nearcore/issues/3284", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9056/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9056/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9055", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9055/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9055/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9055/events", "html_url": "https://github.com/near/nearcore/pull/9055", "id": 1708993805, "node_id": "PR_kwDOCQUkYs5QdOyQ", "number": 9055, "title": "core: avoid memory allocations when dealing with Serde data", "user": {"login": "mina86", "id": 32383, "node_id": "MDQ6VXNlcjMyMzgz", "avatar_url": "https://avatars.githubusercontent.com/u/32383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mina86", "html_url": "https://github.com/mina86", "followers_url": "https://api.github.com/users/mina86/followers", "following_url": "https://api.github.com/users/mina86/following{/other_user}", "gists_url": "https://api.github.com/users/mina86/gists{/gist_id}", "starred_url": "https://api.github.com/users/mina86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mina86/subscriptions", "organizations_url": "https://api.github.com/users/mina86/orgs", "repos_url": "https://api.github.com/users/mina86/repos", "events_url": "https://api.github.com/users/mina86/events{/privacy}", "received_events_url": "https://api.github.com/users/mina86/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-14T16:07:03Z", "updated_at": "2023-05-16T08:08:31Z", "closed_at": "2023-05-16T06:28:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9055", "html_url": "https://github.com/near/nearcore/pull/9055", "diff_url": "https://github.com/near/nearcore/pull/9055.diff", "patch_url": "https://github.com/near/nearcore/pull/9055.patch", "merged_at": "2023-05-16T06:28:58Z"}, "body": "1. Use serde::from_slice instead of String::from_utf8+serde::from_str\r\n   to avoid separate UTF-8 validation and vector allocation.\r\n2. Use serde:\\:de::Visitor to avoid String allocation when\r\n   deserialising base64 data.\r\n3. Switch serialising from using serialize_str to calling collect_str\r\n   on base64_display which again avoids temporary String.\r\n4. Postpone when base64 decode error is converted to avoid boxing it.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9055/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9055/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9053", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9053/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9053/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9053/events", "html_url": "https://github.com/near/nearcore/pull/9053", "id": 1707975192, "node_id": "PR_kwDOCQUkYs5QZ_y2", "number": 9053, "title": "near-vm: add to diffrunner", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-12T17:30:11Z", "updated_at": "2023-05-16T06:44:03Z", "closed_at": "2023-05-16T06:44:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9053", "html_url": "https://github.com/near/nearcore/pull/9053", "diff_url": "https://github.com/near/nearcore/pull/9053.diff", "patch_url": "https://github.com/near/nearcore/pull/9053.patch", "merged_at": "2023-05-16T06:44:02Z"}, "body": "This is not ternary differential fuzz target and will likely remain as such until we get pinches of nostalgia whenever wasmer2 comes up.\r\n\r\nSide note: this change makes it impossible to build this fuzz target on 32GiB instances with LTO enabled; we should be disabling LTO for fuzz targets anyhow, as maximum optimization is not necessarily beneficial for fuzzing \u2013 lack of fuzz feedback due to excessive optimizations may lead to reduced coverage.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9053/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9052", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9052/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9052/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9052/events", "html_url": "https://github.com/near/nearcore/pull/9052", "id": 1707512315, "node_id": "PR_kwDOCQUkYs5QYcGC", "number": 9052, "title": "feature: Add metric measuring size of transaction pool", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/near/nearcore/milestones/26", "html_url": "https://github.com/near/nearcore/milestone/26", "labels_url": "https://api.github.com/repos/near/nearcore/milestones/26/labels", "id": 9297034, "node_id": "MI_kwDOCQUkYs4AjdyK", "number": 26, "title": "Local Congestion Control - Q2 2023", "description": "Achieve local congestion control - shard shouldn\u2019t be overwhelmed by transactions coming from its\u2019 local transaction pool.", "creator": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-18T10:23:40Z", "updated_at": "2023-07-28T09:58:08Z", "due_on": null, "closed_at": "2023-07-28T09:36:09Z"}, "comments": 0, "created_at": "2023-05-12T12:03:29Z", "updated_at": "2023-06-12T09:58:34Z", "closed_at": "2023-05-16T09:02:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9052", "html_url": "https://github.com/near/nearcore/pull/9052", "diff_url": "https://github.com/near/nearcore/pull/9052.diff", "patch_url": "https://github.com/near/nearcore/pull/9052.patch", "merged_at": "2023-05-16T09:02:52Z"}, "body": "This will allow us to understand how big the transaction pools get in practice and what is the realistic limit to set for them.\r\n\r\nThe logic within pool iterator is a bit complex due to the need to return transactions back to the pool and I'm working on a way to simplify it in a separate PR, but for now this accounting should do the job.\r\n\r\nThis is one of the steps for https://github.com/near/nearcore/issues/3284", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9052/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9051", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9051/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9051/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9051/events", "html_url": "https://github.com/near/nearcore/pull/9051", "id": 1707460967, "node_id": "PR_kwDOCQUkYs5QYQtE", "number": 9051, "title": "refactor: Remove `FlatStateColumn`", "user": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}], "state": "closed", "locked": false, "assignee": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-05-12T11:32:39Z", "updated_at": "2023-05-15T13:41:00Z", "closed_at": "2023-05-15T13:40:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9051", "html_url": "https://github.com/near/nearcore/pull/9051", "diff_url": "https://github.com/near/nearcore/pull/9051.diff", "patch_url": "https://github.com/near/nearcore/pull/9051.patch", "merged_at": "2023-05-15T13:40:58Z"}, "body": "Addresses issue #9044 ", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9051/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9050", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9050/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9050/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9050/events", "html_url": "https://github.com/near/nearcore/pull/9050", "id": 1707161355, "node_id": "PR_kwDOCQUkYs5QXQLe", "number": 9050, "title": "Fix: flaky split storage tests", "user": {"login": "andrei-near", "id": 122784628, "node_id": "U_kgDOB1GLdA", "avatar_url": "https://avatars.githubusercontent.com/u/122784628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrei-near", "html_url": "https://github.com/andrei-near", "followers_url": "https://api.github.com/users/andrei-near/followers", "following_url": "https://api.github.com/users/andrei-near/following{/other_user}", "gists_url": "https://api.github.com/users/andrei-near/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrei-near/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrei-near/subscriptions", "organizations_url": "https://api.github.com/users/andrei-near/orgs", "repos_url": "https://api.github.com/users/andrei-near/repos", "events_url": "https://api.github.com/users/andrei-near/events{/privacy}", "received_events_url": "https://api.github.com/users/andrei-near/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-12T08:05:14Z", "updated_at": "2023-05-12T17:12:27Z", "closed_at": "2023-05-12T17:12:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9050", "html_url": "https://github.com/near/nearcore/pull/9050", "diff_url": "https://github.com/near/nearcore/pull/9050.diff", "patch_url": "https://github.com/near/nearcore/pull/9050.patch", "merged_at": "2023-05-12T17:12:26Z"}, "body": "This test is quite flaky, failing in about 70% of total runs.\r\nTo fix it I'm:\r\n-> making test monolithic, based on 3 steps\r\n-> increasing epoch length. Sometimes the node heigh can move too far away and stopped node is unable to catchup.\r\n\r\nWith this applied, test succeeds in more than 95% of the runs (based on stress testing on a GCP machine with similar spec as Nayduck workers)", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9050/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9049", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9049/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9049/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9049/events", "html_url": "https://github.com/near/nearcore/pull/9049", "id": 1706395809, "node_id": "PR_kwDOCQUkYs5QUrk8", "number": 9049, "title": "feat: dump state to s3 by multiple nodes", "user": {"login": "ppca", "id": 16693342, "node_id": "MDQ6VXNlcjE2NjkzMzQy", "avatar_url": "https://avatars.githubusercontent.com/u/16693342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppca", "html_url": "https://github.com/ppca", "followers_url": "https://api.github.com/users/ppca/followers", "following_url": "https://api.github.com/users/ppca/following{/other_user}", "gists_url": "https://api.github.com/users/ppca/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppca/subscriptions", "organizations_url": "https://api.github.com/users/ppca/orgs", "repos_url": "https://api.github.com/users/ppca/repos", "events_url": "https://api.github.com/users/ppca/events{/privacy}", "received_events_url": "https://api.github.com/users/ppca/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-05-11T19:10:20Z", "updated_at": "2023-05-18T21:22:37Z", "closed_at": "2023-05-18T21:22:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9049", "html_url": "https://github.com/near/nearcore/pull/9049", "diff_url": "https://github.com/near/nearcore/pull/9049.diff", "patch_url": "https://github.com/near/nearcore/pull/9049.patch", "merged_at": "2023-05-18T21:22:36Z"}, "body": "**To enable dumping with multiple nodes, do the following:**\r\n1.  add\r\n``` \r\n\"state_sync\": {\r\n    \"dump\": {\r\n      \"location\": {\r\n        \"S3\": {\r\n          \"bucket\":\"state-parts-xiangyi\",\r\n          \"region\":\"us-west-1\"\r\n        },\r\n      },\r\n    }\r\n}\r\n```\r\n to `~/.near/config.json` on your node;\r\n2. run `AWS_ACCESS_KEY_ID=\"xxxx\" AWS_SECRET_ACCESS_KEY=\"xxx\" ./target/release/neard run`\r\n\r\n**How the multi-node dump work?**\r\nEach node will have one thread per shard, and will check s3 for missing parts per shard for the epoch it's dumping every 60 seconds. After checking missing parts, it will draw one part_id without replacement from the missing parts, generate and upload to s3 repeatedly until time's up. Then the thread repeat the process until all parts of the specific shard and epoch is dumped. Then the thread switch to the latest epoch that their chain head is in.\r\nThe nodes that are dumping state do not need to communicate to each other, they use s3 to check what's dumped and what's not. \r\nThe frequency of checking s3 for missing parts will be a trade off between repeated dumps and s3 latency: the more often the check, the less repeats happen, but the more s3 check latency hurts the speed of dump. May end up using a frequency different than 60s.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9049/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9049/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9048", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9048/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9048/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9048/events", "html_url": "https://github.com/near/nearcore/pull/9048", "id": 1705803873, "node_id": "PR_kwDOCQUkYs5QSsRo", "number": 9048, "title": "fix(tests): Fix tests sync_nodes and sync_after_sync_nodes", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-11T13:10:24Z", "updated_at": "2023-05-12T14:20:38Z", "closed_at": "2023-05-12T14:20:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9048", "html_url": "https://github.com/near/nearcore/pull/9048", "diff_url": "https://github.com/near/nearcore/pull/9048.diff", "patch_url": "https://github.com/near/nearcore/pull/9048.patch", "merged_at": "2023-05-12T14:20:36Z"}, "body": "The tests were failing because one of the blocks couldn't be added. That block was rejected (`InvalidGasPrice` error) because it provided wrong `total_supply`. At the beginning of an epoch, a block needs to adjust `total_supply` to include validator rewards.\r\n\r\nFixed by disabling validator rewards in these tests.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9048/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9043", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9043/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9043/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9043/events", "html_url": "https://github.com/near/nearcore/pull/9043", "id": 1704529398, "node_id": "PR_kwDOCQUkYs5QOaiW", "number": 9043, "title": "fix: visit_nodes_interval should exclude path_end", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-05-10T19:43:11Z", "updated_at": "2023-05-11T11:24:10Z", "closed_at": "2023-05-11T11:24:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9043", "html_url": "https://github.com/near/nearcore/pull/9043", "diff_url": "https://github.com/near/nearcore/pull/9043.diff", "patch_url": "https://github.com/near/nearcore/pull/9043.patch", "merged_at": "2023-05-11T11:24:09Z"}, "body": "Subj. If during iteration over range `[path_begin, path_end)` you ended up in a Value, it is still necessary to check that current key (key_nibbles) doesn't exceed `path_end`. This is done already when we descend into internal node, and we need to treat Value in the same way.\r\n\r\nFortunately there is no visible impact, as we use it to eventually write the whole state, so we just write some values more than once. But it messes with refcounts during testing and leads to refcount leaks.\r\n\r\n## Testing\r\n\r\nAdding `test_visit_interval` specifically for that case. It doesn't pass without fix. `visit_nodes_interval` obviously needs more tests, but at least #8995 should pass tests after this.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9043/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9042", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9042/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9042/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9042/events", "html_url": "https://github.com/near/nearcore/pull/9042", "id": 1703986858, "node_id": "PR_kwDOCQUkYs5QMlYY", "number": 9042, "title": "Fix: swap nodes test case", "user": {"login": "andrei-near", "id": 122784628, "node_id": "U_kgDOB1GLdA", "avatar_url": "https://avatars.githubusercontent.com/u/122784628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrei-near", "html_url": "https://github.com/andrei-near", "followers_url": "https://api.github.com/users/andrei-near/followers", "following_url": "https://api.github.com/users/andrei-near/following{/other_user}", "gists_url": "https://api.github.com/users/andrei-near/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrei-near/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrei-near/subscriptions", "organizations_url": "https://api.github.com/users/andrei-near/orgs", "repos_url": "https://api.github.com/users/andrei-near/repos", "events_url": "https://api.github.com/users/andrei-near/events{/privacy}", "received_events_url": "https://api.github.com/users/andrei-near/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-10T13:52:44Z", "updated_at": "2023-05-10T14:20:46Z", "closed_at": "2023-05-10T14:20:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9042", "html_url": "https://github.com/near/nearcore/pull/9042", "diff_url": "https://github.com/near/nearcore/pull/9042.diff", "patch_url": "https://github.com/near/nearcore/pull/9042.patch", "merged_at": "2023-05-10T14:20:45Z"}, "body": "Forgot to enable state sync for the switched node.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9042/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9042/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9041", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9041/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9041/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9041/events", "html_url": "https://github.com/near/nearcore/pull/9041", "id": 1703778727, "node_id": "PR_kwDOCQUkYs5QL4HK", "number": 9041, "title": "near-vm: housekeeping", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-10T12:04:57Z", "updated_at": "2023-05-14T14:36:46Z", "closed_at": "2023-05-14T14:36:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9041", "html_url": "https://github.com/near/nearcore/pull/9041", "diff_url": "https://github.com/near/nearcore/pull/9041.diff", "patch_url": "https://github.com/near/nearcore/pull/9041.patch", "merged_at": "2023-05-14T14:36:45Z"}, "body": "Best reviewed commit-by-commit. Some of the changes are of largely automated nature.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9041/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9040", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9040/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9040/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9040/events", "html_url": "https://github.com/near/nearcore/pull/9040", "id": 1703638143, "node_id": "PR_kwDOCQUkYs5QLZZb", "number": 9040, "title": "near-vm: upgrade finite-wasm", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-10T10:45:16Z", "updated_at": "2023-05-11T12:55:43Z", "closed_at": "2023-05-11T12:55:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9040", "html_url": "https://github.com/near/nearcore/pull/9040", "diff_url": "https://github.com/near/nearcore/pull/9040.diff", "patch_url": "https://github.com/near/nearcore/pull/9040.patch", "merged_at": "2023-05-11T12:55:41Z"}, "body": "This resolves an issue with finite-wasm based instrumentation that forced us to back out finite-wasm and near-vm from 1.34.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9040/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9039", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9039/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9039/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9039/events", "html_url": "https://github.com/near/nearcore/pull/9039", "id": 1703487494, "node_id": "PR_kwDOCQUkYs5QK4pA", "number": 9039, "title": "Fix: enabled state sync failing test", "user": {"login": "andrei-near", "id": 122784628, "node_id": "U_kgDOB1GLdA", "avatar_url": "https://avatars.githubusercontent.com/u/122784628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrei-near", "html_url": "https://github.com/andrei-near", "followers_url": "https://api.github.com/users/andrei-near/followers", "following_url": "https://api.github.com/users/andrei-near/following{/other_user}", "gists_url": "https://api.github.com/users/andrei-near/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrei-near/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrei-near/subscriptions", "organizations_url": "https://api.github.com/users/andrei-near/orgs", "repos_url": "https://api.github.com/users/andrei-near/repos", "events_url": "https://api.github.com/users/andrei-near/events{/privacy}", "received_events_url": "https://api.github.com/users/andrei-near/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-10T09:22:52Z", "updated_at": "2023-05-10T13:32:50Z", "closed_at": "2023-05-10T13:32:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9039", "html_url": "https://github.com/near/nearcore/pull/9039", "diff_url": "https://github.com/near/nearcore/pull/9039.diff", "patch_url": "https://github.com/near/nearcore/pull/9039.patch", "merged_at": "2023-05-10T13:32:49Z"}, "body": "Garbage collection test failing of of disabled by default state sync.\r\nEnabled.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9039/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9037", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9037/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9037/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9037/events", "html_url": "https://github.com/near/nearcore/pull/9037", "id": 1703223575, "node_id": "PR_kwDOCQUkYs5QJ_8N", "number": 9037, "title": "feat: flat state value inlining migration", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-10T06:37:19Z", "updated_at": "2023-05-19T09:11:23Z", "closed_at": "2023-05-19T09:11:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9037", "html_url": "https://github.com/near/nearcore/pull/9037", "diff_url": "https://github.com/near/nearcore/pull/9037.diff", "patch_url": "https://github.com/near/nearcore/pull/9037.patch", "merged_at": "2023-05-19T09:11:22Z"}, "body": "Part of #8243.\r\n\r\nThis PR implements migration process for inlining `FlatState` values. For more details see the second approach in [this comment](https://github.com/near/nearcore/issues/8243#issuecomment-1532930290).\r\nMigration is not currently executed on the running node, that will be implemented in a separate PR. Instead `migrate-value-inlining` sub-command is added as part of `flat-storage` command.\r\n\r\n\r\nCan be executed via `cargo run --release -p neard -- --verbose store flat-storage migrate-value-inlining`. Progress log example:\r\n```\r\n2023-05-15T14:22:54.280387Z  INFO store: Starting FlatState value inlining migration read_state_threads=16 batch_size=50000\r\n...\r\n2023-05-15T16:00:24.210821Z DEBUG store: Processed flat state value inlining batch batch_index=1580 inlined_batch_count=50000 inlined_total_count=35943298 batch_duration=67.303985ms\r\n2023-05-15T16:00:25.388086Z DEBUG store: Processed flat state value inlining batch batch_index=1581 inlined_batch_count=50000 inlined_total_count=35993298 batch_duration=89.054046ms\r\n...\r\n2023-05-15T17:02:14.707594Z  INFO store: Finished FlatState value inlining migration inlined_total_count=128780116 migration_elapsed=4388.085856057s\r\n```", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9037/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9036", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9036/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9036/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9036/events", "html_url": "https://github.com/near/nearcore/pull/9036", "id": 1702611838, "node_id": "PR_kwDOCQUkYs5QH-hh", "number": 9036, "title": "feature: Introduce transaction pool size accounting", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/near/nearcore/milestones/26", "html_url": "https://github.com/near/nearcore/milestone/26", "labels_url": "https://api.github.com/repos/near/nearcore/milestones/26/labels", "id": 9297034, "node_id": "MI_kwDOCQUkYs4AjdyK", "number": 26, "title": "Local Congestion Control - Q2 2023", "description": "Achieve local congestion control - shard shouldn\u2019t be overwhelmed by transactions coming from its\u2019 local transaction pool.", "creator": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-18T10:23:40Z", "updated_at": "2023-07-28T09:58:08Z", "due_on": null, "closed_at": "2023-07-28T09:36:09Z"}, "comments": 0, "created_at": "2023-05-09T19:06:36Z", "updated_at": "2023-06-12T09:58:28Z", "closed_at": "2023-05-10T17:57:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9036", "html_url": "https://github.com/near/nearcore/pull/9036", "diff_url": "https://github.com/near/nearcore/pull/9036.diff", "patch_url": "https://github.com/near/nearcore/pull/9036.patch", "merged_at": "2023-05-10T17:57:56Z"}, "body": "This PR introduces accounting of the size of the transaction pool in bytes that will later be used rejecting incoming transactions that push the size over the limit.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9036/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9035", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9035/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9035/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9035/events", "html_url": "https://github.com/near/nearcore/pull/9035", "id": 1702585332, "node_id": "PR_kwDOCQUkYs5QH4tO", "number": 9035, "title": "fix: Make sure we generate enough accounts for sharding test", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-09T18:51:38Z", "updated_at": "2023-06-12T09:58:29Z", "closed_at": "2023-05-11T08:02:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9035", "html_url": "https://github.com/near/nearcore/pull/9035", "diff_url": "https://github.com/near/nearcore/pull/9035.diff", "patch_url": "https://github.com/near/nearcore/pull/9035.patch", "merged_at": "2023-05-11T08:02:52Z"}, "body": "As before, even though the setup specified `num_init_accounts` in reality this was an upper bound on the number of accounts to generate, which ended up breaking an assumption in one of the tests:\r\n\r\n```\r\nthread 'tests::client::sharding_upgrade::test_shard_layout_upgrade_missing_chunks_mid_missing_prob' panicked at 'index out of bounds: the len is 1 but the index is 1', integration-tests/src/tests/client/sharding_upgrade.rs:623:35\r\n```", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9035/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9035/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9034", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9034/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9034/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9034/events", "html_url": "https://github.com/near/nearcore/pull/9034", "id": 1702448071, "node_id": "PR_kwDOCQUkYs5QHaWe", "number": 9034, "title": "fix(mocknet): bump up the stakes for validators in the mocknet test", "user": {"login": "marcelo-gonzalez", "id": 37846884, "node_id": "MDQ6VXNlcjM3ODQ2ODg0", "avatar_url": "https://avatars.githubusercontent.com/u/37846884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcelo-gonzalez", "html_url": "https://github.com/marcelo-gonzalez", "followers_url": "https://api.github.com/users/marcelo-gonzalez/followers", "following_url": "https://api.github.com/users/marcelo-gonzalez/following{/other_user}", "gists_url": "https://api.github.com/users/marcelo-gonzalez/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcelo-gonzalez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcelo-gonzalez/subscriptions", "organizations_url": "https://api.github.com/users/marcelo-gonzalez/orgs", "repos_url": "https://api.github.com/users/marcelo-gonzalez/repos", "events_url": "https://api.github.com/users/marcelo-gonzalez/events{/privacy}", "received_events_url": "https://api.github.com/users/marcelo-gonzalez/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-09T17:30:31Z", "updated_at": "2023-05-10T19:35:50Z", "closed_at": "2023-05-10T19:35:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9034", "html_url": "https://github.com/near/nearcore/pull/9034", "diff_url": "https://github.com/near/nearcore/pull/9034.diff", "patch_url": "https://github.com/near/nearcore/pull/9034.patch", "merged_at": "2023-05-10T19:35:50Z"}, "body": "https://github.com/near/nearcore/pull/8544 updated the mirror command so that it unstakes after staking pool contracts add unwanted validators to the validator set. This works most of the time, but sometimes you get unlucky and the unwanted stake action comes in right before the end of an epoch, so then the unstake that we send gets processed in a new epoch, and the unwanted validator will make it in for one epoch. Also it's possible that the transaction just gets lost for some reason. So bump up the stakes we start validators with to 1B NEAR (a lot larger than any current validator stakes on mainnet) so that when it happens, at least the chain won't stall.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9034/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9033", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9033/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9033/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9033/events", "html_url": "https://github.com/near/nearcore/pull/9033", "id": 1701881026, "node_id": "PR_kwDOCQUkYs5QFhYO", "number": 9033, "title": "cleanup(migrations): Remove old migration code", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-09T11:15:50Z", "updated_at": "2023-05-10T10:27:13Z", "closed_at": "2023-05-10T10:27:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9033", "html_url": "https://github.com/near/nearcore/pull/9033", "diff_url": "https://github.com/near/nearcore/pull/9033.diff", "patch_url": "https://github.com/near/nearcore/pull/9033.patch", "merged_at": "2023-05-10T10:27:11Z"}, "body": "Remove support for ancient database versions. Keep support for the last five database versions only. This removes a lot of code which isn\u2019t used in practice.\r\n\r\nAnyone operating a node will go through migrations as new database versions are introduced. Anyone still holding onto ancient databases will need to use older neard releases.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9033/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9033/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9032", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9032/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9032/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9032/events", "html_url": "https://github.com/near/nearcore/pull/9032", "id": 1701789853, "node_id": "PR_kwDOCQUkYs5QFNfM", "number": 9032, "title": "Fix: garbage collection test", "user": {"login": "andrei-near", "id": 122784628, "node_id": "U_kgDOB1GLdA", "avatar_url": "https://avatars.githubusercontent.com/u/122784628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrei-near", "html_url": "https://github.com/andrei-near", "followers_url": "https://api.github.com/users/andrei-near/followers", "following_url": "https://api.github.com/users/andrei-near/following{/other_user}", "gists_url": "https://api.github.com/users/andrei-near/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrei-near/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrei-near/subscriptions", "organizations_url": "https://api.github.com/users/andrei-near/orgs", "repos_url": "https://api.github.com/users/andrei-near/repos", "events_url": "https://api.github.com/users/andrei-near/events{/privacy}", "received_events_url": "https://api.github.com/users/andrei-near/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-05-09T10:14:25Z", "updated_at": "2023-05-09T14:02:08Z", "closed_at": "2023-05-09T14:02:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9032", "html_url": "https://github.com/near/nearcore/pull/9032", "diff_url": "https://github.com/near/nearcore/pull/9032.diff", "patch_url": "https://github.com/near/nearcore/pull/9032.patch", "merged_at": "2023-05-09T14:02:06Z"}, "body": "This PR is to fix long running issue with garbage collection test.\r\n\r\nTest was failing because node 1 could not sync from remaining 3 peers, which did not have the required by node 1 blocks, for example target heigh 1:\r\nepoch_length = 10\r\ntarget_heigh1 = 60 \r\ngc_num_epochs_to_keep = 5\r\n\r\nThis means that by the time network reached target heigh 60, nodes 0, 2 and 3 garbage collection mechanism will clear blocks from 1 to 10:  \r\n60 (heigh) - 10 (epoch length) * 5 (epochs to keep).\r\n\r\nFix is to enable STATE SYNC\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9032/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9031", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9031/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9031/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9031/events", "html_url": "https://github.com/near/nearcore/pull/9031", "id": 1701643147, "node_id": "PR_kwDOCQUkYs5QEtuU", "number": 9031, "title": "fix(loadtest2): gas amount", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-09T08:52:39Z", "updated_at": "2023-05-09T13:42:21Z", "closed_at": "2023-05-09T10:58:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9031", "html_url": "https://github.com/near/nearcore/pull/9031", "diff_url": "https://github.com/near/nearcore/pull/9031.diff", "patch_url": "https://github.com/near/nearcore/pull/9031.patch", "merged_at": "2023-05-09T10:58:27Z"}, "body": "This should be multiplication, not exponential.\r\n\r\nAt least in local testing, this caused problems and txs\r\nwere never submitted.\r\n\r\n(Flyby updating a comment at the same place as well)", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9031/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9030", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9030/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9030/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9030/events", "html_url": "https://github.com/near/nearcore/pull/9030", "id": 1701600438, "node_id": "PR_kwDOCQUkYs5QEkwg", "number": 9030, "title": "fix(metrics): Current protocol version", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-09T08:27:59Z", "updated_at": "2023-05-09T10:23:58Z", "closed_at": "2023-05-09T10:23:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9030", "html_url": "https://github.com/near/nearcore/pull/9030", "diff_url": "https://github.com/near/nearcore/pull/9030.diff", "patch_url": "https://github.com/near/nearcore/pull/9030.patch", "merged_at": "2023-05-09T10:23:57Z"}, "body": "Prometheus metric for the actual version of the protocol.\r\nThe existing metric statically exports the maximal version supported by the node, which is not the same.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9030/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9029", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9029/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9029/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9029/events", "html_url": "https://github.com/near/nearcore/pull/9029", "id": 1700065345, "node_id": "PR_kwDOCQUkYs5P_YNL", "number": 9029, "title": "feat: implement inlining for small values in flat storage", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-08T11:19:29Z", "updated_at": "2023-05-08T17:55:47Z", "closed_at": "2023-05-08T17:55:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9029", "html_url": "https://github.com/near/nearcore/pull/9029", "diff_url": "https://github.com/near/nearcore/pull/9029.diff", "patch_url": "https://github.com/near/nearcore/pull/9029.patch", "merged_at": "2023-05-08T17:55:47Z"}, "body": "Part of #8243.\r\n\r\nThis PR consists of 2 parts:\r\n* 08ecc51ca60f1c1705e1b1dd484e1459a7c82fcb: un-revert #9005, see #8988 for the detailed description of the changes.\r\n* 3d29347efb7d69bf44866ede9f1020a0375229b6: db migration for flat state delta changes to avoid backward compatibility issues", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9029/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9028", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9028/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9028/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9028/events", "html_url": "https://github.com/near/nearcore/pull/9028", "id": 1700040537, "node_id": "PR_kwDOCQUkYs5P_S1Y", "number": 9028, "title": "fix: split storage tests", "user": {"login": "andrei-near", "id": 122784628, "node_id": "U_kgDOB1GLdA", "avatar_url": "https://avatars.githubusercontent.com/u/122784628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrei-near", "html_url": "https://github.com/andrei-near", "followers_url": "https://api.github.com/users/andrei-near/followers", "following_url": "https://api.github.com/users/andrei-near/following{/other_user}", "gists_url": "https://api.github.com/users/andrei-near/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrei-near/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrei-near/subscriptions", "organizations_url": "https://api.github.com/users/andrei-near/orgs", "repos_url": "https://api.github.com/users/andrei-near/repos", "events_url": "https://api.github.com/users/andrei-near/events{/privacy}", "received_events_url": "https://api.github.com/users/andrei-near/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-08T11:00:59Z", "updated_at": "2023-05-08T12:27:59Z", "closed_at": "2023-05-08T12:27:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9028", "html_url": "https://github.com/near/nearcore/pull/9028", "diff_url": "https://github.com/near/nearcore/pull/9028.diff", "patch_url": "https://github.com/near/nearcore/pull/9028.patch", "merged_at": "2023-05-08T12:27:58Z"}, "body": "One of the tests doesn't clean the nodes and causes subsequent ones to fail.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9028/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9027", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9027/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9027/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9027/events", "html_url": "https://github.com/near/nearcore/pull/9027", "id": 1699906327, "node_id": "PR_kwDOCQUkYs5P-1Fd", "number": 9027, "title": "fix CI for the 1.34.0 branch", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-08T09:40:31Z", "updated_at": "2023-05-08T09:55:37Z", "closed_at": "2023-05-08T09:55:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9027", "html_url": "https://github.com/near/nearcore/pull/9027", "diff_url": "https://github.com/near/nearcore/pull/9027.diff", "patch_url": "https://github.com/near/nearcore/pull/9027.patch", "merged_at": "2023-05-08T09:55:33Z"}, "body": "fixing CI for the 1.34 branch\r\n\r\nthere were some compilation errors with the rust upgrade after the cherry pick\r\n\r\nalso, a pure CI error, buildkite has OpenSSL issues", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9027/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9026", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9026/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9026/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9026/events", "html_url": "https://github.com/near/nearcore/pull/9026", "id": 1699858460, "node_id": "PR_kwDOCQUkYs5P-qv2", "number": 9026, "title": "fix wasmer2 output hashes for rust 1.68.2", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-05-08T09:08:46Z", "updated_at": "2023-05-08T10:12:15Z", "closed_at": "2023-05-08T10:12:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9026", "html_url": "https://github.com/near/nearcore/pull/9026", "diff_url": "https://github.com/near/nearcore/pull/9026.diff", "patch_url": "https://github.com/near/nearcore/pull/9026.patch", "merged_at": "2023-05-08T10:12:10Z"}, "body": "The hashes were for rust 1.69, which is what master uses.\r\n\r\nBefore this  change:\r\n```\r\ncargo +1.69.0 test -p near-vm-runner // succeeds\r\ncargo test -p near-vm-runner // fails because it uses 1.68.2 specified in rust-toolchain.toml\r\n```\r\n\r\nAfter this  change:\r\n```\r\ncargo +1.69.0 test -p near-vm-runner // fails\r\ncargo test -p near-vm-runner // succeeds\r\n```\r\n\r\n1.34 MUST be compiled with rust 1.68.2 or else the smart contract binaries will be incompatible!", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9026/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9023", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9023/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9023/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9023/events", "html_url": "https://github.com/near/nearcore/pull/9023", "id": 1699542185, "node_id": "PR_kwDOCQUkYs5P9mDl", "number": 9023, "title": "chore: update `tokio` to `1.28`", "user": {"login": "miraclx", "id": 16881812, "node_id": "MDQ6VXNlcjE2ODgxODEy", "avatar_url": "https://avatars.githubusercontent.com/u/16881812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miraclx", "html_url": "https://github.com/miraclx", "followers_url": "https://api.github.com/users/miraclx/followers", "following_url": "https://api.github.com/users/miraclx/following{/other_user}", "gists_url": "https://api.github.com/users/miraclx/gists{/gist_id}", "starred_url": "https://api.github.com/users/miraclx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miraclx/subscriptions", "organizations_url": "https://api.github.com/users/miraclx/orgs", "repos_url": "https://api.github.com/users/miraclx/repos", "events_url": "https://api.github.com/users/miraclx/events{/privacy}", "received_events_url": "https://api.github.com/users/miraclx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-08T05:17:34Z", "updated_at": "2023-05-08T17:05:04Z", "closed_at": "2023-05-08T17:05:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9023", "html_url": "https://github.com/near/nearcore/pull/9023", "diff_url": "https://github.com/near/nearcore/pull/9023.diff", "patch_url": "https://github.com/near/nearcore/pull/9023.patch", "merged_at": "2023-05-08T17:05:03Z"}, "body": "[Audits](https://github.com/near/near-sdk-rs/actions/runs/4690517670/jobs/8376852068?pr=1010) in `near-sdk` highlight a security vulnerability [RUSTSEC-2023-0001](https://rustsec.org/advisories/RUSTSEC-2023-0001) that affects the Windows platform.\r\n\r\nAs far as I could tell, we're not directly impacted by this, but the severity suggests we make an upstream dep update.\r\n\r\nhttps://github.com/near/nearcore/pull/8309#issue-1525418158 pinned `tokio` to `1.18` and suggested not updating the minor version unconsciously. Whereas #8472 required a bump to `1.19`, which has no versions that patch this vulnerability.\r\n\r\nThis PR seizes the opportunity to re-pin the minor version to the latest, after which subsequent updates can uphold the bump requirement outlined in #8309.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9023/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9012", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9012/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9012/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9012/events", "html_url": "https://github.com/near/nearcore/pull/9012", "id": 1696560692, "node_id": "PR_kwDOCQUkYs5PzqvH", "number": 9012, "title": "[fix] `get_all_block_hashes_by_height` returns empty hashmap if no blocks at height", "user": {"login": "shreyan-gupta", "id": 16697830, "node_id": "MDQ6VXNlcjE2Njk3ODMw", "avatar_url": "https://avatars.githubusercontent.com/u/16697830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shreyan-gupta", "html_url": "https://github.com/shreyan-gupta", "followers_url": "https://api.github.com/users/shreyan-gupta/followers", "following_url": "https://api.github.com/users/shreyan-gupta/following{/other_user}", "gists_url": "https://api.github.com/users/shreyan-gupta/gists{/gist_id}", "starred_url": "https://api.github.com/users/shreyan-gupta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shreyan-gupta/subscriptions", "organizations_url": "https://api.github.com/users/shreyan-gupta/orgs", "repos_url": "https://api.github.com/users/shreyan-gupta/repos", "events_url": "https://api.github.com/users/shreyan-gupta/events{/privacy}", "received_events_url": "https://api.github.com/users/shreyan-gupta/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-04T19:14:23Z", "updated_at": "2023-05-10T16:10:04Z", "closed_at": "2023-05-10T16:10:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9012", "html_url": "https://github.com/near/nearcore/pull/9012", "diff_url": "https://github.com/near/nearcore/pull/9012.diff", "patch_url": "https://github.com/near/nearcore/pull/9012.patch", "merged_at": "2023-05-10T16:10:03Z"}, "body": "Issue https://github.com/near/nearcore/issues/8057\r\n\r\nThis PR changes the default behavior of `ChainStore::get_all_block_hashes_by_height` function to return an empty hashmap if no blocks exist for a given height.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9012/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9010", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9010/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9010/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9010/events", "html_url": "https://github.com/near/nearcore/pull/9010", "id": 1696407807, "node_id": "PR_kwDOCQUkYs5PzIyp", "number": 9010, "title": "pytest: require urllib3 version <2", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-04T17:30:01Z", "updated_at": "2023-05-04T17:41:37Z", "closed_at": "2023-05-04T17:41:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9010", "html_url": "https://github.com/near/nearcore/pull/9010", "diff_url": "https://github.com/near/nearcore/pull/9010.diff", "patch_url": "https://github.com/near/nearcore/pull/9010.patch", "merged_at": "2023-05-04T17:41:33Z"}, "body": "buildkite suddenly started failing\r\n\r\n```\r\npython3 tests/sanity/backward_compatible.py\r\n...\r\n    \"urllib3 v2.0 only supports OpenSSL 1.1.1+, currently \"\r\nImportError: urllib3 v2.0 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with OpenSSL 1.0.2k-fips  26 Jan 2017. See: https://github.com/urllib3/urllib3/issues/2168\r\n```\r\n\r\nTrying with a strict lower version requirement to see if that works.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9010/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9009", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9009/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9009/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9009/events", "html_url": "https://github.com/near/nearcore/pull/9009", "id": 1696366677, "node_id": "PR_kwDOCQUkYs5Py_zm", "number": 9009, "title": "revert: near-vm and finite-wasm changes", "user": {"login": "jakmeier", "id": 6342444, "node_id": "MDQ6VXNlcjYzNDI0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6342444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakmeier", "html_url": "https://github.com/jakmeier", "followers_url": "https://api.github.com/users/jakmeier/followers", "following_url": "https://api.github.com/users/jakmeier/following{/other_user}", "gists_url": "https://api.github.com/users/jakmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakmeier/subscriptions", "organizations_url": "https://api.github.com/users/jakmeier/orgs", "repos_url": "https://api.github.com/users/jakmeier/repos", "events_url": "https://api.github.com/users/jakmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/jakmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-04T16:58:39Z", "updated_at": "2023-05-04T19:24:55Z", "closed_at": "2023-05-04T19:24:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9009", "html_url": "https://github.com/near/nearcore/pull/9009", "diff_url": "https://github.com/near/nearcore/pull/9009.diff", "patch_url": "https://github.com/near/nearcore/pull/9009.patch", "merged_at": "2023-05-04T19:24:53Z"}, "body": "The fuzzer found an issue with finite-wasm, and we are currently\r\ninvestigating unexpected gas changes due to near-vm.\r\n\r\nRevert both changes for now so they aren't included in v1.34.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9009/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9009/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9006", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9006/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9006/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9006/events", "html_url": "https://github.com/near/nearcore/pull/9006", "id": 1696002414, "node_id": "PR_kwDOCQUkYs5PxveU", "number": 9006, "title": "refactor: remove majority of `as_caching_storage` calls", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-05-04T13:20:40Z", "updated_at": "2023-05-11T19:35:02Z", "closed_at": "2023-05-11T19:35:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9006", "html_url": "https://github.com/near/nearcore/pull/9006", "diff_url": "https://github.com/near/nearcore/pull/9006.diff", "patch_url": "https://github.com/near/nearcore/pull/9006.patch", "merged_at": "2023-05-11T19:35:01Z"}, "body": "`TrieStorage::as_caching_storage` is a bad design because it requires all implementations of `TrieStorage` to know about `TrieCachingStorage`. We needed it to expose storage metrics and caches, see .\r\n\r\nHere we remove majority of such calls, except two:\r\n* call inside `set_trie_cache_mode` - can be fixed during resolving of #9004;\r\n* calls inside prefetcher. @jakmeier do you remember how much prefetcher logic needs to know what `TrieStorage` it is using?\r\n\r\n## Testing\r\n\r\nExisting tests. We can't test shard cache in `test_repeated_values_count` anymore, but this makes sense, as caches are hidden implementation detail of `TrieCachingStorage`.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9006/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9005", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9005/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9005/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9005/events", "html_url": "https://github.com/near/nearcore/pull/9005", "id": 1696000990, "node_id": "PR_kwDOCQUkYs5PxvKY", "number": 9005, "title": "Revert \"feat: implement inlining for small values in flat storage\"", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-04T13:19:46Z", "updated_at": "2023-05-04T13:30:58Z", "closed_at": "2023-05-04T13:30:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9005", "html_url": "https://github.com/near/nearcore/pull/9005", "diff_url": "https://github.com/near/nearcore/pull/9005.diff", "patch_url": "https://github.com/near/nearcore/pull/9005.patch", "merged_at": "2023-05-04T13:30:58Z"}, "body": "This reverts #8988 as it results in node crashing: [zulip](https://near.zulipchat.com/#narrow/stream/345766-pagoda.2Fstorage.2Fflat-storage/topic/Canary.20crashes/near/355722627).\r\n\r\nThe original PR changes data format for delta changes on disk, so binary with the new code failed to deserialise deltas written by the old code.\r\n\r\nI suggest we revert the change for now and then re-publish it along with the db migration.\r\n", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9005/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9003", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9003/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9003/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9003/events", "html_url": "https://github.com/near/nearcore/pull/9003", "id": 1695664327, "node_id": "PR_kwDOCQUkYs5PwloJ", "number": 9003, "title": "refactor: no logic duplication in `TrieRecordingStorage`", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2023-05-04T09:47:44Z", "updated_at": "2023-05-04T12:37:52Z", "closed_at": "2023-05-04T12:37:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9003", "html_url": "https://github.com/near/nearcore/pull/9003", "diff_url": "https://github.com/near/nearcore/pull/9003.diff", "patch_url": "https://github.com/near/nearcore/pull/9003.patch", "merged_at": "2023-05-04T12:37:50Z"}, "body": "There is no need to duplicate logic of reading from DB in `TrieRecordingStorage`. It makes more sense to create it over existing `TrieStorage` and reuse `retrieve_raw_bytes` impl from it. Also this allows us to get rid of annoying `as_caching_storage` cast. It is not actually necessary for underlying storage to be `TrieCachingStorage`.\r\n\r\nSome consequences:\r\n* `Rc` replaces `Box` in Trie, because we need to be able to copy pointer to trie storage. Looks like a reasonable requirement.\r\n* `TrieStorage` is not `Send` anymore, but this is not needed in the code anyway. Otherwise we can consider `Arc`.\r\n\r\ncc @jbajic as an example of existing issues with trie logic", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9003/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9003/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9002", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9002/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9002/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9002/events", "html_url": "https://github.com/near/nearcore/pull/9002", "id": 1695623868, "node_id": "PR_kwDOCQUkYs5Pwcmf", "number": 9002, "title": "fix: Sample different accounts in sharding test", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-04T09:27:52Z", "updated_at": "2023-06-12T09:58:27Z", "closed_at": "2023-05-07T06:30:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9002", "html_url": "https://github.com/near/nearcore/pull/9002", "diff_url": "https://github.com/near/nearcore/pull/9002.diff", "patch_url": "https://github.com/near/nearcore/pull/9002.patch", "merged_at": "2023-05-07T06:30:59Z"}, "body": "The previous sampling scheme had two problems:\r\n- It could sample accounts test2 and test3 which will likely be on the same shard\r\n- It could sample the same account twice\r\n\r\nThe reason I looked into this is that sampling the same account results in deploying the same contract twice, which leads to the submission of duplicate transactions and fails on the check that I've introduced here to deal with transaction pool limits https://github.com/near/nearcore/pull/8970/files#diff-69c20a1a7276bee390fe2844bff3d2fc4c1ed09f0faaa832f0c8d39776ebf9e8R2013\r\nWe probably need some special handling for duplicate transactions to avoid forwarding them.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9002/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/9000", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/9000/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/9000/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/9000/events", "html_url": "https://github.com/near/nearcore/pull/9000", "id": 1693712613, "node_id": "PR_kwDOCQUkYs5Pp5Pu", "number": 9000, "title": "refactor: Fix clippy's len_zero errors", "user": {"login": "jbajic", "id": 11527103, "node_id": "MDQ6VXNlcjExNTI3MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/11527103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbajic", "html_url": "https://github.com/jbajic", "followers_url": "https://api.github.com/users/jbajic/followers", "following_url": "https://api.github.com/users/jbajic/following{/other_user}", "gists_url": "https://api.github.com/users/jbajic/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbajic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbajic/subscriptions", "organizations_url": "https://api.github.com/users/jbajic/orgs", "repos_url": "https://api.github.com/users/jbajic/repos", "events_url": "https://api.github.com/users/jbajic/events{/privacy}", "received_events_url": "https://api.github.com/users/jbajic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-03T09:31:39Z", "updated_at": "2023-05-04T11:02:22Z", "closed_at": "2023-05-03T11:19:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/9000", "html_url": "https://github.com/near/nearcore/pull/9000", "diff_url": "https://github.com/near/nearcore/pull/9000.diff", "patch_url": "https://github.com/near/nearcore/pull/9000.patch", "merged_at": "2023-05-03T11:19:35Z"}, "body": "Addressing issue #8631 ", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/9000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/9000/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8996", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8996/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8996/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8996/events", "html_url": "https://github.com/near/nearcore/pull/8996", "id": 1692307007, "node_id": "PR_kwDOCQUkYs5PlKte", "number": 8996, "title": "fix(FS): Less verbose flat storage", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-02T12:10:14Z", "updated_at": "2023-05-02T12:24:04Z", "closed_at": "2023-05-02T12:24:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8996", "html_url": "https://github.com/near/nearcore/pull/8996", "diff_url": "https://github.com/near/nearcore/pull/8996.diff", "patch_url": "https://github.com/near/nearcore/pull/8996.patch", "merged_at": "2023-05-02T12:24:02Z"}, "body": "Creation of Flat Storage is too verbose.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8996/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8995", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8995/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8995/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8995/events", "html_url": "https://github.com/near/nearcore/pull/8995", "id": 1692296820, "node_id": "PR_kwDOCQUkYs5PlIfz", "number": 8995, "title": "feat: state boundaries on KV pairs", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2023-05-02T12:03:21Z", "updated_at": "2023-05-15T18:28:43Z", "closed_at": "2023-05-15T18:28:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8995", "html_url": "https://github.com/near/nearcore/pull/8995", "diff_url": "https://github.com/near/nearcore/pull/8995.diff", "patch_url": "https://github.com/near/nearcore/pull/8995.patch", "merged_at": "2023-05-15T18:28:43Z"}, "body": "First step towards #8984. Here I want to guarantee that state part boundaries always correspond to some key-value pair except two corner cases:\r\n* part_id = 0 -> trie key is empty which is lower than all keys\r\n* part_id = num_parts -> trie key is [16] which is larger than all keys\r\nThis guarantees that parts cover all nodes in state.\r\n\r\nIt solves an inconvenience on the way to #8898. It is useful to assume that boundaries are keys, because it allows to restore all keys in part by making trivial range query to flat storage. Otherwise you need a hack to convert one last nibble to byte. This is also necessary if we switch to AVL or other tree some day - AVL should not know about trie nodes, and interface should be defined in terms of state key-value pairs.\r\n\r\nSome auxiliary work:\r\n* more documentation for state_parts\r\n* removing `visit_nodes_for_size_range_old` as it was needed for backwards compatibility for version deprecated long ago\r\n\r\n@nikurt note that after this, existing state parts become incompatible with newly generated ones.\r\n\r\n## Testing\r\n\r\nTesting is a pain because current testset is not well organised. I'm adding two tests specifically for new behaviour:\r\n* `boundary_is_state_key` - checks that state boundary is a key for sampling small trie. Doesn't pass without this change.\r\n* `single_path_trie` - small sanity check that keys are evenly distributed among state parts.\r\n\r\nAlso testing revealed that `run_test_parts_not_huge` doesn't check anything, see [Zulip thread](https://near.zulipchat.com/#narrow/stream/308695-pagoda.2Fprivate/topic/state.20part.20unreasonable.20proof.20size/near/357047125). I refactored test in such way that we separately check proof size and whole part size. Manually checked that two parts doesn't fit in memory limit for that test.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8995/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8994", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8994/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8994/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8994/events", "html_url": "https://github.com/near/nearcore/pull/8994", "id": 1692043223, "node_id": "PR_kwDOCQUkYs5PkR2M", "number": 8994, "title": "fix(nayduck): Flag name in the instructions", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-02T09:00:01Z", "updated_at": "2023-05-02T12:47:11Z", "closed_at": "2023-05-02T12:47:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8994", "html_url": "https://github.com/near/nearcore/pull/8994", "diff_url": "https://github.com/near/nearcore/pull/8994.diff", "patch_url": "https://github.com/near/nearcore/pull/8994.patch", "merged_at": "2023-05-02T12:47:10Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8994/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8993", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8993/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8993/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8993/events", "html_url": "https://github.com/near/nearcore/pull/8993", "id": 1692020024, "node_id": "PR_kwDOCQUkYs5PkMts", "number": 8993, "title": "Fuzz branch 1.34.0", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-02T08:47:56Z", "updated_at": "2023-05-02T14:35:35Z", "closed_at": "2023-05-02T14:35:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8993", "html_url": "https://github.com/near/nearcore/pull/8993", "diff_url": "https://github.com/near/nearcore/pull/8993.diff", "patch_url": "https://github.com/near/nearcore/pull/8993.patch", "merged_at": "2023-05-02T14:35:33Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8993/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8990", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8990/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8990/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8990/events", "html_url": "https://github.com/near/nearcore/pull/8990", "id": 1690908886, "node_id": "PR_kwDOCQUkYs5PgbXG", "number": 8990, "title": "add test for #8977", "user": {"login": "mzhangmzz", "id": 34969888, "node_id": "MDQ6VXNlcjM0OTY5ODg4", "avatar_url": "https://avatars.githubusercontent.com/u/34969888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mzhangmzz", "html_url": "https://github.com/mzhangmzz", "followers_url": "https://api.github.com/users/mzhangmzz/followers", "following_url": "https://api.github.com/users/mzhangmzz/following{/other_user}", "gists_url": "https://api.github.com/users/mzhangmzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mzhangmzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mzhangmzz/subscriptions", "organizations_url": "https://api.github.com/users/mzhangmzz/orgs", "repos_url": "https://api.github.com/users/mzhangmzz/repos", "events_url": "https://api.github.com/users/mzhangmzz/events{/privacy}", "received_events_url": "https://api.github.com/users/mzhangmzz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-01T14:53:57Z", "updated_at": "2023-05-02T03:21:54Z", "closed_at": "2023-05-02T03:21:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8990", "html_url": "https://github.com/near/nearcore/pull/8990", "diff_url": "https://github.com/near/nearcore/pull/8990.diff", "patch_url": "https://github.com/near/nearcore/pull/8990.patch", "merged_at": "2023-05-02T03:21:53Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8990/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8988", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8988/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8988/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8988/events", "html_url": "https://github.com/near/nearcore/pull/8988", "id": 1690043667, "node_id": "PR_kwDOCQUkYs5PdiFI", "number": 8988, "title": "feat: implement inlining for small values in flat storage", "user": {"login": "pugachAG", "id": 3171838, "node_id": "MDQ6VXNlcjMxNzE4Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3171838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pugachAG", "html_url": "https://github.com/pugachAG", "followers_url": "https://api.github.com/users/pugachAG/followers", "following_url": "https://api.github.com/users/pugachAG/following{/other_user}", "gists_url": "https://api.github.com/users/pugachAG/gists{/gist_id}", "starred_url": "https://api.github.com/users/pugachAG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pugachAG/subscriptions", "organizations_url": "https://api.github.com/users/pugachAG/orgs", "repos_url": "https://api.github.com/users/pugachAG/repos", "events_url": "https://api.github.com/users/pugachAG/events{/privacy}", "received_events_url": "https://api.github.com/users/pugachAG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1185428061, "node_id": "MDU6TGFiZWwxMTg1NDI4MDYx", "url": "https://api.github.com/repos/near/nearcore/labels/A-storage", "name": "A-storage", "color": "0000ff", "default": false, "description": "Area: storage and databases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-30T19:08:46Z", "updated_at": "2023-05-03T12:36:18Z", "closed_at": "2023-05-03T12:36:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8988", "html_url": "https://github.com/near/nearcore/pull/8988", "diff_url": "https://github.com/near/nearcore/pull/8988.diff", "patch_url": "https://github.com/near/nearcore/pull/8988.patch", "merged_at": "2023-05-03T12:36:17Z"}, "body": "Part of #8243.\r\n\r\nThis PR implements value inlining MVP for state sync:\r\n* add `FlatStateValue::Inlined` variant to store inlined values as part of `FlatState` and `FlatStateChanges` on disk.\r\n* change flat storage API to return `FlatStateValue` instead of `ValueRef`.\r\n\r\nThe following will be implemented separately:\r\n* Migration for existing `FlatState` values. This is required for state sync, but quite involved, so decided to keep it separately.\r\n* Inlining for cached flat state deltas: for now we keep those as `ValueRef`.\r\n* Using inlined values for transaction processing: for now we convert inlined values to `ValueRef`. ", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8988/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8987", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8987/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8987/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8987/events", "html_url": "https://github.com/near/nearcore/pull/8987", "id": 1689164864, "node_id": "PR_kwDOCQUkYs5PazBd", "number": 8987, "title": "chore: fix typo in proof verification CLI", "user": {"login": "austinabell", "id": 24993711, "node_id": "MDQ6VXNlcjI0OTkzNzEx", "avatar_url": "https://avatars.githubusercontent.com/u/24993711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austinabell", "html_url": "https://github.com/austinabell", "followers_url": "https://api.github.com/users/austinabell/followers", "following_url": "https://api.github.com/users/austinabell/following{/other_user}", "gists_url": "https://api.github.com/users/austinabell/gists{/gist_id}", "starred_url": "https://api.github.com/users/austinabell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austinabell/subscriptions", "organizations_url": "https://api.github.com/users/austinabell/orgs", "repos_url": "https://api.github.com/users/austinabell/repos", "events_url": "https://api.github.com/users/austinabell/events{/privacy}", "received_events_url": "https://api.github.com/users/austinabell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-28T21:46:17Z", "updated_at": "2023-05-04T08:42:04Z", "closed_at": "2023-05-04T08:40:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8987", "html_url": "https://github.com/near/nearcore/pull/8987", "diff_url": "https://github.com/near/nearcore/pull/8987.diff", "patch_url": "https://github.com/near/nearcore/pull/8987.patch", "merged_at": "2023-05-04T08:40:07Z"}, "body": "Sorry for such a small change, the typo was a bit distracting :D ", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8987/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8987/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8986", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8986/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8986/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8986/events", "html_url": "https://github.com/near/nearcore/pull/8986", "id": 1689146303, "node_id": "PR_kwDOCQUkYs5PavAr", "number": 8986, "title": "fix: remove unused validator stake view type", "user": {"login": "austinabell", "id": 24993711, "node_id": "MDQ6VXNlcjI0OTkzNzEx", "avatar_url": "https://avatars.githubusercontent.com/u/24993711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austinabell", "html_url": "https://github.com/austinabell", "followers_url": "https://api.github.com/users/austinabell/followers", "following_url": "https://api.github.com/users/austinabell/following{/other_user}", "gists_url": "https://api.github.com/users/austinabell/gists{/gist_id}", "starred_url": "https://api.github.com/users/austinabell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austinabell/subscriptions", "organizations_url": "https://api.github.com/users/austinabell/orgs", "repos_url": "https://api.github.com/users/austinabell/repos", "events_url": "https://api.github.com/users/austinabell/events{/privacy}", "received_events_url": "https://api.github.com/users/austinabell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-28T21:19:18Z", "updated_at": "2023-05-02T19:36:25Z", "closed_at": "2023-05-02T19:36:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8986", "html_url": "https://github.com/near/nearcore/pull/8986", "diff_url": "https://github.com/near/nearcore/pull/8986.diff", "patch_url": "https://github.com/near/nearcore/pull/8986.patch", "merged_at": "2023-05-02T19:36:25Z"}, "body": "Unclear why this is here, opening it just to see if anything breaks, and see what does. Curious if it's a refactor that's broken this support, as I've gotten some server-side RPC errors relating to this type.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8986/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8985", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8985/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8985/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8985/events", "html_url": "https://github.com/near/nearcore/pull/8985", "id": 1688633356, "node_id": "PR_kwDOCQUkYs5PY_1i", "number": 8985, "title": "core: make StoreKey, StoreValue and FunctionArgs serde serialisable", "user": {"login": "mina86", "id": 32383, "node_id": "MDQ6VXNlcjMyMzgz", "avatar_url": "https://avatars.githubusercontent.com/u/32383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mina86", "html_url": "https://github.com/mina86", "followers_url": "https://api.github.com/users/mina86/followers", "following_url": "https://api.github.com/users/mina86/following{/other_user}", "gists_url": "https://api.github.com/users/mina86/gists{/gist_id}", "starred_url": "https://api.github.com/users/mina86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mina86/subscriptions", "organizations_url": "https://api.github.com/users/mina86/orgs", "repos_url": "https://api.github.com/users/mina86/repos", "events_url": "https://api.github.com/users/mina86/events{/privacy}", "received_events_url": "https://api.github.com/users/mina86/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-28T14:11:27Z", "updated_at": "2023-05-02T16:40:48Z", "closed_at": "2023-05-02T15:32:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8985", "html_url": "https://github.com/near/nearcore/pull/8985", "diff_url": "https://github.com/near/nearcore/pull/8985.diff", "patch_url": "https://github.com/near/nearcore/pull/8985.patch", "merged_at": "2023-05-02T15:32:46Z"}, "body": "Derive serialisation code for StoreKey, StoreVlaue and FunctionArgs\r\nprimitive types and then use those types more in various structures\r\nwhich so far has been using raw `Vec<u8>` instead.\r\n\r\nThis improves self-documentation of the code (the type of the struct\r\nfield indicates what it is) and moves base64 format declaration to the\r\nprimitive types rather than having to annotate individual structures\r\nwith `#[serde(with = ...)]`.\r\n\r\nOn the flip side, it does add a couple `.into()` calls when converting\r\nbetween one of the aforementioned types and `Vec<u8>`.\r\n", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8985/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8983", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8983/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8983/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8983/events", "html_url": "https://github.com/near/nearcore/pull/8983", "id": 1687629214, "node_id": "PR_kwDOCQUkYs5PVo2W", "number": 8983, "title": "feat(mocknet): add a neard runner script to be run on mocknet nodes", "user": {"login": "marcelo-gonzalez", "id": 37846884, "node_id": "MDQ6VXNlcjM3ODQ2ODg0", "avatar_url": "https://avatars.githubusercontent.com/u/37846884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcelo-gonzalez", "html_url": "https://github.com/marcelo-gonzalez", "followers_url": "https://api.github.com/users/marcelo-gonzalez/followers", "following_url": "https://api.github.com/users/marcelo-gonzalez/following{/other_user}", "gists_url": "https://api.github.com/users/marcelo-gonzalez/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcelo-gonzalez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcelo-gonzalez/subscriptions", "organizations_url": "https://api.github.com/users/marcelo-gonzalez/orgs", "repos_url": "https://api.github.com/users/marcelo-gonzalez/repos", "events_url": "https://api.github.com/users/marcelo-gonzalez/events{/privacy}", "received_events_url": "https://api.github.com/users/marcelo-gonzalez/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-27T22:24:08Z", "updated_at": "2023-05-02T15:11:19Z", "closed_at": "2023-05-02T15:11:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8983", "html_url": "https://github.com/near/nearcore/pull/8983", "diff_url": "https://github.com/near/nearcore/pull/8983.diff", "patch_url": "https://github.com/near/nearcore/pull/8983.patch", "merged_at": "2023-05-02T15:11:18Z"}, "body": "This adds a script that will be in charge of running neard on the machines in the mocknet test. It will download the binaries we want to run, and will change the running binary when a particular epoch height is reached. It'll also start a JSON RPC server that for now will just allow starting/stopping neard. This allows the test script to exit after the setup is finished and the test is running instead of having to keep the computer running the test online during the whole test, which can cause problems if it's interrupted for any reason.\r\n\r\nFor now the neard runner script will just be in charge of running/upgrading neard after the test has started, but in the future it would be good to move almost all initialization logic to it, so that the burden on the computer running the script is as small as possible, and interaction with the individual test nodes can happen via JSON RPC", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8983/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8982", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8982/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8982/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8982/events", "html_url": "https://github.com/near/nearcore/pull/8982", "id": 1687470627, "node_id": "PR_kwDOCQUkYs5PVG0g", "number": 8982, "title": "fix(mirror): migrate the source storage before opening it", "user": {"login": "marcelo-gonzalez", "id": 37846884, "node_id": "MDQ6VXNlcjM3ODQ2ODg0", "avatar_url": "https://avatars.githubusercontent.com/u/37846884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcelo-gonzalez", "html_url": "https://github.com/marcelo-gonzalez", "followers_url": "https://api.github.com/users/marcelo-gonzalez/followers", "following_url": "https://api.github.com/users/marcelo-gonzalez/following{/other_user}", "gists_url": "https://api.github.com/users/marcelo-gonzalez/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcelo-gonzalez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcelo-gonzalez/subscriptions", "organizations_url": "https://api.github.com/users/marcelo-gonzalez/orgs", "repos_url": "https://api.github.com/users/marcelo-gonzalez/repos", "events_url": "https://api.github.com/users/marcelo-gonzalez/events{/privacy}", "received_events_url": "https://api.github.com/users/marcelo-gonzalez/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-27T19:59:32Z", "updated_at": "2023-04-28T15:22:33Z", "closed_at": "2023-04-28T15:22:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8982", "html_url": "https://github.com/near/nearcore/pull/8982", "diff_url": "https://github.com/near/nearcore/pull/8982.diff", "patch_url": "https://github.com/near/nearcore/pull/8982.patch", "merged_at": "2023-04-28T15:22:33Z"}, "body": "Just using near_store::NodeStorage::opener() without a migrator doesn't work if the DB version of the binary is newer than the database with the source chain transactions, which is pretty likely in practice. To fix it, we can mark nearcore::open_storage() as pub and just call that", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8982/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8982/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8979", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8979/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8979/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8979/events", "html_url": "https://github.com/near/nearcore/pull/8979", "id": 1685345252, "node_id": "PR_kwDOCQUkYs5PN6uY", "number": 8979, "title": "1.34 Changelog", "user": {"login": "nikurt", "id": 86772482, "node_id": "MDQ6VXNlcjg2NzcyNDgy", "avatar_url": "https://avatars.githubusercontent.com/u/86772482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikurt", "html_url": "https://github.com/nikurt", "followers_url": "https://api.github.com/users/nikurt/followers", "following_url": "https://api.github.com/users/nikurt/following{/other_user}", "gists_url": "https://api.github.com/users/nikurt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikurt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikurt/subscriptions", "organizations_url": "https://api.github.com/users/nikurt/orgs", "repos_url": "https://api.github.com/users/nikurt/repos", "events_url": "https://api.github.com/users/nikurt/events{/privacy}", "received_events_url": "https://api.github.com/users/nikurt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-26T16:24:39Z", "updated_at": "2023-04-28T08:46:47Z", "closed_at": "2023-04-28T08:46:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8979", "html_url": "https://github.com/near/nearcore/pull/8979", "diff_url": "https://github.com/near/nearcore/pull/8979.diff", "patch_url": "https://github.com/near/nearcore/pull/8979.patch", "merged_at": "2023-04-28T08:46:46Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8979/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8978", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8978/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8978/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8978/events", "html_url": "https://github.com/near/nearcore/pull/8978", "id": 1685210413, "node_id": "PR_kwDOCQUkYs5PNeA1", "number": 8978, "title": "fix: add description for undo-block tool", "user": {"login": "ppca", "id": 16693342, "node_id": "MDQ6VXNlcjE2NjkzMzQy", "avatar_url": "https://avatars.githubusercontent.com/u/16693342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppca", "html_url": "https://github.com/ppca", "followers_url": "https://api.github.com/users/ppca/followers", "following_url": "https://api.github.com/users/ppca/following{/other_user}", "gists_url": "https://api.github.com/users/ppca/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppca/subscriptions", "organizations_url": "https://api.github.com/users/ppca/orgs", "repos_url": "https://api.github.com/users/ppca/repos", "events_url": "https://api.github.com/users/ppca/events{/privacy}", "received_events_url": "https://api.github.com/users/ppca/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-26T15:02:46Z", "updated_at": "2023-04-26T15:18:25Z", "closed_at": "2023-04-26T15:18:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8978", "html_url": "https://github.com/near/nearcore/pull/8978", "diff_url": "https://github.com/near/nearcore/pull/8978.diff", "patch_url": "https://github.com/near/nearcore/pull/8978.patch", "merged_at": "2023-04-26T15:18:23Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8978/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8978/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8977", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8977/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8977/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8977/events", "html_url": "https://github.com/near/nearcore/pull/8977", "id": 1685044920, "node_id": "PR_kwDOCQUkYs5PM6QR", "number": 8977, "title": "fix two bugs that regarding verifying shard_id", "user": {"login": "mzhangmzz", "id": 34969888, "node_id": "MDQ6VXNlcjM0OTY5ODg4", "avatar_url": "https://avatars.githubusercontent.com/u/34969888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mzhangmzz", "html_url": "https://github.com/mzhangmzz", "followers_url": "https://api.github.com/users/mzhangmzz/followers", "following_url": "https://api.github.com/users/mzhangmzz/following{/other_user}", "gists_url": "https://api.github.com/users/mzhangmzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/mzhangmzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mzhangmzz/subscriptions", "organizations_url": "https://api.github.com/users/mzhangmzz/orgs", "repos_url": "https://api.github.com/users/mzhangmzz/repos", "events_url": "https://api.github.com/users/mzhangmzz/events{/privacy}", "received_events_url": "https://api.github.com/users/mzhangmzz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-26T13:31:56Z", "updated_at": "2023-04-26T14:13:14Z", "closed_at": "2023-04-26T14:11:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8977", "html_url": "https://github.com/near/nearcore/pull/8977", "diff_url": "https://github.com/near/nearcore/pull/8977.diff", "patch_url": "https://github.com/near/nearcore/pull/8977.patch", "merged_at": "2023-04-26T14:11:38Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8977/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8976", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8976/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8976/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8976/events", "html_url": "https://github.com/near/nearcore/pull/8976", "id": 1684795388, "node_id": "PR_kwDOCQUkYs5PMEUW", "number": 8976, "title": "tests: Verify that transaction is valid and accepted", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}, {"id": 5349008307, "node_id": "LA_kwDOCQUkYs8AAAABPtNjsw", "url": "https://api.github.com/repos/near/nearcore/labels/A-congestion", "name": "A-congestion", "color": "1863F5", "default": false, "description": "Work aimed at ensuring good system performance under congestion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/near/nearcore/milestones/26", "html_url": "https://github.com/near/nearcore/milestone/26", "labels_url": "https://api.github.com/repos/near/nearcore/milestones/26/labels", "id": 9297034, "node_id": "MI_kwDOCQUkYs4AjdyK", "number": 26, "title": "Local Congestion Control - Q2 2023", "description": "Achieve local congestion control - shard shouldn\u2019t be overwhelmed by transactions coming from its\u2019 local transaction pool.", "creator": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-18T10:23:40Z", "updated_at": "2023-07-28T09:58:08Z", "due_on": null, "closed_at": "2023-07-28T09:36:09Z"}, "comments": 0, "created_at": "2023-04-26T11:02:18Z", "updated_at": "2023-06-12T09:58:25Z", "closed_at": "2023-04-27T09:45:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8976", "html_url": "https://github.com/near/nearcore/pull/8976", "diff_url": "https://github.com/near/nearcore/pull/8976.diff", "patch_url": "https://github.com/near/nearcore/pull/8976.patch", "merged_at": "2023-04-27T09:45:32Z"}, "body": "The result of `process_tx` is important because it tells whether the submitted transaction is valid and has been accepted.\r\n\r\nSo we add `#[must_use]` annotation to it and fix all the tests that were not checking it.\r\nAs a part of this, we fix two tests that were using incorrect nonce (but still somehow functioned...):\r\n- `benchmark_large_chunk_production_time`\r\n- `test_verify_chunk_invalid_state_challenge`\r\n\r\nThis is a part of the work on introducing the transaction pool limits https://github.com/near/nearcore/issues/8878.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8976/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8974", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8974/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8974/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8974/events", "html_url": "https://github.com/near/nearcore/pull/8974", "id": 1683625884, "node_id": "PR_kwDOCQUkYs5PIKNL", "number": 8974, "title": "Update clap to 4-series (and async-recursion, async-stream, serde, openssl-macros, syn)", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-25T18:13:25Z", "updated_at": "2023-04-27T11:50:49Z", "closed_at": "2023-04-27T11:50:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8974", "html_url": "https://github.com/near/nearcore/pull/8974", "diff_url": "https://github.com/near/nearcore/pull/8974.diff", "patch_url": "https://github.com/near/nearcore/pull/8974.patch", "merged_at": "2023-04-27T11:50:48Z"}, "body": "This is something we need to upgrade the toolchain. Largely the update was uneventful, but it also pulls in other new crates, such as syn 2.0, which leads to many duplicated crates while the ecosystem is moving over to the new version.\r\n\r\nOne observation is that with the new API it is somewhat easy to get things wrong when using the manual clap API, rather than the derive version. Now that it stores the exact type it parsed, you can no longer rely on clap converting stuff for you. You are kind-of required to get types right for yourself, and any mismatch will result in a runtime panic, which is iffy.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8974/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8974/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8973", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8973/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8973/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8973/events", "html_url": "https://github.com/near/nearcore/pull/8973", "id": 1683511540, "node_id": "PR_kwDOCQUkYs5PHxxh", "number": 8973, "title": "cold-store:  prepare-hot: error -> warn", "user": {"login": "posvyatokum", "id": 10712048, "node_id": "MDQ6VXNlcjEwNzEyMDQ4", "avatar_url": "https://avatars.githubusercontent.com/u/10712048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/posvyatokum", "html_url": "https://github.com/posvyatokum", "followers_url": "https://api.github.com/users/posvyatokum/followers", "following_url": "https://api.github.com/users/posvyatokum/following{/other_user}", "gists_url": "https://api.github.com/users/posvyatokum/gists{/gist_id}", "starred_url": "https://api.github.com/users/posvyatokum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/posvyatokum/subscriptions", "organizations_url": "https://api.github.com/users/posvyatokum/orgs", "repos_url": "https://api.github.com/users/posvyatokum/repos", "events_url": "https://api.github.com/users/posvyatokum/events{/privacy}", "received_events_url": "https://api.github.com/users/posvyatokum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-25T16:41:58Z", "updated_at": "2023-04-26T08:58:03Z", "closed_at": "2023-04-26T08:58:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8973", "html_url": "https://github.com/near/nearcore/pull/8973", "diff_url": "https://github.com/near/nearcore/pull/8973.diff", "patch_url": "https://github.com/near/nearcore/pull/8973.patch", "merged_at": "2023-04-26T08:58:02Z"}, "body": "Don't scare users, because rpc head being behind cold head is normal. Rpc DB comes from backups, we only publish those once every 12 hours, it is very likely that cold db is lagging behind by less than 12 hours. \r\nError message in this case is confusing, warning is more appropriate.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8973/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8972", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8972/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8972/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8972/events", "html_url": "https://github.com/near/nearcore/pull/8972", "id": 1683294366, "node_id": "PR_kwDOCQUkYs5PHCtw", "number": 8972, "title": "near-vm: restore near-vm tests", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-25T14:32:36Z", "updated_at": "2023-05-10T11:37:28Z", "closed_at": "2023-05-10T11:37:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8972", "html_url": "https://github.com/near/nearcore/pull/8972", "diff_url": "https://github.com/near/nearcore/pull/8972.diff", "patch_url": "https://github.com/near/nearcore/pull/8972.patch", "merged_at": "2023-05-10T11:37:26Z"}, "body": "This makes sure we run all of the tests we have for the runtime. I don't particularly enjoy or appreciate the compexity of the test suite setup (e.g. we no longer need the proc macro since we only have and will ever have a single engine and compiler...), but I felt like it'd be better to restore the original functionality first and then simplify later.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8972/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8971", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8971/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8971/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8971/events", "html_url": "https://github.com/near/nearcore/pull/8971", "id": 1683043889, "node_id": "PR_kwDOCQUkYs5PGMki", "number": 8971, "title": "Split store in shards manager", "user": {"login": "posvyatokum", "id": 10712048, "node_id": "MDQ6VXNlcjEwNzEyMDQ4", "avatar_url": "https://avatars.githubusercontent.com/u/10712048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/posvyatokum", "html_url": "https://github.com/posvyatokum", "followers_url": "https://api.github.com/users/posvyatokum/followers", "following_url": "https://api.github.com/users/posvyatokum/following{/other_user}", "gists_url": "https://api.github.com/users/posvyatokum/gists{/gist_id}", "starred_url": "https://api.github.com/users/posvyatokum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/posvyatokum/subscriptions", "organizations_url": "https://api.github.com/users/posvyatokum/orgs", "repos_url": "https://api.github.com/users/posvyatokum/repos", "events_url": "https://api.github.com/users/posvyatokum/events{/privacy}", "received_events_url": "https://api.github.com/users/posvyatokum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-25T12:06:36Z", "updated_at": "2023-04-25T18:10:43Z", "closed_at": "2023-04-25T18:10:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8971", "html_url": "https://github.com/near/nearcore/pull/8971", "diff_url": "https://github.com/near/nearcore/pull/8971.diff", "patch_url": "https://github.com/near/nearcore/pull/8971.patch", "merged_at": "2023-04-25T18:10:42Z"}, "body": "Making ShardsManager and ViewClient use the same runtime and store. That is very important for block sync from far away (for archival nodes who don't want to download from s3, basically).\r\nRight now chunk requests are handled by shards manager, and if the node is using split storage, shards manager needs an access to it to properly sync its peers.\r\n\r\nIn reality something will only change for split storage archival nodes that have configured to use split storage in view client.\r\nLook into [get_split_store](https://github.com/near/nearcore/blob/363dafecd0fdd5767ba550bdaadc53537379a62a/nearcore/src/lib.rs#L158) function to check me on that.\r\n\r\nAnd yes, @nikurt I would like to have it in 1.34. Cold storage works even without it. It is only blocking block sync for other archival nodes who have a misfortune to have split node as the only archival peer.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8971/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8970", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8970/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8970/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8970/events", "html_url": "https://github.com/near/nearcore/pull/8970", "id": 1682933630, "node_id": "PR_kwDOCQUkYs5PF0sS", "number": 8970, "title": "feature: Introduce a limit to transaction pool size", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5349008307, "node_id": "LA_kwDOCQUkYs8AAAABPtNjsw", "url": "https://api.github.com/repos/near/nearcore/labels/A-congestion", "name": "A-congestion", "color": "1863F5", "default": false, "description": "Work aimed at ensuring good system performance under congestion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/near/nearcore/milestones/26", "html_url": "https://github.com/near/nearcore/milestone/26", "labels_url": "https://api.github.com/repos/near/nearcore/milestones/26/labels", "id": 9297034, "node_id": "MI_kwDOCQUkYs4AjdyK", "number": 26, "title": "Local Congestion Control - Q2 2023", "description": "Achieve local congestion control - shard shouldn\u2019t be overwhelmed by transactions coming from its\u2019 local transaction pool.", "creator": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-18T10:23:40Z", "updated_at": "2023-07-28T09:58:08Z", "due_on": null, "closed_at": "2023-07-28T09:36:09Z"}, "comments": 0, "created_at": "2023-04-25T10:57:14Z", "updated_at": "2023-06-12T09:58:30Z", "closed_at": "2023-05-11T14:08:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8970", "html_url": "https://github.com/near/nearcore/pull/8970", "diff_url": "https://github.com/near/nearcore/pull/8970.diff", "patch_url": "https://github.com/near/nearcore/pull/8970.patch", "merged_at": "2023-05-11T14:08:34Z"}, "body": "The PR introduces a limit to the size of the transaction pool for each shard and a logic that rejects transactions that go over this limit. The reasoning for this work is described in https://github.com/near/nearcore/issues/3284.\r\n\r\nTo start, the limit will be disabled (effectively set to infinity) and this PR shouldn't have any effect. The node operators can override it with a config option. In the future, we will come up with a safe value to set by default (probably between 10 MiB - 1 GiB).\r\n\r\nWe also start with a simple option where the RPC client will not know if their transaction runs into this limit. We will need to rework this part in the future, but it will have to touch the transaction forwarding code in a non-trivial way, and I would prefer to work on this when we have a congestion test ready https://github.com/near/nearcore/issues/8920.\r\n\r\nLastly, this PR adds some nuance to handling reintroducing transactions back to the pool after reorg or producing a chunk (`reintroduce_transactions` method), by acknowledging that not all transactions might have been included and logging the number of dropped transactions.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8970/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8968", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8968/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8968/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8968/events", "html_url": "https://github.com/near/nearcore/pull/8968", "id": 1682100035, "node_id": "PR_kwDOCQUkYs5PDCO3", "number": 8968, "title": "fix: correct read mode for storage_has_key", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2023-04-24T21:56:35Z", "updated_at": "2023-04-25T10:12:09Z", "closed_at": "2023-04-25T10:12:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8968", "html_url": "https://github.com/near/nearcore/pull/8968", "diff_url": "https://github.com/near/nearcore/pull/8968.diff", "patch_url": "https://github.com/near/nearcore/pull/8968.patch", "merged_at": "2023-04-25T10:12:08Z"}, "body": "In `storage_has_key` we were setting `KeyLookupMode::FlatStorage` by default. This is correct for most reads, but not for reads inside contracts, as it impacts chunk cache and contract call costs.\r\n\r\nWe must read from flat storage deterministically and derive lookup mode from protocol version.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8968/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8966", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8966/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8966/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8966/events", "html_url": "https://github.com/near/nearcore/pull/8966", "id": 1681210865, "node_id": "PR_kwDOCQUkYs5PAAGE", "number": 8966, "title": "fix: less spammy flat storage logs", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-24T12:52:23Z", "updated_at": "2023-04-24T13:09:27Z", "closed_at": "2023-04-24T13:09:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8966", "html_url": "https://github.com/near/nearcore/pull/8966", "diff_url": "https://github.com/near/nearcore/pull/8966.diff", "patch_url": "https://github.com/near/nearcore/pull/8966.patch", "merged_at": "2023-04-24T13:09:27Z"}, "body": "Change info to debug because it is +8 messages per block and postprocess/preprocess block messages are already at debug level.\r\n\r\nAlso changing target to `store` for info messages because they don't logically belong to chain.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8966/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8966/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8965", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8965/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8965/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8965/events", "html_url": "https://github.com/near/nearcore/pull/8965", "id": 1681190223, "node_id": "PR_kwDOCQUkYs5O_7gP", "number": 8965, "title": "Only store transactions on validator nodes", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5349008307, "node_id": "LA_kwDOCQUkYs8AAAABPtNjsw", "url": "https://api.github.com/repos/near/nearcore/labels/A-congestion", "name": "A-congestion", "color": "1863F5", "default": false, "description": "Work aimed at ensuring good system performance under congestion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/near/nearcore/milestones/26", "html_url": "https://github.com/near/nearcore/milestone/26", "labels_url": "https://api.github.com/repos/near/nearcore/milestones/26/labels", "id": 9297034, "node_id": "MI_kwDOCQUkYs4AjdyK", "number": 26, "title": "Local Congestion Control - Q2 2023", "description": "Achieve local congestion control - shard shouldn\u2019t be overwhelmed by transactions coming from its\u2019 local transaction pool.", "creator": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-18T10:23:40Z", "updated_at": "2023-07-28T09:58:08Z", "due_on": null, "closed_at": "2023-07-28T09:36:09Z"}, "comments": 1, "created_at": "2023-04-24T12:44:21Z", "updated_at": "2023-06-12T09:58:23Z", "closed_at": "2023-04-24T15:38:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8965", "html_url": "https://github.com/near/nearcore/pull/8965", "diff_url": "https://github.com/near/nearcore/pull/8965.diff", "patch_url": "https://github.com/near/nearcore/pull/8965.patch", "merged_at": "2023-04-24T15:38:26Z"}, "body": "At the moment transactions are indefinitely stored on RPC nodes that are not validators (https://github.com/near/nearcore/issues/8878, https://github.com/near/nearcore/pull/6713).\r\n\r\nThe intent of this commit is to avoid storing transactions on any node that can't be a chunk/block producer and as far as I understand, such node **requires** a validator key, so we use it as a condition to store the transaction.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8965/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8944", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8944/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8944/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8944/events", "html_url": "https://github.com/near/nearcore/pull/8944", "id": 1680994828, "node_id": "PR_kwDOCQUkYs5O_Qgh", "number": 8944, "title": "Improve docstrings and code of `TransactionPool`", "user": {"login": "aborg-dev", "id": 1192958, "node_id": "MDQ6VXNlcjExOTI5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1192958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aborg-dev", "html_url": "https://github.com/aborg-dev", "followers_url": "https://api.github.com/users/aborg-dev/followers", "following_url": "https://api.github.com/users/aborg-dev/following{/other_user}", "gists_url": "https://api.github.com/users/aborg-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/aborg-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aborg-dev/subscriptions", "organizations_url": "https://api.github.com/users/aborg-dev/orgs", "repos_url": "https://api.github.com/users/aborg-dev/repos", "events_url": "https://api.github.com/users/aborg-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/aborg-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1136018846, "node_id": "MDU6TGFiZWwxMTM2MDE4ODQ2", "url": "https://api.github.com/repos/near/nearcore/labels/C-housekeeping", "name": "C-housekeeping", "color": "9745C6", "default": false, "description": "Category: Refactoring, cleanups, code quality"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-24T11:02:14Z", "updated_at": "2023-06-12T09:58:22Z", "closed_at": "2023-04-24T12:51:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8944", "html_url": "https://github.com/near/nearcore/pull/8944", "diff_url": "https://github.com/near/nearcore/pull/8944.diff", "patch_url": "https://github.com/near/nearcore/pull/8944.patch", "merged_at": "2023-04-24T12:51:15Z"}, "body": "This commit makes docstrings of `TransactionPool` more consistent and simplifies `remove_transaction` implementation.\r\n\r\nThis is a part of refactoring for https://github.com/near/nearcore/issues/8878.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8944/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8943", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8943/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8943/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8943/events", "html_url": "https://github.com/near/nearcore/pull/8943", "id": 1680971451, "node_id": "PR_kwDOCQUkYs5O_LY9", "number": 8943, "title": "fix: remove cfg from undo block tool", "user": {"login": "Longarithm", "id": 8607261, "node_id": "MDQ6VXNlcjg2MDcyNjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8607261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Longarithm", "html_url": "https://github.com/Longarithm", "followers_url": "https://api.github.com/users/Longarithm/followers", "following_url": "https://api.github.com/users/Longarithm/following{/other_user}", "gists_url": "https://api.github.com/users/Longarithm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Longarithm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Longarithm/subscriptions", "organizations_url": "https://api.github.com/users/Longarithm/orgs", "repos_url": "https://api.github.com/users/Longarithm/repos", "events_url": "https://api.github.com/users/Longarithm/events{/privacy}", "received_events_url": "https://api.github.com/users/Longarithm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-24T10:48:35Z", "updated_at": "2023-04-24T11:21:54Z", "closed_at": "2023-04-24T11:21:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8943", "html_url": "https://github.com/near/nearcore/pull/8943", "diff_url": "https://github.com/near/nearcore/pull/8943.diff", "patch_url": "https://github.com/near/nearcore/pull/8943.patch", "merged_at": "2023-04-24T11:21:54Z"}, "body": "There was a minor conflict while merging #8681 and #8761. Removing cfg(feature) because feature is stabilized now.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8943/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8942", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8942/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8942/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8942/events", "html_url": "https://github.com/near/nearcore/pull/8942", "id": 1680703993, "node_id": "PR_kwDOCQUkYs5O-R0d", "number": 8942, "title": "more cold columns", "user": {"login": "posvyatokum", "id": 10712048, "node_id": "MDQ6VXNlcjEwNzEyMDQ4", "avatar_url": "https://avatars.githubusercontent.com/u/10712048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/posvyatokum", "html_url": "https://github.com/posvyatokum", "followers_url": "https://api.github.com/users/posvyatokum/followers", "following_url": "https://api.github.com/users/posvyatokum/following{/other_user}", "gists_url": "https://api.github.com/users/posvyatokum/gists{/gist_id}", "starred_url": "https://api.github.com/users/posvyatokum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/posvyatokum/subscriptions", "organizations_url": "https://api.github.com/users/posvyatokum/orgs", "repos_url": "https://api.github.com/users/posvyatokum/repos", "events_url": "https://api.github.com/users/posvyatokum/events{/privacy}", "received_events_url": "https://api.github.com/users/posvyatokum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-24T08:17:00Z", "updated_at": "2023-04-24T10:50:07Z", "closed_at": "2023-04-24T10:50:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8942", "html_url": "https://github.com/near/nearcore/pull/8942", "diff_url": "https://github.com/near/nearcore/pull/8942.diff", "patch_url": "https://github.com/near/nearcore/pull/8942.patch", "merged_at": "2023-04-24T10:50:05Z"}, "body": "Addressing some of the TODOs by Waclaw.\r\nMaking PartialChunks, ChunkHashesByHeight, and BlockPerHeight cold instead of implementing logic to recompute them.\r\nThis adds ~30Gb to cold DB. \r\nShould be included in 1.34.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8942/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8940", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8940/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8940/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8940/events", "html_url": "https://github.com/near/nearcore/pull/8940", "id": 1678975690, "node_id": "PR_kwDOCQUkYs5O4tx1", "number": 8940, "title": "[Runtime Epoch Split] (7/n) Split runtime everywhere else", "user": {"login": "robin-near", "id": 111538878, "node_id": "U_kgDOBqXyvg", "avatar_url": "https://avatars.githubusercontent.com/u/111538878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robin-near", "html_url": "https://github.com/robin-near", "followers_url": "https://api.github.com/users/robin-near/followers", "following_url": "https://api.github.com/users/robin-near/following{/other_user}", "gists_url": "https://api.github.com/users/robin-near/gists{/gist_id}", "starred_url": "https://api.github.com/users/robin-near/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robin-near/subscriptions", "organizations_url": "https://api.github.com/users/robin-near/orgs", "repos_url": "https://api.github.com/users/robin-near/repos", "events_url": "https://api.github.com/users/robin-near/events{/privacy}", "received_events_url": "https://api.github.com/users/robin-near/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-04-21T19:12:54Z", "updated_at": "2023-05-11T17:15:00Z", "closed_at": "2023-05-11T17:14:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8940", "html_url": "https://github.com/near/nearcore/pull/8940", "diff_url": "https://github.com/near/nearcore/pull/8940.diff", "patch_url": "https://github.com/near/nearcore/pull/8940.patch", "merged_at": "2023-05-11T17:14:59Z"}, "body": "This does the bulk of the remaining split, which is all a bit intertwined. Although there are a ton of changes, the transformations are simple for the most part.\r\n\r\nRuntimeWithEpochManagerAdapter was the previous combined trait. There were two implementations of that trait: NightshadeRuntime and KeyValueRuntime.\r\n\r\nNow, RuntimeWithEpochManagerAdapter is split into three: EpochManagerAdapter, ShardTracker, and RuntimeAdapter:\r\n - EpochManagerAdapter is a direct abstraction of EpochManagerHandle (which is basically a `Mutex<EpochManager>`). The reason why we cannot use EpochManagerHandle directly instead of a trait is because KeyValueRuntime cannot provide a concrete EpochManager implementation. It has a completely custom validator schedule that is not compatible at all. NightshadeRuntime, on the other hand, contains an embedded EpochManagerHandle.\r\n - ShardTracker is just a TrackedConfig plus an `Arc<dyn EpochManagerAdapter>`. It doesn't belong to EpochManagerAdapter because the TrackedConfig is not inherent to the protocol. ShardTracker is responsible for one thing: calculating whether this node itself cares or will care about a specific shard. For querying whether some *other* validator is supposed to track a shard, use the EpochManagerAdapter, not ShardTracker.\r\n - RuntimeAdapter is an abstraction of everything that has to do with the runtime and account storage, such as `get_trie_for_shard`. It does bleed a little bit into the EpochManagerAdapter responsibilities, more on that later.\r\n\r\nHow does this split work for the two implementations: NightshadeRuntime and KeyValueRuntime?\r\n - NightshadeRuntime is split into EpochManagerHandle, ShardTracker, and NightshadeRuntime. So essentially, EpochManagerHandle is moved out (well, conceptually, but it still keeps a reference to it because some runtime methods depend on it - eventually this can be moved out as well and have the EpochManagerAdapter be passed in), ShardTracker is moved out, and NightshadeRuntime itself now only implements RuntimeAdapter.\r\n   - When constructing the NightshadeRuntime, we must first construct the EpochManagerHandle. This is because we cannot have the NightshadeRuntime internally construct a different EpochManagerHandle, or else the two EpochManagers will not synchronize state, and things fail.\r\n - KeyValueRuntime is split into KeyValueEpochManager, and KeyValueRuntime. There's no ShardTracker specific to KeyValueXXX anymore (because it's a concrete type to begin with). KeyValueRuntime takes as a constructor argument KeyValueEpochManager; but here it's really just to help initialize some fields (num_shards, epoch_length, etc.).\r\n\r\nNow, we talk about how users of this split are modified accordingly:\r\n - Wherever a struct used to keep a field `runtime_adapter: Arc<dyn RuntimeWithEpochManagerAdapter>`, it is now split into three fields, `epoch_manager: Arc<dyn EpochManagerAdapter>`, `shard_tracker: ShardTracker`, and `runtime: Arc<dyn RuntimeAdapter>`, but we can omit some of them if they are not actually used. Usages of the old field are individually changed to use only one of the new fields.\r\n   - Note that queries to `self.runtime_adapter.cares_about_shard(..., ..., ..., is_me: true)` is changed to `self.shard_tracker.care_about_shard(..., ..., ..., true)` whereas `self.runtime_adapter.cares_about_shard(..., ..., ..., is_me: false)` is changed to `self.epoch_manager.cares_about_shard_from_prev_block`, because the latter does not actually need the ShardTracker.\r\n   - Wherever we used to convert a runtime_adapter into one of the subtraits, we now must construct the subtrait directly:\r\n      - any `Arc<dyn RuntimeWithEpochManagerAdapter>` argument that was passed in is split into up to three arguments depending on which are actually used.\r\n      - any direct construction of NightshadeRuntime is easily converted to separate constructions of EpochManager, NightshadeRuntime, and ShardTracker.\r\n      - any direct construction of KeyValueRuntime is easily converted to separate constructions of KeyValueEpochManager, KeyValueRuntime, and ShardTracker.\r\n - The TestEnv is one big part of this refactoring. The TestEnvBuilder used to take a `.runtime_adapters(Vec<Arc<dyn RuntimeWithEpochManagerAdapter>>)`, but now we don't have the RuntimeWithEpochManagerAdapters anymore. We could split this into three, of course, but this would present a pretty bad inconvenience to any tests that call helpers like create_nightshade_runtimes(...). So, the logic is now the following:\r\n   - There are now .stores(...), .epoch_managers(...), .shard_trackers(...), and .runtimes(...) overrides available. These must be overridden in an appropriate partial order (epoch_managers > stores, shard_trackers > epoch_managers, runtimes > epoch_managers, and also, stores > clients, epoch_managers > validators).\r\n   - Any override that is not explicitly provided will be constructed with a default (where N is the number of clients):\r\n     - stores will be default-constructed as N elements of `create_test_store()`.\r\n     - epoch_managers will be default-constructed as N elements of `KeyValueEpochManager` using the stores we have (this is why the stores must be finalized, either default-constructed or overridden, first, thus the partial order)\r\n     - shard_trackers will be default-constructed as N elements of `ShardTracker` using the epoch_managers we have, with empty tracking config.\r\n     - runtimes will be default-constructed as N elements of `KeyValueRuntime` using the stores and epoch_managers we have.\r\n   - In addition, there are helpers that allow overriding with something other than the default:\r\n     - `.track_all_shards()`: constructs shard_trackers that use the epoch_managers we have but with AllShards tracking\r\n     - `.real_epoch_managers()`: constructs epoch_managers as N `Arc<EpochManagerHandle>`s instead of KeyValueEpochManager\r\n     - `.nightshade_runtimes()` (this is an extension method that lives in integration-tests, to avoid a dependency cycle): constructs runtimes as N `Arc<NightshadeRuntime>`s using the stores and epoch_managers we have.\r\n   - As a result, most of the constructions in integration-tests have been converted to using only these helper functions, as opposed to constructing runtimes directly in the tests. Some tests outside of integration-tests still construct directly, which is OK as they used to do that as well; we just now have to make sure to override stores, epoch_managers, and runtimes together so they are consistent.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8940/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8940/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/near/nearcore/issues/8937", "repository_url": "https://api.github.com/repos/near/nearcore", "labels_url": "https://api.github.com/repos/near/nearcore/issues/8937/labels{/name}", "comments_url": "https://api.github.com/repos/near/nearcore/issues/8937/comments", "events_url": "https://api.github.com/repos/near/nearcore/issues/8937/events", "html_url": "https://github.com/near/nearcore/pull/8937", "id": 1678287475, "node_id": "PR_kwDOCQUkYs5O2ZcB", "number": 8937, "title": "rust: 1.68.2 -> 1.69.0", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-21T10:29:15Z", "updated_at": "2023-04-28T10:55:10Z", "closed_at": "2023-04-28T10:55:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/near/nearcore/pulls/8937", "html_url": "https://github.com/near/nearcore/pull/8937", "diff_url": "https://github.com/near/nearcore/pull/8937.diff", "patch_url": "https://github.com/near/nearcore/pull/8937.patch", "merged_at": "2023-04-28T10:55:09Z"}, "body": "Upgrade to this long awaited nice version that just so happened to have been released on a particularly well timed occassion.", "reactions": {"url": "https://api.github.com/repos/near/nearcore/issues/8937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/near/nearcore/issues/8937/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]