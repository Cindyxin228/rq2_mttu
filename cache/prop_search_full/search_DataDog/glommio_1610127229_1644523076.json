[{"url": "https://api.github.com/repos/DataDog/glommio/issues/525", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/525/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/525/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/525/events", "html_url": "https://github.com/DataDog/glommio/pull/525", "id": 1130492283, "node_id": "PR_kwDOEW1k-s4yZ6ls", "number": 525, "title": "release version 0.7.0", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-10T17:12:06Z", "updated_at": "2022-02-10T17:12:32Z", "closed_at": "2022-02-10T17:12:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/525", "html_url": "https://github.com/DataDog/glommio/pull/525", "diff_url": "https://github.com/DataDog/glommio/pull/525.diff", "patch_url": "https://github.com/DataDog/glommio/pull/525.patch", "merged_at": "2022-02-10T17:12:28Z"}, "body": "Things have changed quite a bit since 0.6.0!", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/525/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/523", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/523/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/523/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/523/events", "html_url": "https://github.com/DataDog/glommio/pull/523", "id": 1127794720, "node_id": "PR_kwDOEW1k-s4yQ1a4", "number": 523, "title": "fix the unit tests covering `spin_before_park`", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-08T21:50:33Z", "updated_at": "2022-02-09T22:36:34Z", "closed_at": "2022-02-09T22:36:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/523", "html_url": "https://github.com/DataDog/glommio/pull/523", "diff_url": "https://github.com/DataDog/glommio/pull/523.diff", "patch_url": "https://github.com/DataDog/glommio/pull/523.patch", "merged_at": "2022-02-09T22:36:34Z"}, "body": "These tests were passing but weren't measuring what we thought they were\r\nbecause of a call to `getrusage` with `RUSAGE_THREAD` made from an \r\nexternal thread. \r\nAdditionally, we were only measuring user time. We now also account for \r\nsystem time. This makes sense because when glommio is spinning, a \r\nsignificant portion of CPU time is expected to be spent in the kernel \r\npolling IO sources.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/523/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/523/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/519", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/519/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/519/events", "html_url": "https://github.com/DataDog/glommio/pull/519", "id": 1118453941, "node_id": "PR_kwDOEW1k-s4xycxJ", "number": 519, "title": "use an asynchronous queue to submit blocking operations", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-01-30T08:03:21Z", "updated_at": "2022-02-07T18:28:14Z", "closed_at": "2022-02-07T18:28:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/519", "html_url": "https://github.com/DataDog/glommio/pull/519", "diff_url": "https://github.com/DataDog/glommio/pull/519.diff", "patch_url": "https://github.com/DataDog/glommio/pull/519.patch", "merged_at": "2022-02-07T18:28:11Z"}, "body": "We now use a bounded channel that yields to the scheduler when it is\r\nfull. This is desirable because we want to apply backpressure to\r\nuser-code in those cases rather than to allocate or block.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/519/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/518", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/518/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/518/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/518/events", "html_url": "https://github.com/DataDog/glommio/pull/518", "id": 1118444330, "node_id": "PR_kwDOEW1k-s4xyayF", "number": 518, "title": "pin Glommio CI to rust 1.58; update README", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-30T07:28:43Z", "updated_at": "2022-01-30T07:52:11Z", "closed_at": "2022-01-30T07:52:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/518", "html_url": "https://github.com/DataDog/glommio/pull/518", "diff_url": "https://github.com/DataDog/glommio/pull/518.diff", "patch_url": "https://github.com/DataDog/glommio/pull/518.patch", "merged_at": "2022-01-30T07:52:08Z"}, "body": "#516 raised the question of Glommio's minimum rust version. For now, at least, pin CI to 1.58 and mention that this is the minimum required in the README.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/518/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/518/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/517", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/517/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/517/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/517/events", "html_url": "https://github.com/DataDog/glommio/pull/517", "id": 1118440206, "node_id": "PR_kwDOEW1k-s4xyaBd", "number": 517, "title": "allow enabling and disabling the stall detector at runtime", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-30T07:02:45Z", "updated_at": "2022-01-30T07:39:04Z", "closed_at": "2022-01-30T07:39:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/517", "html_url": "https://github.com/DataDog/glommio/pull/517", "diff_url": "https://github.com/DataDog/glommio/pull/517.diff", "patch_url": "https://github.com/DataDog/glommio/pull/517.patch", "merged_at": "2022-01-30T07:39:01Z"}, "body": "The original work left the method private because exposing it required\r\nthe stall detector to use interior mutability. This commit does the\r\ntrick.\r\n\r\nAlso fixes the cargo doc issues.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/517/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/517/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/515", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/515/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/515/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/515/events", "html_url": "https://github.com/DataDog/glommio/pull/515", "id": 1114135220, "node_id": "PR_kwDOEW1k-s4xkk7F", "number": 515, "title": "gracefully handle `SIGINT` signals while sleeping", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-01-25T16:55:15Z", "updated_at": "2022-01-25T17:19:02Z", "closed_at": "2022-01-25T17:18:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/515", "html_url": "https://github.com/DataDog/glommio/pull/515", "diff_url": "https://github.com/DataDog/glommio/pull/515.diff", "patch_url": "https://github.com/DataDog/glommio/pull/515.patch", "merged_at": "2022-01-25T17:18:58Z"}, "body": "A thread may be sleeping while other threads in the system deal with\r\nsignals. If that happens, gracefully wake up and loop back to the\r\nreactor.\r\n\r\nCo-authored-by: David Blewett <david.blewett@datadoghq.com>", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/515/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/514", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/514/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/514/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/514/events", "html_url": "https://github.com/DataDog/glommio/pull/514", "id": 1110187974, "node_id": "PR_kwDOEW1k-s4xXp0l", "number": 514, "title": "Update `OpenOptions::append` to return `&mut Self`", "user": {"login": "r3v2d0g", "id": 8067794, "node_id": "MDQ6VXNlcjgwNjc3OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8067794?v=4", "gravatar_id": "", "url": "https://api.github.com/users/r3v2d0g", "html_url": "https://github.com/r3v2d0g", "followers_url": "https://api.github.com/users/r3v2d0g/followers", "following_url": "https://api.github.com/users/r3v2d0g/following{/other_user}", "gists_url": "https://api.github.com/users/r3v2d0g/gists{/gist_id}", "starred_url": "https://api.github.com/users/r3v2d0g/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/r3v2d0g/subscriptions", "organizations_url": "https://api.github.com/users/r3v2d0g/orgs", "repos_url": "https://api.github.com/users/r3v2d0g/repos", "events_url": "https://api.github.com/users/r3v2d0g/events{/privacy}", "received_events_url": "https://api.github.com/users/r3v2d0g/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-21T08:26:06Z", "updated_at": "2022-01-21T11:45:11Z", "closed_at": "2022-01-21T11:37:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/514", "html_url": "https://github.com/DataDog/glommio/pull/514", "diff_url": "https://github.com/DataDog/glommio/pull/514.diff", "patch_url": "https://github.com/DataDog/glommio/pull/514.patch", "merged_at": "2022-01-21T11:37:23Z"}, "body": "### What does this PR do?\r\n\r\nIt updates `OpenOptions::append` to return `&mut Self`.\r\n\r\n### Motivation\r\n\r\nN/A\r\n\r\n### Related issues\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/514/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/511", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/511/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/511/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/511/events", "html_url": "https://github.com/DataDog/glommio/pull/511", "id": 1107135975, "node_id": "PR_kwDOEW1k-s4xNvDI", "number": 511, "title": "TcpListener: support FromRawFd", "user": {"login": "codyps", "id": 103437, "node_id": "MDQ6VXNlcjEwMzQzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/103437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/codyps", "html_url": "https://github.com/codyps", "followers_url": "https://api.github.com/users/codyps/followers", "following_url": "https://api.github.com/users/codyps/following{/other_user}", "gists_url": "https://api.github.com/users/codyps/gists{/gist_id}", "starred_url": "https://api.github.com/users/codyps/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/codyps/subscriptions", "organizations_url": "https://api.github.com/users/codyps/orgs", "repos_url": "https://api.github.com/users/codyps/repos", "events_url": "https://api.github.com/users/codyps/events{/privacy}", "received_events_url": "https://api.github.com/users/codyps/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-18T16:47:30Z", "updated_at": "2022-01-18T20:28:07Z", "closed_at": "2022-01-18T20:28:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/511", "html_url": "https://github.com/DataDog/glommio/pull/511", "diff_url": "https://github.com/DataDog/glommio/pull/511.diff", "patch_url": "https://github.com/DataDog/glommio/pull/511.patch", "merged_at": "2022-01-18T20:28:07Z"}, "body": "### What does this PR do?\r\n\r\nUdpSocket, TcpStream, UnixStream, etc, provide FromRawFd already, but\r\nTcpListener lacks it. Add FromRawFd to TcpListener to allow custom\r\nsources for TcpListeners to be used (for example, systemd-style socket\r\nactivation and fds sent over unix sockets).\r\n\r\n### Motivation\r\n\r\nI wanted to have systemd socket activation work with a program using glommio\r\n\r\n### Additional Notes\r\n\r\n - I've chosen not to set the listen queue or any flags on the fd here under the theory that the user, if they are passing a raw fd, has likely already configured them (for example, when using systemd's socket activation, I configure the listen queue in the .socket unit file)\r\n - It doesn't look like there are any existing unit tests for any FromRawFd impls. I'm not sure exactly what the pattern should be for unit testing this.\r\n - Separately, it could also be useful to have `IntoRawFd` and `AsRawFd` to allow users to get fds out of glommio if needed for some reason\r\n - I've exposed only FromRawFd in this PR, but it might make sense to provide `From` impls for `std::net::*` and/or `socket2` types as they would allow applications needed these conversions to avoid using unsafe code (calling `from_raw_fd()` is unsafe).\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/511/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/510", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/510/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/510/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/510/events", "html_url": "https://github.com/DataDog/glommio/pull/510", "id": 1107133085, "node_id": "PR_kwDOEW1k-s4xNuhz", "number": 510, "title": " Method RwLock#close returns error if some fibres still hold locks.", "user": {"login": "andrii0lomakin", "id": 105066, "node_id": "MDQ6VXNlcjEwNTA2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrii0lomakin", "html_url": "https://github.com/andrii0lomakin", "followers_url": "https://api.github.com/users/andrii0lomakin/followers", "following_url": "https://api.github.com/users/andrii0lomakin/following{/other_user}", "gists_url": "https://api.github.com/users/andrii0lomakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrii0lomakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrii0lomakin/subscriptions", "organizations_url": "https://api.github.com/users/andrii0lomakin/orgs", "repos_url": "https://api.github.com/users/andrii0lomakin/repos", "events_url": "https://api.github.com/users/andrii0lomakin/events{/privacy}", "received_events_url": "https://api.github.com/users/andrii0lomakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-01-18T16:45:25Z", "updated_at": "2022-02-09T17:54:42Z", "closed_at": "2022-02-09T17:54:42Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/510", "html_url": "https://github.com/DataDog/glommio/pull/510", "diff_url": "https://github.com/DataDog/glommio/pull/510.diff", "patch_url": "https://github.com/DataDog/glommio/pull/510.patch", "merged_at": "2022-02-09T17:54:41Z"}, "body": "### What does this PR do?\r\n\r\n Method RwLock#close returns error if some fibres still hold locks.\r\n\r\n### Motivation\r\n\r\nThis change is done to remove panic from Deref implementations of RwLockRead(Write)Guards if RwLock is already closed.\r\n\r\n### Related issues\r\n\r\nIssue #482\r\n\r\n### Checklist\r\n\r\n[x] I have added unit tests to the code I am submitting\r\n[x] My unit tests cover both failure and success scenarios\r\n[x] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/510/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/509", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/509/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/509/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/509/events", "html_url": "https://github.com/DataDog/glommio/pull/509", "id": 1106451704, "node_id": "PR_kwDOEW1k-s4xLfy1", "number": 509, "title": "add throughput-based preemption ", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-18T04:02:26Z", "updated_at": "2022-01-30T07:30:23Z", "closed_at": "2022-01-30T07:30:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/509", "html_url": "https://github.com/DataDog/glommio/pull/509", "diff_url": "https://github.com/DataDog/glommio/pull/509.diff", "patch_url": "https://github.com/DataDog/glommio/pull/509.patch", "merged_at": "2022-01-30T07:30:19Z"}, "body": "```\r\nPreemption is difficult to get right. Implementations need to strike a\r\ndelicate balance between preempting too little at the risk of starving\r\nthe reactor or preempting too much at the expense of CPU performance\r\n(d/i caches, branch prediction, etc.).\r\n\r\nGlommio today uses two related mechanisms for preemption:\r\n* An event-based preemption mechanism that preempts every time the\r\n  latency ring has at least one CQE ready;\r\n* A timer-based approach to preemption: every task queue in the system\r\n  either defines or inherits a preemption duration representing the\r\n  maximum amount of time we can spend outside the reactor. A timer is\r\n  inserted in the latency ring based on this value. When it fires,\r\n  condition (1) triggers, and we preempt.\r\n\r\nThis system is effective when a user submits some IO requests and values\r\nthe latency of those individual requests more than the system's\r\nconcurrency as a whole. In other words, the user trades throughput for\r\nlatency.\r\n\r\nHowever, for workloads only interested in throughput, this system\r\ndoesn't work as well. Although it is intuitive to think a higher\r\npreemption timer would favor throughput, it is the opposite for IO. If\r\nthe preemption timer is set to 100ms (the default), we will only submit\r\nand collect requests once every 100ms. Although the CPU will deliver\r\nvery high throughput, the IO system will be barely utilized. Therefore,\r\nusers are encouraged to use lower and lower preemption timers to the\r\ndetriment of CPU throughput.\r\n\r\nIn this case, a good system would maximize both IO and CPU performance\r\nby preempting exactly at the starvation tipping point: just before it\r\nruns out of work. Such a system would maximize throughput because if the\r\nsystem can process one thousand concurrent requests, then preemption\r\nwould trigger only once every 1k or so requests processed.\r\n\r\nThis is what this commit introduces: throughput-based preemption. We now\r\ninsert an additional timer in the main ring that only fires when a\r\nminimum number of CQEs are available to collect. It does so rather\r\ncleverly by defining a timer and linking it to a second SQE that writes\r\nto the latency ring's eventfd. Because the latency ring always reads\r\nthis eventfd, we can trigger a preemption from an event on the main\r\nring.\r\n\r\nI collected some numbers using the `competing_io` benchmark that I made \r\nto evaluate this use case:\r\n```\r\n\r\n| Preemption \u2192   Shares\u2193 | 10ms                | 10ms + Tput          | 500us               | 500us + Tput        |\r\n|-------------------------|---------------------|----------------------|---------------------|---------------------|\r\n| IO:100  CPU:100        | IOPS: 39k CPU: 157M | IOPS: 297k CPU: 55M  | IOPS: 413k CPU: 28M | IOPS: 398k CPU: 31M |\r\n| IO:100  CPU:10         | IOPS: 39k CPU: 159M | IOPS: 308k CPU: 54M  | IOPS: 471k CPU: 6M  | IOPS: 462k CPU: 5M  |", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/509/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/509/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/508", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/508/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/508/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/508/events", "html_url": "https://github.com/DataDog/glommio/pull/508", "id": 1106204552, "node_id": "PR_kwDOEW1k-s4xKtRl", "number": 508, "title": "limit test concurrency", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-01-17T19:42:07Z", "updated_at": "2022-01-17T21:12:00Z", "closed_at": "2022-01-17T21:11:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/508", "html_url": "https://github.com/DataDog/glommio/pull/508", "diff_url": "https://github.com/DataDog/glommio/pull/508.diff", "patch_url": "https://github.com/DataDog/glommio/pull/508.patch", "merged_at": "2022-01-17T21:11:56Z"}, "body": "We have a fair few tests that rely on timing and are otherwise highly\r\nCPU intensive (`test_spin,` I am looking at you!). They have proven to\r\nbe quite flaky in CI. Ideally, we would have them run serially while\r\nkeeping the other ones running in parallel.\r\nRust lacks this functionality, however, so in the meantime, run\r\neverything with a single thread in CI.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/508/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/507", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/507/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/507/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/507/events", "html_url": "https://github.com/DataDog/glommio/pull/507", "id": 1106160647, "node_id": "PR_kwDOEW1k-s4xKkHG", "number": 507, "title": "fix race in `foreign_wake` unit test", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-17T18:35:49Z", "updated_at": "2022-01-17T18:44:29Z", "closed_at": "2022-01-17T18:44:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/507", "html_url": "https://github.com/DataDog/glommio/pull/507", "diff_url": "https://github.com/DataDog/glommio/pull/507.diff", "patch_url": "https://github.com/DataDog/glommio/pull/507.patch", "merged_at": "2022-01-17T18:44:25Z"}, "body": "There is a race in the unit test between the local executor picking up\r\nthe foreign wake and the remote executor dropping the waker (and\r\ntherefore decrementing the refcount).\r\n\r\nTherefore, remove that last assertion as it requires further\r\nsynchronization to work reliably.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/507/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/506", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/506/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/506/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/506/events", "html_url": "https://github.com/DataDog/glommio/pull/506", "id": 1105102464, "node_id": "PR_kwDOEW1k-s4xHGdo", "number": 506, "title": "Allow to create UnixStream from raw fd", "user": {"login": "fafhrd91", "id": 598990, "node_id": "MDQ6VXNlcjU5ODk5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/598990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fafhrd91", "html_url": "https://github.com/fafhrd91", "followers_url": "https://api.github.com/users/fafhrd91/followers", "following_url": "https://api.github.com/users/fafhrd91/following{/other_user}", "gists_url": "https://api.github.com/users/fafhrd91/gists{/gist_id}", "starred_url": "https://api.github.com/users/fafhrd91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fafhrd91/subscriptions", "organizations_url": "https://api.github.com/users/fafhrd91/orgs", "repos_url": "https://api.github.com/users/fafhrd91/repos", "events_url": "https://api.github.com/users/fafhrd91/events{/privacy}", "received_events_url": "https://api.github.com/users/fafhrd91/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-16T16:48:29Z", "updated_at": "2022-01-16T22:37:48Z", "closed_at": "2022-01-16T22:37:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/506", "html_url": "https://github.com/DataDog/glommio/pull/506", "diff_url": "https://github.com/DataDog/glommio/pull/506.diff", "patch_url": "https://github.com/DataDog/glommio/pull/506.patch", "merged_at": "2022-01-16T22:37:48Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/506/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/505", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/505/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/505/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/505/events", "html_url": "https://github.com/DataDog/glommio/pull/505", "id": 1104292282, "node_id": "PR_kwDOEW1k-s4xEbEX", "number": 505, "title": "don't panic when trying to yield outside a Glommio context", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-15T02:28:39Z", "updated_at": "2022-01-15T03:23:53Z", "closed_at": "2022-01-15T03:23:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/505", "html_url": "https://github.com/DataDog/glommio/pull/505", "diff_url": "https://github.com/DataDog/glommio/pull/505.diff", "patch_url": "https://github.com/DataDog/glommio/pull/505.patch", "merged_at": "2022-01-15T03:23:35Z"}, "body": "Calls to `glommio::yield_if_needed` and friends are everywhere in\r\nGlommio apps and calling this function panics outside a Glommio\r\ncontext. Sometimes, it is helpful to move some Glommio code to a Tokio\r\ncontext (in unit tests, for instance). This commit makes the panic go\r\naway.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/505/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/504", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/504/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/504/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/504/events", "html_url": "https://github.com/DataDog/glommio/pull/504", "id": 1103926446, "node_id": "PR_kwDOEW1k-s4xDOmH", "number": 504, "title": "update dependencies", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-14T17:14:29Z", "updated_at": "2022-01-14T17:23:12Z", "closed_at": "2022-01-14T17:23:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/504", "html_url": "https://github.com/DataDog/glommio/pull/504", "diff_url": "https://github.com/DataDog/glommio/pull/504.diff", "patch_url": "https://github.com/DataDog/glommio/pull/504.patch", "merged_at": "2022-01-14T17:23:10Z"}, "body": "Pin our dependencies to the latest non-api-breaking version. ", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/504/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/504/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/503", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/503/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/503/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/503/events", "html_url": "https://github.com/DataDog/glommio/pull/503", "id": 1103668786, "node_id": "PR_kwDOEW1k-s4xCWTD", "number": 503, "title": "Issue #481 has been fixed. Method DmaFile#allocate_dma_buffer is duplicated as glommio::allocate_dma_buffer", "user": {"login": "andrii0lomakin", "id": 105066, "node_id": "MDQ6VXNlcjEwNTA2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrii0lomakin", "html_url": "https://github.com/andrii0lomakin", "followers_url": "https://api.github.com/users/andrii0lomakin/followers", "following_url": "https://api.github.com/users/andrii0lomakin/following{/other_user}", "gists_url": "https://api.github.com/users/andrii0lomakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrii0lomakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrii0lomakin/subscriptions", "organizations_url": "https://api.github.com/users/andrii0lomakin/orgs", "repos_url": "https://api.github.com/users/andrii0lomakin/repos", "events_url": "https://api.github.com/users/andrii0lomakin/events{/privacy}", "received_events_url": "https://api.github.com/users/andrii0lomakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-14T13:52:22Z", "updated_at": "2022-01-14T15:09:33Z", "closed_at": "2022-01-14T15:09:33Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/503", "html_url": "https://github.com/DataDog/glommio/pull/503", "diff_url": "https://github.com/DataDog/glommio/pull/503.diff", "patch_url": "https://github.com/DataDog/glommio/pull/503.patch", "merged_at": "2022-01-14T15:09:33Z"}, "body": "### What does this PR do?\r\n\r\nDuplicates implementation of `DmaFile#allocate_dma_buffer` so it will  not be needed to load file if you want to \r\nallocate DMA buffer.\r\n\r\n### Motivation\r\n\r\nSimplification of usage of glommio API\r\n\r\n### Related issues\r\n\r\nThe method is added not in Task scope but in package scope because of recent changes in glommio API. \r\n\r\n### Additional Notes\r\n\r\nThere is also `allocate_dma_buffer_global` method which is used in case buffer is needed to be kept for a long time.\r\n\r\n### Checklist\r\n\r\n[x] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[x] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/503/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/502", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/502/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/502/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/502/events", "html_url": "https://github.com/DataDog/glommio/pull/502", "id": 1102885247, "node_id": "PR_kwDOEW1k-s4w_msE", "number": 502, "title": "various reactor improvements and bug fixes", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-14T03:45:22Z", "updated_at": "2022-01-17T21:02:29Z", "closed_at": "2022-01-17T21:02:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/502", "html_url": "https://github.com/DataDog/glommio/pull/502", "diff_url": "https://github.com/DataDog/glommio/pull/502.diff", "patch_url": "https://github.com/DataDog/glommio/pull/502.patch", "merged_at": "2022-01-17T21:02:26Z"}, "body": "This PR contains various bug fixes to the reactor, mostly around whether\r\nto enter the rings and whether it is okay to sleep.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/502/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/501", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/501/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/501/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/501/events", "html_url": "https://github.com/DataDog/glommio/pull/501", "id": 1102773001, "node_id": "PR_kwDOEW1k-s4w_NHY", "number": 501, "title": "add `spawn_blocking` and use a blocking thread pool", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-14T02:08:35Z", "updated_at": "2022-01-17T20:47:45Z", "closed_at": "2022-01-17T20:47:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/501", "html_url": "https://github.com/DataDog/glommio/pull/501", "diff_url": "https://github.com/DataDog/glommio/pull/501.diff", "patch_url": "https://github.com/DataDog/glommio/pull/501.patch", "merged_at": "2022-01-17T20:47:42Z"}, "body": "Sometimes there is no way around doing a long, unyielding job. That's\r\nthe world we live in. These fall into two categories:\r\n* Busy blocking jobs: usually, these are calls to external libraries\r\n  that aren't cooperative and can't be easily broken into bite-size\r\n  pieces. Your usual suspects are compression/decompression and\r\n  marshaling/unmarshalling.\r\n* Non-busy blocking jobs: stuff that acquires locks or syscalls waiting\r\n  for events.\r\n\r\n`spawn_blocking` works for both cases but is best suited for the latter\r\nbecause they don't steal CPU cycles from the executor.\r\n\r\nSo far, we have had a single thread per executor used for blocking\r\noperations. This has been fine to issue the odd syscall that couldn't go\r\ninto the ring, but now that we have `spawn_blocking,` we've opened\r\npandora's box. Users will submit all sorts of things in there, including\r\nlong-running jobs that could stall the entire system.\r\n\r\nThis commit introduces a static thread pool per executor instead. The\r\npool is static for now, meaning the threads are created once and live\r\nfor as long as the host executor does. Later on, we may want to be\r\nsmarter and automatically up/downscale the pool depending on usage.\r\n\r\nThis work is based #500.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/501/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/501/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/500", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/500/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/500/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/500/events", "html_url": "https://github.com/DataDog/glommio/pull/500", "id": 1102768975, "node_id": "PR_kwDOEW1k-s4w_MNJ", "number": 500, "title": "do not panic when failing to create a `LocalExecutor`", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-14T02:05:11Z", "updated_at": "2022-01-17T19:41:30Z", "closed_at": "2022-01-17T19:41:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/500", "html_url": "https://github.com/DataDog/glommio/pull/500", "diff_url": "https://github.com/DataDog/glommio/pull/500.diff", "patch_url": "https://github.com/DataDog/glommio/pull/500.patch", "merged_at": "2022-01-17T19:41:28Z"}, "body": "Errors should propagate to the end users instead. Additionally,\r\nallow returning a struct from the boot future. It is possible to do so\r\nwhen using the pool builder but not when using the simple one, so this\r\nbrings them to parity.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/500/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/500/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/499", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/499/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/499/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/499/events", "html_url": "https://github.com/DataDog/glommio/pull/499", "id": 1102544783, "node_id": "PR_kwDOEW1k-s4w-Y5l", "number": 499, "title": "add a stall detector that logs stacktraces of unyielding tasks, redux", "user": {"login": "davidblewett", "id": 141716, "node_id": "MDQ6VXNlcjE0MTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/141716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidblewett", "html_url": "https://github.com/davidblewett", "followers_url": "https://api.github.com/users/davidblewett/followers", "following_url": "https://api.github.com/users/davidblewett/following{/other_user}", "gists_url": "https://api.github.com/users/davidblewett/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidblewett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidblewett/subscriptions", "organizations_url": "https://api.github.com/users/davidblewett/orgs", "repos_url": "https://api.github.com/users/davidblewett/repos", "events_url": "https://api.github.com/users/davidblewett/events{/privacy}", "received_events_url": "https://api.github.com/users/davidblewett/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-01-13T23:08:13Z", "updated_at": "2022-01-26T21:21:33Z", "closed_at": "2022-01-26T21:21:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/499", "html_url": "https://github.com/DataDog/glommio/pull/499", "diff_url": "https://github.com/DataDog/glommio/pull/499.diff", "patch_url": "https://github.com/DataDog/glommio/pull/499.patch", "merged_at": "2022-01-26T21:21:32Z"}, "body": "### What does this PR do?\r\n\r\nThis PR supercedes https://github.com/DataDog/glommio/pull/417 . I believe all the concerns raised there are addressed in this implementation.\r\n\r\nThis PR adds a rudimentary stall detection mechanism to Glommio.\r\n\r\nIt measures the runtime of task queues and logs if they don't yield when\r\nthey are due.\r\n\r\nKnowing if a queue is stalling the reactor is nice, but finding the\r\nexact code location where the stall occurs remains very hard. Especially\r\nif a task queue hosts many concurrent fibers.\r\n\r\nTo help with that, this PR introduces a stall detection mechanism that\r\nrecords stack traces of stalling tasks. It works as follows:\r\n\r\n- When a task queue is scheduled for execution, we set up a timer that\r\ntriggers some time after the queue is expected to yield (we add a 10%\r\nerror margin to avoid false positives). A background thread collocated\r\nwith the local executor waits on the timer at all times.\r\n- When the timer fires, the thread sends a signal (SIGUSR1) to the\r\nlocal executor thread. Upon receiving the signal, the local executor\r\nrecords a complete trace of the local stack. Here we take advantage of\r\nthe fact that by default, the kernel invokes signal handlers on top of\r\nthe existing stack. i.e. the frames we record are those of the\r\nproblematic user code that was meant to yield. The recorded frames are\r\npushed on a non-blocking communication channel that links the signal\r\nhandler and the local executor.\r\n- When a task queue yields, the local executor disarm the timer and\r\nchecks the communication channel for potential recorded frames, if there\r\nare any then we can conclude that the queue stalled, so we log them.\r\n\r\nThis code works in practice but has two major drawbacks:\r\n\r\n- The timer dance is expensive; expect a high number of syscalls.\r\nBecause of this runtime overhead, the stall detector is disabled by\r\ndefault. To opt-in, you  must pass in something that implements\r\n`StallDetectionHandler` when constructing the `LocalExecutor`. There\r\nis a concrete `DefaultStallDetectionHandler` that uses `SIGUSR1` and \r\nlogs a warning log message.\r\n- We log stalls only after the queue yield. Therefore, if there is a bug\r\nin your code and your queue never yields, the stall detector will never\r\nlog the code location that's at fault (even though we probably have\r\nrecorded the trace by then). The reason for this is that logging from a\r\nsignal handler is illegal.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/499/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/499/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/498", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/498/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/498/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/498/events", "html_url": "https://github.com/DataDog/glommio/pull/498", "id": 1098428024, "node_id": "PR_kwDOEW1k-s4wwtid", "number": 498, "title": "fix racy unit test", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-10T21:56:55Z", "updated_at": "2022-01-11T16:13:42Z", "closed_at": "2022-01-11T16:13:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/498", "html_url": "https://github.com/DataDog/glommio/pull/498", "diff_url": "https://github.com/DataDog/glommio/pull/498.diff", "patch_url": "https://github.com/DataDog/glommio/pull/498.patch", "merged_at": "2022-01-11T16:13:37Z"}, "body": "This test keeps borrows across await points, which makes it flaky.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/498/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/497", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/497/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/497/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/497/events", "html_url": "https://github.com/DataDog/glommio/pull/497", "id": 1096809701, "node_id": "PR_kwDOEW1k-s4wrwvF", "number": 497, "title": "better `read_many` interface and defaults ", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-08T02:20:55Z", "updated_at": "2022-01-14T17:43:47Z", "closed_at": "2022-01-14T17:43:44Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/497", "html_url": "https://github.com/DataDog/glommio/pull/497", "diff_url": "https://github.com/DataDog/glommio/pull/497.diff", "patch_url": "https://github.com/DataDog/glommio/pull/497.patch", "merged_at": "2022-01-14T17:43:44Z"}, "body": "* Provide a better, less confusing interface using named enums. This\r\n  makes the code a lot more readable;\r\n* Read sysfs to give good device-specific options for request merging \r\n  (if we merge too much, we may end up with a request so large the kernel has \r\n  to split it underneath our feet, which defeats the purpose).", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/497/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/496", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/496/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/496/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/496/events", "html_url": "https://github.com/DataDog/glommio/pull/496", "id": 1096700166, "node_id": "PR_kwDOEW1k-s4wrbJj", "number": 496, "title": "measure the pre-reactor IO latency", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-07T22:00:06Z", "updated_at": "2022-01-11T00:42:28Z", "closed_at": "2022-01-11T00:42:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/496", "html_url": "https://github.com/DataDog/glommio/pull/496", "diff_url": "https://github.com/DataDog/glommio/pull/496.diff", "patch_url": "https://github.com/DataDog/glommio/pull/496.patch", "merged_at": "2022-01-11T00:42:25Z"}, "body": "We now record three kinds of source latencies:\r\n* pre-reactor: the time the source spent queued (this commit);\r\n* io: the time the source spent in the kernel;\r\n* post-reactor: the time the scheduler took to get back at the consuming\r\n  task.\r\n\r\nPreviously, the time the source was queued counted towards IO\r\nlatency (second item in the list).", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/496/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/495", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/495/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/495/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/495/events", "html_url": "https://github.com/DataDog/glommio/pull/495", "id": 1095292027, "node_id": "PR_kwDOEW1k-s4wm4cl", "number": 495, "title": "Revert \"allow polling single-device md devices (#488)\"", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-06T12:51:37Z", "updated_at": "2022-01-06T13:11:04Z", "closed_at": "2022-01-06T13:11:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/495", "html_url": "https://github.com/DataDog/glommio/pull/495", "diff_url": "https://github.com/DataDog/glommio/pull/495.diff", "patch_url": "https://github.com/DataDog/glommio/pull/495.patch", "merged_at": "2022-01-06T13:11:01Z"}, "body": "This reverts commit 16d9166c4753e93ecd886237d6dbd48eb8ab3e5c.\r\n\r\nSee #488", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/495/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/493", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/493/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/493/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/493/events", "html_url": "https://github.com/DataDog/glommio/pull/493", "id": 1094895045, "node_id": "PR_kwDOEW1k-s4wlnxM", "number": 493, "title": "fast IO cancellation", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-06T02:01:42Z", "updated_at": "2022-01-06T03:14:53Z", "closed_at": "2022-01-06T03:14:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/493", "html_url": "https://github.com/DataDog/glommio/pull/493", "diff_url": "https://github.com/DataDog/glommio/pull/493.diff", "patch_url": "https://github.com/DataDog/glommio/pull/493.patch", "merged_at": "2022-01-06T03:14:45Z"}, "body": "So far, to cancel a source in glommio, the code would:\r\n* Probe the submitting queue of the associated ring to find its\r\n  corresponding `UringOpDescriptor`;\r\n* If one is found, it is removed;\r\n* Otherwise, a cancellation request is sent on the ring.\r\n\r\nThe issue with this way of handling cancellation is that the first step\r\nis a linear probing over a potentially large number of descriptors.\r\nSpecifically, it means that canceling a source is _O(n)_ where _n_ is\r\nthe total number of queued sources in the ring.\r\n\r\nTherefore, a realistic application canceling a query (that issues\r\nmany IOs) is an _O(kn)_ operation where _k_ is the number of sources\r\ncreated by the request. Uh oh. That's a lot of work done in a destructor\r\nwhere we can't cooperate and yield.\r\n\r\nInstead, this commit changes the behavior of source cancellation to be\r\nlazy. When dropped, a source marks itself as \"canceled\" if it wasn't\r\nsubmitted yet. Meanwhile, the reactor now filters out canceled sources.\r\nIf the source was dispatched, we submit a cancel request like before.\r\n\r\nCo-authored with @glommer ", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/493/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/491", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/491/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/491/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/491/events", "html_url": "https://github.com/DataDog/glommio/pull/491", "id": 1092896908, "node_id": "PR_kwDOEW1k-s4wfKVG", "number": 491, "title": "limit `read_many` concurrency based on in-flight IO memory", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-01-03T23:37:36Z", "updated_at": "2022-01-04T03:28:31Z", "closed_at": "2022-01-04T03:28:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/491", "html_url": "https://github.com/DataDog/glommio/pull/491", "diff_url": "https://github.com/DataDog/glommio/pull/491.diff", "patch_url": "https://github.com/DataDog/glommio/pull/491.patch", "merged_at": "2022-01-04T03:28:28Z"}, "body": "Add the option to limit the amount of concurrent IO requests based on\r\nmemory usage. This is a useful knob in conjunction with IO requests\r\ncoalescing because it makes sense to keep a high number of concurrent\r\nsmall IO requests but less so if they are extremely large. i.e., if all\r\nthe IO requests are 4MiB large, it doesn't make much sense to schedule\r\nmore than a few at a time. Scheduling too many at once could starve\r\nother concurrent IO tasks for no throughput benefit. Conversely, It\r\nmakes sense to schedule 4KiB requests with a higher concurrency level.\r\n\r\nThis new memory limit is added alongside the existing concurrent limit.\r\nThe final number of concurrent IO requests dispatched by a `read_many`\r\nstream will be determined by whichever limit is reached first.\r\n\r\nFor instance, given the following pseudocode:\r\n\r\n```rust\r\nfile.read_many(iovecs, 0, Some(0))\r\n  .with_concurrency(128)\r\n  .with_memory_limit(1 << 20)\r\n```\r\n\r\nIf `iovecs` contains 4KiB requests, the stream will schedule 128 IO\r\nrequests concurrently because 128 * 4KiB <= 1MiB. Conversely, if\r\n`iovecs` contains 256KiB requests, then the stream will schedule 4 IO\r\nrequests concurrently, because 4 * 256KiB <= 1MiB.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/491/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/489", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/489/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/489/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/489/events", "html_url": "https://github.com/DataDog/glommio/pull/489", "id": 1088914439, "node_id": "PR_kwDOEW1k-s4wSZPU", "number": 489, "title": "probe `sysfs` to detect the minimum alignment io size", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-12-27T02:28:41Z", "updated_at": "2022-02-09T22:25:24Z", "closed_at": "2022-02-09T22:25:21Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/489", "html_url": "https://github.com/DataDog/glommio/pull/489", "diff_url": "https://github.com/DataDog/glommio/pull/489.diff", "patch_url": "https://github.com/DataDog/glommio/pull/489.patch", "merged_at": "2022-02-09T22:25:21Z"}, "body": "From https://people.redhat.com/msnitzer/docs/io-limits.txt:\r\n> Storage vendors can also supply \"I/O hints\" about a device's preferred\r\nminimum unit for random I/O ('minimum_io_size') and streaming I/O\r\n('optimal_io_size'). For example, these hints may correspond to a RAID\r\ndevice's chunk size and stripe size respectively.\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/489/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/489/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/488", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/488/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/488/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/488/events", "html_url": "https://github.com/DataDog/glommio/pull/488", "id": 1088901578, "node_id": "PR_kwDOEW1k-s4wSWjp", "number": 488, "title": "allow polling single-device md devices", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-12-27T01:51:56Z", "updated_at": "2022-01-06T03:13:28Z", "closed_at": "2021-12-28T15:04:00Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/488", "html_url": "https://github.com/DataDog/glommio/pull/488", "diff_url": "https://github.com/DataDog/glommio/pull/488.diff", "patch_url": "https://github.com/DataDog/glommio/pull/488.patch", "merged_at": "2021-12-28T15:04:00Z"}, "body": "Linux is weird. LVM devices can present themselves as md devices with a\r\nsingle underlying device. That device may be polled (but ones with\r\nmore than a single underlying device can't). Right now, if a\r\ndevice is md, we opt out of polling entirely, even though polling is\r\nallowed under that edge-case.\r\n\r\nThis commit changes the logic to disable polling only if an md device\r\nhas more than a single device underneath it.\r\n\r\n> Note: I have not tested this under a RAID configuration with a single\r\ndisk. Logic would have that it would work too, but as we established,\r\nLinux is weird.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/488/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/487", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/487/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/487/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/487/events", "html_url": "https://github.com/DataDog/glommio/pull/487", "id": 1088874398, "node_id": "PR_kwDOEW1k-s4wSQyd", "number": 487, "title": "add a benchmark that measures how IO performs when competing with CPU", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-27T00:29:24Z", "updated_at": "2021-12-27T01:34:58Z", "closed_at": "2021-12-27T01:34:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/487", "html_url": "https://github.com/DataDog/glommio/pull/487", "diff_url": "https://github.com/DataDog/glommio/pull/487.diff", "patch_url": "https://github.com/DataDog/glommio/pull/487.patch", "merged_at": "2021-12-27T01:34:54Z"}, "body": "This adds a new benchmark that creates a CPU intensive, throughput\r\noriented task queue alongside a latency-sensitive IO queue.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/487/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/485", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/485/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/485/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/485/events", "html_url": "https://github.com/DataDog/glommio/pull/485", "id": 1088001071, "node_id": "PR_kwDOEW1k-s4wPqB3", "number": 485, "title": "update doc for previously blocking synchronous operations", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-12-23T21:29:48Z", "updated_at": "2021-12-26T19:41:43Z", "closed_at": "2021-12-26T19:41:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/485", "html_url": "https://github.com/DataDog/glommio/pull/485", "diff_url": "https://github.com/DataDog/glommio/pull/485.diff", "patch_url": "https://github.com/DataDog/glommio/pull/485.patch", "merged_at": "2021-12-26T19:41:39Z"}, "body": "`io_uring` doesn't support all the regular file operations yet. In the\r\npast, we were filling the gaps by issuing blocking syscalls directly,\r\nblocking the reactor thread. Because this kind of sucks, we added a\r\nwarning in the docs to warn application writers.\r\n\r\nNowadays, we perform these blocking operations in a background thread.\r\nTherefore, we no longer block the reactor thread, and the warning is no\r\nlonger relevant.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/485/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/485/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/484", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/484/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/484/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/484/events", "html_url": "https://github.com/DataDog/glommio/pull/484", "id": 1087990991, "node_id": "PR_kwDOEW1k-s4wPn3u", "number": 484, "title": "improve latency of latency-sensitive task queues performing IO", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-12-23T21:04:33Z", "updated_at": "2021-12-27T01:52:37Z", "closed_at": "2021-12-27T01:52:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/484", "html_url": "https://github.com/DataDog/glommio/pull/484", "diff_url": "https://github.com/DataDog/glommio/pull/484.diff", "patch_url": "https://github.com/DataDog/glommio/pull/484.patch", "merged_at": "2021-12-27T01:52:34Z"}, "body": "This fixes an issue whereby a task queue waiting for external events\r\n(those coming from the reactor, like IO or timers) would not be woken up\r\n according to its latency requirement.\r\n\r\nConsider the following setup: we have two task queues, `(A)` and `(B)`.\r\n`(A)` is latency-sensitive with a preemption timer of 1ms and performs\r\nIO. `(B)` doesn't have a latency requirement and therefore defaults to\r\nthe executor's timer: 100ms. `(B)` is CPU intensive but highly\r\ncooperative.\r\n\r\nAnd now the following sequence of events:\r\n* `(A)` and `(B)` are both `READY`; therefore, the preemption timer is\r\n  set to the minimum of the two, 1ms;\r\n* `(A)` runs and schedules all the IO it can. The task returns\r\n  `Poll::Pending`;\r\n* `(B)` runs and eventually gets preempted after ~1ms;\r\n* The reactor enters the rings and posts the IO from `(A)`;\r\n* `(A)` is `PENDING` and `(B)` is `READY,` so the preemption timer is\r\n  set to `(B)`: 100ms;\r\n* `(B)` runs for 100ms, until it is preempted;\r\n* The reactor enters the rings and collects the IO results, waking up\r\n  `(A)` in the process;\r\n* `(A)` and `(B)` are both `READY`; therefore, the preemption timer is\r\n  set to the minimum of the two, 1ms;\r\n* `(A)` collects the result of the IOs\r\n* ...\r\n\r\nThis isn't right: `(A)` wants to be woken up within 1ms of being marked\r\n`READY`! To fix this issue durably, all IO from latency-sensitive queues\r\nare now posted on the latency ring. This means that as soon as the\r\nkernel creates a CQE on the latency ring, tasks get preempted by the\r\nnext call to `yield_if_needed.`\r\n\r\nThis improves the latency of these IO operations significantly. Right\r\nnow, this means the poll ring is only used when IO is submitted from\r\na throughput task queue. We may try to improve upon this later on.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/484/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/484/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/483", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/483/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/483/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/483/events", "html_url": "https://github.com/DataDog/glommio/pull/483", "id": 1087934771, "node_id": "PR_kwDOEW1k-s4wPcE8", "number": 483, "title": "update to rust-1.57 ", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-23T19:00:48Z", "updated_at": "2021-12-23T19:15:43Z", "closed_at": "2021-12-23T19:13:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/483", "html_url": "https://github.com/DataDog/glommio/pull/483", "diff_url": "https://github.com/DataDog/glommio/pull/483.diff", "patch_url": "https://github.com/DataDog/glommio/pull/483.patch", "merged_at": "2021-12-23T19:13:04Z"}, "body": "Rust 1.57 adds new linter checks in Clippy, namely a better dead code\r\ndetector. It turns out we have quite a few dead variables around. I am\r\nnot sure if they are helpful or if we should remove them instead. I\r\nprepended them with an underscore for now.\r\n\r\nThis PR also applies the linter suggestions from 1.59-nightly. ", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/483/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/480", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/480/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/480/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/480/events", "html_url": "https://github.com/DataDog/glommio/pull/480", "id": 1077825513, "node_id": "PR_kwDOEW1k-s4vuUEE", "number": 480, "title": "Support CPU topology with non-unique core ids", "user": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-12-12T14:50:45Z", "updated_at": "2021-12-23T19:23:40Z", "closed_at": "2021-12-23T19:23:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/480", "html_url": "https://github.com/DataDog/glommio/pull/480", "diff_url": "https://github.com/DataDog/glommio/pull/480.diff", "patch_url": "https://github.com/DataDog/glommio/pull/480.patch", "merged_at": "2021-12-23T19:23:40Z"}, "body": "### What does this PR do?\r\n\r\nSupport CPU topology with non-unique core ids.\r\n\r\nThe basic strategy is to sort CPUs by their (NUMA node id, core id) and assign virtual core id in this order. Note we need to ensure that the CPUs on the same core will have the same core id.\r\n\r\n### Motivation\r\n\r\nTo make `cargo test` pass in my environment.\r\n\r\n### Related issues\r\n\r\n- #477\r\n\r\n### Additional Notes\r\n\r\nI first tried to fix the issue by calculating the virtual core id from the equation `core id + a number of cores in a NUMA node * NUMA node id`; this did not work for the following reasons:\r\n\r\n- Core id is not consecutive within a single NUMA node (e.g., `0, 1, 2, 4, 5, 6` instead of `0, 1, 2, 3, 4, 5`)\r\n- Each node may have different number of core\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/480/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/480/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/479", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/479/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/479/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/479/events", "html_url": "https://github.com/DataDog/glommio/pull/479", "id": 1077565591, "node_id": "PR_kwDOEW1k-s4vtmxG", "number": 479, "title": "Allow test to succeed if the shares reaches max", "user": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-11T15:22:41Z", "updated_at": "2021-12-13T15:23:53Z", "closed_at": "2021-12-13T15:23:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/479", "html_url": "https://github.com/DataDog/glommio/pull/479", "diff_url": "https://github.com/DataDog/glommio/pull/479.diff", "patch_url": "https://github.com/DataDog/glommio/pull/479.patch", "merged_at": "2021-12-13T15:23:35Z"}, "body": "### What does this PR do?\r\n\r\nFix a consistent failure of `deadline_queue_second_queued_item_increases_slope`.\r\n\r\nA quick print debugging revealed that the value of `shares_first` is near 1000 (992 almost every time). Since the max value of shares is 1000, the assertion always fails.\r\n\r\nThis PR allows the test to succeed if the shares have reached to its maximum.\r\n \r\n### Related issues\r\n\r\n#477\r\n\r\n### Additional Notes\r\n\r\nI tried to minimize the value of `shares_first` by tweaking some parameters, but this attempt failed.\r\n\r\n### Checklist\r\n\r\n[x] I have added unit tests to the code I am submitting\r\n[x] My unit tests cover both failure and success scenarios\r\n[x] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/479/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/478", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/478/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/478/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/478/events", "html_url": "https://github.com/DataDog/glommio/pull/478", "id": 1077466925, "node_id": "PR_kwDOEW1k-s4vtYtk", "number": 478, "title": "Fix tests", "user": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-11T08:25:31Z", "updated_at": "2021-12-11T13:21:55Z", "closed_at": "2021-12-11T11:19:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/478", "html_url": "https://github.com/DataDog/glommio/pull/478", "diff_url": "https://github.com/DataDog/glommio/pull/478.diff", "patch_url": "https://github.com/DataDog/glommio/pull/478.patch", "merged_at": "2021-12-11T11:19:46Z"}, "body": "### What does this PR do?\r\n\r\nFix tests that failed from time to time in my environment (see #477).\r\n\r\n### Related issues\r\n\r\n#477\r\n\r\n### Additional Notes\r\n\r\nEach commit message contains the brief desciption of the fix.\r\n\r\n### Checklist\r\n\r\n[x] I have added unit tests to the code I am submitting\r\n[x] My unit tests cover both failure and success scenarios\r\n[x] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/478/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/476", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/476/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/476/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/476/events", "html_url": "https://github.com/DataDog/glommio/pull/476", "id": 1067782121, "node_id": "PR_kwDOEW1k-s4vN2uY", "number": 476, "title": "add a way to measure and report IO latency", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-30T23:45:10Z", "updated_at": "2021-12-27T09:08:21Z", "closed_at": "2021-12-27T03:22:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/476", "html_url": "https://github.com/DataDog/glommio/pull/476", "diff_url": "https://github.com/DataDog/glommio/pull/476.diff", "patch_url": "https://github.com/DataDog/glommio/pull/476.patch", "merged_at": "2021-12-27T03:22:43Z"}, "body": "Add the plumbings necessary to measure various kinds of IO latency,\r\n\r\nWe now keep track of two kinds of IO latency: \r\n* The time sources spend in the ring, including the submission queue;\r\n* The post-reactor scheduler latency, or the time the scheduler takes to\r\ncome back at the tasks that consume the IO;\r\n\r\nWe now export them as distribution in the `IoStats` struct. And this PR\r\nadds distribution support to Glommio. We use \"sketches\" that give a \r\nstatistical approximation of quantiles because we want the overhead \r\n(space and time) to be low when recording latencies.\r\n\r\nA side effect of this is that pulling the stats from the reactor now\r\nclears them (because a distribution needs to be cleared regularly to be\r\nhelpful). I don't expect this to be problematic because, in practice,\r\nusers want rates from the stats and keep the previous values in memory\r\nto compute deltas. This should, therefore, greatly simplify this logic.\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/476/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/474", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/474/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/474/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/474/events", "html_url": "https://github.com/DataDog/glommio/pull/474", "id": 1065474810, "node_id": "PR_kwDOEW1k-s4vGYTE", "number": 474, "title": "make it easy to consume a `DmaStreamReader` without copying", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-11-29T00:03:03Z", "updated_at": "2021-11-30T01:18:49Z", "closed_at": "2021-11-30T01:17:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/474", "html_url": "https://github.com/DataDog/glommio/pull/474", "diff_url": "https://github.com/DataDog/glommio/pull/474.diff", "patch_url": "https://github.com/DataDog/glommio/pull/474.patch", "merged_at": "2021-11-30T01:17:35Z"}, "body": "The `get_buffer_aligned` API could be better. It relies on user code to be\r\naware of buffer boundaries locations. This makes user code more\r\ncomplicated and brittle because the buffer size will generally be a\r\nconfigurable knob, subject to change.\r\n\r\nFear not, however, for there is a better way!\r\n\r\nInstead of failing when reading too much in `get_buffer_aligned,` read\r\nwhatever we can from the current buffer and return the number of\r\nremaining bytes. This allows the following:\r\n* If the read fits inside a buffer, the user can consume the result\r\ndirectly without any copy;\r\n* If the read crosses buffer boundaries and the user can consume partial\r\nresults, it can do so in a loop without any copies;\r\n* If the read crosses buffer boundaries and the user needs a complete\r\nresult, `get_buffer_aligned` may be used trivially in a loop that\r\nconcatenates the results in a reusable user-allocated buffer.\r\n\r\nThis PR also replaces the ad-hoc `poll_read` implementation for a proxy\r\ncall to `get_buffer_aligned`, resulting in a very nice reduction in complexity.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/474/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/473", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/473/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/473/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/473/events", "html_url": "https://github.com/DataDog/glommio/pull/473", "id": 1064841941, "node_id": "PR_kwDOEW1k-s4vE9Du", "number": 473, "title": "fix the README.md crates.io badge link", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-26T22:39:44Z", "updated_at": "2021-11-26T22:39:52Z", "closed_at": "2021-11-26T22:39:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/473", "html_url": "https://github.com/DataDog/glommio/pull/473", "diff_url": "https://github.com/DataDog/glommio/pull/473.diff", "patch_url": "https://github.com/DataDog/glommio/pull/473.patch", "merged_at": "2021-11-26T22:39:50Z"}, "body": "### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/473/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/472", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/472/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/472/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/472/events", "html_url": "https://github.com/DataDog/glommio/pull/472", "id": 1064805626, "node_id": "PR_kwDOEW1k-s4vE1w5", "number": 472, "title": "update dependencies to avoid depending on the `chrono` crate", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-26T21:12:08Z", "updated_at": "2021-11-26T22:31:49Z", "closed_at": "2021-11-26T22:31:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/472", "html_url": "https://github.com/DataDog/glommio/pull/472", "diff_url": "https://github.com/DataDog/glommio/pull/472.diff", "patch_url": "https://github.com/DataDog/glommio/pull/472.patch", "merged_at": "2021-11-26T22:31:45Z"}, "body": "The `chrono` crate has a security vulnerability, and the ecosystem is\r\nmoving away from it, so should we (also it annoys me that `cargo-check`\r\ndoesn't pass anymore because of this).\r\n\r\nSee https://rustsec.org/advisories/RUSTSEC-2020-0159 for details.\r\n\r\nCargo-check can't be configured to tolerate vulnerabilities in dev\r\ndependencies right now. It's a feature request, so maybe it'll come one\r\nday:\r\nhttps://github.com/EmbarkStudios/cargo-deny/issues/322", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/472/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/471", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/471/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/471/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/471/events", "html_url": "https://github.com/DataDog/glommio/pull/471", "id": 1064773936, "node_id": "PR_kwDOEW1k-s4vEvuc", "number": 471, "title": "sort the caro dependencies, because why not", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-26T19:51:30Z", "updated_at": "2021-11-26T20:04:06Z", "closed_at": "2021-11-26T20:03:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/471", "html_url": "https://github.com/DataDog/glommio/pull/471", "diff_url": "https://github.com/DataDog/glommio/pull/471.diff", "patch_url": "https://github.com/DataDog/glommio/pull/471.patch", "merged_at": "2021-11-26T20:03:57Z"}, "body": "There really IS a cargo tool for everything", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/471/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/470", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/470/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/470/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/470/events", "html_url": "https://github.com/DataDog/glommio/pull/470", "id": 1064766695, "node_id": "PR_kwDOEW1k-s4vEuVs", "number": 470, "title": "remove `LICENCE-3rdparty.csv` in favor of an on-demand script", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-26T19:31:59Z", "updated_at": "2021-11-26T19:41:50Z", "closed_at": "2021-11-26T19:41:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/470", "html_url": "https://github.com/DataDog/glommio/pull/470", "diff_url": "https://github.com/DataDog/glommio/pull/470.diff", "patch_url": "https://github.com/DataDog/glommio/pull/470.patch", "merged_at": "2021-11-26T19:41:49Z"}, "body": "Keeping this file in sync is a significant burden on contributors, and\r\nwe don't want to have CI update it either because that would imply a lot\r\nof additional, spurious commits.\r\n\r\nSince this file is easily generated, we will now provide a script that\r\nproduces the correct output on-demand.\r\n\r\nCI will still enforce that all our dependencies are using acceptable\r\nlicenses.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/470/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/470/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/469", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/469/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/469/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/469/events", "html_url": "https://github.com/DataDog/glommio/pull/469", "id": 1064022109, "node_id": "PR_kwDOEW1k-s4vCjnX", "number": 469, "title": "allow liburing to be vendored", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-11-26T01:47:20Z", "updated_at": "2021-11-30T14:58:03Z", "closed_at": "2021-11-30T14:57:57Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/469", "html_url": "https://github.com/DataDog/glommio/pull/469", "diff_url": "https://github.com/DataDog/glommio/pull/469.diff", "patch_url": "https://github.com/DataDog/glommio/pull/469.patch", "merged_at": "2021-11-30T14:57:57Z"}, "body": "A better long term approach is to move to a full rust implementation.\r\nFor now, allow liburing to be vendored by reading an environment\r\nvariable with its location. In the absence of that variable, we'll\r\nstill resort to the standard submodule update.\r\n\r\nFixes #466 (for now)\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/469/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/468", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/468/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/468/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/468/events", "html_url": "https://github.com/DataDog/glommio/pull/468", "id": 1064018644, "node_id": "PR_kwDOEW1k-s4vCi7J", "number": 468, "title": "add fmt and clippy tests as part of the test process", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-11-26T01:35:26Z", "updated_at": "2021-11-28T04:26:44Z", "closed_at": "2021-11-28T04:26:44Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/468", "html_url": "https://github.com/DataDog/glommio/pull/468", "diff_url": "https://github.com/DataDog/glommio/pull/468.diff", "patch_url": "https://github.com/DataDog/glommio/pull/468.patch", "merged_at": "2021-11-28T04:26:43Z"}, "body": "So we don't have to have a separate CI target.\r\nThis is easier to reason, and it's a single test\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/468/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/467", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/467/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/467/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/467/events", "html_url": "https://github.com/DataDog/glommio/pull/467", "id": 1063978962, "node_id": "PR_kwDOEW1k-s4vCaWZ", "number": 467, "title": "use a drain iterator to empty the `IOVecMerger`s instead of replacing them", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-26T00:13:29Z", "updated_at": "2021-11-26T01:23:58Z", "closed_at": "2021-11-26T01:23:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/467", "html_url": "https://github.com/DataDog/glommio/pull/467", "diff_url": "https://github.com/DataDog/glommio/pull/467.diff", "patch_url": "https://github.com/DataDog/glommio/pull/467.patch", "merged_at": "2021-11-26T01:23:58Z"}, "body": "Using a drain iterator allows us to keep the internal memory around and \r\navoid spurious `realloc`s in the subsequent iterations of the \r\n`read_many` stream.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/467/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/467/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/464", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/464/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/464/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/464/events", "html_url": "https://github.com/DataDog/glommio/pull/464", "id": 1054807582, "node_id": "PR_kwDOEW1k-s4ulpeQ", "number": 464, "title": "Prevent sleeping if the submission queue is not empty", "user": {"login": "thirstycrow", "id": 1327305, "node_id": "MDQ6VXNlcjEzMjczMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thirstycrow", "html_url": "https://github.com/thirstycrow", "followers_url": "https://api.github.com/users/thirstycrow/followers", "following_url": "https://api.github.com/users/thirstycrow/following{/other_user}", "gists_url": "https://api.github.com/users/thirstycrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thirstycrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thirstycrow/subscriptions", "organizations_url": "https://api.github.com/users/thirstycrow/orgs", "repos_url": "https://api.github.com/users/thirstycrow/repos", "events_url": "https://api.github.com/users/thirstycrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thirstycrow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-16T12:13:05Z", "updated_at": "2021-11-16T15:44:46Z", "closed_at": "2021-11-16T15:44:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/464", "html_url": "https://github.com/DataDog/glommio/pull/464", "diff_url": "https://github.com/DataDog/glommio/pull/464.diff", "patch_url": "https://github.com/DataDog/glommio/pull/464.patch", "merged_at": "2021-11-16T15:44:46Z"}, "body": "### What does this PR do?\r\n\r\nFix #458 ", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/464/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/463", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/463/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/463/events", "html_url": "https://github.com/DataDog/glommio/pull/463", "id": 1054318896, "node_id": "PR_kwDOEW1k-s4ukDwp", "number": 463, "title": "make the depth of the io rings a configurable knob", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-16T00:57:54Z", "updated_at": "2021-11-17T15:38:53Z", "closed_at": "2021-11-17T15:38:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/463", "html_url": "https://github.com/DataDog/glommio/pull/463", "diff_url": "https://github.com/DataDog/glommio/pull/463.diff", "patch_url": "https://github.com/DataDog/glommio/pull/463.patch", "merged_at": "2021-11-17T15:38:45Z"}, "body": "Previously our io rings had a depth of 128. A user can now override this\r\nif they feel like it. If they do, the setting will be used as the concurrency\r\nlevel of `reqad_many` as well.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/463/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/462", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/462/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/462/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/462/events", "html_url": "https://github.com/DataDog/glommio/pull/462", "id": 1053179634, "node_id": "PR_kwDOEW1k-s4ughQH", "number": 462, "title": "Re-implement standard traits for socket using poll + recv", "user": {"login": "thirstycrow", "id": 1327305, "node_id": "MDQ6VXNlcjEzMjczMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thirstycrow", "html_url": "https://github.com/thirstycrow", "followers_url": "https://api.github.com/users/thirstycrow/followers", "following_url": "https://api.github.com/users/thirstycrow/following{/other_user}", "gists_url": "https://api.github.com/users/thirstycrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thirstycrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thirstycrow/subscriptions", "organizations_url": "https://api.github.com/users/thirstycrow/orgs", "repos_url": "https://api.github.com/users/thirstycrow/repos", "events_url": "https://api.github.com/users/thirstycrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thirstycrow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-11-15T03:45:28Z", "updated_at": "2021-11-23T19:38:01Z", "closed_at": "2021-11-23T17:15:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/462", "html_url": "https://github.com/DataDog/glommio/pull/462", "diff_url": "https://github.com/DataDog/glommio/pull/462.diff", "patch_url": "https://github.com/DataDog/glommio/pull/462.patch", "merged_at": "2021-11-23T17:15:48Z"}, "body": "This is a continuation of #451. In this PR, the standard traits for `GlommioStream` is re-implemented using poll + recv. Performance of the `echo` and `proxy` benchmarks improved compared to current master branch, but the result could be even better if invocations to `rush_dispatch` could be removed from `poll_recv`. However, to do that, #458 needs to be addressed first, otherwise there is good probability for the proxy benchmark to deadlock in the 1000-client cases.\r\n\r\nI also tested two epoll based implementations, which gives the best performance among all. The efficiency of them comes from edge-triggered epoll: no additional overhead will be introduced after when the socket fd is registered to the epoll. While in the poll + recv implementation, an additional SQE is needed each time we poll the socket fd, because poll on io-uring works in oneshot mode.\r\n\r\nThere may be a chance for an fast-poll based implementation to surpass the epoll ones in some scenarios. But I believe it could only happen after #458 is handled appropriately so we can avoid `rush_dispatch` in socket io.\r\n\r\n![Screenshot from 2021-11-15 11-13-07](https://user-images.githubusercontent.com/1327305/141716579-4b0cd727-c401-4894-92ab-b8641cde6293.png)\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/462/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/462/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/461", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/461/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/461/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/461/events", "html_url": "https://github.com/DataDog/glommio/pull/461", "id": 1053118271, "node_id": "PR_kwDOEW1k-s4ugUvq", "number": 461, "title": "fast `ReadResult` deref", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-15T01:31:52Z", "updated_at": "2021-11-17T18:55:10Z", "closed_at": "2021-11-17T18:55:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/461", "html_url": "https://github.com/DataDog/glommio/pull/461", "diff_url": "https://github.com/DataDog/glommio/pull/461.diff", "patch_url": "https://github.com/DataDog/glommio/pull/461.patch", "merged_at": "2021-11-17T18:55:06Z"}, "body": "The current `Deref` implementation of `ReadResult` is slow as it\r\ntraverses the underlying `ScheduledSource,` `Source,` and performs a\r\nconditional jump depending on the type of buffer (IO buffer, heap, etc.)\r\n\r\nThis is all pretty expensive! Since a `ReadResult` always carries the\r\n`ScheduledSource` with it, we can materialize the pointer to the\r\nunderlying memory and return it directly upon demand.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/461/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/460", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/460/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/460/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/460/events", "html_url": "https://github.com/DataDog/glommio/pull/460", "id": 1053050293, "node_id": "PR_kwDOEW1k-s4ugHCf", "number": 460, "title": "allow users to override the default io concurrency of `read_many`", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-14T21:48:46Z", "updated_at": "2021-11-15T01:34:43Z", "closed_at": "2021-11-15T01:34:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/460", "html_url": "https://github.com/DataDog/glommio/pull/460", "diff_url": "https://github.com/DataDog/glommio/pull/460.diff", "patch_url": "https://github.com/DataDog/glommio/pull/460.patch", "merged_at": "2021-11-15T01:34:39Z"}, "body": "The default of `RING_SUBMISSION_DEPTH` is good, but lowering IO\r\nconcurrency also limits the opportunities to deduplicate in-flight IO\r\nrequests. The appropriate balance between RSS and IO deduplication feels\r\nvery application-specific, so exposing some knob to allow the user to\r\noverride this is probably a good idea.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/460/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/460/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/459", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/459/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/459/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/459/events", "html_url": "https://github.com/DataDog/glommio/pull/459", "id": 1053048122, "node_id": "PR_kwDOEW1k-s4ugGo1", "number": 459, "title": "fix foreign wakes (ditto)", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-11-14T21:38:09Z", "updated_at": "2021-11-17T16:30:18Z", "closed_at": "2021-11-17T16:30:14Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/459", "html_url": "https://github.com/DataDog/glommio/pull/459", "diff_url": "https://github.com/DataDog/glommio/pull/459.diff", "patch_url": "https://github.com/DataDog/glommio/pull/459.patch", "merged_at": "2021-11-17T16:30:14Z"}, "body": "A subtle bug was introduced in a previous bug fix. We did fix the bug\r\nbut at the cost of negating the performance improvements, the work was\r\noriginally pulled for. This commit fixes the fix.\r\n\r\nThe relevant commit was dcc3ca11c2be6e28517a38c3046a17918716b0d5.\r\n\r\n@thirstycrow thanks again for the report; I ran your benchmark with this\r\npatch applied and this is what I get:\r\n\r\n```\r\nLatency requirement: NotImportant\r\nLabel              Min   Mean    P99  P99.9    Max\r\nglommio->tokio:  0.016  0.796  2.427  3.749  3.833\r\ntokio schedule:  0.001  0.165  0.567  1.022  1.105\r\ntokio process :  0.516  1.807  2.857  3.251  3.413\r\ntokio->glommio:  0.010 94.914 97.599 98.111 99.327\r\n\r\nLatency requirement: Matters(100ms)\r\nLabel              Min   Mean    P99  P99.9    Max\r\nglommio->tokio:  0.003  0.257  1.075  1.365  1.544\r\ntokio schedule:  0.000  0.126  0.417  0.648  0.847\r\ntokio process :  0.530  1.646  2.419  2.677  2.965\r\ntokio->glommio:  0.111  1.266  2.039  2.415  2.495\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/459/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/457", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/457/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/457/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/457/events", "html_url": "https://github.com/DataDog/glommio/pull/457", "id": 1052348411, "node_id": "PR_kwDOEW1k-s4ueNxh", "number": 457, "title": "fix foreign wakes", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-11-12T19:28:31Z", "updated_at": "2021-11-15T17:24:12Z", "closed_at": "2021-11-12T19:45:15Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/457", "html_url": "https://github.com/DataDog/glommio/pull/457", "diff_url": "https://github.com/DataDog/glommio/pull/457.diff", "patch_url": "https://github.com/DataDog/glommio/pull/457.patch", "merged_at": "2021-11-12T19:45:15Z"}, "body": "A subtle bug was introduced in a previous refactor. Two boolean values\r\nwere simplified to a single one and a bug sneaked in, marking an\r\nawakened reactor as being asleep to remote ones. That lead to\r\nsignificant performance slow-downs because shards would issue a syscall\r\neach time they would wake up a foreign waker.\r\n\r\nAlso, I simplified the code a little and replaced two standalone atomic\r\nload and swap operations with a single CAS one.\r\n\r\nThe relevant commit was 2fb4fb47ee3d3c0375ad9380c8a1892e4bc52404.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/457/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/456", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/456/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/456/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/456/events", "html_url": "https://github.com/DataDog/glommio/pull/456", "id": 1050267915, "node_id": "PR_kwDOEW1k-s4uXuDN", "number": 456, "title": "make placement and placement iterators public", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-10T20:14:05Z", "updated_at": "2021-11-10T20:32:50Z", "closed_at": "2021-11-10T20:32:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/456", "html_url": "https://github.com/DataDog/glommio/pull/456", "diff_url": "https://github.com/DataDog/glommio/pull/456.diff", "patch_url": "https://github.com/DataDog/glommio/pull/456.patch", "merged_at": "2021-11-10T20:32:27Z"}, "body": "We often see Glommio coexisting with third-party async runtimes in the \r\nwild and our placement structs are turning out to be really useful as a \r\nway to place all these threads so that they don't step on each other.\r\nThis PR makes all these API public so that Glommio app may use them\r\ndirectly.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/456/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/456/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/455", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/455/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/455/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/455/events", "html_url": "https://github.com/DataDog/glommio/pull/455", "id": 1049403824, "node_id": "PR_kwDOEW1k-s4uU5sW", "number": 455, "title": "add benchmarks for tcp socket", "user": {"login": "thirstycrow", "id": 1327305, "node_id": "MDQ6VXNlcjEzMjczMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thirstycrow", "html_url": "https://github.com/thirstycrow", "followers_url": "https://api.github.com/users/thirstycrow/followers", "following_url": "https://api.github.com/users/thirstycrow/following{/other_user}", "gists_url": "https://api.github.com/users/thirstycrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thirstycrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thirstycrow/subscriptions", "organizations_url": "https://api.github.com/users/thirstycrow/orgs", "repos_url": "https://api.github.com/users/thirstycrow/repos", "events_url": "https://api.github.com/users/thirstycrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thirstycrow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-10T05:00:17Z", "updated_at": "2021-11-15T01:35:51Z", "closed_at": "2021-11-15T01:35:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/455", "html_url": "https://github.com/DataDog/glommio/pull/455", "diff_url": "https://github.com/DataDog/glommio/pull/455.diff", "patch_url": "https://github.com/DataDog/glommio/pull/455.patch", "merged_at": "2021-11-15T01:35:51Z"}, "body": "Two benchmarks added to compare tcp socket performance between glommio and tokio for echo/proxy server.\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/455/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/453", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/453/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/453/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/453/events", "html_url": "https://github.com/DataDog/glommio/pull/453", "id": 1040603126, "node_id": "PR_kwDOEW1k-s4t5cMb", "number": 453, "title": "improve third-party dependencies CI checks", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-31T22:54:34Z", "updated_at": "2021-10-31T23:12:53Z", "closed_at": "2021-10-31T23:10:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/453", "html_url": "https://github.com/DataDog/glommio/pull/453", "diff_url": "https://github.com/DataDog/glommio/pull/453.diff", "patch_url": "https://github.com/DataDog/glommio/pull/453.patch", "merged_at": "2021-10-31T23:10:54Z"}, "body": "Partial fix for #452", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/453/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/453/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/450", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/450/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/450/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/450/events", "html_url": "https://github.com/DataDog/glommio/pull/450", "id": 1034238701, "node_id": "PR_kwDOEW1k-s4tlPPF", "number": 450, "title": "fix `DmaStreamReader` repeated poll panic", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-23T19:31:24Z", "updated_at": "2021-10-27T15:20:49Z", "closed_at": "2021-10-27T15:20:46Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/450", "html_url": "https://github.com/DataDog/glommio/pull/450", "diff_url": "https://github.com/DataDog/glommio/pull/450.diff", "patch_url": "https://github.com/DataDog/glommio/pull/450.patch", "merged_at": "2021-10-27T15:20:46Z"}, "body": "The `DmaStreamReader` used to panic upon registering a waker if one was\r\nalready there on the premise that the stream should have a single\r\nconsumer. While it is correct that a unique consumer should poll a\r\n`DmaStreamReader,` there are valid scenarios in which we want to replace\r\nan existing `Waker` for a newer one.\r\n\r\nOne such example is when the user polls many streams in parallel using a\r\nfacility like `JoinAll.` `JoinAll` will create one future that polls\r\nall its child futures every time. Therefore, if one of the child\r\nstreams is woken up by the reactor, all the streams in the `JoinAll`\r\nwill be polled. In the existing code, this would panic, and this commit\r\nfixes it.\r\n\r\nWe also now insert new `Waker`s with the entry API because that's\r\nslightly more efficient.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/450/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/449", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/449/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/449/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/449/events", "html_url": "https://github.com/DataDog/glommio/pull/449", "id": 1033609991, "node_id": "PR_kwDOEW1k-s4tjRl8", "number": 449, "title": "add a poll variant to `DmaStreamReader::get_buffer_aligned`", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-22T13:55:11Z", "updated_at": "2021-11-04T22:45:32Z", "closed_at": "2021-11-04T22:45:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/449", "html_url": "https://github.com/DataDog/glommio/pull/449", "diff_url": "https://github.com/DataDog/glommio/pull/449.diff", "patch_url": "https://github.com/DataDog/glommio/pull/449.patch", "merged_at": "2021-11-04T22:45:28Z"}, "body": "### What does this PR do?\r\n\r\nRelated to #445 and #446\r\n\r\nSince `DmaStreamReader` is a stream, we have to play well with other\r\nstreams and make our functions easy to use from a polling context.\r\n`get_buffer_aligned` is an async function and, as such, is hard to use\r\nfrom there (not impossible, just hard).\r\n\r\nIf we look at the `AsyncRead` trait, one may see that it defines only\r\npoll functions. Async functions are then built on top in the\r\n`AsyncReadExt.` This is done because creating a future from a poll\r\nfunction is trivial, while the other way around is hard.\r\n\r\nTherefore, we create a new function `poll_get_buffer_aligned` and we\r\nreimplement `get_buffer_aligned` as a wrapper around it:\r\n\r\n```rust\r\npub async fn get_buffer_aligned(&mut self, len: u64) -> Result<ReadResult> {\r\n    poll_fn(|cx| self.poll_get_buffer_aligned(cx, len)).await\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/449/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/443", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/443/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/443/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/443/events", "html_url": "https://github.com/DataDog/glommio/pull/443", "id": 1023462436, "node_id": "PR_kwDOEW1k-s4tDgUM", "number": 443, "title": "Udp options", "user": {"login": "chux0519", "id": 14276970, "node_id": "MDQ6VXNlcjE0Mjc2OTcw", "avatar_url": "https://avatars.githubusercontent.com/u/14276970?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chux0519", "html_url": "https://github.com/chux0519", "followers_url": "https://api.github.com/users/chux0519/followers", "following_url": "https://api.github.com/users/chux0519/following{/other_user}", "gists_url": "https://api.github.com/users/chux0519/gists{/gist_id}", "starred_url": "https://api.github.com/users/chux0519/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chux0519/subscriptions", "organizations_url": "https://api.github.com/users/chux0519/orgs", "repos_url": "https://api.github.com/users/chux0519/repos", "events_url": "https://api.github.com/users/chux0519/events{/privacy}", "received_events_url": "https://api.github.com/users/chux0519/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-12T07:26:56Z", "updated_at": "2021-10-14T12:49:12Z", "closed_at": "2021-10-14T12:49:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/443", "html_url": "https://github.com/DataDog/glommio/pull/443", "diff_url": "https://github.com/DataDog/glommio/pull/443.diff", "patch_url": "https://github.com/DataDog/glommio/pull/443.patch", "merged_at": "2021-10-14T12:49:11Z"}, "body": "### What does this PR do?\r\n\r\nAdd more options to UdpSocket which [net.UdpSocket](https://doc.rust-lang.org/std/net/struct.UdpSocket.html) supports\r\n\r\n### Motivation\r\n\r\nI'm new to glommio, and found this [issue](https://github.com/DataDog/glommio/issues/243), and seems nobody doing the rest of work. I think it's a good part to get start with.\r\n\r\n### Related issues\r\n\r\nhttps://github.com/DataDog/glommio/issues/243\r\n\r\n### Additional Notes\r\n\r\n\r\n\r\n### Checklist\r\n\r\n[X] I have added unit tests to the code I am submitting\r\n[X] My unit tests cover both failure and success scenarios\r\n[X] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/443/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/443/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/442", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/442/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/442/events", "html_url": "https://github.com/DataDog/glommio/pull/442", "id": 1021437286, "node_id": "PR_kwDOEW1k-s4s9e1j", "number": 442, "title": "shared channel: ensure timely wake", "user": {"login": "trtsl", "id": 69097508, "node_id": "MDQ6VXNlcjY5MDk3NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/69097508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trtsl", "html_url": "https://github.com/trtsl", "followers_url": "https://api.github.com/users/trtsl/followers", "following_url": "https://api.github.com/users/trtsl/following{/other_user}", "gists_url": "https://api.github.com/users/trtsl/gists{/gist_id}", "starred_url": "https://api.github.com/users/trtsl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trtsl/subscriptions", "organizations_url": "https://api.github.com/users/trtsl/orgs", "repos_url": "https://api.github.com/users/trtsl/repos", "events_url": "https://api.github.com/users/trtsl/events{/privacy}", "received_events_url": "https://api.github.com/users/trtsl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-08T20:23:39Z", "updated_at": "2021-10-12T13:41:51Z", "closed_at": "2021-10-12T13:41:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/442", "html_url": "https://github.com/DataDog/glommio/pull/442", "diff_url": "https://github.com/DataDog/glommio/pull/442.diff", "patch_url": "https://github.com/DataDog/glommio/pull/442.patch", "merged_at": "2021-10-12T13:41:50Z"}, "body": "### What does this PR do?\r\n\r\nImproves on pull request #441 which allowed sender to wait on receiver to disconnect before waking.  With this request, senders should wake as soon as they are closed in other tasks.  The unit test has been updated to check this case explicitly.  Some additional minor refactoring.\r\n\r\n### Motivation\r\n\r\nImprove on the prior pull request.\r\n\r\n### Related issues\r\n\r\nPull request #441\r\n\r\n### Additional Notes\r\n\r\nna\r\n\r\n### Checklist\r\n\r\n[y] I have added unit tests to the code I am submitting\r\n~[] My unit tests cover both failure and success scenarios~\r\n~[] If applicable, I have discussed my architecture~\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/442/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/441", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/441/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/441/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/441/events", "html_url": "https://github.com/DataDog/glommio/pull/441", "id": 1020623962, "node_id": "PR_kwDOEW1k-s4s6_7I", "number": 441, "title": "Channel panic", "user": {"login": "trtsl", "id": 69097508, "node_id": "MDQ6VXNlcjY5MDk3NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/69097508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trtsl", "html_url": "https://github.com/trtsl", "followers_url": "https://api.github.com/users/trtsl/followers", "following_url": "https://api.github.com/users/trtsl/following{/other_user}", "gists_url": "https://api.github.com/users/trtsl/gists{/gist_id}", "starred_url": "https://api.github.com/users/trtsl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trtsl/subscriptions", "organizations_url": "https://api.github.com/users/trtsl/orgs", "repos_url": "https://api.github.com/users/trtsl/repos", "events_url": "https://api.github.com/users/trtsl/events{/privacy}", "received_events_url": "https://api.github.com/users/trtsl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-10-08T02:46:28Z", "updated_at": "2021-10-08T10:59:07Z", "closed_at": "2021-10-08T10:59:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/441", "html_url": "https://github.com/DataDog/glommio/pull/441", "diff_url": "https://github.com/DataDog/glommio/pull/441.diff", "patch_url": "https://github.com/DataDog/glommio/pull/441.patch", "merged_at": "2021-10-08T10:59:07Z"}, "body": "### What does this PR do?\r\n\r\nFixes a panic when a `ConnectedSender` is `close`d in one task while the same `ConnectedSender` is blocked on `send` in another task (see new unit test).\r\n\r\n### Motivation\r\n\r\nFix panic.\r\n\r\n### Related issues\r\n\r\nna\r\n\r\n### Additional Notes\r\n\r\nna\r\n\r\n### Checklist\r\n\r\n[y] I have added unit tests to the code I am submitting\r\n[~] My unit tests cover both failure and success scenarios~\r\n[~] If applicable, I have discussed my architecture~\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/441/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/441/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/440", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/440/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/440/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/440/events", "html_url": "https://github.com/DataDog/glommio/pull/440", "id": 1018313092, "node_id": "PR_kwDOEW1k-s4szT9Z", "number": 440, "title": "fix third-party check to run on fork-initiated PRs", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-06T13:20:08Z", "updated_at": "2021-10-06T13:20:17Z", "closed_at": "2021-10-06T13:20:15Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/440", "html_url": "https://github.com/DataDog/glommio/pull/440", "diff_url": "https://github.com/DataDog/glommio/pull/440.diff", "patch_url": "https://github.com/DataDog/glommio/pull/440.patch", "merged_at": "2021-10-06T13:20:15Z"}, "body": "The existing job only worked for PR opened from branch inside the main\r\nrepo.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/440/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/439", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/439/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/439/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/439/events", "html_url": "https://github.com/DataDog/glommio/pull/439", "id": 1018297148, "node_id": "PR_kwDOEW1k-s4szQcZ", "number": 439, "title": "fix third-party check to run on fork-initiated PRs", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-06T13:10:42Z", "updated_at": "2021-10-06T13:10:53Z", "closed_at": "2021-10-06T13:10:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/439", "html_url": "https://github.com/DataDog/glommio/pull/439", "diff_url": "https://github.com/DataDog/glommio/pull/439.diff", "patch_url": "https://github.com/DataDog/glommio/pull/439.patch", "merged_at": "2021-10-06T13:10:49Z"}, "body": "The existing job only worked for PR opened from branch inside the main\r\nrepo.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/439/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/438", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/438/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/438/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/438/events", "html_url": "https://github.com/DataDog/glommio/pull/438", "id": 1018284384, "node_id": "PR_kwDOEW1k-s4szNnP", "number": 438, "title": "fix third-party check to run on fork-initiated PRs", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-06T13:03:45Z", "updated_at": "2021-10-06T13:03:51Z", "closed_at": "2021-10-06T13:03:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/438", "html_url": "https://github.com/DataDog/glommio/pull/438", "diff_url": "https://github.com/DataDog/glommio/pull/438.diff", "patch_url": "https://github.com/DataDog/glommio/pull/438.patch", "merged_at": "2021-10-06T13:03:51Z"}, "body": "The existing job only worked for PR opened from branch inside the main\r\nrepo.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/438/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/438/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/437", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/437/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/437/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/437/events", "html_url": "https://github.com/DataDog/glommio/pull/437", "id": 1018252177, "node_id": "PR_kwDOEW1k-s4szGe2", "number": 437, "title": "fix third-party check to run on fork-initiated PRs", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-06T12:46:04Z", "updated_at": "2021-10-06T13:21:34Z", "closed_at": "2021-10-06T12:55:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/437", "html_url": "https://github.com/DataDog/glommio/pull/437", "diff_url": "https://github.com/DataDog/glommio/pull/437.diff", "patch_url": "https://github.com/DataDog/glommio/pull/437.patch", "merged_at": "2021-10-06T12:55:42Z"}, "body": "The existing job only worked for PR opened from branch inside the main\r\nrepo.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/437/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/437/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/435", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/435/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/435/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/435/events", "html_url": "https://github.com/DataDog/glommio/pull/435", "id": 1018153657, "node_id": "PR_kwDOEW1k-s4sywfB", "number": 435, "title": "fix third-party check to run on fork-initiated PRs", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-06T11:56:55Z", "updated_at": "2021-10-06T12:08:38Z", "closed_at": "2021-10-06T12:08:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/435", "html_url": "https://github.com/DataDog/glommio/pull/435", "diff_url": "https://github.com/DataDog/glommio/pull/435.diff", "patch_url": "https://github.com/DataDog/glommio/pull/435.patch", "merged_at": "2021-10-06T12:08:34Z"}, "body": "The existing job only worked for PR opened from branches inside the main\r\nrepo.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/435/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/434", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/434/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/434/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/434/events", "html_url": "https://github.com/DataDog/glommio/pull/434", "id": 1016637103, "node_id": "PR_kwDOEW1k-s4sthU-", "number": 434, "title": "Reduce foreign wake latency", "user": {"login": "thirstycrow", "id": 1327305, "node_id": "MDQ6VXNlcjEzMjczMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thirstycrow", "html_url": "https://github.com/thirstycrow", "followers_url": "https://api.github.com/users/thirstycrow/followers", "following_url": "https://api.github.com/users/thirstycrow/following{/other_user}", "gists_url": "https://api.github.com/users/thirstycrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thirstycrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thirstycrow/subscriptions", "organizations_url": "https://api.github.com/users/thirstycrow/orgs", "repos_url": "https://api.github.com/users/thirstycrow/repos", "events_url": "https://api.github.com/users/thirstycrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thirstycrow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2021-10-05T18:12:06Z", "updated_at": "2021-10-21T14:29:33Z", "closed_at": "2021-10-21T14:29:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/434", "html_url": "https://github.com/DataDog/glommio/pull/434", "diff_url": "https://github.com/DataDog/glommio/pull/434.diff", "patch_url": "https://github.com/DataDog/glommio/pull/434.patch", "merged_at": "2021-10-21T14:29:33Z"}, "body": "### What does this PR do?\r\n\r\nReduce foreign wake latency by sending notifications via the event fd installed on the latency ring. Notifications will only be sent if the task being waken was spawned on a queue with latency requirement. A comparison between with and without notifications produced by the foreign_wake benchmark:\r\n\r\n```\r\n$ RUST_LOG=debug RUST_BACKTRACE=1 cargo bench --bench foreign_wake \r\n    Finished bench [optimized] target(s) in 0.04s\r\n     Running unittests (target/release/deps/foreign_wake-6d33a328eb2cc763)\r\n\r\nLatency requirement: NotImportant\r\nLabel              Min   Mean    P99  P99.9    Max\r\nglommio->tokio:  0.014  0.285  0.614  0.822  0.902\r\ntokio schedule:  0.000  0.008  0.055  0.123  0.178\r\ntokio process :  0.515  1.962  2.965  3.067  3.161\r\ntokio->glommio: 11.816 96.668 97.983 99.135 99.135\r\n\r\nLatency requirement: Matters(100ms)\r\nLabel              Min   Mean    P99  P99.9    Max\r\nglommio->tokio:  0.000  0.169  0.399  0.518  0.564\r\ntokio schedule:  0.000  0.018  0.100  0.176  0.213\r\ntokio process :  0.513  1.794  2.415  2.717  2.873\r\ntokio->glommio:  0.004  0.374  0.633  0.677  0.730\r\n```\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/434/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/434/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/433", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/433/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/433/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/433/events", "html_url": "https://github.com/DataDog/glommio/pull/433", "id": 1016632750, "node_id": "PR_kwDOEW1k-s4stgeI", "number": 433, "title": "update `nix` to 0.23", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-10-05T18:07:09Z", "updated_at": "2021-10-05T19:04:23Z", "closed_at": "2021-10-05T19:04:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/433", "html_url": "https://github.com/DataDog/glommio/pull/433", "diff_url": "https://github.com/DataDog/glommio/pull/433.diff", "patch_url": "https://github.com/DataDog/glommio/pull/433.patch", "merged_at": "2021-10-05T19:04:19Z"}, "body": "0.22 has a security vulnerability. See https://rustsec.org/advisories/RUSTSEC-2021-0119 for details.\r\nThis new version marks some enums with `#[non_exhaustive]` to force downstream users to match against wildcard. See https://doc.rust-lang.org/reference/attributes/type_system.html#the-non_exhaustive-attribute.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/433/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/433/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/429", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/429/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/429/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/429/events", "html_url": "https://github.com/DataDog/glommio/pull/429", "id": 1010283828, "node_id": "PR_kwDOEW1k-s4sa0bi", "number": 429, "title": "add CI checks to make sure our dependencies are clean", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-28T22:51:58Z", "updated_at": "2021-09-29T17:51:45Z", "closed_at": "2021-09-29T17:51:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/429", "html_url": "https://github.com/DataDog/glommio/pull/429", "diff_url": "https://github.com/DataDog/glommio/pull/429.diff", "patch_url": "https://github.com/DataDog/glommio/pull/429.patch", "merged_at": "2021-09-29T17:51:41Z"}, "body": "This PR adds a new CI check that:\r\n* makes sure our dependencies are permissively licensed;\r\n* makes sure our dependencies are \"free\" of security vulnerabilities;\r\n* assert that the `LICENSE-3rdparty.csv` file contains an\r\nauthoritative list of all our dependencies and their respective\r\nlicenses.\r\n\r\nIn the process, I had to update our dependencies (some of them were \r\noutdated).\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/429/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/429/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/428", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/428/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/428/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/428/events", "html_url": "https://github.com/DataDog/glommio/pull/428", "id": 1010235739, "node_id": "PR_kwDOEW1k-s4sar4Z", "number": 428, "title": "update `Cargo.toml` and various markdown files", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-28T21:39:35Z", "updated_at": "2021-09-28T22:27:07Z", "closed_at": "2021-09-28T22:27:03Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/428", "html_url": "https://github.com/DataDog/glommio/pull/428", "diff_url": "https://github.com/DataDog/glommio/pull/428.diff", "patch_url": "https://github.com/DataDog/glommio/pull/428.patch", "merged_at": "2021-09-28T22:27:03Z"}, "body": "### What does this PR do?\r\n\r\n* update `Cargo.toml` to better reflect the GitHub repository metadata\r\non crates.io\r\n* Update `CONTRIBUTING.md` to be shorter and less verbose.\r\n* Update `README.md` too.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/428/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/427", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/427/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/427/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/427/events", "html_url": "https://github.com/DataDog/glommio/pull/427", "id": 1008942682, "node_id": "PR_kwDOEW1k-s4sWpe8", "number": 427, "title": "improve the `LocalExecutor` builders", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-28T01:17:52Z", "updated_at": "2021-11-04T18:16:06Z", "closed_at": "2021-11-04T18:16:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/427", "html_url": "https://github.com/DataDog/glommio/pull/427", "diff_url": "https://github.com/DataDog/glommio/pull/427.diff", "patch_url": "https://github.com/DataDog/glommio/pull/427.patch", "merged_at": "2021-11-04T18:16:02Z"}, "body": "This PR makes a series of changes to the builders and placement\r\nstrategies:\r\n* The `Placement` struct is renamed to `PoolPlacement` as it maps\r\nplacements for a pool of executors.\r\n* Embed the number of executors to create directly in the placement \r\npolicy. Instead of having two orthogonal configurations for a \r\n`LocalExecutorPoolBuilder`(the number of executors to create and the CPU\r\nplacement policy) that can conflict with each other (for instance if we \r\nprovide a custom placement and a different number of shards to create), \r\nmerge the two together. A `PoolPlacement` now also takes (when \r\nappropriate), the number of executors to create in addition to the \r\n`CpuSet` to use. The `LocalExecutorPoolBuilder` constructor now takes a \r\n`PoolPlacement` directly instead of the number of executors to create.\r\nThis simplifies the API and makes it harder to misuse.\r\n* Align the `LocalExecutorBuilder` API with the pooled version. The \r\npooled version is presently strictly superior to the non-pooled one \r\nbecause it uses the `PoolPlacement` logic. It is therefore possible to\r\nspawn a single executor that's fenced to a collection of CPUs using the\r\npooled API, but not with the non-pooled one. With the existing \r\n`LocalExecutorBuilder`, an executor is either pinned to a specific CPU, \r\nor to none at all. To remedy this, this commit creates a new `Placement`\r\nenum that contains a subset of placement strategies that make sense for \r\na single executor. In turn, `LocalExecutorBuilder::new` now takes a \r\n`Placement` strategy and the `pin_to_cpu` API is removed.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/427/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/427/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/424", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/424/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/424/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/424/events", "html_url": "https://github.com/DataDog/glommio/pull/424", "id": 1006935978, "node_id": "PR_kwDOEW1k-s4sQwPZ", "number": 424, "title": "fix failing tests asserting IO errors", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-25T02:38:02Z", "updated_at": "2021-09-25T03:11:59Z", "closed_at": "2021-09-25T03:11:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/424", "html_url": "https://github.com/DataDog/glommio/pull/424", "diff_url": "https://github.com/DataDog/glommio/pull/424.diff", "patch_url": "https://github.com/DataDog/glommio/pull/424.patch", "merged_at": "2021-09-25T03:11:55Z"}, "body": "Don't assert the strongly typed errors, just the string representations.\r\nThe `Io:ErrorKind` of the errors we were matching against used to be\r\n`Other` and have moved to be `Uncategorized`.\r\nThe documentation explicitly advises against matching for\r\n`Uncategorized` errors as they are meant to eventually get their own\r\ndedicated `Io:ErrorKind` in future rust versions.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/424/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/423", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/423/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/423/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/423/events", "html_url": "https://github.com/DataDog/glommio/pull/423", "id": 1006909703, "node_id": "PR_kwDOEW1k-s4sQsMI", "number": 423, "title": "Fix placement test", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-25T00:35:59Z", "updated_at": "2021-09-25T01:11:37Z", "closed_at": "2021-09-25T01:11:37Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/423", "html_url": "https://github.com/DataDog/glommio/pull/423", "diff_url": "https://github.com/DataDog/glommio/pull/423.diff", "patch_url": "https://github.com/DataDog/glommio/pull/423.patch", "merged_at": "2021-09-25T01:11:37Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/423/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/422", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/422/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/422/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/422/events", "html_url": "https://github.com/DataDog/glommio/pull/422", "id": 1006908407, "node_id": "PR_kwDOEW1k-s4sQr-T", "number": 422, "title": "Make CpuSet an actual set interface", "user": {"login": "davidblewett", "id": 141716, "node_id": "MDQ6VXNlcjE0MTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/141716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidblewett", "html_url": "https://github.com/davidblewett", "followers_url": "https://api.github.com/users/davidblewett/followers", "following_url": "https://api.github.com/users/davidblewett/following{/other_user}", "gists_url": "https://api.github.com/users/davidblewett/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidblewett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidblewett/subscriptions", "organizations_url": "https://api.github.com/users/davidblewett/orgs", "repos_url": "https://api.github.com/users/davidblewett/repos", "events_url": "https://api.github.com/users/davidblewett/events{/privacy}", "received_events_url": "https://api.github.com/users/davidblewett/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-09-25T00:30:49Z", "updated_at": "2021-09-25T18:34:41Z", "closed_at": "2021-09-25T18:28:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/422", "html_url": "https://github.com/DataDog/glommio/pull/422", "diff_url": "https://github.com/DataDog/glommio/pull/422.diff", "patch_url": "https://github.com/DataDog/glommio/pull/422.patch", "merged_at": "2021-09-25T18:28:34Z"}, "body": "### What does this PR do?\r\n\r\nThis PR adds set API to CpuSet, by delegating to `collections::HashSet`.\r\n\r\n### Motivation\r\n\r\nI am building a service abstraction that needs to be able to validate that multiple Glommio tasks do not share `CpuLocation` instances.\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[x] I have added unit tests to the code I am submitting\r\n[x] My unit tests cover both failure and success scenarios\r\n[x] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/422/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/421", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/421/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/421/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/421/events", "html_url": "https://github.com/DataDog/glommio/pull/421", "id": 1006902243, "node_id": "PR_kwDOEW1k-s4sQq53", "number": 421, "title": "Remove CircleCI", "user": {"login": "duarten", "id": 501746, "node_id": "MDQ6VXNlcjUwMTc0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/501746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duarten", "html_url": "https://github.com/duarten", "followers_url": "https://api.github.com/users/duarten/followers", "following_url": "https://api.github.com/users/duarten/following{/other_user}", "gists_url": "https://api.github.com/users/duarten/gists{/gist_id}", "starred_url": "https://api.github.com/users/duarten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duarten/subscriptions", "organizations_url": "https://api.github.com/users/duarten/orgs", "repos_url": "https://api.github.com/users/duarten/repos", "events_url": "https://api.github.com/users/duarten/events{/privacy}", "received_events_url": "https://api.github.com/users/duarten/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-25T00:08:04Z", "updated_at": "2021-09-27T20:03:52Z", "closed_at": "2021-09-25T01:19:14Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/421", "html_url": "https://github.com/DataDog/glommio/pull/421", "diff_url": "https://github.com/DataDog/glommio/pull/421.diff", "patch_url": "https://github.com/DataDog/glommio/pull/421.patch", "merged_at": "2021-09-25T01:19:14Z"}, "body": "### What does this PR do?\n\nNow that GH Actions is configured and running unit tests, CircleCI can\nbe disabled.\n\n### Motivation\n\nFollow-up to #419\n\n### Related issues\n\n### Additional Notes\n\n### Checklist\n\n[] I have added unit tests to the code I am submitting\n[] My unit tests cover both failure and success scenarios\n[] If applicable, I have discussed my architecture\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/421/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/421/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/420", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/420/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/420/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/420/events", "html_url": "https://github.com/DataDog/glommio/pull/420", "id": 1006900631, "node_id": "PR_kwDOEW1k-s4sQqnW", "number": 420, "title": "Fix drop_join_handle_before_completion test", "user": {"login": "duarten", "id": 501746, "node_id": "MDQ6VXNlcjUwMTc0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/501746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duarten", "html_url": "https://github.com/duarten", "followers_url": "https://api.github.com/users/duarten/followers", "following_url": "https://api.github.com/users/duarten/following{/other_user}", "gists_url": "https://api.github.com/users/duarten/gists{/gist_id}", "starred_url": "https://api.github.com/users/duarten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duarten/subscriptions", "organizations_url": "https://api.github.com/users/duarten/orgs", "repos_url": "https://api.github.com/users/duarten/repos", "events_url": "https://api.github.com/users/duarten/events{/privacy}", "received_events_url": "https://api.github.com/users/duarten/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-25T00:02:33Z", "updated_at": "2021-09-25T00:45:33Z", "closed_at": "2021-09-25T00:44:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/420", "html_url": "https://github.com/DataDog/glommio/pull/420", "diff_url": "https://github.com/DataDog/glommio/pull/420.diff", "patch_url": "https://github.com/DataDog/glommio/pull/420.patch", "merged_at": "2021-09-25T00:44:30Z"}, "body": "### What does this PR do?\n\nNow that tasks are run right away, it becomes completed and is dropped\nwhen dropping the join handle. Add a yield to make the task remain\nactive.\n\n### Motivation\n\nFixing a failing test.\n\n### Related issues\n\n### Additional Notes\n\n### Checklist\n\n[] I have added unit tests to the code I am submitting\n[] My unit tests cover both failure and success scenarios\n[] If applicable, I have discussed my architecture\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/420/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/419", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/419/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/419/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/419/events", "html_url": "https://github.com/DataDog/glommio/pull/419", "id": 1005664295, "node_id": "PR_kwDOEW1k-s4sM6Ct", "number": 419, "title": "Add GH Actions workflow for CI", "user": {"login": "duarten", "id": 501746, "node_id": "MDQ6VXNlcjUwMTc0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/501746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duarten", "html_url": "https://github.com/duarten", "followers_url": "https://api.github.com/users/duarten/followers", "following_url": "https://api.github.com/users/duarten/following{/other_user}", "gists_url": "https://api.github.com/users/duarten/gists{/gist_id}", "starred_url": "https://api.github.com/users/duarten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duarten/subscriptions", "organizations_url": "https://api.github.com/users/duarten/orgs", "repos_url": "https://api.github.com/users/duarten/repos", "events_url": "https://api.github.com/users/duarten/events{/privacy}", "received_events_url": "https://api.github.com/users/duarten/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-23T17:08:16Z", "updated_at": "2021-09-27T20:04:04Z", "closed_at": "2021-09-24T20:19:46Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/419", "html_url": "https://github.com/DataDog/glommio/pull/419", "diff_url": "https://github.com/DataDog/glommio/pull/419.diff", "patch_url": "https://github.com/DataDog/glommio/pull/419.patch", "merged_at": "2021-09-24T20:19:46Z"}, "body": "### What does this PR do?\r\n\r\nThe goal is to replace CircleCI with Github Actions. This PR adds the\r\nlatter, so CircleCI can be removed in a follow-up.\r\n\r\n### Motivation\r\n\r\nMainly not requiring contributors to sign up to CircleCI, but also the ability\r\nto run unit tests on CI, and eventually move to self-hosted runners for more\r\nbeefy machines.\r\n\r\n### Related issues\r\n\r\n### Additional Notes\r\n\r\nThe repo will need to be configured to require the Github Actions checks instead\r\nof the CircleCI ones.\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/419/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/418", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/418/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/418/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/418/events", "html_url": "https://github.com/DataDog/glommio/pull/418", "id": 1005629713, "node_id": "PR_kwDOEW1k-s4sMzNj", "number": 418, "title": "use crossbeam channels to exchange wakers across thread", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-23T16:26:20Z", "updated_at": "2021-09-23T17:20:04Z", "closed_at": "2021-09-23T16:58:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/418", "html_url": "https://github.com/DataDog/glommio/pull/418", "diff_url": "https://github.com/DataDog/glommio/pull/418.diff", "patch_url": "https://github.com/DataDog/glommio/pull/418.patch", "merged_at": "2021-09-23T16:58:59Z"}, "body": "Crossbeam channels are known to be very fast and also use interior\r\nmutability. This means we no longer need a mutex to touch the receiver.\r\nAlthough uncontended, this mutex would show up in profiles on production\r\nload.\r\nWe already use crossbeam channels in the reactor (to synchronize\r\nthreads performing blocking syscalls).\r\n \r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/418/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/416", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/416/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/416/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/416/events", "html_url": "https://github.com/DataDog/glommio/pull/416", "id": 1005610877, "node_id": "PR_kwDOEW1k-s4sMvbx", "number": 416, "title": "refactor `read_many` to take a stream of iovecs as input", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-23T16:06:42Z", "updated_at": "2021-09-27T19:31:55Z", "closed_at": "2021-09-27T19:31:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/416", "html_url": "https://github.com/DataDog/glommio/pull/416", "diff_url": "https://github.com/DataDog/glommio/pull/416.diff", "patch_url": "https://github.com/DataDog/glommio/pull/416.patch", "merged_at": "2021-09-27T19:31:51Z"}, "body": "Instead of taking an iterator of (offsets, positions), make it a stream.\r\n\r\nThe reason behind doing this is that using an iterator forces us to\r\nschedule all the IO synchronously at call-time (or keep them in memory\r\nwhich isn't great either). While this is fine when dealing with a small\r\nnumber of requests (and -marginally- more efficient) it becomes\r\nproblematic as the number of IO requests increases.\r\n\r\nSpecifically, doing this may starve other tasks performing IO in the same\r\ntask queue since the reactor submits IO requests to the device in FIFO\r\norder. Therefore, if two concurrent tasks call `read_many` they will\r\nrace and all the IO submitted by the first task will be processed before\r\na single IO from the second reaches the IO ring. This is obviously wrong\r\nas we want some amount of fairness even within a common task queue.\r\n\r\nAnother use case is when performing parallel calls to `read_many` with\r\nthe intention of zipping the resulting streams. For instance, if some\r\ndata is spread in many files we may want to fetch data in parallel and\r\ncombine the result asynchronously.\r\n\r\nThe `read_many` stream now eagerly consumes the input stream until\r\nit yields or until we reach 128 in-flight sources. This allows a maximum\r\nof 128 sources to run concurrently. After that, the stream will wait until\r\nthe first source is fulfilled.\r\n\r\n128 is a constant for now and was chosen to match the depth of our\r\nio_uring submission queues. Although this value is a constant right now,\r\na further improvement would be to make it dynamic to maximize\r\nthroughput and lower IO latency on the fly.\r\n\r\nBaby steps! ", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/416/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/416/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/415", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/415/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/415/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/415/events", "html_url": "https://github.com/DataDog/glommio/pull/415", "id": 1005522933, "node_id": "PR_kwDOEW1k-s4sMdsP", "number": 415, "title": "impl Default for RwLock", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-23T14:45:53Z", "updated_at": "2021-09-23T15:05:45Z", "closed_at": "2021-09-23T14:54:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/415", "html_url": "https://github.com/DataDog/glommio/pull/415", "diff_url": "https://github.com/DataDog/glommio/pull/415.diff", "patch_url": "https://github.com/DataDog/glommio/pull/415.patch", "merged_at": "2021-09-23T14:54:43Z"}, "body": "### What does this PR do?\r\n```rust\r\nimpl Default for RwLock {}\r\n```\r\n\r\n### Motivation\r\n\r\nAnother small API change. A usual pattern for wrapper struct.\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/415/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/415/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/414", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/414/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/414/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/414/events", "html_url": "https://github.com/DataDog/glommio/pull/414", "id": 1004292842, "node_id": "PR_kwDOEW1k-s4sIpfT", "number": 414, "title": "Change `close_rc()`'s API", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-09-22T13:21:23Z", "updated_at": "2021-09-28T18:04:06Z", "closed_at": "2021-09-28T18:04:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/414", "html_url": "https://github.com/DataDog/glommio/pull/414", "diff_url": "https://github.com/DataDog/glommio/pull/414.diff", "patch_url": "https://github.com/DataDog/glommio/pull/414.patch", "merged_at": "2021-09-28T18:04:06Z"}, "body": "### What does this PR do?\r\n\r\nChange `close_rc` to return `Result<bool>` to tell whether an underlying file is actually closed. And no error if isn't.\r\n\r\n### Motivation\r\n\r\nFor situations that wrap `DmaFile` with Rc, we usually have many tasks that will access the file. Sometimes it's hard to tell which one will be the last finished and is responded to close the file. A natural way IMO would be for each task (which keeps an `Rc<DmaFile>` handle) to try to close their Rc handle via `close_rc`, and only the last will actually close the file.\r\n\r\nIn the current API however, we need to check the strong counter one more time out of `close_rc()` or match the returning error that can a caller tell if the error is from closing a file or just there is another copy of the same Rc.\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/414/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/413", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/413/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/413/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/413/events", "html_url": "https://github.com/DataDog/glommio/pull/413", "id": 1002870050, "node_id": "PR_kwDOEW1k-s4sD5TI", "number": 413, "title": "Move the Reactor to its own module", "user": {"login": "duarten", "id": 501746, "node_id": "MDQ6VXNlcjUwMTc0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/501746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duarten", "html_url": "https://github.com/duarten", "followers_url": "https://api.github.com/users/duarten/followers", "following_url": "https://api.github.com/users/duarten/following{/other_user}", "gists_url": "https://api.github.com/users/duarten/gists{/gist_id}", "starred_url": "https://api.github.com/users/duarten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duarten/subscriptions", "organizations_url": "https://api.github.com/users/duarten/orgs", "repos_url": "https://api.github.com/users/duarten/repos", "events_url": "https://api.github.com/users/duarten/events{/privacy}", "received_events_url": "https://api.github.com/users/duarten/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-09-21T16:58:08Z", "updated_at": "2021-09-22T19:00:25Z", "closed_at": "2021-09-22T19:00:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/413", "html_url": "https://github.com/DataDog/glommio/pull/413", "diff_url": "https://github.com/DataDog/glommio/pull/413.diff", "patch_url": "https://github.com/DataDog/glommio/pull/413.patch", "merged_at": "2021-09-22T19:00:25Z"}, "body": "### What does this PR do?\n\nThis will make it easier to introduce multiple Reactors, such as a no-op\none (to use glommio for its task scheduling, TPC capabilities) or one\nsuited for a different platform, like macOS.\n\n### Motivation\n\nThe larger goal is to make it smooth to develop for glommio in macOS.\n\n### Related issues\n\n### Additional Notes\n\n### Checklist\n\n[] I have added unit tests to the code I am submitting\n[] My unit tests cover both failure and success scenarios\n[] If applicable, I have discussed my architecture\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/413/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/413/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/412", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/412/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/412/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/412/events", "html_url": "https://github.com/DataDog/glommio/pull/412", "id": 998559259, "node_id": "PR_kwDOEW1k-s4r2rmx", "number": 412, "title": "API discoverability; align ourselves with the wider ecosystem ", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-09-16T19:33:41Z", "updated_at": "2021-09-29T18:54:25Z", "closed_at": "2021-09-28T16:39:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/412", "html_url": "https://github.com/DataDog/glommio/pull/412", "diff_url": "https://github.com/DataDog/glommio/pull/412.diff", "patch_url": "https://github.com/DataDog/glommio/pull/412.patch", "merged_at": "2021-09-28T16:39:51Z"}, "body": "### What does this PR do?\r\n\r\n* Spawning tasks via a member function of `Task<T>` is not great from an\r\nAPI discovery point of view but also means we often need to use the\r\nstarfish syntax such as `Task::<()>::local(...)`. A free function makes\r\nit simpler for the type system to infer the return type of the `Task` to\r\ncreate. This makes our spawning API similar to that of Tokio for\r\ninstance.\r\n* Functions such as `create_task_queue` intuitively relate to the executor\r\nand not to a `Task`. To make things easier, we define a free function\r\n`executor()` that is now included in the prelude. It returns a proxy\r\nstruct to the `LocalExecutor`. This is where all executor functions\r\naccessible to the user will be located moving forward.\r\n\r\nOnce Rust gets better thread-local-storage we will remove this proxy\r\nentirely and return a direct reference to the `LocalExecutor` itself. Alas,\r\nwe can't do that yet.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/412/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/412/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/411", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/411/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/411/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/411/events", "html_url": "https://github.com/DataDog/glommio/pull/411", "id": 996394921, "node_id": "PR_kwDOEW1k-s4rv-DN", "number": 411, "title": "Bye Bye @glommer!", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-14T20:14:34Z", "updated_at": "2021-09-14T20:30:38Z", "closed_at": "2021-09-14T20:30:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/411", "html_url": "https://github.com/DataDog/glommio/pull/411", "diff_url": "https://github.com/DataDog/glommio/pull/411.diff", "patch_url": "https://github.com/DataDog/glommio/pull/411.patch", "merged_at": "2021-09-14T20:30:34Z"}, "body": "@glommer is no longer working at Datadog. He will always be in our hearts though!\r\n\r\nLove ya Glauber!\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/411/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/411/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/410", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/410/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/410/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/410/events", "html_url": "https://github.com/DataDog/glommio/pull/410", "id": 996382696, "node_id": "PR_kwDOEW1k-s4rv7dF", "number": 410, "title": "New version", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-14T19:58:22Z", "updated_at": "2021-09-14T20:20:46Z", "closed_at": "2021-09-14T20:20:46Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/410", "html_url": "https://github.com/DataDog/glommio/pull/410", "diff_url": "https://github.com/DataDog/glommio/pull/410.diff", "patch_url": "https://github.com/DataDog/glommio/pull/410.patch", "merged_at": "2021-09-14T20:20:46Z"}, "body": "bump to 0.6, remove all alpha wording", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/410/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/409", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/409/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/409/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/409/events", "html_url": "https://github.com/DataDog/glommio/pull/409", "id": 994373706, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMyMzIxMDA5", "number": 409, "title": "update to rust 1.55 and apply Clippy suggestions", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-13T02:11:14Z", "updated_at": "2021-09-13T15:45:52Z", "closed_at": "2021-09-13T15:45:52Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/409", "html_url": "https://github.com/DataDog/glommio/pull/409", "diff_url": "https://github.com/DataDog/glommio/pull/409.diff", "patch_url": "https://github.com/DataDog/glommio/pull/409.patch", "merged_at": "2021-09-13T15:45:52Z"}, "body": "### What does this PR do?\r\n\r\nTime flies, we ended up skipping 1.54 this time.\r\n\r\nOn a side node, we need to be more careful because some code was not\r\npassing Clippy even in 1.53. We seem to have an issue whereby\r\ncontributors need to have a CircleCI account for it to detect their PR\r\nand run their code.\r\n\r\nThis is problematic, and we should find a solution, otherwise we can\r\nexcept more broken/unformatted/undocumented code to end up being merged.\r\n\r\nCode that doesn't pass clippy isn't the end of the world as I can fix it\r\nlater on. Undocumented code though, that's another story!\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/409/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/408", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/408/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/408/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/408/events", "html_url": "https://github.com/DataDog/glommio/pull/408", "id": 994359807, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMyMzA5OTg3", "number": 408, "title": "do not reallocate memory when processing shared channels", "user": {"login": "HippoBaro", "id": 6069928, "node_id": "MDQ6VXNlcjYwNjk5Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6069928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HippoBaro", "html_url": "https://github.com/HippoBaro", "followers_url": "https://api.github.com/users/HippoBaro/followers", "following_url": "https://api.github.com/users/HippoBaro/following{/other_user}", "gists_url": "https://api.github.com/users/HippoBaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/HippoBaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HippoBaro/subscriptions", "organizations_url": "https://api.github.com/users/HippoBaro/orgs", "repos_url": "https://api.github.com/users/HippoBaro/repos", "events_url": "https://api.github.com/users/HippoBaro/events{/privacy}", "received_events_url": "https://api.github.com/users/HippoBaro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-13T01:40:37Z", "updated_at": "2021-09-13T16:11:47Z", "closed_at": "2021-09-13T15:46:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/408", "html_url": "https://github.com/DataDog/glommio/pull/408", "diff_url": "https://github.com/DataDog/glommio/pull/408.diff", "patch_url": "https://github.com/DataDog/glommio/pull/408.patch", "merged_at": "2021-09-13T15:46:47Z"}, "body": "### What does this PR do?\r\n\r\nThe implementation used to iterate over the tree of wakers and would\r\nrecreate a new tree with the remaining ones. This is not efficient as it\r\nleads to a high number of allocations. Instead, iterate over the\r\nexisting tree and reuse the memory in place.\r\n\r\nAdditionally:\r\n* use the same tree to store wakers and checker functions to reduce\r\nthe number of lookups and simplify the lifecycle of both;\r\n* use a `SmallVec` to store wakers and optimize for the case\r\nwhere a single waker is consuming the shared channel.\r\n\r\nI added some additional benchmarks to exercise this code path. This\r\nis a small but measurable improvement, especially in the many-to-many\r\nbenchmark (which is really meant to be worst-case). See below.\r\n\r\nBefore:\r\n```\r\ncost of mesh message shared channel: 21.48\u00b5s, peers 8, capacity 1024\r\ncost of mesh message shared channel: 32.648\u00b5s, peers 8, capacity 1\r\n```\r\n\r\nAfter:\r\n```\r\ncost of mesh message shared channel: 20.744\u00b5s, peers 8, capacity 1024\r\ncost of mesh message shared channel: 25.872\u00b5s, peers 8, capacity 1\r\n```\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/408/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/407", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/407/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/407/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/407/events", "html_url": "https://github.com/DataDog/glommio/pull/407", "id": 992766171, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMxMDU3MDgz", "number": 407, "title": "remove alpha wording from Readme.", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-09-10T00:23:22Z", "updated_at": "2022-10-17T18:35:32Z", "closed_at": "2021-09-11T19:17:38Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/407", "html_url": "https://github.com/DataDog/glommio/pull/407", "diff_url": "https://github.com/DataDog/glommio/pull/407.diff", "patch_url": "https://github.com/DataDog/glommio/pull/407.patch", "merged_at": "2021-09-11T19:17:38Z"}, "body": "We are getting very close to a point in which I am comfortable moving\r\nGlommio out of alpha.\r\n\r\nIn particular, the limitations mentioned are either things that we fixed\r\nalready (NVMe only, lack of async truncate) or we are unlikely to anyway\r\n(like a memory allocator, which should frankly be a separate crate) and\r\nI/O scheduler (we have something basic now for I/O dedup, but it is\r\nunclear we need more than that).\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/407/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/407/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/406", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/406/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/406/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/406/events", "html_url": "https://github.com/DataDog/glommio/pull/406", "id": 990208042, "node_id": "MDExOlB1bGxSZXF1ZXN0NzI4ODMxMTg0", "number": 406, "title": "Run right away", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-07T17:41:11Z", "updated_at": "2021-09-09T22:41:09Z", "closed_at": "2021-09-09T22:41:05Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/406", "html_url": "https://github.com/DataDog/glommio/pull/406", "diff_url": "https://github.com/DataDog/glommio/pull/406.diff", "patch_url": "https://github.com/DataDog/glommio/pull/406.patch", "merged_at": "2021-09-09T22:41:05Z"}, "body": "    try to run tasks right away\r\n\r\n    The current behavior is that, when we create a task, we move it to the\r\n    back of a queue. However, a better behavior is to try to execute it\r\n    right away. Especially for short lived tasks, that means that we don't\r\n    need to go back to the queue at all, which should yield better\r\n    performance.\r\n\r\n    In the task switching microbenchmark, performance of spawning tasks\r\n    almost doubles with this change.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/406/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/406/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/405", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/405/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/405/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/405/events", "html_url": "https://github.com/DataDog/glommio/pull/405", "id": 989890950, "node_id": "MDExOlB1bGxSZXF1ZXN0NzI4NTYzMjg0", "number": 405, "title": "Remove unnecessary Arc", "user": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-07T11:37:56Z", "updated_at": "2021-09-09T09:55:59Z", "closed_at": "2021-09-07T13:50:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/405", "html_url": "https://github.com/DataDog/glommio/pull/405", "diff_url": "https://github.com/DataDog/glommio/pull/405.diff", "patch_url": "https://github.com/DataDog/glommio/pull/405.patch", "merged_at": "2021-09-07T13:50:44Z"}, "body": "### What does this PR do?\r\n\r\nRemove `Arc` on `Arc<AtomicUsize>`.\r\n\r\n### Motivation\r\n\r\n`Arc` is unnecessary, as `memory` is not shared outside of `SleepNotifier`.\r\n\r\n### Related issues\r\n\r\nN/A\r\n\r\n### Additional Notes\r\n\r\nN/A\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/405/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/404", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/404/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/404/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/404/events", "html_url": "https://github.com/DataDog/glommio/pull/404", "id": 989001848, "node_id": "MDExOlB1bGxSZXF1ZXN0NzI3ODEzODUy", "number": 404, "title": "Fix task memory leak", "user": {"login": "thirstycrow", "id": 1327305, "node_id": "MDQ6VXNlcjEzMjczMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thirstycrow", "html_url": "https://github.com/thirstycrow", "followers_url": "https://api.github.com/users/thirstycrow/followers", "following_url": "https://api.github.com/users/thirstycrow/following{/other_user}", "gists_url": "https://api.github.com/users/thirstycrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/thirstycrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thirstycrow/subscriptions", "organizations_url": "https://api.github.com/users/thirstycrow/orgs", "repos_url": "https://api.github.com/users/thirstycrow/repos", "events_url": "https://api.github.com/users/thirstycrow/events{/privacy}", "received_events_url": "https://api.github.com/users/thirstycrow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-06T10:03:55Z", "updated_at": "2021-09-09T04:42:04Z", "closed_at": "2021-09-08T14:22:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/404", "html_url": "https://github.com/DataDog/glommio/pull/404", "diff_url": "https://github.com/DataDog/glommio/pull/404.diff", "patch_url": "https://github.com/DataDog/glommio/pull/404.patch", "merged_at": "2021-09-08T14:22:26Z"}, "body": "Three issues that prevent completed tasks from destroy are fixed:\r\n- The ref count was initialized to 1, incremented on schedule, and decremented after run, so it will never going to be 0\r\n- ~~The ref count could be updated on a foreign executor, so the relax ordering is not enough~~\r\n- There's a chance that a foreign waker is dropped when the task is already complete. An additional foreign wake is necessary in this case.\r\n\r\nRelated issue: #401 ", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/404/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/404/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/403", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/403/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/403/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/403/events", "html_url": "https://github.com/DataDog/glommio/pull/403", "id": 984035762, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIzNTIwMTQy", "number": 403, "title": "Implement Clone for Placement.", "user": {"login": "davidblewett", "id": 141716, "node_id": "MDQ6VXNlcjE0MTcxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/141716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidblewett", "html_url": "https://github.com/davidblewett", "followers_url": "https://api.github.com/users/davidblewett/followers", "following_url": "https://api.github.com/users/davidblewett/following{/other_user}", "gists_url": "https://api.github.com/users/davidblewett/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidblewett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidblewett/subscriptions", "organizations_url": "https://api.github.com/users/davidblewett/orgs", "repos_url": "https://api.github.com/users/davidblewett/repos", "events_url": "https://api.github.com/users/davidblewett/events{/privacy}", "received_events_url": "https://api.github.com/users/davidblewett/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-31T16:07:26Z", "updated_at": "2021-08-31T18:35:13Z", "closed_at": "2021-08-31T18:35:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/403", "html_url": "https://github.com/DataDog/glommio/pull/403", "diff_url": "https://github.com/DataDog/glommio/pull/403.diff", "patch_url": "https://github.com/DataDog/glommio/pull/403.patch", "merged_at": "2021-08-31T18:35:13Z"}, "body": "### What does this PR do?\r\n\r\nThis PR implements the Clone trait for `glommio::Placement`. \r\n\r\n### Motivation\r\n\r\nThe impetus for this was passing a `fut_gen` to `glommio::LocalExecutorPoolBuilder::method.on_all_shards` that included a `Placement`. Since `on_all_shards` requires that the `fut_gen` be clonable, I had to go through hoops.\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[x] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[x] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/403/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/403/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/400", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/400/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/400/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/400/events", "html_url": "https://github.com/DataDog/glommio/pull/400", "id": 981838518, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIxNzg4ODM4", "number": 400, "title": "Fix RwLock doesn't work with multiple writers", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-08-28T13:46:19Z", "updated_at": "2021-08-28T16:24:31Z", "closed_at": "2021-08-28T16:24:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/400", "html_url": "https://github.com/DataDog/glommio/pull/400", "diff_url": "https://github.com/DataDog/glommio/pull/400.diff", "patch_url": "https://github.com/DataDog/glommio/pull/400.patch", "merged_at": "2021-08-28T16:24:31Z"}, "body": "### What does this PR do?\r\n\r\nFix the `RwLock` that will panic when multiple writers want to get the write guard. \r\n\r\nIt only checks the number of readers and will grant more than one write guard, which leads to `RefCell` panic due to two mutable borrows.\r\n\r\n### Motivation\r\nN/A\r\n\r\n### Related issues\r\nN/A\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n- [x] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/400/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/400/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/399", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/399/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/399/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/399/events", "html_url": "https://github.com/DataDog/glommio/pull/399", "id": 981528904, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIxNTU5OTY3", "number": 399, "title": "make sure cpu placement works in kernels with no numa support", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-27T19:19:44Z", "updated_at": "2021-08-30T17:01:35Z", "closed_at": "2021-08-30T17:01:35Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/399", "html_url": "https://github.com/DataDog/glommio/pull/399", "diff_url": "https://github.com/DataDog/glommio/pull/399.diff", "patch_url": "https://github.com/DataDog/glommio/pull/399.patch", "merged_at": "2021-08-30T17:01:35Z"}, "body": "That seems to be the case for docker-on-mac.\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/399/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/398", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/398/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/398/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/398/events", "html_url": "https://github.com/DataDog/glommio/pull/398", "id": 970585770, "node_id": "MDExOlB1bGxSZXF1ZXN0NzEyNTE3OTU4", "number": 398, "title": "Execute some reminescent syscalls in a thread", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-13T17:19:39Z", "updated_at": "2021-08-13T18:27:52Z", "closed_at": "2021-08-13T18:27:52Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/398", "html_url": "https://github.com/DataDog/glommio/pull/398", "diff_url": "https://github.com/DataDog/glommio/pull/398.diff", "patch_url": "https://github.com/DataDog/glommio/pull/398.patch", "merged_at": "2021-08-13T18:27:52Z"}, "body": "While io_uring has gained support for some of them already, that support\r\nonly exists in much newer kernels. On 5.8 they are absent and given how\r\npervasive 5.8 is, it is good to have a fallback.\r\n\r\nImplementing the io_uring opcodes is welcome and should be easy. The\r\nwhole fallback mechanism is implemented on top of the `Source`\r\nabstraction, so we just have to add a runtime switch as a result of\r\na probe for those opcodes.\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/398/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/397", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/397/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/397/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/397/events", "html_url": "https://github.com/DataDog/glommio/pull/397", "id": 969364815, "node_id": "MDExOlB1bGxSZXF1ZXN0NzExNDEzNjUx", "number": 397, "title": "fix eventfd logic and prevent multiple registrations", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-12T18:47:16Z", "updated_at": "2021-08-12T18:57:01Z", "closed_at": "2021-08-12T18:56:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/397", "html_url": "https://github.com/DataDog/glommio/pull/397", "diff_url": "https://github.com/DataDog/glommio/pull/397.diff", "patch_url": "https://github.com/DataDog/glommio/pull/397.patch", "merged_at": "2021-08-12T18:56:58Z"}, "body": "Commit 8874895 introduced a regression that manifests as a SIGSEGV.\r\nThe reason for that is that the patch introduced Source reuse, in order\r\nto implement read coalescing. Calls to take_result() were transformed into\r\nresult(), leaving the original Result in place for other consumers to\r\npeek.\r\n\r\nThis is all fine for user-visible Sources, but our eventfd manipulation\r\nis a bit more intricate, and relied on the presence or absence of a\r\nResult to decide whether or not to install a new eventfd.\r\n\r\nAs a result of the change, every time the reactor is invoked after the\r\neventfd fired for the first time, a new eventfd source is registered,\r\nwhich is wrong.\r\n\r\nBut what makes this problem really nasty is the fact that the kernel\r\nalready knows about the previous address. When we register a new Source,\r\nwe also add a new buffer. The kernel, though, will write to the previous\r\nbuffer which was already freed when we installed the new one.\r\n\r\nAside from fixing the issue, this patch also does the following:\r\n- adds more comments about eventfd, so people can more easily follow\r\n  what's going on\r\n- adds an assert on fill_sqe's read. I can't imagine anyone outside\r\n  of eventfd having a legitimate excuse to reuse a Source like this.\r\n- Adds a new buffer type, special for Eventfd. Not only this is good\r\n  defensively, because even upon multiple registration the kernel would\r\n  keep writing always to the same location, it also saves an allocation.\r\n\r\nFixes #396\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/397/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/395", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/395/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/395/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/395/events", "html_url": "https://github.com/DataDog/glommio/pull/395", "id": 960805896, "node_id": "MDExOlB1bGxSZXF1ZXN0NzAzNzkyMDc0", "number": 395, "title": "make a stronger distinction between add_waiter use cases", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-04T17:55:56Z", "updated_at": "2021-08-10T13:54:43Z", "closed_at": "2021-08-09T21:09:11Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/395", "html_url": "https://github.com/DataDog/glommio/pull/395", "diff_url": "https://github.com/DataDog/glommio/pull/395.diff", "patch_url": "https://github.com/DataDog/glommio/pull/395.patch", "merged_at": "2021-08-09T21:09:11Z"}, "body": "It used to be the case where we would assume there was a single waiter\r\nper source, but in the read_many work we moved that to many-waiters.\r\n\r\nThe function that manipulates the wakers was kept the same, so whether\r\nor not we had many wakers was entirely up to the user.\r\n\r\nHowever I just found a use case (issue #391) where there are many\r\nwaiters added to a source that only expects a single waiter. That's\r\na use case in which we reuse a source, and we keep calling the poll\r\nfunction into a stream even though the stream is never ready.\r\n\r\nIt's not clear to me (yet) why this is the case. It is certainly\r\nsurprising. While I want to get to the bottom of this, it is not a bad\r\nidea to require the user to ask for their intentions explicitly.\r\n\r\nIn the future, if we can indeed guarantee that a function with a single\r\nwaiter should be empty we can use this opportunity for a stronger\r\nassert. For now, this reverts the old behavior in the original users\r\nand at least gets rid of this particular regression\r\n\r\nFixes #391\r\n\r\n### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/395/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/394", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/394/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/394/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/394/events", "html_url": "https://github.com/DataDog/glommio/pull/394", "id": 959570842, "node_id": "MDExOlB1bGxSZXF1ZXN0NzAyNjcyNTI0", "number": 394, "title": "Fixed issue with scaling hyper example", "user": {"login": "threeseed", "id": 657041, "node_id": "MDQ6VXNlcjY1NzA0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/657041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/threeseed", "html_url": "https://github.com/threeseed", "followers_url": "https://api.github.com/users/threeseed/followers", "following_url": "https://api.github.com/users/threeseed/following{/other_user}", "gists_url": "https://api.github.com/users/threeseed/gists{/gist_id}", "starred_url": "https://api.github.com/users/threeseed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/threeseed/subscriptions", "organizations_url": "https://api.github.com/users/threeseed/orgs", "repos_url": "https://api.github.com/users/threeseed/repos", "events_url": "https://api.github.com/users/threeseed/events{/privacy}", "received_events_url": "https://api.github.com/users/threeseed/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-03T22:23:46Z", "updated_at": "2021-08-04T17:19:36Z", "closed_at": "2021-08-04T17:19:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/394", "html_url": "https://github.com/DataDog/glommio/pull/394", "diff_url": "https://github.com/DataDog/glommio/pull/394.diff", "patch_url": "https://github.com/DataDog/glommio/pull/394.patch", "merged_at": "2021-08-04T17:19:36Z"}, "body": "See https://github.com/DataDog/glommio/pull/388 for more information.", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/394/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/393", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/393/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/393/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/393/events", "html_url": "https://github.com/DataDog/glommio/pull/393", "id": 956369416, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk5OTc2ODUy", "number": 393, "title": "Upgraded Nix to 0.22.0", "user": {"login": "threeseed", "id": 657041, "node_id": "MDQ6VXNlcjY1NzA0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/657041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/threeseed", "html_url": "https://github.com/threeseed", "followers_url": "https://api.github.com/users/threeseed/followers", "following_url": "https://api.github.com/users/threeseed/following{/other_user}", "gists_url": "https://api.github.com/users/threeseed/gists{/gist_id}", "starred_url": "https://api.github.com/users/threeseed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/threeseed/subscriptions", "organizations_url": "https://api.github.com/users/threeseed/orgs", "repos_url": "https://api.github.com/users/threeseed/repos", "events_url": "https://api.github.com/users/threeseed/events{/privacy}", "received_events_url": "https://api.github.com/users/threeseed/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-07-30T03:33:26Z", "updated_at": "2021-08-03T13:11:40Z", "closed_at": "2021-08-03T13:11:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/393", "html_url": "https://github.com/DataDog/glommio/pull/393", "diff_url": "https://github.com/DataDog/glommio/pull/393.diff", "patch_url": "https://github.com/DataDog/glommio/pull/393.patch", "merged_at": "2021-08-03T13:11:36Z"}, "body": "### What does this PR do?\r\n\r\nUpgrades Nix to 0.22.0\r\n\r\n### Motivation\r\n\r\nNix is a widely used crate and so using Glommio which relies on an old version (0.19) can cause conflicts.\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/393/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/392", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/392/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/392/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/392/events", "html_url": "https://github.com/DataDog/glommio/pull/392", "id": 955694576, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk5NDA2Mjg1", "number": 392, "title": "Update pin-project-lite to 0.2", "user": {"login": "taiki-e", "id": 43724913, "node_id": "MDQ6VXNlcjQzNzI0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/43724913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taiki-e", "html_url": "https://github.com/taiki-e", "followers_url": "https://api.github.com/users/taiki-e/followers", "following_url": "https://api.github.com/users/taiki-e/following{/other_user}", "gists_url": "https://api.github.com/users/taiki-e/gists{/gist_id}", "starred_url": "https://api.github.com/users/taiki-e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taiki-e/subscriptions", "organizations_url": "https://api.github.com/users/taiki-e/orgs", "repos_url": "https://api.github.com/users/taiki-e/repos", "events_url": "https://api.github.com/users/taiki-e/events{/privacy}", "received_events_url": "https://api.github.com/users/taiki-e/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-29T10:26:37Z", "updated_at": "2021-08-02T18:09:31Z", "closed_at": "2021-08-02T18:08:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/392", "html_url": "https://github.com/DataDog/glommio/pull/392", "diff_url": "https://github.com/DataDog/glommio/pull/392.diff", "patch_url": "https://github.com/DataDog/glommio/pull/392.patch", "merged_at": "2021-08-02T18:08:44Z"}, "body": "### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/392/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/385", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/385/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/385/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/385/events", "html_url": "https://github.com/DataDog/glommio/pull/385", "id": 945467684, "node_id": "MDExOlB1bGxSZXF1ZXN0NjkwNzkzOTkz", "number": 385, "title": "bump version", "user": {"login": "glommer", "id": 331197, "node_id": "MDQ6VXNlcjMzMTE5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/331197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glommer", "html_url": "https://github.com/glommer", "followers_url": "https://api.github.com/users/glommer/followers", "following_url": "https://api.github.com/users/glommer/following{/other_user}", "gists_url": "https://api.github.com/users/glommer/gists{/gist_id}", "starred_url": "https://api.github.com/users/glommer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glommer/subscriptions", "organizations_url": "https://api.github.com/users/glommer/orgs", "repos_url": "https://api.github.com/users/glommer/repos", "events_url": "https://api.github.com/users/glommer/events{/privacy}", "received_events_url": "https://api.github.com/users/glommer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-15T14:48:46Z", "updated_at": "2021-07-15T15:37:34Z", "closed_at": "2021-07-15T15:37:30Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/385", "html_url": "https://github.com/DataDog/glommio/pull/385", "diff_url": "https://github.com/DataDog/glommio/pull/385.diff", "patch_url": "https://github.com/DataDog/glommio/pull/385.patch", "merged_at": "2021-07-15T15:37:30Z"}, "body": "### What does this PR do?\r\n\r\nA brief description of the change being made with this pull request.\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nA list of issues either fixed, containing architectural discussions, otherwise relevant\r\nfor this Pull Request.\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/385/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/DataDog/glommio/issues/384", "repository_url": "https://api.github.com/repos/DataDog/glommio", "labels_url": "https://api.github.com/repos/DataDog/glommio/issues/384/labels{/name}", "comments_url": "https://api.github.com/repos/DataDog/glommio/issues/384/comments", "events_url": "https://api.github.com/repos/DataDog/glommio/issues/384/events", "html_url": "https://github.com/DataDog/glommio/pull/384", "id": 933783185, "node_id": "MDExOlB1bGxSZXF1ZXN0NjgwOTM5OTg4", "number": 384, "title": "add reproducers of task refcount underflow corner cases as tests", "user": {"login": "LizardWizzard", "id": 19991702, "node_id": "MDQ6VXNlcjE5OTkxNzAy", "avatar_url": "https://avatars.githubusercontent.com/u/19991702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LizardWizzard", "html_url": "https://github.com/LizardWizzard", "followers_url": "https://api.github.com/users/LizardWizzard/followers", "following_url": "https://api.github.com/users/LizardWizzard/following{/other_user}", "gists_url": "https://api.github.com/users/LizardWizzard/gists{/gist_id}", "starred_url": "https://api.github.com/users/LizardWizzard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LizardWizzard/subscriptions", "organizations_url": "https://api.github.com/users/LizardWizzard/orgs", "repos_url": "https://api.github.com/users/LizardWizzard/repos", "events_url": "https://api.github.com/users/LizardWizzard/events{/privacy}", "received_events_url": "https://api.github.com/users/LizardWizzard/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-30T14:40:33Z", "updated_at": "2021-08-08T10:34:25Z", "closed_at": "2021-06-30T15:24:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/DataDog/glommio/pulls/384", "html_url": "https://github.com/DataDog/glommio/pull/384", "diff_url": "https://github.com/DataDog/glommio/pull/384.diff", "patch_url": "https://github.com/DataDog/glommio/pull/384.patch", "merged_at": "2021-06-30T15:24:38Z"}, "body": "### What does this PR do?\r\n\r\nAdds reproducers of task refcount underflow corner cases caused by usage of wake_by_ref as tests, also added equivalent tests with usage of wake instead of wake_by_ref for better testing of solution proposed by @glommer\r\n\r\n### Motivation\r\n\r\nWhat inspired you to submit this pull request?\r\n\r\n### Related issues\r\n\r\nhttps://github.com/DataDog/glommio/issues/379\r\n\r\n### Additional Notes\r\n\r\nAnything else we should know when reviewing?\r\n\r\n### Checklist\r\n\r\n[] I have added unit tests to the code I am submitting\r\n[] My unit tests cover both failure and success scenarios\r\n[] If applicable, I have discussed my architecture\r\n", "reactions": {"url": "https://api.github.com/repos/DataDog/glommio/issues/384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/DataDog/glommio/issues/384/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]