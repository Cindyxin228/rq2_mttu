[{"url": "https://api.github.com/repos/informalsystems/modelator/issues/104", "repository_url": "https://api.github.com/repos/informalsystems/modelator", "labels_url": "https://api.github.com/repos/informalsystems/modelator/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/informalsystems/modelator/issues/104/comments", "events_url": "https://api.github.com/repos/informalsystems/modelator/issues/104/events", "html_url": "https://github.com/informalsystems/modelator/pull/104", "id": 993172524, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMxMzk5NTYz", "number": 104, "title": "Faster CI using `rust-cache` and build variables", "user": {"login": "rnbguy", "id": 3789449, "node_id": "MDQ6VXNlcjM3ODk0NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3789449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rnbguy", "html_url": "https://github.com/rnbguy", "followers_url": "https://api.github.com/users/rnbguy/followers", "following_url": "https://api.github.com/users/rnbguy/following{/other_user}", "gists_url": "https://api.github.com/users/rnbguy/gists{/gist_id}", "starred_url": "https://api.github.com/users/rnbguy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rnbguy/subscriptions", "organizations_url": "https://api.github.com/users/rnbguy/orgs", "repos_url": "https://api.github.com/users/rnbguy/repos", "events_url": "https://api.github.com/users/rnbguy/events{/privacy}", "received_events_url": "https://api.github.com/users/rnbguy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-10T12:07:17Z", "updated_at": "2021-12-17T15:32:11Z", "closed_at": "2021-09-10T13:13:46Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/informalsystems/modelator/pulls/104", "html_url": "https://github.com/informalsystems/modelator/pull/104", "diff_url": "https://github.com/informalsystems/modelator/pull/104.diff", "patch_url": "https://github.com/informalsystems/modelator/pull/104.patch", "merged_at": "2021-09-10T13:13:46Z"}, "body": "responding to #102", "reactions": {"url": "https://api.github.com/repos/informalsystems/modelator/issues/104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/informalsystems/modelator/issues/104/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/informalsystems/modelator/issues/103", "repository_url": "https://api.github.com/repos/informalsystems/modelator", "labels_url": "https://api.github.com/repos/informalsystems/modelator/issues/103/labels{/name}", "comments_url": "https://api.github.com/repos/informalsystems/modelator/issues/103/comments", "events_url": "https://api.github.com/repos/informalsystems/modelator/issues/103/events", "html_url": "https://github.com/informalsystems/modelator/pull/103", "id": 993164404, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMxMzkyNjU5", "number": 103, "title": "Removes TempDir::into_path usage", "user": {"login": "danwt", "id": 30197399, "node_id": "MDQ6VXNlcjMwMTk3Mzk5", "avatar_url": "https://avatars.githubusercontent.com/u/30197399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danwt", "html_url": "https://github.com/danwt", "followers_url": "https://api.github.com/users/danwt/followers", "following_url": "https://api.github.com/users/danwt/following{/other_user}", "gists_url": "https://api.github.com/users/danwt/gists{/gist_id}", "starred_url": "https://api.github.com/users/danwt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danwt/subscriptions", "organizations_url": "https://api.github.com/users/danwt/orgs", "repos_url": "https://api.github.com/users/danwt/repos", "events_url": "https://api.github.com/users/danwt/events{/privacy}", "received_events_url": "https://api.github.com/users/danwt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-10T11:56:26Z", "updated_at": "2021-09-10T14:18:42Z", "closed_at": "2021-09-10T13:15:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/informalsystems/modelator/pulls/103", "html_url": "https://github.com/informalsystems/modelator/pull/103", "diff_url": "https://github.com/informalsystems/modelator/pull/103.diff", "patch_url": "https://github.com/informalsystems/modelator/pull/103.patch", "merged_at": "2021-09-10T13:15:42Z"}, "body": "This replaces one use of `TempDir::into_path` with `TempDir::path`. Using `into_path` is wrong because\r\n\r\n> Unwraps the Path contained in the TempDir and returns it. This destroys the TempDir without deleting the directory represented by the returned Path.\r\n\r\n[link](https://docs.rs/tempdir/0.3.7/tempdir/struct.TempDir.html#method.into_path)", "reactions": {"url": "https://api.github.com/repos/informalsystems/modelator/issues/103/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/informalsystems/modelator/issues/103/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/informalsystems/modelator/issues/100", "repository_url": "https://api.github.com/repos/informalsystems/modelator", "labels_url": "https://api.github.com/repos/informalsystems/modelator/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/informalsystems/modelator/issues/100/comments", "events_url": "https://api.github.com/repos/informalsystems/modelator/issues/100/events", "html_url": "https://github.com/informalsystems/modelator/pull/100", "id": 993115281, "node_id": "MDExOlB1bGxSZXF1ZXN0NzMxMzUwMzE2", "number": 100, "title": "Adds support for user defined View operators when using Apalache", "user": {"login": "danwt", "id": 30197399, "node_id": "MDQ6VXNlcjMwMTk3Mzk5", "avatar_url": "https://avatars.githubusercontent.com/u/30197399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danwt", "html_url": "https://github.com/danwt", "followers_url": "https://api.github.com/users/danwt/followers", "following_url": "https://api.github.com/users/danwt/following{/other_user}", "gists_url": "https://api.github.com/users/danwt/gists{/gist_id}", "starred_url": "https://api.github.com/users/danwt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danwt/subscriptions", "organizations_url": "https://api.github.com/users/danwt/orgs", "repos_url": "https://api.github.com/users/danwt/repos", "events_url": "https://api.github.com/users/danwt/events{/privacy}", "received_events_url": "https://api.github.com/users/danwt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-10T10:45:34Z", "updated_at": "2021-10-08T09:57:06Z", "closed_at": "2021-09-10T14:22:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/informalsystems/modelator/pulls/100", "html_url": "https://github.com/informalsystems/modelator/pull/100", "diff_url": "https://github.com/informalsystems/modelator/pull/100.diff", "patch_url": "https://github.com/informalsystems/modelator/pull/100.patch", "merged_at": "2021-09-10T14:22:46Z"}, "body": "_Will close  Implement View for Apalache multiple tests #98_\r\n\r\n\r\nAutomatically detects View operators in the .tla module that is passed as the target of the `trace` command.\r\n\r\nThe rules are as follow:\r\n```\r\nfor each test named <test_name> in module:\r\n  if an operator exists named <test_name>View:\r\n    use it for the test <test_name>\r\n  else if an operator exists named View:\r\n    use it for the test <test_name>\r\n```\r\n\r\nThe implementation is done by\r\n\r\n1. in `tla::generate_test` (this produces the module file with the negated invariant) also add a view `ViewForTestNeg==<UserDefinedViewName>` if found.\r\n2. Use `ViewForTestNeg` as a view in `apalache::test` if one is found.\r\n\r\nThis design removes data data dependencies between the tla and apalache modules but may not be as efficient as other solutions (have to do a little bit more parsing).\r\n\r\n```\r\n------------------------------ MODULE mainTests --------------------------------\r\n\r\nEXTENDS main\r\n\r\n\\* @type: () => <<Int>>;\r\nView == <<foo>>\r\n\r\n\\* ~~~~~~~~~\r\n\r\nVar0Test == var = 6\r\n\r\n\\* @type: () => <<Int>>;\r\nVar0TestView == <<foo>>\r\n\r\n\\* ~~~~~~~~~\r\n\r\nVar1Test == var = 7\r\n\r\n\\* @type: () => <<Int>>;\r\nVar1TestView == <<foo>>\r\n\r\n\\* ~~~~~~~~~\r\n\r\nVar2Test == var = 8\r\n\r\n\\* @type: () => <<Int>>;\r\nVar2TestView == <<foo>>\r\n\r\n===============================================================================\r\n```", "reactions": {"url": "https://api.github.com/repos/informalsystems/modelator/issues/100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/informalsystems/modelator/issues/100/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/informalsystems/modelator/issues/97", "repository_url": "https://api.github.com/repos/informalsystems/modelator", "labels_url": "https://api.github.com/repos/informalsystems/modelator/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/informalsystems/modelator/issues/97/comments", "events_url": "https://api.github.com/repos/informalsystems/modelator/issues/97/events", "html_url": "https://github.com/informalsystems/modelator/pull/97", "id": 991265600, "node_id": "MDExOlB1bGxSZXF1ZXN0NzI5NzU0OTI4", "number": 97, "title": "Get multiple traces from a single test using Apalache and TLC", "user": {"login": "danwt", "id": 30197399, "node_id": "MDQ6VXNlcjMwMTk3Mzk5", "avatar_url": "https://avatars.githubusercontent.com/u/30197399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danwt", "html_url": "https://github.com/danwt", "followers_url": "https://api.github.com/users/danwt/followers", "following_url": "https://api.github.com/users/danwt/following{/other_user}", "gists_url": "https://api.github.com/users/danwt/gists{/gist_id}", "starred_url": "https://api.github.com/users/danwt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danwt/subscriptions", "organizations_url": "https://api.github.com/users/danwt/orgs", "repos_url": "https://api.github.com/users/danwt/repos", "events_url": "https://api.github.com/users/danwt/events{/privacy}", "received_events_url": "https://api.github.com/users/danwt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-08T15:28:08Z", "updated_at": "2021-09-09T20:42:24Z", "closed_at": "2021-09-09T12:31:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/informalsystems/modelator/pulls/97", "html_url": "https://github.com/informalsystems/modelator/pull/97", "diff_url": "https://github.com/informalsystems/modelator/pull/97.diff", "patch_url": "https://github.com/informalsystems/modelator/pull/97.patch", "merged_at": "2021-09-09T12:31:58Z"}, "body": "## Issues\r\n\r\n-  Generate multiple tests using Apalache #89 \r\n-  Generate multiple tests using TLC #32 \r\n\r\n## Tasks\r\n\r\n- [x] Use `--max-error`to generate multiple counterexamples with Apalache\r\n- [x] Use `-continue` to generate multiple counterexamples with tlc\r\n- [x] Add `--num-traces` arg to CLI\r\n\r\n## These will come in a later PR\r\n\r\n- [ ] Do a default scan for a `View` operator for Apalache use\r\n- [ ] Provide option to provide a `View` operator on the CLI\r\n- [ ] Implement timeouts and child-process termination\r\n\r\n## There is a new struct returned by `lib::{run_tla_steps,run_tla_events}`\r\n\r\nIt is used to provide a friendlier interface to the results, as they are now more complicated (as each test can have multiple counterexamples). Feedback on this would be appreciated! Right now it gets the job done but may not be ideal from an API perspective.\r\n\r\n```\r\npub struct TestReport {\r\n    test_name_to_trace_execution_result: BTreeMap<String, Vec<Result<(), TestError>>>,\r\n}\r\n\r\nimpl TestReport {\r\n    /// Returns true iff no test failed\r\n    pub fn is_ok(&self) -> bool {\r\n        !self\r\n            .test_name_to_trace_execution_result\r\n            .values()\r\n            .flatten()\r\n            .any(Result::is_err)\r\n    }\r\n\r\n    /// Get the vector of results from running counterexample(s) for a single test\r\n    pub fn result_of_test(&self, name: &str) -> Option<&Vec<Result<(), TestError>>> {\r\n        self.test_name_to_trace_execution_result.get(name)\r\n    }\r\n\r\n    /// Returns the vector containing the results for each test\r\n    pub fn all(\r\n        &self,\r\n    ) -> std::collections::btree_map::Values<\r\n        '_,\r\n        std::string::String,\r\n        Vec<Result<(), error::TestError>>,\r\n    > {\r\n        self.test_name_to_trace_execution_result.values()\r\n    }\r\n\r\n    /// Returns the concatenation of the vectors containing the results for each test\r\n    pub fn flat(&self) -> Vec<&Result<(), TestError>> {\r\n        self.all().flatten().collect()\r\n    }\r\n}\r\n```\r\n\r\nNote that: with this PR you must be careful about what specs you choose to test with TLC, as unbounded state spaces may lead to non-terminating execution if using `-continue`.", "reactions": {"url": "https://api.github.com/repos/informalsystems/modelator/issues/97/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/informalsystems/modelator/issues/97/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]