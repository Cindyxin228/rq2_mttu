[{"url": "https://api.github.com/repos/apache/datafusion/issues/7521", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7521/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7521/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7521/events", "html_url": "https://github.com/apache/datafusion/pull/7521", "id": 1889645468, "node_id": "PR_kwDOFWSkxs5Z-i3u", "number": 7521, "title": "typo: change `delimeter` to `delimiter`", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T04:40:40Z", "updated_at": "2023-09-11T17:36:49Z", "closed_at": "2023-09-11T17:36:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7521", "html_url": "https://github.com/apache/datafusion/pull/7521", "diff_url": "https://github.com/apache/datafusion/pull/7521.diff", "patch_url": "https://github.com/apache/datafusion/pull/7521.patch", "merged_at": "2023-09-11T17:36:49Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nWhile reviewing #7520, I noticed some errors related to the spelling of \"delimiter.\"\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7521/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7519", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7519/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7519/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7519/events", "html_url": "https://github.com/apache/datafusion/pull/7519", "id": 1889271474, "node_id": "PR_kwDOFWSkxs5Z9TVL", "number": 7519, "title": "Simplify ScalarValue::distance (#7517)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-10T18:05:48Z", "updated_at": "2023-09-11T06:34:21Z", "closed_at": "2023-09-11T06:34:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7519", "html_url": "https://github.com/apache/datafusion/pull/7519", "diff_url": "https://github.com/apache/datafusion/pull/7519.diff", "patch_url": "https://github.com/apache/datafusion/pull/7519.patch", "merged_at": "2023-09-11T06:34:20Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #7517\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7519/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7515", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7515/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7515/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7515/events", "html_url": "https://github.com/apache/datafusion/pull/7515", "id": 1888821798, "node_id": "PR_kwDOFWSkxs5Z7-jf", "number": 7515, "title": "Fix some simplification rules for floating-point arithmetic operations", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-09T17:30:12Z", "updated_at": "2023-09-12T13:53:05Z", "closed_at": "2023-09-11T18:03:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7515", "html_url": "https://github.com/apache/datafusion/pull/7515", "diff_url": "https://github.com/apache/datafusion/pull/7515.diff", "patch_url": "https://github.com/apache/datafusion/pull/7515.patch", "merged_at": "2023-09-11T18:03:45Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\nSimilar to #7503. \r\n\r\nBecause of the presence of `NaN`, some simplification rules will no longer be applicable to floating-point types.\r\n\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n\r\n## Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7515/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7514", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7514/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7514/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7514/events", "html_url": "https://github.com/apache/datafusion/pull/7514", "id": 1888710511, "node_id": "PR_kwDOFWSkxs5Z7ot9", "number": 7514, "title": "Remove implicit interval type coercion from ScalarValue comparison", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-09T11:51:16Z", "updated_at": "2023-09-09T19:45:11Z", "closed_at": "2023-09-09T13:39:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7514", "html_url": "https://github.com/apache/datafusion/pull/7514", "diff_url": "https://github.com/apache/datafusion/pull/7514.diff", "patch_url": "https://github.com/apache/datafusion/pull/7514.patch", "merged_at": "2023-09-09T13:39:24Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #7353 \r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nWe have explicit type coercion machinery during plan construction that handles this, doing this implicitly within ScalarValue introduces inconsistency and is unnecessary. I am also not sure the type coercion logic is correct, it is certainly not consistent with the arrow-cast kernel.\r\n\r\nPotentially more critically this definition of PartialEq is inconsistent with the definition of Hash, which could cause some very strange behaviour\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7514/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7512", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7512/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7512/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7512/events", "html_url": "https://github.com/apache/datafusion/pull/7512", "id": 1888496043, "node_id": "PR_kwDOFWSkxs5Z692n", "number": 7512, "title": "Minor: Remove stray comment markings from encoding error message", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-08T23:57:51Z", "updated_at": "2023-09-09T10:50:10Z", "closed_at": "2023-09-09T10:50:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7512", "html_url": "https://github.com/apache/datafusion/pull/7512", "diff_url": "https://github.com/apache/datafusion/pull/7512.diff", "patch_url": "https://github.com/apache/datafusion/pull/7512.patch", "merged_at": "2023-09-09T10:50:09Z"}, "body": "## Which issue does this PR close?\r\n\r\nNone\r\n\r\n## Rationale for this change\r\n\r\nI noticed some stray comment markings (///) in an error message, probably because the message was copied from a comment in the code.\r\n\r\n## What changes are included in this PR?\r\n\r\nRemove the /// markings from the error message.\r\n\r\n## Are these changes tested?\r\n\r\nYes by existing tests\r\n\r\n## Are there any user-facing changes?\r\n\r\nWill no longer see unneeded /// markings in error message.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7512/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7510", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7510/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7510/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7510/events", "html_url": "https://github.com/apache/datafusion/pull/7510", "id": 1888056702, "node_id": "PR_kwDOFWSkxs5Z5ctq", "number": 7510, "title": "Propagate error from spawned task reading spills", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-08T17:20:06Z", "updated_at": "2023-09-09T21:14:45Z", "closed_at": "2023-09-09T21:14:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7510", "html_url": "https://github.com/apache/datafusion/pull/7510", "diff_url": "https://github.com/apache/datafusion/pull/7510.diff", "patch_url": "https://github.com/apache/datafusion/pull/7510.patch", "merged_at": "2023-09-09T21:14:37Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7509.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nAny error happened in the spawned task reading spills cannot propagate out currently. So these errors will be ignored and it doesn't look correct as the sorted result will be incorrect.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nPropagating errors from spawned task reading spills.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7510/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7510/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7508", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7508/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7508/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7508/events", "html_url": "https://github.com/apache/datafusion/pull/7508", "id": 1887720960, "node_id": "PR_kwDOFWSkxs5Z4Tve", "number": 7508, "title": "Prepare 31.0.0 release", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 3007583662, "node_id": "MDU6TGFiZWwzMDA3NTgzNjYy", "url": "https://api.github.com/repos/apache/datafusion/labels/development-process", "name": "development-process", "color": "5544ED", "default": false, "description": "Related to development process of DataFusion"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-08T13:44:06Z", "updated_at": "2023-09-08T15:47:45Z", "closed_at": "2023-09-08T15:47:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7508", "html_url": "https://github.com/apache/datafusion/pull/7508", "diff_url": "https://github.com/apache/datafusion/pull/7508.diff", "patch_url": "https://github.com/apache/datafusion/pull/7508.patch", "merged_at": "2023-09-08T15:47:42Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nScheduled release\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n- Bump version\r\n- [Changelog](https://github.com/andygrove/arrow-datafusion/blob/prep-31/dev/changelog/31.0.0.md)\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7508/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7507", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7507/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7507/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7507/events", "html_url": "https://github.com/apache/datafusion/pull/7507", "id": 1887521157, "node_id": "PR_kwDOFWSkxs5Z3nvP", "number": 7507, "title": "Minor: deprecate ScalarValue::get_datatype()", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-08T11:44:38Z", "updated_at": "2023-09-09T17:03:55Z", "closed_at": "2023-09-09T17:03:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7507", "html_url": "https://github.com/apache/datafusion/pull/7507", "diff_url": "https://github.com/apache/datafusion/pull/7507.diff", "patch_url": "https://github.com/apache/datafusion/pull/7507.patch", "merged_at": "2023-09-09T17:03:55Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7506\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7507/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7505", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7505/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7505/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7505/events", "html_url": "https://github.com/apache/datafusion/pull/7505", "id": 1887128268, "node_id": "PR_kwDOFWSkxs5Z2R-P", "number": 7505, "title": "Minor(proto): Implement `TryFrom<&DFSchema>` for `protobuf::DfSchema`", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-08T07:36:22Z", "updated_at": "2023-09-08T22:24:09Z", "closed_at": "2023-09-08T17:09:18Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7505", "html_url": "https://github.com/apache/datafusion/pull/7505", "diff_url": "https://github.com/apache/datafusion/pull/7505.diff", "patch_url": "https://github.com/apache/datafusion/pull/7505.patch", "merged_at": "2023-09-08T17:09:18Z"}, "body": "## Which issue does this PR close?\r\nN/A\r\n\r\n## Rationale for this change\r\nCurrently, we have only implemented `TryFrom<&DFSchemaRef>` for `protobuf::DfSchema`.\r\nIn the example below, when encoding a `DFSchema`, we have to create an `Arc`, which can be considered wasteful.\r\n```rust\r\nlet dfschema = datafusion::common::DFSchema::empty();\r\nlet arc_dfschema = Arc::new(dfschema);\r\nlet proto_dfschema: datafusion_proto::DfSchema =(&arc_dfschema).try_into().unwrap();\r\n```\r\n\r\nImplementing `TryFrom<&DFSchema>` for `protobuf::DfSchema` helps to avoid this issue, \r\nand then the code is simplified as follows.\r\n```rust\r\nlet dfschema = datafusion::common::DFSchema::empty();\r\nlet proto_dfschema: datafusion_proto::DfSchema =(&dfschema).try_into().unwrap();\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNew API, without breaking changes\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7505/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7505/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7503", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7503/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7503/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7503/events", "html_url": "https://github.com/apache/datafusion/pull/7503", "id": 1886842299, "node_id": "PR_kwDOFWSkxs5Z1UFn", "number": 7503, "title": "fix: inconsistent behaviors when dividing floating numbers by zero", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-08T02:38:55Z", "updated_at": "2023-09-08T22:23:29Z", "closed_at": "2023-09-08T17:16:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7503", "html_url": "https://github.com/apache/datafusion/pull/7503", "diff_url": "https://github.com/apache/datafusion/pull/7503.diff", "patch_url": "https://github.com/apache/datafusion/pull/7503.patch", "merged_at": "2023-09-08T17:16:04Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7502.\r\n\r\n## Rationale for this change\r\n- Disable the DivideZero simplification rule for floating types.  \r\n- And we don\u2019t have enough information to determine the sign of `inf`, so let\u2019s skip optimizing for them.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7503/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7498", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7498/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7498/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7498/events", "html_url": "https://github.com/apache/datafusion/pull/7498", "id": 1886273114, "node_id": "PR_kwDOFWSkxs5ZzYX-", "number": 7498, "title": "Minor: improve error message", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-07T16:57:09Z", "updated_at": "2023-09-07T17:38:40Z", "closed_at": "2023-09-07T17:38:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7498", "html_url": "https://github.com/apache/datafusion/pull/7498", "diff_url": "https://github.com/apache/datafusion/pull/7498.diff", "patch_url": "https://github.com/apache/datafusion/pull/7498.patch", "merged_at": "2023-09-07T17:38:40Z"}, "body": "## Which issue does this PR close?\r\nN/A\r\n## Rationale for this change\r\nImprove error message as suggested by @yjshen on https://github.com/apache/arrow-datafusion/pull/7489#issuecomment-1708912465\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\nInclude `ARROW` in parser error message\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7498/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7496", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7496/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7496/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7496/events", "html_url": "https://github.com/apache/datafusion/pull/7496", "id": 1886185946, "node_id": "PR_kwDOFWSkxs5ZzFJ0", "number": 7496, "title": "fix: incorrect nullability calculation of `InListExpr`", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-07T16:05:40Z", "updated_at": "2023-09-08T14:21:27Z", "closed_at": "2023-09-08T11:00:18Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7496", "html_url": "https://github.com/apache/datafusion/pull/7496", "diff_url": "https://github.com/apache/datafusion/pull/7496.diff", "patch_url": "https://github.com/apache/datafusion/pull/7496.patch", "merged_at": "2023-09-08T11:00:18Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7495\r\n\r\n## Rationale for this change\r\nBoth the base expression and the list expressions should be considered in the nullability calculation.\r\n\r\n\r\n## What changes are included in this PR?\r\n\r\n## Are these changes tested?\r\n\r\nYes\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7496/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7494", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7494/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7494/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7494/events", "html_url": "https://github.com/apache/datafusion/pull/7494", "id": 1886171350, "node_id": "PR_kwDOFWSkxs5ZzCAm", "number": 7494, "title": "`PrimitiveGroupsAccumulator` should propagate timestamp timezone information properly", "user": {"login": "sunchao", "id": 506679, "node_id": "MDQ6VXNlcjUwNjY3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/506679?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sunchao", "html_url": "https://github.com/sunchao", "followers_url": "https://api.github.com/users/sunchao/followers", "following_url": "https://api.github.com/users/sunchao/following{/other_user}", "gists_url": "https://api.github.com/users/sunchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/sunchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sunchao/subscriptions", "organizations_url": "https://api.github.com/users/sunchao/orgs", "repos_url": "https://api.github.com/users/sunchao/repos", "events_url": "https://api.github.com/users/sunchao/events{/privacy}", "received_events_url": "https://api.github.com/users/sunchao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-07T15:55:45Z", "updated_at": "2023-09-07T20:58:32Z", "closed_at": "2023-09-07T20:58:22Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7494", "html_url": "https://github.com/apache/datafusion/pull/7494", "diff_url": "https://github.com/apache/datafusion/pull/7494.diff", "patch_url": "https://github.com/apache/datafusion/pull/7494.patch", "merged_at": "2023-09-07T20:58:22Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7493.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nCurrently `PrimitiveGroupsAccumulator#evaluate` method initialize the result Arrow array using its generic type parameter `T` which is a `ArrowPrimitiveType`, converted from enum `DataType`. This, however, doesn't have complete information comparing to the original `DataType` it converted from. For instance, `TimestampMicrosecondType` always have `None` as timezone while in the `DataType` it could be set to some specific timezone.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nI noticed that we already have `adjust_output_array` that handles a similar case for decimal type. One straightforward solution is to add another case for `Timestamp` in the method. However, I feel the logic would become simpler if we just call `with_data_type` after creating the Arrow array. This would also allow us to prevent more potential issues in the future. Therefore, in this PR I replaced all usage of `adjust_output_array` with `with_data_type` and removed the method itself.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nAdded some new tests for this.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\nNo\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7494/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7492", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7492/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7492/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7492/events", "html_url": "https://github.com/apache/datafusion/pull/7492", "id": 1886038943, "node_id": "PR_kwDOFWSkxs5Zyl10", "number": 7492, "title": "Minor: Add `ScalarValue::data_type()` for consistency with other APIs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-07T14:41:07Z", "updated_at": "2023-09-08T10:26:38Z", "closed_at": "2023-09-08T06:40:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7492", "html_url": "https://github.com/apache/datafusion/pull/7492", "diff_url": "https://github.com/apache/datafusion/pull/7492.diff", "patch_url": "https://github.com/apache/datafusion/pull/7492.patch", "merged_at": "2023-09-08T06:40:38Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\n\r\nThe fact that most of the DataFusion codebase uses `fn data_type()` to retrieve the datatype but `ScalarValue` uses `get_datatype` is frustrating to me. It is a very small rough edge, but one that is easy to fix\r\n\r\nHere is the example showing exsiting APIs that use `data_type()`:  https://github.com/search?q=repo%3Aapache%2Farrow-datafusion%20data_type&type=code\r\n\r\n## What changes are included in this PR?\r\n1. Add `ScalarValue::data_type()`\r\n2. Add docs to `ScalarValue::get_datatype`\r\n\r\nNote I did not actually `#deprecate` get_datatype as I thought that would be too large a change. I can do so if people would like however.\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nI changed a few locations to call `ScalarValue::data_type`\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n4. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7492/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7491", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7491/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7491/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7491/events", "html_url": "https://github.com/apache/datafusion/pull/7491", "id": 1886023754, "node_id": "PR_kwDOFWSkxs5ZyigH", "number": 7491, "title": "Minor: Add doc comments and example for `ScalarVaue::to_scalar`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-07T14:32:22Z", "updated_at": "2023-09-07T16:43:08Z", "closed_at": "2023-09-07T16:43:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7491", "html_url": "https://github.com/apache/datafusion/pull/7491", "diff_url": "https://github.com/apache/datafusion/pull/7491.diff", "patch_url": "https://github.com/apache/datafusion/pull/7491.patch", "merged_at": "2023-09-07T16:43:05Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\n\r\nWhile working on upgrading IOx to arrow `46.0.0` (https://github.com/influxdata/influxdb_iox/pull/8577) I struggled to find `ScalarValue::to_scalar`\r\n\r\nI think adding some documentation would help my future self (as well as others)\r\n\r\nSee also related discussion is https://github.com/apache/arrow-rs/issues/4781\r\n\r\n## What changes are included in this PR?\r\n \r\n Add doc comments and example for `ScalarVaue::to_scalar`\r\n## Are these changes tested?\r\nYes, by doc tests\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7491/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7489", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7489/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7489/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7489/events", "html_url": "https://github.com/apache/datafusion/pull/7489", "id": 1884379643, "node_id": "PR_kwDOFWSkxs5Zs9tV", "number": 7489, "title": "minor: Add ARROW to `CREATE EXTERNAL TABLE` docs and add example of `COMPRESSION TYPE`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-06T16:39:15Z", "updated_at": "2023-09-08T13:52:16Z", "closed_at": "2023-09-07T16:54:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7489", "html_url": "https://github.com/apache/datafusion/pull/7489", "diff_url": "https://github.com/apache/datafusion/pull/7489.diff", "patch_url": "https://github.com/apache/datafusion/pull/7489.patch", "merged_at": "2023-09-07T16:54:28Z"}, "body": "\r\n## Which issue does this PR close?\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/pull/7477\r\n\r\n## Rationale for this change\r\n\r\nSuggested by @jackwener  on https://github.com/apache/arrow-datafusion/pull/7477/files#r1316669263\r\n\r\n## What changes are included in this PR?\r\n\r\nUpdate docs\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7489/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7488", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7488/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7488/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7488/events", "html_url": "https://github.com/apache/datafusion/pull/7488", "id": 1884118105, "node_id": "PR_kwDOFWSkxs5ZsEkk", "number": 7488, "title": "Refactor the EnforceDistribution Rule", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-06T14:18:26Z", "updated_at": "2023-09-10T10:00:39Z", "closed_at": "2023-09-10T10:00:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7488", "html_url": "https://github.com/apache/datafusion/pull/7488", "diff_url": "https://github.com/apache/datafusion/pull/7488.diff", "patch_url": "https://github.com/apache/datafusion/pull/7488.patch", "merged_at": "2023-09-10T10:00:39Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nCurrently, there are 2 rules for handling distribution within the physical plan:\r\n- `Repartition` rule: Its responsibility is to increase parallelism in the plan (plan generated may not valid in terms of distribution requirement)\r\n- `EnforceDistribution` Rule: Its responsibility is to satisfy requirements so that physical plan is valid in terms of distribution requirements.\r\n\r\nThese two rules should be called consecutively to produce valid plans as far as distribution is concerned.\r\nAlso plan generated after the `Repartition` + `EnforceDistribution` pair may be invalid in terms of ordering requirements even if the input plan was valid in terms of ordering requirements.\r\n\r\nIn this PR, we combined (`Repartition`+`EnforceDistribution`) rule into a single rule `EnforceDistribution`, which will henceforth be called `EnforceDistributionV2` in this text to prevent confusion.\r\n\r\nPlease note that, `repartition.rs` file still exists in this PR, where previously `Repartition` rule is implemented. It now contains only test codes. I kept this file to not introduce additional diff to this PR. In subsequent PRs I will move these tests to under `dist_enforcement.rs` file.\r\n\r\n\r\n`EnforceDistributionV2` rule\r\n- is idempotent; i.e. `EnforceDistributionV2`  rule can be used multiple times during optimization if necessary.\r\n- doesn't invalidate ordering requirements; i.e. if its input physical plan is valid in terms of ordering requirements, the output will also be valid. (Note that if input ordering is *invalid*, the rule will not fix it as that responsibility belongs to the `EnforceSorting` rule). Hence; with this rule, both the `EnforceDistributionV2` + `EnforceSorting` and `EnforceSorting` + `EnforceDistributionV2` stack will produce valid plans.\r\n\r\n# What changes are included in this PR?\r\n\r\nA refactor of distribution handling rules that satisfy the above properties.\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\nYes, existing tests all pass. New tests are also added \r\n- to assert that `EnforceDistributionV2` rule is idempotent. \r\n- to ensure that both (`EnforceDistributionV2` + `EnforceSorting`) and (`EnforceSorting` + `EnforceDistributionV2`) stack produce valid plans (The resulting plans may not be same).\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\nNo, only some plans will be more optimal now.\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7488/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 2, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7488/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7487", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7487/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7487/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7487/events", "html_url": "https://github.com/apache/datafusion/pull/7487", "id": 1883649647, "node_id": "PR_kwDOFWSkxs5Zqeaf", "number": 7487, "title": "Remove get_scan_files and ExecutionPlan::file_scan_config (#7357)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-06T09:47:28Z", "updated_at": "2023-09-10T13:45:01Z", "closed_at": "2023-09-10T13:45:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7487", "html_url": "https://github.com/apache/datafusion/pull/7487", "diff_url": "https://github.com/apache/datafusion/pull/7487.diff", "patch_url": "https://github.com/apache/datafusion/pull/7487.patch", "merged_at": "2023-09-10T13:45:00Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7357\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis was added by @yahoNanJing in https://github.com/apache/arrow-datafusion/pull/5572. It was then evolved in https://github.com/apache/arrow-datafusion/pull/7175 to try to avoid strongly coupling to AvroExec. However, this is causing issues trying to split apart the crates (#7357) and it is unclear how best to adapt the design https://github.com/apache/arrow-datafusion/pull/7425#discussion_r1316290949.\r\n\r\nGiven this API does not appear to be being used, I wonder if we can do the simplest possible thing, and just remove it\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nRemoves the API\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7487/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7483", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7483/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7483/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7483/events", "html_url": "https://github.com/apache/datafusion/pull/7483", "id": 1882509838, "node_id": "PR_kwDOFWSkxs5ZmlT9", "number": 7483, "title": "Write Multiple Parquet Files in Parallel", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-05T18:19:22Z", "updated_at": "2023-09-08T13:56:00Z", "closed_at": "2023-09-07T18:52:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7483", "html_url": "https://github.com/apache/datafusion/pull/7483", "diff_url": "https://github.com/apache/datafusion/pull/7483.diff", "patch_url": "https://github.com/apache/datafusion/pull/7483.patch", "merged_at": "2023-09-07T18:52:14Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7079 \r\n\r\n## Rationale for this change\r\n\r\nWhen writing out multiple partitions to multiple parquet files, we can speed up the operation by writing all parquet files in parallel on multiple cpu cores.\r\n\r\nParallelizing the serialization of a single parquet file (similar to as done for csv/json in #7452) is more complex and will need upstream changes in arrow-rs. There is already an issue open for this here https://github.com/apache/arrow-rs/issues/1718. \r\n\r\n## What changes are included in this PR?\r\n\r\nSpawn a tokio task for each parquet file being written. \r\n\r\n## Are these changes tested?\r\n\r\nYes by existing tests.\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo other than better write performance when writing multiple parquet files on a system with multiple cpu cores.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7483/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7480", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7480/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7480/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7480/events", "html_url": "https://github.com/apache/datafusion/pull/7480", "id": 1881530196, "node_id": "PR_kwDOFWSkxs5ZjQji", "number": 7480, "title": "Bump actions/checkout from 3 to 4", "user": {"login": "dependabot[bot]", "id": 49699333, "node_id": "MDM6Qm90NDk2OTkzMzM=", "avatar_url": "https://avatars.githubusercontent.com/in/29110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot%5Bbot%5D", "html_url": "https://github.com/apps/dependabot", "followers_url": "https://api.github.com/users/dependabot%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3679349472, "node_id": "LA_kwDOFWSkxs7bTmrg", "url": "https://api.github.com/repos/apache/datafusion/labels/auto-dependencies", "name": "auto-dependencies", "color": "45A736", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-05T09:00:59Z", "updated_at": "2023-09-06T10:40:46Z", "closed_at": "2023-09-06T10:40:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7480", "html_url": "https://github.com/apache/datafusion/pull/7480", "diff_url": "https://github.com/apache/datafusion/pull/7480.diff", "patch_url": "https://github.com/apache/datafusion/pull/7480.patch", "merged_at": "2023-09-06T10:40:38Z"}, "body": "Bumps [actions/checkout](https://github.com/actions/checkout) from 3 to 4.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/actions/checkout/releases\">actions/checkout's releases</a>.</em></p>\n<blockquote>\n<h2>v4.0.0</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Update default runtime to node20 by <a href=\"https://github.com/takost\"><code>@\u200btakost</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1436\">actions/checkout#1436</a></li>\n<li>Support fetching without the --progress option by <a href=\"https://github.com/simonbaird\"><code>@\u200bsimonbaird</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1067\">actions/checkout#1067</a></li>\n<li>Release 4.0.0 by <a href=\"https://github.com/takost\"><code>@\u200btakost</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1447\">actions/checkout#1447</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/takost\"><code>@\u200btakost</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/1436\">actions/checkout#1436</a></li>\n<li><a href=\"https://github.com/simonbaird\"><code>@\u200bsimonbaird</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/1067\">actions/checkout#1067</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/actions/checkout/compare/v3...v4.0.0\">https://github.com/actions/checkout/compare/v3...v4.0.0</a></p>\n<h2>v3.6.0</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Mark test scripts with Bash'isms to be run via Bash by <a href=\"https://github.com/dscho\"><code>@\u200bdscho</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1377\">actions/checkout#1377</a></li>\n<li>Add option to fetch tags even if fetch-depth &gt; 0 by <a href=\"https://github.com/RobertWieczoreck\"><code>@\u200bRobertWieczoreck</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/579\">actions/checkout#579</a></li>\n<li>Release 3.6.0 by <a href=\"https://github.com/luketomlinson\"><code>@\u200bluketomlinson</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1437\">actions/checkout#1437</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/RobertWieczoreck\"><code>@\u200bRobertWieczoreck</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/579\">actions/checkout#579</a></li>\n<li><a href=\"https://github.com/luketomlinson\"><code>@\u200bluketomlinson</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/1437\">actions/checkout#1437</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/actions/checkout/compare/v3.5.3...v3.6.0\">https://github.com/actions/checkout/compare/v3.5.3...v3.6.0</a></p>\n<h2>v3.5.3</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Fix: Checkout Issue in self hosted runner due to faulty submodule check-ins by <a href=\"https://github.com/megamanics\"><code>@\u200bmegamanics</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1196\">actions/checkout#1196</a></li>\n<li>Fix typos found by codespell by <a href=\"https://github.com/DimitriPapadopoulos\"><code>@\u200bDimitriPapadopoulos</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1287\">actions/checkout#1287</a></li>\n<li>Add support for sparse checkouts by <a href=\"https://github.com/dscho\"><code>@\u200bdscho</code></a> and <a href=\"https://github.com/dfdez\"><code>@\u200bdfdez</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1369\">actions/checkout#1369</a></li>\n<li>Release v3.5.3 by <a href=\"https://github.com/TingluoHuang\"><code>@\u200bTingluoHuang</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1376\">actions/checkout#1376</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/megamanics\"><code>@\u200bmegamanics</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/1196\">actions/checkout#1196</a></li>\n<li><a href=\"https://github.com/DimitriPapadopoulos\"><code>@\u200bDimitriPapadopoulos</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/1287\">actions/checkout#1287</a></li>\n<li><a href=\"https://github.com/dfdez\"><code>@\u200bdfdez</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/1369\">actions/checkout#1369</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/actions/checkout/compare/v3...v3.5.3\">https://github.com/actions/checkout/compare/v3...v3.5.3</a></p>\n<h2>v3.5.2</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Fix: Use correct API url / endpoint in GHES by <a href=\"https://github.com/fhammerl\"><code>@\u200bfhammerl</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1289\">actions/checkout#1289</a> based on <a href=\"https://redirect.github.com/actions/checkout/issues/1286\">#1286</a> by <a href=\"https://github.com/1newsr\"><code>@\u200b1newsr</code></a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/actions/checkout/compare/v3.5.1...v3.5.2\">https://github.com/actions/checkout/compare/v3.5.1...v3.5.2</a></p>\n<h2>v3.5.1</h2>\n<h2>What's Changed</h2>\n<ul>\n<li>Improve checkout performance on Windows runners by upgrading <code>@\u200bactions/github</code> dependency by <a href=\"https://github.com/BrettDong\"><code>@\u200bBrettDong</code></a> in <a href=\"https://redirect.github.com/actions/checkout/pull/1246\">actions/checkout#1246</a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/BrettDong\"><code>@\u200bBrettDong</code></a> made their first contribution in <a href=\"https://redirect.github.com/actions/checkout/pull/1246\">actions/checkout#1246</a></li>\n</ul>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/actions/checkout/blob/main/CHANGELOG.md\">actions/checkout's changelog</a>.</em></p>\n<blockquote>\n<h1>Changelog</h1>\n<h2>v4.0.0</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1067\">Support fetching without the --progress option</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1436\">Update to node20</a></li>\n</ul>\n<h2>v3.6.0</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1377\">Fix: Mark test scripts with Bash'isms to be run via Bash</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/579\">Add option to fetch tags even if fetch-depth &gt; 0</a></li>\n</ul>\n<h2>v3.5.3</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1196\">Fix: Checkout fail in self-hosted runners when faulty submodule are checked-in</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1287\">Fix typos found by codespell</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1369\">Add support for sparse checkouts</a></li>\n</ul>\n<h2>v3.5.2</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1289\">Fix api endpoint for GHES</a></li>\n</ul>\n<h2>v3.5.1</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1246\">Fix slow checkout on Windows</a></li>\n</ul>\n<h2>v3.5.0</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1237\">Add new public key for known_hosts</a></li>\n</ul>\n<h2>v3.4.0</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1209\">Upgrade codeql actions to v2</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1210\">Upgrade dependencies</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1225\">Upgrade <code>@\u200bactions/io</code></a></li>\n</ul>\n<h2>v3.3.0</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1045\">Implement branch list using callbacks from exec function</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1050\">Add in explicit reference to private checkout options</a></li>\n<li>[Fix comment typos (that got added in <a href=\"https://redirect.github.com/actions/checkout/issues/770\">#770</a>)](<a href=\"https://redirect.github.com/actions/checkout/pull/1057\">actions/checkout#1057</a>)</li>\n</ul>\n<h2>v3.2.0</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/942\">Add GitHub Action to perform release</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/967\">Fix status badge</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1002\">Replace datadog/squid with ubuntu/squid Docker image</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/964\">Wrap pipeline commands for submoduleForeach in quotes</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1029\">Update <code>@\u200bactions/io</code> to 1.1.2</a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/1039\">Upgrading version to 3.2.0</a></li>\n</ul>\n<h2>v3.1.0</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/939\">Use <code>@\u200bactions/core</code> <code>saveState</code> and <code>getState</code></a></li>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/922\">Add <code>github-server-url</code> input</a></li>\n</ul>\n<h2>v3.0.2</h2>\n<ul>\n<li><a href=\"https://redirect.github.com/actions/checkout/pull/770\">Add input <code>set-safe-directory</code></a></li>\n</ul>\n<h2>v3.0.1</h2>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/actions/checkout/commit/3df4ab11eba7bda6032a0b82a6bb43b11571feac\"><code>3df4ab1</code></a> Release 4.0.0 (<a href=\"https://redirect.github.com/actions/checkout/issues/1447\">#1447</a>)</li>\n<li><a href=\"https://github.com/actions/checkout/commit/8b5e8b768746b50394015010d25e690bfab9dfbc\"><code>8b5e8b7</code></a> Support fetching without the --progress option (<a href=\"https://redirect.github.com/actions/checkout/issues/1067\">#1067</a>)</li>\n<li><a href=\"https://github.com/actions/checkout/commit/97a652b80035363df47baee5031ec8670b8878ac\"><code>97a652b</code></a> Update default runtime to node20 (<a href=\"https://redirect.github.com/actions/checkout/issues/1436\">#1436</a>)</li>\n<li>See full diff in <a href=\"https://github.com/actions/checkout/compare/v3...v4\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/checkout&package-manager=github_actions&previous-version=3&new-version=4)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7480/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7480/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7479", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7479/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7479/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7479/events", "html_url": "https://github.com/apache/datafusion/pull/7479", "id": 1881208669, "node_id": "PR_kwDOFWSkxs5ZiLZ9", "number": 7479, "title": "Return error if spill file does not exist in ExternalSorter", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-05T05:17:49Z", "updated_at": "2023-09-05T19:20:43Z", "closed_at": "2023-09-05T17:55:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7479", "html_url": "https://github.com/apache/datafusion/pull/7479", "diff_url": "https://github.com/apache/datafusion/pull/7479.diff", "patch_url": "https://github.com/apache/datafusion/pull/7479.patch", "merged_at": "2023-09-05T17:55:02Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nWe've seen such error but the sorter still continues to merge batches:\r\n\r\n```\r\nFailure while reading spill file: NamedTempFile(\"/var/folders/zq/2tdnn5955wvdcw7qfy6qhvk00000gn/T/.tmpkgzYB9/.tmp2bAVMU\"). Error: IO error: No such file or directory (os error 2) \r\n```\r\n\r\nIf any spill file doesn't exist anymore, it seems more reasonable to stop merging final sort output and return an error.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7479/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7478", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7478/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7478/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7478/events", "html_url": "https://github.com/apache/datafusion/pull/7478", "id": 1881124467, "node_id": "PR_kwDOFWSkxs5Zh5bT", "number": 7478, "title": "[minor fix]: Remove unused duplicate `file_type.rs`", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-05T03:32:02Z", "updated_at": "2023-09-05T17:55:36Z", "closed_at": "2023-09-05T17:55:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7478", "html_url": "https://github.com/apache/datafusion/pull/7478", "diff_url": "https://github.com/apache/datafusion/pull/7478.diff", "patch_url": "https://github.com/apache/datafusion/pull/7478.patch", "merged_at": "2023-09-05T17:55:36Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\nThere are two `file_type.rs` in `common/src/` and `common/src/file_options`. They are almost the same and the former  seems not to be used.\r\nTo avoid running unnecessary tests and maintaining unused file, let's remove unused one.\r\n\r\n## What changes are included in this PR?\r\n\r\nRemoved `common/src/file_type.rs`.\r\n\r\n## Are these changes tested?\r\nDone by CI.\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7478/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7478/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7477", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7477/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7477/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7477/events", "html_url": "https://github.com/apache/datafusion/pull/7477", "id": 1880942129, "node_id": "PR_kwDOFWSkxs5ZhS-w", "number": 7477, "title": "refactor: change file type logic for create table", "user": {"login": "tshauck", "id": 421839, "node_id": "MDQ6VXNlcjQyMTgzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/421839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tshauck", "html_url": "https://github.com/tshauck", "followers_url": "https://api.github.com/users/tshauck/followers", "following_url": "https://api.github.com/users/tshauck/following{/other_user}", "gists_url": "https://api.github.com/users/tshauck/gists{/gist_id}", "starred_url": "https://api.github.com/users/tshauck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tshauck/subscriptions", "organizations_url": "https://api.github.com/users/tshauck/orgs", "repos_url": "https://api.github.com/users/tshauck/repos", "events_url": "https://api.github.com/users/tshauck/events{/privacy}", "received_events_url": "https://api.github.com/users/tshauck/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-04T23:02:06Z", "updated_at": "2023-09-06T17:18:41Z", "closed_at": "2023-09-06T16:39:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7477", "html_url": "https://github.com/apache/datafusion/pull/7477", "diff_url": "https://github.com/apache/datafusion/pull/7477.diff", "patch_url": "https://github.com/apache/datafusion/pull/7477.patch", "merged_at": "2023-09-06T16:39:39Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7445\r\n\r\n## Rationale for this change\r\n\r\nThe goal of this PR is to make it possible to create external tables using compression that are not in the built-in table factory, but are still valid. I.e. the logic now throws are error if you pass it a file type that's not CSV or JSON with a file compression type that's not uncompressed. Put another way, I have a `TableProviderFactory` with a custom file type that can be gzipped, and I'd like to create a table using the SQL syntax.\r\n\r\nAnother possible change is that this `plan_err` could just be removed, and the logic could be moved into the `ListingTableFactory`'s `create` method. I haven't tested this approach however.\r\n\r\n## What changes are included in this PR?\r\n\r\n* Update the if logic to check the exact types that aren't allowed for a more generic \"not\"\r\n* Update the tests to check that the new case passes\r\n* Update the error test table to include ARROW as I think it should've been in the logic.\r\n\r\n## Are these changes tested?\r\n\r\nAdd/updated tests to include more cases.\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7477/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7476", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7476/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7476/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7476/events", "html_url": "https://github.com/apache/datafusion/pull/7476", "id": 1880662954, "node_id": "PR_kwDOFWSkxs5ZgWlA", "number": 7476, "title": "Revert \"Update prost-derive requirement from 0.11 to 0.12 (#7468)\"", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-04T17:19:33Z", "updated_at": "2023-09-05T15:54:39Z", "closed_at": "2023-09-05T15:54:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7476", "html_url": "https://github.com/apache/datafusion/pull/7476", "diff_url": "https://github.com/apache/datafusion/pull/7476.diff", "patch_url": "https://github.com/apache/datafusion/pull/7476.patch", "merged_at": "2023-09-05T15:54:31Z"}, "body": "This reverts commit b34e7cfd55d9008a734f898e05ff19f2919209ec.\r\n\r\n## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nThis reverts #7468.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nprost-derive should not be upgraded individually. We should upgrade other prost dependencies, e.g., prost-types, prost, prost-build, together. But some dependencies e.g., substrait still use prost 0.11. We need to wait for other dependencies.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7476/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7475", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7475/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7475/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7475/events", "html_url": "https://github.com/apache/datafusion/pull/7475", "id": 1880393537, "node_id": "PR_kwDOFWSkxs5ZfbFS", "number": 7475, "title": "cp_solver, Duration vs Interval cases", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-04T14:20:31Z", "updated_at": "2023-09-08T07:49:56Z", "closed_at": "2023-09-06T15:23:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7475", "html_url": "https://github.com/apache/datafusion/pull/7475", "diff_url": "https://github.com/apache/datafusion/pull/7475.diff", "patch_url": "https://github.com/apache/datafusion/pull/7475.patch", "merged_at": "2023-09-06T15:23:07Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7474 .\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nTo take precautions against the problems that may be caused by the duration vs. time interval operations (described in the issue) during the constraint propagation.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nIn the `propagate_arithmetic` function, if there is a time interval child, we follow such a path: If any interval bounds contain a month or day field, we leave that child unchanged because we can't accurately convert it to a duration type without a valid timestamp reference. Otherwise, we simply convert the bounds to a duration type, and after the propagation, we convert the duration back to the time interval type again.\r\n\r\nIn the `propagate_comparison` function, a similar behavior is applied. However, Datafusion does not allow to perform on interval vs. duration yet (`get_result_type` function gives an error).\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7475/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7468", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7468/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7468/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7468/events", "html_url": "https://github.com/apache/datafusion/pull/7468", "id": 1879809454, "node_id": "PR_kwDOFWSkxs5ZdaYz", "number": 7468, "title": "Update prost-derive requirement from 0.11 to 0.12", "user": {"login": "dependabot[bot]", "id": 49699333, "node_id": "MDM6Qm90NDk2OTkzMzM=", "avatar_url": "https://avatars.githubusercontent.com/in/29110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot%5Bbot%5D", "html_url": "https://github.com/apps/dependabot", "followers_url": "https://api.github.com/users/dependabot%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3679349472, "node_id": "LA_kwDOFWSkxs7bTmrg", "url": "https://api.github.com/repos/apache/datafusion/labels/auto-dependencies", "name": "auto-dependencies", "color": "45A736", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-04T08:49:19Z", "updated_at": "2023-09-04T16:46:28Z", "closed_at": "2023-09-04T16:46:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7468", "html_url": "https://github.com/apache/datafusion/pull/7468", "diff_url": "https://github.com/apache/datafusion/pull/7468.diff", "patch_url": "https://github.com/apache/datafusion/pull/7468.patch", "merged_at": "2023-09-04T16:46:19Z"}, "body": "Updates the requirements on [prost-derive](https://github.com/tokio-rs/prost) to permit the latest version.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/tokio-rs/prost/releases\">prost-derive's releases</a>.</em></p>\n<blockquote>\n<h2>v0.12.0</h2>\n<p><em>PROST!</em> is a <a href=\"https://developers.google.com/protocol-buffers/\">Protocol Buffers</a> implementation for the <a href=\"https://www.rust-lang.org/\">Rust Language</a>. <code>prost</code> generates simple, idiomatic Rust code from <code>proto2</code> and <code>proto3</code> files.</p>\n<p>This patch updates brings a few new features and fixes:</p>\n<ul>\n<li>Bump <code>syn</code>  to version 2</li>\n<li>Bump MSRV to 1.64</li>\n<li>Added <code>TryFrom&lt;i32&gt;</code> for enums</li>\n<li>Optional debug implementations</li>\n<li>Initial generic <code>Any</code> and <code>Name</code> impl/traits.</li>\n</ul>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/10582c2f674a1f4618e9fb8d380081136340ac84\"><code>10582c2</code></a> release 0.12.0</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/7ce9b9756ba1ca0c6228931e2a9ff7859931ac95\"><code>7ce9b97</code></a> feat: <code>Name</code> trait + <code>Any</code> encoding support (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/896\">#896</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/f9a3cfff07536a412e4f96f5ea3749c52c50170f\"><code>f9a3cff</code></a> Make Debug impl optional for types (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/797\">#797</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/6180f9fa3a93e42572633cb0b0610dcb0690c508\"><code>6180f9f</code></a> docs: fix protoc install link (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/900\">#900</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/1d7405803004e85f58511af2a439460b4237a0e2\"><code>1d74058</code></a> prost-build: do not escape brackets followed by parenthesis in comments (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/851\">#851</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/413b0299e0d0e73b6085ad9b897fb7ec7e63cb2a\"><code>413b029</code></a> chore: Bump MSRV to 1.64 (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/902\">#902</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/ca73cbe4bbcbdb4f3d30455a090ff50209dc1fc3\"><code>ca73cbe</code></a> feat: add TryFrom&lt;i32&gt; implementation to Enumeration (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/853\">#853</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/9c877ce32ec0c465e437144c1bf4a27cb3aa705c\"><code>9c877ce</code></a> chore: Update ci (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/854\">#854</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/65451cc4cbffaca578de1a8f4a218cca2ec1c9ac\"><code>65451cc</code></a> Fix <code>non_snake_case</code> warning on generated identity functions (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/891\">#891</a>)</li>\n<li><a href=\"https://github.com/tokio-rs/prost/commit/80fb9d18b7af2c82a8f54fb6c9e7ccfa4d5629ce\"><code>80fb9d1</code></a> release 0.11.9 (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/842\">#842</a>) (<a href=\"https://redirect.github.com/tokio-rs/prost/issues/895\">#895</a>)</li>\n<li>Additional commits viewable in <a href=\"https://github.com/tokio-rs/prost/compare/v0.11.0...v0.12.0\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot show <dependency name> ignore conditions` will show all of the ignore conditions of the specified dependency\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7468/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7466", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7466/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7466/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7466/events", "html_url": "https://github.com/apache/datafusion/pull/7466", "id": 1878893572, "node_id": "PR_kwDOFWSkxs5ZagBO", "number": 7466, "title": "Support Configuring Parquet Column Specific Options via SQL Statement Options", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-03T00:50:30Z", "updated_at": "2023-09-08T13:59:00Z", "closed_at": "2023-09-07T17:21:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7466", "html_url": "https://github.com/apache/datafusion/pull/7466", "diff_url": "https://github.com/apache/datafusion/pull/7466.diff", "patch_url": "https://github.com/apache/datafusion/pull/7466.patch", "merged_at": "2023-09-07T17:21:01Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7442 \r\nCloses #7463 (this PR implements a different syntax than 7463 which turned out much easier to implement. Leaving 7463 draft open to show as possible alternative)\r\n\r\n## Rationale for this change\r\n\r\nExtends syntax and allowed options for SQL statement options to configure parquet column level options (e.g. different compression for each possibly nested column).\r\n\r\n## What changes are included in this PR?\r\n\r\nImplements new parsing utils and options for parquet column specific options. Example:\r\n\r\n```sql\r\ncopy my_table\r\nto my_file.parquet\r\n(compression snappy\r\n'compression::col1' 'zstd(5)',\r\n'compression::col2.nested' 'zstd(10)'\r\n```\r\n\r\nThe example defaults all columns to snappy compression and sets col1 to zstd level 5 and the nested column (col2.nested) to zstd level 10.\r\n\r\nUsing \"::\" to separate the setting from the column path is obviously rust syntax inspired. We could use any other separator here if there is a more natural one for SQL. Dots (.) would have been the natural choice, but those are being used for separating nested column paths here.\r\n\r\n## Are these changes tested?\r\n\r\nYes, added a new unit test to verify settings are actually set as expected.\r\n\r\n## Are there any user-facing changes?\r\n\r\nNew syntax for specifying column level options, but this PR is backward compatible/no breaking changes unlike 7463", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7466/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7464", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7464/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7464/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7464/events", "html_url": "https://github.com/apache/datafusion/pull/7464", "id": 1878257600, "node_id": "PR_kwDOFWSkxs5ZYiYu", "number": 7464, "title": "Add new known users: Arroyo and Restate", "user": {"login": "jychen7", "id": 663949, "node_id": "MDQ6VXNlcjY2Mzk0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/663949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jychen7", "html_url": "https://github.com/jychen7", "followers_url": "https://api.github.com/users/jychen7/followers", "following_url": "https://api.github.com/users/jychen7/following{/other_user}", "gists_url": "https://api.github.com/users/jychen7/gists{/gist_id}", "starred_url": "https://api.github.com/users/jychen7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jychen7/subscriptions", "organizations_url": "https://api.github.com/users/jychen7/orgs", "repos_url": "https://api.github.com/users/jychen7/repos", "events_url": "https://api.github.com/users/jychen7/events{/privacy}", "received_events_url": "https://api.github.com/users/jychen7/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-02T01:49:11Z", "updated_at": "2023-09-05T17:48:08Z", "closed_at": "2023-09-02T17:08:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7464", "html_url": "https://github.com/apache/datafusion/pull/7464", "diff_url": "https://github.com/apache/datafusion/pull/7464.diff", "patch_url": "https://github.com/apache/datafusion/pull/7464.patch", "merged_at": "2023-09-02T17:08:31Z"}, "body": "## Which issue does this PR close?\r\n\r\nNA\r\n\r\n## Rationale for this change\r\n\r\nFind two new frameworks using Datafusion. I think it is great to share\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7464/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7464/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7462", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7462/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7462/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7462/events", "html_url": "https://github.com/apache/datafusion/pull/7462", "id": 1877705756, "node_id": "PR_kwDOFWSkxs5ZWrg-", "number": 7462, "title": "Make sqllogictest platform-independent for the sign of NaN", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-01T16:20:23Z", "updated_at": "2023-09-07T17:13:54Z", "closed_at": "2023-09-07T17:13:53Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7462", "html_url": "https://github.com/apache/datafusion/pull/7462", "diff_url": "https://github.com/apache/datafusion/pull/7462.diff", "patch_url": "https://github.com/apache/datafusion/pull/7462.patch", "merged_at": "2023-09-07T17:13:53Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7458 \r\n\r\n## Rationale for this change\r\nThe sign of `NaN` returned from a function seems to depend on platform.\r\nBut it's better for `sqllogictest` to be platform-independent.\r\n\r\n## What changes are included in this PR?\r\nRevert #7403 and change one test which is sign sensitive .\r\n\r\n## Are these changes tested?\r\n\r\n`cargo test --test sqllogictests` passed.\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7462/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7462/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7459", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7459/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7459/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7459/events", "html_url": "https://github.com/apache/datafusion/pull/7459", "id": 1875992993, "node_id": "PR_kwDOFWSkxs5ZQ2_t", "number": 7459, "title": "feat: explain with statistics", "user": {"login": "korowa", "id": 13005055, "node_id": "MDQ6VXNlcjEzMDA1MDU1", "avatar_url": "https://avatars.githubusercontent.com/u/13005055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/korowa", "html_url": "https://github.com/korowa", "followers_url": "https://api.github.com/users/korowa/followers", "following_url": "https://api.github.com/users/korowa/following{/other_user}", "gists_url": "https://api.github.com/users/korowa/gists{/gist_id}", "starred_url": "https://api.github.com/users/korowa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/korowa/subscriptions", "organizations_url": "https://api.github.com/users/korowa/orgs", "repos_url": "https://api.github.com/users/korowa/repos", "events_url": "https://api.github.com/users/korowa/events{/privacy}", "received_events_url": "https://api.github.com/users/korowa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-31T17:43:52Z", "updated_at": "2023-09-08T13:51:44Z", "closed_at": "2023-09-08T10:23:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7459", "html_url": "https://github.com/apache/datafusion/pull/7459", "diff_url": "https://github.com/apache/datafusion/pull/7459.diff", "patch_url": "https://github.com/apache/datafusion/pull/7459.patch", "merged_at": "2023-09-08T10:23:40Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7254.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nShow physical plan operators statistics in `explain [analyze] [verbose]` output. \r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n1) `DisplayableExecutionPlan` now is able to display statistics for both ident (default text) and graphviz formats -- behaviour is controlled by `show statistics` field, which is implicitly set in explain handler and explain analyze operator\r\n2) `datafusion.explain.show_statistics` setting, disabled by default -- controls display statistics behaviour\r\n\r\nNew setting is sort of questionable , but as for now, execution plan comparisons are widely used while testing across multiple DF packages, and possible alternatives could be to keep plans as they are with statistics (which could lead to frequent adjustments of expected plan values in case of any statistics-related modifications) or building common plan normalizer for replacing actual statistics with a placeholders (seems to be unnecessary dependency for tests). So, any suggestions are welcome here!\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nCovered by sqllogictests for explain & unit tests for `explain analyze` and graphviz format.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\nAvailability of statistics in `explain` output\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7459/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7457", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7457/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7457/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7457/events", "html_url": "https://github.com/apache/datafusion/pull/7457", "id": 1875052364, "node_id": "PR_kwDOFWSkxs5ZNpZo", "number": 7457, "title": "Bug-fix/find_orderings_of_exprs", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-31T08:36:27Z", "updated_at": "2023-09-08T07:49:48Z", "closed_at": "2023-09-04T08:52:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7457", "html_url": "https://github.com/apache/datafusion/pull/7457", "diff_url": "https://github.com/apache/datafusion/pull/7457.diff", "patch_url": "https://github.com/apache/datafusion/pull/7457.patch", "merged_at": "2023-09-04T08:52:52Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7418 .\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nIOx tests failed. This error has not been encountered in Datafusion because in the absence of output ordering, `input.output_ordering()` returns None, not Some([]). This issue is fixed now.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7457/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7455", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7455/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7455/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7455/events", "html_url": "https://github.com/apache/datafusion/pull/7455", "id": 1874732191, "node_id": "PR_kwDOFWSkxs5ZMkre", "number": 7455, "title": "minor: do not fail analyzer if subquery plan contains extension", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-31T03:39:39Z", "updated_at": "2023-09-06T17:46:36Z", "closed_at": "2023-09-06T17:46:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7455", "html_url": "https://github.com/apache/datafusion/pull/7455", "diff_url": "https://github.com/apache/datafusion/pull/7455.diff", "patch_url": "https://github.com/apache/datafusion/pull/7455.patch", "merged_at": "2023-09-06T17:46:36Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nIf some analyze rule inserts extension plan, the post-analyze check will fail.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nIt looks acceptable for an analyzer rule to do so and can simply \"ignore\" extension plan node, e.g., the outermost node can either be `[Projection, Filter, Window, Aggregate, Join]`, or an extension node\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\nn/a\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\nn/a\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7455/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7454", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7454/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7454/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7454/events", "html_url": "https://github.com/apache/datafusion/pull/7454", "id": 1874566267, "node_id": "PR_kwDOFWSkxs5ZMACU", "number": 7454, "title": "Minor: more flexible pool size setting for datafusion-cli", "user": {"login": "yjshen", "id": 1387718, "node_id": "MDQ6VXNlcjEzODc3MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1387718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yjshen", "html_url": "https://github.com/yjshen", "followers_url": "https://api.github.com/users/yjshen/followers", "following_url": "https://api.github.com/users/yjshen/following{/other_user}", "gists_url": "https://api.github.com/users/yjshen/gists{/gist_id}", "starred_url": "https://api.github.com/users/yjshen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yjshen/subscriptions", "organizations_url": "https://api.github.com/users/yjshen/orgs", "repos_url": "https://api.github.com/users/yjshen/repos", "events_url": "https://api.github.com/users/yjshen/events{/privacy}", "received_events_url": "https://api.github.com/users/yjshen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-31T00:46:31Z", "updated_at": "2023-09-05T18:40:43Z", "closed_at": "2023-09-05T18:40:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7454", "html_url": "https://github.com/apache/datafusion/pull/7454", "diff_url": "https://github.com/apache/datafusion/pull/7454.diff", "patch_url": "https://github.com/apache/datafusion/pull/7454.patch", "merged_at": "2023-09-05T18:40:43Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nre #7424.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nFind the memory pool size setting string in datafusion-cli during performance testing, and we could make the byte string more flexible.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nParse the pool byte string as the number of bytes.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nAdd unit test and tested locally.\r\n\r\n\r\n## Are there any user-facing changes?\r\n\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7454/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7452", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7452/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7452/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7452/events", "html_url": "https://github.com/apache/datafusion/pull/7452", "id": 1874263416, "node_id": "PR_kwDOFWSkxs5ZK-XC", "number": 7452, "title": "Parallelize Stateless (CSV/JSON) File Write Serialization", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-30T19:40:32Z", "updated_at": "2023-10-07T14:36:41Z", "closed_at": "2023-09-09T10:49:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7452", "html_url": "https://github.com/apache/datafusion/pull/7452", "diff_url": "https://github.com/apache/datafusion/pull/7452.diff", "patch_url": "https://github.com/apache/datafusion/pull/7452.patch", "merged_at": "2023-09-09T10:49:26Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of #7079\r\n\r\n## Rationale for this change\r\n\r\nSerialization of \"stateless\" file types (where the serialized bytes of each record batch has no dependency on the serialized bytes of any other record batch), can be parallelized efficiently across all available CPU cores for a significant decrease in the time needed to write out the file. \r\n\r\nThere is a tradeoff between write speed and memory utilization. If the ObjectStore writer cannot keep up with the data being serialized, bytes could accumulate in memory. ObjectStore puts are concurrent but not parallelized so the risk of higher memory usage increases as the number of cores in the system increases. We could potentially bound this increase in memory by throttling serialization tasks when more than X RecordBatches have been serialized but not yet written to the ObjectStore (**this is done!**).\r\n\r\n## What changes are included in this PR?\r\n\r\nSpawn a tokio task to serialize each each record batch in parallel for \"stateless\" file types, concurrently write the serialized bytes to an ObjectStore. \r\n\r\n## Benchmarking\r\n\r\nTo benchmark the performance difference in this PR, the following script is used. \r\n```bash\r\ncd datafusion/benchmarks\r\n./bench.sh data tpch10\r\n```\r\n\r\n```rust\r\nuse chrono;\r\nuse datafusion::prelude::*;\r\nuse datafusion_common::DataFusionError;\r\nuse object_store::local::LocalFileSystem;\r\nuse std::{io::Error, sync::Arc, time::Instant};\r\nuse url::Url;\r\n\r\nconst FILENAME: &str =\r\n    \"/home/dev/arrow-datafusion/benchmarks/data/tpch_sf10/lineitem/part-0.parquet\";\r\n\r\n#[tokio::main]\r\nasync fn main() -> Result<(), DataFusionError> {\r\n    let _ctx = SessionContext::new();\r\n    let local = Arc::new(LocalFileSystem::new());\r\n    let local_url = Url::parse(\"file://local\").unwrap();\r\n    _ctx.runtime_env().register_object_store(&local_url, local);\r\n\r\n    let _read_options = ParquetReadOptions::default();\r\n\r\n    let start = Instant::now();\r\n    let _df = _ctx\r\n        .read_parquet(FILENAME, _read_options)\r\n        .await\r\n        .unwrap()\r\n        //select a few columns with types compatible with write_json method\r\n        .select_columns(&[\"l_orderkey\", \"l_partkey\", \"l_receiptdate\"])?\r\n        .repartition(Partitioning::Hash(vec![col(\"l_orderkey\")], 4))?\r\n        .cache()\r\n        .await?;\r\n    let elapsed = Instant::now() - start;\r\n    println!(\"read parquet to memory took -> {elapsed:?}\");\r\n\r\n    let start3 = Instant::now();\r\n    _df.clone()\r\n        .write_csv(\"file://local/home/dev/arrow-datafusion/test_out/\")\r\n        .await?;\r\n    let elapsed3 = Instant::now() - start3;\r\n    println!(\"write as csv to disk took -> {elapsed3:?}\");\r\n\r\n    let start2 = Instant::now();\r\n    _df.clone()\r\n        .write_json(\"file://local/home/dev/arrow-datafusion/test_out/\")\r\n        .await?;\r\n    let elapsed2 = Instant::now() - start2;\r\n    println!(\"write as json to disk took -> {elapsed2:?}\");\r\n\r\n    Ok(())\r\n}\r\n\r\n```\r\n\r\nTables below report results on a 16c/32t development server with 128Gb of memory writing to fast local nvme storage. This is an ideal case, scaling will not be as good on systems with fewer threads, significantly less memory, or slower/remote storage.\r\n\r\n### Execution Time in Seconds\r\n\u00a0 | main | This PR | % diff\r\n-- | -- | -- | --\r\n1 JSON file | 220.31 | 20.76 | -91%\r\n1 CSV file | 144.31 | 11.82 | -92%\r\n4 JSON files | 224.14 | 19.05 | -92%\r\n4 CSV files | 147.11 | 11.46 | -92%\r\n\r\n### Peak Memory Usage in GB\r\n\u00a0 | main | This PR | % diff\r\n-- | -- | -- | --\r\n1 JSON file | 0.55 | 3.9 | 609%\r\n1 CSV file | 0.55 | 0.85 | 55%\r\n4 JSON files | 0.65 | 3.9 | 500%\r\n4 CSV files | 0.65 | 1.00 | 54%\r\n\r\nAfter incorporating the channel method written by @metesynnada to introduce backpressure, memory usage increase is consistently ~200MB is all tests with no noticeable drop in performance.\r\n\r\nNote: Peak memory usage figure subtracts the peak memory usage required to cache the DataFrame and not perform any writes.\r\n\r\nOn a laptop with 15t, I see 28.42s and 42.94s for the 4CSV and 4JSON file tests respectively. \r\n\r\nWithout the caching step, each write only takes about 1 extra second.\r\n\r\n## What about Parquet?\r\n\r\nSerializing a parquet file is more complex (the parquet writer maintains internal state across record batches).. Serializing two different parquet files in parallel is trivial, but parallelizing serialization of a single large parquet file is more difficult. It may be possible by constructing multiple row groups in parallel. I intend to work on this in another PR.\r\n\r\n## Are these changes tested?\r\n\r\nYes by existing tests. More tests needed to verify abort behavior may be desired.\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo, just faster writes!", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7452/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7452/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7451", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7451/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7451/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7451/events", "html_url": "https://github.com/apache/datafusion/pull/7451", "id": 1873880467, "node_id": "PR_kwDOFWSkxs5ZJr2w", "number": 7451, "title": "Use DateTime::from_naive_utc_and_offset instead of DateTime::from_utc", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-30T15:11:02Z", "updated_at": "2023-08-30T17:44:30Z", "closed_at": "2023-08-30T17:44:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7451", "html_url": "https://github.com/apache/datafusion/pull/7451", "diff_url": "https://github.com/apache/datafusion/pull/7451.diff", "patch_url": "https://github.com/apache/datafusion/pull/7451.patch", "merged_at": "2023-08-30T17:44:30Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7450 \r\n\r\n## Rationale for this change\r\n\r\nThis PR is to make CI happy.\r\n\r\n## What changes are included in this PR?\r\n\r\n## Are these changes tested?\r\n\r\nReplace `DateTime::from_utc` with `DateTime::from_naive_utc_and_offset`.\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7451/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7451/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7449", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7449/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7449/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7449/events", "html_url": "https://github.com/apache/datafusion/pull/7449", "id": 1873782513, "node_id": "PR_kwDOFWSkxs5ZJWWp", "number": 7449, "title": "Make IN expr work with multiple items", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-30T14:18:02Z", "updated_at": "2023-09-07T10:48:03Z", "closed_at": "2023-09-06T17:49:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7449", "html_url": "https://github.com/apache/datafusion/pull/7449", "diff_url": "https://github.com/apache/datafusion/pull/7449.diff", "patch_url": "https://github.com/apache/datafusion/pull/7449.patch", "merged_at": "2023-09-06T17:49:54Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7448 \r\n\r\n## Rationale for this change\r\n\r\nThe failure cases shown in #7448 are apparently valid. So this PR is for bug fix.\r\n\r\n## What changes are included in this PR?\r\n\r\nThe cause of the issue is that `in_expr` doesn't consider the case where the evaluated value of each expr in a list varies per row.\r\nSo the issue happens in such a case except for the case `IN` expr is simplified by the optimizer.\r\nThe fix is to care such a case and search the target value from the list sequentially per the given RecordBatch.\r\n\r\n## Are there any user-facing changes?\r\nYes. But it's a bug fix.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7449/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7444", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7444/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7444/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7444/events", "html_url": "https://github.com/apache/datafusion/pull/7444", "id": 1872326284, "node_id": "PR_kwDOFWSkxs5ZEbQk", "number": 7444, "title": "feat: Allow creating a ValuesExec from record batches", "user": {"login": "scsmithr", "id": 4040560, "node_id": "MDQ6VXNlcjQwNDA1NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/4040560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scsmithr", "html_url": "https://github.com/scsmithr", "followers_url": "https://api.github.com/users/scsmithr/followers", "following_url": "https://api.github.com/users/scsmithr/following{/other_user}", "gists_url": "https://api.github.com/users/scsmithr/gists{/gist_id}", "starred_url": "https://api.github.com/users/scsmithr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scsmithr/subscriptions", "organizations_url": "https://api.github.com/users/scsmithr/orgs", "repos_url": "https://api.github.com/users/scsmithr/repos", "events_url": "https://api.github.com/users/scsmithr/events{/privacy}", "received_events_url": "https://api.github.com/users/scsmithr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-29T19:57:16Z", "updated_at": "2023-09-06T15:39:57Z", "closed_at": "2023-09-06T15:39:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7444", "html_url": "https://github.com/apache/datafusion/pull/7444", "diff_url": "https://github.com/apache/datafusion/pull/7444.diff", "patch_url": "https://github.com/apache/datafusion/pull/7444.patch", "merged_at": "2023-09-06T15:39:57Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nAllows reconstructing a `ValuesExec` from a schema and vector of record batches.\r\n\r\nThe use case here is being able to completely serialize a physical plan that would get produced from a statement like `insert into my_table values (...)`.\r\n\r\nSerialization of `ValuesExec` is not included in this PR. My plan for serialization was to just IPC encode the batches. If that sounds reasonable, I can follow up with a PR adding that to the `proto` crate.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nAdds a couple small tests.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\nAdds additional functions for `ValuesExec`, but no change in behavior.\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7444/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7443", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7443/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7443/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7443/events", "html_url": "https://github.com/apache/datafusion/pull/7443", "id": 1872049522, "node_id": "PR_kwDOFWSkxs5ZDjw8", "number": 7443, "title": "Update substrait requirement from 0.12.0 to 0.13.1", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-29T16:48:48Z", "updated_at": "2023-08-30T18:51:21Z", "closed_at": "2023-08-30T18:43:14Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7443", "html_url": "https://github.com/apache/datafusion/pull/7443", "diff_url": "https://github.com/apache/datafusion/pull/7443.diff", "patch_url": "https://github.com/apache/datafusion/pull/7443.patch", "merged_at": "2023-08-30T18:43:14Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7447.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7443/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7443/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7439", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7439/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7439/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7439/events", "html_url": "https://github.com/apache/datafusion/pull/7439", "id": 1871461346, "node_id": "PR_kwDOFWSkxs5ZBkwe", "number": 7439, "title": "Refactor sort_fuzz test to clarify what is covered", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-29T11:23:11Z", "updated_at": "2023-09-05T17:30:33Z", "closed_at": "2023-08-30T17:34:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7439", "html_url": "https://github.com/apache/datafusion/pull/7439", "diff_url": "https://github.com/apache/datafusion/pull/7439.diff", "patch_url": "https://github.com/apache/datafusion/pull/7439.patch", "merged_at": "2023-08-30T17:34:12Z"}, "body": "## Which issue does this PR close?\r\n\r\nrelated to #7432 \r\n\r\n## Rationale for this change\r\nWhile working on https://github.com/apache/arrow-datafusion/pull/7432 I wasn't 100% clear what sort cases were covered, which lead me to `sort_fuzz`. \r\n\r\nI took some time to make that clearer. \r\n\r\n## What changes are included in this PR?\r\nRework `sort_fuzz` to be a builder style\r\n\r\n\r\n## Are these changes tested?\r\nonly tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7439/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7435", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7435/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7435/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7435/events", "html_url": "https://github.com/apache/datafusion/pull/7435", "id": 1870614105, "node_id": "PR_kwDOFWSkxs5Y-uX6", "number": 7435, "title": "Support Write Options in DataFrame::write_* methods", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-28T22:50:18Z", "updated_at": "2023-09-06T15:22:37Z", "closed_at": "2023-09-06T13:16:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7435", "html_url": "https://github.com/apache/datafusion/pull/7435", "diff_url": "https://github.com/apache/datafusion/pull/7435.diff", "patch_url": "https://github.com/apache/datafusion/pull/7435.patch", "merged_at": "2023-09-06T13:16:50Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7433\r\n\r\n## Rationale for this change\r\n\r\n#7390 adds support for configuring Write related options via SQL statements. This PR extends that to allow configuring the same write related options via `DataFrame::write_*` methods. These methods accept `parquet::WriterProperties` or `csv::WriterBuilder` directly rather than requiring passing of string tuples.\r\n\r\n## What changes are included in this PR?\r\n\r\n- LogicalPlan::Copy(CopyTo) updated to allow passing of StatementOptions or FileTypeWriterOptions directly.\r\n- DataFrame::write_* methods updated to allow passing options and parsing them into a CopyTo logical plan.\r\n\r\n## Are these changes tested?\r\n\r\nYes via existing tests\r\n\r\n## Are there any user-facing changes?\r\n\r\nYes, DataFrame write APIs are updated.\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7435/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7435/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7434", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7434/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7434/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7434/events", "html_url": "https://github.com/apache/datafusion/pull/7434", "id": 1870031029, "node_id": "PR_kwDOFWSkxs5Y8xDA", "number": 7434, "title": "Add backtrace to error messages", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-28T15:54:46Z", "updated_at": "2023-09-07T16:58:34Z", "closed_at": "2023-09-07T16:58:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7434", "html_url": "https://github.com/apache/datafusion/pull/7434", "diff_url": "https://github.com/apache/datafusion/pull/7434.diff", "patch_url": "https://github.com/apache/datafusion/pull/7434.patch", "merged_at": "2023-09-07T16:58:34Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of  #7360 .\r\n\r\n## Rationale for this change\r\nCurrently the user getting only error description which sometimes makes investigation more complex, adding optional back trace\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\nAdding the optional back trace for the errors being thrown.\r\nBy default the backtrace is disabled, to enable it uses Rust mechanism described https://doc.rust-lang.org/std/backtrace/index.html#environment-variables\r\n\r\nAdded `.strip_backtrace()` method to Datafusion  Errors to get the error message only if the backtrace enabled\r\n\r\nUser Example\r\n\r\n```\r\nDataFusion CLI v30.0.0\r\n\u276f select row_numer() over (partition by a order by a) from (select 1 a);\r\nError during planning: Invalid function 'row_numer'.\r\nDid you mean 'ROW_NUMBER'?\r\n```\r\n\r\nwith backtrace enabled \r\n\r\n```\r\nRUST_BACKTRACE=1 ./target/debug/datafusion-cli \r\nDataFusion CLI v30.0.0\r\n\u276f select row_numer() over (partition by a order by a) from (select 1 a);\r\nError during planning: Invalid function 'row_numer'.\r\nDid you mean 'ROW_NUMBER'?\r\n\r\nbacktrace:    0: std::backtrace_rs::backtrace::libunwind::trace\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1: std::backtrace_rs::backtrace::trace_unsynchronized\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2: std::backtrace::Backtrace::create\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/std/src/backtrace.rs:332:13\r\n   3: std::backtrace::Backtrace::capture\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/std/src/backtrace.rs:298:9\r\n   4: datafusion_common::error::DataFusionError::get_back_trace\r\n             at rust/arrow-datafusion/datafusion/common/src/error.rs:428:26\r\n   5: datafusion_sql::expr::function::<impl datafusion_sql::planner::SqlToRel<S>>::sql_function_to_expr\r\n             at /rust/arrow-datafusion/datafusion/sql/src/expr/function.rs:163:9\r\n   6: datafusion_sql::expr::<impl datafusion_sql::planner::SqlToRel<S>>::sql_expr_to_logical_expr_internal\r\n             at /rust/arrow-datafusion/datafusion/sql/src/expr/mod.rs:429:17\r\n   7: datafusion_sql::expr::<impl datafusion_sql::planner::SqlToRel<S>>::sql_expr_to_logical_expr\r\n             at /rust/arrow-datafusion/datafusion/sql/src/expr/mod.rs:88:40\r\n   8: datafusion_sql::expr::<impl datafusion_sql::planner::SqlToRel<S>>::sql_to_expr\r\n             at rust/arrow-datafusion/datafusion/sql/src/expr/mod.rs:122:24\r\n   9: datafusion_sql::select::<impl datafusion_sql::planner::SqlToRel<S>>::sql_select_to_rex\r\n             at /rust/arrow-datafusion/datafusion/sql/src/select.rs:339:28\r\n  10: datafusion_sql::select::<impl datafusion_sql::planner::SqlToRel<S>>::prepare_select_exprs::{{closure}}\r\n             at /rust/arrow-datafusion/datafusion/sql/src/select.rs:321:25\r\n  11: core::iter::adapters::map::map_try_fold::{{closure}}\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/map.rs:91:28\r\n  12: core::iter::traits::iterator::Iterator::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/traits/iterator.rs:2303:21\r\n  13: <core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/map.rs:117:9\r\n  14: <core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/map.rs:117:9\r\n  15: <core::iter::adapters::fuse::Fuse<I> as core::iter::adapters::fuse::FuseImpl<I>>::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/fuse.rs:368:19\r\n  16: <core::iter::adapters::fuse::Fuse<I> as core::iter::traits::iterator::Iterator>::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/fuse.rs:82:9\r\n  17: core::iter::adapters::flatten::FlattenCompat<I,U>::iter_try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/flatten.rs:386:25\r\n  18: <core::iter::adapters::flatten::FlattenCompat<I,U> as core::iter::traits::iterator::Iterator>::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/flatten.rs:524:9\r\n  19: <core::iter::adapters::flatten::FlatMap<I,U,F> as core::iter::traits::iterator::Iterator>::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/flatten.rs:67:9\r\n  20: <core::iter::adapters::GenericShunt<I,R> as core::iter::traits::iterator::Iterator>::try_fold\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/mod.rs:195:9\r\n  21: core::iter::traits::iterator::Iterator::try_for_each\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/traits/iterator.rs:2365:9\r\n  22: <core::iter::adapters::GenericShunt<I,R> as core::iter::traits::iterator::Iterator>::next\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/mod.rs:178:14\r\n  23: <alloc::vec::Vec<T> as alloc::vec::spec_from_iter_nested::SpecFromIterNested<T,I>>::from_iter\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/alloc/src/vec/spec_from_iter_nested.rs:26:32\r\n  24: <alloc::vec::Vec<T> as alloc::vec::spec_from_iter::SpecFromIter<T,I>>::from_iter\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/alloc/src/vec/spec_from_iter.rs:33:9\r\n  25: <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/alloc/src/vec/mod.rs:2696:9\r\n  26: core::iter::traits::iterator::Iterator::collect\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/traits/iterator.rs:1895:9\r\n  27: <core::result::Result<V,E> as core::iter::traits::collect::FromIterator<core::result::Result<A,E>>>::from_iter::{{closure}}\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/result.rs:1932:51\r\n  28: core::iter::adapters::try_process\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/adapters/mod.rs:164:17\r\n  29: <core::result::Result<V,E> as core::iter::traits::collect::FromIterator<core::result::Result<A,E>>>::from_iter\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/result.rs:1932:9\r\n  30: core::iter::traits::iterator::Iterator::collect\r\n             at /rustc/5680fa18feaa87f3ff04063800aec256c3d4b4be/library/core/src/iter/traits/iterator.rs:1895:9\r\n  31: datafusion_sql::select::<impl datafusion_sql::planner::SqlToRel<S>>::prepare_select_exprs\r\n             at /rust/arrow-datafusion/datafusion/sql/src/select.rs:319:9\r\n  32: datafusion_sql::select::<impl datafusion_sql::planner::SqlToRel<S>>::select_to_plan\r\n             at /rust/arrow-datafusion/datafusion/sql/src/select.rs:85:28\r\n  33: datafusion_sql::set_expr::<impl datafusion_sql::planner::SqlToRel<S>>::set_expr_to_plan\r\n             at /rust/arrow-datafusion/datafusion/sql/src/set_expr.rs:30:35\r\n  34: datafusion_sql::query::<impl datafusion_sql::planner::SqlToRel<S>>::query_to_plan_with_schema\r\n             at /rust/arrow-datafusion/datafusion/sql/src/query.rs:80:20\r\n  35: datafusion_sql::query::<impl datafusion_sql::planner::SqlToRel<S>>::query_to_plan\r\n             at /rust/arrow-datafusion/datafusion/sql/src/query.rs:41:9\r\n  36: datafusion_sql::statement::<impl datafusion_sql::planner::SqlToRel<S>>::sql_statement_to_plan_with_context_impl\r\n             at /rust/arrow-datafusion/datafusion/sql/src/statement.rs:137:40\r\n  37: datafusion_sql::statement::<impl datafusion_sql::planner::SqlToRel<S>>::sql_statement_to_plan\r\n             at /rust/arrow-datafusion/datafusion/sql/src/statement.rs:105:9\r\n  38: datafusion_sql::statement::<impl datafusion_sql::planner::SqlToRel<S>>::statement_to_plan\r\n             at /rust/arrow-datafusion/datafusion/sql/src/statement.rs:92:42\r\n  39: datafusion::execution::context::SessionState::statement_to_plan::{{closure}}\r\n             at /rust/arrow-datafusion/datafusion/core/src/execution/context.rs:1859:9\r\n  40: datafusion_cli::exec::exec_and_print::{{closure}}\r\n             at ./src/exec.rs:213:61\r\n  41: datafusion_cli::exec::exec_from_repl::{{closure}}\r\n             at ./src/exec.rs:167:65\r\n  42: datafusion_cli::main::{{closure}}\r\n             at ./src/main.rs:206:14\r\n```\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes, existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7434/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7431", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7431/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7431/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7431/events", "html_url": "https://github.com/apache/datafusion/pull/7431", "id": 1869508081, "node_id": "PR_kwDOFWSkxs5Y6-U2", "number": 7431, "title": "Minor: Debug log when FairPool is created", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-28T10:47:06Z", "updated_at": "2023-08-28T17:23:34Z", "closed_at": "2023-08-28T17:23:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7431", "html_url": "https://github.com/apache/datafusion/pull/7431", "diff_url": "https://github.com/apache/datafusion/pull/7431.diff", "patch_url": "https://github.com/apache/datafusion/pull/7431.patch", "merged_at": "2023-08-28T17:23:34Z"}, "body": "## Which issue does this PR close?\r\n\r\nFollow up to https://github.com/apache/arrow-datafusion/pull/7424\r\n\r\n## Rationale for this change\r\n\r\nI noticed that there was a log entry when a Greedy pool was created, but not entry when a Fair pool was created.\r\n\r\n\r\n## What changes are included in this PR?\r\nAdd debug log entry when `FairSpillPool` is created\r\n\r\nThis is the same basic message as for the existing greedy pool: \r\nhttps://github.com/apache/arrow-datafusion/blob/2503bda50ced1bc983280e0b7783a482bc1d5714/datafusion/execution/src/memory_pool/pool.rs#L63\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7431/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7428", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7428/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7428/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7428/events", "html_url": "https://github.com/apache/datafusion/pull/7428", "id": 1868818390, "node_id": "PR_kwDOFWSkxs5Y4n5F", "number": 7428, "title": "[minior fix]: adjust the projection statistics", "user": {"login": "liukun4515", "id": 7450163, "node_id": "MDQ6VXNlcjc0NTAxNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7450163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liukun4515", "html_url": "https://github.com/liukun4515", "followers_url": "https://api.github.com/users/liukun4515/followers", "following_url": "https://api.github.com/users/liukun4515/following{/other_user}", "gists_url": "https://api.github.com/users/liukun4515/gists{/gist_id}", "starred_url": "https://api.github.com/users/liukun4515/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liukun4515/subscriptions", "organizations_url": "https://api.github.com/users/liukun4515/orgs", "repos_url": "https://api.github.com/users/liukun4515/repos", "events_url": "https://api.github.com/users/liukun4515/events{/privacy}", "received_events_url": "https://api.github.com/users/liukun4515/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-28T02:09:34Z", "updated_at": "2023-08-31T09:04:47Z", "closed_at": "2023-08-31T09:04:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7428", "html_url": "https://github.com/apache/datafusion/pull/7428", "diff_url": "https://github.com/apache/datafusion/pull/7428.diff", "patch_url": "https://github.com/apache/datafusion/pull/7428.patch", "merged_at": "2023-08-31T09:04:47Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n\r\n- support `total_byte_size` use the primitive_size of the `datatype`\r\n- if column of projection can't get the primitive_size, use the child statistic as statistics of the projection\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7428/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7424", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7424/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7424/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7424/events", "html_url": "https://github.com/apache/datafusion/pull/7424", "id": 1867940284, "node_id": "PR_kwDOFWSkxs5Y1578", "number": 7424, "title": "feat: Add memory pool configuration to `datafusion-cli`", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-26T06:46:11Z", "updated_at": "2023-08-28T10:43:39Z", "closed_at": "2023-08-28T10:43:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7424", "html_url": "https://github.com/apache/datafusion/pull/7424", "diff_url": "https://github.com/apache/datafusion/pull/7424.diff", "patch_url": "https://github.com/apache/datafusion/pull/7424.patch", "merged_at": "2023-08-28T10:43:38Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7419\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7424/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7424/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7417", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7417/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7417/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7417/events", "html_url": "https://github.com/apache/datafusion/pull/7417", "id": 1867204918, "node_id": "PR_kwDOFWSkxs5YzbbQ", "number": 7417, "title": "ScalarFunctionExpr Maintaining Order", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-25T14:55:17Z", "updated_at": "2023-09-05T17:43:53Z", "closed_at": "2023-09-03T21:18:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7417", "html_url": "https://github.com/apache/datafusion/pull/7417", "diff_url": "https://github.com/apache/datafusion/pull/7417.diff", "patch_url": "https://github.com/apache/datafusion/pull/7417.patch", "merged_at": "2023-09-03T21:18:16Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nAfter `ProjectionExec` is able to propagate the orders of non-column expressions, it is also possible to preserve the order of some `ScalarFunctionExpr`'s. This PR implements that feature. \r\n\r\nThis PR is the 3rd step of https://github.com/apache/arrow-datafusion/pull/7296 and https://github.com/apache/arrow-datafusion/pull/7364 PR's. Now, we have the support of propagating the sort order over different kinds of `PhysicalExpr`'s at the projection stage.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nWhile creating `ScalarFunctionExpr`, we check its order preservation info from `BuiltinScalarFunction`.  `math_expressions` and `datetime_expressions` are labeled according to their functional monotonicity. `ScalarFunctionExpr` now has a field `monotonicity: Option<FuncMonotonicity>`. `FuncMonotonicity` keeps monotonicity information of the function. It is one to one mapped to `args` of the function, and it specifies the effect of an increase or decrease in the corresponding `arg` to the function value.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, by .slt tests with some of the functions.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7417/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7416", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7416/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7416/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7416/events", "html_url": "https://github.com/apache/datafusion/pull/7416", "id": 1867169995, "node_id": "PR_kwDOFWSkxs5YzTyp", "number": 7416, "title": "Fix python CI", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-25T14:34:26Z", "updated_at": "2023-08-25T16:11:40Z", "closed_at": "2023-08-25T16:11:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7416", "html_url": "https://github.com/apache/datafusion/pull/7416", "diff_url": "https://github.com/apache/datafusion/pull/7416.diff", "patch_url": "https://github.com/apache/datafusion/pull/7416.patch", "merged_at": "2023-08-25T16:11:40Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses https://github.com/apache/arrow-datafusion/pull/7407\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nBased on suggestion in https://github.com/actions/setup-python/issues/709\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7416/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7416/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7409", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7409/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7409/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7409/events", "html_url": "https://github.com/apache/datafusion/pull/7409", "id": 1866496381, "node_id": "PR_kwDOFWSkxs5YxABe", "number": 7409, "title": "Replace lazy_static with OnceLock", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-25T07:27:02Z", "updated_at": "2023-08-26T09:01:05Z", "closed_at": "2023-08-25T20:46:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7409", "html_url": "https://github.com/apache/datafusion/pull/7409", "diff_url": "https://github.com/apache/datafusion/pull/7409.diff", "patch_url": "https://github.com/apache/datafusion/pull/7409.patch", "merged_at": "2023-08-25T20:46:11Z"}, "body": "## Which issue does this PR close?\r\nCloses #7408 \r\n\r\n## Rationale for this change\r\nAs of Rust 1.70, we can use `OnceLock` as a standard Rust library.\r\nSo, this PR proposes to replace  `lazy_static` with `OnceLock` to reduce third-party dependency.\r\n\r\n## Are these changes tested?\r\nDone by existing tests.\r\n\r\n## Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7409/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7409/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7405", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7405/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7405/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7405/events", "html_url": "https://github.com/apache/datafusion/pull/7405", "id": 1866312819, "node_id": "PR_kwDOFWSkxs5YwXb1", "number": 7405, "title": "Minor: Remove the unreached simplification rule for `0 / 0`", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-25T05:21:12Z", "updated_at": "2023-08-26T12:28:12Z", "closed_at": "2023-08-26T10:49:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7405", "html_url": "https://github.com/apache/datafusion/pull/7405", "diff_url": "https://github.com/apache/datafusion/pull/7405.diff", "patch_url": "https://github.com/apache/datafusion/pull/7405.patch", "merged_at": "2023-08-26T10:49:50Z"}, "body": "## Which issue does this PR close?\r\n\r\n\r\n\r\nCloses #3849 \r\nCloses #4669 \r\n\r\nNow both `0 / 0` and `10 / 0` will result in the same `DivideByZero` error.\r\n```shell\r\nDataFusion CLI v30.0.0\r\n\u276f select 0/0;\r\nOptimizer rule 'simplify_expressions' failed\r\ncaused by\r\nArrow error: Divide by zero error\r\n\u276f select 10/0;\r\nOptimizer rule 'simplify_expressions' failed\r\ncaused by\r\nArrow error: Divide by zero error\r\n\r\n```\r\n## Rationale for this change\r\nThe const evaluator will first eliminate the expression `0 / 0` and raise a DivideByZero error.\r\nhttps://github.com/apache/arrow-datafusion/blob/ea9144e6597593c09a4ef0b71a4da1cdfaca8249/datafusion/optimizer/src/simplify_expressions/expr_simplifier.rs#L129-L130\r\nThen this rule will never have a match.\r\nhttps://github.com/apache/arrow-datafusion/blob/ea9144e6597593c09a4ef0b71a4da1cdfaca8249/datafusion/optimizer/src/simplify_expressions/expr_simplifier.rs#L709-L715\r\n\r\nFurthermore, the behavior of this rule is inconsistent with the results of the following test case.\r\nhttps://github.com/apache/arrow-datafusion/blob/ea9144e6597593c09a4ef0b71a4da1cdfaca8249/datafusion/optimizer/src/simplify_expressions/expr_simplifier.rs#L1666-L1675\r\n\r\n## What changes are included in this PR?\r\nRemove an unreached simplification rule.\r\n\r\n## Are these changes tested?\r\nN/A\r\n\r\n## Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7405/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7404", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7404/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7404/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7404/events", "html_url": "https://github.com/apache/datafusion/pull/7404", "id": 1866290819, "node_id": "PR_kwDOFWSkxs5YwSh5", "number": 7404, "title": "Fix Decimal256 scalar display string in sqllogictest", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-25T05:01:56Z", "updated_at": "2023-08-25T17:41:23Z", "closed_at": "2023-08-25T17:41:14Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7404", "html_url": "https://github.com/apache/datafusion/pull/7404", "diff_url": "https://github.com/apache/datafusion/pull/7404.diff", "patch_url": "https://github.com/apache/datafusion/pull/7404.patch", "merged_at": "2023-08-25T17:41:14Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nA followup to #7048.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nIn #7048, one question is the display string of Decimal256 scalar is different to Decimal128 in sqllogictest. This patch fixes it.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7404/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7404/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7403", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7403/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7403/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7403/events", "html_url": "https://github.com/apache/datafusion/pull/7403", "id": 1866274860, "node_id": "PR_kwDOFWSkxs5YwO-w", "number": 7403, "title": "Make sqllogictest distinguish NaN from -NaN", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-25T04:46:00Z", "updated_at": "2023-09-01T16:24:49Z", "closed_at": "2023-08-25T19:49:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7403", "html_url": "https://github.com/apache/datafusion/pull/7403", "diff_url": "https://github.com/apache/datafusion/pull/7403.diff", "patch_url": "https://github.com/apache/datafusion/pull/7403.patch", "merged_at": "2023-08-25T19:49:51Z"}, "body": "## Which issue does this PR close?\r\nCloses #7402 \r\n\r\n## Rationale for this change\r\nDataFusion distinguishes `NaN` and `-NaN` so sqllogictest should distinguish them for precise test.\r\n\r\n## What changes are included in this PR?\r\nChanged `conversion.rs` so that it returns `\"-NaN\"` if a value is a kind of `NaN` and its sign is negative.\r\n\r\n## Are these changes tested?\r\nModified existing test and added a simple test to `select.rs`.\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7403/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7403/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7399", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7399/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7399/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7399/events", "html_url": "https://github.com/apache/datafusion/pull/7399", "id": 1865485540, "node_id": "PR_kwDOFWSkxs5YtjoQ", "number": 7399, "title": "Clean up clippy for Rust 1.72 release", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-24T16:12:17Z", "updated_at": "2023-08-24T17:23:47Z", "closed_at": "2023-08-24T17:23:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7399", "html_url": "https://github.com/apache/datafusion/pull/7399", "diff_url": "https://github.com/apache/datafusion/pull/7399.diff", "patch_url": "https://github.com/apache/datafusion/pull/7399.patch", "merged_at": "2023-08-24T17:23:44Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses https://github.com/apache/arrow-datafusion/issues/7398\r\n\r\n## Rationale for this change\r\n\r\nA new version of clippy was released that is much pickier\r\n\r\n## What changes are included in this PR?\r\nFix new clippy lints (many via `cargo clippy --fix`)\r\n\r\n## Are these changes tested?\r\nexisting coverage\r\n\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7399/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7397", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7397/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7397/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7397/events", "html_url": "https://github.com/apache/datafusion/pull/7397", "id": 1865357456, "node_id": "PR_kwDOFWSkxs5YtHq7", "number": 7397, "title": "feat: support Binary for `min/max`", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-24T15:02:06Z", "updated_at": "2023-08-25T19:49:42Z", "closed_at": "2023-08-25T19:49:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7397", "html_url": "https://github.com/apache/datafusion/pull/7397", "diff_url": "https://github.com/apache/datafusion/pull/7397.diff", "patch_url": "https://github.com/apache/datafusion/pull/7397.patch", "merged_at": "2023-08-25T19:49:42Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nParts #7345\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7397/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7396", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7396/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7396/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7396/events", "html_url": "https://github.com/apache/datafusion/pull/7396", "id": 1865315606, "node_id": "PR_kwDOFWSkxs5Ys-ed", "number": 7396, "title": "Make `LogicalPlan::with_new_exprs,` deprecate `from_plan`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-08-24T14:41:01Z", "updated_at": "2023-09-07T16:43:26Z", "closed_at": "2023-09-06T16:25:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7396", "html_url": "https://github.com/apache/datafusion/pull/7396", "diff_url": "https://github.com/apache/datafusion/pull/7396.diff", "patch_url": "https://github.com/apache/datafusion/pull/7396.patch", "merged_at": "2023-09-06T16:25:05Z"}, "body": "## Which issue does this PR close?\r\nrelated to https://github.com/apache/arrow-datafusion/pull/7359\r\n\r\n## Rationale for this change\r\n\r\nWhile reviewing a great documentation improvement from  @tshauck  it took me a while to find the `from_plan` function used to rewrite LogicalPlans. See https://github.com/apache/arrow-datafusion/pull/7359#discussion_r1304408534\r\n\r\nI think this makes it harder to work with the DataFusion codebase unnecessarily.\r\n\r\nThe reason it took me a while to find I think was\r\n1.  Isn't method on `LogicalPlan` (it is in a utility module). \r\n2. It didn't have `expr` or `exprs` in its name\r\n\r\nThus, given it takes a `&LogicalPlan` as its first input I think it makes sense and would be more easily findable as a method on `LogicalPlan`.\r\n\r\nIt also turns out `from_plan` forces `Expr`s to be copied even when most callsites already have a copy of those exprs\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Move from `from_plan` to  `LogicalPlan::with_new_exprs()` \r\n4. deprecate `from_plan`\r\n5. Avoid a copy in `new_with_exprs` (see second commit in this PR)\r\n\r\nNote that `LogicalPlan::new_with_exprs` take a `Vec<Expr>` instead of `&[Expr]` like `from_plan` as it needs the owned Exprs anyways\r\n\r\n## Are these changes tested?\r\nBy existing tests\r\n\r\n## Are there any user-facing changes?\r\nNew API, deprecated old one\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7396/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7396/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7395", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7395/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7395/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7395/events", "html_url": "https://github.com/apache/datafusion/pull/7395", "id": 1864993783, "node_id": "PR_kwDOFWSkxs5Yr38P", "number": 7395, "title": "Unnecessary to list all files during partition pruning", "user": {"login": "smallzhongfeng", "id": 84573424, "node_id": "MDQ6VXNlcjg0NTczNDI0", "avatar_url": "https://avatars.githubusercontent.com/u/84573424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smallzhongfeng", "html_url": "https://github.com/smallzhongfeng", "followers_url": "https://api.github.com/users/smallzhongfeng/followers", "following_url": "https://api.github.com/users/smallzhongfeng/following{/other_user}", "gists_url": "https://api.github.com/users/smallzhongfeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/smallzhongfeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smallzhongfeng/subscriptions", "organizations_url": "https://api.github.com/users/smallzhongfeng/orgs", "repos_url": "https://api.github.com/users/smallzhongfeng/repos", "events_url": "https://api.github.com/users/smallzhongfeng/events{/privacy}", "received_events_url": "https://api.github.com/users/smallzhongfeng/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-24T11:52:07Z", "updated_at": "2023-08-25T02:32:25Z", "closed_at": "2023-08-24T13:38:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7395", "html_url": "https://github.com/apache/datafusion/pull/7395", "diff_url": "https://github.com/apache/datafusion/pull/7395.diff", "patch_url": "https://github.com/apache/datafusion/pull/7395.patch", "merged_at": "2023-08-24T13:38:34Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nNo need to iterate through all files when query contains partition criteria.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7395/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7392", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7392/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7392/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7392/events", "html_url": "https://github.com/apache/datafusion/pull/7392", "id": 1864001577, "node_id": "PR_kwDOFWSkxs5YojDk", "number": 7392, "title": "Minor: Move test for `Distribution` and `Partitioning` with code", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-23T20:57:17Z", "updated_at": "2023-08-24T10:25:34Z", "closed_at": "2023-08-24T10:25:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7392", "html_url": "https://github.com/apache/datafusion/pull/7392", "diff_url": "https://github.com/apache/datafusion/pull/7392.diff", "patch_url": "https://github.com/apache/datafusion/pull/7392.patch", "merged_at": "2023-08-24T10:25:19Z"}, "body": "## Which issue does this PR close?\r\n\r\nRelated to #1754 \r\n\r\n## Rationale for this change\r\n\r\nKeeping the test with the code it is testing is a good thing. The code for `Distribution` and `Partitioning` was moved to `datafusion-physical-expr` at some point, so the test for it should be as well\r\n\r\n## What changes are included in this PR?\r\n\r\nMove tests\r\n\r\n## Are these changes tested?\r\nyesty\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nno\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7392/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7391", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7391/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7391/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7391/events", "html_url": "https://github.com/apache/datafusion/pull/7391", "id": 1863993680, "node_id": "PR_kwDOFWSkxs5YohUC", "number": 7391, "title": "Minor: move datasource statistics code into its own module", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T20:50:37Z", "updated_at": "2023-08-24T10:26:38Z", "closed_at": "2023-08-24T10:26:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7391", "html_url": "https://github.com/apache/datafusion/pull/7391", "diff_url": "https://github.com/apache/datafusion/pull/7391.diff", "patch_url": "https://github.com/apache/datafusion/pull/7391.patch", "merged_at": "2023-08-24T10:26:29Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\nI am just trying to clean up the code, and I ran into this code that was in need of a home while doing so\r\n\r\n## What changes are included in this PR?\r\nMove statistics code for datasource into its own module\r\n\r\n## Are these changes tested?\r\nchecked by compiler\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7391/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7390", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7390/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7390/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7390/events", "html_url": "https://github.com/apache/datafusion/pull/7390", "id": 1863971299, "node_id": "PR_kwDOFWSkxs5YockR", "number": 7390, "title": "Support Configuring Arrow RecordBatch Writers via SQL Statement Options", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-08-23T20:32:13Z", "updated_at": "2023-09-08T13:58:38Z", "closed_at": "2023-08-29T09:32:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7390", "html_url": "https://github.com/apache/datafusion/pull/7390", "diff_url": "https://github.com/apache/datafusion/pull/7390.diff", "patch_url": "https://github.com/apache/datafusion/pull/7390.patch", "merged_at": "2023-08-29T09:32:39Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7322\r\nCloses #7298\r\n\r\n## Rationale for this change\r\n\r\nCurrently, the only way to configure how files are written out as a result of `INSERT` or `COPY` statements is via session level configuration. Additionally, string parsing of some special arbitrary SQL statement options are handled in various places in DataFusion on an adhoc basis (such as the current per_thread_output setting in `COPY `).\r\n\r\nThis PR aims to consolidate logic for parsing arbitrary SQL statement options and support reuse of code, including in downstream systems which may choose to support their own special arbitrary options. \r\n\r\n## What changes are included in this PR?\r\n\r\n- Move existing parquet setting string parsing logic to datafusion-common\r\n- Create abstractions to make working with tuples of arbitrary string options easier\r\n- Create a new DataFusionError type for unsupported options\r\n- Implement string parsing logic for CSV and JSON settings\r\n- Support writing compressed CSV and JSON files (this one is a DataFusion specific write option)\r\n- Rename `per_thread_output` option to `single_file_output` as I believe this is less ambiguous in DataFusion (DuckDB uses the `per_thread_output` option, but the reference to threads doesn't really make sense in DataFusion). This also makes more sense in a table context where a listing table can be backed by a single file or not.\r\n\r\nAn example of a new query supported by this PR:\r\n\r\n```sql\r\nCOPY source_table TO \r\n'./table' \r\n(format parquet, \r\nsingle_file_output false, \r\ncompression 'zstd(10)');\r\n```\r\n\r\n### Notable work that is important for follow ons\r\n- Support these options in the DataFrame::write_* functions without requiring passing of strings (current thinking is to allow passing a fully formed writer builder object directly).\r\n- Improve test coverage of various combinations of write options.\r\n\r\n## Are these changes tested?\r\n\r\nYes, via existing tests and some new ones. However, there is now a very large number of possible option combinations. We may want to implement some dynamic test case generation framework to ensure no specific combination of options will fail.\r\n\r\n## Are there any user-facing changes?\r\n\r\nYes, writes now support most options that the various arrow writers support via SQL statements. The primary exception right now is column specific parquet options (i.e. setting an encoding for only 1 column). Additional work will be needed to support that.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7390/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7389", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7389/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7389/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7389/events", "html_url": "https://github.com/apache/datafusion/pull/7389", "id": 1863854815, "node_id": "PR_kwDOFWSkxs5YoDTt", "number": 7389, "title": "Minor: remove stray `println!` from `array_expressions.rs`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T18:56:44Z", "updated_at": "2023-08-23T20:16:30Z", "closed_at": "2023-08-23T20:16:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7389", "html_url": "https://github.com/apache/datafusion/pull/7389", "diff_url": "https://github.com/apache/datafusion/pull/7389.diff", "patch_url": "https://github.com/apache/datafusion/pull/7389.patch", "merged_at": "2023-08-23T20:16:21Z"}, "body": "## Which issue does this PR close?\r\n\r\nThis appears to have crept in as part of #7313\r\n\r\n## Rationale for this change\r\n\r\nwhen I run sqllogictest it looks like\r\n\r\n```\r\nRunning \"nullif.slt\"\r\nRunning \"array.slt\"\r\nRunning \"type_coercion.slt\"\r\nRunning \"clickbench.slt\"\r\nRunning \"information_schema_columns.slt\"\r\nRunning \"information_schema_multiple_catalogs.slt\"\r\nargs[0]: ListArray\r\n[\r\n  PrimitiveArray<Int64>\r\n[\r\n  1,\r\n],\r\n]\r\nargs[0]: ListArray\r\n[\r\n  NullArray(0),\r\n]\r\n...\r\n  PrimitiveArray<Int64>\r\n[\r\n  null,\r\n  18,\r\n],\r\n],\r\n]\r\n\r\nCompilation finished at Wed Aug 23 14:32:11\r\n\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\ndelete `println!`\r\n\r\n## Are these changes tested?\r\nexisting tests\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7389/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7389/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7388", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7388/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7388/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7388/events", "html_url": "https://github.com/apache/datafusion/pull/7388", "id": 1863767061, "node_id": "PR_kwDOFWSkxs5YnwTi", "number": 7388, "title": "Docs: Add query syntax to `COPY` docs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T17:49:56Z", "updated_at": "2023-08-24T13:41:04Z", "closed_at": "2023-08-24T13:40:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7388", "html_url": "https://github.com/apache/datafusion/pull/7388", "diff_url": "https://github.com/apache/datafusion/pull/7388.diff", "patch_url": "https://github.com/apache/datafusion/pull/7388.patch", "merged_at": "2023-08-24T13:40:58Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/7319\r\n\r\n## Rationale for this change\r\n\r\nOne thing I noticed while reviewing https://github.com/apache/arrow-datafusion/pull/7362 (thank you @spaydar !!) was that it didn't mention the `COPY (SELECT ...)` syntax, which is quite helpful for reordering input, for example. \r\n\r\n## What changes are included in this PR?\r\n\r\nAdd note and example of using  `COPY (SELECT ...)` and define what DDL/DML are\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nbetter docs\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7388/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7388/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7387", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7387/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7387/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7387/events", "html_url": "https://github.com/apache/datafusion/pull/7387", "id": 1863598772, "node_id": "PR_kwDOFWSkxs5YnL7f", "number": 7387, "title": "Update sqlparser requirement from 0.36.1 to 0.37.0", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T15:49:35Z", "updated_at": "2023-08-23T18:04:32Z", "closed_at": "2023-08-23T17:31:24Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7387", "html_url": "https://github.com/apache/datafusion/pull/7387", "diff_url": "https://github.com/apache/datafusion/pull/7387.diff", "patch_url": "https://github.com/apache/datafusion/pull/7387.patch", "merged_at": "2023-08-23T17:31:24Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7386.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n[dependabot](https://github.com/apps/dependabot) failed to update sqlparser due to some upstream changes.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nUpdate sqlparser requirement from 0.36.1 to 0.37.0\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7387/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7385", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7385/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7385/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7385/events", "html_url": "https://github.com/apache/datafusion/pull/7385", "id": 1862757634, "node_id": "PR_kwDOFWSkxs5YkUah", "number": 7385, "title": "fix: inconsistent scalar types in `DistinctArrayAggAccumulator` state", "user": {"login": "korowa", "id": 13005055, "node_id": "MDQ6VXNlcjEzMDA1MDU1", "avatar_url": "https://avatars.githubusercontent.com/u/13005055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/korowa", "html_url": "https://github.com/korowa", "followers_url": "https://api.github.com/users/korowa/followers", "following_url": "https://api.github.com/users/korowa/following{/other_user}", "gists_url": "https://api.github.com/users/korowa/gists{/gist_id}", "starred_url": "https://api.github.com/users/korowa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/korowa/subscriptions", "organizations_url": "https://api.github.com/users/korowa/orgs", "repos_url": "https://api.github.com/users/korowa/repos", "events_url": "https://api.github.com/users/korowa/events{/privacy}", "received_events_url": "https://api.github.com/users/korowa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T07:42:28Z", "updated_at": "2023-08-24T18:24:58Z", "closed_at": "2023-08-24T18:24:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7385", "html_url": "https://github.com/apache/datafusion/pull/7385", "diff_url": "https://github.com/apache/datafusion/pull/7385.diff", "patch_url": "https://github.com/apache/datafusion/pull/7385.patch", "merged_at": "2023-08-24T18:24:52Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #6743.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nCurrently `DistinctArrayAggAccumulator` stores its state as a set of scalar values and returns it as a single scalar list. The problem is that while merging state, accumulator, instead of adding list elements, simply adds the whole list to the state as a single value, which causes errors while executing `evaluate` on accumulator with merged state.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n`merge_state` now unpacks scalar list input and updates state with its elements.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n- tests for merging `DistinctArrayAggAccumulator`s have been added, \r\n- check for successful execution of `array_agg(distinct col)` has been added to sqllogictests\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n`array_agg(distinct)` should not fail in case query execution requires merging accumulator states (e. g. aggregation over multiple partitions)\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7385/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7384", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7384/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7384/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7384/events", "html_url": "https://github.com/apache/datafusion/pull/7384", "id": 1862750198, "node_id": "PR_kwDOFWSkxs5YkSzH", "number": 7384, "title": "Bug-fix/next_value() of Min/Max Scalar Values", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T07:37:56Z", "updated_at": "2023-08-23T19:10:07Z", "closed_at": "2023-08-23T18:20:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7384", "html_url": "https://github.com/apache/datafusion/pull/7384", "diff_url": "https://github.com/apache/datafusion/pull/7384.diff", "patch_url": "https://github.com/apache/datafusion/pull/7384.patch", "merged_at": "2023-08-23T18:20:05Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\nWhy are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\nExplaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.\r\n\r\n-->\r\n\r\nIn the interval arithmetic library, there is a function converting open bounds to closed bounds for convenience. This function increments or decrements a bound's value (according to the side of the bound) one step-size of the corresponding datatype. However, some buggy cases have been realized:\r\n\r\n1. When a floating point value is 0 and it is tried to be decremented\r\n2. When a value is tried to be incremented when it is at its maximum\r\n3. When a value is tried to be decremented when it is at its minimum\r\n\r\nAfter the fix, when an integer is at its maximum/minimu, it remains the same. When a floating value is at its maximum/minimum, it becomes infinity/negative infinity.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nThere are minor changes in the implementation of next_value() function. The existing next_up()/next_down() functions are used for floating point values, while integers are checked firstly if they are at min/max.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7384/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7382", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7382/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7382/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7382/events", "html_url": "https://github.com/apache/datafusion/pull/7382", "id": 1862483294, "node_id": "PR_kwDOFWSkxs5YjZk-", "number": 7382, "title": "Add ROLLUP and GROUPING SETS substrait support", "user": {"login": "nseekhao", "id": 37189615, "node_id": "MDQ6VXNlcjM3MTg5NjE1", "avatar_url": "https://avatars.githubusercontent.com/u/37189615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nseekhao", "html_url": "https://github.com/nseekhao", "followers_url": "https://api.github.com/users/nseekhao/followers", "following_url": "https://api.github.com/users/nseekhao/following{/other_user}", "gists_url": "https://api.github.com/users/nseekhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/nseekhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nseekhao/subscriptions", "organizations_url": "https://api.github.com/users/nseekhao/orgs", "repos_url": "https://api.github.com/users/nseekhao/repos", "events_url": "https://api.github.com/users/nseekhao/events{/privacy}", "received_events_url": "https://api.github.com/users/nseekhao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T03:02:39Z", "updated_at": "2023-09-08T13:58:47Z", "closed_at": "2023-08-29T11:39:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7382", "html_url": "https://github.com/apache/datafusion/pull/7382", "diff_url": "https://github.com/apache/datafusion/pull/7382.diff", "patch_url": "https://github.com/apache/datafusion/pull/7382.patch", "merged_at": "2023-08-29T11:39:38Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7381 .\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nTo add support for aggregation with `ROLLUP` and `GROUPING SETS`.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n- Producer: `Expr::GroupingSet` to `substrait::proto::aggregate_rel::Grouping`\r\n  - Both `Rollup` gets expanded into equivalent grouping sets, since Substrait doesn't have a dedicated type for `ROLLUP`\r\n  - `Cube` is not yet supported\r\n- Consumer: `substrait::proto::aggregate_rel::Grouping` to `Expr::GroupingSet`\r\n- Tests: grouping sets, rollup\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\nYes.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\nNo.\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7382/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7382/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7378", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7378/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7378/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7378/events", "html_url": "https://github.com/apache/datafusion/pull/7378", "id": 1862182436, "node_id": "PR_kwDOFWSkxs5YiZVt", "number": 7378, "title": "Fix IN expr for NaN", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T20:45:04Z", "updated_at": "2023-08-24T12:21:01Z", "closed_at": "2023-08-24T12:21:00Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7378", "html_url": "https://github.com/apache/datafusion/pull/7378", "diff_url": "https://github.com/apache/datafusion/pull/7378.diff", "patch_url": "https://github.com/apache/datafusion/pull/7378.patch", "merged_at": "2023-08-24T12:21:00Z"}, "body": "## Which issue does this PR close?\r\nCloses #7377 \r\n\r\n## Rationale for this change\r\nThis PR fixes an issue that `'NaN'::double in ('NaN'::double)` is evaluated as `false`, which is inconsistent with the result of `'NaN'::double = 'NaN'::double`.\r\n\r\n## What changes are included in this PR?\r\nThe root cause is that equality is evaluated using `PartialEq::eq`. So the fix is using `to_bits` for equality check for float values like as `ScalarValue::Float64` does.\r\n\r\nNOTE: This issue doesn't happen when `Simplifier` simplifies `IN` expr like\r\n```\r\na IN (x, y, z) -> a = x OR a = y OR a = z\r\n```\r\n\r\n## Are these changes tested?\r\nModified an existing test.\r\n\r\n## Are there any user-facing changes?\r\nYes, but this change is for correctness.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7378/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7376", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7376/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7376/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7376/events", "html_url": "https://github.com/apache/datafusion/pull/7376", "id": 1861867557, "node_id": "PR_kwDOFWSkxs5YhT_V", "number": 7376, "title": "Specialize Median Accumulator", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T17:03:07Z", "updated_at": "2023-08-23T08:01:45Z", "closed_at": "2023-08-23T08:01:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7376", "html_url": "https://github.com/apache/datafusion/pull/7376", "diff_url": "https://github.com/apache/datafusion/pull/7376.diff", "patch_url": "https://github.com/apache/datafusion/pull/7376.patch", "merged_at": "2023-08-23T08:01:45Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #6842 \r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7376/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7376/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7375", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7375/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7375/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7375/events", "html_url": "https://github.com/apache/datafusion/pull/7375", "id": 1861775554, "node_id": "PR_kwDOFWSkxs5Yg_mr", "number": 7375, "title": "Use datum arithmetic scalar value", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-22T16:08:48Z", "updated_at": "2023-08-24T11:44:03Z", "closed_at": "2023-08-24T11:44:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7375", "html_url": "https://github.com/apache/datafusion/pull/7375", "diff_url": "https://github.com/apache/datafusion/pull/7375.diff", "patch_url": "https://github.com/apache/datafusion/pull/7375.patch", "merged_at": "2023-08-24T11:44:03Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #7353 \r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis avoids duplicated arithmetic logic, and moves us closer to replacing the custom ScalarValue logic with upstream kernels (#7353)\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\nThe upstream kernels have a couple of differences compared to the existing impls:\r\n\r\n* Null + v = Null, whereas previously it was v\r\n* Decimal precision is correctly updated\r\n* Heterogeneous interval arithmetic is not supported, this is instead the responsibility of the type coercion machinery\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7375/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7374", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7374/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7374/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7374/events", "html_url": "https://github.com/apache/datafusion/pull/7374", "id": 1861688042, "node_id": "PR_kwDOFWSkxs5Ygsaw", "number": 7374, "title": "Remove redundant type check in Avg", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-22T15:18:12Z", "updated_at": "2023-08-22T16:25:04Z", "closed_at": "2023-08-22T16:24:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7374", "html_url": "https://github.com/apache/datafusion/pull/7374", "diff_url": "https://github.com/apache/datafusion/pull/7374.diff", "patch_url": "https://github.com/apache/datafusion/pull/7374.patch", "merged_at": "2023-08-22T16:24:48Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nRemoved redundant type check in `Avg`. When I did a post-merging review of #7369, the old type check looks redundant as its type coercion is now explicit.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7374/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7372", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7372/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7372/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7372/events", "html_url": "https://github.com/apache/datafusion/pull/7372", "id": 1861566877, "node_id": "PR_kwDOFWSkxs5YgSTz", "number": 7372, "title": "Prepare 30.0.0 release", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-22T14:18:49Z", "updated_at": "2023-08-25T17:08:36Z", "closed_at": "2023-08-23T18:49:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7372", "html_url": "https://github.com/apache/datafusion/pull/7372", "diff_url": "https://github.com/apache/datafusion/pull/7372.diff", "patch_url": "https://github.com/apache/datafusion/pull/7372.patch", "merged_at": "2023-08-23T18:49:27Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nTime for a new release\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n- Bump version\r\n- [Changelog](https://github.com/andygrove/arrow-datafusion/blob/prep-30/dev/changelog/30.0.0.md)\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7372/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7372/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7371", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7371/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7371/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7371/events", "html_url": "https://github.com/apache/datafusion/pull/7371", "id": 1861428854, "node_id": "PR_kwDOFWSkxs5Yfz-i", "number": 7371, "title": "Optimize `Unnest` and implement `skip_nulls=true` if specified", "user": {"login": "smiklos", "id": 3218812, "node_id": "MDQ6VXNlcjMyMTg4MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3218812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smiklos", "html_url": "https://github.com/smiklos", "followers_url": "https://api.github.com/users/smiklos/followers", "following_url": "https://api.github.com/users/smiklos/following{/other_user}", "gists_url": "https://api.github.com/users/smiklos/gists{/gist_id}", "starred_url": "https://api.github.com/users/smiklos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smiklos/subscriptions", "organizations_url": "https://api.github.com/users/smiklos/orgs", "repos_url": "https://api.github.com/users/smiklos/repos", "events_url": "https://api.github.com/users/smiklos/events{/privacy}", "received_events_url": "https://api.github.com/users/smiklos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-22T13:07:16Z", "updated_at": "2023-08-24T19:55:53Z", "closed_at": "2023-08-24T13:39:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7371", "html_url": "https://github.com/apache/datafusion/pull/7371", "diff_url": "https://github.com/apache/datafusion/pull/7371.diff", "patch_url": "https://github.com/apache/datafusion/pull/7371.patch", "merged_at": "2023-08-24T13:39:29Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nrelated to #7087.\r\nCloses #6961\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis implements the new preserve_nulls option in unnest exec. \r\nI've also adjusted the code to avoid copying and rely only on the take kernel as needed.\r\n\r\nTodo\r\n\r\n- [ ] Set preserve_nulls to false -> If we really want align with clickhouse etc. \r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\nThe code will now respect the flag `preserve_nulls`  in `UnnestOptions`. \r\nThis way we can also make the sql api consistent with Clickhouse/duckdb while allowing dataframe users to choose between implementations. \r\n\r\n\r\n## Are these changes tested?\r\nYes, added some new tests as well. \r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\nNo\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7371/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7371/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7369", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7369/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7369/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7369/events", "html_url": "https://github.com/apache/datafusion/pull/7369", "id": 1861269428, "node_id": "PR_kwDOFWSkxs5YfRAV", "number": 7369, "title": "Make `SUM` and `AVG` Aggregate Type Coercion Explicit", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T11:34:19Z", "updated_at": "2023-08-22T14:16:52Z", "closed_at": "2023-08-22T14:16:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7369", "html_url": "https://github.com/apache/datafusion/pull/7369", "diff_url": "https://github.com/apache/datafusion/pull/7369.diff", "patch_url": "https://github.com/apache/datafusion/pull/7369.patch", "merged_at": "2023-08-22T14:16:52Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nCurrently various accumulators contain internal logic to coerce inputs to supported types, this has a few issues:\r\n\r\n* The cast is hidden from the plan\r\n    * This prevents the optimizer from seeing it, potentially resulting in redundant casts\r\n    * Hides the cast from the user which makes it not immediately obvious what is occurring\r\n* Complicates specializing the accumulators as the input types aren't defined (#6842)\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7369/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7368", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7368/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7368/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7368/events", "html_url": "https://github.com/apache/datafusion/pull/7368", "id": 1861213314, "node_id": "PR_kwDOFWSkxs5YfEme", "number": 7368, "title": "Support `REPLACE` SQL alias syntax", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T10:58:31Z", "updated_at": "2023-09-08T13:56:52Z", "closed_at": "2023-08-23T18:17:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7368", "html_url": "https://github.com/apache/datafusion/pull/7368", "diff_url": "https://github.com/apache/datafusion/pull/7368.diff", "patch_url": "https://github.com/apache/datafusion/pull/7368.patch", "merged_at": "2023-08-23T18:17:05Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7367.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThere are 2 different REPLACE usages in some other platforms: One of them is like:\r\n```\r\nSELECT product_id, \r\nREPLACE(product_name, 'OldBrand', 'NewBrand') AS modified_product_name,\r\nprice\r\nFROM products;\r\n```\r\nwhich already works successfully, and the second one is like:\r\n```\r\nSELECT * REPLACE (price*2 AS price) FROM products \r\n```\r\n_for more examples: https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#select_replace_\r\nwhich is parsed and put into `WildcardAdditionalOptions`, but not evaluated. This PR completes the second version of REPLACE usage.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nAfter expanding wildcards, replace option in the `SelectItem` is checked. If it is Some, the corresponding expression is found and replaced with the new expression, but the name of that column is kept the same, by providing an alias as the original column name.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, with .slt tests\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7368/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7366", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7366/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7366/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7366/events", "html_url": "https://github.com/apache/datafusion/pull/7366", "id": 1861120933, "node_id": "PR_kwDOFWSkxs5YewS1", "number": 7366, "title": "Merge hash table implementations and remove leftover utilities", "user": {"login": "metesynnada", "id": 100111937, "node_id": "U_kgDOBfeWQQ", "avatar_url": "https://avatars.githubusercontent.com/u/100111937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metesynnada", "html_url": "https://github.com/metesynnada", "followers_url": "https://api.github.com/users/metesynnada/followers", "following_url": "https://api.github.com/users/metesynnada/following{/other_user}", "gists_url": "https://api.github.com/users/metesynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/metesynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metesynnada/subscriptions", "organizations_url": "https://api.github.com/users/metesynnada/orgs", "repos_url": "https://api.github.com/users/metesynnada/repos", "events_url": "https://api.github.com/users/metesynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/metesynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-22T10:05:22Z", "updated_at": "2023-08-23T20:22:10Z", "closed_at": "2023-08-23T19:47:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7366", "html_url": "https://github.com/apache/datafusion/pull/7366", "diff_url": "https://github.com/apache/datafusion/pull/7366.diff", "patch_url": "https://github.com/apache/datafusion/pull/7366.patch", "merged_at": "2023-08-23T19:47:37Z"}, "body": "## Which issue does this PR close?\r\n\r\nContinue on https://github.com/apache/arrow-datafusion/pull/6679.\r\n\r\n## Rationale for this change\r\n\r\nThe current implementation of the `JoinHashMap` and `SymmetricJoinHashMap` types could benefit from being more generic and flexible. Specifically, the ability to support different types of list data structures for chaining, as well as handling resizing in a more idiomatic and efficient manner, would be advantageous. This PR introduces the `JoinHashMapType` trait and implements it for both `JoinHashMap` and `PruningJoinHashMap`, which allows for more code reuse and a clearer separation of concerns. \r\n\r\nIn this PR, Several unused hash join utilities are removed. Also, we can introduce a vectorized implementation of `SymmetricHashJoin` that includes hash collision checks.\r\n\r\n## What changes are included in this PR?\r\n\r\n- Added a `JoinHashMapType` trait with methods for handling the mutable map and mutable list, as well as a method `as_any_mut` for dynamic downcasting.\r\n- Implemented the `JoinHashMapType` trait for both `JoinHashMap` and `PruningJoinHashMap`.\r\n- Updated the `update_hash` function to use the `JoinHashMapType` trait and only resize the list in the case of `PruningJoinHashMap`.\r\n- Updated the `build_equal_condition_join_indices` function to use the JoinHashMapType trait and introduced an offset parameter.\r\n- Added inline comments and docstrings for better readability and documentation of the code.\r\n\r\nI have removed `smallvec` completely from the code, but I am unsure whether or not to remove it from Cargo.toml.\r\n## Are these changes tested?\r\n\r\nYes, the changes are covered by the existing tests. No new tests were required as the new implementation preserves the existing functionality. All tests passed successfully after the changes were applied.\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo, the changes made in this PR are internal and do not affect the public API or the functionality of the crate.\r\n\r\ncc @Dandandan ", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7366/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7366/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7364", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7364/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7364/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7364/events", "html_url": "https://github.com/apache/datafusion/pull/7364", "id": 1860810572, "node_id": "PR_kwDOFWSkxs5YdrZX", "number": 7364, "title": "Projection Order Propagation", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-22T07:40:57Z", "updated_at": "2023-08-31T07:31:06Z", "closed_at": "2023-08-23T22:01:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7364", "html_url": "https://github.com/apache/datafusion/pull/7364", "diff_url": "https://github.com/apache/datafusion/pull/7364.diff", "patch_url": "https://github.com/apache/datafusion/pull/7364.patch", "merged_at": "2023-08-23T22:01:07Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7363.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n`ProjectionExec` cannot make the orderings of the non-column expressions propagate. However, we can find the PhysicalSortExpr of the expressions which are subject to projection, and use them to preserve ordering information.\r\n\r\nThis is the second step of a three-step improvement process. The first [one](https://github.com/apache/arrow-datafusion/pull/7296) addressed some bug fixes, and the third one will focus on `ScalarFunctionExpr`'s. With the assistance of these PRs, we can propagate order information over projections for various types of PhysicalExpr's.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n1) `ProjectionExec` holds the information of orderings of its projections.\r\n2) If the output ordering gets lost after the projection (since the column of input output ordering does not emerge in the new projection), new output ordering can be set over newly projected non-column expressions.\r\n3) Non-column projections are added to ordering equivalence classes.\r\n4) `PhysicalExpr`'s have a new method `get_ordering()`, which returns the `SortProperties` of the expression.\r\nWe need to be able to differentiate a non-ordered column and a literal value, so such a struct is added. \r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7364/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7364/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7362", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7362/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7362/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7362/events", "html_url": "https://github.com/apache/datafusion/pull/7362", "id": 1860703096, "node_id": "PR_kwDOFWSkxs5YdT12", "number": 7362, "title": "DML documentation", "user": {"login": "spaydar", "id": 29551413, "node_id": "MDQ6VXNlcjI5NTUxNDEz", "avatar_url": "https://avatars.githubusercontent.com/u/29551413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spaydar", "html_url": "https://github.com/spaydar", "followers_url": "https://api.github.com/users/spaydar/followers", "following_url": "https://api.github.com/users/spaydar/following{/other_user}", "gists_url": "https://api.github.com/users/spaydar/gists{/gist_id}", "starred_url": "https://api.github.com/users/spaydar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spaydar/subscriptions", "organizations_url": "https://api.github.com/users/spaydar/orgs", "repos_url": "https://api.github.com/users/spaydar/repos", "events_url": "https://api.github.com/users/spaydar/events{/privacy}", "received_events_url": "https://api.github.com/users/spaydar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-22T06:39:34Z", "updated_at": "2023-08-23T17:50:24Z", "closed_at": "2023-08-23T17:35:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7362", "html_url": "https://github.com/apache/datafusion/pull/7362", "diff_url": "https://github.com/apache/datafusion/pull/7362.diff", "patch_url": "https://github.com/apache/datafusion/pull/7362.patch", "merged_at": "2023-08-23T17:35:11Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7319.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, I can successfully build and view documentation locally as per [\"Build & Preview\" instructions](https://github.com/apache/arrow-datafusion/blob/main/docs/README.md#build--preview)\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7362/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7361", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7361/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7361/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7361/events", "html_url": "https://github.com/apache/datafusion/pull/7361", "id": 1860385780, "node_id": "PR_kwDOFWSkxs5YcO6m", "number": 7361, "title": "Add `exec_err!` error macro", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T01:13:59Z", "updated_at": "2023-08-23T17:28:57Z", "closed_at": "2023-08-23T17:28:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7361", "html_url": "https://github.com/apache/datafusion/pull/7361", "diff_url": "https://github.com/apache/datafusion/pull/7361.diff", "patch_url": "https://github.com/apache/datafusion/pull/7361.patch", "merged_at": "2023-08-23T17:28:57Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/7360.\r\n\r\n## Rationale for this change\r\n\r\nAdd `exec_err!` error macro to replace `DatafusionError::Execution` with more concise code and make error handling in single place \r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7361/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7359", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7359/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7359/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7359/events", "html_url": "https://github.com/apache/datafusion/pull/7359", "id": 1860322379, "node_id": "PR_kwDOFWSkxs5YcBXs", "number": 7359, "title": "docs: Add `Expr` library developer page", "user": {"login": "tshauck", "id": 421839, "node_id": "MDQ6VXNlcjQyMTgzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/421839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tshauck", "html_url": "https://github.com/tshauck", "followers_url": "https://api.github.com/users/tshauck/followers", "following_url": "https://api.github.com/users/tshauck/following{/other_user}", "gists_url": "https://api.github.com/users/tshauck/gists{/gist_id}", "starred_url": "https://api.github.com/users/tshauck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tshauck/subscriptions", "organizations_url": "https://api.github.com/users/tshauck/orgs", "repos_url": "https://api.github.com/users/tshauck/repos", "events_url": "https://api.github.com/users/tshauck/events{/privacy}", "received_events_url": "https://api.github.com/users/tshauck/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018882, "node_id": "MDU6TGFiZWwyOTIzMDE4ODgy", "url": "https://api.github.com/repos/apache/datafusion/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}, {"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-21T23:41:00Z", "updated_at": "2023-09-08T13:57:26Z", "closed_at": "2023-08-25T17:10:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7359", "html_url": "https://github.com/apache/datafusion/pull/7359", "diff_url": "https://github.com/apache/datafusion/pull/7359.diff", "patch_url": "https://github.com/apache/datafusion/pull/7359.patch", "merged_at": "2023-08-25T17:10:09Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7304\r\n\r\n## Rationale for this change\r\n\r\nThis fills out the expr and UDF pages a bit. I tried to cover enough of the UDFs so that I could link to it from the expr page. For the expr page, it doesn't match the outline exactly -- I probably have some blindspots, so certainly open to feedback.\r\n\r\n## What changes are included in this PR?\r\n\r\n- Scalar part of UDF library user page\r\n- Expr library user page\r\n\r\n## Are these changes tested?\r\n\r\nManually built the docs to review output.\r\n\r\n<img width=\"1582\" alt=\"image\" src=\"https://github.com/apache/arrow-datafusion/assets/421839/61399b10-529e-4c4e-a425-e30006ccde5b\">\r\n\r\n## Are there any user-facing changes?\r\n\r\nYes", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7359/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7358", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7358/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7358/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7358/events", "html_url": "https://github.com/apache/datafusion/pull/7358", "id": 1860311044, "node_id": "PR_kwDOFWSkxs5Yb-7O", "number": 7358, "title": "Specialize Avg and Sum accumulators (#6842)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-21T23:25:55Z", "updated_at": "2023-08-23T08:17:36Z", "closed_at": "2023-08-23T08:17:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7358", "html_url": "https://github.com/apache/datafusion/pull/7358", "diff_url": "https://github.com/apache/datafusion/pull/7358.diff", "patch_url": "https://github.com/apache/datafusion/pull/7358.patch", "merged_at": "2023-08-23T08:17:36Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #6842\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis makes it easier to see what is going on, and avoids using ScalarValue arithmetic\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7358/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7358/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7355", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7355/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7355/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7355/events", "html_url": "https://github.com/apache/datafusion/pull/7355", "id": 1859969790, "node_id": "PR_kwDOFWSkxs5Yazia", "number": 7355, "title": "Change error type of invalid argument to PlanError rather than InternalError, remove misleading comments", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-21T19:08:00Z", "updated_at": "2023-08-23T16:35:22Z", "closed_at": "2023-08-23T16:35:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7355", "html_url": "https://github.com/apache/datafusion/pull/7355", "diff_url": "https://github.com/apache/datafusion/pull/7355.diff", "patch_url": "https://github.com/apache/datafusion/pull/7355.patch", "merged_at": "2023-08-23T16:35:17Z"}, "body": "## Which issue does this PR close?\r\nrelated to #6108 and https://github.com/apache/arrow-datafusion/issues/7326\r\nrelated to https://github.com/apache/arrow-datafusion/pull/7339/\r\n\r\n## Rationale for this change\r\nInspired by @Weijun-H 's change in https://github.com/apache/arrow-datafusion/pull/7339 I was trying to clean up a comment I saw left over from https://github.com/apache/arrow-datafusion/pull/7339 I realized that not only are the comments in the rest of this file misleading the same bug also applied to several other functions. \r\n\r\nSpecifically, despite the comment claims that \"this should have been covered earlier\" it is clearly not and some of these error paths are directly user visible due to invalid queries (and thus should be plan errors, not internal errors). For example\r\n\r\n```\r\nDataFusion CLI v29.0.0\r\n\u276f select encode(1,2);\r\nInternal error: The encode function can only accept utf8 or binary.. This was likely caused by a bug in DataFusion's code and we would welcome that you file an bug report in our issue tracker\r\n\u276f select array_concat(1,2);\r\nInternal error: The array_concat function can only accept list as the args.. This was likely caused by a bug in DataFusion's code and we would welcome that you file an bug report in our issue tracker\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Change to DataFusionError::Plan\r\n2. Update tests\r\n3. Update comments\r\n\r\n\r\n## Are these changes tested?\r\nYes\r\n\r\n## Are there any user-facing changes?\r\nyes, better error messages\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7355/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7355/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7351", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7351/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7351/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7351/events", "html_url": "https://github.com/apache/datafusion/pull/7351", "id": 1859889800, "node_id": "PR_kwDOFWSkxs5Yah-P", "number": 7351, "title": "Deprecate ScalarValue bitor, bitand, and bitxor (#6842)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-21T18:08:10Z", "updated_at": "2023-08-21T21:04:23Z", "closed_at": "2023-08-21T21:04:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7351", "html_url": "https://github.com/apache/datafusion/pull/7351", "diff_url": "https://github.com/apache/datafusion/pull/7351.diff", "patch_url": "https://github.com/apache/datafusion/pull/7351.patch", "merged_at": "2023-08-21T21:04:22Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #6842\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7351/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7348", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7348/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7348/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7348/events", "html_url": "https://github.com/apache/datafusion/pull/7348", "id": 1858929059, "node_id": "PR_kwDOFWSkxs5YXN7X", "number": 7348, "title": "Implement `array_pop_back` function ", "user": {"login": "tanruixiang", "id": 34568378, "node_id": "MDQ6VXNlcjM0NTY4Mzc4", "avatar_url": "https://avatars.githubusercontent.com/u/34568378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanruixiang", "html_url": "https://github.com/tanruixiang", "followers_url": "https://api.github.com/users/tanruixiang/followers", "following_url": "https://api.github.com/users/tanruixiang/following{/other_user}", "gists_url": "https://api.github.com/users/tanruixiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanruixiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanruixiang/subscriptions", "organizations_url": "https://api.github.com/users/tanruixiang/orgs", "repos_url": "https://api.github.com/users/tanruixiang/repos", "events_url": "https://api.github.com/users/tanruixiang/events{/privacy}", "received_events_url": "https://api.github.com/users/tanruixiang/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-21T09:01:52Z", "updated_at": "2023-08-23T16:35:48Z", "closed_at": "2023-08-23T16:35:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7348", "html_url": "https://github.com/apache/datafusion/pull/7348", "diff_url": "https://github.com/apache/datafusion/pull/7348.diff", "patch_url": "https://github.com/apache/datafusion/pull/7348.patch", "merged_at": "2023-08-23T16:35:43Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #6997 .\r\n\r\n## Rationale for this change\r\nsee #6997 \r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nyes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7348/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7348/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7346", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7346/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7346/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7346/events", "html_url": "https://github.com/apache/datafusion/pull/7346", "id": 1858766958, "node_id": "PR_kwDOFWSkxs5YWqoZ", "number": 7346, "title": "fix: union_distinct shouldn't remove child distinct", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-21T07:23:57Z", "updated_at": "2023-08-23T18:49:58Z", "closed_at": "2023-08-23T18:49:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7346", "html_url": "https://github.com/apache/datafusion/pull/7346", "diff_url": "https://github.com/apache/datafusion/pull/7346.diff", "patch_url": "https://github.com/apache/datafusion/pull/7346.patch", "merged_at": "2023-08-23T18:49:58Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\noriginal code will remove distinct when they are children of union.\r\n\r\nBut we should't remove them, because\r\n\r\n1. distinct can decrease cardinaty/rowcount of union input\r\n2. sometime distinct can pushdown, such as distinct can pushdown through join.\r\n3. even if we want to remove distinct, we should create rule instead of eliminate distinct in plan builder\r\n\r\n## What changes are included in this PR?\r\n\r\nunion_distinct shouldn't remove child distinct\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n4. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7346/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7341", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7341/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7341/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7341/events", "html_url": "https://github.com/apache/datafusion/pull/7341", "id": 1857699783, "node_id": "PR_kwDOFWSkxs5YTQmD", "number": 7341, "title": "minor: fix doc/typo", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-19T12:41:50Z", "updated_at": "2023-08-19T17:57:35Z", "closed_at": "2023-08-19T17:57:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7341", "html_url": "https://github.com/apache/datafusion/pull/7341", "diff_url": "https://github.com/apache/datafusion/pull/7341.diff", "patch_url": "https://github.com/apache/datafusion/pull/7341.patch", "merged_at": "2023-08-19T17:57:28Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7341/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7341/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7340", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7340/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7340/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7340/events", "html_url": "https://github.com/apache/datafusion/pull/7340", "id": 1857578303, "node_id": "PR_kwDOFWSkxs5YS4iM", "number": 7340, "title": "Add `not_impl_err` error macro", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-19T05:32:58Z", "updated_at": "2023-08-21T19:07:28Z", "closed_at": "2023-08-21T19:07:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7340", "html_url": "https://github.com/apache/datafusion/pull/7340", "diff_url": "https://github.com/apache/datafusion/pull/7340.diff", "patch_url": "https://github.com/apache/datafusion/pull/7340.patch", "merged_at": "2023-08-21T19:07:27Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/pull/6740 https://github.com/apache/arrow-datafusion/pull/7115\r\n\r\n## Rationale for this change\r\nAdd `not_impl_err!` error macro to replace `DatafusionError::NotImplemented` with more concise code and make error handling in single place\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7340/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7340/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7339", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7339/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7339/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7339/events", "html_url": "https://github.com/apache/datafusion/pull/7339", "id": 1857530479, "node_id": "PR_kwDOFWSkxs5YSuKz", "number": 7339, "title": "refine: `substr` error", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-19T03:36:40Z", "updated_at": "2023-08-21T18:54:48Z", "closed_at": "2023-08-21T18:54:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7339", "html_url": "https://github.com/apache/datafusion/pull/7339", "diff_url": "https://github.com/apache/datafusion/pull/7339.diff", "patch_url": "https://github.com/apache/datafusion/pull/7339.patch", "merged_at": "2023-08-21T18:54:48Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7326\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7339/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7336", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7336/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7336/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7336/events", "html_url": "https://github.com/apache/datafusion/pull/7336", "id": 1857266690, "node_id": "PR_kwDOFWSkxs5YR0iK", "number": 7336, "title": "Refactor: Consolidate OutputFileFormat and FileType into datafusion_common", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-18T20:40:27Z", "updated_at": "2023-08-22T14:13:21Z", "closed_at": "2023-08-22T14:13:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7336", "html_url": "https://github.com/apache/datafusion/pull/7336", "diff_url": "https://github.com/apache/datafusion/pull/7336.diff", "patch_url": "https://github.com/apache/datafusion/pull/7336.patch", "merged_at": "2023-08-22T14:13:14Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7323 \r\n\r\n## Rationale for this change\r\n\r\nOutputFileFormat and FileType offer redundant functionality and the same enumerated file types. To reduce code duplication, FileType is moved to datafusion_common and all references to OutputFileFormat instead refer to FileType.\r\n\r\nI also moved file compression related structs. These are not needed yet outside of core, but will be needed when write options related to compression are implemented. \r\n\r\n## What changes are included in this PR?\r\n\r\nMany imports are updated to reflect the new location of FileType and associated functionality. \r\n\r\n## Are these changes tested?\r\n\r\nYes by existing tests\r\n\r\n## Are there any user-facing changes?\r\n\r\nFileType / GetExt must be imported from datafusion_common now.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7336/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7335", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7335/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7335/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7335/events", "html_url": "https://github.com/apache/datafusion/pull/7335", "id": 1857191324, "node_id": "PR_kwDOFWSkxs5YRkCe", "number": 7335, "title": "Minor: Extract `FileScanConfig` into its own module", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T19:26:39Z", "updated_at": "2023-08-21T18:21:11Z", "closed_at": "2023-08-21T18:21:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7335", "html_url": "https://github.com/apache/datafusion/pull/7335", "diff_url": "https://github.com/apache/datafusion/pull/7335.diff", "patch_url": "https://github.com/apache/datafusion/pull/7335.patch", "merged_at": "2023-08-21T18:21:05Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of #1754  as well as making it easier to work with datafusion code\r\n\r\n\r\n## Rationale for this change\r\n\r\n`core/src/datasource/physical_plan/mod.rs` was large with several unrelated structures in it, making it hard to navigate\r\n\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\nThis PR just moves some of the code  into `file_scan_config.rs` \r\n\r\n\r\n## Are these changes tested?\r\nCovered by existing tests\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7335/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7334", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7334/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7334/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7334/events", "html_url": "https://github.com/apache/datafusion/pull/7334", "id": 1857085484, "node_id": "PR_kwDOFWSkxs5YRMza", "number": 7334, "title": "Minor: Move shared testing code into datafusion_common", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T17:55:38Z", "updated_at": "2023-08-21T18:29:21Z", "closed_at": "2023-08-21T18:29:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7334", "html_url": "https://github.com/apache/datafusion/pull/7334", "diff_url": "https://github.com/apache/datafusion/pull/7334.diff", "patch_url": "https://github.com/apache/datafusion/pull/7334.patch", "merged_at": "2023-08-21T18:29:21Z"}, "body": "## Which issue does this PR close?\r\n\r\nFinal prep for #1754 \r\n\r\n## Rationale for this change\r\n\r\nphysical plan can't depend on code in core when I pull it out\r\n\r\n## What changes are included in this PR?\r\n\r\nmove some functions from `datafusion/core/src/test_util.rs` to `datafusion/common/src/test_util.rs`\r\n\r\n## Are these changes tested?\r\ncovered by existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo -- I left backward compatible `pub use`", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7334/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7333", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7333/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7333/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7333/events", "html_url": "https://github.com/apache/datafusion/pull/7333", "id": 1856987557, "node_id": "PR_kwDOFWSkxs5YQ3ez", "number": 7333, "title": "Add `SQLOptions` for controlling allowed SQL statements, update docs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T16:28:58Z", "updated_at": "2023-08-22T12:43:52Z", "closed_at": "2023-08-22T12:43:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7333", "html_url": "https://github.com/apache/datafusion/pull/7333", "diff_url": "https://github.com/apache/datafusion/pull/7333.diff", "patch_url": "https://github.com/apache/datafusion/pull/7333.patch", "merged_at": "2023-08-22T12:43:48Z"}, "body": "## Which issue does this PR close?\r\nCloses https://github.com/apache/arrow-datafusion/issues/7328\r\nCloses https://github.com/apache/arrow-datafusion/issues/7272\r\n\r\n## Rationale for this change\r\n\r\nSee https://github.com/apache/arrow-datafusion/issues/7328\r\n\r\nBasically it is hard to understand how to control what SQL statements DataFusion will allow\r\n\r\n## What changes are included in this PR?\r\n1. New `SQLOptions` and `SessionContext::sql_with_options` apis\r\n2. Update docs\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNew `SQLOptions` and `SessionContext::sql_with_options` apis\r\n\r\n\r\nEverything should be backwards compatible", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7333/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7331", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7331/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7331/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7331/events", "html_url": "https://github.com/apache/datafusion/pull/7331", "id": 1856730295, "node_id": "PR_kwDOFWSkxs5YP_5O", "number": 7331, "title": "Minor: Improve docstrings for `LogicalPlan`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-18T13:29:35Z", "updated_at": "2023-08-21T18:25:49Z", "closed_at": "2023-08-19T12:23:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7331", "html_url": "https://github.com/apache/datafusion/pull/7331", "diff_url": "https://github.com/apache/datafusion/pull/7331.diff", "patch_url": "https://github.com/apache/datafusion/pull/7331.patch", "merged_at": "2023-08-19T12:23:27Z"}, "body": "## Which issue does this PR close?\r\n\r\nn/a\r\n\r\n## Rationale for this change\r\nWhile working on https://github.com/influxdata/influxdb_iox/pull/8515 I had some questions about the various `LogicalPlan` that I had to look up in the code. I wanted to encode this information as doc comments so I didn't have to do it a second time\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n1. Update docstrings for `LogicalPlan`\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nN/A\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nbetter (hopefully) docs\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7331/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7329", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7329/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7329/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7329/events", "html_url": "https://github.com/apache/datafusion/pull/7329", "id": 1856716671, "node_id": "PR_kwDOFWSkxs5YP86l", "number": 7329, "title": "Minor: add `WriteOp::name` and `DmlStatement::name`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T13:20:26Z", "updated_at": "2023-08-23T04:22:00Z", "closed_at": "2023-08-23T04:21:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7329", "html_url": "https://github.com/apache/datafusion/pull/7329", "diff_url": "https://github.com/apache/datafusion/pull/7329.diff", "patch_url": "https://github.com/apache/datafusion/pull/7329.patch", "merged_at": "2023-08-23T04:21:59Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\nWhile working on https://github.com/influxdata/influxdb_iox/pull/8515  I found that DdlStatement had a `name()` but `DmlStatement` did not.  This was annoying and slowed me down (very slightly)\r\n\r\nhttps://docs.rs/datafusion/latest/datafusion/logical_expr/enum.DdlStatement.html#method.name\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Add  `WriteOp::name` and `DmlStatement::name`\r\n\r\n## Are these changes tested?\r\n\r\nExisting coverage\r\n\r\n## Are there any user-facing changes?\r\nNew method\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7329/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7324", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7324/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7324/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7324/events", "html_url": "https://github.com/apache/datafusion/pull/7324", "id": 1855939821, "node_id": "PR_kwDOFWSkxs5YNTf3", "number": 7324, "title": "chore(deps): update tokio requirement to 1.28", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-18T02:21:31Z", "updated_at": "2023-08-18T08:01:56Z", "closed_at": "2023-08-18T08:01:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7324", "html_url": "https://github.com/apache/datafusion/pull/7324", "diff_url": "https://github.com/apache/datafusion/pull/7324.diff", "patch_url": "https://github.com/apache/datafusion/pull/7324.patch", "merged_at": "2023-08-18T08:01:50Z"}, "body": "## Which issue does this PR close?\r\n Discussed in https://github.com/apache/arrow-datafusion/discussions/7253\r\n\r\n\r\n## Rationale for this change\r\nWe are using a new API `JoinSet::spawn_blocking` introduced in tokio 1.28.\r\nhttps://github.com/apache/arrow-datafusion/blob/f2c0100a5a10bf3ea166a1a590d94b8c9b6cf673/datafusion/core/src/physical_plan/stream.rs#L97\r\n\r\ntokio v1.28 [changelog](https://github.com/tokio-rs/tokio/blob/master/tokio/CHANGELOG.md#1280-april-25th-2023):\r\n> 1.28.0 (April 25th, 2023)\r\nAdded\r\ntask: add JoinSet::spawn_blocking and JoinSet::spawn_blocking_on (https://github.com/tokio-rs/tokio/pull/5612)\r\n\r\n\r\nSo it\u2019s better for us to raise the minimum required tokio version to 1.28.\r\nThis can help avoid compilation failures for users.\r\n\r\n## What changes are included in this PR?\r\nBump tokio version\r\n\r\n## Are these changes tested?\r\nN/A\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7324/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7324/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7321", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7321/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7321/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7321/events", "html_url": "https://github.com/apache/datafusion/pull/7321", "id": 1855346393, "node_id": "PR_kwDOFWSkxs5YLS-m", "number": 7321, "title": "Add `internal_err` error macros. Part 2", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-17T16:42:35Z", "updated_at": "2023-08-18T11:24:47Z", "closed_at": "2023-08-18T11:24:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7321", "html_url": "https://github.com/apache/datafusion/pull/7321", "diff_url": "https://github.com/apache/datafusion/pull/7321.diff", "patch_url": "https://github.com/apache/datafusion/pull/7321.patch", "merged_at": "2023-08-18T11:24:46Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/pull/6740 \r\nhttps://github.com/apache/arrow-datafusion/pull/7115\r\nhttps://github.com/apache/arrow-datafusion/pull/7293\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nAdd `internal_err!` error macro to replace `DatafusionError::Internal` with more concise code and make error handling in single place\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nExisting tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7321/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7318", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7318/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7318/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7318/events", "html_url": "https://github.com/apache/datafusion/pull/7318", "id": 1854949631, "node_id": "PR_kwDOFWSkxs5YJ70D", "number": 7318, "title": "Minor: Improve doc comments to datafusion-sql", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-17T12:55:27Z", "updated_at": "2023-08-18T13:30:12Z", "closed_at": "2023-08-18T13:30:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7318", "html_url": "https://github.com/apache/datafusion/pull/7318", "diff_url": "https://github.com/apache/datafusion/pull/7318.diff", "patch_url": "https://github.com/apache/datafusion/pull/7318.patch", "merged_at": "2023-08-18T13:30:11Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n## Rationale for this change\r\n@devinjdangelo  noted that the distinction between the DataFusion SQL parser and sqlparser was somewhat unclear: https://github.com/apache/arrow-datafusion/pull/7291#discussion_r1296541827\r\n\r\n\r\n## What changes are included in this PR?\r\n\r\nUpdate doc comments in the `datafusion-sql` module to try and make the rationale / distinction clearer\r\n\r\n## Are these changes tested?\r\nN/A\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nJust documentation\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7318/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7316", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7316/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7316/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7316/events", "html_url": "https://github.com/apache/datafusion/pull/7316", "id": 1854688542, "node_id": "PR_kwDOFWSkxs5YJCIy", "number": 7316, "title": "Qualify filter fields in the update plan", "user": {"login": "gruuya", "id": 45558892, "node_id": "MDQ6VXNlcjQ1NTU4ODky", "avatar_url": "https://avatars.githubusercontent.com/u/45558892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gruuya", "html_url": "https://github.com/gruuya", "followers_url": "https://api.github.com/users/gruuya/followers", "following_url": "https://api.github.com/users/gruuya/following{/other_user}", "gists_url": "https://api.github.com/users/gruuya/gists{/gist_id}", "starred_url": "https://api.github.com/users/gruuya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gruuya/subscriptions", "organizations_url": "https://api.github.com/users/gruuya/orgs", "repos_url": "https://api.github.com/users/gruuya/repos", "events_url": "https://api.github.com/users/gruuya/events{/privacy}", "received_events_url": "https://api.github.com/users/gruuya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-17T10:05:35Z", "updated_at": "2023-08-17T13:43:34Z", "closed_at": "2023-08-17T13:24:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7316", "html_url": "https://github.com/apache/datafusion/pull/7316", "diff_url": "https://github.com/apache/datafusion/pull/7316.diff", "patch_url": "https://github.com/apache/datafusion/pull/7316.patch", "merged_at": "2023-08-17T13:24:07Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7315.\r\n\r\n## Rationale for this change\r\n\r\nAdd qualifiers to the filter fields of the `UPDATE` statement plan.\r\n\r\n## What changes are included in this PR?\r\n\r\nSee above\r\n\r\n## Are these changes tested?\r\n\r\nExisting tests altered to accordingly.\r\n\r\n## Are there any user-facing changes?\r\n\r\nThe `EXPLAIN` will now show qualified fields for the filter node of the `UPDATE` plan.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7316/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7314", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7314/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7314/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7314/events", "html_url": "https://github.com/apache/datafusion/pull/7314", "id": 1854441529, "node_id": "PR_kwDOFWSkxs5YIMLB", "number": 7314, "title": "Minor: Fix documentation typos for array expressions", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-17T07:36:52Z", "updated_at": "2023-08-17T13:22:38Z", "closed_at": "2023-08-17T13:22:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7314", "html_url": "https://github.com/apache/datafusion/pull/7314", "diff_url": "https://github.com/apache/datafusion/pull/7314.diff", "patch_url": "https://github.com/apache/datafusion/pull/7314.patch", "merged_at": "2023-08-17T13:22:38Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7314/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7313", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7313/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7313/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7313/events", "html_url": "https://github.com/apache/datafusion/pull/7313", "id": 1854283149, "node_id": "PR_kwDOFWSkxs5YHpw0", "number": 7313, "title": "feat: `array-empty`", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-17T05:34:22Z", "updated_at": "2023-08-22T16:45:53Z", "closed_at": "2023-08-22T16:45:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7313", "html_url": "https://github.com/apache/datafusion/pull/7313", "diff_url": "https://github.com/apache/datafusion/pull/7313.diff", "patch_url": "https://github.com/apache/datafusion/pull/7313.patch", "merged_at": "2023-08-22T16:45:47Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7290\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7313/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7313/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7312", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7312/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7312/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7312/events", "html_url": "https://github.com/apache/datafusion/pull/7312", "id": 1853701293, "node_id": "PR_kwDOFWSkxs5YFtp_", "number": 7312, "title": "Document and `scratch` directory for sqllogictest and make test specific", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-16T18:14:32Z", "updated_at": "2023-08-24T10:25:04Z", "closed_at": "2023-08-24T10:25:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7312", "html_url": "https://github.com/apache/datafusion/pull/7312", "diff_url": "https://github.com/apache/datafusion/pull/7312.diff", "patch_url": "https://github.com/apache/datafusion/pull/7312.patch", "merged_at": "2023-08-24T10:25:03Z"}, "body": "## Which issue does this PR close?\r\nFollow on to https://github.com/apache/arrow-datafusion/pull/7283\r\n\r\n## Rationale for this change\r\n\r\n@devinjdangelo added a neat `scratch` concept to sqllogictest but it is not yet documented. See discussion at https://github.com/apache/arrow-datafusion/pull/7283#discussion_r1294546967\r\n\r\n## What changes are included in this PR?\r\n1. Change scratch dir to be test name specific (as the tests are run in parallel)\r\n2. Update `copy.slt` to use the specific direcotry\r\n1. Document `scratch` dir in README\r\n \r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7312/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7311", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7311/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7311/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7311/events", "html_url": "https://github.com/apache/datafusion/pull/7311", "id": 1853661261, "node_id": "PR_kwDOFWSkxs5YFk8y", "number": 7311, "title": "Minor: Followup tasks for `nanvl`", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-16T17:42:34Z", "updated_at": "2023-08-16T18:52:10Z", "closed_at": "2023-08-16T18:52:09Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7311", "html_url": "https://github.com/apache/datafusion/pull/7311", "diff_url": "https://github.com/apache/datafusion/pull/7311.diff", "patch_url": "https://github.com/apache/datafusion/pull/7311.patch", "merged_at": "2023-08-16T18:52:09Z"}, "body": "Closes #7310 \r\n\r\n## Rationale for this change\r\n`nanvl` was added in #7171 but some additional change needed.\r\nOne is adding an entry to the function list table in `user-guide/expressions.md` for `nanvl`.\r\nAnother is modifying the error message in tests newly added to `math_expressions.rs`.\r\n\r\n## What changes are included in this PR?\r\nThis PR added an entry to the function list table for `nanvl` and fix the error message in `math_expressions.rs`.\r\n\r\n## Are these changes tested?\r\nExisting tests pass with `cargo test --workspace`.\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7311/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7311/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7309", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7309/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7309/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7309/events", "html_url": "https://github.com/apache/datafusion/pull/7309", "id": 1853545647, "node_id": "PR_kwDOFWSkxs5YFLw7", "number": 7309, "title": "Minor: Remove stubbed out redundant Execution Plan section of library user guide", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018882, "node_id": "MDU6TGFiZWwyOTIzMDE4ODgy", "url": "https://api.github.com/repos/apache/datafusion/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-16T16:13:27Z", "updated_at": "2023-08-17T12:29:29Z", "closed_at": "2023-08-17T12:29:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7309", "html_url": "https://github.com/apache/datafusion/pull/7309", "diff_url": "https://github.com/apache/datafusion/pull/7309.diff", "patch_url": "https://github.com/apache/datafusion/pull/7309.patch", "merged_at": "2023-08-17T12:29:28Z"}, "body": "\r\n## Which issue does this PR close?\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/issues/7014\r\n\r\n## Rationale for this change\r\nWhile working to organize https://github.com/apache/arrow-datafusion/issues/7014 I noticed that this section was redundant with the previous section (\"extend with your own operator\")\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\nremove redundant stub\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7309/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7300", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7300/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7300/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7300/events", "html_url": "https://github.com/apache/datafusion/pull/7300", "id": 1853127469, "node_id": "PR_kwDOFWSkxs5YDwlZ", "number": 7300, "title": "Fix Unnest for array aggregations.", "user": {"login": "vincev", "id": 10183380, "node_id": "MDQ6VXNlcjEwMTgzMzgw", "avatar_url": "https://avatars.githubusercontent.com/u/10183380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincev", "html_url": "https://github.com/vincev", "followers_url": "https://api.github.com/users/vincev/followers", "following_url": "https://api.github.com/users/vincev/following{/other_user}", "gists_url": "https://api.github.com/users/vincev/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincev/subscriptions", "organizations_url": "https://api.github.com/users/vincev/orgs", "repos_url": "https://api.github.com/users/vincev/repos", "events_url": "https://api.github.com/users/vincev/events{/privacy}", "received_events_url": "https://api.github.com/users/vincev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-16T12:21:48Z", "updated_at": "2023-08-16T18:10:34Z", "closed_at": "2023-08-16T17:39:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7300", "html_url": "https://github.com/apache/datafusion/pull/7300", "diff_url": "https://github.com/apache/datafusion/pull/7300.diff", "patch_url": "https://github.com/apache/datafusion/pull/7300.patch", "merged_at": "2023-08-16T17:39:15Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7299.\r\n\r\n## Rationale for this change\r\n\r\nWhen unnesting a list array created by `array_agg` aggregation fails with error:\r\n\r\n```\r\nArrowError(ComputeError(\"concat requires input of at least one array\"))\r\n```\r\n\r\nThis PR adds code to prevent `concat` from being called with an empty array during unnesting.\r\n\r\n## What changes are included in this PR?\r\n\r\nThis PR adds code to prevent `concat` from being called with an empty array during unnesting.\r\n\r\nThis PR also removes the `list_lengths` workaround fixed in  [arrow #4517](https://github.com/apache/arrow-rs/issues/4517).\r\n\r\n## Are these changes tested?\r\n\r\nYes added a test for the failing scenario.\r\n\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7300/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7300/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]