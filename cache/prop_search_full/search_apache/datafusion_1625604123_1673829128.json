[{"url": "https://api.github.com/repos/apache/datafusion/issues/4919", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4919/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4919/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4919/events", "html_url": "https://github.com/apache/datafusion/pull/4919", "id": 1533875515, "node_id": "PR_kwDOFWSkxs5HaTlF", "number": 4919, "title": "Minor add ticket link to broken test", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-15T15:44:51Z", "updated_at": "2023-01-17T01:06:39Z", "closed_at": "2023-01-15T21:13:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4919", "html_url": "https://github.com/apache/datafusion/pull/4919", "diff_url": "https://github.com/apache/datafusion/pull/4919.diff", "patch_url": "https://github.com/apache/datafusion/pull/4919.patch", "merged_at": "2023-01-15T21:13:32Z"}, "body": "# Which issue does this PR close?\r\n\r\nna\r\n\r\n# Rationale for this change\r\n\r\nKeep context in code in case someone else runs into this and wonders\r\n\r\n# What changes are included in this PR?\r\n\r\nadd comment \r\n# Are these changes tested?\r\nno\r\n# Are there any user-facing changes?\r\nno", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4919/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4915", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4915/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4915/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4915/events", "html_url": "https://github.com/apache/datafusion/pull/4915", "id": 1533769118, "node_id": "PR_kwDOFWSkxs5HZ-L3", "number": 4915, "title": "Add substrait label to PRs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-15T11:23:41Z", "updated_at": "2023-01-15T13:28:40Z", "closed_at": "2023-01-15T13:09:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4915", "html_url": "https://github.com/apache/datafusion/pull/4915", "diff_url": "https://github.com/apache/datafusion/pull/4915.diff", "patch_url": "https://github.com/apache/datafusion/pull/4915.patch", "merged_at": "2023-01-15T13:09:17Z"}, "body": "# Which issue does this PR close?\r\n\r\nNA\r\n# Rationale for this change\r\n\r\nI find myself trying to find PRs in need of review -- having label categorization helps me do so\r\n\r\n# What changes are included in this PR?\r\n\r\nlabel any PR that modifies a file in `datafusion/subtrait` with the `substrait` label. Example\r\n\r\nhttps://github.com/apache/arrow-datafusion/pulls?q=is%3Apr+is%3Aopen+label%3Asubstrait\r\n\r\n# Are these changes tested?\r\nNo (I don't know how to test them other than \"live\")\r\n\r\n# Are there any user-facing changes?\r\nNo, dev process only", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4915/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4915/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4912", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4912/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4912/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4912/events", "html_url": "https://github.com/apache/datafusion/pull/4912", "id": 1533724282, "node_id": "PR_kwDOFWSkxs5HZ1Xm", "number": 4912, "title": "Executing ProjectionExec with no column should not return an Err", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-15T08:55:46Z", "updated_at": "2023-01-15T21:53:38Z", "closed_at": "2023-01-15T21:12:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4912", "html_url": "https://github.com/apache/datafusion/pull/4912", "diff_url": "https://github.com/apache/datafusion/pull/4912.diff", "patch_url": "https://github.com/apache/datafusion/pull/4912.patch", "merged_at": "2023-01-15T21:12:39Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4911.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4912/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4906", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4906/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4906/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4906/events", "html_url": "https://github.com/apache/datafusion/pull/4906", "id": 1533240446, "node_id": "PR_kwDOFWSkxs5HYQQe", "number": 4906, "title": "Refactor: `Add LogicalPlan::observe_expressions` to walk expressions", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-14T12:53:59Z", "updated_at": "2023-08-08T20:14:52Z", "closed_at": "2023-01-15T11:35:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4906", "html_url": "https://github.com/apache/datafusion/pull/4906", "diff_url": "https://github.com/apache/datafusion/pull/4906.diff", "patch_url": "https://github.com/apache/datafusion/pull/4906.patch", "merged_at": "2023-01-15T11:35:34Z"}, "body": "# Which issue does this PR close?\r\n\r\nInspired by the bug in https://github.com/apache/arrow-datafusion/pull/4900 and  discussion with @avantgardnerio  on https://github.com/apache/arrow-datafusion/pull/4701#discussion_r1069131341\r\n\r\n\r\n# Rationale for this change\r\nI realized while reading https://github.com/apache/arrow-datafusion/pull/4900 there were likely other places in Expr that could have subqueries so there may be other bugs lurking similar to https://github.com/apache/arrow-datafusion/issues/4898\r\n\r\nHowever, there was no good way to walk all expressions in a LogicalPlan other than to call `LogicalPlan::expressions()` which clones them all\r\n\r\n# What changes are included in this PR?\r\n\r\n1. Add LogicalPlan::inspect_expressions that calls a function on each expression\r\n2. Rewrite subquery traversal to use this this function\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4906/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4905", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4905/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4905/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4905/events", "html_url": "https://github.com/apache/datafusion/pull/4905", "id": 1533206647, "node_id": "PR_kwDOFWSkxs5HYKBj", "number": 4905, "title": "Minor: Port information schema tests to sqllogictest", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-14T10:21:51Z", "updated_at": "2023-08-08T20:14:52Z", "closed_at": "2023-01-15T13:33:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4905", "html_url": "https://github.com/apache/datafusion/pull/4905", "diff_url": "https://github.com/apache/datafusion/pull/4905.diff", "patch_url": "https://github.com/apache/datafusion/pull/4905.patch", "merged_at": "2023-01-15T13:33:27Z"}, "body": "# Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/4495\r\n\r\n# Rationale for this change\r\n\r\n.slt tests are faster to run and easier / faster to maintain\r\n\r\n# What changes are included in this PR?\r\n\r\nPort most remaining tests from information_schema.rs (part of `sql_integration`) to `information_schema.slt`\r\n\r\n# Are these changes tested?\r\nall tests\r\n\r\n# Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4905/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4900", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4900/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4900/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4900/events", "html_url": "https://github.com/apache/datafusion/pull/4900", "id": 1532824836, "node_id": "PR_kwDOFWSkxs5HW5oh", "number": 4900, "title": "fix: Visit subqueries in `Expr::Alias`", "user": {"login": "askoa", "id": 112126368, "node_id": "U_kgDOBq7poA", "avatar_url": "https://avatars.githubusercontent.com/u/112126368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/askoa", "html_url": "https://github.com/askoa", "followers_url": "https://api.github.com/users/askoa/followers", "following_url": "https://api.github.com/users/askoa/following{/other_user}", "gists_url": "https://api.github.com/users/askoa/gists{/gist_id}", "starred_url": "https://api.github.com/users/askoa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/askoa/subscriptions", "organizations_url": "https://api.github.com/users/askoa/orgs", "repos_url": "https://api.github.com/users/askoa/repos", "events_url": "https://api.github.com/users/askoa/events{/privacy}", "received_events_url": "https://api.github.com/users/askoa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-13T19:50:39Z", "updated_at": "2023-01-14T13:38:52Z", "closed_at": "2023-01-14T11:40:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4900", "html_url": "https://github.com/apache/datafusion/pull/4900", "diff_url": "https://github.com/apache/datafusion/pull/4900.diff", "patch_url": "https://github.com/apache/datafusion/pull/4900.patch", "merged_at": "2023-01-14T11:40:08Z"}, "body": "# Which issue does this PR close?\r\nCloses #4898 \r\n\r\n# Rationale for this change\r\nSee issue description.\r\n\r\n# Are these changes tested?\r\nYes. A new test is included to test the changes.\r\n\r\n# Are there any user-facing changes?\r\nThe users who enable tracing of LogicalPlan might see additional subqueries in the logs.\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4900/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4899", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4899/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4899/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4899/events", "html_url": "https://github.com/apache/datafusion/pull/4899", "id": 1532813492, "node_id": "PR_kwDOFWSkxs5HW3Q6", "number": 4899, "title": "Docs: Add known user - Kamu", "user": {"login": "sergiimk", "id": 204914, "node_id": "MDQ6VXNlcjIwNDkxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/204914?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sergiimk", "html_url": "https://github.com/sergiimk", "followers_url": "https://api.github.com/users/sergiimk/followers", "following_url": "https://api.github.com/users/sergiimk/following{/other_user}", "gists_url": "https://api.github.com/users/sergiimk/gists{/gist_id}", "starred_url": "https://api.github.com/users/sergiimk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sergiimk/subscriptions", "organizations_url": "https://api.github.com/users/sergiimk/orgs", "repos_url": "https://api.github.com/users/sergiimk/repos", "events_url": "https://api.github.com/users/sergiimk/events{/privacy}", "received_events_url": "https://api.github.com/users/sergiimk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018882, "node_id": "MDU6TGFiZWwyOTIzMDE4ODgy", "url": "https://api.github.com/repos/apache/datafusion/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-13T19:37:47Z", "updated_at": "2023-01-13T21:33:03Z", "closed_at": "2023-01-13T21:27:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4899", "html_url": "https://github.com/apache/datafusion/pull/4899", "diff_url": "https://github.com/apache/datafusion/pull/4899.diff", "patch_url": "https://github.com/apache/datafusion/pull/4899.patch", "merged_at": "2023-01-13T21:27:53Z"}, "body": "[Kamu](https://kamu.dev) is a decentralized collaborative stream processing data pipeline with complete reproducibility and provenance (think \"smart contracts\" for data streams).\r\n\r\nWe've been using DataFusion:\r\n- For most of batch-oriented features of our CLI\r\n- Expanding its use to replace Apache Spark\r\n  - in our data ingestion flow\r\n  - as the default \"SQL console\" for EDA\r\n\r\nHoping to support the DataFusion project more as we progress! ", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4899/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4896", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4896/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4896/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4896/events", "html_url": "https://github.com/apache/datafusion/pull/4896", "id": 1532616229, "node_id": "PR_kwDOFWSkxs5HWMYe", "number": 4896, "title": "[Substrait] Change API to return LogicalPlan instead of DataFrame", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-13T16:46:53Z", "updated_at": "2023-01-16T14:55:32Z", "closed_at": "2023-01-15T21:17:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4896", "html_url": "https://github.com/apache/datafusion/pull/4896", "diff_url": "https://github.com/apache/datafusion/pull/4896.diff", "patch_url": "https://github.com/apache/datafusion/pull/4896.patch", "merged_at": "2023-01-15T21:17:07Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/4897\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nAs suggested by @nseekhao, given that to_substrait_rel() takes LogicalPlan and returns Substrait Rel, it would be better if from_subtrait_rel() takes Substrait Rel and returns LogicalPlan rather than DataFrame.\r\n\r\nNote that this was originally https://github.com/datafusion-contrib/datafusion-substrait/pull/35 \r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4896/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4888", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4888/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4888/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4888/events", "html_url": "https://github.com/apache/datafusion/pull/4888", "id": 1531833315, "node_id": "PR_kwDOFWSkxs5HTixK", "number": 4888, "title": "Update  `optimize_children` to return `Result<Option<LogicalPlan>>`", "user": {"login": "HaoYang670", "id": 59198230, "node_id": "MDQ6VXNlcjU5MTk4MjMw", "avatar_url": "https://avatars.githubusercontent.com/u/59198230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaoYang670", "html_url": "https://github.com/HaoYang670", "followers_url": "https://api.github.com/users/HaoYang670/followers", "following_url": "https://api.github.com/users/HaoYang670/following{/other_user}", "gists_url": "https://api.github.com/users/HaoYang670/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaoYang670/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaoYang670/subscriptions", "organizations_url": "https://api.github.com/users/HaoYang670/orgs", "repos_url": "https://api.github.com/users/HaoYang670/repos", "events_url": "https://api.github.com/users/HaoYang670/events{/privacy}", "received_events_url": "https://api.github.com/users/HaoYang670/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-13T07:23:25Z", "updated_at": "2023-01-15T00:29:57Z", "closed_at": "2023-01-14T17:23:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4888", "html_url": "https://github.com/apache/datafusion/pull/4888", "diff_url": "https://github.com/apache/datafusion/pull/4888.diff", "patch_url": "https://github.com/apache/datafusion/pull/4888.patch", "merged_at": "2023-01-14T17:23:25Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4882.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4888/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4888/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4884", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4884/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4884/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4884/events", "html_url": "https://github.com/apache/datafusion/pull/4884", "id": 1530485870, "node_id": "PR_kwDOFWSkxs5HO-gU", "number": 4884, "title": "Minor: Add docstrings to UnionExec", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-12T10:39:50Z", "updated_at": "2023-01-12T22:11:11Z", "closed_at": "2023-01-12T17:41:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4884", "html_url": "https://github.com/apache/datafusion/pull/4884", "diff_url": "https://github.com/apache/datafusion/pull/4884.diff", "patch_url": "https://github.com/apache/datafusion/pull/4884.patch", "merged_at": "2023-01-12T17:41:45Z"}, "body": "# Which issue does this PR close?\r\n\r\nre https://github.com/apache/arrow-datafusion/issues/4883\r\n\r\n# Rationale for this change\r\n\r\nI was working on https://github.com/apache/arrow-datafusion/issues/4883 and had to remind myself of how UnionExec worked by reading the code. I figured I would add some docs to help my future self as well as others\r\n\r\n# What changes are included in this PR?\r\ndocstrings and ascii art about union\r\n\r\n# Are these changes tested?\r\nN/A\r\n\r\n# Are there any user-facing changes?\r\n\r\nDocs", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4884/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4881", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4881/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4881/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4881/events", "html_url": "https://github.com/apache/datafusion/pull/4881", "id": 1529941468, "node_id": "PR_kwDOFWSkxs5HNIwR", "number": 4881, "title": "Update changelog for 16.0.0-rc2", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-12T01:16:52Z", "updated_at": "2023-01-27T18:57:08Z", "closed_at": "2023-01-12T09:23:46Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4881", "html_url": "https://github.com/apache/datafusion/pull/4881", "diff_url": "https://github.com/apache/datafusion/pull/4881.diff", "patch_url": "https://github.com/apache/datafusion/pull/4881.patch", "merged_at": "2023-01-12T09:23:46Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4881/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4879", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4879/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4879/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4879/events", "html_url": "https://github.com/apache/datafusion/pull/4879", "id": 1529824914, "node_id": "PR_kwDOFWSkxs5HMvUM", "number": 4879, "title": "Update datafusion-substrait crate to build against repo version of DataFusion", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-11T22:49:45Z", "updated_at": "2023-01-13T12:10:30Z", "closed_at": "2023-01-13T09:09:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4879", "html_url": "https://github.com/apache/datafusion/pull/4879", "diff_url": "https://github.com/apache/datafusion/pull/4879.diff", "patch_url": "https://github.com/apache/datafusion/pull/4879.patch", "merged_at": "2023-01-13T09:09:51Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nFollows on from https://github.com/apache/arrow-datafusion/pull/4543\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nUpdates the crate to build against the version of DataFusion in the repo.\r\n\r\nI could not add it to the workspace due to https://github.com/apache/arrow-datafusion/issues/4880 so there will be a follow-on PR to complete the integration at some point\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, existing tests\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4879/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4879/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4878", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4878/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4878/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4878/events", "html_url": "https://github.com/apache/datafusion/pull/4878", "id": 1529729598, "node_id": "PR_kwDOFWSkxs5HMZ33", "number": 4878, "title": "Fix column indices in EnforceDistribution optimizer in Partial AggregateMode", "user": {"login": "jonmmease", "id": 15064365, "node_id": "MDQ6VXNlcjE1MDY0MzY1", "avatar_url": "https://avatars.githubusercontent.com/u/15064365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonmmease", "html_url": "https://github.com/jonmmease", "followers_url": "https://api.github.com/users/jonmmease/followers", "following_url": "https://api.github.com/users/jonmmease/following{/other_user}", "gists_url": "https://api.github.com/users/jonmmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonmmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonmmease/subscriptions", "organizations_url": "https://api.github.com/users/jonmmease/orgs", "repos_url": "https://api.github.com/users/jonmmease/repos", "events_url": "https://api.github.com/users/jonmmease/events{/privacy}", "received_events_url": "https://api.github.com/users/jonmmease/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-01-11T21:34:27Z", "updated_at": "2023-01-14T12:39:35Z", "closed_at": "2023-01-14T11:31:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4878", "html_url": "https://github.com/apache/datafusion/pull/4878", "diff_url": "https://github.com/apache/datafusion/pull/4878.diff", "patch_url": "https://github.com/apache/datafusion/pull/4878.patch", "merged_at": "2023-01-14T11:31:56Z"}, "body": "# Which issue does this PR close?\r\n\r\nCloses #4873.\r\n\r\n# Rationale for this change\r\nSee #4873 for a failing example and some preliminary investigation.\r\n\r\nThe issue is in the EnforceDistribution physical optimizer (the query from the issue works without it).  After looking at this for a while, I think I see what's going on.  Normally, the column expressions for a group by have indices that correspond to the schema of the input operation. But for the case of a partial aggregation, these indices need to be updated to correspond to the schema of the partial aggregation instead of the input.\r\n\r\nThis make sense to me, and it fixes the query, but this is the first time I've looked at the Physical optimizer so someone who's more familiar with that side of things should definitely take a look before merging this.\r\n\r\n# Are these changes tested?\r\n\r\nI added a test case based on the query reported in the issue.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4878/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4871", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4871/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4871/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4871/events", "html_url": "https://github.com/apache/datafusion/pull/4871", "id": 1528810483, "node_id": "PR_kwDOFWSkxs5HJR04", "number": 4871, "title": "docs: improve `Column::normalize_with_schemas` docs", "user": {"login": "crepererum", "id": 1529400, "node_id": "MDQ6VXNlcjE1Mjk0MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1529400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crepererum", "html_url": "https://github.com/crepererum", "followers_url": "https://api.github.com/users/crepererum/followers", "following_url": "https://api.github.com/users/crepererum/following{/other_user}", "gists_url": "https://api.github.com/users/crepererum/gists{/gist_id}", "starred_url": "https://api.github.com/users/crepererum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crepererum/subscriptions", "organizations_url": "https://api.github.com/users/crepererum/orgs", "repos_url": "https://api.github.com/users/crepererum/repos", "events_url": "https://api.github.com/users/crepererum/events{/privacy}", "received_events_url": "https://api.github.com/users/crepererum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-11T10:42:45Z", "updated_at": "2023-01-11T20:32:57Z", "closed_at": "2023-01-11T20:31:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4871", "html_url": "https://github.com/apache/datafusion/pull/4871", "diff_url": "https://github.com/apache/datafusion/pull/4871.diff", "patch_url": "https://github.com/apache/datafusion/pull/4871.patch", "merged_at": "2023-01-11T20:31:05Z"}, "body": "# Which issue does this PR close?\r\nNone.\r\n\r\n# Rationale for this change\r\nWhile debugging #4854 I got a bit confused because the docs of `normalize_col_with_schemas` and `normalize_col` just state \"uses `Column::normalize_with_schemas` but the latter just says \"internal implementation\" and I had to read throw the code to understand what \"normalize\" actually means.\r\n\r\n# What changes are included in this PR?\r\nDocs for `Column::normalize_with_schemas`.\r\n\r\n# Are these changes tested?\r\n\\-\r\n\r\n# Are there any user-facing changes?\r\nBetter docs.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4871/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4871/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4869", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4869/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4869/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4869/events", "html_url": "https://github.com/apache/datafusion/pull/4869", "id": 1527683110, "node_id": "PR_kwDOFWSkxs5HFh0a", "number": 4869, "title": "Skip EliminateCrossJoin rule when meet non-empty join filter", "user": {"login": "ygf11", "id": 3428089, "node_id": "MDQ6VXNlcjM0MjgwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3428089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygf11", "html_url": "https://github.com/ygf11", "followers_url": "https://api.github.com/users/ygf11/followers", "following_url": "https://api.github.com/users/ygf11/following{/other_user}", "gists_url": "https://api.github.com/users/ygf11/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygf11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygf11/subscriptions", "organizations_url": "https://api.github.com/users/ygf11/orgs", "repos_url": "https://api.github.com/users/ygf11/repos", "events_url": "https://api.github.com/users/ygf11/events{/privacy}", "received_events_url": "https://api.github.com/users/ygf11/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-10T16:30:21Z", "updated_at": "2023-03-15T07:31:50Z", "closed_at": "2023-01-11T13:37:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4869", "html_url": "https://github.com/apache/datafusion/pull/4869", "diff_url": "https://github.com/apache/datafusion/pull/4869.diff", "patch_url": "https://github.com/apache/datafusion/pull/4869.patch", "merged_at": "2023-01-11T13:37:26Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4869/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4869/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4867", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4867/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4867/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4867/events", "html_url": "https://github.com/apache/datafusion/pull/4867", "id": 1527251556, "node_id": "PR_kwDOFWSkxs5HEEHV", "number": 4867, "title": "refactor: improve repartition buffering", "user": {"login": "crepererum", "id": 1529400, "node_id": "MDQ6VXNlcjE1Mjk0MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1529400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crepererum", "html_url": "https://github.com/crepererum", "followers_url": "https://api.github.com/users/crepererum/followers", "following_url": "https://api.github.com/users/crepererum/following{/other_user}", "gists_url": "https://api.github.com/users/crepererum/gists{/gist_id}", "starred_url": "https://api.github.com/users/crepererum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crepererum/subscriptions", "organizations_url": "https://api.github.com/users/crepererum/orgs", "repos_url": "https://api.github.com/users/crepererum/repos", "events_url": "https://api.github.com/users/crepererum/events{/privacy}", "received_events_url": "https://api.github.com/users/crepererum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-01-10T11:46:52Z", "updated_at": "2023-02-02T20:17:22Z", "closed_at": "2023-01-13T21:38:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4867", "html_url": "https://github.com/apache/datafusion/pull/4867", "diff_url": "https://github.com/apache/datafusion/pull/4867.diff", "patch_url": "https://github.com/apache/datafusion/pull/4867.patch", "merged_at": "2023-01-13T21:38:18Z"}, "body": "# Which issue does this PR close?\r\nCloses #4865.\r\n\r\n# Rationale for this change\r\nThe repartition operation had an unbounded buffer. This is not required in all cases and is even counterproductive since it will drive the input nodes to completion while potentially starving the output nodes and while filling up the buffers up to the memory limit (at which point it will just bail out).\r\n\r\n# What changes are included in this PR?\r\nA somewhat more sophisticated channel construct (distribution channels) that are only unbounded as long as at least one channel is empty. In practice (= for any reasonable repartition config) this will NOT lead to unbounded memory usage since virtually all partitions should eventually receive some data.\r\n\r\n# Are these changes tested?\r\n- all existing tests pass\r\n- extensive tests for the distribution construct\r\n\r\n# Are there any user-facing changes?\r\nImproved scheduling for the repartition operation.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4867/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4867/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4863", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4863/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4863/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4863/events", "html_url": "https://github.com/apache/datafusion/pull/4863", "id": 1525240380, "node_id": "PR_kwDOFWSkxs5G9TRU", "number": 4863, "title": "Support for SQL Natural Join", "user": {"login": "Jefffrey", "id": 22608443, "node_id": "MDQ6VXNlcjIyNjA4NDQz", "avatar_url": "https://avatars.githubusercontent.com/u/22608443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jefffrey", "html_url": "https://github.com/Jefffrey", "followers_url": "https://api.github.com/users/Jefffrey/followers", "following_url": "https://api.github.com/users/Jefffrey/following{/other_user}", "gists_url": "https://api.github.com/users/Jefffrey/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jefffrey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jefffrey/subscriptions", "organizations_url": "https://api.github.com/users/Jefffrey/orgs", "repos_url": "https://api.github.com/users/Jefffrey/repos", "events_url": "https://api.github.com/users/Jefffrey/events{/privacy}", "received_events_url": "https://api.github.com/users/Jefffrey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2023-01-09T09:42:13Z", "updated_at": "2023-01-10T08:33:04Z", "closed_at": "2023-01-10T06:46:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4863", "html_url": "https://github.com/apache/datafusion/pull/4863", "diff_url": "https://github.com/apache/datafusion/pull/4863.diff", "patch_url": "https://github.com/apache/datafusion/pull/4863.patch", "merged_at": "2023-01-10T06:46:28Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #117\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nSupport for planning sql natural join, which simply gets turned into a USING join based on the common columns (checked via name only), and if no common columns found then becomes a cross join.\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nAdded to sql integration_test.rs\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4863/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4862", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4862/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4862/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4862/events", "html_url": "https://github.com/apache/datafusion/pull/4862", "id": 1525167625, "node_id": "PR_kwDOFWSkxs5G9Dbk", "number": 4862, "title": "Rewrite coerce_plan_expr_for_schema to fix union type coercion", "user": {"login": "ygf11", "id": 3428089, "node_id": "MDQ6VXNlcjM0MjgwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3428089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygf11", "html_url": "https://github.com/ygf11", "followers_url": "https://api.github.com/users/ygf11/followers", "following_url": "https://api.github.com/users/ygf11/following{/other_user}", "gists_url": "https://api.github.com/users/ygf11/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygf11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygf11/subscriptions", "organizations_url": "https://api.github.com/users/ygf11/orgs", "repos_url": "https://api.github.com/users/ygf11/repos", "events_url": "https://api.github.com/users/ygf11/events{/privacy}", "received_events_url": "https://api.github.com/users/ygf11/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-09T08:51:35Z", "updated_at": "2023-01-13T01:54:26Z", "closed_at": "2023-01-12T21:44:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4862", "html_url": "https://github.com/apache/datafusion/pull/4862", "diff_url": "https://github.com/apache/datafusion/pull/4862.diff", "patch_url": "https://github.com/apache/datafusion/pull/4862.patch", "merged_at": "2023-01-12T21:44:19Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4837.\r\n\r\n# Rationale for this change\r\nThe original `coerce_plan_expr_for_schema` method use the `input.expressions()` as source of type coercion, which is not correct, because it maybe return other expressions, like join will return its predicates.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nThe source of union type coercion is from input schema or projection exprs now. \r\n\r\n# Are these changes tested?\r\n\r\nYes.\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4862/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4862/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4857", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4857/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4857/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4857/events", "html_url": "https://github.com/apache/datafusion/pull/4857", "id": 1524627333, "node_id": "PR_kwDOFWSkxs5G7M7f", "number": 4857, "title": "Add Synnada to known uses", "user": {"login": "ozankabak", "id": 2006258, "node_id": "MDQ6VXNlcjIwMDYyNTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2006258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ozankabak", "html_url": "https://github.com/ozankabak", "followers_url": "https://api.github.com/users/ozankabak/followers", "following_url": "https://api.github.com/users/ozankabak/following{/other_user}", "gists_url": "https://api.github.com/users/ozankabak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ozankabak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ozankabak/subscriptions", "organizations_url": "https://api.github.com/users/ozankabak/orgs", "repos_url": "https://api.github.com/users/ozankabak/repos", "events_url": "https://api.github.com/users/ozankabak/events{/privacy}", "received_events_url": "https://api.github.com/users/ozankabak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018882, "node_id": "MDU6TGFiZWwyOTIzMDE4ODgy", "url": "https://api.github.com/repos/apache/datafusion/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-08T18:35:40Z", "updated_at": "2023-01-08T22:52:35Z", "closed_at": "2023-01-08T22:41:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4857", "html_url": "https://github.com/apache/datafusion/pull/4857", "diff_url": "https://github.com/apache/datafusion/pull/4857.diff", "patch_url": "https://github.com/apache/datafusion/pull/4857.patch", "merged_at": "2023-01-08T22:41:04Z"}, "body": "# Which issue does this PR close?\r\n\r\nN/A\r\n\r\n# Rationale for this change\r\n\r\nEnriching the known uses list.\r\n\r\n# What changes are included in this PR?\r\n\r\nAdded Synnada to known uses in the README file.\r\n\r\n# Are these changes tested?\r\n\r\nN/A.\r\n\r\n# Are there any user-facing changes?\r\n\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4857/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4856", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4856/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4856/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4856/events", "html_url": "https://github.com/apache/datafusion/pull/4856", "id": 1524591237, "node_id": "PR_kwDOFWSkxs5G7FXX", "number": 4856, "title": "Remove unused ExecutionPlan::relies_input_order (has been replaced with `required_input_ordering`)", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-08T17:00:06Z", "updated_at": "2023-08-08T20:14:57Z", "closed_at": "2023-01-11T14:28:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4856", "html_url": "https://github.com/apache/datafusion/pull/4856", "diff_url": "https://github.com/apache/datafusion/pull/4856.diff", "patch_url": "https://github.com/apache/datafusion/pull/4856.patch", "merged_at": "2023-01-11T14:28:07Z"}, "body": "\r\n# Which issue does this PR close?\r\n\r\nRelated to #4686 \r\n\r\n# Rationale for this change\r\n\r\nhttps://github.com/apache/arrow-datafusion/pull/4691 from @mustafasrepo  made the `relies_on_input` redundant in favor of the more general required_input_ordering\r\n\r\n\r\n\r\n# What changes are included in this PR?\r\nRemove `relies_on_input`\r\n\r\n# Are these changes tested?\r\nCovered by existing tests\r\n\r\n# Are there any user-facing changes?\r\nNo, though it is an API change\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4856/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4855", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4855/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4855/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4855/events", "html_url": "https://github.com/apache/datafusion/pull/4855", "id": 1524585459, "node_id": "PR_kwDOFWSkxs5G7EKg", "number": 4855, "title": "Minor: Move test data into `datafusion/core/tests/data`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-08T16:44:10Z", "updated_at": "2023-08-08T20:14:57Z", "closed_at": "2023-01-09T04:10:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4855", "html_url": "https://github.com/apache/datafusion/pull/4855", "diff_url": "https://github.com/apache/datafusion/pull/4855.diff", "patch_url": "https://github.com/apache/datafusion/pull/4855.patch", "merged_at": "2023-01-09T04:10:52Z"}, "body": "# Which issue does this PR close?\r\n\r\nNa\r\n\r\n# Rationale for this change\r\n\r\nThis is a  cleanup I have wanted to do for a while whenever I look in the `datafusion/core/tests` directory and see intermixed  data and code,  which offends my sense of order\r\n\r\n```shell\r\n$ ls tests/\r\n\r\naggregate_simple.csv         data/                        join_fuzz.rs                 parquet_exec.rs              sql_integration.rs           user_defined_plan.rs\r\naggregate_simple_pipe.csv    dataframe.rs                 jsons/                       path_partition.rs            sqllogictests/               window_fuzz.rs\r\ncapitalized_example.csv      dataframe_functions.rs       memory_limit.rs              provider_filter_pushdown.rs  statistics.rs\r\nconfig_from_env.rs           decimal_data.csv             merge_fuzz.rs                row.rs                       tpc-ds/\r\ncsv/                         empty.csv                    null_cases.csv               simplification.rs            tpcds_planning.rs\r\ncustom_sources.rs            example.csv                  order_spill_fuzz.rs          sort_key_cursor.rs           tpch-csv/\r\ncustomer.csv                 fifo.rs                      parquet/                     sql/                         user_defined_aggregates.rs\r\n```\r\n\r\n\ud83e\udd2e \r\n\r\n# What changes are included in this PR?\r\nMove all `.csv` data files `datafusion/core/tests/data`\r\n\r\n# Are these changes tested?\r\n\r\nCovered by existing tests\r\n\r\n# Are there any user-facing changes?\r\n\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4855/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4852", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4852/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4852/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4852/events", "html_url": "https://github.com/apache/datafusion/pull/4852", "id": 1524556506, "node_id": "PR_kwDOFWSkxs5G6-Ig", "number": 4852, "title": "Covariance single row input & null skipping", "user": {"login": "korowa", "id": 13005055, "node_id": "MDQ6VXNlcjEzMDA1MDU1", "avatar_url": "https://avatars.githubusercontent.com/u/13005055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/korowa", "html_url": "https://github.com/korowa", "followers_url": "https://api.github.com/users/korowa/followers", "following_url": "https://api.github.com/users/korowa/following{/other_user}", "gists_url": "https://api.github.com/users/korowa/gists{/gist_id}", "starred_url": "https://api.github.com/users/korowa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/korowa/subscriptions", "organizations_url": "https://api.github.com/users/korowa/orgs", "repos_url": "https://api.github.com/users/korowa/repos", "events_url": "https://api.github.com/users/korowa/events{/privacy}", "received_events_url": "https://api.github.com/users/korowa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-01-08T15:29:22Z", "updated_at": "2023-01-11T21:02:04Z", "closed_at": "2023-01-10T06:44:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4852", "html_url": "https://github.com/apache/datafusion/pull/4852", "diff_url": "https://github.com/apache/datafusion/pull/4852.diff", "patch_url": "https://github.com/apache/datafusion/pull/4852.patch", "merged_at": "2023-01-10T06:44:17Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nFollow up on #4843 (or #4314)\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nCovariance function also has an issue with single row inputs processing and cases when inputs contain NULL values\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nCovariance function now able to process single row and pairs of (NULL, NOT NULL) arguments. As a consequence of proper handling NULLs in Variance, Correlation function now requires additional input filtering - in case one input field is NULL, we should filter out whole record (second field actually) to keep Sttdev (as part of correlation) calculation relevant.\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nFixed/added tests for corresponding accumulators and sqllogictests\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\ncovar_samp/covar_pop/corr functions don't return Errors in case of single row input or (null, not null) argument values\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4852/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4851", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4851/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4851/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4851/events", "html_url": "https://github.com/apache/datafusion/pull/4851", "id": 1524456795, "node_id": "PR_kwDOFWSkxs5G6qXe", "number": 4851, "title": "Document ability to select directly from files in datafusion-cli", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-08T10:56:30Z", "updated_at": "2023-01-09T22:13:39Z", "closed_at": "2023-01-09T14:16:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4851", "html_url": "https://github.com/apache/datafusion/pull/4851", "diff_url": "https://github.com/apache/datafusion/pull/4851.diff", "patch_url": "https://github.com/apache/datafusion/pull/4851.patch", "merged_at": "2023-01-09T14:16:21Z"}, "body": "# Which issue does this PR close?\r\n\r\nre https://github.com/apache/arrow-datafusion/issues/4580\r\n\r\n# Rationale for this change\r\n\r\nThe feature added in https://github.com/apache/arrow-datafusion/pull/4838 is so cool -- we need to let our users know!\r\n\r\n# What changes are included in this PR?\r\n\r\nUpdate `datafusion-cli` documentation\r\n\r\n# Are these changes tested?\r\nN/A\r\n\r\n# Are there any user-facing changes?\r\n\r\nJust docs", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4851/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4851/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4849", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4849/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4849/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4849/events", "html_url": "https://github.com/apache/datafusion/pull/4849", "id": 1524441864, "node_id": "PR_kwDOFWSkxs5G6nvE", "number": 4849, "title": "Fix push_down_projection through a distinct", "user": {"login": "Jefffrey", "id": 22608443, "node_id": "MDQ6VXNlcjIyNjA4NDQz", "avatar_url": "https://avatars.githubusercontent.com/u/22608443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jefffrey", "html_url": "https://github.com/Jefffrey", "followers_url": "https://api.github.com/users/Jefffrey/followers", "following_url": "https://api.github.com/users/Jefffrey/following{/other_user}", "gists_url": "https://api.github.com/users/Jefffrey/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jefffrey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jefffrey/subscriptions", "organizations_url": "https://api.github.com/users/Jefffrey/orgs", "repos_url": "https://api.github.com/users/Jefffrey/repos", "events_url": "https://api.github.com/users/Jefffrey/events{/privacy}", "received_events_url": "https://api.github.com/users/Jefffrey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-08T10:14:42Z", "updated_at": "2023-01-10T08:30:40Z", "closed_at": "2023-01-09T22:12:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4849", "html_url": "https://github.com/apache/datafusion/pull/4849", "diff_url": "https://github.com/apache/datafusion/pull/4849.diff", "patch_url": "https://github.com/apache/datafusion/pull/4849.patch", "merged_at": "2023-01-09T22:12:56Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4667\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nDuring PushDownProjection optimization, it does not properly account for distinct, as it will attempt to push directly through the distinct, from input plan:\r\n\r\n```sql\r\nProjection: data.id\r\n  Distinct:\r\n    Projection: data.id, data.data\r\n      TableScan: data\r\n```\r\n\r\nWill generate output plan:\r\n\r\n```sql\r\nProjection: data.id\r\n  Distinct:\r\n    TableScan: data projection=[id]\r\n```\r\n\r\nWhere it has inadvertently removed the `data.data` projection during the push down and hence leading to incorrect distinct behaviour.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nProperly handle distincts during recursion in PushDownProjection, to 'restart' the traversal with all required columns (derived from schema of the distinct) rather than using the input required columns.\r\n\r\nAfter fix, the above plan output will instead be:\r\n\r\n```sql\r\nProjection: data.id\r\n  Distinct:\r\n    TableScan: data projection=[id, data]\r\n```\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nNew unit test in push_down_projection\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4849/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4849/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4848", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4848/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4848/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4848/events", "html_url": "https://github.com/apache/datafusion/pull/4848", "id": 1524268686, "node_id": "PR_kwDOFWSkxs5G6Fdy", "number": 4848, "title": "Support using var/var_pop/stddev/stddev_pop in window expressions with custom frames", "user": {"login": "jonmmease", "id": 15064365, "node_id": "MDQ6VXNlcjE1MDY0MzY1", "avatar_url": "https://avatars.githubusercontent.com/u/15064365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonmmease", "html_url": "https://github.com/jonmmease", "followers_url": "https://api.github.com/users/jonmmease/followers", "following_url": "https://api.github.com/users/jonmmease/following{/other_user}", "gists_url": "https://api.github.com/users/jonmmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonmmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonmmease/subscriptions", "organizations_url": "https://api.github.com/users/jonmmease/orgs", "repos_url": "https://api.github.com/users/jonmmease/repos", "events_url": "https://api.github.com/users/jonmmease/events{/privacy}", "received_events_url": "https://api.github.com/users/jonmmease/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-08T01:35:16Z", "updated_at": "2023-01-10T06:42:24Z", "closed_at": "2023-01-10T06:37:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4848", "html_url": "https://github.com/apache/datafusion/pull/4848", "diff_url": "https://github.com/apache/datafusion/pull/4848.diff", "patch_url": "https://github.com/apache/datafusion/pull/4848.patch", "merged_at": "2023-01-10T06:37:42Z"}, "body": "# Which issue does this PR close?\r\n\r\nFollow on to https://github.com/apache/arrow-datafusion/pull/4846 for `var`, `var_pop`, `stddev`, and `stddev_pop`. \r\n\r\nThe actual `retract_batch` function was already implemented, but it looks like the `create_sliding_accumulator` implementations weren't added previously so it wasn't possible to use these aggregate functions in window expressions that use custom frames.\r\n\r\n# Are these changes tested?\r\nThe test added in effc4728912684f63b2e4ce837ae1b1816796480 will fail until https://github.com/apache/arrow-datafusion/pull/4847 is merged and this branch is updated.\r\n\r\nI'll mark this is draft until then.\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n`var`, `var_pop`, `stddev`, and `stddev_pop` will now work in window expressions that use custom frames rather than raising an error.\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4848/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4847", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4847/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4847/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4847/events", "html_url": "https://github.com/apache/datafusion/pull/4847", "id": 1524148330, "node_id": "PR_kwDOFWSkxs5G5th1", "number": 4847, "title": "Update variance/stddev to work with single values", "user": {"login": "jonmmease", "id": 15064365, "node_id": "MDQ6VXNlcjE1MDY0MzY1", "avatar_url": "https://avatars.githubusercontent.com/u/15064365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonmmease", "html_url": "https://github.com/jonmmease", "followers_url": "https://api.github.com/users/jonmmease/followers", "following_url": "https://api.github.com/users/jonmmease/following{/other_user}", "gists_url": "https://api.github.com/users/jonmmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonmmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonmmease/subscriptions", "organizations_url": "https://api.github.com/users/jonmmease/orgs", "repos_url": "https://api.github.com/users/jonmmease/repos", "events_url": "https://api.github.com/users/jonmmease/events{/privacy}", "received_events_url": "https://api.github.com/users/jonmmease/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-07T20:59:44Z", "updated_at": "2023-01-18T00:17:17Z", "closed_at": "2023-01-08T09:51:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4847", "html_url": "https://github.com/apache/datafusion/pull/4847", "diff_url": "https://github.com/apache/datafusion/pull/4847.diff", "patch_url": "https://github.com/apache/datafusion/pull/4847.patch", "merged_at": "2023-01-08T09:51:12Z"}, "body": "# Which issue does this PR close?\r\nCloses #4843.\r\n\r\n# Rationale for this change\r\nRather than crash when performing a variance-based aggregation on a single value, follow Postgres' semantics:\r\n\r\n - `var`/`stddev` of single element is `NULL`\r\n - `var_pop`/`stddev_pop` of single element is 0\r\n\r\nThere's documentation of this behavior in Snowflake (https://docs.snowflake.com/en/sql-reference/functions/stddev.html), and it's what Postgres does, but in searching briefly I haven't found this behavior described in the Postgres docs.\r\n\r\n# Are these changes tested?\r\nI added a pair of sqllogictest tests for the one and two element cases.\r\n\r\n# Are there any user-facing changes?\r\nQueries that used to crash when aggregating single values with variance-based aggregations will no longer crash.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4847/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4846", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4846/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4846/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4846/events", "html_url": "https://github.com/apache/datafusion/pull/4846", "id": 1524057799, "node_id": "PR_kwDOFWSkxs5G5ach", "number": 4846, "title": "Implement retract_batch for AvgAccumulator", "user": {"login": "jonmmease", "id": 15064365, "node_id": "MDQ6VXNlcjE1MDY0MzY1", "avatar_url": "https://avatars.githubusercontent.com/u/15064365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonmmease", "html_url": "https://github.com/jonmmease", "followers_url": "https://api.github.com/users/jonmmease/followers", "following_url": "https://api.github.com/users/jonmmease/following{/other_user}", "gists_url": "https://api.github.com/users/jonmmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonmmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonmmease/subscriptions", "organizations_url": "https://api.github.com/users/jonmmease/orgs", "repos_url": "https://api.github.com/users/jonmmease/repos", "events_url": "https://api.github.com/users/jonmmease/events{/privacy}", "received_events_url": "https://api.github.com/users/jonmmease/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-01-07T18:46:34Z", "updated_at": "2023-01-10T06:32:23Z", "closed_at": "2023-01-10T06:24:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4846", "html_url": "https://github.com/apache/datafusion/pull/4846", "diff_url": "https://github.com/apache/datafusion/pull/4846.diff", "patch_url": "https://github.com/apache/datafusion/pull/4846.patch", "merged_at": "2023-01-10T06:24:32Z"}, "body": "# Which issue does this PR close?\r\n\r\nCloses #4845.\r\n\r\n# What changes are included in this PR?\r\n\r\nAdds an implementation of `retract_batch` to `AvgAccumulator` that is identical to the implementation for `SumAccumulator`.\r\n\r\n# Are these changes tested?\r\n\r\n  I added `AVG` to a couple of existing tests that previously failed with `\"Retractable Accumulator hasn't been implemented...\"` error.\r\n\r\n# Are there any user-facing changes?\r\n`AVG` can now be used in window expressions with custom frames.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4846/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4846/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4840", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4840/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4840/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4840/events", "html_url": "https://github.com/apache/datafusion/pull/4840", "id": 1523626263, "node_id": "PR_kwDOFWSkxs5G39ug", "number": 4840, "title": "Support wildcard select on multiple column using joins", "user": {"login": "Jefffrey", "id": 22608443, "node_id": "MDQ6VXNlcjIyNjA4NDQz", "avatar_url": "https://avatars.githubusercontent.com/u/22608443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jefffrey", "html_url": "https://github.com/Jefffrey", "followers_url": "https://api.github.com/users/Jefffrey/followers", "following_url": "https://api.github.com/users/Jefffrey/following{/other_user}", "gists_url": "https://api.github.com/users/Jefffrey/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jefffrey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jefffrey/subscriptions", "organizations_url": "https://api.github.com/users/Jefffrey/orgs", "repos_url": "https://api.github.com/users/Jefffrey/repos", "events_url": "https://api.github.com/users/Jefffrey/events{/privacy}", "received_events_url": "https://api.github.com/users/Jefffrey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-07T08:53:24Z", "updated_at": "2023-01-09T06:43:51Z", "closed_at": "2023-01-08T22:38:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4840", "html_url": "https://github.com/apache/datafusion/pull/4840", "diff_url": "https://github.com/apache/datafusion/pull/4840.diff", "patch_url": "https://github.com/apache/datafusion/pull/4840.patch", "merged_at": "2023-01-08T22:38:05Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4674\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nSupport proper wildcard expansion on multiple column USING joins.\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nNew unit tests\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4840/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4840/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4839", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4839/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4839/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4839/events", "html_url": "https://github.com/apache/datafusion/pull/4839", "id": 1523519131, "node_id": "PR_kwDOFWSkxs5G3lSB", "number": 4839, "title": "Orthogonalize distribution and sort enforcement rules into `EnforceDistribution` and `EnforceSorting`", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-01-07T06:17:01Z", "updated_at": "2023-01-10T11:31:38Z", "closed_at": "2023-01-09T22:10:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4839", "html_url": "https://github.com/apache/datafusion/pull/4839", "diff_url": "https://github.com/apache/datafusion/pull/4839.diff", "patch_url": "https://github.com/apache/datafusion/pull/4839.patch", "merged_at": "2023-01-09T22:10:43Z"}, "body": "# Which issue does this PR close?\r\n\r\nN/A\r\n\r\n# Rationale for this change\r\n\r\nDuring the review of [#4691](https://github.com/apache/arrow-datafusion/pull/4691), one of the key findings was that there was a small separation of concern issue: Both `BasicEnforcement` and `OptimizeSorts` were dealing with local sorting and there was some overlap in functionality.\r\n\r\nThis PR pays this technical debt: Enforcers of distribution and sorting requirements will henceforth be two completely orthogonal rules (`EnforceDistribution` and `EnforceSorting`). Note that one can get the same result with the old `BasicEnforcement` rule by applying these two rules in succession.\r\n\r\nThe new `EnforceSorting` doesn't just enforce sorts by naively adding `SortExec`s, it will smartly add OR remove them as it enforces the ordering requirements. This will hopefully help with rule reuse and ease reasoning (we will not lose optimality by liberally using `EnforceSorting`).\r\n\r\n# What changes are included in this PR?\r\n\r\nLocal sort enforcement AND optimization is handled with a single rule. Current rule can be called multiple times without a downside in terms of the final physical plan.\r\n\r\n# Are these changes tested?\r\n\r\nExisting tests check for plan correctness.\r\n\r\n# Are there any user-facing changes?\r\n\r\nNo.\r\n\r\n# Future Work\r\n\r\nSome of the `EnforceDistribution` tests actually test the full `EnforceDistribution` + `EnforceSorting` cascade. It would be a good idea to orthogonalize those tests too.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4839/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4839/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4838", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4838/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4838/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4838/events", "html_url": "https://github.com/apache/datafusion/pull/4838", "id": 1523432131, "node_id": "PR_kwDOFWSkxs5G3Ruk", "number": 4838, "title": "support `select .. FROM 'parquet.file'` in datafusion-cli", "user": {"login": "unconsolable", "id": 11059633, "node_id": "MDQ6VXNlcjExMDU5NjMz", "avatar_url": "https://avatars.githubusercontent.com/u/11059633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unconsolable", "html_url": "https://github.com/unconsolable", "followers_url": "https://api.github.com/users/unconsolable/followers", "following_url": "https://api.github.com/users/unconsolable/following{/other_user}", "gists_url": "https://api.github.com/users/unconsolable/gists{/gist_id}", "starred_url": "https://api.github.com/users/unconsolable/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unconsolable/subscriptions", "organizations_url": "https://api.github.com/users/unconsolable/orgs", "repos_url": "https://api.github.com/users/unconsolable/repos", "events_url": "https://api.github.com/users/unconsolable/events{/privacy}", "received_events_url": "https://api.github.com/users/unconsolable/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-07T03:25:05Z", "updated_at": "2023-01-08T10:56:46Z", "closed_at": "2023-01-08T09:59:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4838", "html_url": "https://github.com/apache/datafusion/pull/4838", "diff_url": "https://github.com/apache/datafusion/pull/4838.diff", "patch_url": "https://github.com/apache/datafusion/pull/4838.patch", "merged_at": "2023-01-08T09:59:51Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4580 .\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nSee #4580\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nFollow up #4581 \r\n- Add `DynamicFileCatalog`, `DynamicFileCatalogProvider`, `DynamicFileCatalogProvider`, which can try to create a `ListingTable` when table is not found.\r\n- Register `DynamicFileCatalog` in `SessionContext`\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nManually tested.\r\n\r\n```\r\n$ cargo run\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.19s\r\n     Running `target/debug/datafusion-cli`\r\nDataFusion CLI v15.0.0\r\n\u276f select * from '../parquet-testing/data/alltypes_tiny_pages.parquet' limit 10;\r\n+-----+----------+-------------+--------------+---------+------------+-----------+--------------------+-----------------+------------+-------------------------+------+-------+\r\n| id  | bool_col | tinyint_col | smallint_col | int_col | bigint_col | float_col | double_col         | date_string_col | string_col | timestamp_col           | year | month |\r\n+-----+----------+-------------+--------------+---------+------------+-----------+--------------------+-----------------+------------+-------------------------+------+-------+\r\n| 122 | true     | 2           | 2            | 2       | 20         | 2.2       | 20.2               | 01/13/09        | 2          | 2009-01-13T01:02:05.410 | 2009 | 1     |\r\n| 123 | false    | 3           | 3            | 3       | 30         | 3.3       | 30.299999999999997 | 01/13/09        | 3          | 2009-01-13T01:03:05.430 | 2009 | 1     |\r\n| 124 | true     | 4           | 4            | 4       | 40         | 4.4       | 40.4               | 01/13/09        | 4          | 2009-01-13T01:04:05.460 | 2009 | 1     |\r\n| 125 | false    | 5           | 5            | 5       | 50         | 5.5       | 50.5               | 01/13/09        | 5          | 2009-01-13T01:05:05.500 | 2009 | 1     |\r\n| 126 | true     | 6           | 6            | 6       | 60         | 6.6       | 60.599999999999994 | 01/13/09        | 6          | 2009-01-13T01:06:05.550 | 2009 | 1     |\r\n| 127 | false    | 7           | 7            | 7       | 70         | 7.7       | 70.7               | 01/13/09        | 7          | 2009-01-13T01:07:05.610 | 2009 | 1     |\r\n| 128 | true     | 8           | 8            | 8       | 80         | 8.8       | 80.8               | 01/13/09        | 8          | 2009-01-13T01:08:05.680 | 2009 | 1     |\r\n| 129 | false    | 9           | 9            | 9       | 90         | 9.9       | 90.89999999999999  | 01/13/09        | 9          | 2009-01-13T01:09:05.760 | 2009 | 1     |\r\n| 130 | true     | 0           | 0            | 0       | 0          | 0         | 0                  | 01/14/09        | 0          | 2009-01-14T01:10:05.850 | 2009 | 1     |\r\n| 131 | false    | 1           | 1            | 1       | 10         | 1.1       | 10.1               | 01/14/09        | 1          | 2009-01-14T01:11:05.850 | 2009 | 1     |\r\n+-----+----------+-------------+--------------+---------+------------+-----------+--------------------+-----------------+------------+-------------------------+------+-------+\r\n10 rows in set. Query took 0.156 seconds.\r\n```\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\nSyntax `select .. FROM 'abc.parquet'` is supported in `datafusion-cli`.\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4838/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4838/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4836", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4836/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4836/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4836/events", "html_url": "https://github.com/apache/datafusion/pull/4836", "id": 1523361852, "node_id": "PR_kwDOFWSkxs5G3DmV", "number": 4836, "title": "Remove tests from sql_integration that were ported to sqllogictest ", "user": {"login": "matthewwillian", "id": 6597057, "node_id": "MDQ6VXNlcjY1OTcwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/6597057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewwillian", "html_url": "https://github.com/matthewwillian", "followers_url": "https://api.github.com/users/matthewwillian/followers", "following_url": "https://api.github.com/users/matthewwillian/following{/other_user}", "gists_url": "https://api.github.com/users/matthewwillian/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewwillian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewwillian/subscriptions", "organizations_url": "https://api.github.com/users/matthewwillian/orgs", "repos_url": "https://api.github.com/users/matthewwillian/repos", "events_url": "https://api.github.com/users/matthewwillian/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewwillian/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-07T00:48:55Z", "updated_at": "2023-01-09T22:22:35Z", "closed_at": "2023-01-09T22:13:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4836", "html_url": "https://github.com/apache/datafusion/pull/4836", "diff_url": "https://github.com/apache/datafusion/pull/4836.diff", "patch_url": "https://github.com/apache/datafusion/pull/4836.patch", "merged_at": "2023-01-09T22:13:17Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4498\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n- Removes arrow_typeof.rs\r\n- Deletes a number of tests in aggegates.rs\r\n- Uncomments tests in aggregate.slt that worked without any substantial changes\r\n\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nUnit-tests pass\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\nNo\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4836/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4836/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4835", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4835/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4835/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4835/events", "html_url": "https://github.com/apache/datafusion/pull/4835", "id": 1523228944, "node_id": "PR_kwDOFWSkxs5G2qLU", "number": 4835, "title": "Bump tokio from 1.23.0 to 1.23.1 in /datafusion-cli", "user": {"login": "dependabot[bot]", "id": 49699333, "node_id": "MDM6Qm90NDk2OTkzMzM=", "avatar_url": "https://avatars.githubusercontent.com/in/29110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot%5Bbot%5D", "html_url": "https://github.com/apps/dependabot", "followers_url": "https://api.github.com/users/dependabot%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3679349472, "node_id": "LA_kwDOFWSkxs7bTmrg", "url": "https://api.github.com/repos/apache/datafusion/labels/auto-dependencies", "name": "auto-dependencies", "color": "45A736", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-06T21:58:07Z", "updated_at": "2023-01-07T15:03:12Z", "closed_at": "2023-01-07T14:57:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4835", "html_url": "https://github.com/apache/datafusion/pull/4835", "diff_url": "https://github.com/apache/datafusion/pull/4835.diff", "patch_url": "https://github.com/apache/datafusion/pull/4835.patch", "merged_at": "2023-01-07T14:57:58Z"}, "body": "Bumps [tokio](https://github.com/tokio-rs/tokio) from 1.23.0 to 1.23.1.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/tokio-rs/tokio/releases\">tokio's releases</a>.</em></p>\n<blockquote>\n<h2>Tokio v1.23.1</h2>\n<p>This release forward ports changes from 1.18.4.</p>\n<h3>Fixed</h3>\n<ul>\n<li>net: fix Windows named pipe server builder to maintain option when toggling\npipe mode (<a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5336\">#5336</a>).</li>\n</ul>\n<p><a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/issues/5336\">#5336</a>: <a href=\"https://github-redirect.dependabot.com/tokio-rs/tokio/pull/5336\">tokio-rs/tokio#5336</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/1a997ffbd62334af2553775234e75ede2d7d949f\"><code>1a997ff</code></a> chore: prepare Tokio v1.23.1 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/a8fe333cc45c14b0566d450dff8ff85fbe974fa0\"><code>a8fe333</code></a> Merge branch 'tokio-1.20.x' into tokio-1.23.x</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/ba81945ffc2695b71f2bbcadbfb5e46ec55aaef3\"><code>ba81945</code></a> chore: prepare Tokio 1.20.3 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/763bdc967e3e128d1e6e000238f1d257a81bf59a\"><code>763bdc9</code></a> ci: run WASI tasks using latest Rust</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/9f98535877f8f706b436447952f40f153e2a52dc\"><code>9f98535</code></a> Merge remote-tracking branch 'origin/tokio-1.18.x' into fix-named-pipes-1.20</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/9241c3eddf4a6a218681b088d71f7191513e2376\"><code>9241c3e</code></a> chore: prepare Tokio v1.18.4 release</li>\n<li><a href=\"https://github.com/tokio-rs/tokio/commit/699573d550fabf4bfb45d82505d6709faaae9037\"><code>699573d</code></a> net: fix named pipes server configuration builder</li>\n<li>See full diff in <a href=\"https://github.com/tokio-rs/tokio/compare/tokio-1.23.0...tokio-1.23.1\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=tokio&package-manager=cargo&previous-version=1.23.0&new-version=1.23.1)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\nYou can disable automated security fix PRs for this repo from the [Security Alerts page](https://github.com/apache/arrow-datafusion/network/alerts).\n\n</details>", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4835/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4835/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4833", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4833/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4833/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4833/events", "html_url": "https://github.com/apache/datafusion/pull/4833", "id": 1522984218, "node_id": "PR_kwDOFWSkxs5G11r0", "number": 4833, "title": "Fix a few links in `roadmap.md`", "user": {"login": "romanz", "id": 9900, "node_id": "MDQ6VXNlcjk5MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/romanz", "html_url": "https://github.com/romanz", "followers_url": "https://api.github.com/users/romanz/followers", "following_url": "https://api.github.com/users/romanz/following{/other_user}", "gists_url": "https://api.github.com/users/romanz/gists{/gist_id}", "starred_url": "https://api.github.com/users/romanz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/romanz/subscriptions", "organizations_url": "https://api.github.com/users/romanz/orgs", "repos_url": "https://api.github.com/users/romanz/repos", "events_url": "https://api.github.com/users/romanz/events{/privacy}", "received_events_url": "https://api.github.com/users/romanz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-06T18:36:46Z", "updated_at": "2023-01-07T09:46:52Z", "closed_at": "2023-01-07T09:08:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4833", "html_url": "https://github.com/apache/datafusion/pull/4833", "diff_url": "https://github.com/apache/datafusion/pull/4833.diff", "patch_url": "https://github.com/apache/datafusion/pull/4833.patch", "merged_at": "2023-01-07T09:08:57Z"}, "body": "# What changes are included in this PR?\r\n\r\nA few links were fixed in https://github.com/romanz/arrow-datafusion/blob/fix-docs/docs/source/contributor-guide/roadmap.md.\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4833/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4831", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4831/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4831/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4831/events", "html_url": "https://github.com/apache/datafusion/pull/4831", "id": 1522810378, "node_id": "PR_kwDOFWSkxs5G1P5w", "number": 4831, "title": "DataFusion 16.0.0 release prep: Update version + add changelog", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-01-06T16:10:05Z", "updated_at": "2023-01-07T23:11:49Z", "closed_at": "2023-01-07T23:04:52Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4831", "html_url": "https://github.com/apache/datafusion/pull/4831", "diff_url": "https://github.com/apache/datafusion/pull/4831.diff", "patch_url": "https://github.com/apache/datafusion/pull/4831.patch", "merged_at": "2023-01-07T23:04:52Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/4776\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n- [x] Update version number\r\n- [x] Generate changelog -- [rendered version](https://github.com/andygrove/arrow-datafusion/blob/datafusion-16/datafusion/CHANGELOG.md)\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4831/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4830", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4830/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4830/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4830/events", "html_url": "https://github.com/apache/datafusion/pull/4830", "id": 1522573027, "node_id": "PR_kwDOFWSkxs5G0cJw", "number": 4830, "title": "feat: use arrow row format for hash-group-by", "user": {"login": "crepererum", "id": 1529400, "node_id": "MDQ6VXNlcjE1Mjk0MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1529400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crepererum", "html_url": "https://github.com/crepererum", "followers_url": "https://api.github.com/users/crepererum/followers", "following_url": "https://api.github.com/users/crepererum/following{/other_user}", "gists_url": "https://api.github.com/users/crepererum/gists{/gist_id}", "starred_url": "https://api.github.com/users/crepererum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crepererum/subscriptions", "organizations_url": "https://api.github.com/users/crepererum/orgs", "repos_url": "https://api.github.com/users/crepererum/repos", "events_url": "https://api.github.com/users/crepererum/events{/privacy}", "received_events_url": "https://api.github.com/users/crepererum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-06T13:15:22Z", "updated_at": "2023-01-06T21:06:40Z", "closed_at": "2023-01-06T21:03:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4830", "html_url": "https://github.com/apache/datafusion/pull/4830", "diff_url": "https://github.com/apache/datafusion/pull/4830.diff", "patch_url": "https://github.com/apache/datafusion/pull/4830.patch", "merged_at": "2023-01-06T21:03:12Z"}, "body": "\r\n\r\n\r\n\r\n# Which issue does this PR close?\r\nFor #2723.\r\n\r\n# Rationale for this change\r\nThis has two effects:\r\n\r\n- **wider feature support:** We now use the V2 aggregator for all group-column types. The arrow row format support is sufficient for that. V1 will only be used if the aggregator itself doesn't support V2 (and these are quite a few at the moment). We'll improve on that front in follow-up PRs.\r\n- **more speed:** Turns out the arrow row format is also faster (see below).\r\n\r\n# What changes are included in this PR?\r\nUse arrow row format for group keys instead of DF row format.\r\n\r\n# Are these changes tested?\r\nPerf results (mind the noise in the benchmarks that are actually not even touched by this code change):\r\n\r\n```text\r\n\u276f cargo bench -p datafusion --bench aggregate_query_sql -- --baseline issue2723a-pre\r\n...\r\n     Running benches/aggregate_query_sql.rs (target/release/deps/aggregate_query_sql-fdbe5671f9c3019b)\r\naggregate_query_no_group_by 15 12\r\n                        time:   [779.28 \u00b5s 782.77 \u00b5s 786.28 \u00b5s]\r\n                        change: [+2.1375% +2.7672% +3.4171%] (p = 0.00 < 0.05)\r\n                        Performance has regressed.\r\nFound 1 outliers among 100 measurements (1.00%)\r\n  1 (1.00%) high mild\r\n\r\naggregate_query_no_group_by_min_max_f64\r\n                        time:   [712.96 \u00b5s 715.90 \u00b5s 719.14 \u00b5s]\r\n                        change: [+0.8379% +1.7648% +2.6345%] (p = 0.00 < 0.05)\r\n                        Change within noise threshold.\r\nFound 10 outliers among 100 measurements (10.00%)\r\n  3 (3.00%) low mild\r\n  6 (6.00%) high mild\r\n  1 (1.00%) high severe\r\n\r\nBenchmarking aggregate_query_no_group_by_count_distinct_wide: Warming up for 3.0000 s\r\nWarning: Unable to complete 100 samples in 5.0s. You may wish to increase target time to 8.7s, enable flat sampling, or reduce sample count to 50.\r\naggregate_query_no_group_by_count_distinct_wide\r\n                        time:   [1.7297 ms 1.7399 ms 1.7503 ms]\r\n                        change: [-34.647% -33.908% -33.165%] (p = 0.00 < 0.05)\r\n                        Performance has improved.\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  5 (5.00%) high mild\r\n\r\nBenchmarking aggregate_query_no_group_by_count_distinct_narrow: Warming up for 3.0000 s\r\nWarning: Unable to complete 100 samples in 5.0s. You may wish to increase target time to 5.7s, enable flat sampling, or reduce sample count to 60.\r\naggregate_query_no_group_by_count_distinct_narrow\r\n                        time:   [1.0984 ms 1.1045 ms 1.1115 ms]\r\n                        change: [-38.581% -38.076% -37.569%] (p = 0.00 < 0.05)\r\n                        Performance has improved.\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  1 (1.00%) low mild\r\n  5 (5.00%) high mild\r\n\r\nBenchmarking aggregate_query_group_by: Warming up for 3.0000 s\r\nWarning: Unable to complete 100 samples in 5.0s. You may wish to increase target time to 9.1s, enable flat sampling, or reduce sample count to 50.\r\naggregate_query_group_by\r\n                        time:   [1.7810 ms 1.7925 ms 1.8057 ms]\r\n                        change: [-25.252% -24.127% -22.737%] (p = 0.00 < 0.05)\r\n                        Performance has improved.\r\nFound 9 outliers among 100 measurements (9.00%)\r\n  2 (2.00%) low mild\r\n  5 (5.00%) high mild\r\n  2 (2.00%) high severe\r\n\r\nBenchmarking aggregate_query_group_by_with_filter: Warming up for 3.0000 s\r\nWarning: Unable to complete 100 samples in 5.0s. You may wish to increase target time to 6.1s, enable flat sampling, or reduce sample count to 60.\r\naggregate_query_group_by_with_filter\r\n                        time:   [1.2068 ms 1.2119 ms 1.2176 ms]\r\n                        change: [+2.2847% +3.0857% +3.8789%] (p = 0.00 < 0.05)\r\n                        Performance has regressed.\r\nFound 10 outliers among 100 measurements (10.00%)\r\n  1 (1.00%) low mild\r\n  7 (7.00%) high mild\r\n  2 (2.00%) high severe\r\n\r\nBenchmarking aggregate_query_group_by_u64 15 12: Warming up for 3.0000 s\r\nWarning: Unable to complete 100 samples in 5.0s. You may wish to increase target time to 8.7s, enable flat sampling, or reduce sample count to 50.\r\naggregate_query_group_by_u64 15 12\r\n                        time:   [1.6762 ms 1.6848 ms 1.6942 ms]\r\n                        change: [-29.598% -28.603% -27.400%] (p = 0.00 < 0.05)\r\n                        Performance has improved.\r\nFound 8 outliers among 100 measurements (8.00%)\r\n  1 (1.00%) low mild\r\n  1 (1.00%) high mild\r\n  6 (6.00%) high severe\r\n\r\nBenchmarking aggregate_query_group_by_with_filter_u64 15 12: Warming up for 3.0000 s\r\nWarning: Unable to complete 100 samples in 5.0s. You may wish to increase target time to 6.1s, enable flat sampling, or reduce sample count to 60.\r\naggregate_query_group_by_with_filter_u64 15 12\r\n                        time:   [1.1969 ms 1.2008 ms 1.2049 ms]\r\n                        change: [+1.3015% +2.1513% +3.0016%] (p = 0.00 < 0.05)\r\n                        Performance has regressed.\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  1 (1.00%) low severe\r\n  2 (2.00%) high mild\r\n  3 (3.00%) high severe\r\n\r\naggregate_query_group_by_u64_multiple_keys\r\n                        time:   [14.797 ms 15.112 ms 15.427 ms]\r\n                        change: [-12.072% -8.7274% -5.3392%] (p = 0.00 < 0.05)\r\n                        Performance has improved.\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  3 (3.00%) high mild\r\n\r\naggregate_query_approx_percentile_cont_on_u64\r\n                        time:   [4.1278 ms 4.1687 ms 4.2098 ms]\r\n                        change: [+0.4851% +1.9525% +3.3676%] (p = 0.01 < 0.05)\r\n                        Change within noise threshold.\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  1 (1.00%) low mild\r\n  1 (1.00%) high mild\r\n\r\naggregate_query_approx_percentile_cont_on_f32\r\n                        time:   [3.4694 ms 3.4967 ms 3.5245 ms]\r\n                        change: [-1.5467% -0.4432% +0.6609%] (p = 0.43 > 0.05)\r\n                        No change in performance detected.\r\nFound 1 outliers among 100 measurements (1.00%)\r\n  1 (1.00%) high mild\r\n```\r\n\r\n# Are there any user-facing changes?\r\nFaster group-bys.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4830/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4830/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4829", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4829/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4829/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4829/events", "html_url": "https://github.com/apache/datafusion/pull/4829", "id": 1522004170, "node_id": "PR_kwDOFWSkxs5Gyds2", "number": 4829, "title": "refactor: split relation of planner into one part.", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-06T05:58:47Z", "updated_at": "2023-01-07T15:11:22Z", "closed_at": "2023-01-07T15:04:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4829", "html_url": "https://github.com/apache/datafusion/pull/4829", "diff_url": "https://github.com/apache/datafusion/pull/4829.diff", "patch_url": "https://github.com/apache/datafusion/pull/4829.patch", "merged_at": "2023-01-07T15:04:48Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4392.\r\n\r\nFOLLOWUP #4783\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4829/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4826", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4826/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4826/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4826/events", "html_url": "https://github.com/apache/datafusion/pull/4826", "id": 1520241727, "node_id": "PR_kwDOFWSkxs5GsaXQ", "number": 4826, "title": "Support non-tuple expression for in-subquery to join", "user": {"login": "ygf11", "id": 3428089, "node_id": "MDQ6VXNlcjM0MjgwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3428089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygf11", "html_url": "https://github.com/ygf11", "followers_url": "https://api.github.com/users/ygf11/followers", "following_url": "https://api.github.com/users/ygf11/following{/other_user}", "gists_url": "https://api.github.com/users/ygf11/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygf11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygf11/subscriptions", "organizations_url": "https://api.github.com/users/ygf11/orgs", "repos_url": "https://api.github.com/users/ygf11/repos", "events_url": "https://api.github.com/users/ygf11/events{/privacy}", "received_events_url": "https://api.github.com/users/ygf11/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2023-01-05T07:33:23Z", "updated_at": "2023-01-16T06:42:00Z", "closed_at": "2023-01-15T12:23:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4826", "html_url": "https://github.com/apache/datafusion/pull/4826", "diff_url": "https://github.com/apache/datafusion/pull/4826.diff", "patch_url": "https://github.com/apache/datafusion/pull/4826.patch", "merged_at": "2023-01-15T12:23:45Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4724.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis sql works in datafusion:\r\n```sql\r\n> select * from t1 where t1_id in (select t2_id from t2);\r\n```\r\nbut following sql does not work:\r\n```sql\r\n\u276f select * from t1 where t1_id + 11 in (select t2_id from t2);\r\nNotImplemented(\"Physical plan does not support logical expression CAST(t1.t1_id AS Int64) + Int64(11) IN (<subquery>)\")\r\n\r\n\u276f select * from t1 where t1_id  in (select t2_id + 11 from t2);\r\nNotImplemented(\"Physical plan does not support logical expression t1.t1_id IN (<subquery>)\")\r\n\r\n\u276f select * from t1 where t1_id + 12  in (select t2_id + 1 from t2);\r\nNotImplemented(\"Physical plan does not support logical expression CAST(t1.t1_id AS Int64) + Int64(12) IN (<subquery>)\")\r\n``` \r\n\r\n# What changes are included in this PR?\r\n\r\n1. Rewrite `optimize_where_in` in `decorrelate_where_in.rs`.\r\n2. Fix tests. \r\n\r\n# Are these changes tested?\r\nYes.\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4826/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4826/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4825", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4825/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4825/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4825/events", "html_url": "https://github.com/apache/datafusion/pull/4825", "id": 1520076875, "node_id": "PR_kwDOFWSkxs5Gr1c7", "number": 4825, "title": "bugfix: remove cnf_rewrite in push_down_filter", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-05T05:06:32Z", "updated_at": "2023-01-18T11:13:00Z", "closed_at": "2023-01-07T09:09:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4825", "html_url": "https://github.com/apache/datafusion/pull/4825", "diff_url": "https://github.com/apache/datafusion/pull/4825.diff", "patch_url": "https://github.com/apache/datafusion/pull/4825.patch", "merged_at": "2023-01-07T09:09:35Z"}, "body": "# Which issue does this PR close?\r\n\r\nCloses #4822.\r\n\r\n# Rationale for this change\r\n\r\nI found this error when I finish #4465\r\n\r\n# What changes are included in this PR?\r\n\r\n- remove cnf_rewrite (its implementation is wrong, and we already have rule `RewriteDisjunctivePredicate`)\r\n- dedup by using hashset when merge filter \r\n- move rule RewriteDisjunctivePredicate into front\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4825/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4825/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4823", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4823/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4823/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4823/events", "html_url": "https://github.com/apache/datafusion/pull/4823", "id": 1519490772, "node_id": "PR_kwDOFWSkxs5GpzKp", "number": 4823, "title": "minor: add some comments to row group pruning tests", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-04T19:48:47Z", "updated_at": "2023-08-08T20:14:47Z", "closed_at": "2023-01-05T12:28:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4823", "html_url": "https://github.com/apache/datafusion/pull/4823", "diff_url": "https://github.com/apache/datafusion/pull/4823.diff", "patch_url": "https://github.com/apache/datafusion/pull/4823.patch", "merged_at": "2023-01-05T12:28:33Z"}, "body": "# Which issue does this PR close?\r\n\r\nNone\r\n\r\n# Rationale for this change\r\n\r\nWhile reviewing https://github.com/apache/arrow-datafusion/pull/4810 from @liukun4515  I had to double check what this function was doing, so I wanted to document it to save future self (and maybe other readers)\r\n\r\n# What changes are included in this PR?\r\n\r\ndoc comments on a test functon\r\n\r\n# Are these changes tested?\r\nNo (nor are they needed)\r\n\r\n# Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4823/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4821", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4821/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4821/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4821/events", "html_url": "https://github.com/apache/datafusion/pull/4821", "id": 1519232741, "node_id": "PR_kwDOFWSkxs5Go7wH", "number": 4821, "title": "Handle trailing tbl column in TPCH benchmarks", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-04T16:11:30Z", "updated_at": "2023-01-05T20:03:06Z", "closed_at": "2023-01-05T19:55:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4821", "html_url": "https://github.com/apache/datafusion/pull/4821", "diff_url": "https://github.com/apache/datafusion/pull/4821.diff", "patch_url": "https://github.com/apache/datafusion/pull/4821.patch", "merged_at": "2023-01-05T19:55:21Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThe tbl format is of the form\r\n\r\n```\r\na|b|c|\r\n```\r\n\r\nNote the trailing `|`. Interpreting this as CSV therefore adds an additional trailing column, currently the CSV reader just ignores this. However, with arrow 30 the reader now complains if you give it a schema that doesn't match the file. The changes in this PR work around this\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nAdds an additional `__placeholder` column to the schema when reading from a tbl file, this can then be projected out. This was a quick way to workaround this issue without polluting the general codebase with support for what appears to be a TPCH specific data format?\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4821/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4820", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4820/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4820/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4820/events", "html_url": "https://github.com/apache/datafusion/pull/4820", "id": 1518862942, "node_id": "PR_kwDOFWSkxs5GnqoE", "number": 4820, "title": "fix: account for memory in `RepartitionExec`", "user": {"login": "crepererum", "id": 1529400, "node_id": "MDQ6VXNlcjE1Mjk0MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1529400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crepererum", "html_url": "https://github.com/crepererum", "followers_url": "https://api.github.com/users/crepererum/followers", "following_url": "https://api.github.com/users/crepererum/following{/other_user}", "gists_url": "https://api.github.com/users/crepererum/gists{/gist_id}", "starred_url": "https://api.github.com/users/crepererum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crepererum/subscriptions", "organizations_url": "https://api.github.com/users/crepererum/orgs", "repos_url": "https://api.github.com/users/crepererum/repos", "events_url": "https://api.github.com/users/crepererum/events{/privacy}", "received_events_url": "https://api.github.com/users/crepererum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-04T12:07:38Z", "updated_at": "2023-01-07T09:22:49Z", "closed_at": "2023-01-07T09:19:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4820", "html_url": "https://github.com/apache/datafusion/pull/4820", "diff_url": "https://github.com/apache/datafusion/pull/4820.diff", "patch_url": "https://github.com/apache/datafusion/pull/4820.patch", "merged_at": "2023-01-07T09:19:25Z"}, "body": "# Which issue does this PR close?\r\nCloses #4816.\r\n\r\n# Rationale for this change\r\nUnbounded channels in `RepartitionExec` may easily lead to OOMs, even when the user has a memory manager limit configured.\r\n\r\n# What changes are included in this PR?\r\nMemory accounting. Some drive-by clean-ups.\r\n\r\n# Are these changes tested?\r\nNew test called `oom`.\r\n\r\n# Are there any user-facing changes?\r\nBetter memory accounting.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4820/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4820/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4818", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4818/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4818/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4818/events", "html_url": "https://github.com/apache/datafusion/pull/4818", "id": 1518686997, "node_id": "PR_kwDOFWSkxs5GnDjY", "number": 4818, "title": "Update to arrow `30.0.1`", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-01-04T10:08:29Z", "updated_at": "2023-01-15T15:50:32Z", "closed_at": "2023-01-15T15:40:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4818", "html_url": "https://github.com/apache/datafusion/pull/4818", "diff_url": "https://github.com/apache/datafusion/pull/4818.diff", "patch_url": "https://github.com/apache/datafusion/pull/4818.patch", "merged_at": "2023-01-15T15:40:38Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4818/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4818/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4817", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4817/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4817/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4817/events", "html_url": "https://github.com/apache/datafusion/pull/4817", "id": 1518657781, "node_id": "PR_kwDOFWSkxs5Gm9J8", "number": 4817, "title": "Fix clippy", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-04T09:49:25Z", "updated_at": "2023-01-04T10:12:50Z", "closed_at": "2023-01-04T10:07:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4817", "html_url": "https://github.com/apache/datafusion/pull/4817", "diff_url": "https://github.com/apache/datafusion/pull/4817.diff", "patch_url": "https://github.com/apache/datafusion/pull/4817.patch", "merged_at": "2023-01-04T10:07:51Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4817/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4817/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4810", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4810/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4810/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4810/events", "html_url": "https://github.com/apache/datafusion/pull/4810", "id": 1518470090, "node_id": "PR_kwDOFWSkxs5GmTnG", "number": 4810, "title": "Add test cases: row group filter with missing statistics for decimal data type", "user": {"login": "liukun4515", "id": 7450163, "node_id": "MDQ6VXNlcjc0NTAxNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7450163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liukun4515", "html_url": "https://github.com/liukun4515", "followers_url": "https://api.github.com/users/liukun4515/followers", "following_url": "https://api.github.com/users/liukun4515/following{/other_user}", "gists_url": "https://api.github.com/users/liukun4515/gists{/gist_id}", "starred_url": "https://api.github.com/users/liukun4515/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liukun4515/subscriptions", "organizations_url": "https://api.github.com/users/liukun4515/orgs", "repos_url": "https://api.github.com/users/liukun4515/repos", "events_url": "https://api.github.com/users/liukun4515/events{/privacy}", "received_events_url": "https://api.github.com/users/liukun4515/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-04T07:31:21Z", "updated_at": "2023-01-07T13:25:16Z", "closed_at": "2023-01-05T03:16:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4810", "html_url": "https://github.com/apache/datafusion/pull/4810", "diff_url": "https://github.com/apache/datafusion/pull/4810.diff", "patch_url": "https://github.com/apache/datafusion/pull/4810.patch", "merged_at": "2023-01-05T03:16:18Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nFrom the comments @alamb  https://github.com/apache/arrow-datafusion/pull/4742#discussion_r1059755347\r\n\r\nIf the min or max is None which indicate the statistics is missing, the row group should not be filtered.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4810/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4807", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4807/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4807/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4807/events", "html_url": "https://github.com/apache/datafusion/pull/4807", "id": 1517617633, "node_id": "PR_kwDOFWSkxs5GjYNm", "number": 4807, "title": "Enable PhysicalOptimizerRule lazily (#4806)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-03T16:14:15Z", "updated_at": "2023-01-03T22:02:15Z", "closed_at": "2023-01-03T21:58:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4807", "html_url": "https://github.com/apache/datafusion/pull/4807", "diff_url": "https://github.com/apache/datafusion/pull/4807.diff", "patch_url": "https://github.com/apache/datafusion/pull/4807.patch", "merged_at": "2023-01-03T21:58:13Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4806\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis moves interpretation of the config options into the rules themselves, which avoids issues where the option is altered after creation of the `SessionState` by the `SessionContext`\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4807/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4807/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4805", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4805/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4805/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4805/events", "html_url": "https://github.com/apache/datafusion/pull/4805", "id": 1517455661, "node_id": "PR_kwDOFWSkxs5Gi1IK", "number": 4805, "title": "Move default catalog and schema onto ConfigOptions (#3887)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-03T14:18:06Z", "updated_at": "2023-01-03T22:02:16Z", "closed_at": "2023-01-03T21:58:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4805", "html_url": "https://github.com/apache/datafusion/pull/4805", "diff_url": "https://github.com/apache/datafusion/pull/4805.diff", "patch_url": "https://github.com/apache/datafusion/pull/4805.patch", "merged_at": "2023-01-03T21:58:45Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #3887\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4805/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4803", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4803/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4803/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4803/events", "html_url": "https://github.com/apache/datafusion/pull/4803", "id": 1517407191, "node_id": "PR_kwDOFWSkxs5Giqsv", "number": 4803, "title": "Move ConfigOptions to core", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-03T13:38:02Z", "updated_at": "2023-01-04T12:12:44Z", "closed_at": "2023-01-04T12:00:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4803", "html_url": "https://github.com/apache/datafusion/pull/4803", "diff_url": "https://github.com/apache/datafusion/pull/4803.diff", "patch_url": "https://github.com/apache/datafusion/pull/4803.patch", "merged_at": "2023-01-04T12:00:59Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #4349 \r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nMoves `ConfigOptions` to `common` so it can be used directly by the optimizer, planner, etc... greatly simplifying plumbing configuration around the place\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4803/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4802", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4802/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4802/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4802/events", "html_url": "https://github.com/apache/datafusion/pull/4802", "id": 1517361433, "node_id": "PR_kwDOFWSkxs5GigoU", "number": 4802, "title": "add tpch sqllogicaltest and remove some duplicated test", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-03T13:02:28Z", "updated_at": "2023-01-08T22:41:37Z", "closed_at": "2023-01-08T22:39:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4802", "html_url": "https://github.com/apache/datafusion/pull/4802", "diff_url": "https://github.com/apache/datafusion/pull/4802.diff", "patch_url": "https://github.com/apache/datafusion/pull/4802.patch", "merged_at": "2023-01-08T22:39:51Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4801.\r\n\r\n# Rationale for this change\r\n\r\nI just want to remove tpch in Unit-Test, because it's duplicated with independent test for TPCH.\r\nBut these UT contains some data-test, so I add sqllogicaltest for it.\r\n\r\n# What changes are included in this PR?\r\n\r\n- add tpch sqllogicaltest\r\n- remove some duplicated test. \r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4802/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4800", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4800/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4800/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4800/events", "html_url": "https://github.com/apache/datafusion/pull/4800", "id": 1517270536, "node_id": "PR_kwDOFWSkxs5GiM91", "number": 4800, "title": "remove duplicated test", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-03T11:36:55Z", "updated_at": "2023-01-03T14:42:00Z", "closed_at": "2023-01-03T14:33:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4800", "html_url": "https://github.com/apache/datafusion/pull/4800", "diff_url": "https://github.com/apache/datafusion/pull/4800.diff", "patch_url": "https://github.com/apache/datafusion/pull/4800.patch", "merged_at": "2023-01-03T14:33:23Z"}, "body": "# Which issue does this PR close?\r\n\r\nN/A\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4800/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4799", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4799/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4799/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4799/events", "html_url": "https://github.com/apache/datafusion/pull/4799", "id": 1517052035, "node_id": "PR_kwDOFWSkxs5GheIU", "number": 4799, "title": "Update sqlparser requirement from 0.29 to 0.30", "user": {"login": "dependabot[bot]", "id": 49699333, "node_id": "MDM6Qm90NDk2OTkzMzM=", "avatar_url": "https://avatars.githubusercontent.com/in/29110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dependabot%5Bbot%5D", "html_url": "https://github.com/apps/dependabot", "followers_url": "https://api.github.com/users/dependabot%5Bbot%5D/followers", "following_url": "https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dependabot%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/dependabot%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/dependabot%5Bbot%5D/repos", "events_url": "https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/dependabot%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 3679349472, "node_id": "LA_kwDOFWSkxs7bTmrg", "url": "https://api.github.com/repos/apache/datafusion/labels/auto-dependencies", "name": "auto-dependencies", "color": "45A736", "default": false, "description": ""}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-03T08:06:49Z", "updated_at": "2023-01-03T20:13:24Z", "closed_at": "2023-01-03T20:08:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4799", "html_url": "https://github.com/apache/datafusion/pull/4799", "diff_url": "https://github.com/apache/datafusion/pull/4799.diff", "patch_url": "https://github.com/apache/datafusion/pull/4799.patch", "merged_at": "2023-01-03T20:08:24Z"}, "body": "Updates the requirements on [sqlparser](https://github.com/sqlparser-rs/sqlparser-rs) to permit the latest version.\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/sqlparser-rs/sqlparser-rs/blob/main/CHANGELOG.md\">sqlparser's changelog</a>.</em></p>\n<blockquote>\n<h2>[0.30.0] 2023-01-02</h2>\n<h3>Added</h3>\n<ul>\n<li>Support <code>RENAME</code> for wildcard <code>SELECTs</code> (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/784\">#784</a>) - Thanks <a href=\"https://github.com/Jefffrey\"><code>@\u200bJefffrey</code></a></li>\n<li>Add a mutable visitor (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/782\">#782</a>) - Thanks <a href=\"https://github.com/lovasoa\"><code>@\u200blovasoa</code></a></li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>Allow parsing of mysql empty row inserts (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/783\">#783</a>) - Thanks <a href=\"https://github.com/Jefffrey\"><code>@\u200bJefffrey</code></a></li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li>Fix logical conflict (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/785\">#785</a>) - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n</ul>\n<h2>[0.29.0] 2022-12-29</h2>\n<h3>Highlights</h3>\n<ul>\n<li>Partial source location tracking: see <a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/710\">#710</a></li>\n<li>Recursion limit to prevent stack overflows: <a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/764\">#764</a></li>\n<li>AST visitor: <a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/765\">#765</a></li>\n</ul>\n<h3>Added</h3>\n<p>feat: dollar-quoted strings support (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/772\">#772</a>) - Thanks <a href=\"https://github.com/vasilev-alex\"><code>@\u200bvasilev-alex</code></a></p>\n<ul>\n<li>Add derive based AST visitor (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/765\">#765</a>) - Thanks <a href=\"https://github.com/tustvold\"><code>@\u200btustvold</code></a></li>\n<li>Support <code>ALTER INDEX {INDEX_NAME} RENAME TO {NEW_INDEX_NAME}</code> (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/767\">#767</a>) - Thanks <a href=\"https://github.com/devgony\"><code>@\u200bdevgony</code></a></li>\n<li>Support <code>CREATE TABLE ON UPDATE &lt;expr&gt;</code> Function (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/685\">#685</a>) - Thanks <a href=\"https://github.com/CEOJINSUNG\"><code>@\u200bCEOJINSUNG</code></a></li>\n<li>Support <code>CREATE FUNCTION</code> definition with <code>$$</code> (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/755\">#755</a>)- Thanks <a href=\"https://github.com/zidaye\"><code>@\u200bzidaye</code></a></li>\n<li>Add location tracking in the tokenizer and parser (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/710\">#710</a>)  - Thanks <a href=\"https://github.com/ankrgyl\"><code>@\u200bankrgyl</code></a></li>\n<li>Add configurable recursion limit to parser, to protect against stackoverflows (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/764\">#764</a>)  - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>Support parsing scientific notation (such as <code>10e5</code>) (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/768\">#768</a>) - Thanks <a href=\"https://github.com/Jefffrey\"><code>@\u200bJefffrey</code></a></li>\n<li>Support <code>DROP FUNCTION</code> syntax (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/752\">#752</a>) - Thanks <a href=\"https://github.com/zidaye\"><code>@\u200bzidaye</code></a></li>\n<li>Support json operators <code>@&gt;</code> <code>&lt;@</code>, <code>@?</code> and <code>@@</code> - Thanks <a href=\"https://github.com/audunska\"><code>@\u200baudunska</code></a></li>\n<li>Support the type key (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/750\">#750</a>)- Thanks <a href=\"https://github.com/yuval-illumex\"><code>@\u200byuval-illumex</code></a></li>\n</ul>\n<h3>Changed</h3>\n<ul>\n<li>Improve docs and add examples for Visitor (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/778\">#778</a>) - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>Add a backlink from sqlparse_derive to sqlparser and publishing instructions (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/779\">#779</a>) - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>Document new features, update authors (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/776\">#776</a>) - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>Improve Readme (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/774\">#774</a>) - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>Standardize comments on parsing optional keywords (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/773\">#773</a>) - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>Enable grouping sets parsing for <code>GenericDialect</code> (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/771\">#771</a>) - Thanks <a href=\"https://github.com/Jefffrey\"><code>@\u200bJefffrey</code></a></li>\n<li>Generalize conflict target (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/762\">#762</a>) - Thanks <a href=\"https://github.com/audunska\"><code>@\u200baudunska</code></a></li>\n<li>Generalize locking clause (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/759\">#759</a>) - Thanks <a href=\"https://github.com/audunska\"><code>@\u200baudunska</code></a></li>\n<li>Add negative test for except clause on wildcards (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/746\">#746</a>)- Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>Add <code>NANOSECOND</code> keyword (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/749\">#749</a>)- Thanks <a href=\"https://github.com/waitingkuo\"><code>@\u200bwaitingkuo</code></a></li>\n</ul>\n<h3>Fixed</h3>\n<ul>\n<li>ParserError if nested explain (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/781\">#781</a>) - Thanks <a href=\"https://github.com/Jefffrey\"><code>@\u200bJefffrey</code></a></li>\n<li>Fix cargo docs / warnings and add CI check (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/777\">#777</a>) - Thanks <a href=\"https://github.com/alamb\"><code>@\u200balamb</code></a></li>\n<li>unnest join constraint with alias parsing for BigQuery dialect (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/732\">#732</a>)- Thanks <a href=\"https://github.com/Ziinc\"><code>@\u200bZiinc</code></a></li>\n</ul>\n<h2>[0.28.0] 2022-12-05</h2>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/sqlparser-rs/sqlparser-rs/commit/260a012f8c6894ae50b9f8957de45203b3c1eeab\"><code>260a012</code></a> (cargo-release) version 0.30.0</li>\n<li><a href=\"https://github.com/sqlparser-rs/sqlparser-rs/commit/d0ef564fa1a56a5d984b972ff935c56e7e51b66e\"><code>d0ef564</code></a> Changelog for 0.30.0 (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/786\">#786</a>)</li>\n<li><a href=\"https://github.com/sqlparser-rs/sqlparser-rs/commit/204bdc5b62d18f4f82b25432049d972f7bcc7acd\"><code>204bdc5</code></a> Fix logical conflict (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/785\">#785</a>)</li>\n<li><a href=\"https://github.com/sqlparser-rs/sqlparser-rs/commit/17f604f75708affac3652a6be001dfbba0a2bce7\"><code>17f604f</code></a> Support RENAME for wildcard SELECTs (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/784\">#784</a>)</li>\n<li><a href=\"https://github.com/sqlparser-rs/sqlparser-rs/commit/98403c07b192cdcfcdefb1886292d5b491ca7010\"><code>98403c0</code></a> Allow parsing of mysql empty row inserts (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/783\">#783</a>)</li>\n<li><a href=\"https://github.com/sqlparser-rs/sqlparser-rs/commit/524b8a7e7b5e98e1fef0f46ccc9e7f7b5cab6974\"><code>524b8a7</code></a> Add a mutable visitor (<a href=\"https://github-redirect.dependabot.com/sqlparser-rs/sqlparser-rs/issues/782\">#782</a>)</li>\n<li>See full diff in <a href=\"https://github.com/sqlparser-rs/sqlparser-rs/compare/v0.29.0...v0.30.0\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4799/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4799/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4797", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4797/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4797/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4797/events", "html_url": "https://github.com/apache/datafusion/pull/4797", "id": 1516993520, "node_id": "PR_kwDOFWSkxs5GhRlP", "number": 4797, "title": "rewrite the function `ensure_any_column_reference_is_unambiguous`", "user": {"login": "HaoYang670", "id": 59198230, "node_id": "MDQ6VXNlcjU5MTk4MjMw", "avatar_url": "https://avatars.githubusercontent.com/u/59198230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaoYang670", "html_url": "https://github.com/HaoYang670", "followers_url": "https://api.github.com/users/HaoYang670/followers", "following_url": "https://api.github.com/users/HaoYang670/following{/other_user}", "gists_url": "https://api.github.com/users/HaoYang670/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaoYang670/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaoYang670/subscriptions", "organizations_url": "https://api.github.com/users/HaoYang670/orgs", "repos_url": "https://api.github.com/users/HaoYang670/repos", "events_url": "https://api.github.com/users/HaoYang670/events{/privacy}", "received_events_url": "https://api.github.com/users/HaoYang670/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-03T06:50:06Z", "updated_at": "2023-01-06T01:49:06Z", "closed_at": "2023-01-05T19:56:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4797", "html_url": "https://github.com/apache/datafusion/pull/4797", "diff_url": "https://github.com/apache/datafusion/pull/4797.diff", "patch_url": "https://github.com/apache/datafusion/pull/4797.patch", "merged_at": "2023-01-05T19:56:55Z"}, "body": "Signed-off-by: remzi <13716567376yh@gmail.com>\r\n\r\n# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nNone.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nAs the columns referenced in `expr` are always fewer than the columns in `schemas`, we don't need to include all the columns in our hash map.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\nPass current tests.\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\nNo.\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4797/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4792", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4792/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4792/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4792/events", "html_url": "https://github.com/apache/datafusion/pull/4792", "id": 1516291963, "node_id": "PR_kwDOFWSkxs5Ge8zB", "number": 4792, "title": "remove Operator::{Like,NotLike,ILike,NotILike}", "user": {"login": "unconsolable", "id": 11059633, "node_id": "MDQ6VXNlcjExMDU5NjMz", "avatar_url": "https://avatars.githubusercontent.com/u/11059633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unconsolable", "html_url": "https://github.com/unconsolable", "followers_url": "https://api.github.com/users/unconsolable/followers", "following_url": "https://api.github.com/users/unconsolable/following{/other_user}", "gists_url": "https://api.github.com/users/unconsolable/gists{/gist_id}", "starred_url": "https://api.github.com/users/unconsolable/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unconsolable/subscriptions", "organizations_url": "https://api.github.com/users/unconsolable/orgs", "repos_url": "https://api.github.com/users/unconsolable/repos", "events_url": "https://api.github.com/users/unconsolable/events{/privacy}", "received_events_url": "https://api.github.com/users/unconsolable/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-02T11:22:16Z", "updated_at": "2023-01-06T02:05:16Z", "closed_at": "2023-01-05T19:46:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4792", "html_url": "https://github.com/apache/datafusion/pull/4792", "diff_url": "https://github.com/apache/datafusion/pull/4792.diff", "patch_url": "https://github.com/apache/datafusion/pull/4792.patch", "merged_at": "2023-01-05T19:46:21Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4765 .\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nSee issue.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n- Remove `Operator::{Like,NotLike,ILike,NotILike}`\r\n- For `datafusion_expr::expr::Expr::{like, not_like, ilike, not_ilike}`, return `Expr::{Like, ILike}` version.\r\n- In `TypeCoercionRewriter` use `like_coercion` directly, bypass `Operator::Like` etc.\r\n- Add a new `LikeExpr` in `datafusion_physical_expr::expressions`, bypass `Operator::Like` etc. Also convert `Expr::{like, not_like, ilike, not_ilike}` to this `LikeExpr`\r\n- Add new type in `PhysicalExprNode` proto, make corresponding change in `from_proto` & `to_proto`\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n- `TypeCoercionRewriter` and `LikeExpr` are tested correspondingly.\r\n- In `datafusion::physical_plan::planner::tests::errors()`, tests for `like/ilike/not like/not ilike` are removed, as for `Expr::Like` and `Expr::ILike`, `coerce_types` are not performed in `Expr::get_type` \r\n\r\nhttps://github.com/apache/arrow-datafusion/blob/54ae4323a730a4a34c6b5f638e2083f0c3fe5dcc/datafusion/expr/src/expr_schema.rs#L128-L130\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\n\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4792/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4792/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4789", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4789/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4789/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4789/events", "html_url": "https://github.com/apache/datafusion/pull/4789", "id": 1515878969, "node_id": "PR_kwDOFWSkxs5Gdiil", "number": 4789, "title": "Uncomment nanoseconds tests after sql parser upgrade", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-01T22:42:59Z", "updated_at": "2023-01-02T11:52:31Z", "closed_at": "2023-01-02T08:26:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4789", "html_url": "https://github.com/apache/datafusion/pull/4789", "diff_url": "https://github.com/apache/datafusion/pull/4789.diff", "patch_url": "https://github.com/apache/datafusion/pull/4789.patch", "merged_at": "2023-01-02T08:26:29Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4528.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nNanoseconds tests were disabled because of sqlparser didn't support nanoseconds. Current 29 sql parser allows tests to run\r\n\r\n# What changes are included in this PR?\r\nTests for nanosecond for date_part/extract\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4789/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4788", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4788/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4788/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4788/events", "html_url": "https://github.com/apache/datafusion/pull/4788", "id": 1515727172, "node_id": "PR_kwDOFWSkxs5GdAcd", "number": 4788, "title": "fix: ListingSchemaProvider directory paths (related: #4204)", "user": {"login": "cfraz89", "id": 4686150, "node_id": "MDQ6VXNlcjQ2ODYxNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/4686150?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfraz89", "html_url": "https://github.com/cfraz89", "followers_url": "https://api.github.com/users/cfraz89/followers", "following_url": "https://api.github.com/users/cfraz89/following{/other_user}", "gists_url": "https://api.github.com/users/cfraz89/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfraz89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfraz89/subscriptions", "organizations_url": "https://api.github.com/users/cfraz89/orgs", "repos_url": "https://api.github.com/users/cfraz89/repos", "events_url": "https://api.github.com/users/cfraz89/events{/privacy}", "received_events_url": "https://api.github.com/users/cfraz89/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-01T17:47:50Z", "updated_at": "2023-01-04T19:53:50Z", "closed_at": "2023-01-03T20:35:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4788", "html_url": "https://github.com/apache/datafusion/pull/4788", "diff_url": "https://github.com/apache/datafusion/pull/4788.diff", "patch_url": "https://github.com/apache/datafusion/pull/4788.patch", "merged_at": "2023-01-03T20:35:38Z"}, "body": "- Append trailing slash to table paths  if they are directories\r\n\r\n# Which issue does this PR close?\r\nIs similar to #4204 - inability to use an object store listing for a table schema.\r\n\r\nHowever this PR addresses tables generated from `ListingSchemaProvider`.\r\n\r\n# Rationale for this change\r\nI would like to set up an object store (s3) where each directory maps to a single table/schema, with the contents being made up of all files (parquet) inside the directory. By registering the schema provider like:\r\n\r\n```rust\r\nArc::new(ListingSchemaProvider::new(\r\n        String::from(format!(\"s3://{bucket_name}\")),\r\n        \"\".into(),\r\n        Arc::new(ListingTableFactory::default()),\r\n        s3.clone(),\r\n        String::from(\"PARQUET\"),\r\n        false,\r\n    ));\r\n```\r\n\r\nThen if there is a folder in the bucket, such as `userdata`, attempting to query against `userdata` table causes the s3 client to 404, as the provider creates ListingTables with paths set to the raw directory names, eg `userdata`, and in `datafusion/core/src/datasource/listing/url.rs:149`, we have:\r\n\r\n```rust\r\n        // If the prefix is a file, use a head request, otherwise list\r\n        let is_dir = self.url.as_str().ends_with('/');\r\n```\r\n\r\nSince the paths don't end with `/`, it treats the directories as files and attempts to perform `head` on them instead of listing them.\r\n\r\nThis PR remedies this scenario, allowing the query to succeed.\r\n\r\n# What changes are included in this PR?\r\nListingSchemaProvider is altered to track whether the table paths it has listed are directories or files. If they are directories, it creates the ListingTables with a '/' appended to the stringified table path, allowing the ListingTable to successfully list its contents.\r\n\r\n# Are these changes tested?\r\nSome light unit tests added.\r\n\r\n# Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4788/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4787", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4787/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4787/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4787/events", "html_url": "https://github.com/apache/datafusion/pull/4787", "id": 1515574147, "node_id": "PR_kwDOFWSkxs5Gcdxa", "number": 4787, "title": "Minimize stack space required to plan deeply nested binary expressions", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-01T13:40:48Z", "updated_at": "2023-08-08T20:14:47Z", "closed_at": "2023-01-02T15:05:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4787", "html_url": "https://github.com/apache/datafusion/pull/4787", "diff_url": "https://github.com/apache/datafusion/pull/4787.diff", "patch_url": "https://github.com/apache/datafusion/pull/4787.patch", "merged_at": "2023-01-02T15:05:21Z"}, "body": "# Which issue does this PR close?\r\nRe https://github.com/apache/arrow-datafusion/issues/4065 from @andygrove \r\n\r\n# Rationale for this change\r\nThis is a follow on to https://github.com/apache/arrow-datafusion/pull/4779 which reduced the stack space needed to plan in debug builds. This PR minimizes the stack required as much as I know how. \r\n\r\n# What changes are included in this PR?\r\n\r\nSpecial case BinaryOp (see comments for explination)\r\n\r\n# Are these changes tested?\r\nYes (existing + new tests)\r\n\r\n# Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4787/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4787/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4785", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4785/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4785/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4785/events", "html_url": "https://github.com/apache/datafusion/pull/4785", "id": 1515555184, "node_id": "PR_kwDOFWSkxs5GcZbd", "number": 4785, "title": "Minor: Refactor some sql planning code into functions", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-01T13:11:18Z", "updated_at": "2023-08-08T20:14:47Z", "closed_at": "2023-01-02T15:09:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4785", "html_url": "https://github.com/apache/datafusion/pull/4785", "diff_url": "https://github.com/apache/datafusion/pull/4785.diff", "patch_url": "https://github.com/apache/datafusion/pull/4785.patch", "merged_at": "2023-01-02T15:09:09Z"}, "body": "~Draft as it builds on https://github.com/apache/arrow-datafusion/pull/4779~\r\n\r\n# Which issue does this PR close?\r\n\r\nre https://github.com/apache/arrow-datafusion/issues/4065\r\n\r\n# Rationale for this change\r\n\r\nI am trying to make the code in `sql_expr_to_logical_expr` as uniform as possible to avoid reintroducing issues like https://github.com/apache/arrow-datafusion/issues/4065\r\n\r\n# What changes are included in this PR?\r\n\r\nExtract a few more functions\r\n\r\n# Are these changes tested?\r\n\r\nExisting tests \r\n# Are there any user-facing changes?\r\n\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4785/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4785/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4784", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4784/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4784/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4784/events", "html_url": "https://github.com/apache/datafusion/pull/4784", "id": 1515161447, "node_id": "PR_kwDOFWSkxs5GbC94", "number": 4784, "title": " Make datafusion-physical-expr compatible with blake3/traits-preview feature.", "user": {"login": "BoredPerson", "id": 39005292, "node_id": "MDQ6VXNlcjM5MDA1Mjky", "avatar_url": "https://avatars.githubusercontent.com/u/39005292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoredPerson", "html_url": "https://github.com/BoredPerson", "followers_url": "https://api.github.com/users/BoredPerson/followers", "following_url": "https://api.github.com/users/BoredPerson/following{/other_user}", "gists_url": "https://api.github.com/users/BoredPerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoredPerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoredPerson/subscriptions", "organizations_url": "https://api.github.com/users/BoredPerson/orgs", "repos_url": "https://api.github.com/users/BoredPerson/repos", "events_url": "https://api.github.com/users/BoredPerson/events{/privacy}", "received_events_url": "https://api.github.com/users/BoredPerson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-31T17:00:24Z", "updated_at": "2023-01-02T15:12:59Z", "closed_at": "2023-01-02T15:05:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4784", "html_url": "https://github.com/apache/datafusion/pull/4784", "diff_url": "https://github.com/apache/datafusion/pull/4784.diff", "patch_url": "https://github.com/apache/datafusion/pull/4784.patch", "merged_at": "2023-01-02T15:05:56Z"}, "body": "# Which issue does this PR close?\r\n\r\nCloses #4781.\r\n\r\n# What changes are included in this PR?\r\n\r\nMakes `datafusion-physical-expr` compatible with `blake3/traits-preview` feature.\r\n\r\n# Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4784/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4784/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4783", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4783/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4783/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4783/events", "html_url": "https://github.com/apache/datafusion/pull/4783", "id": 1515160727, "node_id": "PR_kwDOFWSkxs5GbC1B", "number": 4783, "title": "refactor: split expression pf planner into one part.", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-12-31T16:57:00Z", "updated_at": "2023-01-03T13:21:39Z", "closed_at": "2023-01-03T06:53:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4783", "html_url": "https://github.com/apache/datafusion/pull/4783", "diff_url": "https://github.com/apache/datafusion/pull/4783.diff", "patch_url": "https://github.com/apache/datafusion/pull/4783.patch", "merged_at": "2023-01-03T06:53:27Z"}, "body": "# Which issue does this PR close?\r\n\r\nPart of #4392.\r\n\r\nI'm try into add `Binder` in planner, split the planner is a good begin for it. So I do it previously.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4783/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4779", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4779/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4779/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4779/events", "html_url": "https://github.com/apache/datafusion/pull/4779", "id": 1515134033, "node_id": "PR_kwDOFWSkxs5Ga9oT", "number": 4779, "title": "Fix Stack overflow in sql planning in debug builds", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-31T14:45:36Z", "updated_at": "2023-08-08T20:14:46Z", "closed_at": "2023-01-01T13:35:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4779", "html_url": "https://github.com/apache/datafusion/pull/4779", "diff_url": "https://github.com/apache/datafusion/pull/4779.diff", "patch_url": "https://github.com/apache/datafusion/pull/4779.patch", "merged_at": "2023-01-01T13:35:40Z"}, "body": "# Which issue does this PR close?\r\nCloses https://github.com/apache/arrow-datafusion/issues/4065 from @andygrove \r\nCloses https://github.com/apache/arrow-datafusion/issues/4728 from @Jefffrey \r\n\r\nAlso reported by @maxburke  in slack\r\n\r\n# Rationale for this change\r\nDebug builds are overflowing the stack causing pain and suffering for users. \r\n\r\n# What changes are included in this PR?\r\n\r\n1. Extract several parts of the body of `SqlToRel::sql_expr_to_logical_expr` into separate functions\r\n\r\nThe reason this reduces stack size in debug builds is explained in the \"Technical Backstory\" heading of https://github.com/apache/arrow-datafusion/pull/1047\r\n\r\n# Are these changes tested?\r\nCovered by existing coverage\r\n\r\n# Are there any user-facing changes?\r\nNone intended (other than avoiding stack overflows)", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4779/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4778", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4778/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4778/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4778/events", "html_url": "https://github.com/apache/datafusion/pull/4778", "id": 1514667713, "node_id": "PR_kwDOFWSkxs5GZZi6", "number": 4778, "title": "Add DataFrame::into_view instead of implementing TableProvider (#2659)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-30T17:28:08Z", "updated_at": "2023-01-09T16:32:41Z", "closed_at": "2023-01-09T16:27:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4778", "html_url": "https://github.com/apache/datafusion/pull/4778", "diff_url": "https://github.com/apache/datafusion/pull/4778.diff", "patch_url": "https://github.com/apache/datafusion/pull/4778.patch", "merged_at": "2023-01-09T16:27:41Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #2659\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThe previous version introduced a ref-cycle as the `DataFrame` owns a copy of the `CatalogList` that in turn owns the registered `DataFrame`\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4778/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4777", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4777/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4777/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4777/events", "html_url": "https://github.com/apache/datafusion/pull/4777", "id": 1514602055, "node_id": "PR_kwDOFWSkxs5GZLXt", "number": 4777, "title": "Pipeline-friendly Bounded Memory Window Executor", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-12-30T15:42:07Z", "updated_at": "2023-01-10T11:32:02Z", "closed_at": "2023-01-04T20:30:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4777", "html_url": "https://github.com/apache/datafusion/pull/4777", "diff_url": "https://github.com/apache/datafusion/pull/4777.diff", "patch_url": "https://github.com/apache/datafusion/pull/4777.patch", "merged_at": "2023-01-04T20:30:01Z"}, "body": "# Which issue does this PR close?\r\n\r\nImproves the situation on https://github.com/apache/arrow-datafusion/issues/4285. \r\n\r\n# Rationale for this change\r\n\r\nNOTE: Below discussion is a simplification of a more detailed exposition in [the streaming execution proposal](https://synnada.notion.site/Streaming-Window-Design-581082c1fd60442ca7caaff4d6a63cd7).\r\n\r\nUnlike how the current implementation works, queries involving window expressions can actually be executed without materializing the entire table in memory when certain conditions are met. These conditions for a bounded implementation are as follows:\r\n\r\n- In order to run `WindowExec` with bounded memory (without seeing the whole table), window frame boundaries of the given window expression should be bounded; i.e. we cannot run queries involving either `UNBOUNDED PRECEDING` or `UNBOUNDED FOLLOWING`.\r\n- We should be able to produce query results as we scan the table incrementally. For this to be possible, columns used in the `ORDER BY` clauses should already be aligned with the `ORDER BY` specification. With this condition is met, we can remove the `PhysicalSort` expression before `WindowExec` and generate results as we scan the table.\r\n\r\nIf the above conditions are met, we can run a query like the one below\r\n\r\n```rust\r\nSELECT\r\n    SUM(inc_col) OVER(ORDER BY inc_col ASC RANGE BETWEEN 1 PRECEDING AND 10 FOLLOWING)\r\nFROM annotated_data\r\n```\r\n\r\n with a bounded memory algorithm. Consider the physical plan of the above query:\r\n\r\n```rust\r\n+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n| plan_type     | plan                                                                                                                                                                                        |\r\n+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+                                                                                                                                       |\r\n| physical_plan | ProjectionExec: expr=[SUM(annotated_data.inc_col) ORDER BY [annotated_data.inc_col ASC NULLS LAST] RANGE BETWEEN 1 PRECEDING AND 10 FOLLOWING@0 as SUM(annotated_data.inc_col)]             |\r\n|               |   WindowAggExec: wdw=[SUM(annotated_data.inc_col): Ok(Field { name: \"SUM(annotated_data.inc_col)\", data_type: Int64, nullable: true, dict_id: 0, dict_is_ordered: false, metadata: None })] |\r\n|               |     SortExec: [inc_col@0 ASC NULLS LAST]                                                                                                                                                    |\r\n|               |       MemoryExec: partitions=1, partition_sizes=[51]                                                                                                                                        |\r\n|               |                                                                                                                                                                                             |\r\n+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n```\r\n\r\nIf we know that the column `inc_col` in the table is monotonically increasing, we can deduce that the `SortExec: [inc_col@0 ASC NULLS LAST`] step in the physical plan is unnecessary. Hence, we can remove this step from the physical plan (see #4691). Furthermore, we also know that the frame `RANGE BETWEEN 1 PRECEDING AND 10 FOLLOWING` describes a bounded range. Therefore, we can turn the above physical plan into the one below:\r\n\r\n```rust\r\n+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n| plan_type     | plan                                                                                                                                                                                              |\r\n+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+                                                                                                                                             |\r\n| physical_plan | ProjectionExec: expr=[SUM(annotated_data.inc_col) ORDER BY [annotated_data.inc_col ASC NULLS LAST] RANGE BETWEEN 1 PRECEDING AND 10 FOLLOWING@0 as SUM(annotated_data.inc_col)]                   |\r\n|               |   BoundedWindowAggExec: wdw=[SUM(annotated_data.inc_col): Ok(Field { name: \"SUM(annotated_data.inc_col)\", data_type: Int64, nullable: true, dict_id: 0, dict_is_ordered: false, metadata: None })] |\r\n|               |     MemoryExec: partitions=1, partition_sizes=[51]                                                                                                                                                |\r\n|               |                                                                                                                                                                                                   |\r\n+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n```\r\n\r\n## Performance Indicators\r\n\r\nWe analyzed the new *Bounded Memory Window Executor* and compared it with the existing implementation via\r\n\r\n- Benchmarking (criterion) for CPU-time analysis, and\r\n- Memory profiling the binary executable (Heaptrack).\r\n\r\nTest conditions for both executors is as follows:\r\n\r\n- No partition\r\n- Single query (`SUM (x) OVER (RANGE ORDER BY a RANGE BETWEEN 10 PRECEDING AND 10 FOLLOWING`))\r\n- No sorting is included since the input data is already sorted.\r\n- The input is generated as a `RecordBatch` stream. They have varying sizes in the range of 0 to 50.\r\n\r\nNOTE: We did not include the benchmarking code in this PR.\r\n\r\n### Benchmarking\r\n\r\nWe measure the execution duration of each operator. The input size is `100_000`.\r\n\r\n- Average execution time for `WindowAggExec`: **226.72 ms**\r\n- Average execution time for `BoundedWindowAggExec`: **154.71 ms**\r\n\r\nwhich shows that overall performance improves. This is due to searching `RANGE` boundaries in a smaller batch since we maintain a bounded state.\r\n\r\n### Heaptrack\r\n\r\nWe used a simple test case for memory consumption; the input size is `1_000_000`.\r\n\r\n**WindowAggExec Memory Profiling**\r\n\r\n- peak heap memory consumption: **161,9MB** after 1min23s\r\n- peak RSS (including headtrack overhead): **202,7MB**\r\n\r\n![Memory usage of `WindowAggExec`](https://user-images.githubusercontent.com/106137913/209624485-9bdc0fb9-134b-41e0-b241-0026c6b72803.png)\r\n\r\n**BoundedWindowAggExec Profiling**\r\n\r\n- peak heap memory consumption: **78,6MB** after 08.633s\r\n- peak RSS (including heaptrack overhead):**115,4MB**\r\n\r\nThe finding supports that the sliding window approach is memory efficient.\r\n\r\n![Memory usage of `BoundedWindowAggExec`](https://user-images.githubusercontent.com/106137913/209624446-ded5262d-683f-482e-988c-7bed9d170c20.png)\r\n\r\n# What changes are included in this PR?\r\n\r\nThis PR includes a bounded memory variant of the already-existing `WindowAggExec`. We add a rule to choose between   `WindowAggExec` and  `BoundedWindowAggExec`. The strategy is as follows: if `window_expr` can generate its result without seeing whole table we choose `BoundedWindowAggExec` otherwise we choose `WindowAggExec`. Please note that it is possible (but not certainly trivial) to unify these executors. However, we left this as future work.\r\n\r\nIn this implementation, we also added bounded execution support for `COUNT`, `SUM`, `MIN`, `MAX`  among `AggregateFunction`s. Among `BuiltInWindowFunction`s, we added support for `ROW_NUMBER`, `RANK`, `DENSE_RANK`, `LAG`, `LEAD`, `FIRST_VALUE`, `LAST_VALUE`, `NTH_VALUE`. If the window function used is different than these, we fall back to `WindowAggExec`. \r\n\r\n# Are these changes tested?\r\n\r\nWe have added fuzzy tests comparing the results of `WindowAggExec` and `BoundedWindowAggExec`. We also added sql tests that runs on already sorted parquet file. Approximately 700 lines of the changes come from test and test utils.\r\n\r\n# Are there any user-facing changes?\r\n\r\nNone.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4777/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4775", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4775/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4775/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4775/events", "html_url": "https://github.com/apache/datafusion/pull/4775", "id": 1514568996, "node_id": "PR_kwDOFWSkxs5GZEZi", "number": 4775, "title": "Implement OptimizerConfig for SessionState", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-30T14:43:17Z", "updated_at": "2023-01-03T13:31:45Z", "closed_at": "2023-01-03T13:30:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4775", "html_url": "https://github.com/apache/datafusion/pull/4775", "diff_url": "https://github.com/apache/datafusion/pull/4775.diff", "patch_url": "https://github.com/apache/datafusion/pull/4775.patch", "merged_at": "2023-01-03T13:30:08Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4775/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4774", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4774/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4774/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4774/events", "html_url": "https://github.com/apache/datafusion/pull/4774", "id": 1514349804, "node_id": "PR_kwDOFWSkxs5GYVb6", "number": 4774, "title": "refactor: extract `parse_value`", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-30T08:46:11Z", "updated_at": "2022-12-31T13:11:19Z", "closed_at": "2022-12-31T12:37:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4774", "html_url": "https://github.com/apache/datafusion/pull/4774", "diff_url": "https://github.com/apache/datafusion/pull/4774.diff", "patch_url": "https://github.com/apache/datafusion/pull/4774.patch", "merged_at": "2022-12-31T12:37:20Z"}, "body": "# Which issue does this PR close?\r\n\r\nN/A\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4774/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4771", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4771/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4771/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4771/events", "html_url": "https://github.com/apache/datafusion/pull/4771", "id": 1513843820, "node_id": "PR_kwDOFWSkxs5GWqoY", "number": 4771, "title": "Structify ConfigOptions (#4517)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-29T15:37:57Z", "updated_at": "2023-01-03T08:41:45Z", "closed_at": "2023-01-03T08:39:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4771", "html_url": "https://github.com/apache/datafusion/pull/4771", "diff_url": "https://github.com/apache/datafusion/pull/4771.diff", "patch_url": "https://github.com/apache/datafusion/pull/4771.patch", "merged_at": "2023-01-03T08:39:14Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4517\r\nCloses #3500\r\nCloses #4752\r\nRelates to #3887\r\n\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThe current approach is:\r\n\r\n* Not type-safe\r\n* Not documented by rustdoc\r\n* Not understood by code completion\r\n* Expensive to clone\r\n* Defaulting logic is not centralised\r\n* Inconsistently serializes to TaskContext\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nThis reworks ConfigOptions to instead be a struct, using a declarative macro to auto-generate serialization logic\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\nYes\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4771/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4771/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4770", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4770/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4770/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4770/events", "html_url": "https://github.com/apache/datafusion/pull/4770", "id": 1513781439, "node_id": "PR_kwDOFWSkxs5GWdYT", "number": 4770, "title": "Update sqlparser to `29.0.0`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-12-29T14:19:52Z", "updated_at": "2023-01-01T12:42:22Z", "closed_at": "2023-01-01T12:31:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4770", "html_url": "https://github.com/apache/datafusion/pull/4770", "diff_url": "https://github.com/apache/datafusion/pull/4770.diff", "patch_url": "https://github.com/apache/datafusion/pull/4770.patch", "merged_at": "2023-01-01T12:31:36Z"}, "body": "# Which issue does this PR close?\r\n\r\nCloses https://github.com/apache/arrow-datafusion/issues/2469\r\n\r\n# Rationale for this change\r\n\r\nKeep up with dependencies\r\n\r\n# What changes are included in this PR?\r\n\r\n1. Update to sqlparser 29.0.0\r\n2. Update code for changes in APIs\r\n\r\n# Are these changes tested?\r\n\r\ncovered by existing tests \r\n# Are there any user-facing changes?\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4770/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4768", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4768/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4768/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4768/events", "html_url": "https://github.com/apache/datafusion/pull/4768", "id": 1513707127, "node_id": "PR_kwDOFWSkxs5GWNjD", "number": 4768, "title": "Add a new open source project that is use DataFusion as query engine", "user": {"login": "francis-du", "id": 25944814, "node_id": "MDQ6VXNlcjI1OTQ0ODE0", "avatar_url": "https://avatars.githubusercontent.com/u/25944814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/francis-du", "html_url": "https://github.com/francis-du", "followers_url": "https://api.github.com/users/francis-du/followers", "following_url": "https://api.github.com/users/francis-du/following{/other_user}", "gists_url": "https://api.github.com/users/francis-du/gists{/gist_id}", "starred_url": "https://api.github.com/users/francis-du/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/francis-du/subscriptions", "organizations_url": "https://api.github.com/users/francis-du/orgs", "repos_url": "https://api.github.com/users/francis-du/repos", "events_url": "https://api.github.com/users/francis-du/events{/privacy}", "received_events_url": "https://api.github.com/users/francis-du/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018882, "node_id": "MDU6TGFiZWwyOTIzMDE4ODgy", "url": "https://api.github.com/repos/apache/datafusion/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-29T12:52:10Z", "updated_at": "2022-12-29T14:02:01Z", "closed_at": "2022-12-29T13:54:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4768", "html_url": "https://github.com/apache/datafusion/pull/4768", "diff_url": "https://github.com/apache/datafusion/pull/4768.diff", "patch_url": "https://github.com/apache/datafusion/pull/4768.patch", "merged_at": "2022-12-29T13:54:47Z"}, "body": "[Greptime DB](https://github.com/GreptimeTeam/greptimedb) is an open source & cloud native distributed time-series database. GreptimeDB's query engine is powered by Apache Arrow DataFusion.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4768/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4768/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4767", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4767/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4767/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4767/events", "html_url": "https://github.com/apache/datafusion/pull/4767", "id": 1513604277, "node_id": "PR_kwDOFWSkxs5GV3Et", "number": 4767, "title": "Move subquery alias assignment onto rules", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-12-29T10:33:39Z", "updated_at": "2023-02-22T12:36:19Z", "closed_at": "2022-12-30T14:24:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4767", "html_url": "https://github.com/apache/datafusion/pull/4767", "diff_url": "https://github.com/apache/datafusion/pull/4767.diff", "patch_url": "https://github.com/apache/datafusion/pull/4767.patch", "merged_at": "2022-12-30T14:24:30Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #3437\r\nCloses #3791\r\n\r\n(although these were actually fixed by https://github.com/apache/arrow-datafusion/pull/4038)\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nHaving mutable state associated with `OptimizerConfig` complicates implementing it for `SessionState`. I originally hoped to implement `OptimizerConfig` for `DataFrame`, but this would have required churning all the planning machinery and so I decided against this.  \r\n\r\nThere is one implication potentially worth highlighting with this change, as the state is now associated with the `OptimizerRule` and not an `OptimizerContext` created for the call to `SessionState::optimize`, state will now bleed across calls whereas it previously wouldn't. In some ways this is better, as previously calling `optimize` twice could theoretically result in an alias collision, but I thought it worth highlighting.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nMove alias state from `OptimizerConfig` onto the individual rules\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\nYes, queries will get potentially different aliases assigned to them by the optimizer.\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4767/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4764", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4764/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4764/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4764/events", "html_url": "https://github.com/apache/datafusion/pull/4764", "id": 1513142118, "node_id": "PR_kwDOFWSkxs5GUTxK", "number": 4764, "title": "Make SessionState members private", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-28T20:22:37Z", "updated_at": "2022-12-29T08:11:39Z", "closed_at": "2022-12-29T08:09:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4764", "html_url": "https://github.com/apache/datafusion/pull/4764", "diff_url": "https://github.com/apache/datafusion/pull/4764.diff", "patch_url": "https://github.com/apache/datafusion/pull/4764.patch", "merged_at": "2022-12-29T08:09:48Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nExposing members publicly is a very strong and broad API commitment, which makes it very difficult to make non-breaking changes, as it is very hard to reason about how the type is being used.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nMakes the members of `SessionState` private\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4764/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4760", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4760/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4760/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4760/events", "html_url": "https://github.com/apache/datafusion/pull/4760", "id": 1512584719, "node_id": "PR_kwDOFWSkxs5GSacc", "number": 4760, "title": "Refactor extract_join_keys and move the ExtractEquijoinPredicate rule", "user": {"login": "ygf11", "id": 3428089, "node_id": "MDQ6VXNlcjM0MjgwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3428089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygf11", "html_url": "https://github.com/ygf11", "followers_url": "https://api.github.com/users/ygf11/followers", "following_url": "https://api.github.com/users/ygf11/following{/other_user}", "gists_url": "https://api.github.com/users/ygf11/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygf11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygf11/subscriptions", "organizations_url": "https://api.github.com/users/ygf11/orgs", "repos_url": "https://api.github.com/users/ygf11/repos", "events_url": "https://api.github.com/users/ygf11/events{/privacy}", "received_events_url": "https://api.github.com/users/ygf11/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-28T09:16:31Z", "updated_at": "2023-01-02T01:36:47Z", "closed_at": "2023-01-01T13:45:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4760", "html_url": "https://github.com/apache/datafusion/pull/4760", "diff_url": "https://github.com/apache/datafusion/pull/4760.diff", "patch_url": "https://github.com/apache/datafusion/pull/4760.patch", "merged_at": "2023-01-01T13:45:51Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4759.\r\n\r\n# Rationale for this change\r\nThe other rule may depend on `ExtractEquijoinPredicate`.\r\n\r\n# What changes are included in this PR?\r\n\r\n1. Refactor extract_join_keys with `split_conjunction`.\r\n2. Move the `ExtractEquijoinPredicate` rule behind `SubqueryFilterToJoin`.\r\n\r\n# Are these changes tested?\r\nYes.\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4760/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4757", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4757/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4757/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4757/events", "html_url": "https://github.com/apache/datafusion/pull/4757", "id": 1512567570, "node_id": "PR_kwDOFWSkxs5GSWu1", "number": 4757, "title": "Remove the config datafusion.execution.coalesce_target_batch_size and use datafusion.execution.batch_size instead", "user": {"login": "yahoNanJing", "id": 90197956, "node_id": "MDQ6VXNlcjkwMTk3OTU2", "avatar_url": "https://avatars.githubusercontent.com/u/90197956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yahoNanJing", "html_url": "https://github.com/yahoNanJing", "followers_url": "https://api.github.com/users/yahoNanJing/followers", "following_url": "https://api.github.com/users/yahoNanJing/following{/other_user}", "gists_url": "https://api.github.com/users/yahoNanJing/gists{/gist_id}", "starred_url": "https://api.github.com/users/yahoNanJing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yahoNanJing/subscriptions", "organizations_url": "https://api.github.com/users/yahoNanJing/orgs", "repos_url": "https://api.github.com/users/yahoNanJing/repos", "events_url": "https://api.github.com/users/yahoNanJing/events{/privacy}", "received_events_url": "https://api.github.com/users/yahoNanJing/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-28T08:56:25Z", "updated_at": "2022-12-30T04:42:30Z", "closed_at": "2022-12-30T04:40:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4757", "html_url": "https://github.com/apache/datafusion/pull/4757", "diff_url": "https://github.com/apache/datafusion/pull/4757.diff", "patch_url": "https://github.com/apache/datafusion/pull/4757.patch", "merged_at": "2022-12-30T04:40:00Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4756.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nAs #4756 mentioned, there's already a config of `datafusion.execution.batch_size` to indicate the row number of a batch for processing. I don't think it's necessary to make a different batch size for the CoalesceBatches rule.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4757/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4757/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4755", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4755/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4755/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4755/events", "html_url": "https://github.com/apache/datafusion/pull/4755", "id": 1512510112, "node_id": "PR_kwDOFWSkxs5GSKfU", "number": 4755, "title": "Add alias check for equijoin in from_plan", "user": {"login": "ygf11", "id": 3428089, "node_id": "MDQ6VXNlcjM0MjgwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3428089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygf11", "html_url": "https://github.com/ygf11", "followers_url": "https://api.github.com/users/ygf11/followers", "following_url": "https://api.github.com/users/ygf11/following{/other_user}", "gists_url": "https://api.github.com/users/ygf11/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygf11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygf11/subscriptions", "organizations_url": "https://api.github.com/users/ygf11/orgs", "repos_url": "https://api.github.com/users/ygf11/repos", "events_url": "https://api.github.com/users/ygf11/events{/privacy}", "received_events_url": "https://api.github.com/users/ygf11/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-28T07:44:54Z", "updated_at": "2022-12-30T01:58:00Z", "closed_at": "2022-12-29T12:47:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4755", "html_url": "https://github.com/apache/datafusion/pull/4755", "diff_url": "https://github.com/apache/datafusion/pull/4755.diff", "patch_url": "https://github.com/apache/datafusion/pull/4755.patch", "merged_at": "2022-12-29T12:47:35Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4754.\r\n\r\n# Rationale for this change\r\nThe `SimplifyExpressions` will give an alias to the result if the new name and old name is not same. For the rebuild of equijoin in from_plan, we assume the simplified result of a binary equality expression is still a binary equality expression, this is not correct and may result in the failure of `SimplifyExpressions` rule.\r\n\r\n# What changes are included in this PR?\r\nAdd alias check for equijoin in from_plan.\r\n\r\n# Are these changes tested?\r\nYes.\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4755/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4755/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4753", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4753/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4753/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4753/events", "html_url": "https://github.com/apache/datafusion/pull/4753", "id": 1512434370, "node_id": "PR_kwDOFWSkxs5GR6Qb", "number": 4753, "title": "Take the top level `schema` into account when creating `UnionExec`", "user": {"login": "HaoYang670", "id": 59198230, "node_id": "MDQ6VXNlcjU5MTk4MjMw", "avatar_url": "https://avatars.githubusercontent.com/u/59198230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaoYang670", "html_url": "https://github.com/HaoYang670", "followers_url": "https://api.github.com/users/HaoYang670/followers", "following_url": "https://api.github.com/users/HaoYang670/following{/other_user}", "gists_url": "https://api.github.com/users/HaoYang670/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaoYang670/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaoYang670/subscriptions", "organizations_url": "https://api.github.com/users/HaoYang670/orgs", "repos_url": "https://api.github.com/users/HaoYang670/repos", "events_url": "https://api.github.com/users/HaoYang670/events{/privacy}", "received_events_url": "https://api.github.com/users/HaoYang670/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-28T06:02:21Z", "updated_at": "2022-12-31T00:00:13Z", "closed_at": "2022-12-30T17:53:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4753", "html_url": "https://github.com/apache/datafusion/pull/4753", "diff_url": "https://github.com/apache/datafusion/pull/4753.diff", "patch_url": "https://github.com/apache/datafusion/pull/4753.patch", "merged_at": "2022-12-30T17:53:21Z"}, "body": "Signed-off-by: remzi <13716567376yh@gmail.com>\r\n\r\n# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4677.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nWhen creating `UnionExec` from `LogicalPlan::Union`, the schema of the top plan is ignored. This could cause errors when the top level schema doesn't match the child schema. (see the example in #4677)\r\n\r\n## Before\r\n```sql\r\n\u276f create table t as select 1 as a;\r\n0 rows in set. Query took 0.014 seconds.\r\n\u276f select count(*) from (select a from t union all select a from t);\r\nInternal(\"create_physical_expr expected same number of fields, got got Arrow schema with 1  and DataFusion schema with 0\")\r\n```\r\n\r\n## After\r\n```sql\r\n\u276f create table t as select 1 as a;\r\n0 rows in set. Query took 0.014 seconds.\r\n\u276f select count(*) from (select a from t union all select a from t);\r\n+-----------------+\r\n| COUNT(UInt8(1)) |\r\n+-----------------+\r\n| 2               |\r\n+-----------------+\r\n1 row in set. Query took 0.010 seconds.\r\n```\r\n\r\n# What changes are included in this PR?\r\n1.  a new function `try_new_with_schema` for creating `UnionExec`\r\n2. When building physical plans, if the top level schema is a subset of the child schema, then use `try_new_schema`, else use `new`\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\nYes.\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\nNo.\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4753/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4751", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4751/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4751/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4751/events", "html_url": "https://github.com/apache/datafusion/pull/4751", "id": 1512081743, "node_id": "PR_kwDOFWSkxs5GQwGh", "number": 4751, "title": "Deprecate SessionContext physical plan methods (#4617)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-27T19:03:22Z", "updated_at": "2022-12-28T22:12:18Z", "closed_at": "2022-12-28T22:01:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4751", "html_url": "https://github.com/apache/datafusion/pull/4751", "diff_url": "https://github.com/apache/datafusion/pull/4751.diff", "patch_url": "https://github.com/apache/datafusion/pull/4751.patch", "merged_at": "2022-12-28T22:01:32Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #4617\r\n\r\nFollow on to #4679 \r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThese methods are very easy to accidentally misuse, and end up planning or optimizing against a different state than used for previous phases. Deprecating them will hopefully encourage correct usage of these APIs\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4751/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4751/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4750", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4750/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4750/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4750/events", "html_url": "https://github.com/apache/datafusion/pull/4750", "id": 1512060706, "node_id": "PR_kwDOFWSkxs5GQril", "number": 4750, "title": "Set query_execution_start_time on snapshot from SessionContext (#4747)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-27T18:32:32Z", "updated_at": "2022-12-27T21:51:53Z", "closed_at": "2022-12-27T21:45:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4750", "html_url": "https://github.com/apache/datafusion/pull/4750", "diff_url": "https://github.com/apache/datafusion/pull/4750.diff", "patch_url": "https://github.com/apache/datafusion/pull/4750.patch", "merged_at": "2022-12-27T21:45:42Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4747\r\nCloses #4626 \r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis works around #4747 by ensuring that the execution time is already set by the time a user has obtained a `SessionState`.\r\n\r\n\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4750/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4749", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4749/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4749/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4749/events", "html_url": "https://github.com/apache/datafusion/pull/4749", "id": 1512021869, "node_id": "PR_kwDOFWSkxs5GQjJz", "number": 4749, "title": "Decouple physical optimizer from SessionConfig (#3887)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-27T17:37:35Z", "updated_at": "2022-12-28T12:03:11Z", "closed_at": "2022-12-28T11:58:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4749", "html_url": "https://github.com/apache/datafusion/pull/4749", "diff_url": "https://github.com/apache/datafusion/pull/4749.diff", "patch_url": "https://github.com/apache/datafusion/pull/4749.patch", "merged_at": "2022-12-28T11:58:50Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #3887\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis feeds into the broader effort to consolidate `SessionConfig` and `ConfigOptions`, whilst also ensuring that the physical optimizer rules are decoupled from the broader `SessionContext` / `SessionState` plumbing\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4749/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4748", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4748/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4748/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4748/events", "html_url": "https://github.com/apache/datafusion/pull/4748", "id": 1511901298, "node_id": "PR_kwDOFWSkxs5GQIw0", "number": 4748, "title": "minor: Improve docstrings", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-27T15:23:50Z", "updated_at": "2023-08-08T20:14:45Z", "closed_at": "2022-12-29T12:56:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4748", "html_url": "https://github.com/apache/datafusion/pull/4748", "diff_url": "https://github.com/apache/datafusion/pull/4748.diff", "patch_url": "https://github.com/apache/datafusion/pull/4748.patch", "merged_at": "2022-12-29T12:56:44Z"}, "body": "# Which issue does this PR close?\r\n\r\nN/A\r\n\r\n# Rationale for this change\r\n\r\n\r\nWe plan to use this interface more directly (see  using https://github.com/influxdata/influxdb_iox/pull/6469) so having more documentation will be good.\r\n\r\n# What changes are included in this PR?\r\n\r\nImprove docstrings\r\n\r\n# Are these changes tested?\r\n\r\nNot really\r\n\r\n# Are there any user-facing changes?\r\nbetter docstrings", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4748/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4746", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4746/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4746/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4746/events", "html_url": "https://github.com/apache/datafusion/pull/4746", "id": 1511898282, "node_id": "PR_kwDOFWSkxs5GQIHa", "number": 4746, "title": "Append generated column to the schema instead of prepending for WindowAggExec", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-12-27T15:20:00Z", "updated_at": "2023-01-03T12:47:45Z", "closed_at": "2022-12-29T12:39:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4746", "html_url": "https://github.com/apache/datafusion/pull/4746", "diff_url": "https://github.com/apache/datafusion/pull/4746.diff", "patch_url": "https://github.com/apache/datafusion/pull/4746.patch", "merged_at": "2022-12-29T12:39:09Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nThis is mostly a simplification PR. This PR un-does  the changes in the #4455\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nPreviously `WindowAggExec` was prepending its result to the schema. This required offset addition to columns of the original schema (in the PR  #4455). By appending, instead of prepending, we can remove changes in the PR #4455. This decreases code size and increases readability.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nSince column index changes, physical plan of the some queries changed (very minor change hust index). Hence some tests needed to be updated also.\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\nExisting tests checks this functionality, specifically [this test](https://github.com/apache/arrow-datafusion/blob/fe477e48832adb59e8992d92f9a292128dfb0a97/datafusion/core/tests/sql/window.rs#L1614) checks the desired behavior.\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4746/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4746/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4745", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4745/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4745/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4745/events", "html_url": "https://github.com/apache/datafusion/pull/4745", "id": 1511862655, "node_id": "PR_kwDOFWSkxs5GQAXD", "number": 4745, "title": "Minor: comments about coercion in physical planner", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-27T14:39:35Z", "updated_at": "2022-12-28T21:12:34Z", "closed_at": "2022-12-28T21:03:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4745", "html_url": "https://github.com/apache/datafusion/pull/4745", "diff_url": "https://github.com/apache/datafusion/pull/4745.diff", "patch_url": "https://github.com/apache/datafusion/pull/4745.patch", "merged_at": "2022-12-28T21:03:22Z"}, "body": "# Which issue does this PR close?\r\n\r\nAs pointed out by @liukun4515  on https://github.com/apache/arrow-datafusion/pull/4726 https://github.com/apache/arrow-datafusion/pull/4726#issuecomment-1365869414 type coercion is not needed during physical planning\r\n\r\ncc @comphead \r\n\r\n# Rationale for this change\r\n~Code is uneeded~\r\n\r\nAvoid confusion about design in the future\r\n\r\n# What changes are included in this PR?\r\n\r\n~Remove uneeded code~\r\n\r\nAdd comments about coercion in the physical planner\r\n\r\n# Are these changes tested?\r\nYes, all existing tests pass\r\n\r\n# Are there any user-facing changes?\r\n\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4745/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4743", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4743/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4743/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4743/events", "html_url": "https://github.com/apache/datafusion/pull/4743", "id": 1511791080, "node_id": "PR_kwDOFWSkxs5GPw6o", "number": 4743, "title": "Simplify parquet filter predicate test, fix Page Filtering Incorrectly Handles Pages with Different Row Counts ", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-27T13:11:19Z", "updated_at": "2022-12-28T22:12:17Z", "closed_at": "2022-12-28T22:01:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4743", "html_url": "https://github.com/apache/datafusion/pull/4743", "diff_url": "https://github.com/apache/datafusion/pull/4743.diff", "patch_url": "https://github.com/apache/datafusion/pull/4743.patch", "merged_at": "2022-12-28T22:01:02Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4744\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4743/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4742", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4742/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4742/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4742/events", "html_url": "https://github.com/apache/datafusion/pull/4742", "id": 1511782826, "node_id": "PR_kwDOFWSkxs5GPvE3", "number": 4742, "title": "support byte array for decimal in parquet page and row group filters", "user": {"login": "liukun4515", "id": 7450163, "node_id": "MDQ6VXNlcjc0NTAxNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7450163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liukun4515", "html_url": "https://github.com/liukun4515", "followers_url": "https://api.github.com/users/liukun4515/followers", "following_url": "https://api.github.com/users/liukun4515/following{/other_user}", "gists_url": "https://api.github.com/users/liukun4515/gists{/gist_id}", "starred_url": "https://api.github.com/users/liukun4515/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liukun4515/subscriptions", "organizations_url": "https://api.github.com/users/liukun4515/orgs", "repos_url": "https://api.github.com/users/liukun4515/repos", "events_url": "https://api.github.com/users/liukun4515/events{/privacy}", "received_events_url": "https://api.github.com/users/liukun4515/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-27T13:02:07Z", "updated_at": "2023-01-02T15:12:57Z", "closed_at": "2023-01-02T15:03:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4742", "html_url": "https://github.com/apache/datafusion/pull/4742", "diff_url": "https://github.com/apache/datafusion/pull/4742.diff", "patch_url": "https://github.com/apache/datafusion/pull/4742.patch", "merged_at": "2023-01-02T15:03:48Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4742/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4742/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4741", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4741/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4741/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4741/events", "html_url": "https://github.com/apache/datafusion/pull/4741", "id": 1511781011, "node_id": "PR_kwDOFWSkxs5GPurZ", "number": 4741, "title": "revert some code for #4726 / remove unnecessary coercion in physical plans", "user": {"login": "liukun4515", "id": 7450163, "node_id": "MDQ6VXNlcjc0NTAxNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7450163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liukun4515", "html_url": "https://github.com/liukun4515", "followers_url": "https://api.github.com/users/liukun4515/followers", "following_url": "https://api.github.com/users/liukun4515/following{/other_user}", "gists_url": "https://api.github.com/users/liukun4515/gists{/gist_id}", "starred_url": "https://api.github.com/users/liukun4515/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liukun4515/subscriptions", "organizations_url": "https://api.github.com/users/liukun4515/orgs", "repos_url": "https://api.github.com/users/liukun4515/repos", "events_url": "https://api.github.com/users/liukun4515/events{/privacy}", "received_events_url": "https://api.github.com/users/liukun4515/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-27T13:00:00Z", "updated_at": "2022-12-29T06:09:50Z", "closed_at": "2022-12-28T12:20:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4741", "html_url": "https://github.com/apache/datafusion/pull/4741", "diff_url": "https://github.com/apache/datafusion/pull/4741.diff", "patch_url": "https://github.com/apache/datafusion/pull/4741.patch", "merged_at": "2022-12-28T12:20:59Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nfrom the https://github.com/apache/arrow-datafusion/pull/4726#issuecomment-1365869414\r\n\r\nIf we want to compare the timestamp with date, we just need to add logic in `type_coercion`, and don't need to do type coercion in the physical phase.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4741/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4740", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4740/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4740/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4740/events", "html_url": "https://github.com/apache/datafusion/pull/4740", "id": 1511719558, "node_id": "PR_kwDOFWSkxs5GPhSz", "number": 4740, "title": "Cleanup InformationSchema plumbing", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-27T11:37:15Z", "updated_at": "2022-12-27T13:21:05Z", "closed_at": "2022-12-27T13:16:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4740", "html_url": "https://github.com/apache/datafusion/pull/4740", "diff_url": "https://github.com/apache/datafusion/pull/4740.diff", "patch_url": "https://github.com/apache/datafusion/pull/4740.patch", "merged_at": "2022-12-27T13:16:51Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis follows on from #4606 and #4722 and simplifies the handling of information schema\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4740/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4739", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4739/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4739/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4739/events", "html_url": "https://github.com/apache/datafusion/pull/4739", "id": 1511596980, "node_id": "PR_kwDOFWSkxs5GPGrW", "number": 4739, "title": "Minor: use a common method to check the validate of  equijoin predicate", "user": {"login": "ygf11", "id": 3428089, "node_id": "MDQ6VXNlcjM0MjgwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3428089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygf11", "html_url": "https://github.com/ygf11", "followers_url": "https://api.github.com/users/ygf11/followers", "following_url": "https://api.github.com/users/ygf11/following{/other_user}", "gists_url": "https://api.github.com/users/ygf11/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygf11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygf11/subscriptions", "organizations_url": "https://api.github.com/users/ygf11/orgs", "repos_url": "https://api.github.com/users/ygf11/repos", "events_url": "https://api.github.com/users/ygf11/events{/privacy}", "received_events_url": "https://api.github.com/users/ygf11/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-27T09:09:12Z", "updated_at": "2022-12-28T01:31:06Z", "closed_at": "2022-12-27T21:51:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4739", "html_url": "https://github.com/apache/datafusion/pull/4739", "diff_url": "https://github.com/apache/datafusion/pull/4739.diff", "patch_url": "https://github.com/apache/datafusion/pull/4739.patch", "merged_at": "2022-12-27T21:51:21Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n# What changes are included in this PR?\r\n\r\n1. Use the `find_valid_equijoin_key_pair` to check the validate of  equijoin predicate.\r\n2. Modify the method signature of `check_all_column_from_schema`, return `bool` now.\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4739/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4738", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4738/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4738/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4738/events", "html_url": "https://github.com/apache/datafusion/pull/4738", "id": 1511473978, "node_id": "PR_kwDOFWSkxs5GOsdJ", "number": 4738, "title": "minor: Support more data type for `null_counts` in the `PruningStatistics`", "user": {"login": "liukun4515", "id": 7450163, "node_id": "MDQ6VXNlcjc0NTAxNjM=", "avatar_url": "https://avatars.githubusercontent.com/u/7450163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liukun4515", "html_url": "https://github.com/liukun4515", "followers_url": "https://api.github.com/users/liukun4515/followers", "following_url": "https://api.github.com/users/liukun4515/following{/other_user}", "gists_url": "https://api.github.com/users/liukun4515/gists{/gist_id}", "starred_url": "https://api.github.com/users/liukun4515/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liukun4515/subscriptions", "organizations_url": "https://api.github.com/users/liukun4515/orgs", "repos_url": "https://api.github.com/users/liukun4515/repos", "events_url": "https://api.github.com/users/liukun4515/events{/privacy}", "received_events_url": "https://api.github.com/users/liukun4515/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-27T06:15:17Z", "updated_at": "2022-12-27T15:41:37Z", "closed_at": "2022-12-27T15:39:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4738", "html_url": "https://github.com/apache/datafusion/pull/4738", "diff_url": "https://github.com/apache/datafusion/pull/4738.diff", "patch_url": "https://github.com/apache/datafusion/pull/4738.patch", "merged_at": "2022-12-27T15:39:54Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4738/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4737", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4737/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4737/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4737/events", "html_url": "https://github.com/apache/datafusion/pull/4737", "id": 1510998971, "node_id": "PR_kwDOFWSkxs5GNGWg", "number": 4737, "title": "Extended datatypes & signatures support for `NULLIF` function", "user": {"login": "korowa", "id": 13005055, "node_id": "MDQ6VXNlcjEzMDA1MDU1", "avatar_url": "https://avatars.githubusercontent.com/u/13005055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/korowa", "html_url": "https://github.com/korowa", "followers_url": "https://api.github.com/users/korowa/followers", "following_url": "https://api.github.com/users/korowa/following{/other_user}", "gists_url": "https://api.github.com/users/korowa/gists{/gist_id}", "starred_url": "https://api.github.com/users/korowa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/korowa/subscriptions", "organizations_url": "https://api.github.com/users/korowa/orgs", "repos_url": "https://api.github.com/users/korowa/repos", "events_url": "https://api.github.com/users/korowa/events{/privacy}", "received_events_url": "https://api.github.com/users/korowa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-26T14:23:56Z", "updated_at": "2022-12-26T21:21:49Z", "closed_at": "2022-12-26T21:18:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4737", "html_url": "https://github.com/apache/datafusion/pull/4737", "diff_url": "https://github.com/apache/datafusion/pull/4737.diff", "patch_url": "https://github.com/apache/datafusion/pull/4737.patch", "merged_at": "2022-12-26T21:18:08Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4205 .\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nAdding more options to call `NULLIF` in terms of signatures and inputs.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n1) Calling arrow `compute::nullif` without intermediate type checking\r\n2) String typed inputs now allowed as `NULLIF` arguments\r\n3) Added support for literal as first argument for both Scalar-Array and Scalar-Scalar cases\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nUnit tests for nullif_func added\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4737/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4736", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4736/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4736/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4736/events", "html_url": "https://github.com/apache/datafusion/pull/4736", "id": 1510985509, "node_id": "PR_kwDOFWSkxs5GNDWg", "number": 4736, "title": "minor: improve debug logging for pruning predicates", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-26T14:06:53Z", "updated_at": "2023-08-08T20:14:44Z", "closed_at": "2022-12-27T12:30:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4736", "html_url": "https://github.com/apache/datafusion/pull/4736", "diff_url": "https://github.com/apache/datafusion/pull/4736.diff", "patch_url": "https://github.com/apache/datafusion/pull/4736.patch", "merged_at": "2022-12-27T12:30:12Z"}, "body": "Improve debug log message per https://github.com/apache/arrow-datafusion/pull/4713#discussion_r1056316886", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4736/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4735", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4735/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4735/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4735/events", "html_url": "https://github.com/apache/datafusion/pull/4735", "id": 1510934984, "node_id": "PR_kwDOFWSkxs5GM4FN", "number": 4735, "title": "refactor: parallelize `parquet_exec` test case `single_file`", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-26T13:04:59Z", "updated_at": "2022-12-27T13:36:32Z", "closed_at": "2022-12-27T10:47:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4735", "html_url": "https://github.com/apache/datafusion/pull/4735", "diff_url": "https://github.com/apache/datafusion/pull/4735.diff", "patch_url": "https://github.com/apache/datafusion/pull/4735.patch", "merged_at": "2022-12-27T10:47:58Z"}, "body": "Signed-off-by: Ruihang Xia <waynestxia@gmail.com>\r\n\r\n# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\nI found this test is very slow (the last one `datafusion::parquet_exec parquet::filter_pushdown::single_file`):\r\n```\r\n        PASS [   0.061s]        datafusion-benchmarks::bin/tpch tests::run_q5\r\n        PASS [   0.091s]        datafusion-benchmarks::bin/tpch tests::run_q21\r\n        PASS [   0.082s]        datafusion-benchmarks::bin/tpch tests::run_q9\r\n        PASS [   0.056s]          datafusion::user_defined_plan normal_query_without_schemas\r\n        PASS [   0.047s]          datafusion::user_defined_plan topk_plan\r\n        PASS [   0.081s]          datafusion::user_defined_plan normal_query\r\n        PASS [   0.015s]          datafusion::user_defined_plan topk_query\r\n        PASS [   0.120s]        datafusion-benchmarks::bin/tpch tests::run_q7\r\n        PASS [   0.112s]    datafusion::user_defined_aggregates test_udf_returning_struct_sq\r\n        PASS [   0.114s]    datafusion::user_defined_aggregates test_udf_returning_struct\r\n        PASS [   0.131s]        datafusion-benchmarks::bin/tpch tests::run_q8\r\n        PASS [   1.090s]             datafusion::tpcds_planning tpcds_physical_q88\r\n        PASS [  23.772s]               datafusion::parquet_exec parquet::filter_pushdown::single_file\r\n------------\r\n     Summary [  27.234s] 2669 tests run: 2667 passed, 2 failed, 30 skipped\r\n```\r\nand always hold the whole test process for seconds.\r\n\r\n# What changes are included in this PR?\r\n\r\nThis test is composed of serval little cases. I change it to run them in parallel, making the unit test faster by ~10s.\r\n```\r\n\r\n        PASS [   0.082s]    datafusion::user_defined_aggregates test_udf_returning_struct\r\n        PASS [   0.023s]          datafusion::user_defined_plan topk_plan\r\n        PASS [   0.070s]          datafusion::user_defined_plan normal_query_without_schemas\r\n        PASS [   0.013s]          datafusion::user_defined_plan topk_query\r\n        PASS [   0.086s]          datafusion::user_defined_plan normal_query\r\n        PASS [   0.101s]        datafusion-benchmarks::bin/tpch tests::run_q9\r\n        PASS [   0.116s]        datafusion-benchmarks::bin/tpch tests::run_q7\r\n        PASS [   0.119s]        datafusion-benchmarks::bin/tpch tests::run_q8\r\n        PASS [   0.905s]             datafusion::tpcds_planning tpcds_physical_q88\r\n------------\r\n     Summary [  16.256s] 2669 tests run: 2667 passed, 2 failed, 30 skipped\r\n```\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\nby it self\r\n\r\n# Are there any user-facing changes?\r\n\r\n\r\nno\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4735/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4735/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4733", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4733/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4733/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4733/events", "html_url": "https://github.com/apache/datafusion/pull/4733", "id": 1510895712, "node_id": "PR_kwDOFWSkxs5GMvfA", "number": 4733, "title": "fix: add one more projection to recover output schema", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-26T12:04:30Z", "updated_at": "2022-12-29T02:06:55Z", "closed_at": "2022-12-28T21:02:40Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4733", "html_url": "https://github.com/apache/datafusion/pull/4733", "diff_url": "https://github.com/apache/datafusion/pull/4733.diff", "patch_url": "https://github.com/apache/datafusion/pull/4733.patch", "merged_at": "2022-12-28T21:02:40Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4575 .\r\n\r\n# Rationale for this change\r\n\r\n\r\n`common_subexpression_eliminate` optimizer doesn't consider the situation that some plans (like `Sort` or `Filter`) rely on the input's schema. When introducing an intermediate projection schema that evaluates the common expressions, it also changes the \"input schema\" for those optimized plans. This patch will check if the output schema changed, and add another projection to recover the output schema if so.\r\n\r\n# What changes are included in this PR?\r\n\r\nExcept the extra projection described above, this patch also fixes the problem that the optimizer used to build `Projection` plan manually, rather than through `Projection::try_new()` constructor. This will bypass the schema check process and may produce a wrong projection plan, whose schema doesn't match its exprs.\r\n \r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, add a new case `filter_schema_changed` to cover\r\n\r\n# Are there any user-facing changes?\r\n\r\nno\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4733/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4733/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4731", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4731/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4731/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4731/events", "html_url": "https://github.com/apache/datafusion/pull/4731", "id": 1510749440, "node_id": "PR_kwDOFWSkxs5GMQNm", "number": 4731, "title": "remove `SubqueryFilterToJoin`", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-26T08:43:19Z", "updated_at": "2022-12-28T23:59:11Z", "closed_at": "2022-12-28T21:02:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4731", "html_url": "https://github.com/apache/datafusion/pull/4731", "diff_url": "https://github.com/apache/datafusion/pull/4731.diff", "patch_url": "https://github.com/apache/datafusion/pull/4731.patch", "merged_at": "2022-12-28T21:02:57Z"}, "body": "# Which issue does this PR close?\r\n\r\nN/A\r\n\r\n# Rationale for this change\r\n\r\nFrom  comment of @liukun4515 https://github.com/apache/arrow-datafusion/pull/4725#issuecomment-1364999536\r\n\r\n`SubqueryFilterToJoin` is useless, because `DecorrelateWhereIn` exist\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\nNone", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4731/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4731/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4730", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4730/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4730/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4730/events", "html_url": "https://github.com/apache/datafusion/pull/4730", "id": 1510437135, "node_id": "PR_kwDOFWSkxs5GLNIf", "number": 4730, "title": "Create writer with `arrow::ipc::IPCWriteOptions`", "user": {"login": "askoa", "id": 112126368, "node_id": "U_kgDOBq7poA", "avatar_url": "https://avatars.githubusercontent.com/u/112126368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/askoa", "html_url": "https://github.com/askoa", "followers_url": "https://api.github.com/users/askoa/followers", "following_url": "https://api.github.com/users/askoa/following{/other_user}", "gists_url": "https://api.github.com/users/askoa/gists{/gist_id}", "starred_url": "https://api.github.com/users/askoa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/askoa/subscriptions", "organizations_url": "https://api.github.com/users/askoa/orgs", "repos_url": "https://api.github.com/users/askoa/repos", "events_url": "https://api.github.com/users/askoa/events{/privacy}", "received_events_url": "https://api.github.com/users/askoa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-12-25T23:11:00Z", "updated_at": "2022-12-27T12:33:31Z", "closed_at": "2022-12-26T21:22:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4730", "html_url": "https://github.com/apache/datafusion/pull/4730", "diff_url": "https://github.com/apache/datafusion/pull/4730.diff", "patch_url": "https://github.com/apache/datafusion/pull/4730.patch", "merged_at": "2022-12-26T21:22:05Z"}, "body": "# Which issue does this PR close?\r\nCloses #4708 \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4730/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4726", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4726/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4726/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4726/events", "html_url": "https://github.com/apache/datafusion/pull/4726", "id": 1510190131, "node_id": "PR_kwDOFWSkxs5GKd6l", "number": 4726, "title": "Implement cast between Date and Timestamp", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-12-24T20:57:30Z", "updated_at": "2023-01-01T22:19:16Z", "closed_at": "2022-12-26T21:18:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4726", "html_url": "https://github.com/apache/datafusion/pull/4726", "diff_url": "https://github.com/apache/datafusion/pull/4726.diff", "patch_url": "https://github.com/apache/datafusion/pull/4726.patch", "merged_at": "2022-12-26T21:18:27Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4644 \r\nCloses #4672.\r\n\r\n# Rationale for this change\r\nAdd cast between Date and Timestamp\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4726/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4722", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4722/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4722/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4722/events", "html_url": "https://github.com/apache/datafusion/pull/4722", "id": 1509830344, "node_id": "PR_kwDOFWSkxs5GJToS", "number": 4722, "title": "Dynamic information_schema configuration and port more tests", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-23T22:52:15Z", "updated_at": "2023-08-08T20:14:44Z", "closed_at": "2022-12-26T14:08:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4722", "html_url": "https://github.com/apache/datafusion/pull/4722", "diff_url": "https://github.com/apache/datafusion/pull/4722.diff", "patch_url": "https://github.com/apache/datafusion/pull/4722.patch", "merged_at": "2022-12-26T14:08:58Z"}, "body": "# Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/4495\r\n\r\n# Rationale for this change\r\n\r\nCurrently the information schema can not be enabled after the `SessionState` is created and it can not be disabled.\r\n\r\nThis means I can't enable it programmatically in the sqllogicttests, and makes for a strange user experience where you can run `set datafusion.catalog.information_schema = true` but it is a noop\r\n\r\n\r\n# What changes are included in this PR?\r\n1. Enable / Disable information schema dynamically\r\n2. Port some `information_schema` tests that rely on this behavior \r\n\r\n# Are these changes tested?\r\nYes\r\n\r\n# Are there any user-facing changes?\r\n\r\nUsers can now enable / disable the information schema\r\n\r\nExample:\r\n\r\n```sql\r\nDataFusion CLI v15.0.0\r\n\u276f show tables;\r\n+---------------+--------------------+-------------+------------+\r\n| table_catalog | table_schema       | table_name  | table_type |\r\n+---------------+--------------------+-------------+------------+\r\n| datafusion    | information_schema | tables      | VIEW       |\r\n| datafusion    | information_schema | views       | VIEW       |\r\n| datafusion    | information_schema | columns     | VIEW       |\r\n| datafusion    | information_schema | df_settings | VIEW       |\r\n+---------------+--------------------+-------------+------------+\r\n4 rows in set. Query took 0.045 seconds.\r\n\u276f set datafusion.catalog.information_schema = false;\r\n0 rows in set. Query took 0.001 seconds.\r\n\u276f show tables;\r\nPlan(\"SHOW TABLES is not supported unless information_schema is enabled\")\r\n```", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4722/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4719", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4719/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4719/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4719/events", "html_url": "https://github.com/apache/datafusion/pull/4719", "id": 1509610955, "node_id": "PR_kwDOFWSkxs5GIlp_", "number": 4719, "title": "Add TPC-DS query planning regression tests", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-23T17:58:09Z", "updated_at": "2022-12-23T23:38:38Z", "closed_at": "2022-12-23T19:54:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4719", "html_url": "https://github.com/apache/datafusion/pull/4719", "diff_url": "https://github.com/apache/datafusion/pull/4719.diff", "patch_url": "https://github.com/apache/datafusion/pull/4719.patch", "merged_at": "2022-12-23T19:54:30Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses https://github.com/apache/arrow-datafusion/issues/4718\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nPrevent regressions in supporting TPC-DS queries.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nTests\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes. This PR only adds tests.\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\nNo\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4719/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4719/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4717", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4717/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4717/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4717/events", "html_url": "https://github.com/apache/datafusion/pull/4717", "id": 1509388649, "node_id": "PR_kwDOFWSkxs5GH08v", "number": 4717, "title": "Minor: refactor streaming CSV inference code", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-23T14:08:37Z", "updated_at": "2023-08-08T20:14:43Z", "closed_at": "2022-12-23T20:57:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4717", "html_url": "https://github.com/apache/datafusion/pull/4717", "diff_url": "https://github.com/apache/datafusion/pull/4717.diff", "patch_url": "https://github.com/apache/datafusion/pull/4717.patch", "merged_at": "2022-12-23T20:57:09Z"}, "body": "# Which issue does this PR close?\r\nre https://github.com/apache/arrow-datafusion/issues/3658\r\n\r\n\r\n# Rationale for this change\r\n\r\nI spent some time messing with this code as part of review https://github.com/apache/arrow-datafusion/pull/4661#issuecomment-1363824177 trying to make it easier to read, so I figured I would put it up for review\r\n\r\n\r\n# What changes are included in this PR?\r\nMove some code around into functions with comments to avoid double nested loops\r\n\r\n# Are these changes tested?\r\ncovered by existing tests\r\n\r\n# Are there any user-facing changes?\r\n\r\nno\r\n\r\ncc @Jefffrey ", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4717/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4714", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4714/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4714/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4714/events", "html_url": "https://github.com/apache/datafusion/pull/4714", "id": 1508936330, "node_id": "PR_kwDOFWSkxs5GGS9F", "number": 4714, "title": "Reorder the physical plan optimizer rules, extract `GlobalSortSelection`, make `Repartition` optional", "user": {"login": "yahoNanJing", "id": 90197956, "node_id": "MDQ6VXNlcjkwMTk3OTU2", "avatar_url": "https://avatars.githubusercontent.com/u/90197956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yahoNanJing", "html_url": "https://github.com/yahoNanJing", "followers_url": "https://api.github.com/users/yahoNanJing/followers", "following_url": "https://api.github.com/users/yahoNanJing/following{/other_user}", "gists_url": "https://api.github.com/users/yahoNanJing/gists{/gist_id}", "starred_url": "https://api.github.com/users/yahoNanJing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yahoNanJing/subscriptions", "organizations_url": "https://api.github.com/users/yahoNanJing/orgs", "repos_url": "https://api.github.com/users/yahoNanJing/repos", "events_url": "https://api.github.com/users/yahoNanJing/events{/privacy}", "received_events_url": "https://api.github.com/users/yahoNanJing/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-12-23T06:07:26Z", "updated_at": "2022-12-27T21:51:54Z", "closed_at": "2022-12-27T21:50:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4714", "html_url": "https://github.com/apache/datafusion/pull/4714", "diff_url": "https://github.com/apache/datafusion/pull/4714.diff", "patch_url": "https://github.com/apache/datafusion/pull/4714.patch", "merged_at": "2022-12-27T21:50:17Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4678.\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nAccording to #4678, this change is done by the following steps:\r\n1. Extract the global sort algorithm selection from the `BasicEnforcement` to be a separate rule, `GlobalSortSelection`.\r\n2. Make the `Repartition` optional.\r\n3. Reorder the rules as following:\r\n    - AggregateStatistics\r\n    - Repartition(optional)\r\n    - GlobalSortSelection\r\n    - JoinSelection\r\n    - BasicEnforcement\r\n    - CoalesceBatches(optional)\r\n\r\nThe reason for this ordering is as follows:\r\n- For `Repartition`, in order to increase the parallelism, it will change the output partitioning of some operators in the plan tree, which will influence other rules. Therefore, it should be run as soon as possible. The reason to make it optional is it's not used for the distributed engine, Ballista. And it's conflicted with some parts of the `BasicEnforcement`, since it will introduce additional repartitioning while the `BasicEnforcement` aims at reducing unnecessary repartitioning.\r\n- For `GlobalSortSelection`, since currently it will depend on the partition number to decide whether change the single node sort to parallel local sort and merge, it should be run after the `Repartition`. Since it will change the output ordering of some operators, it should be run before `JoinSelection` and `BasicEnforcement`, which may depend on that.\r\n- For `JoinSelection`, based on statistics, it will change the Auto mode to real join implementation, like collect left, or hash join, or future sort merge join, which will influence the `BasicEnforcement` to decide whether to add additional repartition and local sort to meet the distribution and ordering requirements. Therefore, it should be run before `BasicEnforcement`.\r\n- For `BasicEnforcement`, before run this rule, please make sure that the whole plan tree is determined.\r\n- For  `CoalesceBatches`, it will not influence the distribution and ordering of the whole plan tree. Therefore, to avoid influencing other rules, it should be run at last.\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n1. The global sort algorithm selection is extracted from the `BasicEnforcement` to be a separate rule, `GlobalSortSelection`.\r\n2. Don't insert `CoalesceBatches` after the `Repartition`.\r\n3. The data of `EmptyExec` is aligned with the field number of its schema.\r\n4. `Repartition` only considers the ordering influence for the final output and will not consider the intermediate data ordering especially the local ordering which should be dealt with by `BasicEnforcement`.\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n5. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4714/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4713", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4713/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4713/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4713/events", "html_url": "https://github.com/apache/datafusion/pull/4713", "id": 1507994445, "node_id": "PR_kwDOFWSkxs5GDDQw", "number": 4713, "title": "Eagerly construct PagePruningPredicate", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-22T14:32:11Z", "updated_at": "2022-12-26T14:12:17Z", "closed_at": "2022-12-26T14:04:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4713", "html_url": "https://github.com/apache/datafusion/pull/4713", "diff_url": "https://github.com/apache/datafusion/pull/4713.diff", "patch_url": "https://github.com/apache/datafusion/pull/4713.patch", "merged_at": "2022-12-26T14:04:10Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #4693 \r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nEagerly constructing the `PagePruningPredicate` not only saves cycles, but allows it to occur when `ExecutionProps` is in scope. A future PR will update `PruningPredicate` to require this to resolve #4693\r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4713/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4713/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4712", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4712/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4712/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4712/events", "html_url": "https://github.com/apache/datafusion/pull/4712", "id": 1507773909, "node_id": "PR_kwDOFWSkxs5GCRuP", "number": 4712, "title": "Don't share ConfigOptions (#3886)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-22T12:16:43Z", "updated_at": "2022-12-23T10:41:36Z", "closed_at": "2022-12-23T10:40:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4712", "html_url": "https://github.com/apache/datafusion/pull/4712", "diff_url": "https://github.com/apache/datafusion/pull/4712.diff", "patch_url": "https://github.com/apache/datafusion/pull/4712.patch", "merged_at": "2022-12-23T10:40:05Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #3886\r\nCloses https://github.com/apache/arrow-datafusion/pull/3909\r\nRelates to #4349\r\nRelates to #4617\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nHaving shared mutable state makes reasoning about mutation difficult (#4617), the locking is verbose and potentially error prone (#3886), \r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4712/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4711", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4711/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4711/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4711/events", "html_url": "https://github.com/apache/datafusion/pull/4711", "id": 1507724403, "node_id": "PR_kwDOFWSkxs5GCGm-", "number": 4711, "title": "Move the extract_join_keys to optimizer", "user": {"login": "ygf11", "id": 3428089, "node_id": "MDQ6VXNlcjM0MjgwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/3428089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ygf11", "html_url": "https://github.com/ygf11", "followers_url": "https://api.github.com/users/ygf11/followers", "following_url": "https://api.github.com/users/ygf11/following{/other_user}", "gists_url": "https://api.github.com/users/ygf11/gists{/gist_id}", "starred_url": "https://api.github.com/users/ygf11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ygf11/subscriptions", "organizations_url": "https://api.github.com/users/ygf11/orgs", "repos_url": "https://api.github.com/users/ygf11/repos", "events_url": "https://api.github.com/users/ygf11/events{/privacy}", "received_events_url": "https://api.github.com/users/ygf11/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-22T11:41:15Z", "updated_at": "2022-12-27T11:26:55Z", "closed_at": "2022-12-27T10:00:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4711", "html_url": "https://github.com/apache/datafusion/pull/4711", "diff_url": "https://github.com/apache/datafusion/pull/4711.diff", "patch_url": "https://github.com/apache/datafusion/pull/4711.patch", "merged_at": "2022-12-27T10:00:13Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #4710.\r\n\r\n# Rationale for this change\r\n\r\nSee #4710\r\n\r\n# What changes are included in this PR?\r\n\r\n* Remove the usage of `extract join keys` in sql planner.\r\n* Add `ExtractEquijoinPredicate` to optimizer.\r\n\r\n# Are these changes tested?\r\n\r\nYes.\r\n\r\n# Are there any user-facing changes?\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4711/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4702", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4702/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4702/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4702/events", "html_url": "https://github.com/apache/datafusion/pull/4702", "id": 1507308894, "node_id": "PR_kwDOFWSkxs5GArTJ", "number": 4702, "title": "Avoid to bypass `try_new/new()` to build plan directly and cleanup filter", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-22T05:49:25Z", "updated_at": "2022-12-23T12:42:00Z", "closed_at": "2022-12-23T12:32:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4702", "html_url": "https://github.com/apache/datafusion/pull/4702", "diff_url": "https://github.com/apache/datafusion/pull/4702.diff", "patch_url": "https://github.com/apache/datafusion/pull/4702.patch", "merged_at": "2022-12-23T12:32:39Z"}, "body": "# Which issue does this PR close?\r\n\r\nCloses #.\r\n\r\n# Rationale for this change\r\n\r\n# What changes are included in this PR?\r\n\r\n- add `#[non_exhaustive]` for LogicalPlan to avoid to bypass `try_new/new()` to build plan directly and \r\n- cleanup filter `predicate() input()`\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4702/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4702/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/4699", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/4699/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/4699/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/4699/events", "html_url": "https://github.com/apache/datafusion/pull/4699", "id": 1506724761, "node_id": "PR_kwDOFWSkxs5F-txq", "number": 4699, "title": "Push SessionState into FileFormat (#4349)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-21T18:12:00Z", "updated_at": "2022-12-22T10:21:33Z", "closed_at": "2022-12-22T10:14:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/4699", "html_url": "https://github.com/apache/datafusion/pull/4699", "diff_url": "https://github.com/apache/datafusion/pull/4699.diff", "patch_url": "https://github.com/apache/datafusion/pull/4699.patch", "merged_at": "2022-12-22T10:14:55Z"}, "body": "# Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #4349\r\nRelates to #4617 \r\nRelates to #3909 #3886\r\n\r\n\r\n# Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n#4427 pushed `ConfigOptions` into `ParquetFormat`, however, the resulting `Arc<Mutex<ConfigOptions>>` is tricky to work with (#3886) and has unclear mutation semantics (#4617). \r\n\r\n# What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nPushes `SessionState` into `FileFormat` which in turn will allow removing `ConfigOptions` from `ParquetFormat` and instead just fetching the configuration from the passed in `SessionState`\r\n\r\n# Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n# Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/4699/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/4699/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]