[{"url": "https://api.github.com/repos/apache/datafusion/issues/7416", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7416/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7416/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7416/events", "html_url": "https://github.com/apache/datafusion/pull/7416", "id": 1867169995, "node_id": "PR_kwDOFWSkxs5YzTyp", "number": 7416, "title": "Fix python CI", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-25T14:34:26Z", "updated_at": "2023-08-25T16:11:40Z", "closed_at": "2023-08-25T16:11:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7416", "html_url": "https://github.com/apache/datafusion/pull/7416", "diff_url": "https://github.com/apache/datafusion/pull/7416.diff", "patch_url": "https://github.com/apache/datafusion/pull/7416.patch", "merged_at": "2023-08-25T16:11:40Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses https://github.com/apache/arrow-datafusion/pull/7407\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nBased on suggestion in https://github.com/actions/setup-python/issues/709\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7416/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7416/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7399", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7399/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7399/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7399/events", "html_url": "https://github.com/apache/datafusion/pull/7399", "id": 1865485540, "node_id": "PR_kwDOFWSkxs5YtjoQ", "number": 7399, "title": "Clean up clippy for Rust 1.72 release", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-24T16:12:17Z", "updated_at": "2023-08-24T17:23:47Z", "closed_at": "2023-08-24T17:23:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7399", "html_url": "https://github.com/apache/datafusion/pull/7399", "diff_url": "https://github.com/apache/datafusion/pull/7399.diff", "patch_url": "https://github.com/apache/datafusion/pull/7399.patch", "merged_at": "2023-08-24T17:23:44Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses https://github.com/apache/arrow-datafusion/issues/7398\r\n\r\n## Rationale for this change\r\n\r\nA new version of clippy was released that is much pickier\r\n\r\n## What changes are included in this PR?\r\nFix new clippy lints (many via `cargo clippy --fix`)\r\n\r\n## Are these changes tested?\r\nexisting coverage\r\n\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7399/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7395", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7395/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7395/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7395/events", "html_url": "https://github.com/apache/datafusion/pull/7395", "id": 1864993783, "node_id": "PR_kwDOFWSkxs5Yr38P", "number": 7395, "title": "Unnecessary to list all files during partition pruning", "user": {"login": "smallzhongfeng", "id": 84573424, "node_id": "MDQ6VXNlcjg0NTczNDI0", "avatar_url": "https://avatars.githubusercontent.com/u/84573424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smallzhongfeng", "html_url": "https://github.com/smallzhongfeng", "followers_url": "https://api.github.com/users/smallzhongfeng/followers", "following_url": "https://api.github.com/users/smallzhongfeng/following{/other_user}", "gists_url": "https://api.github.com/users/smallzhongfeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/smallzhongfeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smallzhongfeng/subscriptions", "organizations_url": "https://api.github.com/users/smallzhongfeng/orgs", "repos_url": "https://api.github.com/users/smallzhongfeng/repos", "events_url": "https://api.github.com/users/smallzhongfeng/events{/privacy}", "received_events_url": "https://api.github.com/users/smallzhongfeng/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-24T11:52:07Z", "updated_at": "2023-08-25T02:32:25Z", "closed_at": "2023-08-24T13:38:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7395", "html_url": "https://github.com/apache/datafusion/pull/7395", "diff_url": "https://github.com/apache/datafusion/pull/7395.diff", "patch_url": "https://github.com/apache/datafusion/pull/7395.patch", "merged_at": "2023-08-24T13:38:34Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nNo need to iterate through all files when query contains partition criteria.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7395/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7392", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7392/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7392/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7392/events", "html_url": "https://github.com/apache/datafusion/pull/7392", "id": 1864001577, "node_id": "PR_kwDOFWSkxs5YojDk", "number": 7392, "title": "Minor: Move test for `Distribution` and `Partitioning` with code", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-23T20:57:17Z", "updated_at": "2023-08-24T10:25:34Z", "closed_at": "2023-08-24T10:25:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7392", "html_url": "https://github.com/apache/datafusion/pull/7392", "diff_url": "https://github.com/apache/datafusion/pull/7392.diff", "patch_url": "https://github.com/apache/datafusion/pull/7392.patch", "merged_at": "2023-08-24T10:25:19Z"}, "body": "## Which issue does this PR close?\r\n\r\nRelated to #1754 \r\n\r\n## Rationale for this change\r\n\r\nKeeping the test with the code it is testing is a good thing. The code for `Distribution` and `Partitioning` was moved to `datafusion-physical-expr` at some point, so the test for it should be as well\r\n\r\n## What changes are included in this PR?\r\n\r\nMove tests\r\n\r\n## Are these changes tested?\r\nyesty\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nno\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7392/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7391", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7391/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7391/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7391/events", "html_url": "https://github.com/apache/datafusion/pull/7391", "id": 1863993680, "node_id": "PR_kwDOFWSkxs5YohUC", "number": 7391, "title": "Minor: move datasource statistics code into its own module", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T20:50:37Z", "updated_at": "2023-08-24T10:26:38Z", "closed_at": "2023-08-24T10:26:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7391", "html_url": "https://github.com/apache/datafusion/pull/7391", "diff_url": "https://github.com/apache/datafusion/pull/7391.diff", "patch_url": "https://github.com/apache/datafusion/pull/7391.patch", "merged_at": "2023-08-24T10:26:29Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\nI am just trying to clean up the code, and I ran into this code that was in need of a home while doing so\r\n\r\n## What changes are included in this PR?\r\nMove statistics code for datasource into its own module\r\n\r\n## Are these changes tested?\r\nchecked by compiler\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7391/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7389", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7389/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7389/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7389/events", "html_url": "https://github.com/apache/datafusion/pull/7389", "id": 1863854815, "node_id": "PR_kwDOFWSkxs5YoDTt", "number": 7389, "title": "Minor: remove stray `println!` from `array_expressions.rs`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T18:56:44Z", "updated_at": "2023-08-23T20:16:30Z", "closed_at": "2023-08-23T20:16:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7389", "html_url": "https://github.com/apache/datafusion/pull/7389", "diff_url": "https://github.com/apache/datafusion/pull/7389.diff", "patch_url": "https://github.com/apache/datafusion/pull/7389.patch", "merged_at": "2023-08-23T20:16:21Z"}, "body": "## Which issue does this PR close?\r\n\r\nThis appears to have crept in as part of #7313\r\n\r\n## Rationale for this change\r\n\r\nwhen I run sqllogictest it looks like\r\n\r\n```\r\nRunning \"nullif.slt\"\r\nRunning \"array.slt\"\r\nRunning \"type_coercion.slt\"\r\nRunning \"clickbench.slt\"\r\nRunning \"information_schema_columns.slt\"\r\nRunning \"information_schema_multiple_catalogs.slt\"\r\nargs[0]: ListArray\r\n[\r\n  PrimitiveArray<Int64>\r\n[\r\n  1,\r\n],\r\n]\r\nargs[0]: ListArray\r\n[\r\n  NullArray(0),\r\n]\r\n...\r\n  PrimitiveArray<Int64>\r\n[\r\n  null,\r\n  18,\r\n],\r\n],\r\n]\r\n\r\nCompilation finished at Wed Aug 23 14:32:11\r\n\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\ndelete `println!`\r\n\r\n## Are these changes tested?\r\nexisting tests\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7389/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7389/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7388", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7388/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7388/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7388/events", "html_url": "https://github.com/apache/datafusion/pull/7388", "id": 1863767061, "node_id": "PR_kwDOFWSkxs5YnwTi", "number": 7388, "title": "Docs: Add query syntax to `COPY` docs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T17:49:56Z", "updated_at": "2023-08-24T13:41:04Z", "closed_at": "2023-08-24T13:40:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7388", "html_url": "https://github.com/apache/datafusion/pull/7388", "diff_url": "https://github.com/apache/datafusion/pull/7388.diff", "patch_url": "https://github.com/apache/datafusion/pull/7388.patch", "merged_at": "2023-08-24T13:40:58Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/7319\r\n\r\n## Rationale for this change\r\n\r\nOne thing I noticed while reviewing https://github.com/apache/arrow-datafusion/pull/7362 (thank you @spaydar !!) was that it didn't mention the `COPY (SELECT ...)` syntax, which is quite helpful for reordering input, for example. \r\n\r\n## What changes are included in this PR?\r\n\r\nAdd note and example of using  `COPY (SELECT ...)` and define what DDL/DML are\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nbetter docs\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7388/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7388/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7387", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7387/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7387/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7387/events", "html_url": "https://github.com/apache/datafusion/pull/7387", "id": 1863598772, "node_id": "PR_kwDOFWSkxs5YnL7f", "number": 7387, "title": "Update sqlparser requirement from 0.36.1 to 0.37.0", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T15:49:35Z", "updated_at": "2023-08-23T18:04:32Z", "closed_at": "2023-08-23T17:31:24Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7387", "html_url": "https://github.com/apache/datafusion/pull/7387", "diff_url": "https://github.com/apache/datafusion/pull/7387.diff", "patch_url": "https://github.com/apache/datafusion/pull/7387.patch", "merged_at": "2023-08-23T17:31:24Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7386.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n[dependabot](https://github.com/apps/dependabot) failed to update sqlparser due to some upstream changes.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nUpdate sqlparser requirement from 0.36.1 to 0.37.0\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7387/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7385", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7385/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7385/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7385/events", "html_url": "https://github.com/apache/datafusion/pull/7385", "id": 1862757634, "node_id": "PR_kwDOFWSkxs5YkUah", "number": 7385, "title": "fix: inconsistent scalar types in `DistinctArrayAggAccumulator` state", "user": {"login": "korowa", "id": 13005055, "node_id": "MDQ6VXNlcjEzMDA1MDU1", "avatar_url": "https://avatars.githubusercontent.com/u/13005055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/korowa", "html_url": "https://github.com/korowa", "followers_url": "https://api.github.com/users/korowa/followers", "following_url": "https://api.github.com/users/korowa/following{/other_user}", "gists_url": "https://api.github.com/users/korowa/gists{/gist_id}", "starred_url": "https://api.github.com/users/korowa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/korowa/subscriptions", "organizations_url": "https://api.github.com/users/korowa/orgs", "repos_url": "https://api.github.com/users/korowa/repos", "events_url": "https://api.github.com/users/korowa/events{/privacy}", "received_events_url": "https://api.github.com/users/korowa/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T07:42:28Z", "updated_at": "2023-08-24T18:24:58Z", "closed_at": "2023-08-24T18:24:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7385", "html_url": "https://github.com/apache/datafusion/pull/7385", "diff_url": "https://github.com/apache/datafusion/pull/7385.diff", "patch_url": "https://github.com/apache/datafusion/pull/7385.patch", "merged_at": "2023-08-24T18:24:52Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #6743.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nCurrently `DistinctArrayAggAccumulator` stores its state as a set of scalar values and returns it as a single scalar list. The problem is that while merging state, accumulator, instead of adding list elements, simply adds the whole list to the state as a single value, which causes errors while executing `evaluate` on accumulator with merged state.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n`merge_state` now unpacks scalar list input and updates state with its elements.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n- tests for merging `DistinctArrayAggAccumulator`s have been added, \r\n- check for successful execution of `array_agg(distinct col)` has been added to sqllogictests\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n`array_agg(distinct)` should not fail in case query execution requires merging accumulator states (e. g. aggregation over multiple partitions)\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7385/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7385/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7384", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7384/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7384/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7384/events", "html_url": "https://github.com/apache/datafusion/pull/7384", "id": 1862750198, "node_id": "PR_kwDOFWSkxs5YkSzH", "number": 7384, "title": "Bug-fix/next_value() of Min/Max Scalar Values", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-23T07:37:56Z", "updated_at": "2023-08-23T19:10:07Z", "closed_at": "2023-08-23T18:20:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7384", "html_url": "https://github.com/apache/datafusion/pull/7384", "diff_url": "https://github.com/apache/datafusion/pull/7384.diff", "patch_url": "https://github.com/apache/datafusion/pull/7384.patch", "merged_at": "2023-08-23T18:20:05Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\nWhy are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\nExplaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.\r\n\r\n-->\r\n\r\nIn the interval arithmetic library, there is a function converting open bounds to closed bounds for convenience. This function increments or decrements a bound's value (according to the side of the bound) one step-size of the corresponding datatype. However, some buggy cases have been realized:\r\n\r\n1. When a floating point value is 0 and it is tried to be decremented\r\n2. When a value is tried to be incremented when it is at its maximum\r\n3. When a value is tried to be decremented when it is at its minimum\r\n\r\nAfter the fix, when an integer is at its maximum/minimu, it remains the same. When a floating value is at its maximum/minimum, it becomes infinity/negative infinity.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nThere are minor changes in the implementation of next_value() function. The existing next_up()/next_down() functions are used for floating point values, while integers are checked firstly if they are at min/max.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7384/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7378", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7378/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7378/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7378/events", "html_url": "https://github.com/apache/datafusion/pull/7378", "id": 1862182436, "node_id": "PR_kwDOFWSkxs5YiZVt", "number": 7378, "title": "Fix IN expr for NaN", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T20:45:04Z", "updated_at": "2023-08-24T12:21:01Z", "closed_at": "2023-08-24T12:21:00Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7378", "html_url": "https://github.com/apache/datafusion/pull/7378", "diff_url": "https://github.com/apache/datafusion/pull/7378.diff", "patch_url": "https://github.com/apache/datafusion/pull/7378.patch", "merged_at": "2023-08-24T12:21:00Z"}, "body": "## Which issue does this PR close?\r\nCloses #7377 \r\n\r\n## Rationale for this change\r\nThis PR fixes an issue that `'NaN'::double in ('NaN'::double)` is evaluated as `false`, which is inconsistent with the result of `'NaN'::double = 'NaN'::double`.\r\n\r\n## What changes are included in this PR?\r\nThe root cause is that equality is evaluated using `PartialEq::eq`. So the fix is using `to_bits` for equality check for float values like as `ScalarValue::Float64` does.\r\n\r\nNOTE: This issue doesn't happen when `Simplifier` simplifies `IN` expr like\r\n```\r\na IN (x, y, z) -> a = x OR a = y OR a = z\r\n```\r\n\r\n## Are these changes tested?\r\nModified an existing test.\r\n\r\n## Are there any user-facing changes?\r\nYes, but this change is for correctness.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7378/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7378/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7376", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7376/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7376/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7376/events", "html_url": "https://github.com/apache/datafusion/pull/7376", "id": 1861867557, "node_id": "PR_kwDOFWSkxs5YhT_V", "number": 7376, "title": "Specialize Median Accumulator", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T17:03:07Z", "updated_at": "2023-08-23T08:01:45Z", "closed_at": "2023-08-23T08:01:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7376", "html_url": "https://github.com/apache/datafusion/pull/7376", "diff_url": "https://github.com/apache/datafusion/pull/7376.diff", "patch_url": "https://github.com/apache/datafusion/pull/7376.patch", "merged_at": "2023-08-23T08:01:45Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #6842 \r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7376/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7376/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7375", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7375/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7375/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7375/events", "html_url": "https://github.com/apache/datafusion/pull/7375", "id": 1861775554, "node_id": "PR_kwDOFWSkxs5Yg_mr", "number": 7375, "title": "Use datum arithmetic scalar value", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-22T16:08:48Z", "updated_at": "2023-08-24T11:44:03Z", "closed_at": "2023-08-24T11:44:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7375", "html_url": "https://github.com/apache/datafusion/pull/7375", "diff_url": "https://github.com/apache/datafusion/pull/7375.diff", "patch_url": "https://github.com/apache/datafusion/pull/7375.patch", "merged_at": "2023-08-24T11:44:03Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #7353 \r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis avoids duplicated arithmetic logic, and moves us closer to replacing the custom ScalarValue logic with upstream kernels (#7353)\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\nThe upstream kernels have a couple of differences compared to the existing impls:\r\n\r\n* Null + v = Null, whereas previously it was v\r\n* Decimal precision is correctly updated\r\n* Heterogeneous interval arithmetic is not supported, this is instead the responsibility of the type coercion machinery\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7375/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7374", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7374/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7374/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7374/events", "html_url": "https://github.com/apache/datafusion/pull/7374", "id": 1861688042, "node_id": "PR_kwDOFWSkxs5Ygsaw", "number": 7374, "title": "Remove redundant type check in Avg", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-22T15:18:12Z", "updated_at": "2023-08-22T16:25:04Z", "closed_at": "2023-08-22T16:24:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7374", "html_url": "https://github.com/apache/datafusion/pull/7374", "diff_url": "https://github.com/apache/datafusion/pull/7374.diff", "patch_url": "https://github.com/apache/datafusion/pull/7374.patch", "merged_at": "2023-08-22T16:24:48Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nRemoved redundant type check in `Avg`. When I did a post-merging review of #7369, the old type check looks redundant as its type coercion is now explicit.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7374/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7372", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7372/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7372/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7372/events", "html_url": "https://github.com/apache/datafusion/pull/7372", "id": 1861566877, "node_id": "PR_kwDOFWSkxs5YgSTz", "number": 7372, "title": "Prepare 30.0.0 release", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-22T14:18:49Z", "updated_at": "2023-08-25T17:08:36Z", "closed_at": "2023-08-23T18:49:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7372", "html_url": "https://github.com/apache/datafusion/pull/7372", "diff_url": "https://github.com/apache/datafusion/pull/7372.diff", "patch_url": "https://github.com/apache/datafusion/pull/7372.patch", "merged_at": "2023-08-23T18:49:27Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nTime for a new release\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n- Bump version\r\n- [Changelog](https://github.com/andygrove/arrow-datafusion/blob/prep-30/dev/changelog/30.0.0.md)\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7372/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7372/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7371", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7371/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7371/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7371/events", "html_url": "https://github.com/apache/datafusion/pull/7371", "id": 1861428854, "node_id": "PR_kwDOFWSkxs5Yfz-i", "number": 7371, "title": "Optimize `Unnest` and implement `skip_nulls=true` if specified", "user": {"login": "smiklos", "id": 3218812, "node_id": "MDQ6VXNlcjMyMTg4MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3218812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smiklos", "html_url": "https://github.com/smiklos", "followers_url": "https://api.github.com/users/smiklos/followers", "following_url": "https://api.github.com/users/smiklos/following{/other_user}", "gists_url": "https://api.github.com/users/smiklos/gists{/gist_id}", "starred_url": "https://api.github.com/users/smiklos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smiklos/subscriptions", "organizations_url": "https://api.github.com/users/smiklos/orgs", "repos_url": "https://api.github.com/users/smiklos/repos", "events_url": "https://api.github.com/users/smiklos/events{/privacy}", "received_events_url": "https://api.github.com/users/smiklos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-22T13:07:16Z", "updated_at": "2023-08-24T19:55:53Z", "closed_at": "2023-08-24T13:39:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7371", "html_url": "https://github.com/apache/datafusion/pull/7371", "diff_url": "https://github.com/apache/datafusion/pull/7371.diff", "patch_url": "https://github.com/apache/datafusion/pull/7371.patch", "merged_at": "2023-08-24T13:39:29Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nrelated to #7087.\r\nCloses #6961\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis implements the new preserve_nulls option in unnest exec. \r\nI've also adjusted the code to avoid copying and rely only on the take kernel as needed.\r\n\r\nTodo\r\n\r\n- [ ] Set preserve_nulls to false -> If we really want align with clickhouse etc. \r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\nThe code will now respect the flag `preserve_nulls`  in `UnnestOptions`. \r\nThis way we can also make the sql api consistent with Clickhouse/duckdb while allowing dataframe users to choose between implementations. \r\n\r\n\r\n## Are these changes tested?\r\nYes, added some new tests as well. \r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\nNo\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7371/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7371/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7369", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7369/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7369/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7369/events", "html_url": "https://github.com/apache/datafusion/pull/7369", "id": 1861269428, "node_id": "PR_kwDOFWSkxs5YfRAV", "number": 7369, "title": "Make `SUM` and `AVG` Aggregate Type Coercion Explicit", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T11:34:19Z", "updated_at": "2023-08-22T14:16:52Z", "closed_at": "2023-08-22T14:16:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7369", "html_url": "https://github.com/apache/datafusion/pull/7369", "diff_url": "https://github.com/apache/datafusion/pull/7369.diff", "patch_url": "https://github.com/apache/datafusion/pull/7369.patch", "merged_at": "2023-08-22T14:16:52Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nCurrently various accumulators contain internal logic to coerce inputs to supported types, this has a few issues:\r\n\r\n* The cast is hidden from the plan\r\n    * This prevents the optimizer from seeing it, potentially resulting in redundant casts\r\n    * Hides the cast from the user which makes it not immediately obvious what is occurring\r\n* Complicates specializing the accumulators as the input types aren't defined (#6842)\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7369/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7368", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7368/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7368/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7368/events", "html_url": "https://github.com/apache/datafusion/pull/7368", "id": 1861213314, "node_id": "PR_kwDOFWSkxs5YfEme", "number": 7368, "title": "Support `REPLACE` SQL alias syntax", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018889, "node_id": "MDU6TGFiZWwyOTIzMDE4ODg5", "url": "https://api.github.com/repos/apache/datafusion/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T10:58:31Z", "updated_at": "2023-09-08T13:56:52Z", "closed_at": "2023-08-23T18:17:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7368", "html_url": "https://github.com/apache/datafusion/pull/7368", "diff_url": "https://github.com/apache/datafusion/pull/7368.diff", "patch_url": "https://github.com/apache/datafusion/pull/7368.patch", "merged_at": "2023-08-23T18:17:05Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7367.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThere are 2 different REPLACE usages in some other platforms: One of them is like:\r\n```\r\nSELECT product_id, \r\nREPLACE(product_name, 'OldBrand', 'NewBrand') AS modified_product_name,\r\nprice\r\nFROM products;\r\n```\r\nwhich already works successfully, and the second one is like:\r\n```\r\nSELECT * REPLACE (price*2 AS price) FROM products \r\n```\r\n_for more examples: https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax#select_replace_\r\nwhich is parsed and put into `WildcardAdditionalOptions`, but not evaluated. This PR completes the second version of REPLACE usage.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nAfter expanding wildcards, replace option in the `SelectItem` is checked. If it is Some, the corresponding expression is found and replaced with the new expression, but the name of that column is kept the same, by providing an alias as the original column name.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, with .slt tests\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7368/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7366", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7366/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7366/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7366/events", "html_url": "https://github.com/apache/datafusion/pull/7366", "id": 1861120933, "node_id": "PR_kwDOFWSkxs5YewS1", "number": 7366, "title": "Merge hash table implementations and remove leftover utilities", "user": {"login": "metesynnada", "id": 100111937, "node_id": "U_kgDOBfeWQQ", "avatar_url": "https://avatars.githubusercontent.com/u/100111937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metesynnada", "html_url": "https://github.com/metesynnada", "followers_url": "https://api.github.com/users/metesynnada/followers", "following_url": "https://api.github.com/users/metesynnada/following{/other_user}", "gists_url": "https://api.github.com/users/metesynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/metesynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metesynnada/subscriptions", "organizations_url": "https://api.github.com/users/metesynnada/orgs", "repos_url": "https://api.github.com/users/metesynnada/repos", "events_url": "https://api.github.com/users/metesynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/metesynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-22T10:05:22Z", "updated_at": "2023-08-23T20:22:10Z", "closed_at": "2023-08-23T19:47:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7366", "html_url": "https://github.com/apache/datafusion/pull/7366", "diff_url": "https://github.com/apache/datafusion/pull/7366.diff", "patch_url": "https://github.com/apache/datafusion/pull/7366.patch", "merged_at": "2023-08-23T19:47:37Z"}, "body": "## Which issue does this PR close?\r\n\r\nContinue on https://github.com/apache/arrow-datafusion/pull/6679.\r\n\r\n## Rationale for this change\r\n\r\nThe current implementation of the `JoinHashMap` and `SymmetricJoinHashMap` types could benefit from being more generic and flexible. Specifically, the ability to support different types of list data structures for chaining, as well as handling resizing in a more idiomatic and efficient manner, would be advantageous. This PR introduces the `JoinHashMapType` trait and implements it for both `JoinHashMap` and `PruningJoinHashMap`, which allows for more code reuse and a clearer separation of concerns. \r\n\r\nIn this PR, Several unused hash join utilities are removed. Also, we can introduce a vectorized implementation of `SymmetricHashJoin` that includes hash collision checks.\r\n\r\n## What changes are included in this PR?\r\n\r\n- Added a `JoinHashMapType` trait with methods for handling the mutable map and mutable list, as well as a method `as_any_mut` for dynamic downcasting.\r\n- Implemented the `JoinHashMapType` trait for both `JoinHashMap` and `PruningJoinHashMap`.\r\n- Updated the `update_hash` function to use the `JoinHashMapType` trait and only resize the list in the case of `PruningJoinHashMap`.\r\n- Updated the `build_equal_condition_join_indices` function to use the JoinHashMapType trait and introduced an offset parameter.\r\n- Added inline comments and docstrings for better readability and documentation of the code.\r\n\r\nI have removed `smallvec` completely from the code, but I am unsure whether or not to remove it from Cargo.toml.\r\n## Are these changes tested?\r\n\r\nYes, the changes are covered by the existing tests. No new tests were required as the new implementation preserves the existing functionality. All tests passed successfully after the changes were applied.\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo, the changes made in this PR are internal and do not affect the public API or the functionality of the crate.\r\n\r\ncc @Dandandan ", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7366/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7366/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7364", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7364/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7364/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7364/events", "html_url": "https://github.com/apache/datafusion/pull/7364", "id": 1860810572, "node_id": "PR_kwDOFWSkxs5YdrZX", "number": 7364, "title": "Projection Order Propagation", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-22T07:40:57Z", "updated_at": "2023-08-31T07:31:06Z", "closed_at": "2023-08-23T22:01:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7364", "html_url": "https://github.com/apache/datafusion/pull/7364", "diff_url": "https://github.com/apache/datafusion/pull/7364.diff", "patch_url": "https://github.com/apache/datafusion/pull/7364.patch", "merged_at": "2023-08-23T22:01:07Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7363.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n`ProjectionExec` cannot make the orderings of the non-column expressions propagate. However, we can find the PhysicalSortExpr of the expressions which are subject to projection, and use them to preserve ordering information.\r\n\r\nThis is the second step of a three-step improvement process. The first [one](https://github.com/apache/arrow-datafusion/pull/7296) addressed some bug fixes, and the third one will focus on `ScalarFunctionExpr`'s. With the assistance of these PRs, we can propagate order information over projections for various types of PhysicalExpr's.\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n1) `ProjectionExec` holds the information of orderings of its projections.\r\n2) If the output ordering gets lost after the projection (since the column of input output ordering does not emerge in the new projection), new output ordering can be set over newly projected non-column expressions.\r\n3) Non-column projections are added to ordering equivalence classes.\r\n4) `PhysicalExpr`'s have a new method `get_ordering()`, which returns the `SortProperties` of the expression.\r\nWe need to be able to differentiate a non-ordered column and a literal value, so such a struct is added. \r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes.\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7364/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7364/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7362", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7362/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7362/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7362/events", "html_url": "https://github.com/apache/datafusion/pull/7362", "id": 1860703096, "node_id": "PR_kwDOFWSkxs5YdT12", "number": 7362, "title": "DML documentation", "user": {"login": "spaydar", "id": 29551413, "node_id": "MDQ6VXNlcjI5NTUxNDEz", "avatar_url": "https://avatars.githubusercontent.com/u/29551413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spaydar", "html_url": "https://github.com/spaydar", "followers_url": "https://api.github.com/users/spaydar/followers", "following_url": "https://api.github.com/users/spaydar/following{/other_user}", "gists_url": "https://api.github.com/users/spaydar/gists{/gist_id}", "starred_url": "https://api.github.com/users/spaydar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spaydar/subscriptions", "organizations_url": "https://api.github.com/users/spaydar/orgs", "repos_url": "https://api.github.com/users/spaydar/repos", "events_url": "https://api.github.com/users/spaydar/events{/privacy}", "received_events_url": "https://api.github.com/users/spaydar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-22T06:39:34Z", "updated_at": "2023-08-23T17:50:24Z", "closed_at": "2023-08-23T17:35:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7362", "html_url": "https://github.com/apache/datafusion/pull/7362", "diff_url": "https://github.com/apache/datafusion/pull/7362.diff", "patch_url": "https://github.com/apache/datafusion/pull/7362.patch", "merged_at": "2023-08-23T17:35:11Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7319.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, I can successfully build and view documentation locally as per [\"Build & Preview\" instructions](https://github.com/apache/arrow-datafusion/blob/main/docs/README.md#build--preview)\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7362/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7361", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7361/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7361/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7361/events", "html_url": "https://github.com/apache/datafusion/pull/7361", "id": 1860385780, "node_id": "PR_kwDOFWSkxs5YcO6m", "number": 7361, "title": "Add `exec_err!` error macro", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T01:13:59Z", "updated_at": "2023-08-23T17:28:57Z", "closed_at": "2023-08-23T17:28:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7361", "html_url": "https://github.com/apache/datafusion/pull/7361", "diff_url": "https://github.com/apache/datafusion/pull/7361.diff", "patch_url": "https://github.com/apache/datafusion/pull/7361.patch", "merged_at": "2023-08-23T17:28:57Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/7360.\r\n\r\n## Rationale for this change\r\n\r\nAdd `exec_err!` error macro to replace `DatafusionError::Execution` with more concise code and make error handling in single place \r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7361/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7358", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7358/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7358/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7358/events", "html_url": "https://github.com/apache/datafusion/pull/7358", "id": 1860311044, "node_id": "PR_kwDOFWSkxs5Yb-7O", "number": 7358, "title": "Specialize Avg and Sum accumulators (#6842)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-21T23:25:55Z", "updated_at": "2023-08-23T08:17:36Z", "closed_at": "2023-08-23T08:17:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7358", "html_url": "https://github.com/apache/datafusion/pull/7358", "diff_url": "https://github.com/apache/datafusion/pull/7358.diff", "patch_url": "https://github.com/apache/datafusion/pull/7358.patch", "merged_at": "2023-08-23T08:17:36Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #6842\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis makes it easier to see what is going on, and avoids using ScalarValue arithmetic\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7358/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7358/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7355", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7355/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7355/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7355/events", "html_url": "https://github.com/apache/datafusion/pull/7355", "id": 1859969790, "node_id": "PR_kwDOFWSkxs5Yazia", "number": 7355, "title": "Change error type of invalid argument to PlanError rather than InternalError, remove misleading comments", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-21T19:08:00Z", "updated_at": "2023-08-23T16:35:22Z", "closed_at": "2023-08-23T16:35:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7355", "html_url": "https://github.com/apache/datafusion/pull/7355", "diff_url": "https://github.com/apache/datafusion/pull/7355.diff", "patch_url": "https://github.com/apache/datafusion/pull/7355.patch", "merged_at": "2023-08-23T16:35:17Z"}, "body": "## Which issue does this PR close?\r\nrelated to #6108 and https://github.com/apache/arrow-datafusion/issues/7326\r\nrelated to https://github.com/apache/arrow-datafusion/pull/7339/\r\n\r\n## Rationale for this change\r\nInspired by @Weijun-H 's change in https://github.com/apache/arrow-datafusion/pull/7339 I was trying to clean up a comment I saw left over from https://github.com/apache/arrow-datafusion/pull/7339 I realized that not only are the comments in the rest of this file misleading the same bug also applied to several other functions. \r\n\r\nSpecifically, despite the comment claims that \"this should have been covered earlier\" it is clearly not and some of these error paths are directly user visible due to invalid queries (and thus should be plan errors, not internal errors). For example\r\n\r\n```\r\nDataFusion CLI v29.0.0\r\n\u276f select encode(1,2);\r\nInternal error: The encode function can only accept utf8 or binary.. This was likely caused by a bug in DataFusion's code and we would welcome that you file an bug report in our issue tracker\r\n\u276f select array_concat(1,2);\r\nInternal error: The array_concat function can only accept list as the args.. This was likely caused by a bug in DataFusion's code and we would welcome that you file an bug report in our issue tracker\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Change to DataFusionError::Plan\r\n2. Update tests\r\n3. Update comments\r\n\r\n\r\n## Are these changes tested?\r\nYes\r\n\r\n## Are there any user-facing changes?\r\nyes, better error messages\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7355/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7355/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7351", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7351/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7351/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7351/events", "html_url": "https://github.com/apache/datafusion/pull/7351", "id": 1859889800, "node_id": "PR_kwDOFWSkxs5Yah-P", "number": 7351, "title": "Deprecate ScalarValue bitor, bitand, and bitxor (#6842)", "user": {"login": "tustvold", "id": 1781103, "node_id": "MDQ6VXNlcjE3ODExMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1781103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tustvold", "html_url": "https://github.com/tustvold", "followers_url": "https://api.github.com/users/tustvold/followers", "following_url": "https://api.github.com/users/tustvold/following{/other_user}", "gists_url": "https://api.github.com/users/tustvold/gists{/gist_id}", "starred_url": "https://api.github.com/users/tustvold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tustvold/subscriptions", "organizations_url": "https://api.github.com/users/tustvold/orgs", "repos_url": "https://api.github.com/users/tustvold/repos", "events_url": "https://api.github.com/users/tustvold/events{/privacy}", "received_events_url": "https://api.github.com/users/tustvold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-21T18:08:10Z", "updated_at": "2023-08-21T21:04:23Z", "closed_at": "2023-08-21T21:04:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7351", "html_url": "https://github.com/apache/datafusion/pull/7351", "diff_url": "https://github.com/apache/datafusion/pull/7351.diff", "patch_url": "https://github.com/apache/datafusion/pull/7351.patch", "merged_at": "2023-08-21T21:04:22Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of #6842\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7351/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7348", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7348/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7348/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7348/events", "html_url": "https://github.com/apache/datafusion/pull/7348", "id": 1858929059, "node_id": "PR_kwDOFWSkxs5YXN7X", "number": 7348, "title": "Implement `array_pop_back` function ", "user": {"login": "tanruixiang", "id": 34568378, "node_id": "MDQ6VXNlcjM0NTY4Mzc4", "avatar_url": "https://avatars.githubusercontent.com/u/34568378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanruixiang", "html_url": "https://github.com/tanruixiang", "followers_url": "https://api.github.com/users/tanruixiang/followers", "following_url": "https://api.github.com/users/tanruixiang/following{/other_user}", "gists_url": "https://api.github.com/users/tanruixiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanruixiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanruixiang/subscriptions", "organizations_url": "https://api.github.com/users/tanruixiang/orgs", "repos_url": "https://api.github.com/users/tanruixiang/repos", "events_url": "https://api.github.com/users/tanruixiang/events{/privacy}", "received_events_url": "https://api.github.com/users/tanruixiang/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-21T09:01:52Z", "updated_at": "2023-08-23T16:35:48Z", "closed_at": "2023-08-23T16:35:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7348", "html_url": "https://github.com/apache/datafusion/pull/7348", "diff_url": "https://github.com/apache/datafusion/pull/7348.diff", "patch_url": "https://github.com/apache/datafusion/pull/7348.patch", "merged_at": "2023-08-23T16:35:43Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #6997 .\r\n\r\n## Rationale for this change\r\nsee #6997 \r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nyes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7348/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7348/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7346", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7346/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7346/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7346/events", "html_url": "https://github.com/apache/datafusion/pull/7346", "id": 1858766958, "node_id": "PR_kwDOFWSkxs5YWqoZ", "number": 7346, "title": "fix: union_distinct shouldn't remove child distinct", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-21T07:23:57Z", "updated_at": "2023-08-23T18:49:58Z", "closed_at": "2023-08-23T18:49:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7346", "html_url": "https://github.com/apache/datafusion/pull/7346", "diff_url": "https://github.com/apache/datafusion/pull/7346.diff", "patch_url": "https://github.com/apache/datafusion/pull/7346.patch", "merged_at": "2023-08-23T18:49:58Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\noriginal code will remove distinct when they are children of union.\r\n\r\nBut we should't remove them, because\r\n\r\n1. distinct can decrease cardinaty/rowcount of union input\r\n2. sometime distinct can pushdown, such as distinct can pushdown through join.\r\n3. even if we want to remove distinct, we should create rule instead of eliminate distinct in plan builder\r\n\r\n## What changes are included in this PR?\r\n\r\nunion_distinct shouldn't remove child distinct\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n4. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7346/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7341", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7341/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7341/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7341/events", "html_url": "https://github.com/apache/datafusion/pull/7341", "id": 1857699783, "node_id": "PR_kwDOFWSkxs5YTQmD", "number": 7341, "title": "minor: fix doc/typo", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-19T12:41:50Z", "updated_at": "2023-08-19T17:57:35Z", "closed_at": "2023-08-19T17:57:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7341", "html_url": "https://github.com/apache/datafusion/pull/7341", "diff_url": "https://github.com/apache/datafusion/pull/7341.diff", "patch_url": "https://github.com/apache/datafusion/pull/7341.patch", "merged_at": "2023-08-19T17:57:28Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7341/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7341/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7340", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7340/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7340/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7340/events", "html_url": "https://github.com/apache/datafusion/pull/7340", "id": 1857578303, "node_id": "PR_kwDOFWSkxs5YS4iM", "number": 7340, "title": "Add `not_impl_err` error macro", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-19T05:32:58Z", "updated_at": "2023-08-21T19:07:28Z", "closed_at": "2023-08-21T19:07:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7340", "html_url": "https://github.com/apache/datafusion/pull/7340", "diff_url": "https://github.com/apache/datafusion/pull/7340.diff", "patch_url": "https://github.com/apache/datafusion/pull/7340.patch", "merged_at": "2023-08-21T19:07:27Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/pull/6740 https://github.com/apache/arrow-datafusion/pull/7115\r\n\r\n## Rationale for this change\r\nAdd `not_impl_err!` error macro to replace `DatafusionError::NotImplemented` with more concise code and make error handling in single place\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7340/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7340/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7339", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7339/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7339/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7339/events", "html_url": "https://github.com/apache/datafusion/pull/7339", "id": 1857530479, "node_id": "PR_kwDOFWSkxs5YSuKz", "number": 7339, "title": "refine: `substr` error", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-19T03:36:40Z", "updated_at": "2023-08-21T18:54:48Z", "closed_at": "2023-08-21T18:54:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7339", "html_url": "https://github.com/apache/datafusion/pull/7339", "diff_url": "https://github.com/apache/datafusion/pull/7339.diff", "patch_url": "https://github.com/apache/datafusion/pull/7339.patch", "merged_at": "2023-08-21T18:54:48Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7326\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7339/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7336", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7336/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7336/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7336/events", "html_url": "https://github.com/apache/datafusion/pull/7336", "id": 1857266690, "node_id": "PR_kwDOFWSkxs5YR0iK", "number": 7336, "title": "Refactor: Consolidate OutputFileFormat and FileType into datafusion_common", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-18T20:40:27Z", "updated_at": "2023-08-22T14:13:21Z", "closed_at": "2023-08-22T14:13:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7336", "html_url": "https://github.com/apache/datafusion/pull/7336", "diff_url": "https://github.com/apache/datafusion/pull/7336.diff", "patch_url": "https://github.com/apache/datafusion/pull/7336.patch", "merged_at": "2023-08-22T14:13:14Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7323 \r\n\r\n## Rationale for this change\r\n\r\nOutputFileFormat and FileType offer redundant functionality and the same enumerated file types. To reduce code duplication, FileType is moved to datafusion_common and all references to OutputFileFormat instead refer to FileType.\r\n\r\nI also moved file compression related structs. These are not needed yet outside of core, but will be needed when write options related to compression are implemented. \r\n\r\n## What changes are included in this PR?\r\n\r\nMany imports are updated to reflect the new location of FileType and associated functionality. \r\n\r\n## Are these changes tested?\r\n\r\nYes by existing tests\r\n\r\n## Are there any user-facing changes?\r\n\r\nFileType / GetExt must be imported from datafusion_common now.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7336/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7335", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7335/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7335/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7335/events", "html_url": "https://github.com/apache/datafusion/pull/7335", "id": 1857191324, "node_id": "PR_kwDOFWSkxs5YRkCe", "number": 7335, "title": "Minor: Extract `FileScanConfig` into its own module", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T19:26:39Z", "updated_at": "2023-08-21T18:21:11Z", "closed_at": "2023-08-21T18:21:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7335", "html_url": "https://github.com/apache/datafusion/pull/7335", "diff_url": "https://github.com/apache/datafusion/pull/7335.diff", "patch_url": "https://github.com/apache/datafusion/pull/7335.patch", "merged_at": "2023-08-21T18:21:05Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of #1754  as well as making it easier to work with datafusion code\r\n\r\n\r\n## Rationale for this change\r\n\r\n`core/src/datasource/physical_plan/mod.rs` was large with several unrelated structures in it, making it hard to navigate\r\n\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\nThis PR just moves some of the code  into `file_scan_config.rs` \r\n\r\n\r\n## Are these changes tested?\r\nCovered by existing tests\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7335/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7334", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7334/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7334/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7334/events", "html_url": "https://github.com/apache/datafusion/pull/7334", "id": 1857085484, "node_id": "PR_kwDOFWSkxs5YRMza", "number": 7334, "title": "Minor: Move shared testing code into datafusion_common", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T17:55:38Z", "updated_at": "2023-08-21T18:29:21Z", "closed_at": "2023-08-21T18:29:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7334", "html_url": "https://github.com/apache/datafusion/pull/7334", "diff_url": "https://github.com/apache/datafusion/pull/7334.diff", "patch_url": "https://github.com/apache/datafusion/pull/7334.patch", "merged_at": "2023-08-21T18:29:21Z"}, "body": "## Which issue does this PR close?\r\n\r\nFinal prep for #1754 \r\n\r\n## Rationale for this change\r\n\r\nphysical plan can't depend on code in core when I pull it out\r\n\r\n## What changes are included in this PR?\r\n\r\nmove some functions from `datafusion/core/src/test_util.rs` to `datafusion/common/src/test_util.rs`\r\n\r\n## Are these changes tested?\r\ncovered by existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo -- I left backward compatible `pub use`", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7334/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7333", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7333/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7333/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7333/events", "html_url": "https://github.com/apache/datafusion/pull/7333", "id": 1856987557, "node_id": "PR_kwDOFWSkxs5YQ3ez", "number": 7333, "title": "Add `SQLOptions` for controlling allowed SQL statements, update docs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T16:28:58Z", "updated_at": "2023-08-22T12:43:52Z", "closed_at": "2023-08-22T12:43:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7333", "html_url": "https://github.com/apache/datafusion/pull/7333", "diff_url": "https://github.com/apache/datafusion/pull/7333.diff", "patch_url": "https://github.com/apache/datafusion/pull/7333.patch", "merged_at": "2023-08-22T12:43:48Z"}, "body": "## Which issue does this PR close?\r\nCloses https://github.com/apache/arrow-datafusion/issues/7328\r\nCloses https://github.com/apache/arrow-datafusion/issues/7272\r\n\r\n## Rationale for this change\r\n\r\nSee https://github.com/apache/arrow-datafusion/issues/7328\r\n\r\nBasically it is hard to understand how to control what SQL statements DataFusion will allow\r\n\r\n## What changes are included in this PR?\r\n1. New `SQLOptions` and `SessionContext::sql_with_options` apis\r\n2. Update docs\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNew `SQLOptions` and `SessionContext::sql_with_options` apis\r\n\r\n\r\nEverything should be backwards compatible", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7333/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7331", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7331/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7331/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7331/events", "html_url": "https://github.com/apache/datafusion/pull/7331", "id": 1856730295, "node_id": "PR_kwDOFWSkxs5YP_5O", "number": 7331, "title": "Minor: Improve docstrings for `LogicalPlan`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-18T13:29:35Z", "updated_at": "2023-08-21T18:25:49Z", "closed_at": "2023-08-19T12:23:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7331", "html_url": "https://github.com/apache/datafusion/pull/7331", "diff_url": "https://github.com/apache/datafusion/pull/7331.diff", "patch_url": "https://github.com/apache/datafusion/pull/7331.patch", "merged_at": "2023-08-19T12:23:27Z"}, "body": "## Which issue does this PR close?\r\n\r\nn/a\r\n\r\n## Rationale for this change\r\nWhile working on https://github.com/influxdata/influxdb_iox/pull/8515 I had some questions about the various `LogicalPlan` that I had to look up in the code. I wanted to encode this information as doc comments so I didn't have to do it a second time\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n1. Update docstrings for `LogicalPlan`\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nN/A\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nbetter (hopefully) docs\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7331/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7329", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7329/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7329/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7329/events", "html_url": "https://github.com/apache/datafusion/pull/7329", "id": 1856716671, "node_id": "PR_kwDOFWSkxs5YP86l", "number": 7329, "title": "Minor: add `WriteOp::name` and `DmlStatement::name`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-18T13:20:26Z", "updated_at": "2023-08-23T04:22:00Z", "closed_at": "2023-08-23T04:21:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7329", "html_url": "https://github.com/apache/datafusion/pull/7329", "diff_url": "https://github.com/apache/datafusion/pull/7329.diff", "patch_url": "https://github.com/apache/datafusion/pull/7329.patch", "merged_at": "2023-08-23T04:21:59Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\nWhile working on https://github.com/influxdata/influxdb_iox/pull/8515  I found that DdlStatement had a `name()` but `DmlStatement` did not.  This was annoying and slowed me down (very slightly)\r\n\r\nhttps://docs.rs/datafusion/latest/datafusion/logical_expr/enum.DdlStatement.html#method.name\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Add  `WriteOp::name` and `DmlStatement::name`\r\n\r\n## Are these changes tested?\r\n\r\nExisting coverage\r\n\r\n## Are there any user-facing changes?\r\nNew method\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7329/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7324", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7324/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7324/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7324/events", "html_url": "https://github.com/apache/datafusion/pull/7324", "id": 1855939821, "node_id": "PR_kwDOFWSkxs5YNTf3", "number": 7324, "title": "chore(deps): update tokio requirement to 1.28", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-18T02:21:31Z", "updated_at": "2023-08-18T08:01:56Z", "closed_at": "2023-08-18T08:01:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7324", "html_url": "https://github.com/apache/datafusion/pull/7324", "diff_url": "https://github.com/apache/datafusion/pull/7324.diff", "patch_url": "https://github.com/apache/datafusion/pull/7324.patch", "merged_at": "2023-08-18T08:01:50Z"}, "body": "## Which issue does this PR close?\r\n Discussed in https://github.com/apache/arrow-datafusion/discussions/7253\r\n\r\n\r\n## Rationale for this change\r\nWe are using a new API `JoinSet::spawn_blocking` introduced in tokio 1.28.\r\nhttps://github.com/apache/arrow-datafusion/blob/f2c0100a5a10bf3ea166a1a590d94b8c9b6cf673/datafusion/core/src/physical_plan/stream.rs#L97\r\n\r\ntokio v1.28 [changelog](https://github.com/tokio-rs/tokio/blob/master/tokio/CHANGELOG.md#1280-april-25th-2023):\r\n> 1.28.0 (April 25th, 2023)\r\nAdded\r\ntask: add JoinSet::spawn_blocking and JoinSet::spawn_blocking_on (https://github.com/tokio-rs/tokio/pull/5612)\r\n\r\n\r\nSo it\u2019s better for us to raise the minimum required tokio version to 1.28.\r\nThis can help avoid compilation failures for users.\r\n\r\n## What changes are included in this PR?\r\nBump tokio version\r\n\r\n## Are these changes tested?\r\nN/A\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7324/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7324/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7321", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7321/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7321/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7321/events", "html_url": "https://github.com/apache/datafusion/pull/7321", "id": 1855346393, "node_id": "PR_kwDOFWSkxs5YLS-m", "number": 7321, "title": "Add `internal_err` error macros. Part 2", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-17T16:42:35Z", "updated_at": "2023-08-18T11:24:47Z", "closed_at": "2023-08-18T11:24:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7321", "html_url": "https://github.com/apache/datafusion/pull/7321", "diff_url": "https://github.com/apache/datafusion/pull/7321.diff", "patch_url": "https://github.com/apache/datafusion/pull/7321.patch", "merged_at": "2023-08-18T11:24:46Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/pull/6740 \r\nhttps://github.com/apache/arrow-datafusion/pull/7115\r\nhttps://github.com/apache/arrow-datafusion/pull/7293\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nAdd `internal_err!` error macro to replace `DatafusionError::Internal` with more concise code and make error handling in single place\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nExisting tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7321/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7318", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7318/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7318/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7318/events", "html_url": "https://github.com/apache/datafusion/pull/7318", "id": 1854949631, "node_id": "PR_kwDOFWSkxs5YJ70D", "number": 7318, "title": "Minor: Improve doc comments to datafusion-sql", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-17T12:55:27Z", "updated_at": "2023-08-18T13:30:12Z", "closed_at": "2023-08-18T13:30:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7318", "html_url": "https://github.com/apache/datafusion/pull/7318", "diff_url": "https://github.com/apache/datafusion/pull/7318.diff", "patch_url": "https://github.com/apache/datafusion/pull/7318.patch", "merged_at": "2023-08-18T13:30:11Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n## Rationale for this change\r\n@devinjdangelo  noted that the distinction between the DataFusion SQL parser and sqlparser was somewhat unclear: https://github.com/apache/arrow-datafusion/pull/7291#discussion_r1296541827\r\n\r\n\r\n## What changes are included in this PR?\r\n\r\nUpdate doc comments in the `datafusion-sql` module to try and make the rationale / distinction clearer\r\n\r\n## Are these changes tested?\r\nN/A\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nJust documentation\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7318/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7316", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7316/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7316/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7316/events", "html_url": "https://github.com/apache/datafusion/pull/7316", "id": 1854688542, "node_id": "PR_kwDOFWSkxs5YJCIy", "number": 7316, "title": "Qualify filter fields in the update plan", "user": {"login": "gruuya", "id": 45558892, "node_id": "MDQ6VXNlcjQ1NTU4ODky", "avatar_url": "https://avatars.githubusercontent.com/u/45558892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gruuya", "html_url": "https://github.com/gruuya", "followers_url": "https://api.github.com/users/gruuya/followers", "following_url": "https://api.github.com/users/gruuya/following{/other_user}", "gists_url": "https://api.github.com/users/gruuya/gists{/gist_id}", "starred_url": "https://api.github.com/users/gruuya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gruuya/subscriptions", "organizations_url": "https://api.github.com/users/gruuya/orgs", "repos_url": "https://api.github.com/users/gruuya/repos", "events_url": "https://api.github.com/users/gruuya/events{/privacy}", "received_events_url": "https://api.github.com/users/gruuya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-17T10:05:35Z", "updated_at": "2023-08-17T13:43:34Z", "closed_at": "2023-08-17T13:24:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7316", "html_url": "https://github.com/apache/datafusion/pull/7316", "diff_url": "https://github.com/apache/datafusion/pull/7316.diff", "patch_url": "https://github.com/apache/datafusion/pull/7316.patch", "merged_at": "2023-08-17T13:24:07Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7315.\r\n\r\n## Rationale for this change\r\n\r\nAdd qualifiers to the filter fields of the `UPDATE` statement plan.\r\n\r\n## What changes are included in this PR?\r\n\r\nSee above\r\n\r\n## Are these changes tested?\r\n\r\nExisting tests altered to accordingly.\r\n\r\n## Are there any user-facing changes?\r\n\r\nThe `EXPLAIN` will now show qualified fields for the filter node of the `UPDATE` plan.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7316/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7314", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7314/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7314/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7314/events", "html_url": "https://github.com/apache/datafusion/pull/7314", "id": 1854441529, "node_id": "PR_kwDOFWSkxs5YIMLB", "number": 7314, "title": "Minor: Fix documentation typos for array expressions", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-17T07:36:52Z", "updated_at": "2023-08-17T13:22:38Z", "closed_at": "2023-08-17T13:22:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7314", "html_url": "https://github.com/apache/datafusion/pull/7314", "diff_url": "https://github.com/apache/datafusion/pull/7314.diff", "patch_url": "https://github.com/apache/datafusion/pull/7314.patch", "merged_at": "2023-08-17T13:22:38Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7314/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7313", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7313/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7313/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7313/events", "html_url": "https://github.com/apache/datafusion/pull/7313", "id": 1854283149, "node_id": "PR_kwDOFWSkxs5YHpw0", "number": 7313, "title": "feat: `array-empty`", "user": {"login": "Weijun-H", "id": 20267695, "node_id": "MDQ6VXNlcjIwMjY3Njk1", "avatar_url": "https://avatars.githubusercontent.com/u/20267695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Weijun-H", "html_url": "https://github.com/Weijun-H", "followers_url": "https://api.github.com/users/Weijun-H/followers", "following_url": "https://api.github.com/users/Weijun-H/following{/other_user}", "gists_url": "https://api.github.com/users/Weijun-H/gists{/gist_id}", "starred_url": "https://api.github.com/users/Weijun-H/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Weijun-H/subscriptions", "organizations_url": "https://api.github.com/users/Weijun-H/orgs", "repos_url": "https://api.github.com/users/Weijun-H/repos", "events_url": "https://api.github.com/users/Weijun-H/events{/privacy}", "received_events_url": "https://api.github.com/users/Weijun-H/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-17T05:34:22Z", "updated_at": "2023-08-22T16:45:53Z", "closed_at": "2023-08-22T16:45:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7313", "html_url": "https://github.com/apache/datafusion/pull/7313", "diff_url": "https://github.com/apache/datafusion/pull/7313.diff", "patch_url": "https://github.com/apache/datafusion/pull/7313.patch", "merged_at": "2023-08-22T16:45:47Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7290\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7313/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7313/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7312", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7312/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7312/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7312/events", "html_url": "https://github.com/apache/datafusion/pull/7312", "id": 1853701293, "node_id": "PR_kwDOFWSkxs5YFtp_", "number": 7312, "title": "Document and `scratch` directory for sqllogictest and make test specific", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-16T18:14:32Z", "updated_at": "2023-08-24T10:25:04Z", "closed_at": "2023-08-24T10:25:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7312", "html_url": "https://github.com/apache/datafusion/pull/7312", "diff_url": "https://github.com/apache/datafusion/pull/7312.diff", "patch_url": "https://github.com/apache/datafusion/pull/7312.patch", "merged_at": "2023-08-24T10:25:03Z"}, "body": "## Which issue does this PR close?\r\nFollow on to https://github.com/apache/arrow-datafusion/pull/7283\r\n\r\n## Rationale for this change\r\n\r\n@devinjdangelo added a neat `scratch` concept to sqllogictest but it is not yet documented. See discussion at https://github.com/apache/arrow-datafusion/pull/7283#discussion_r1294546967\r\n\r\n## What changes are included in this PR?\r\n1. Change scratch dir to be test name specific (as the tests are run in parallel)\r\n2. Update `copy.slt` to use the specific direcotry\r\n1. Document `scratch` dir in README\r\n \r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7312/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7312/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7311", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7311/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7311/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7311/events", "html_url": "https://github.com/apache/datafusion/pull/7311", "id": 1853661261, "node_id": "PR_kwDOFWSkxs5YFk8y", "number": 7311, "title": "Minor: Followup tasks for `nanvl`", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-16T17:42:34Z", "updated_at": "2023-08-16T18:52:10Z", "closed_at": "2023-08-16T18:52:09Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7311", "html_url": "https://github.com/apache/datafusion/pull/7311", "diff_url": "https://github.com/apache/datafusion/pull/7311.diff", "patch_url": "https://github.com/apache/datafusion/pull/7311.patch", "merged_at": "2023-08-16T18:52:09Z"}, "body": "Closes #7310 \r\n\r\n## Rationale for this change\r\n`nanvl` was added in #7171 but some additional change needed.\r\nOne is adding an entry to the function list table in `user-guide/expressions.md` for `nanvl`.\r\nAnother is modifying the error message in tests newly added to `math_expressions.rs`.\r\n\r\n## What changes are included in this PR?\r\nThis PR added an entry to the function list table for `nanvl` and fix the error message in `math_expressions.rs`.\r\n\r\n## Are these changes tested?\r\nExisting tests pass with `cargo test --workspace`.\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7311/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7311/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7309", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7309/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7309/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7309/events", "html_url": "https://github.com/apache/datafusion/pull/7309", "id": 1853545647, "node_id": "PR_kwDOFWSkxs5YFLw7", "number": 7309, "title": "Minor: Remove stubbed out redundant Execution Plan section of library user guide", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2923018882, "node_id": "MDU6TGFiZWwyOTIzMDE4ODgy", "url": "https://api.github.com/repos/apache/datafusion/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-16T16:13:27Z", "updated_at": "2023-08-17T12:29:29Z", "closed_at": "2023-08-17T12:29:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7309", "html_url": "https://github.com/apache/datafusion/pull/7309", "diff_url": "https://github.com/apache/datafusion/pull/7309.diff", "patch_url": "https://github.com/apache/datafusion/pull/7309.patch", "merged_at": "2023-08-17T12:29:28Z"}, "body": "\r\n## Which issue does this PR close?\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/issues/7014\r\n\r\n## Rationale for this change\r\nWhile working to organize https://github.com/apache/arrow-datafusion/issues/7014 I noticed that this section was redundant with the previous section (\"extend with your own operator\")\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\nremove redundant stub\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7309/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7300", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7300/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7300/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7300/events", "html_url": "https://github.com/apache/datafusion/pull/7300", "id": 1853127469, "node_id": "PR_kwDOFWSkxs5YDwlZ", "number": 7300, "title": "Fix Unnest for array aggregations.", "user": {"login": "vincev", "id": 10183380, "node_id": "MDQ6VXNlcjEwMTgzMzgw", "avatar_url": "https://avatars.githubusercontent.com/u/10183380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincev", "html_url": "https://github.com/vincev", "followers_url": "https://api.github.com/users/vincev/followers", "following_url": "https://api.github.com/users/vincev/following{/other_user}", "gists_url": "https://api.github.com/users/vincev/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincev/subscriptions", "organizations_url": "https://api.github.com/users/vincev/orgs", "repos_url": "https://api.github.com/users/vincev/repos", "events_url": "https://api.github.com/users/vincev/events{/privacy}", "received_events_url": "https://api.github.com/users/vincev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-16T12:21:48Z", "updated_at": "2023-08-16T18:10:34Z", "closed_at": "2023-08-16T17:39:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7300", "html_url": "https://github.com/apache/datafusion/pull/7300", "diff_url": "https://github.com/apache/datafusion/pull/7300.diff", "patch_url": "https://github.com/apache/datafusion/pull/7300.patch", "merged_at": "2023-08-16T17:39:15Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7299.\r\n\r\n## Rationale for this change\r\n\r\nWhen unnesting a list array created by `array_agg` aggregation fails with error:\r\n\r\n```\r\nArrowError(ComputeError(\"concat requires input of at least one array\"))\r\n```\r\n\r\nThis PR adds code to prevent `concat` from being called with an empty array during unnesting.\r\n\r\n## What changes are included in this PR?\r\n\r\nThis PR adds code to prevent `concat` from being called with an empty array during unnesting.\r\n\r\nThis PR also removes the `list_lengths` workaround fixed in  [arrow #4517](https://github.com/apache/arrow-rs/issues/4517).\r\n\r\n## Are these changes tested?\r\n\r\nYes added a test for the failing scenario.\r\n\r\n\r\n## Are there any user-facing changes?\r\n\r\nNo", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7300/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7300/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7296", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7296/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7296/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7296/events", "html_url": "https://github.com/apache/datafusion/pull/7296", "id": 1852618499, "node_id": "PR_kwDOFWSkxs5YCCJE", "number": 7296, "title": "Bug-fix / Join Output Orderings", "user": {"login": "berkaysynnada", "id": 124376117, "node_id": "U_kgDOB2nUNQ", "avatar_url": "https://avatars.githubusercontent.com/u/124376117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/berkaysynnada", "html_url": "https://github.com/berkaysynnada", "followers_url": "https://api.github.com/users/berkaysynnada/followers", "following_url": "https://api.github.com/users/berkaysynnada/following{/other_user}", "gists_url": "https://api.github.com/users/berkaysynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/berkaysynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/berkaysynnada/subscriptions", "organizations_url": "https://api.github.com/users/berkaysynnada/orgs", "repos_url": "https://api.github.com/users/berkaysynnada/repos", "events_url": "https://api.github.com/users/berkaysynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/berkaysynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-16T06:48:27Z", "updated_at": "2023-08-18T13:50:16Z", "closed_at": "2023-08-18T11:16:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7296", "html_url": "https://github.com/apache/datafusion/pull/7296", "diff_url": "https://github.com/apache/datafusion/pull/7296.diff", "patch_url": "https://github.com/apache/datafusion/pull/7296.patch", "merged_at": "2023-08-18T11:16:47Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nOutput orderings and ordering equivalence classes of joins may result in suboptimal ways. There are some minor fixes to clean them up.  \r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nA few util functions are added to normalize orderings and matching sort exprs with columns.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7296/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7295", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7295/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7295/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7295/events", "html_url": "https://github.com/apache/datafusion/pull/7295", "id": 1852330436, "node_id": "PR_kwDOFWSkxs5YBEgp", "number": 7295, "title": "Minor: fix some parquet writer session level defaults", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-16T00:41:40Z", "updated_at": "2023-08-17T12:31:26Z", "closed_at": "2023-08-17T12:31:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7295", "html_url": "https://github.com/apache/datafusion/pull/7295", "diff_url": "https://github.com/apache/datafusion/pull/7295.diff", "patch_url": "https://github.com/apache/datafusion/pull/7295.patch", "merged_at": "2023-08-17T12:31:16Z"}, "body": "## Which issue does this PR close?\r\n\r\nNone\r\n\r\n## Rationale for this change\r\n\r\nI noticed that with the current default parquet writer settings, writing a single row to a parquet file results in a file over 4MB in size. Some of the config values are being set to explicit values (e.g. plain encoding) rather than the default setting in the `parquet` crate which is to leave these values as `None`. \r\n\r\n## What changes are included in this PR?\r\n\r\nThis PR makes the session level default for these values `None` to match the behavior of the `parquet` crate. After doing so, parquet files are now a minimum of 4KB rather than 4MB.\r\n\r\n## Are these changes tested?\r\n\r\nYes by existing tests.\r\n\r\n## Are there any user-facing changes?\r\n\r\nBetter default parquet writer settings\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7295/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7294", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7294/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7294/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7294/events", "html_url": "https://github.com/apache/datafusion/pull/7294", "id": 1852212847, "node_id": "PR_kwDOFWSkxs5YAqj8", "number": 7294, "title": "Add Sqllogictests for INSERT INTO external table", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-15T22:17:15Z", "updated_at": "2023-08-17T13:10:59Z", "closed_at": "2023-08-17T13:10:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7294", "html_url": "https://github.com/apache/datafusion/pull/7294", "diff_url": "https://github.com/apache/datafusion/pull/7294.diff", "patch_url": "https://github.com/apache/datafusion/pull/7294.patch", "merged_at": "2023-08-17T13:10:58Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7228\r\n(^ this issue was closed prematurely with #7276 by accident, but this one should close it for real)\r\n\r\n## Rationale for this change\r\n\r\nExisting Sqllogic tests for insert into only cover memory tables. Expanding this to cover external tables will improve our test coverage and validation of changes to FileSinks.\r\n\r\n## What changes are included in this PR?\r\n\r\n- Adds `insert_to_external.slt` which replicates many of the tests in `insert.slt` but for external ListingTables\r\n- Refactor the logic for creating local file paths if not existing in `Copy To` physical plan to a new method `ListingTableUrl::parse_create_local_if_not_exists`\r\n- Add new option for external table creation to allow creating local path\r\n\r\n## Examples:\r\n\r\n### Create a single csv file and append values\r\n```sql\r\nstatement ok\r\nCREATE EXTERNAL TABLE\r\nsingle_file_test(a bigint, b bigint)\r\nSTORED AS csv\r\nLOCATION 'test_files/scratch/single_csv_table.csv'\r\nOPTIONS(\r\ncreate_local_path 'true',\r\nsingle_file 'true',\r\n);\r\n\r\nquery II\r\nINSERT INTO single_file_test values (1, 2), (3, 4);\r\n----\r\n2\r\n\r\nquery II\r\nselect * from single_file_test;\r\n----\r\n1 2\r\n3 4\r\n```\r\n\r\n### Create a table backed by a directory of parquet files, insert new files\r\n```sql\r\nstatement ok\r\nCREATE EXTERNAL TABLE\r\ndirectory_test(a bigint, b bigint)\r\nSTORED AS parquet\r\nLOCATION 'test_files/scratch/external_parquet_table_q0'\r\nOPTIONS(\r\ncreate_local_path 'true',\r\n);\r\n\r\nquery II\r\nINSERT INTO directory_test values (1, 2), (3, 4);\r\n----\r\n2\r\n\r\nquery II\r\nselect * from directory_test;\r\n----\r\n1 2\r\n3 4\r\n```\r\n\r\n## Are these changes tested?\r\n\r\nYes\r\n\r\n## Are there any user-facing changes?\r\n\r\nMore options supported!", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7294/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7294/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7293", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7293/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7293/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7293/events", "html_url": "https://github.com/apache/datafusion/pull/7293", "id": 1851766920, "node_id": "PR_kwDOFWSkxs5X_KIr", "number": 7293, "title": "Add `internal_err!` error macro", "user": {"login": "comphead", "id": 10247224, "node_id": "MDQ6VXNlcjEwMjQ3MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/10247224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comphead", "html_url": "https://github.com/comphead", "followers_url": "https://api.github.com/users/comphead/followers", "following_url": "https://api.github.com/users/comphead/following{/other_user}", "gists_url": "https://api.github.com/users/comphead/gists{/gist_id}", "starred_url": "https://api.github.com/users/comphead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comphead/subscriptions", "organizations_url": "https://api.github.com/users/comphead/orgs", "repos_url": "https://api.github.com/users/comphead/repos", "events_url": "https://api.github.com/users/comphead/events{/privacy}", "received_events_url": "https://api.github.com/users/comphead/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-15T16:32:08Z", "updated_at": "2023-08-16T16:46:35Z", "closed_at": "2023-08-16T16:46:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7293", "html_url": "https://github.com/apache/datafusion/pull/7293", "diff_url": "https://github.com/apache/datafusion/pull/7293.diff", "patch_url": "https://github.com/apache/datafusion/pull/7293.patch", "merged_at": "2023-08-16T16:46:35Z"}, "body": "## Which issue does this PR close?\r\nRelated to #6740 #7115 \r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nAdd `internal_err!` error macro to replace `DatafusionError::Internal` with more concise code and make error handling in single place\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7293/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7293/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7291", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7291/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7291/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7291/events", "html_url": "https://github.com/apache/datafusion/pull/7291", "id": 1851537193, "node_id": "PR_kwDOFWSkxs5X-Znj", "number": 7291, "title": "feature: Support `EXPLAIN COPY`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-15T14:26:25Z", "updated_at": "2023-08-21T21:15:48Z", "closed_at": "2023-08-21T21:15:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7291", "html_url": "https://github.com/apache/datafusion/pull/7291", "diff_url": "https://github.com/apache/datafusion/pull/7291.diff", "patch_url": "https://github.com/apache/datafusion/pull/7291.patch", "merged_at": "2023-08-21T21:15:48Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/pull/6539\r\n\r\n## Rationale for this change\r\n\r\nIt is important to see what plans are coming out for copy\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Add support for `EXPLAIN` plans\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n`EXPLAIN` etc works now for `COPY` statements\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7291/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7287", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7287/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7287/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7287/events", "html_url": "https://github.com/apache/datafusion/pull/7287", "id": 1850762300, "node_id": "PR_kwDOFWSkxs5X706-", "number": 7287, "title": "Add library guide for table provider and catalog providers", "user": {"login": "tshauck", "id": 421839, "node_id": "MDQ6VXNlcjQyMTgzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/421839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tshauck", "html_url": "https://github.com/tshauck", "followers_url": "https://api.github.com/users/tshauck/followers", "following_url": "https://api.github.com/users/tshauck/following{/other_user}", "gists_url": "https://api.github.com/users/tshauck/gists{/gist_id}", "starred_url": "https://api.github.com/users/tshauck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tshauck/subscriptions", "organizations_url": "https://api.github.com/users/tshauck/orgs", "repos_url": "https://api.github.com/users/tshauck/repos", "events_url": "https://api.github.com/users/tshauck/events{/privacy}", "received_events_url": "https://api.github.com/users/tshauck/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-15T00:56:55Z", "updated_at": "2023-08-16T15:30:16Z", "closed_at": "2023-08-16T13:28:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7287", "html_url": "https://github.com/apache/datafusion/pull/7287", "diff_url": "https://github.com/apache/datafusion/pull/7287.diff", "patch_url": "https://github.com/apache/datafusion/pull/7287.patch", "merged_at": "2023-08-16T13:28:48Z"}, "body": "## Which issue does this PR close?\r\n\r\n~Closes #~ Related to #7014\r\n\r\nThis won't finish #7014, but adds the skeleton described in that issue as well as content for the custom table provider and catalog. I can also add some info on Scalar UDFs, but am not sure I know enough about the others to write something w/o a summary to expand on.\r\n\r\nHope this is what you'all are looking for, certainly open to feedback.\r\n\r\nFinally, I'm getting some unrelated (I think) warnings, are these known?\r\n\r\n```\r\n/Users/thauck/personal/code/github.com/tshauck/arrow-datafusion/docs/temp/user-guide/example-usage.md:24: WARNING: 'myst' cross-reference target not found: '../../../datafusion-examples' [myst.xref_missing]\r\n/Users/thauck/personal/code/github.com/tshauck/arrow-datafusion/docs/temp/user-guide/example-usage.md:211: WARNING: Pygments lexer name 'rust,ignore' is not known\r\n/Users/thauck/personal/code/github.com/tshauck/arrow-datafusion/docs/temp/user-guide/sql/data_types.md:31: WARNING: Could not lex literal_block '\u276f select arrow_typeof(interval \\'1 month\\');\\n+-------------------------------------+\\n| arrowtypeof(IntervalYearMonth(\"1\")) |\\n+-------------------------------------+\\n| Interval(YearMonth)                 |\\n+-------------------------------------+\\n' as \"sql\". Highlighting skipped.\r\n...\r\n```\r\n\r\n## Rationale for this change\r\n\r\nIt was requested in #7014. I also would've found this useful for [exon](https://github.com/wheretrue/exon).\r\n\r\n## Are these changes tested?\r\n\r\nI locally generated the docs, per the README. Ex..\r\n\r\n<img width=\"1582\" alt=\"image\" src=\"https://github.com/apache/arrow-datafusion/assets/421839/648c8990-9c2e-4efb-b616-9ca3bb6c5a6d\">\r\n\r\n<img width=\"1582\" alt=\"image\" src=\"https://github.com/apache/arrow-datafusion/assets/421839/d10195de-2074-469b-ad86-9243adb50de3\">\r\n\r\n\r\n## Are there any user-facing changes?\r\n\r\nYes, this would update the docs users could read.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7287/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7287/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7286", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7286/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7286/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7286/events", "html_url": "https://github.com/apache/datafusion/pull/7286", "id": 1850755076, "node_id": "PR_kwDOFWSkxs5X7zab", "number": 7286, "title": "Hotfix: Test in information_schema.slt fails", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-15T00:43:24Z", "updated_at": "2023-08-15T10:17:44Z", "closed_at": "2023-08-15T07:04:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7286", "html_url": "https://github.com/apache/datafusion/pull/7286", "diff_url": "https://github.com/apache/datafusion/pull/7286.diff", "patch_url": "https://github.com/apache/datafusion/pull/7286.patch", "merged_at": "2023-08-15T07:04:43Z"}, "body": "## Which issue does this PR close?\r\nCloses #7285 \r\n\r\n## Rationale for this change\r\nThis PR aims to fix an issue that test in `information_schema.slt` fails consistently after #7270.\r\nhttps://github.com/apache/arrow-datafusion/actions/runs/5858702865/job/15883174290\r\n\r\n## Are these changes tested?\r\nGitHub Actions.\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7286/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7286/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7284", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7284/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7284/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7284/events", "html_url": "https://github.com/apache/datafusion/pull/7284", "id": 1850634139, "node_id": "PR_kwDOFWSkxs5X7Yy3", "number": 7284, "title": "Move sqllogictests to sqllogictests crate to break cyclic dependency", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-14T22:21:05Z", "updated_at": "2023-08-15T17:57:14Z", "closed_at": "2023-08-15T15:43:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7284", "html_url": "https://github.com/apache/datafusion/pull/7284", "diff_url": "https://github.com/apache/datafusion/pull/7284.diff", "patch_url": "https://github.com/apache/datafusion/pull/7284.patch", "merged_at": "2023-08-15T15:43:12Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses https://github.com/apache/arrow-datafusion/issues/7281\r\n\r\n## Rationale for this change\r\n\r\n1. https://github.com/apache/arrow-datafusion/pull/7134 introduced a circular dependency which means we can't publish to crates.io\r\n2. Elevating the sqllogictests into a less deep directory hierarchy will make it more discoverable\r\n\r\n## What changes are included in this PR?\r\n1. Move sqllogictest drivers from `datafusion/core/tests/sqlloictest` to `datafusion/sqllogictest` \r\n2. Update `TestContext` and include it in the `datafusion_sqllogictest` module\r\n3. Update CI jobs that use sqllogictest to use the new module\r\n4. Update readme\r\n5. Leave backwards compatibility `MOVED.md`\r\n\r\n## Are these changes tested?\r\n\r\nYes, both manually and via CI\r\n\r\n## Are there any user-facing changes?\r\nNo, but this likely will affect developer tests\r\n\r\n### New Command\r\n\r\n sqllogictest, is now run like this: \r\n```\r\ncargo test --test sqllogictest\r\n```\r\n\r\nThe old command was like this\r\n```\r\ncargo test -p datafusion --test sqllogictest\r\n```\r\n\r\nBonus it also fixes the error called out by @Dandandan in the mailing list thread: https://lists.apache.org/thread/mbm8smv4rombbbsnfgll922768b103z6\r\n\r\n```\r\n   Compiling datafusion-sqllogictest v29.0.0 (/Users/alamb/Software/arrow-datafusion2/datafusion/sqllogictest)\r\nwarning: function `decimal_to_str` is never used\r\n  --> datafusion/sqllogictest/src/engines/conversion.rs:85:15\r\n   |\r\n85 | pub(crate) fn decimal_to_str(value: Decimal) -> String {\r\n   |               ^^^^^^^^^^^^^^\r\n   |\r\n   = note: `#[warn(dead_code)]` on by default\r\n\r\n\r\n```\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7284/reactions", "total_count": 3, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 3, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7284/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7283", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7283/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7283/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7283/events", "html_url": "https://github.com/apache/datafusion/pull/7283", "id": 1850624628, "node_id": "PR_kwDOFWSkxs5X7Wp4", "number": 7283, "title": "Implement Support for Copy To Logical and Physical plans", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-14T22:13:51Z", "updated_at": "2023-08-17T16:59:34Z", "closed_at": "2023-08-16T16:39:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7283", "html_url": "https://github.com/apache/datafusion/pull/7283", "diff_url": "https://github.com/apache/datafusion/pull/7283.diff", "patch_url": "https://github.com/apache/datafusion/pull/7283.patch", "merged_at": "2023-08-16T16:39:30Z"}, "body": "## Which issue does this PR close?\r\n\r\ncloses #5076 \r\ncloses https://github.com/apache/arrow-datafusion/pull/6539\r\nPart of #5654 \r\n\r\n## Rationale for this change\r\n\r\nIn many cases, we want to be able to export data to file(s) in an ObjectStore without first registering an external table. This is possible with `COPY ... TO ...` statements. We can leverage the FileSinks created to support inserting to ListingTables for part of the implementation for this.\r\n\r\n## What changes are included in this PR?\r\n\r\n- Implement a logical plan for Copy To statements\r\n- Generalize name of `InsertExec` to `FileSinkExec`\r\n- Implement a physical plan for Copy To statements relying on `FileSinkExec`\r\n- Expand sqllogictests in copy.slt, add support for automatically cleared directory in sqllogictests for writing files fresh\r\n- Reimplement `DataFrame::write_* `methods to use `Copy To`\r\n- Add support for [per_thread_output ](https://duckdb.org/docs/sql/statements/copy.html) setting in `FileSinks `and `Copy To`  so user can specify if they want only one file output or possibly many is ok\r\n\r\nNote that this PR does not add support for most statement level settings / overrides yet. That will be important to implement before closing out #5654.  \r\n\r\nThis graphic shows how all of the write related code is wired up after this PR:\r\n![datafusion_writes](https://github.com/apache/arrow-datafusion/assets/14827143/bfa49a11-21db-4857-bcc7-72db7f362039)\r\n\r\n\r\n## Are these changes tested?\r\n\r\nYes, see expanded copy.slt for new tests.\r\n\r\nI also have plans to expand insert.slt to improve testing of recent additions of `insert into` support.\r\n\r\n## Are there any user-facing changes?\r\n\r\nCopy To statements (less most statement level overrides) are supported now. \r\n\r\nDataFrame write_* APIs have some small changes will need more changes as support for statement level overrides is added for copy to", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7283/reactions", "total_count": 3, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 3, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7283/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7280", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7280/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7280/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7280/events", "html_url": "https://github.com/apache/datafusion/pull/7280", "id": 1850391568, "node_id": "PR_kwDOFWSkxs5X6i85", "number": 7280, "title": "refactor: data types in `array_expressions`", "user": {"login": "izveigor", "id": 68601180, "node_id": "MDQ6VXNlcjY4NjAxMTgw", "avatar_url": "https://avatars.githubusercontent.com/u/68601180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/izveigor", "html_url": "https://github.com/izveigor", "followers_url": "https://api.github.com/users/izveigor/followers", "following_url": "https://api.github.com/users/izveigor/following{/other_user}", "gists_url": "https://api.github.com/users/izveigor/gists{/gist_id}", "starred_url": "https://api.github.com/users/izveigor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/izveigor/subscriptions", "organizations_url": "https://api.github.com/users/izveigor/orgs", "repos_url": "https://api.github.com/users/izveigor/repos", "events_url": "https://api.github.com/users/izveigor/events{/privacy}", "received_events_url": "https://api.github.com/users/izveigor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-14T19:16:27Z", "updated_at": "2023-08-16T17:39:08Z", "closed_at": "2023-08-16T17:39:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7280", "html_url": "https://github.com/apache/datafusion/pull/7280", "diff_url": "https://github.com/apache/datafusion/pull/7280.diff", "patch_url": "https://github.com/apache/datafusion/pull/7280.patch", "merged_at": "2023-08-16T17:39:07Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/7279\r\nPart of https://github.com/apache/arrow-datafusion/issues/7288\r\n\r\n## Rationale for this change\r\nWe can use the template `decorator` (`call_array_function`) to reduce code (DRY method). I use `scoping` tactic (See examples: https://veykril.github.io/tlborm/decl-macros/minutiae/scoping.html)\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nNo\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nYes\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7280/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7277", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7277/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7277/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7277/events", "html_url": "https://github.com/apache/datafusion/pull/7277", "id": 1849290373, "node_id": "PR_kwDOFWSkxs5X20pf", "number": 7277, "title": "Allow `skip_failed_rules` to skip  buggy logical plan rules that have a schema mismatch", "user": {"login": "smiklos", "id": 3218812, "node_id": "MDQ6VXNlcjMyMTg4MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3218812?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smiklos", "html_url": "https://github.com/smiklos", "followers_url": "https://api.github.com/users/smiklos/followers", "following_url": "https://api.github.com/users/smiklos/following{/other_user}", "gists_url": "https://api.github.com/users/smiklos/gists{/gist_id}", "starred_url": "https://api.github.com/users/smiklos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smiklos/subscriptions", "organizations_url": "https://api.github.com/users/smiklos/orgs", "repos_url": "https://api.github.com/users/smiklos/repos", "events_url": "https://api.github.com/users/smiklos/events{/privacy}", "received_events_url": "https://api.github.com/users/smiklos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-14T08:30:57Z", "updated_at": "2023-08-14T12:30:13Z", "closed_at": "2023-08-14T12:07:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7277", "html_url": "https://github.com/apache/datafusion/pull/7277", "diff_url": "https://github.com/apache/datafusion/pull/7277.diff", "patch_url": "https://github.com/apache/datafusion/pull/7277.patch", "merged_at": "2023-08-14T12:07:11Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nIn connection to #7241.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\nIf we allow buggy logical plans to be skipped then plans that don't fail but produce different schemas should also be skippable. \r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nMoved checking schema equality before handling logical plan errors so that the same option `skip_failed_rules` can be applied to these rules as well\r\n\r\n## Are these changes tested?\r\nAdded a new test for this case. \r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\nThe error message changed slightly. \r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\nDon't think so\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\nNope", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7277/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7276", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7276/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7276/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7276/events", "html_url": "https://github.com/apache/datafusion/pull/7276", "id": 1848631397, "node_id": "PR_kwDOFWSkxs5X0m7u", "number": 7276, "title": "Enable creating and inserting to empty external tables via SQL", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-13T15:11:18Z", "updated_at": "2023-08-14T22:20:17Z", "closed_at": "2023-08-14T17:18:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7276", "html_url": "https://github.com/apache/datafusion/pull/7276", "diff_url": "https://github.com/apache/datafusion/pull/7276.diff", "patch_url": "https://github.com/apache/datafusion/pull/7276.patch", "merged_at": "2023-08-14T17:18:43Z"}, "body": "## Which issue does this PR close?\r\n\r\nFollow on to #7244 \r\n\r\nRelated to #7228 and #7036\r\n\r\nNote: does not close #7228 since it does not provide a mechanism to create external table target if it does not exist. It does offer a partial workaround since you can now specify `OPTIONS (insert_mode append_new_files)` when creating external tables so `insert into` will add new files to the table.\r\n\r\n## Rationale for this change\r\n\r\nPrevious PRs adding support for inserting to `ListingTables` have not adequately tested an end to end process of creating an empty external table from SQL and subsequently inserting data into it. This PR adds test cases for this and adds a few enhancements / solves a few bugs to make the test cases pass.\r\n\r\n## What changes are included in this PR?\r\n\r\n- New test cases which create empty external table and insert data into it\r\n- Remove logic throwing error when parquet schema is specified via SQL since it is now supported\r\n- Support setting `ListingTableInsertMode` via `Create External Table ... OPTIONS ()` statement\r\n- Update old test cases expecting setting parquet schema to fail\r\n- Fix bug in CsvSink which set header to always be true even if table specified this explicitly as false\r\n\r\n## Are these changes tested?\r\n\r\nYes\r\n\r\n## Are there any user-facing changes?\r\n\r\nCreating empty external tables and inserting to them via SQL is possible now. ", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7276/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7276/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7275", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7275/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7275/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7275/events", "html_url": "https://github.com/apache/datafusion/pull/7275", "id": 1848554243, "node_id": "PR_kwDOFWSkxs5X0XbT", "number": 7275, "title": "Minor: Add upstream ticket reference in comments", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-13T11:35:03Z", "updated_at": "2023-10-01T11:33:03Z", "closed_at": "2023-08-13T17:36:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7275", "html_url": "https://github.com/apache/datafusion/pull/7275", "diff_url": "https://github.com/apache/datafusion/pull/7275.diff", "patch_url": "https://github.com/apache/datafusion/pull/7275.patch", "merged_at": "2023-08-13T17:36:22Z"}, "body": "Follow on to https://github.com/apache/arrow-datafusion/pull/7244 from @devinjdangelo \r\n\r\nAdd a comment with  upstream ticket reference to https://github.com/apache/arrow-rs/issues/4693\r\n\r\nNo code changes\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7275/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7274", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7274/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7274/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7274/events", "html_url": "https://github.com/apache/datafusion/pull/7274", "id": 1848177455, "node_id": "PR_kwDOFWSkxs5XzH6u", "number": 7274, "title": "Add isnan and iszero", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-12T18:47:22Z", "updated_at": "2023-08-16T08:28:36Z", "closed_at": "2023-08-16T08:28:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7274", "html_url": "https://github.com/apache/datafusion/pull/7274", "diff_url": "https://github.com/apache/datafusion/pull/7274.diff", "patch_url": "https://github.com/apache/datafusion/pull/7274.patch", "merged_at": "2023-08-16T08:28:35Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7273 \r\n\r\n## Rationale for this change\r\nIn Datafusion, `+NaN` and` -NaN` are distinguished as well as `+0.0` and `-0.0`.\r\nFor example, `asin(10)` returns `NaN` but `'inf'::DOUBLE / 'inf'::DOUBLE` returns `-NaN`.\r\n`3.0 * 0` returns `0.0` but `-3.0 * 0` returns `-0.0`.\r\n\r\nSo, users need to determine `NaN` and `0.0` like as follows.\r\n\r\n```\r\nSELECT ... WHERE x = 'NaN'::DOUBLE OR x = -'NaN'::DOUBLE;\r\n```\r\n\r\nI think it's nice to avoid such boilerplate code.\r\n\r\n## What changes are included in this PR?\r\nThis PR aims to add `isnan` and `iszero` which determine `NaN` and `0.0` ignoring their sign.\r\n\r\n## Are these changes tested?\r\nAdded new tests.\r\n\r\n## Are there any user-facing changes?\r\nYes but it doesn't break compatibility.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7274/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7270", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7270/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7270/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7270/events", "html_url": "https://github.com/apache/datafusion/pull/7270", "id": 1847113422, "node_id": "PR_kwDOFWSkxs5XvfwP", "number": 7270, "title": "Prepare 29.0.0 Release", "user": {"login": "andygrove", "id": 934084, "node_id": "MDQ6VXNlcjkzNDA4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/934084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andygrove", "html_url": "https://github.com/andygrove", "followers_url": "https://api.github.com/users/andygrove/followers", "following_url": "https://api.github.com/users/andygrove/following{/other_user}", "gists_url": "https://api.github.com/users/andygrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/andygrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andygrove/subscriptions", "organizations_url": "https://api.github.com/users/andygrove/orgs", "repos_url": "https://api.github.com/users/andygrove/repos", "events_url": "https://api.github.com/users/andygrove/events{/privacy}", "received_events_url": "https://api.github.com/users/andygrove/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 3007583662, "node_id": "MDU6TGFiZWwzMDA3NTgzNjYy", "url": "https://api.github.com/repos/apache/datafusion/labels/development-process", "name": "development-process", "color": "5544ED", "default": false, "description": "Related to development process of DataFusion"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-11T16:29:59Z", "updated_at": "2023-08-14T17:22:45Z", "closed_at": "2023-08-14T17:22:44Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7270", "html_url": "https://github.com/apache/datafusion/pull/7270", "diff_url": "https://github.com/apache/datafusion/pull/7270.diff", "patch_url": "https://github.com/apache/datafusion/pull/7270.patch", "merged_at": "2023-08-14T17:22:44Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n- Update version\r\n- [CHANGELOG](https://github.com/andygrove/arrow-datafusion/blob/prep-29/dev/changelog/29.0.0.md)\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7270/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7269", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7269/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7269/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7269/events", "html_url": "https://github.com/apache/datafusion/pull/7269", "id": 1846907181, "node_id": "PR_kwDOFWSkxs5XuyTf", "number": 7269, "title": "chore(functions): fix function names typo", "user": {"login": "appletreeisyellow", "id": 14298407, "node_id": "MDQ6VXNlcjE0Mjk4NDA3", "avatar_url": "https://avatars.githubusercontent.com/u/14298407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appletreeisyellow", "html_url": "https://github.com/appletreeisyellow", "followers_url": "https://api.github.com/users/appletreeisyellow/followers", "following_url": "https://api.github.com/users/appletreeisyellow/following{/other_user}", "gists_url": "https://api.github.com/users/appletreeisyellow/gists{/gist_id}", "starred_url": "https://api.github.com/users/appletreeisyellow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appletreeisyellow/subscriptions", "organizations_url": "https://api.github.com/users/appletreeisyellow/orgs", "repos_url": "https://api.github.com/users/appletreeisyellow/repos", "events_url": "https://api.github.com/users/appletreeisyellow/events{/privacy}", "received_events_url": "https://api.github.com/users/appletreeisyellow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-11T14:15:38Z", "updated_at": "2023-08-13T15:14:57Z", "closed_at": "2023-08-11T16:26:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7269", "html_url": "https://github.com/apache/datafusion/pull/7269", "diff_url": "https://github.com/apache/datafusion/pull/7269.diff", "patch_url": "https://github.com/apache/datafusion/pull/7269.patch", "merged_at": "2023-08-11T16:26:59Z"}, "body": "## Which issue does this PR close?\r\n\r\nThis is a followup PR for https://github.com/apache/arrow-datafusion/pull/7262. No related issue. \r\n\r\n## Rationale for this change\r\n\r\nI found typos in function names that will printout in error message:\r\n* `regex_replace` should be `regexp_replace`\r\n* `rtrimp` should be `rtrim`\r\n\r\n```\r\nDataFusion CLI v23.0.0\r\n\u276f SELECT regexp_replace(arrow_cast('foobar', 'Dictionary(Int32, Utf8)'), 'bar', 'xx', 'gi');\r\nInternal error: The \"regex_replace\" function can only accept strings.. This was likely caused by a bug in DataFusion's code and we would welcome that you file an bug report in our issue tracker\r\n                         ^\r\n\u276f SELECT rtrim(arrow_cast(' foo ', 'Dictionary(Int32, Utf8)'));\r\nInternal error: The \"rtrimp\" function can only accept strings.. This was likely caused by a bug in DataFusion's code and we would welcome that you file an bug report in our issue tracker\r\n                          ^\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nFix typos\r\n\r\n## Are these changes tested?\r\n\r\nTested manually, there is no logic change in this PR\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\n\r\nUsers will see the correct function names in the error messages for `regexp_replace` and `rtrim`", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7269/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7268", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7268/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7268/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7268/events", "html_url": "https://github.com/apache/datafusion/pull/7268", "id": 1846656335, "node_id": "PR_kwDOFWSkxs5Xt7ZB", "number": 7268, "title": "chore: public sql_statement_to_plan_with_context()", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-11T11:24:12Z", "updated_at": "2023-08-21T19:50:49Z", "closed_at": "2023-08-21T19:50:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7268", "html_url": "https://github.com/apache/datafusion/pull/7268", "diff_url": "https://github.com/apache/datafusion/pull/7268.diff", "patch_url": "https://github.com/apache/datafusion/pull/7268.patch", "merged_at": "2023-08-21T19:50:49Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nThis patch makes `sql_statement_to_plan_with_context()` public. Compared to `sql_statement_to_plan`, it accepts an external `PlannerContext`, which allows pre-registering some external context for planning\r\n\r\n## What changes are included in this PR?\r\n\r\nLike above\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\nn/a\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n\r\nA new public API `sql_statement_to_plan_with_context`\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7268/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7267", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7267/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7267/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7267/events", "html_url": "https://github.com/apache/datafusion/pull/7267", "id": 1846472039, "node_id": "PR_kwDOFWSkxs5XtSuN", "number": 7267, "title": "fix: build_timestamp_list data type mismatch", "user": {"login": "yukkit", "id": 28214641, "node_id": "MDQ6VXNlcjI4MjE0NjQx", "avatar_url": "https://avatars.githubusercontent.com/u/28214641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yukkit", "html_url": "https://github.com/yukkit", "followers_url": "https://api.github.com/users/yukkit/followers", "following_url": "https://api.github.com/users/yukkit/following{/other_user}", "gists_url": "https://api.github.com/users/yukkit/gists{/gist_id}", "starred_url": "https://api.github.com/users/yukkit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yukkit/subscriptions", "organizations_url": "https://api.github.com/users/yukkit/orgs", "repos_url": "https://api.github.com/users/yukkit/repos", "events_url": "https://api.github.com/users/yukkit/events{/privacy}", "received_events_url": "https://api.github.com/users/yukkit/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-11T09:08:31Z", "updated_at": "2023-08-12T12:04:24Z", "closed_at": "2023-08-12T12:04:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7267", "html_url": "https://github.com/apache/datafusion/pull/7267", "diff_url": "https://github.com/apache/datafusion/pull/7267.diff", "patch_url": "https://github.com/apache/datafusion/pull/7267.patch", "merged_at": "2023-08-12T12:04:24Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7266 .\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7267/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7265", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7265/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7265/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7265/events", "html_url": "https://github.com/apache/datafusion/pull/7265", "id": 1846304824, "node_id": "PR_kwDOFWSkxs5XsuVw", "number": 7265, "title": "Improve error message for aggregate/window functions", "user": {"login": "2010YOUY01", "id": 23360377, "node_id": "MDQ6VXNlcjIzMzYwMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/23360377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/2010YOUY01", "html_url": "https://github.com/2010YOUY01", "followers_url": "https://api.github.com/users/2010YOUY01/followers", "following_url": "https://api.github.com/users/2010YOUY01/following{/other_user}", "gists_url": "https://api.github.com/users/2010YOUY01/gists{/gist_id}", "starred_url": "https://api.github.com/users/2010YOUY01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/2010YOUY01/subscriptions", "organizations_url": "https://api.github.com/users/2010YOUY01/orgs", "repos_url": "https://api.github.com/users/2010YOUY01/repos", "events_url": "https://api.github.com/users/2010YOUY01/events{/privacy}", "received_events_url": "https://api.github.com/users/2010YOUY01/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292802, "node_id": "LA_kwDOFWSkxs74glwC", "url": "https://api.github.com/repos/apache/datafusion/labels/optimizer", "name": "optimizer", "color": "1963D0", "default": false, "description": "Optimizer rules"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-11T06:58:49Z", "updated_at": "2023-08-12T12:07:45Z", "closed_at": "2023-08-12T12:07:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7265", "html_url": "https://github.com/apache/datafusion/pull/7265", "diff_url": "https://github.com/apache/datafusion/pull/7265.diff", "patch_url": "https://github.com/apache/datafusion/pull/7265.patch", "merged_at": "2023-08-12T12:07:44Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #6396 .\r\n\r\n## Rationale for this change\r\nWhen wrong function signature is given, it's more clear to provide error message with \"what's the right function signature\" instead of \"what's wrong\"\r\nPrevious PRs in #6396  have implemented such error messages for built-in scalar functions, this PR would like to also implement it for aggregate/window functions.\r\n\r\nBefore:\r\n```sql\r\nDataFusion CLI v28.0.0\r\n\u276f select corr();\r\nError during planning: The function Correlation expects 2 arguments, but 0 were provided\r\n\u276f select regr_slope(1, '2');\r\nError during planning: The function RegrSlope does not support inputs of type Int64.\r\n\u276f select row_number(column1)\r\nover (order by column1 rows between 2 preceding and current row)\r\nfrom (values (1,2), (2,4), (3,6), (4,12), (5,15), (6, 18));\r\nError during planning: The function expected 0 arguments but received 1\r\n```\r\nPR:\r\n```sql\r\n\u276f select corr();\r\nError during planning: No function matches the given name and argument types 'CORRELATION()'. You might need to add explicit type casts.\r\n        Candidate functions:\r\n        CORRELATION(Int8/Int16/Int32/Int64/UInt8/UInt16/UInt32/UInt64/Float32/Float64, Int8/Int16/Int32/Int64/UInt8/UInt16/UInt32/UInt64/Float32/Float64)\r\n\u276f select regr_slope(1, '2');\r\nError during planning: No function matches the given name and argument types 'REGR_SLOPE(Int64, Utf8)'. You might need to add explicit type casts.\r\n        Candidate functions:\r\n        REGR_SLOPE(Int8/Int16/Int32/Int64/UInt8/UInt16/UInt32/UInt64/Float32/Float64, Int8/Int16/Int32/Int64/UInt8/UInt16/UInt32/UInt64/Float32/Float64)\r\n\u276f select row_number(column1)\r\nover (order by column1 rows between 2 preceding and current row)\r\nfrom (values (1,2), (2,4), (3,6), (4,12), (5,15), (6, 18));\r\nError during planning: No function matches the given name and argument types 'ROW_NUMBER(Int64)'. You might need to add explicit type casts.\r\n        Candidate functions:\r\n        ROW_NUMBER()\r\n\r\n```\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\nOverwrite original errors for wrong function signature with new one.\r\nOriginal errors are thrown in `return_type()`, I've checked all overwritten errors are for wrong signature, they can be aggregated into one with more detailed error message\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n`sqllogictest`s\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7265/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7264", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7264/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7264/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7264/events", "html_url": "https://github.com/apache/datafusion/pull/7264", "id": 1846238767, "node_id": "PR_kwDOFWSkxs5Xsf19", "number": 7264, "title": "Operators documentation", "user": {"login": "spaydar", "id": 29551413, "node_id": "MDQ6VXNlcjI5NTUxNDEz", "avatar_url": "https://avatars.githubusercontent.com/u/29551413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spaydar", "html_url": "https://github.com/spaydar", "followers_url": "https://api.github.com/users/spaydar/followers", "following_url": "https://api.github.com/users/spaydar/following{/other_user}", "gists_url": "https://api.github.com/users/spaydar/gists{/gist_id}", "starred_url": "https://api.github.com/users/spaydar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spaydar/subscriptions", "organizations_url": "https://api.github.com/users/spaydar/orgs", "repos_url": "https://api.github.com/users/spaydar/repos", "events_url": "https://api.github.com/users/spaydar/events{/privacy}", "received_events_url": "https://api.github.com/users/spaydar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-11T05:57:40Z", "updated_at": "2023-08-13T12:10:26Z", "closed_at": "2023-08-13T12:10:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7264", "html_url": "https://github.com/apache/datafusion/pull/7264", "diff_url": "https://github.com/apache/datafusion/pull/7264.diff", "patch_url": "https://github.com/apache/datafusion/pull/7264.patch", "merged_at": "2023-08-13T12:10:22Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7153.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, I can successfully build and view documentation locally as per [\"Build & Preview\" instructions](https://github.com/apache/arrow-datafusion/blob/main/docs/README.md#build--preview)\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7264/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7264/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7263", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7263/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7263/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7263/events", "html_url": "https://github.com/apache/datafusion/pull/7263", "id": 1846232856, "node_id": "PR_kwDOFWSkxs5Xsekl", "number": 7263, "title": "fix: CLI should support different sql dialects", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-11T05:49:47Z", "updated_at": "2023-08-12T14:03:45Z", "closed_at": "2023-08-12T12:03:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7263", "html_url": "https://github.com/apache/datafusion/pull/7263", "diff_url": "https://github.com/apache/datafusion/pull/7263.diff", "patch_url": "https://github.com/apache/datafusion/pull/7263.patch", "merged_at": "2023-08-12T12:03:28Z"}, "body": "## Which issue does this PR close?\r\nPartially #7255\r\n\r\ndatafusion-cli currently only supports the generic dialect.\r\nFor example: \r\n```\r\nDataFusion CLI v28.0.0\r\n\u276f set datafusion.sql_parser.dialect = postgresql;\r\n0 rows in set. Query took 0.003 seconds.\r\n\r\n\u276f select 17 # 5;  \ud83e\udd14 Invalid statement: sql parser error: No infix parser for token Sharp\r\n```\r\n`select 17 # 5` is valid in the PostgreSQL dialect, but got an \u2018Invalid statement\u2019 error.\r\n\r\nThis is because the rustyline validator only supports the generic dialect, not the one specified by the current user.\r\nhttps://github.com/apache/arrow-datafusion/blob/bb185a64d1ec14eb3f6c638147d382a2a0fcf4dd/datafusion-cli/src/helper.rs#L53\r\n\r\n\r\n## Rationale for this change\r\n- rustyline validator takes into consideration the current user\u2019s dialect setting. \r\n- After SQL statement execution is completed, attempt to synchronize the validator\u2019s dialect.\r\n\r\n\r\n## What changes are included in this PR?\r\nCLI support different sql dialects.\r\n\r\n## Are these changes tested?\r\nYes\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7263/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7262", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7262/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7262/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7262/events", "html_url": "https://github.com/apache/datafusion/pull/7262", "id": 1845972291, "node_id": "PR_kwDOFWSkxs5XrnPA", "number": 7262, "title": "fix(functions): support `Dictionary` for string and int functions", "user": {"login": "appletreeisyellow", "id": 14298407, "node_id": "MDQ6VXNlcjE0Mjk4NDA3", "avatar_url": "https://avatars.githubusercontent.com/u/14298407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appletreeisyellow", "html_url": "https://github.com/appletreeisyellow", "followers_url": "https://api.github.com/users/appletreeisyellow/followers", "following_url": "https://api.github.com/users/appletreeisyellow/following{/other_user}", "gists_url": "https://api.github.com/users/appletreeisyellow/gists{/gist_id}", "starred_url": "https://api.github.com/users/appletreeisyellow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appletreeisyellow/subscriptions", "organizations_url": "https://api.github.com/users/appletreeisyellow/orgs", "repos_url": "https://api.github.com/users/appletreeisyellow/repos", "events_url": "https://api.github.com/users/appletreeisyellow/events{/privacy}", "received_events_url": "https://api.github.com/users/appletreeisyellow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-10T22:26:23Z", "updated_at": "2023-08-14T14:00:08Z", "closed_at": "2023-08-11T20:21:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7262", "html_url": "https://github.com/apache/datafusion/pull/7262", "diff_url": "https://github.com/apache/datafusion/pull/7262.diff", "patch_url": "https://github.com/apache/datafusion/pull/7262.patch", "merged_at": "2023-08-11T20:21:48Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #5471.\r\n\r\n## Rationale for this change\r\n\r\nRunning `upper(col)` where `col` is a dictionary results in an internal error:\r\n\r\n```\r\nInternal error: The \"upper\" function can only accept strings.. This was likely caused by a bug in DataFusion's code and we would welcome that you file an bug report in our issue tracker\r\n```\r\n\r\nOther functions like `length` and `character_length` also have the same issue. Here is a list of all the functions with the same issue:\r\n\r\n```\r\n$ grep utf8_to_str_type\r\n\r\ndatafusion/expr/src/built_in_function.rs\r\n600:                utf8_to_str_type(&input_expr_types[0], \"btrim\")\r\n628:                utf8_to_str_type(&input_expr_types[0], \"initcap\")\r\n630:            BuiltinScalarFunction::Left => utf8_to_str_type(&input_expr_types[0], \"left\"),\r\n632:                utf8_to_str_type(&input_expr_types[0], \"lower\")\r\n634:            BuiltinScalarFunction::Lpad => utf8_to_str_type(&input_expr_types[0], \"lpad\"),\r\n636:                utf8_to_str_type(&input_expr_types[0], \"ltrim\")\r\n638:            BuiltinScalarFunction::MD5 => utf8_to_str_type(&input_expr_types[0], \"md5\"),\r\n651:                utf8_to_str_type(&input_expr_types[0], \"regex_replace\")\r\n654:                utf8_to_str_type(&input_expr_types[0], \"repeat\")\r\n657:                utf8_to_str_type(&input_expr_types[0], \"replace\")\r\n660:                utf8_to_str_type(&input_expr_types[0], \"reverse\")\r\n663:                utf8_to_str_type(&input_expr_types[0], \"right\")\r\n665:            BuiltinScalarFunction::Rpad => utf8_to_str_type(&input_expr_types[0], \"rpad\"),\r\n667:                utf8_to_str_type(&input_expr_types[0], \"rtrimp\")\r\n711:                utf8_to_str_type(&input_expr_types[0], \"split_part\")\r\n718:                utf8_to_str_type(&input_expr_types[0], \"substr\")\r\n740:                utf8_to_str_type(&input_expr_types[0], \"translate\")\r\n742:            BuiltinScalarFunction::Trim => utf8_to_str_type(&input_expr_types[0], \"trim\"),\r\n744:                utf8_to_str_type(&input_expr_types[0], \"upper\")\r\n```\r\n\r\n```\r\n$ grep utf8_to_int_type\r\n\r\ndatafusion/expr/src/built_in_function.rs\r\n597:                utf8_to_int_type(&input_expr_types[0], \"bit_length\")\r\n603:                utf8_to_int_type(&input_expr_types[0], \"character_length\")\r\n645:                utf8_to_int_type(&input_expr_types[0], \"octet_length\")\r\n715:                utf8_to_int_type(&input_expr_types[0], \"strpos\")\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\nSupport `Dictionary` data type for string functions and int functions\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes, tests are added for all the functions listed above\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\n\r\nUser will be able to use `upper` function and other string and int functions where `col` is a dictionary without problem", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7262/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7259", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7259/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7259/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7259/events", "html_url": "https://github.com/apache/datafusion/pull/7259", "id": 1845372338, "node_id": "PR_kwDOFWSkxs5XpkJx", "number": 7259, "title": "Adding order equivalence support on MemoryExec", "user": {"login": "metesynnada", "id": 100111937, "node_id": "U_kgDOBfeWQQ", "avatar_url": "https://avatars.githubusercontent.com/u/100111937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metesynnada", "html_url": "https://github.com/metesynnada", "followers_url": "https://api.github.com/users/metesynnada/followers", "following_url": "https://api.github.com/users/metesynnada/following{/other_user}", "gists_url": "https://api.github.com/users/metesynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/metesynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metesynnada/subscriptions", "organizations_url": "https://api.github.com/users/metesynnada/orgs", "repos_url": "https://api.github.com/users/metesynnada/repos", "events_url": "https://api.github.com/users/metesynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/metesynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-10T15:00:55Z", "updated_at": "2023-08-11T12:23:28Z", "closed_at": "2023-08-11T12:23:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7259", "html_url": "https://github.com/apache/datafusion/pull/7259", "diff_url": "https://github.com/apache/datafusion/pull/7259.diff", "patch_url": "https://github.com/apache/datafusion/pull/7259.patch", "merged_at": "2023-08-11T12:23:27Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\nCurrently, MemoryExec does not accept multi-globally ordered expressions, unlike the external tables with multiple WITH ORDER. This PR adds it, just like the external tables. \r\n\r\n## What changes are included in this PR?\r\n\r\nMemoryExec API is changed.\r\n\r\n## Are these changes tested?\r\n\r\nYes\r\n\r\n## Are there any user-facing changes?\r\n\r\nNot currently.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7259/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7258", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7258/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7258/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7258/events", "html_url": "https://github.com/apache/datafusion/pull/7258", "id": 1845259114, "node_id": "PR_kwDOFWSkxs5XpLVk", "number": 7258, "title": "chore(sqllogictests-doc): add testing set up", "user": {"login": "appletreeisyellow", "id": 14298407, "node_id": "MDQ6VXNlcjE0Mjk4NDA3", "avatar_url": "https://avatars.githubusercontent.com/u/14298407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/appletreeisyellow", "html_url": "https://github.com/appletreeisyellow", "followers_url": "https://api.github.com/users/appletreeisyellow/followers", "following_url": "https://api.github.com/users/appletreeisyellow/following{/other_user}", "gists_url": "https://api.github.com/users/appletreeisyellow/gists{/gist_id}", "starred_url": "https://api.github.com/users/appletreeisyellow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/appletreeisyellow/subscriptions", "organizations_url": "https://api.github.com/users/appletreeisyellow/orgs", "repos_url": "https://api.github.com/users/appletreeisyellow/repos", "events_url": "https://api.github.com/users/appletreeisyellow/events{/privacy}", "received_events_url": "https://api.github.com/users/appletreeisyellow/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-10T14:02:53Z", "updated_at": "2023-08-10T17:34:32Z", "closed_at": "2023-08-10T14:28:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7258", "html_url": "https://github.com/apache/datafusion/pull/7258", "diff_url": "https://github.com/apache/datafusion/pull/7258.diff", "patch_url": "https://github.com/apache/datafusion/pull/7258.patch", "merged_at": "2023-08-10T14:28:22Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nNo related issue\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nIn order to run the sqllogictests, users need to set up their testing environment. @alamb pointed me [this doc](https://arrow.apache.org/datafusion/contributor-guide/index.html#bootstrap-environment) for the set up instructions. I found them useful, so adding them here\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nAdd testing set up instructions in the sqllogictests README\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nDoc change, so no test\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\nYes, the README for sqllogictests will look like this:\r\n<img width=\"1059\" alt=\"Screenshot 2023-08-10 at 8 58 05 AM\" src=\"https://github.com/apache/arrow-datafusion/assets/14298407/3e39c56b-db8b-434d-a63e-64593e162bde\">\r\n\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7258/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7256", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7256/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7256/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7256/events", "html_url": "https://github.com/apache/datafusion/pull/7256", "id": 1844820400, "node_id": "PR_kwDOFWSkxs5Xnqvq", "number": 7256, "title": "feat: Add support for PostgreSQL bitwise XOR operator", "user": {"login": "jonahgao", "id": 26053282, "node_id": "MDQ6VXNlcjI2MDUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/26053282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonahgao", "html_url": "https://github.com/jonahgao", "followers_url": "https://api.github.com/users/jonahgao/followers", "following_url": "https://api.github.com/users/jonahgao/following{/other_user}", "gists_url": "https://api.github.com/users/jonahgao/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonahgao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonahgao/subscriptions", "organizations_url": "https://api.github.com/users/jonahgao/orgs", "repos_url": "https://api.github.com/users/jonahgao/repos", "events_url": "https://api.github.com/users/jonahgao/events{/privacy}", "received_events_url": "https://api.github.com/users/jonahgao/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-10T09:43:21Z", "updated_at": "2023-08-12T14:04:05Z", "closed_at": "2023-08-12T12:05:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7256", "html_url": "https://github.com/apache/datafusion/pull/7256", "diff_url": "https://github.com/apache/datafusion/pull/7256.diff", "patch_url": "https://github.com/apache/datafusion/pull/7256.patch", "merged_at": "2023-08-12T12:05:45Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7255.\r\n\r\n## Rationale for this change\r\n\r\n`'#'` is PostgreSQL-specific bitwise XOR  operator,  which is not supported in Datafusion.\r\n```sh\r\nDataFusion CLI v28.0.0\r\n\u276f  set datafusion.sql_parser.dialect = postgresql;\r\n0 rows in set. Query took 0.002 seconds.\r\n\r\n\u276f select 17#5;\r\nThis feature is not implemented: Unsupported SQL binary operator PGBitwiseXor\r\n```\r\n\r\n## What changes are included in this PR?\r\n-  Add support for PostgreSQL bitwise XOR operator.\r\n- Unify the display name of bitwise XOR operator.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\nYes\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7256/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7256/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7252", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7252/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7252/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7252/events", "html_url": "https://github.com/apache/datafusion/pull/7252", "id": 1844141510, "node_id": "PR_kwDOFWSkxs5XlYYA", "number": 7252, "title": "Avoid to use TempDir::into_path for temporary dirs expected to be deleted automatically", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-09T22:42:40Z", "updated_at": "2023-08-10T14:38:50Z", "closed_at": "2023-08-10T14:38:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7252", "html_url": "https://github.com/apache/datafusion/pull/7252", "diff_url": "https://github.com/apache/datafusion/pull/7252.diff", "patch_url": "https://github.com/apache/datafusion/pull/7252.patch", "merged_at": "2023-08-10T14:38:49Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #7251 \r\n\r\n## Rationale for this change\r\n\r\nIn `datafusion/core/src/test/mod.rs`, `TempDir` is used for a temporary directory and then `TempDir::into_path` is called.\r\nBut once `TempDir::into_path` is called, the corresponding directory is no longer deleted automatically.\r\nIt's noted in the [API doc](https://docs.rs/tempfile/latest/tempfile/struct.TempDir.html#method.into_path).\r\nSo, it's better to use `TempDir::path` instead of `TempDir::into_path`.\r\n\r\n## What changes are included in this PR?\r\n\r\nRemoved the usage of `TempDir::into_path` and use `TempDir::path`.\r\n\r\n## Are these changes tested?\r\nExisting tests passed and temporary directories no longer remain.\r\n```\r\n$ cargo test --package datafusion\r\n$ ls /tmp/.tmp*\r\n```\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7252/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7248", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7248/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7248/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7248/events", "html_url": "https://github.com/apache/datafusion/pull/7248", "id": 1843655278, "node_id": "PR_kwDOFWSkxs5Xjuyn", "number": 7248, "title": "Minor: fix clippy for memory_limit test", "user": {"login": "yjshen", "id": 1387718, "node_id": "MDQ6VXNlcjEzODc3MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1387718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yjshen", "html_url": "https://github.com/yjshen", "followers_url": "https://api.github.com/users/yjshen/followers", "following_url": "https://api.github.com/users/yjshen/following{/other_user}", "gists_url": "https://api.github.com/users/yjshen/gists{/gist_id}", "starred_url": "https://api.github.com/users/yjshen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yjshen/subscriptions", "organizations_url": "https://api.github.com/users/yjshen/orgs", "repos_url": "https://api.github.com/users/yjshen/repos", "events_url": "https://api.github.com/users/yjshen/events{/privacy}", "received_events_url": "https://api.github.com/users/yjshen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-09T16:48:02Z", "updated_at": "2023-08-09T17:47:04Z", "closed_at": "2023-08-09T17:47:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7248", "html_url": "https://github.com/apache/datafusion/pull/7248", "diff_url": "https://github.com/apache/datafusion/pull/7248.diff", "patch_url": "https://github.com/apache/datafusion/pull/7248.patch", "merged_at": "2023-08-09T17:47:04Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\nFix clippy for the main branch.\r\n\r\n## What changes are included in this PR?\r\n\r\nAvoid using the deprecated function.\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nExisting tests\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\nNo.\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7248/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7247", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7247/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7247/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7247/events", "html_url": "https://github.com/apache/datafusion/pull/7247", "id": 1843472869, "node_id": "PR_kwDOFWSkxs5XjG-R", "number": 7247, "title": "Change benefits_from_partitioning flag to vector", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-09T15:04:35Z", "updated_at": "2023-08-12T09:28:26Z", "closed_at": "2023-08-12T09:28:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7247", "html_url": "https://github.com/apache/datafusion/pull/7247", "diff_url": "https://github.com/apache/datafusion/pull/7247.diff", "patch_url": "https://github.com/apache/datafusion/pull/7247.patch", "merged_at": "2023-08-12T09:28:20Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nWith this PR `benefits_from_input_partitioning` method, now returns vector(), a flag indicating for each child, whether partitioning is beneficial.\r\nThis enables us to produce better plans.\r\n\r\nIt seems to me that in the changing tests (generally hash join tests), new plans are better. However, I welcome the community feedback. Maybe having different partitions for the different children have its own problems, overheads, etc.\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nExisting tests, should work. Also some tests change, with these changes\r\nMulti partitions can be seen in the build side of the hash join. This will enable us to decrease memory usage, I presume.\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->\r\n`api change`", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7247/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7247/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7246", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7246/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7246/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7246/events", "html_url": "https://github.com/apache/datafusion/pull/7246", "id": 1843355283, "node_id": "PR_kwDOFWSkxs5Xit3Y", "number": 7246, "title": "[MINOR]: update benefits_from_input_partitioning implementation for projection and repartition", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-09T14:20:15Z", "updated_at": "2023-08-11T06:01:25Z", "closed_at": "2023-08-11T06:01:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7246", "html_url": "https://github.com/apache/datafusion/pull/7246", "diff_url": "https://github.com/apache/datafusion/pull/7246.diff", "patch_url": "https://github.com/apache/datafusion/pull/7246.patch", "merged_at": "2023-08-11T06:01:25Z"}, "body": "\r\n## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nThis PR adds \r\n-Now projection doesn't benefit from parallelism when all of the expressions are either `Column` or `Literal`\r\n- `benefits_from_input_partitioning` flag is implemented for `RepartitionExec` (increasing partition is only beneficial for hash partition.)\r\n- unrelated minor change: `preserve_order` method is added to the `RepartitionExec` to inspect `preserve_order` flag of the, `RepartitionExec`.\r\n\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7246/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7246/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7245", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7245/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7245/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7245/events", "html_url": "https://github.com/apache/datafusion/pull/7245", "id": 1843311192, "node_id": "PR_kwDOFWSkxs5Xikbi", "number": 7245, "title": "Deprecate `batch_byte_size`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-09T13:58:12Z", "updated_at": "2023-08-09T16:16:23Z", "closed_at": "2023-08-09T16:16:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7245", "html_url": "https://github.com/apache/datafusion/pull/7245", "diff_url": "https://github.com/apache/datafusion/pull/7245.diff", "patch_url": "https://github.com/apache/datafusion/pull/7245.patch", "merged_at": "2023-08-09T16:16:23Z"}, "body": "## Which issue does this PR close?\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/issues/5885\r\n\r\n## Rationale for this change\r\n\r\nSuggested by @yjshen in https://github.com/apache/arrow-datafusion/pull/7130#discussion_r1287837220\r\n\r\n`batch_byte_size` has been ported upstream and is now available as [`RecordBatch::get_array_memory_size`](https://docs.rs/arrow/latest/arrow/record_batch/struct.RecordBatch.html#method.get_array_memory_size)\r\n\r\n\r\n## What changes are included in this PR?\r\n\r\nChanges\r\n1. deprecate batch_byte_size\r\n2. Update to use `RecordBatch::get_array_memory_size` instead\r\n\r\n## Are these changes tested?\r\nYes, by clippy CI check\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nA deprecated function telling them what to change\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7245/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7244", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7244/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7244/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7244/events", "html_url": "https://github.com/apache/datafusion/pull/7244", "id": 1843153875, "node_id": "PR_kwDOFWSkxs5XiB6Q", "number": 7244, "title": "Extend insert into to support Parquet backed tables", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-09T12:40:59Z", "updated_at": "2023-08-14T10:27:23Z", "closed_at": "2023-08-13T11:12:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7244", "html_url": "https://github.com/apache/datafusion/pull/7244", "diff_url": "https://github.com/apache/datafusion/pull/7244.diff", "patch_url": "https://github.com/apache/datafusion/pull/7244.patch", "merged_at": "2023-08-13T11:12:02Z"}, "body": "## Which issue does this PR close?\r\n\r\nNone, but progresses towards the goals of https://github.com/apache/arrow-datafusion/issues/5076 and https://github.com/apache/arrow-datafusion/issues/7079. Follow on to https://github.com/apache/arrow-datafusion/pull/7141 and #7212 .\r\n\r\nPart of  #7036\r\n\r\n## Rationale for this change\r\n\r\nInserting to parquet backed tables is a common use case. The file format itself does not support appending to an existing file, so only appending new files to a table is supported.\r\n\r\nThis implementation relies on `AsyncArrowWriter` to handle coordination between the Parquet serializer and ObjectStore writer. So, the implementation for parquet insert into support diverges a bit from JSON and CSV. \r\n\r\n## What changes are included in this PR?\r\n\r\n- Added parquet write config options to `ExecutionOptions`\r\n- Allow specifying parquet schema so empty tables can be created\r\n- Move write specific code to write.rs mod\r\n- Add test coverage for inserting to parquet table with or without session config changes\r\n\r\n## Are these changes tested?\r\n\r\nYes.\r\n\r\n## Are there any user-facing changes?\r\n\r\nInserting to parquet backed tables is possible.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7244/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7243", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7243/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7243/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7243/events", "html_url": "https://github.com/apache/datafusion/pull/7243", "id": 1843011221, "node_id": "PR_kwDOFWSkxs5Xhi4y", "number": 7243, "title": "Update `physical_plan` tests to not use SessionContext", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-09T11:13:11Z", "updated_at": "2023-08-09T21:17:58Z", "closed_at": "2023-08-09T21:17:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7243", "html_url": "https://github.com/apache/datafusion/pull/7243", "diff_url": "https://github.com/apache/datafusion/pull/7243.diff", "patch_url": "https://github.com/apache/datafusion/pull/7243.patch", "merged_at": "2023-08-09T21:17:58Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/1754\r\n\r\n\r\n\r\n\r\n## Rationale for this change\r\nAs part of preparing (finally) to move the physical_plan into its own crate so datafusion builds faster and is more modular, I need to cut all `physical_plan` --> `core` dependencies.  SessionContext is in `core`\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n1. Rewrite most tests in physical_plan to use `TaskContext` (which is what they mostly need anyways)\r\n2. Move integration tests (that are testing running SQL) into either sqllogictest or core_integration\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7243/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7240", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7240/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7240/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7240/events", "html_url": "https://github.com/apache/datafusion/pull/7240", "id": 1842417736, "node_id": "PR_kwDOFWSkxs5XfiQc", "number": 7240, "title": "doc: Add link to contributor's guide for new functions within the src", "user": {"login": "2010YOUY01", "id": 23360377, "node_id": "MDQ6VXNlcjIzMzYwMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/23360377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/2010YOUY01", "html_url": "https://github.com/2010YOUY01", "followers_url": "https://api.github.com/users/2010YOUY01/followers", "following_url": "https://api.github.com/users/2010YOUY01/following{/other_user}", "gists_url": "https://api.github.com/users/2010YOUY01/gists{/gist_id}", "starred_url": "https://api.github.com/users/2010YOUY01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/2010YOUY01/subscriptions", "organizations_url": "https://api.github.com/users/2010YOUY01/orgs", "repos_url": "https://api.github.com/users/2010YOUY01/repos", "events_url": "https://api.github.com/users/2010YOUY01/events{/privacy}", "received_events_url": "https://api.github.com/users/2010YOUY01/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-09T04:01:48Z", "updated_at": "2023-08-09T14:00:13Z", "closed_at": "2023-08-09T14:00:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7240", "html_url": "https://github.com/apache/datafusion/pull/7240", "diff_url": "https://github.com/apache/datafusion/pull/7240.diff", "patch_url": "https://github.com/apache/datafusion/pull/7240.patch", "merged_at": "2023-08-09T14:00:13Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nNA\r\n\r\n## Rationale for this change\r\n\r\nI've noticed it's easy to forget to add SQL reference documentation when adding new functions.\r\nAutomate this task seems hard to do and maintain, so I think at least we can remind contributors to do so somewhere in the src, function ENUM declaration should be a good place for such README\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Update the contributor's guide for adding functions with `sqllogictest` and SQL reference doc\r\n2. Place the link close to the function ENUM declaration\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nThe doc has been built locally and all links have been tested\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7240/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7239", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7239/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7239/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7239/events", "html_url": "https://github.com/apache/datafusion/pull/7239", "id": 1842361128, "node_id": "PR_kwDOFWSkxs5XfWRT", "number": 7239, "title": "Support array `flatten` sql function", "user": {"login": "jayzhan211", "id": 15869383, "node_id": "MDQ6VXNlcjE1ODY5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/15869383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayzhan211", "html_url": "https://github.com/jayzhan211", "followers_url": "https://api.github.com/users/jayzhan211/followers", "following_url": "https://api.github.com/users/jayzhan211/following{/other_user}", "gists_url": "https://api.github.com/users/jayzhan211/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayzhan211/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayzhan211/subscriptions", "organizations_url": "https://api.github.com/users/jayzhan211/orgs", "repos_url": "https://api.github.com/users/jayzhan211/repos", "events_url": "https://api.github.com/users/jayzhan211/events{/privacy}", "received_events_url": "https://api.github.com/users/jayzhan211/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-09T02:39:50Z", "updated_at": "2023-08-09T17:14:10Z", "closed_at": "2023-08-09T17:14:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7239", "html_url": "https://github.com/apache/datafusion/pull/7239", "diff_url": "https://github.com/apache/datafusion/pull/7239.diff", "patch_url": "https://github.com/apache/datafusion/pull/7239.patch", "merged_at": "2023-08-09T17:14:09Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #6995 \r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7239/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7238", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7238/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7238/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7238/events", "html_url": "https://github.com/apache/datafusion/pull/7238", "id": 1842156127, "node_id": "PR_kwDOFWSkxs5XerBA", "number": 7238, "title": "Minor: Move `Partitioning` and`Distribution` to physical_expr", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T21:57:11Z", "updated_at": "2023-08-09T16:56:27Z", "closed_at": "2023-08-09T16:54:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7238", "html_url": "https://github.com/apache/datafusion/pull/7238", "diff_url": "https://github.com/apache/datafusion/pull/7238.diff", "patch_url": "https://github.com/apache/datafusion/pull/7238.patch", "merged_at": "2023-08-09T16:54:50Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/1754\r\n\r\n## Rationale for this change\r\n\r\nI am trying to extract physical_plan into is own crate and to do so I  need to move dependencies around so there are no circular dependencies within `datafusion_core`\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Move `Partitioning` and`Distribution` to physical_expr\r\n2. move `ordering_equivalence_properties_helper` to be with the rest of the order equivalence code\r\n\r\n## Are these changes tested?\r\n\r\nBy existing tests\r\n\r\n## Are there any user-facing changes?\r\nNo - I left backwards compatible `pub use`", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7238/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7237", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7237/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7237/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7237/events", "html_url": "https://github.com/apache/datafusion/pull/7237", "id": 1842126522, "node_id": "PR_kwDOFWSkxs5XekkU", "number": 7237, "title": "Minor: Move `project_schema` to `datafusion_common`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T21:27:41Z", "updated_at": "2023-08-09T17:04:25Z", "closed_at": "2023-08-09T05:14:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7237", "html_url": "https://github.com/apache/datafusion/pull/7237", "diff_url": "https://github.com/apache/datafusion/pull/7237.diff", "patch_url": "https://github.com/apache/datafusion/pull/7237.patch", "merged_at": "2023-08-09T05:14:56Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/1754\r\n\r\n## Rationale for this change\r\n\r\nAs part of preparing (finally) to move the physical_plan into its own crate so datafusion builds faster and is more modular, I am trying to clean up cross module dependencies where I find them\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Move `project_schema` into datafusion_common\r\n2. Update `use` for `project_schema` in `datasource`\r\n \r\n## Are these changes tested?\r\ntested by existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo -- I left a `pub use` for backwards compatibility\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7237/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7236", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7236/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7236/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7236/events", "html_url": "https://github.com/apache/datafusion/pull/7236", "id": 1842114828, "node_id": "PR_kwDOFWSkxs5Xeh9G", "number": 7236, "title": "Minor: Extract ExecutionPlanVisitor to its own module", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-08T21:19:00Z", "updated_at": "2023-08-09T13:18:13Z", "closed_at": "2023-08-09T13:18:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7236", "html_url": "https://github.com/apache/datafusion/pull/7236", "diff_url": "https://github.com/apache/datafusion/pull/7236.diff", "patch_url": "https://github.com/apache/datafusion/pull/7236.patch", "merged_at": "2023-08-09T13:18:13Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/1754\r\n## Rationale for this change\r\n\r\nI am trying to improve the code structure of DataFusion -- I tried to remove this function and replace it with the TreeNode API but I was not successful. At least I can pull this code into its own module to make it easier to find\r\n\r\n## What changes are included in this PR?\r\nMove ExecutionPlanVisitor and some related functions into their own `visitor.rs` module\r\n\r\n## Are these changes tested?\r\nCovered by existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo -- I left `pub use` so no changes should be needed\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7236/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7235", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7235/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7235/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7235/events", "html_url": "https://github.com/apache/datafusion/pull/7235", "id": 1842092224, "node_id": "PR_kwDOFWSkxs5XedBj", "number": 7235, "title": "Minor: Remove [[example]] table from datafusion-examples/Cargo.toml", "user": {"login": "sarutak", "id": 4736016, "node_id": "MDQ6VXNlcjQ3MzYwMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4736016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarutak", "html_url": "https://github.com/sarutak", "followers_url": "https://api.github.com/users/sarutak/followers", "following_url": "https://api.github.com/users/sarutak/following{/other_user}", "gists_url": "https://api.github.com/users/sarutak/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarutak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarutak/subscriptions", "organizations_url": "https://api.github.com/users/sarutak/orgs", "repos_url": "https://api.github.com/users/sarutak/repos", "events_url": "https://api.github.com/users/sarutak/events{/privacy}", "received_events_url": "https://api.github.com/users/sarutak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3007583662, "node_id": "MDU6TGFiZWwzMDA3NTgzNjYy", "url": "https://api.github.com/repos/apache/datafusion/labels/development-process", "name": "development-process", "color": "5544ED", "default": false, "description": "Related to development process of DataFusion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T20:59:11Z", "updated_at": "2023-08-08T21:59:16Z", "closed_at": "2023-08-08T21:59:15Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7235", "html_url": "https://github.com/apache/datafusion/pull/7235", "diff_url": "https://github.com/apache/datafusion/pull/7235.diff", "patch_url": "https://github.com/apache/datafusion/pull/7235.patch", "merged_at": "2023-08-08T21:59:15Z"}, "body": "Closes #.\r\n\r\n## Rationale for this change\r\nIn `datafusion-examples/Cargo.toml`, `[[example]]` tables are defined like as follows.\r\n\r\n```\r\n[[example]]\r\nname = \"avro_sql\"\r\npath = \"examples/avro_sql.rs\"\r\nrequired-features = [\"datafusion/avro\"]\r\n```\r\n\r\nBut `avro_sql.rs` is in `examples`, we don't need to have `[[example]]` table for `avro_sql`.\r\n\r\n## What changes are included in this PR?\r\nRemove the `[[example]]` table from the `Cargo.toml`.\r\n\r\n## Are these changes tested?\r\nI confirmed `avro_sql` still work even after this change with `cargo run --example avro_sql --features datafusion/avro`\r\n\r\n## Are there any user-facing changes?\r\nNo.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7235/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7235/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7234", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7234/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7234/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7234/events", "html_url": "https://github.com/apache/datafusion/pull/7234", "id": 1842091936, "node_id": "PR_kwDOFWSkxs5Xec9m", "number": 7234, "title": "Minor: Move streams out of `physical_plan` module", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T20:58:55Z", "updated_at": "2023-08-09T13:59:10Z", "closed_at": "2023-08-09T13:59:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7234", "html_url": "https://github.com/apache/datafusion/pull/7234", "diff_url": "https://github.com/apache/datafusion/pull/7234.diff", "patch_url": "https://github.com/apache/datafusion/pull/7234.patch", "merged_at": "2023-08-09T13:59:09Z"}, "body": "## Which issue does this PR close?\r\n\r\nPart of https://github.com/apache/arrow-datafusion/issues/1754\r\n\r\n## Rationale for this change\r\n\r\nAs part of preparing (finally) to move the physical_plan into its own crate so datafusion builds faster and is more modular, I am doing some code rearranging to slim down the contents of `physical_plan/mod.rs`\r\n\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Move `RecordBatchStream` and `SendableRecordBatchStream` to `datafusion_execution` crate\r\n2. Move `EmptyStream` into `stream.rs` with other stream wrappers (so hopefully it will be more discoverable)\r\n\r\n## Are these changes tested?\r\ncovered by existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo: I left `pub use` so there should be no backwards incompatible changes\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7234/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7233", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7233/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7233/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7233/events", "html_url": "https://github.com/apache/datafusion/pull/7233", "id": 1842065647, "node_id": "PR_kwDOFWSkxs5XeXIm", "number": 7233, "title": "Remove additional cast from TPCH q8", "user": {"login": "viirya", "id": 68855, "node_id": "MDQ6VXNlcjY4ODU1", "avatar_url": "https://avatars.githubusercontent.com/u/68855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viirya", "html_url": "https://github.com/viirya", "followers_url": "https://api.github.com/users/viirya/followers", "following_url": "https://api.github.com/users/viirya/following{/other_user}", "gists_url": "https://api.github.com/users/viirya/gists{/gist_id}", "starred_url": "https://api.github.com/users/viirya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viirya/subscriptions", "organizations_url": "https://api.github.com/users/viirya/orgs", "repos_url": "https://api.github.com/users/viirya/repos", "events_url": "https://api.github.com/users/viirya/events{/privacy}", "received_events_url": "https://api.github.com/users/viirya/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-08T20:37:26Z", "updated_at": "2023-08-09T14:12:49Z", "closed_at": "2023-08-09T03:04:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7233", "html_url": "https://github.com/apache/datafusion/pull/7233", "diff_url": "https://github.com/apache/datafusion/pull/7233.diff", "patch_url": "https://github.com/apache/datafusion/pull/7233.patch", "merged_at": "2023-08-09T03:04:25Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #7216.\r\nCloses #6794.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7233/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7232", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7232/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7232/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7232/events", "html_url": "https://github.com/apache/datafusion/pull/7232", "id": 1841452151, "node_id": "PR_kwDOFWSkxs5XcOmB", "number": 7232, "title": "Minor: Remove unecessary `clone_with_replacement`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T14:38:42Z", "updated_at": "2023-08-08T20:10:58Z", "closed_at": "2023-08-08T16:07:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7232", "html_url": "https://github.com/apache/datafusion/pull/7232", "diff_url": "https://github.com/apache/datafusion/pull/7232.diff", "patch_url": "https://github.com/apache/datafusion/pull/7232.patch", "merged_at": "2023-08-08T16:07:58Z"}, "body": "## Which issue does this PR close?\r\n\r\nN/A\r\n\r\n## Rationale for this change\r\n\r\nWhile maintaining a copy of the `clone_with_replacement` function in IOx I realized it simply duplicates the more general [\"TreeNode\" API](https://docs.rs/datafusion/latest/datafusion/common/tree_node/index.html)\r\n\r\nI think this will make adding/modifing `Expr` variants will be easier as there are fewer things that need to be changed\r\n\r\n\r\n\r\n## What changes are included in this PR?\r\n1. Remove `clone_with_replacement`\r\n2. Rewrite the uses of `clone_with_replacement` terms of treenode API\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\ncovered by existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n3. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nno -- `clone_with_replacement` is not a publicly exposed function\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7232/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7232/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7231", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7231/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7231/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7231/events", "html_url": "https://github.com/apache/datafusion/pull/7231", "id": 1841417948, "node_id": "PR_kwDOFWSkxs5XcHJ2", "number": 7231, "title": "Minor: with preserve order now receives argument", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-08T14:20:03Z", "updated_at": "2023-08-08T20:27:12Z", "closed_at": "2023-08-08T20:27:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7231", "html_url": "https://github.com/apache/datafusion/pull/7231", "diff_url": "https://github.com/apache/datafusion/pull/7231.diff", "patch_url": "https://github.com/apache/datafusion/pull/7231.patch", "merged_at": "2023-08-08T20:27:07Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n`with_preserve_order` was setting `preserve_order` flag of the `RepartitionExec` to `true`. Other executors generally take argument to set the flag. With this PR, `with_preserve_order` member also receives flag argument. \r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7231/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7230", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7230/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7230/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7230/events", "html_url": "https://github.com/apache/datafusion/pull/7230", "id": 1841377778, "node_id": "PR_kwDOFWSkxs5Xb-aA", "number": 7230, "title": "[Minor], Bug Fix: Add empty ordering check at the source.", "user": {"login": "mustafasrepo", "id": 106137913, "node_id": "U_kgDOBlOJOQ", "avatar_url": "https://avatars.githubusercontent.com/u/106137913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mustafasrepo", "html_url": "https://github.com/mustafasrepo", "followers_url": "https://api.github.com/users/mustafasrepo/followers", "following_url": "https://api.github.com/users/mustafasrepo/following{/other_user}", "gists_url": "https://api.github.com/users/mustafasrepo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mustafasrepo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mustafasrepo/subscriptions", "organizations_url": "https://api.github.com/users/mustafasrepo/orgs", "repos_url": "https://api.github.com/users/mustafasrepo/repos", "events_url": "https://api.github.com/users/mustafasrepo/events{/privacy}", "received_events_url": "https://api.github.com/users/mustafasrepo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T13:57:44Z", "updated_at": "2023-08-08T16:57:54Z", "closed_at": "2023-08-08T16:57:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7230", "html_url": "https://github.com/apache/datafusion/pull/7230", "diff_url": "https://github.com/apache/datafusion/pull/7230.diff", "patch_url": "https://github.com/apache/datafusion/pull/7230.patch", "merged_at": "2023-08-08T16:57:53Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nAt the projection of the source, we keep track of ordering as long as they are used in the query.\r\nConsider table below\r\n```sql\r\nCREATE EXTERNAL TABLE multiple_ordered_table (\r\n  a0 INTEGER,\r\n  a INTEGER,\r\n  b INTEGER,\r\n  c INTEGER,\r\n  d INTEGER\r\n)\r\nSTORED AS CSV\r\nWITH HEADER ROW\r\nWITH ORDER (a ASC, b ASC)\r\nWITH ORDER (c ASC)\r\nLOCATION 'tests/data/window_2.csv';\r\n```\r\n\r\nwhich satisfies ordering `a ASC, b ASC` and `c ASC`.\r\nIf we run the query below on this table.\r\n```sql\r\nSELECT c\r\nFROM multiple_ordered_table\r\nORDER BY c ASC;\r\n```\r\nsince, only column `c` is used. We will not keep track of ordering `a ASC, b ASC`. However, during projection of orderings\r\nempty vectors are still added to output ordering. Since, first entry in among alternative orderings is output_ordering. Output ordering of the `CsvExec` is empty. \r\nIn this PR, we add emptiness check, with this check we no longer store empty orderings(after projection) at the source. After this PR output ordering of the `CsvExec` is no longer empty.\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes, new tests are added.\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7230/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7230/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7229", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7229/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7229/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7229/events", "html_url": "https://github.com/apache/datafusion/pull/7229", "id": 1841311168, "node_id": "PR_kwDOFWSkxs5Xbv5D", "number": 7229, "title": "Minor: remove duplication in `create_writer`", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T13:22:01Z", "updated_at": "2023-08-09T17:09:51Z", "closed_at": "2023-08-09T17:09:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7229", "html_url": "https://github.com/apache/datafusion/pull/7229", "diff_url": "https://github.com/apache/datafusion/pull/7229.diff", "patch_url": "https://github.com/apache/datafusion/pull/7229.patch", "merged_at": "2023-08-09T17:09:48Z"}, "body": "## Which issue does this PR close?\r\n\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\nI noticed some code duplication while reviewing https://github.com/apache/arrow-datafusion/pull/7212 from @devinjdangelo  and I think this code will be used more when adding write support for avro, parquet and arrow files. Thus it makes sense to put it in its own function\r\n\r\n## What changes are included in this PR?\r\n\r\nRefactor `CsvSink::create_writer` and `JsonSink::create_writer`\r\n\r\n## Are these changes tested?\r\ncovered by existing tests\r\n\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nno\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7229/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7229/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7226", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7226/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7226/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7226/events", "html_url": "https://github.com/apache/datafusion/pull/7226", "id": 1840797009, "node_id": "PR_kwDOFWSkxs5XaAoB", "number": 7226, "title": "chore: required at least 1 approve before merge", "user": {"login": "jackwener", "id": 30525741, "node_id": "MDQ6VXNlcjMwNTI1NzQx", "avatar_url": "https://avatars.githubusercontent.com/u/30525741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackwener", "html_url": "https://github.com/jackwener", "followers_url": "https://api.github.com/users/jackwener/followers", "following_url": "https://api.github.com/users/jackwener/following{/other_user}", "gists_url": "https://api.github.com/users/jackwener/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackwener/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackwener/subscriptions", "organizations_url": "https://api.github.com/users/jackwener/orgs", "repos_url": "https://api.github.com/users/jackwener/repos", "events_url": "https://api.github.com/users/jackwener/events{/privacy}", "received_events_url": "https://api.github.com/users/jackwener/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3007583662, "node_id": "MDU6TGFiZWwzMDA3NTgzNjYy", "url": "https://api.github.com/repos/apache/datafusion/labels/development-process", "name": "development-process", "color": "5544ED", "default": false, "description": "Related to development process of DataFusion"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-08T08:05:46Z", "updated_at": "2023-08-09T05:13:37Z", "closed_at": "2023-08-08T12:01:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7226", "html_url": "https://github.com/apache/datafusion/pull/7226", "diff_url": "https://github.com/apache/datafusion/pull/7226.diff", "patch_url": "https://github.com/apache/datafusion/pull/7226.patch", "merged_at": "2023-08-08T12:01:42Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\nIt is required that PR is approve to make Merge\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7226/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7226/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7224", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7224/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7224/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7224/events", "html_url": "https://github.com/apache/datafusion/pull/7224", "id": 1840524626, "node_id": "PR_kwDOFWSkxs5XZFws", "number": 7224, "title": "fix: typo in substrait", "user": {"login": "waynexia", "id": 15380403, "node_id": "MDQ6VXNlcjE1MzgwNDAz", "avatar_url": "https://avatars.githubusercontent.com/u/15380403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waynexia", "html_url": "https://github.com/waynexia", "followers_url": "https://api.github.com/users/waynexia/followers", "following_url": "https://api.github.com/users/waynexia/following{/other_user}", "gists_url": "https://api.github.com/users/waynexia/gists{/gist_id}", "starred_url": "https://api.github.com/users/waynexia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waynexia/subscriptions", "organizations_url": "https://api.github.com/users/waynexia/orgs", "repos_url": "https://api.github.com/users/waynexia/repos", "events_url": "https://api.github.com/users/waynexia/events{/privacy}", "received_events_url": "https://api.github.com/users/waynexia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5008645953, "node_id": "LA_kwDOFWSkxs8AAAABKonfQQ", "url": "https://api.github.com/repos/apache/datafusion/labels/substrait", "name": "substrait", "color": "F74E0C", "default": false, "description": "Changes to the substrait crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-08T04:04:51Z", "updated_at": "2023-08-08T07:18:15Z", "closed_at": "2023-08-08T05:02:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7224", "html_url": "https://github.com/apache/datafusion/pull/7224", "diff_url": "https://github.com/apache/datafusion/pull/7224.diff", "patch_url": "https://github.com/apache/datafusion/pull/7224.patch", "merged_at": "2023-08-08T05:02:17Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\nTry to encode `-` in substrait will report an error that \"substract\" is not supported\r\n\r\n```\r\n 170   \u2502 2023-08-08T03:52:46.109050Z  WARN servers::mysql::server: Internal error occurred during query exec, server actively close the channel to let client try next time: Failed to collect recordbatch, source: Failed to poll stream, source: External error: External er\r\n       \u2502 ror, source: Failed to request remote peer, source: Failed to do Flight get, code: Internal error, source: This feature is not implemented: Unsupported function name: \"substract\".\r\n```\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\nCorrect typo \"substract\" to \"subtract\" \r\n\r\n## Are these changes tested?\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\nYes\r\n## Are there any user-facing changes?\r\n\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7224/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7224/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7223", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7223/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7223/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7223/events", "html_url": "https://github.com/apache/datafusion/pull/7223", "id": 1840115349, "node_id": "PR_kwDOFWSkxs5XXtDA", "number": 7223, "title": "Docs: Add GlareDB to list of DataFusion users", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-07T19:52:14Z", "updated_at": "2023-08-07T20:49:51Z", "closed_at": "2023-08-07T20:49:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7223", "html_url": "https://github.com/apache/datafusion/pull/7223", "diff_url": "https://github.com/apache/datafusion/pull/7223.diff", "patch_url": "https://github.com/apache/datafusion/pull/7223.patch", "merged_at": "2023-08-07T20:49:46Z"}, "body": "Add https://github.com/GlareDB/glaredb as noticed by @andygrove  to the list of systems powered by DataFusion\r\n\r\ncc @scsmithr ", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7223/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7223/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7220", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7220/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7220/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7220/events", "html_url": "https://github.com/apache/datafusion/pull/7220", "id": 1840055756, "node_id": "PR_kwDOFWSkxs5XXgBE", "number": 7220, "title": "Minor: rename `GetFieldAccessCharacteristic` and add docs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-07T19:04:55Z", "updated_at": "2023-08-08T13:46:58Z", "closed_at": "2023-08-08T13:46:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7220", "html_url": "https://github.com/apache/datafusion/pull/7220", "diff_url": "https://github.com/apache/datafusion/pull/7220.diff", "patch_url": "https://github.com/apache/datafusion/pull/7220.patch", "merged_at": "2023-08-08T13:46:52Z"}, "body": "## Which issue does this PR close?\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/issues/7193\r\nFollows https://github.com/apache/arrow-datafusion/pull/7215 from @izveigor \r\n\r\n## Rationale for this change\r\nIn order to have a good experience accessing fields, it should be easy to use the code that manipulates them\r\n\r\n\r\n## What changes are included in this PR?\r\n\r\n1. Rename `GetFieldAccessCharacteristic` to `GetFieldAccessSchema` to better reflect what it does\r\n2. move the calculation into  `GetFieldAccessSchema::get_accessed_field` \r\n3. Reduce duplication\r\n\r\n## Are these changes tested?\r\nCovered by existing tests\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n4. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo, these are unreleased APIs (added in https://github.com/apache/arrow-datafusion/pull/7215)\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7220/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7219", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7219/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7219/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7219/events", "html_url": "https://github.com/apache/datafusion/pull/7219", "id": 1839944959, "node_id": "PR_kwDOFWSkxs5XXH4Q", "number": 7219, "title": "Minor: Add constructors to GetFieldAccessExpr and add docs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-07T17:43:04Z", "updated_at": "2023-08-08T09:48:56Z", "closed_at": "2023-08-08T09:48:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7219", "html_url": "https://github.com/apache/datafusion/pull/7219", "diff_url": "https://github.com/apache/datafusion/pull/7219.diff", "patch_url": "https://github.com/apache/datafusion/pull/7219.patch", "merged_at": "2023-08-08T09:48:55Z"}, "body": "## Which issue does this PR close?\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/issues/7193\r\nMinor follow on to https://github.com/apache/arrow-datafusion/pull/7215/files\r\n\r\n## Rationale for this change\r\n\r\nI figured this code could have some more comments and make it easier to construct tests\r\n\r\n## What changes are included in this PR?\r\nMinor: Add constructors to GetFieldAccessExpr and add docs\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7219/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7219/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7218", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7218/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7218/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7218/events", "html_url": "https://github.com/apache/datafusion/pull/7218", "id": 1839925126, "node_id": "PR_kwDOFWSkxs5XXDky", "number": 7218, "title": "Add `Expr::field`, `Expr::index`, and `Expr::slice`, add docs", "user": {"login": "alamb", "id": 490673, "node_id": "MDQ6VXNlcjQ5MDY3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/490673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alamb", "html_url": "https://github.com/alamb", "followers_url": "https://api.github.com/users/alamb/followers", "following_url": "https://api.github.com/users/alamb/following{/other_user}", "gists_url": "https://api.github.com/users/alamb/gists{/gist_id}", "starred_url": "https://api.github.com/users/alamb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alamb/subscriptions", "organizations_url": "https://api.github.com/users/alamb/orgs", "repos_url": "https://api.github.com/users/alamb/repos", "events_url": "https://api.github.com/users/alamb/events{/privacy}", "received_events_url": "https://api.github.com/users/alamb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-07T17:28:40Z", "updated_at": "2023-08-08T12:34:03Z", "closed_at": "2023-08-08T12:34:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7218", "html_url": "https://github.com/apache/datafusion/pull/7218", "diff_url": "https://github.com/apache/datafusion/pull/7218.diff", "patch_url": "https://github.com/apache/datafusion/pull/7218.patch", "merged_at": "2023-08-08T12:34:03Z"}, "body": "## Which issue does this PR close?\r\n\r\nRelated to https://github.com/apache/arrow-datafusion/issues/7193\r\nFollows https://github.com/apache/arrow-datafusion/pull/7215 from @izveigor \r\n\r\n## Rationale for this change\r\nIn order to have a good experience accessing fields, it should be easy to create field / lists accesses\r\n\r\n## What changes are included in this PR?\r\n\r\nSee subject\r\n## Are these changes tested?\r\nYes -- with doc tests \r\n## Are there any user-facing changes?\r\nNew methods on `Expr`", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7218/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7217", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7217/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7217/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7217/events", "html_url": "https://github.com/apache/datafusion/pull/7217", "id": 1839690974, "node_id": "PR_kwDOFWSkxs5XWRCR", "number": 7217, "title": "[MINOR] Document refactor on NestedLoopJoin", "user": {"login": "metesynnada", "id": 100111937, "node_id": "U_kgDOBfeWQQ", "avatar_url": "https://avatars.githubusercontent.com/u/100111937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/metesynnada", "html_url": "https://github.com/metesynnada", "followers_url": "https://api.github.com/users/metesynnada/followers", "following_url": "https://api.github.com/users/metesynnada/following{/other_user}", "gists_url": "https://api.github.com/users/metesynnada/gists{/gist_id}", "starred_url": "https://api.github.com/users/metesynnada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/metesynnada/subscriptions", "organizations_url": "https://api.github.com/users/metesynnada/orgs", "repos_url": "https://api.github.com/users/metesynnada/repos", "events_url": "https://api.github.com/users/metesynnada/events{/privacy}", "received_events_url": "https://api.github.com/users/metesynnada/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-07T15:15:25Z", "updated_at": "2023-08-07T19:48:42Z", "closed_at": "2023-08-07T19:48:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7217", "html_url": "https://github.com/apache/datafusion/pull/7217", "diff_url": "https://github.com/apache/datafusion/pull/7217.diff", "patch_url": "https://github.com/apache/datafusion/pull/7217.patch", "merged_at": "2023-08-07T19:48:41Z"}, "body": "## Which issue does this PR close?\r\n\r\nCloses #.\r\n\r\n## Rationale for this change\r\n\r\nThere appears to be an error with the full join in the table.\r\n\r\n## What changes are included in this PR?\r\n\r\nOnly comment change.\r\n\r\n## Are these changes tested?\r\n\r\nNA\r\n\r\n## Are there any user-facing changes?\r\n\r\nNA", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7217/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7215", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7215/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7215/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7215/events", "html_url": "https://github.com/apache/datafusion/pull/7215", "id": 1839300482, "node_id": "PR_kwDOFWSkxs5XU8MB", "number": 7215, "title": "improve the ergonomics of creating field and list array accesses", "user": {"login": "izveigor", "id": 68601180, "node_id": "MDQ6VXNlcjY4NjAxMTgw", "avatar_url": "https://avatars.githubusercontent.com/u/68601180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/izveigor", "html_url": "https://github.com/izveigor", "followers_url": "https://api.github.com/users/izveigor/followers", "following_url": "https://api.github.com/users/izveigor/following{/other_user}", "gists_url": "https://api.github.com/users/izveigor/gists{/gist_id}", "starred_url": "https://api.github.com/users/izveigor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/izveigor/subscriptions", "organizations_url": "https://api.github.com/users/izveigor/orgs", "repos_url": "https://api.github.com/users/izveigor/repos", "events_url": "https://api.github.com/users/izveigor/events{/privacy}", "received_events_url": "https://api.github.com/users/izveigor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2935904126, "node_id": "MDU6TGFiZWwyOTM1OTA0MTI2", "url": "https://api.github.com/repos/apache/datafusion/labels/api%20change", "name": "api change", "color": "FF0000", "default": false, "description": "Changes the API exposed to users of the crate"}, {"id": 2952168388, "node_id": "MDU6TGFiZWwyOTUyMTY4Mzg4", "url": "https://api.github.com/repos/apache/datafusion/labels/sql", "name": "sql", "color": "46232A", "default": false, "description": "SQL Planner"}, {"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-07T11:56:32Z", "updated_at": "2023-08-07T16:31:56Z", "closed_at": "2023-08-07T16:31:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7215", "html_url": "https://github.com/apache/datafusion/pull/7215", "diff_url": "https://github.com/apache/datafusion/pull/7215.diff", "patch_url": "https://github.com/apache/datafusion/pull/7215.patch", "merged_at": "2023-08-07T16:31:55Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nCloses https://github.com/apache/arrow-datafusion/issues/7193\r\nCloses https://github.com/apache/arrow-datafusion/issues/7146\r\n\r\n## Rationale for this change\r\n\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\nYes\r\n\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nYes\r\n\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7215/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7215/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7212", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7212/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7212/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7212/events", "html_url": "https://github.com/apache/datafusion/pull/7212", "id": 1838466084, "node_id": "PR_kwDOFWSkxs5XSIrE", "number": 7212, "title": "Extend insert into support to include Json backed tables", "user": {"login": "devinjdangelo", "id": 14827143, "node_id": "MDQ6VXNlcjE0ODI3MTQz", "avatar_url": "https://avatars.githubusercontent.com/u/14827143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devinjdangelo", "html_url": "https://github.com/devinjdangelo", "followers_url": "https://api.github.com/users/devinjdangelo/followers", "following_url": "https://api.github.com/users/devinjdangelo/following{/other_user}", "gists_url": "https://api.github.com/users/devinjdangelo/gists{/gist_id}", "starred_url": "https://api.github.com/users/devinjdangelo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devinjdangelo/subscriptions", "organizations_url": "https://api.github.com/users/devinjdangelo/orgs", "repos_url": "https://api.github.com/users/devinjdangelo/repos", "events_url": "https://api.github.com/users/devinjdangelo/events{/privacy}", "received_events_url": "https://api.github.com/users/devinjdangelo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-06T23:50:07Z", "updated_at": "2023-08-08T13:22:34Z", "closed_at": "2023-08-08T13:18:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7212", "html_url": "https://github.com/apache/datafusion/pull/7212", "diff_url": "https://github.com/apache/datafusion/pull/7212.diff", "patch_url": "https://github.com/apache/datafusion/pull/7212.patch", "merged_at": "2023-08-08T13:18:28Z"}, "body": "## Which issue does this PR close?\r\n\r\nNone, but progresses towards the goals of #5076 and #7079. Follow on to #7141. \r\n\r\n## Rationale for this change\r\n\r\nAdds support for `insert into <table>` for tables which are backed by Json files. \r\n\r\n## What changes are included in this PR?\r\n\r\n- Implements `JsonSink `in similar fashion to `CsvSink`\r\n- Minor refactor of `CsvSink` to support code reuse with `JsonSink`\r\n- Generalized existing tests of `insert into` to be easily extensible for additional `FileFormats` and `options`\r\n- Added test coverage for appending to existing Json files and appending new Json files to a `ListingTable`\r\n- Added checks and throw error if attempting insert to sorted or compressed table since not implemented yet\r\n\r\n## Are these changes tested?\r\n\r\nYes\r\n\r\n## Are there any user-facing changes?\r\n\r\nInsert into Json table will work now.", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7212/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7212/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/apache/datafusion/issues/7211", "repository_url": "https://api.github.com/repos/apache/datafusion", "labels_url": "https://api.github.com/repos/apache/datafusion/issues/7211/labels{/name}", "comments_url": "https://api.github.com/repos/apache/datafusion/issues/7211/comments", "events_url": "https://api.github.com/repos/apache/datafusion/issues/7211/events", "html_url": "https://github.com/apache/datafusion/pull/7211", "id": 1837992729, "node_id": "PR_kwDOFWSkxs5XQsRj", "number": 7211, "title": "feat: Add linear regression aggregate functions", "user": {"login": "2010YOUY01", "id": 23360377, "node_id": "MDQ6VXNlcjIzMzYwMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/23360377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/2010YOUY01", "html_url": "https://github.com/2010YOUY01", "followers_url": "https://api.github.com/users/2010YOUY01/followers", "following_url": "https://api.github.com/users/2010YOUY01/following{/other_user}", "gists_url": "https://api.github.com/users/2010YOUY01/gists{/gist_id}", "starred_url": "https://api.github.com/users/2010YOUY01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/2010YOUY01/subscriptions", "organizations_url": "https://api.github.com/users/2010YOUY01/orgs", "repos_url": "https://api.github.com/users/2010YOUY01/repos", "events_url": "https://api.github.com/users/2010YOUY01/events{/privacy}", "received_events_url": "https://api.github.com/users/2010YOUY01/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4169292252, "node_id": "LA_kwDOFWSkxs74glnc", "url": "https://api.github.com/repos/apache/datafusion/labels/logical-expr", "name": "logical-expr", "color": "fbca04", "default": false, "description": "Logical plan and expressions"}, {"id": 4169292548, "node_id": "LA_kwDOFWSkxs74glsE", "url": "https://api.github.com/repos/apache/datafusion/labels/physical-expr", "name": "physical-expr", "color": "F7BD9E", "default": false, "description": "Changes to the physical-expr crates"}, {"id": 4169293162, "node_id": "LA_kwDOFWSkxs74gl1q", "url": "https://api.github.com/repos/apache/datafusion/labels/core", "name": "core", "color": "637A1A", "default": false, "description": "Core DataFusion crate"}, {"id": 4871774902, "node_id": "LA_kwDOFWSkxs8AAAABImFitg", "url": "https://api.github.com/repos/apache/datafusion/labels/sqllogictest", "name": "sqllogictest", "color": "c5def5", "default": false, "description": "SQL Logic Tests (.slt)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-06T00:45:44Z", "updated_at": "2023-08-09T04:05:53Z", "closed_at": "2023-08-08T12:21:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/apache/datafusion/pulls/7211", "html_url": "https://github.com/apache/datafusion/pull/7211", "diff_url": "https://github.com/apache/datafusion/pull/7211.diff", "patch_url": "https://github.com/apache/datafusion/pull/7211.patch", "merged_at": "2023-08-08T12:21:29Z"}, "body": "## Which issue does this PR close?\r\n\r\n<!--\r\nWe generally require a GitHub issue to be filed for all bug fixes and enhancements and this helps us generate change logs for our releases. You can link an issue to this PR using the GitHub syntax. For example `Closes #123` indicates that this PR will close issue #123.\r\n-->\r\n\r\nNA\r\n\r\n## Rationale for this change\r\n\r\nA previous PR first implemented `regr_slope(y, x)` linear regression aggregate function https://github.com/apache/arrow-datafusion/pull/7135\r\nThis PR wants to extend the previous one to implement all PostgreSQL's linear regression aggregate functions like `regr_intercept(y, x)`\r\nhttps://www.postgresql.org/docs/9.4/functions-aggregate.html\r\n<!--\r\n Why are you proposing this change? If this is already explained clearly in the issue then this section is not needed.\r\n Explaining clearly why changes are proposed helps reviewers understand your changes and offer better suggestions for fixes.  \r\n-->\r\n\r\n## What changes are included in this PR?\r\n\r\nExtend `RegrAccumulator` to support other `regr_*(y, x)` aggregate functions\r\n<!--\r\nThere is no need to duplicate the description in the issue here but it is sometimes worth providing a summary of the individual changes in this PR.\r\n-->\r\n\r\n## Are these changes tested?\r\n\r\nAll end-to-end tests have the same result compared to PostgreSQL\r\n<!--\r\nWe typically require tests for all PRs in order to:\r\n1. Prevent the code from being accidentally broken by subsequent changes\r\n2. Serve as another way to document the expected behavior of the code\r\n\r\nIf tests are not included in your PR, please explain why (for example, are they covered by existing tests)?\r\n-->\r\n\r\n## Are there any user-facing changes?\r\nNo\r\n<!--\r\nIf there are user-facing changes then we may require documentation to be updated before approving the PR.\r\n-->\r\n\r\n<!--\r\nIf there are any breaking changes to public APIs, please add the `api change` label.\r\n-->", "reactions": {"url": "https://api.github.com/repos/apache/datafusion/issues/7211/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/apache/datafusion/issues/7211/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]