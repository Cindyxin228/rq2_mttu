[{"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/68", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/68/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/68/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/68", "id": 3356513611, "node_id": "PR_kwDOKsp_MM6ldRk0", "number": 68, "title": "Bump ohttp-relay to v0.0.11", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-08-26T17:26:45Z", "updated_at": "2025-08-26T17:41:17Z", "closed_at": "2025-08-26T17:39:54Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/68", "html_url": "https://github.com/payjoin/ohttp-relay/pull/68", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/68.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/68.patch", "merged_at": "2025-08-26T17:39:54Z"}, "body": "I LLM generated the 0.0.11 changelog, which only lists what we needed to do for the MSRV update because that's the only change.\r\n\r\nWe want a bump for https://github.com/payjoin/rust-payjoin/pull/959", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/68/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/68/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/66", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/66/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/66/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/66", "id": 3326614067, "node_id": "PR_kwDOKsp_MM6j6IqM", "number": 66, "title": "Update msrv to 1.85.0 in ohttp-relay", "user": {"login": "benalleng", "id": 108441023, "node_id": "U_kgDOBnatvw", "avatar_url": "https://avatars.githubusercontent.com/u/108441023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benalleng", "html_url": "https://github.com/benalleng", "followers_url": "https://api.github.com/users/benalleng/followers", "following_url": "https://api.github.com/users/benalleng/following{/other_user}", "gists_url": "https://api.github.com/users/benalleng/gists{/gist_id}", "starred_url": "https://api.github.com/users/benalleng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benalleng/subscriptions", "organizations_url": "https://api.github.com/users/benalleng/orgs", "repos_url": "https://api.github.com/users/benalleng/repos", "events_url": "https://api.github.com/users/benalleng/events{/privacy}", "received_events_url": "https://api.github.com/users/benalleng/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-08-16T00:05:35Z", "updated_at": "2025-08-26T14:15:19Z", "closed_at": "2025-08-26T14:15:19Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/66", "html_url": "https://github.com/payjoin/ohttp-relay/pull/66", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/66.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/66.patch", "merged_at": "2025-08-26T14:15:19Z"}, "body": "This updates the msrv of ohttp-relay as well as bumping the deps up to a higher version that still fall within the msrv the ecosystem has chosen.\r\n\r\nThis is a relatively new msrv version so all of the deps latest version stlll fallws within the msrv. perhaps there will be future versions that wont but hopefully we have some CI actions to prevent any breaking changes in the future.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/66/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/66/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/64", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/64/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/64/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/64", "id": 2926055372, "node_id": "PR_kwDOKsp_MM6O-lL7", "number": 64, "title": "Bump 0.0.10", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-03-17T18:41:05Z", "updated_at": "2025-03-17T21:27:42Z", "closed_at": "2025-03-17T21:27:41Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/64", "html_url": "https://github.com/payjoin/ohttp-relay/pull/64", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/64.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/64.patch", "merged_at": "2025-03-17T21:27:41Z"}, "body": "Enable opt-in Gateway reachability for BIP 77\r\n\r\nThe [BIP 77 Draft](https://github.com/bitcoin/bips/pull/1483) imagines clients reach one another over a \"mailbox\" store-and-forward server through OHTTP Relays. In order for Relays to reach those mailbox servers without being pre-defined, this release includes support for an opt-in mechanism based on RFC 9540's Oblivious Gateway discovery mechanism augmented with an `allowed_purposes` parameter that may specify the BIP 77 mailbox as a specific service.\r\n\r\nThis was activated by implementing probing functionality that caches `allowed_purposes` responses to prevent this Relay from being party to denial of service attacks where a client might spam requests to Gateways that do not support an allowed purpose.\r\n\r\n---\r\n\r\n`cargo publish --dry-run` succeeds\r\nas does `test_local` with a patched ohttp-relay in `payjoin-test-utils`: `ohttp-relay = { git = \"https://github.com/dangould/ohttp-relay.git\", rev = \"73d189689248080708ca8605833c4227edb35584\", version = \"0.0.10\", features = [\"_test-util\"] }`\r\n", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/64/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/64/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/63", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/63/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/63/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/63", "id": 2918773410, "node_id": "PR_kwDOKsp_MM6OmK3r", "number": 63, "title": "Reuse HTTP client, and accept typed root cert store", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-14T01:38:22Z", "updated_at": "2025-03-14T21:42:50Z", "closed_at": "2025-03-14T21:42:44Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/63", "html_url": "https://github.com/payjoin/ohttp-relay/pull/63", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/63.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/63.patch", "merged_at": "2025-03-14T21:42:44Z"}, "body": "Instead of creating an HTTP client once per forward request, a long lived client is cloned for each request.\r\n\r\nIn the test constructor, requires that a `rustls::RootCertStore` be passed as a configuration for the long lived client directly in from `TestServices` instead of conditionally checking for an env var specified cert root file.\r\n\r\nInexplicably I got it in my head that the e2e tests runs the relay as a binary. Fortunately this is not actually the case, eliminating the potential headache of managing an environment variable with tokio tests. Unfortunately this raises the question, should we run the relay binary in the e2e tests? My vote would be no\r\n\r\nEmbarrassingly replaces the short lived #61, i mean #62 :flushed: ", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/63/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/63/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/62", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/62/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/62/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/62", "id": 2915158799, "node_id": "PR_kwDOKsp_MM6OaG3E", "number": 62, "title": "Use SSL_CERT_FILE env var if set in test builds", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-12T21:02:43Z", "updated_at": "2025-03-12T21:12:14Z", "closed_at": "2025-03-12T21:11:07Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/62", "html_url": "https://github.com/payjoin/ohttp-relay/pull/62", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/62.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/62.patch", "merged_at": "2025-03-12T21:11:06Z"}, "body": "When the _test-util feature is enabled, check to see if SSL_CERT_FILE is set and if that's the case use the native roots rustls connector configuration, which expects that variable to point at a pem file.\r\n\r\nThis allows a self signed certificate to be used for testing purposes, without altering the validation path, but retains webpki roots for normal builds or if the environment variable is not set (i.e. the platform supplied root certificates are not used for test builds, the environment variable must be set for this to take effect).\r\n\r\nReplaces #61", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/62/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/62/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/61", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/61/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/61/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/61", "id": 2914109890, "node_id": "PR_kwDOKsp_MM6OWldh", "number": 61, "title": "Use SSL_CERT_FILE env var if set in test builds", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-03-12T14:08:53Z", "updated_at": "2025-03-12T21:05:30Z", "closed_at": "2025-03-12T20:55:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/61", "html_url": "https://github.com/payjoin/ohttp-relay/pull/61", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/61.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/61.patch", "merged_at": "2025-03-12T20:55:58Z"}, "body": "When the `_test-util` feature is enabled, check to see if `SSL_CERT_FILE` is set and if that's the case use the native roots rustls connector configuration, which expects that variable to point at a pem file.\r\n\r\nThis allows a self signed certificate to be used for testing purposes, without altering the validation path, but retains webpki roots for normal builds or if the environment variable is not set (i.e. the platform supplied root certificates are not used for test builds, the environment variable must be set for this to take effect).", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/61/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/61/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/60", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/60/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/60/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/60", "id": 2911632348, "node_id": "PR_kwDOKsp_MM6OOOBx", "number": 60, "title": "Bump once cell, use lock file", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-11T19:18:48Z", "updated_at": "2025-03-11T23:58:01Z", "closed_at": "2025-03-11T23:58:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/60", "html_url": "https://github.com/payjoin/ohttp-relay/pull/60", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/60.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/60.patch", "merged_at": "2025-03-11T23:58:01Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/60/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/60/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/59", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/59/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/59/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/59/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/59", "id": 2908478698, "node_id": "PR_kwDOKsp_MM6ODuEM", "number": 59, "title": "Fix misleading print (this is relay not directory)", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-10T21:33:06Z", "updated_at": "2025-03-12T20:56:21Z", "closed_at": "2025-03-12T20:33:41Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/59", "html_url": "https://github.com/payjoin/ohttp-relay/pull/59", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/59.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/59.patch", "merged_at": "2025-03-12T20:33:41Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/59/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/59/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/58", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/58/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/58/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/58", "id": 2905761372, "node_id": "PR_kwDOKsp_MM6N6ihk", "number": 58, "title": "Gateway opt in mechanism", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 8187746771, "node_id": "LA_kwDOKsp_MM8AAAAB6AcZ0w", "url": "https://api.github.com/repos/payjoin/ohttp-relay/labels/blocked", "name": "blocked", "color": "aa0000", "default": false, "description": ""}], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2025-03-09T23:53:19Z", "updated_at": "2025-03-17T02:57:03Z", "closed_at": "2025-03-17T02:57:03Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/58", "html_url": "https://github.com/payjoin/ohttp-relay/pull/58", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/58.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/58.patch", "merged_at": "2025-03-17T02:57:03Z"}, "body": "This adds a new `gateway_prober` module, whose main type `Prober` allows checking if a `GatewayUri` is allowed to be queried by the relay.\r\n\r\nThis is done by performing a `GET /.well-known/ohttp-relay?allowed_purposes`. If the response is an `application/x-ohttp-allowed-purposes`, which is a list of values encoded as in TLS ALPN (U16BE for number of elements, U8 length prefix for each binary string value), and this is found to contain the magic string `BIP77 454403bb-9f7b-4385-b31f-acd2dae20b7e`, then the gateway is considered to have opted in to receiving OHTTP requests for this purpose.\r\n\r\nAlthough appropriate in principle, the `Cache-Control` and/or `Retry-After` headers given by the (potential/alleged) gateways are not taken into consideration as no such functionality exists in the payjoin directory's OHTTP gateway implementation, and such functionality would require parsing logic (a crate exists for this FWIW).\r\n\r\nWhen the prober is over capacity (too many cached or inflight gateway probes), a `Cache-Control max-age=...` header is provided for the 503 Service Unavailable response, with the TTL of the earliest expiring entry.\r\n\r\nOther negative responses do not set `Cache-Control`, doing so would require a second `Error::NotFound` variant or some other way of setting that, this doesn't really seem useful for clients or service operators, so that is also omitted for simplicity.\r\n\r\nThis should probably be squashed before merging since the first commit does not past lints due to dead code.\r\n\r\nDepends on #47", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/58/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/58/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/57", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/57/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/57/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/57", "id": 2904342752, "node_id": "PR_kwDOKsp_MM6N2O2z", "number": 57, "title": "Refactor GatewayUri", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-08T01:47:26Z", "updated_at": "2025-03-09T21:38:13Z", "closed_at": "2025-03-09T21:38:13Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/57", "html_url": "https://github.com/payjoin/ohttp-relay/pull/57", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/57.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/57.patch", "merged_at": "2025-03-09T21:38:12Z"}, "body": "Use a non optional Scheme & Authority for representing the internal state, instead of a Uri which may be relative, and may contain a path.\r\n\r\nAuthority is normalized to have an explicit port, as before.\r\n\r\nResolution of authority to a socket addr is now async, to avoid blocking while waiting for host resolution, in anticipation of gateway opt-in allowing adversary chosen hostnames to be resolved which may be a DoS concern.\r\n\r\nCloses #51.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/57/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/57/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/55", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/55/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/55/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/55", "id": 2904285282, "node_id": "PR_kwDOKsp_MM6N2CRW", "number": 55, "title": "Fix dependencies exceeding MSRV", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-03-08T01:15:34Z", "updated_at": "2025-03-08T01:36:19Z", "closed_at": "2025-03-08T01:36:05Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/55", "html_url": "https://github.com/payjoin/ohttp-relay/pull/55", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/55.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/55.patch", "merged_at": "2025-03-08T01:36:05Z"}, "body": "Two crates have later versions that break MSRV 1.63\r\n\r\n- time@0.3.39 is the latest match\r\n- ring 0.17.13 is MSRV 1.66", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/55/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/55/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/50", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/50/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/50/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/50", "id": 2903073981, "node_id": "PR_kwDOKsp_MM6Nx9f0", "number": 50, "title": "Use HeaderValue::from_static instead of a Lazy", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-07T13:55:04Z", "updated_at": "2025-03-09T16:04:52Z", "closed_at": "2025-03-09T16:04:52Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/50", "html_url": "https://github.com/payjoin/ohttp-relay/pull/50", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/50.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/50.patch", "merged_at": "2025-03-09T16:04:52Z"}, "body": "This does not remove the `once_cell` dependency since it's still used in tests, but does relegate it to a dev dependency.\r\n\r\nWith the gateway probing, I think `GatewayUri` might be able to have a `const fn from_static`, addressing the last remaining `Lazy`, but I haven't tried yet so I'm not sure if that'll actually work. That said, if removing the dep is desirable then the test can just be modified.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/50/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/50/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/47", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/47/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/47/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/47", "id": 2834060751, "node_id": "PR_kwDOKsp_MM6KM0xB", "number": 47, "title": "Implement RFC 9540", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-02-05T22:08:50Z", "updated_at": "2025-03-15T02:26:56Z", "closed_at": "2025-03-14T23:45:40Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/47", "html_url": "https://github.com/payjoin/ohttp-relay/pull/47", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/47.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/47.patch", "merged_at": "2025-03-14T23:45:40Z"}, "body": "Note: This is a breaking change, and requires directory support for RFC 9540 as well.\r\n\r\nThis change modifies the relay to assume that both the the OHTTP gateway\r\nand the ohttp keys reside at /.well-known/ohttp-gateway, with POST\r\nrequests implementing the OHTTP gateway functionality and GET requests\r\nfetching the OHTTP keys.\r\n\r\nExtends #46, but does not strictly depend on it.\r\n\r\nDepends on #57", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/47/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/47/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/46", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/46/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/46/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/46", "id": 2834024284, "node_id": "PR_kwDOKsp_MM6KMswd", "number": 46, "title": "Don't copy URI path & query to gateway request", "user": {"login": "nothingmuch", "id": 14242, "node_id": "MDQ6VXNlcjE0MjQy", "avatar_url": "https://avatars.githubusercontent.com/u/14242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nothingmuch", "html_url": "https://github.com/nothingmuch", "followers_url": "https://api.github.com/users/nothingmuch/followers", "following_url": "https://api.github.com/users/nothingmuch/following{/other_user}", "gists_url": "https://api.github.com/users/nothingmuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/nothingmuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nothingmuch/subscriptions", "organizations_url": "https://api.github.com/users/nothingmuch/orgs", "repos_url": "https://api.github.com/users/nothingmuch/repos", "events_url": "https://api.github.com/users/nothingmuch/events{/privacy}", "received_events_url": "https://api.github.com/users/nothingmuch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-02-05T21:46:37Z", "updated_at": "2025-02-21T22:29:11Z", "closed_at": "2025-02-21T22:12:41Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/46", "html_url": "https://github.com/payjoin/ohttp-relay/pull/46", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/46.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/46.patch", "merged_at": "2025-02-21T22:12:41Z"}, "body": "When requests to the relay include a path & query, previously this would be copied to the request sent to the gateway.\r\n\r\nThis behavior did not match the specified behavior in RFC 9458, where the relay and gateway resource are related by a fixed 1:1 mapping, whereas copying the path is a family of 1:1 mappings between relay resources and gateway resources.\r\n\r\nLess pedantic behavior could arguably simply ignore any extraneous path or query elements in the request URI, but based on the logic that any deployment relying on the existing behavior would be incompatible with the existing directory implementation, this more conservative path was chosen.\r\n\r\nThis was only tested manually by temporarily modifying the ohttp_req test helper to ensure it fails (for both the request matching and the explicit treatment of req.uri().path_and_query()), in order to avoid modifying it with additional long lived complexity to allow overriding the path. The rationale is that in the near term protocol opt-in by directories will give meaning to path components of directory requests, and the modified behavior fails closed.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/46/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/46/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/45", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/45/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/45/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/45", "id": 2764539225, "node_id": "PR_kwDOKsp_MM6GgPiO", "number": 45, "title": "Bump ohttp-relay-0.0.9", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-31T16:51:31Z", "updated_at": "2024-12-31T20:47:11Z", "closed_at": "2024-12-31T20:26:08Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/45", "html_url": "https://github.com/payjoin/ohttp-relay/pull/45", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/45.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/45.patch", "merged_at": "2024-12-31T20:26:07Z"}, "body": "Add _test-util feature to allow testing with listen_txp_on_free_port\r\nAdd CHANGELOG.md", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/45/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/45/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/44", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/44/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/44/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/44", "id": 2763906067, "node_id": "PR_kwDOKsp_MM6GeHM1", "number": 44, "title": "Fix nginx race in test harness", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-31T03:18:58Z", "updated_at": "2024-12-31T16:47:22Z", "closed_at": "2024-12-31T16:47:19Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/44", "html_url": "https://github.com/payjoin/ohttp-relay/pull/44", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/44.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/44.patch", "merged_at": "2024-12-31T16:47:19Z"}, "body": "NGINX was also returning before binding to the port, sometimes leading to port contention with other test services\r\n\r\nFix by waiting for it to connect before attempting to start other services\r\n\r\nIf start_nginx fails, throw an error. If it succeeds, return the NginxProcess.\r\n\r\nre @nothingmuch @ https://github.com/payjoin/ohttp-relay/pull/41#pullrequestreview-2526084750", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/44/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/44/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/42", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/42/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/42/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/42", "id": 2763690310, "node_id": "PR_kwDOKsp_MM6GdZzW", "number": 42, "title": "Pin time appropriately for msrv", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-30T20:59:08Z", "updated_at": "2024-12-30T21:41:32Z", "closed_at": "2024-12-30T21:41:31Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/42", "html_url": "https://github.com/payjoin/ohttp-relay/pull/42", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/42.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/42.patch", "merged_at": "2024-12-30T21:41:31Z"}, "body": "time@0.3.34 is no longer a dependency", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/42/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/42/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/41", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/41/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/41/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/41", "id": 2763582139, "node_id": "PR_kwDOKsp_MM6GdCoD", "number": 41, "title": "Add listen_tcp_on_free_port to return a test port", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-12-30T18:55:29Z", "updated_at": "2024-12-31T03:18:29Z", "closed_at": "2024-12-31T03:14:15Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/41", "html_url": "https://github.com/payjoin/ohttp-relay/pull/41", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/41.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/41.patch", "merged_at": "2024-12-31T03:14:15Z"}, "body": "Previously in tests downstream ohttp_relay was initiated with a port\r\nthat may no longer be free by the time it got bound. By having this\r\ncode bind on and return the port the indirection is removed.\r\n\r\nI also found that the way I was having NGINX listen on a free port may also have led to the same problem, so the 3rd commit ensures NGINX is bound before the ohttp_relay tries to get a free port.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/41/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/41/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/40", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/40/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/40/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/40", "id": 2733207295, "node_id": "PR_kwDOKsp_MM6E30cN", "number": 40, "title": "fix: warn FromAsCasing", "user": {"login": "ethicnology", "id": 25751709, "node_id": "MDQ6VXNlcjI1NzUxNzA5", "avatar_url": "https://avatars.githubusercontent.com/u/25751709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ethicnology", "html_url": "https://github.com/ethicnology", "followers_url": "https://api.github.com/users/ethicnology/followers", "following_url": "https://api.github.com/users/ethicnology/following{/other_user}", "gists_url": "https://api.github.com/users/ethicnology/gists{/gist_id}", "starred_url": "https://api.github.com/users/ethicnology/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ethicnology/subscriptions", "organizations_url": "https://api.github.com/users/ethicnology/orgs", "repos_url": "https://api.github.com/users/ethicnology/repos", "events_url": "https://api.github.com/users/ethicnology/events{/privacy}", "received_events_url": "https://api.github.com/users/ethicnology/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-11T14:56:21Z", "updated_at": "2024-12-11T16:07:10Z", "closed_at": "2024-12-11T16:07:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/40", "html_url": "https://github.com/payjoin/ohttp-relay/pull/40", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/40.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/40.patch", "merged_at": "2024-12-11T16:07:10Z"}, "body": "WARN: FromAsCasing: 'as' and 'FROM' keywords' casing do not match\r\n\r\nhttps://docs.docker.com/reference/build-checks/from-as-casing/", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/40/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/40/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/34", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/34/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/34/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/34", "id": 2209739542, "node_id": "PR_kwDOKsp_MM5q3yEI", "number": 34, "title": "`cargo clippy`", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-27T03:24:36Z", "updated_at": "2024-03-27T03:28:01Z", "closed_at": "2024-03-27T03:28:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/34", "html_url": "https://github.com/payjoin/ohttp-relay/pull/34", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/34.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/34.patch", "merged_at": "2024-03-27T03:28:01Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/34/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/34/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/33", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/33/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/33/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/33", "id": 2209591842, "node_id": "PR_kwDOKsp_MM5q3SiS", "number": 33, "title": "Add Cors", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-27T00:43:15Z", "updated_at": "2024-03-27T00:52:16Z", "closed_at": "2024-03-27T00:52:13Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/33", "html_url": "https://github.com/payjoin/ohttp-relay/pull/33", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/33.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/33.patch", "merged_at": "2024-03-27T00:52:13Z"}, "body": "CORS headers allow web browsers to make requests to an ohttp-relay.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/33/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/33/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/32", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/32/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/32/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/32/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/32", "id": 2196097431, "node_id": "PR_kwDOKsp_MM5qJmqP", "number": 32, "title": "Add health check endpoint", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-19T21:57:24Z", "updated_at": "2024-03-19T22:03:56Z", "closed_at": "2024-03-19T22:03:53Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/32", "html_url": "https://github.com/payjoin/ohttp-relay/pull/32", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/32.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/32.patch", "merged_at": "2024-03-19T22:03:53Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/32/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/32/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/31", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/31/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/31/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/31/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/31", "id": 2190745468, "node_id": "PR_kwDOKsp_MM5p3U5L", "number": 31, "title": "Gateway", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-17T16:13:19Z", "updated_at": "2024-03-17T16:20:24Z", "closed_at": "2024-03-17T16:20:24Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/31", "html_url": "https://github.com/payjoin/ohttp-relay/pull/31", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/31.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/31.patch", "merged_at": "2024-03-17T16:20:24Z"}, "body": "- Parse socket address from stronger types\r\n- Add some gateway tracing", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/31/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/31/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/30", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/30/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/30/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/30", "id": 2188632546, "node_id": "PR_kwDOKsp_MM5pwK-a", "number": 30, "title": "Remove empty files", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-15T14:21:24Z", "updated_at": "2024-03-15T14:21:39Z", "closed_at": "2024-03-15T14:21:37Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/30", "html_url": "https://github.com/payjoin/ohttp-relay/pull/30", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/30.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/30.patch", "merged_at": "2024-03-15T14:21:37Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/30/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/30/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/29", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/29/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/29/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/29", "id": 2177869682, "node_id": "PR_kwDOKsp_MM5pLSs9", "number": 29, "title": "Build ohttp-relay in Dockerfile from nix", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-10T19:26:28Z", "updated_at": "2024-03-15T14:08:30Z", "closed_at": "2024-03-15T14:08:23Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/29", "html_url": "https://github.com/payjoin/ohttp-relay/pull/29", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/29.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/29.patch", "merged_at": "2024-03-15T14:08:23Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/29/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/29/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/28", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/28/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/28/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/28", "id": 2177391706, "node_id": "PR_kwDOKsp_MM5pJz1S", "number": 28, "title": "Include nginx.conf.template in src for checks", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-09T20:37:22Z", "updated_at": "2024-03-09T21:37:44Z", "closed_at": "2024-03-09T21:37:41Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/28", "html_url": "https://github.com/payjoin/ohttp-relay/pull/28", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/28.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/28.patch", "merged_at": "2024-03-09T21:37:41Z"}, "body": "This lets nix build check run the tests", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/28/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/28/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/27", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/27/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/27/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/27/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/27", "id": 2165054487, "node_id": "PR_kwDOKsp_MM5ofukN", "number": 27, "title": "Normalize GATEWAY_ORIGIN with GatewayUri type", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-03T00:51:20Z", "updated_at": "2024-03-03T18:03:19Z", "closed_at": "2024-03-03T18:03:19Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/27", "html_url": "https://github.com/payjoin/ohttp-relay/pull/27", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/27.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/27.patch", "merged_at": "2024-03-03T18:03:19Z"}, "body": "\r\nhttp::Uri does not enforce a port. GatewayUri does. Passing GATEWAY_ORIGIN without a port would otherwise succeed for some operations and fail when proxying others as, for example, a request uri authority and gateway origin could mismatch when one has a port and the other does not.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/27/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/27/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/26", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/26/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/26/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/26", "id": 2157605322, "node_id": "PR_kwDOKsp_MM5oGaQZ", "number": 26, "title": "Use 0.0.0.0 loopback everywhere", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-27T21:11:32Z", "updated_at": "2024-02-27T21:21:31Z", "closed_at": "2024-02-27T21:21:28Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/26", "html_url": "https://github.com/payjoin/ohttp-relay/pull/26", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/26.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/26.patch", "merged_at": "2024-02-27T21:21:28Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/26/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/26/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/25", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/25/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/25/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/25", "id": 2157346450, "node_id": "PR_kwDOKsp_MM5oFhFy", "number": 25, "title": "Test NGINX stream reverse proxy", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-27T18:32:13Z", "updated_at": "2024-03-03T01:35:11Z", "closed_at": "2024-03-03T01:35:07Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/25", "html_url": "https://github.com/payjoin/ohttp-relay/pull/25", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/25.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/25.patch", "merged_at": "2024-03-03T01:35:07Z"}, "body": "TLS termination is a bit complex. This crate intends NGINX to do that. This PR tests integration between NGINX configured with stream support and ohttp-relay. Vanilla NGINX or Caddy don't proxy streams, but NGINX supports it natively with compilation flags.\r\n\r\nThe flake configures NGINX with  `--with-stream`, `--with-stream_ssl_module` configuration flags so that NGINX can reverse proxy `proxy_pass` the entire incoming TCP stream rather than individual HTTP requests in order to support CONNECT and WebSocket bootstrap mechanisms.\r\n\r\nTests assume NGINX is built with this configuration in the environment and start them from the shell using a `tokio::process::Command`. This first draft only tests the stream reverse proxy. I'd like the next iteration to test NGINX TLS termination as well, and to include an `nginx.conf` template for simple configuration.\r\n\r\nEnabling a consistent environment for both CI and development is a challenge, but should be possible with nix flakes.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/25/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/25/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/24", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/24/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/24/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/24", "id": 2149410293, "node_id": "PR_kwDOKsp_MM5nqmXG", "number": 24, "title": "Add tracing for logging", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-22T16:05:27Z", "updated_at": "2024-03-16T03:16:14Z", "closed_at": "2024-03-16T03:16:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/24", "html_url": "https://github.com/payjoin/ohttp-relay/pull/24", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/24.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/24.patch", "merged_at": "2024-03-16T03:16:13Z"}, "body": "I thought `#[instrument]` would print params & return values on entry and exit, and this doesn't seem to yet. I want to investigate before merge.\r\n\r\nclose #20 ", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/24/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/24/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/22", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/22/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/22/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/22", "id": 2145670229, "node_id": "PR_kwDOKsp_MM5ndvFo", "number": 22, "title": "Fix nixos test", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-21T02:40:17Z", "updated_at": "2024-02-22T01:47:23Z", "closed_at": "2024-02-22T01:47:21Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/22", "html_url": "https://github.com/payjoin/ohttp-relay/pull/22", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/22.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/22.patch", "merged_at": "2024-02-22T01:47:21Z"}, "body": "DNS lookup happens when a socket address is created. I was using \"gateway.com\" and \"not-gateway.com\" as an examples in tests. I'm not finding DNS records for the second so that may have failed during a build.\r\n\r\nFor good measure I'm also making the loopback bindings 0.0.0.0 which fixed some platform compatibility problems elsewhere earlier.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/22/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/22/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/21", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/21/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/21/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/21", "id": 2145375638, "node_id": "PR_kwDOKsp_MM5ncuhd", "number": 21, "title": "Bump v0.0.2", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-20T22:09:17Z", "updated_at": "2024-02-20T22:18:24Z", "closed_at": "2024-02-20T22:18:22Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/21", "html_url": "https://github.com/payjoin/ohttp-relay/pull/21", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/21.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/21.patch", "merged_at": "2024-02-20T22:18:22Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/21/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/21/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/19", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/19/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/19/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/19", "id": 2145268129, "node_id": "PR_kwDOKsp_MM5ncWxc", "number": 19, "title": "Try parse gateway_origin as Uri", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-20T20:57:40Z", "updated_at": "2024-02-20T22:09:08Z", "closed_at": "2024-02-20T22:08:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/19", "html_url": "https://github.com/payjoin/ohttp-relay/pull/19", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/19.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/19.patch", "merged_at": "2024-02-20T22:08:14Z"}, "body": "... in order to parse SocketAddr out of it more reliably.\r\n\r\nBefore, passing GATEWAY_ORIGIN=\"https://payjo.in\" would not assign a port and might fail on bootstrap mechanisms. The internal function signatures used strings where more precise types helps for maintenance, too.", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/19/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/19/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/18", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/18/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/18/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/18", "id": 2143203299, "node_id": "PR_kwDOKsp_MM5nVTgv", "number": 18, "title": "Ignore `/.vscode`", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-19T21:57:26Z", "updated_at": "2024-02-19T22:06:31Z", "closed_at": "2024-02-19T22:06:15Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/18", "html_url": "https://github.com/payjoin/ohttp-relay/pull/18", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/18.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/18.patch", "merged_at": "2024-02-19T22:06:15Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/18/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/18/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/17", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/17/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/17/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/17", "id": 2134714635, "node_id": "PR_kwDOKsp_MM5m4S3z", "number": 17, "title": "Support https over CONNECT direct key discovery proxy", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-14T16:21:07Z", "updated_at": "2024-02-15T22:27:19Z", "closed_at": "2024-02-15T22:27:11Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/17", "html_url": "https://github.com/payjoin/ohttp-relay/pull/17", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/17.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/17.patch", "merged_at": "2024-02-15T22:27:11Z"}, "body": "OHTTP explicitly leaves gateway key discovery unspecified but mentions some ways one could do it like [direct discovery](https://datatracker.ietf.org/doc/html/draft-ietf-privacypass-key-consistency-01#name-direct-discovery). This implements a CONNECT tunnel endpoint so that OHTTP Clients can make an end to end tunnel to gateways to discover their keys without revealing their IP address to the gateway.\r\n\r\n\r\nImplementing the server support is relatively straightforward.\r\n\r\nHowever, testing by using a client seems more complex. Hyper client [appears to attempt a connection directly to the gateway server first](https://github.com/hyperium/hyper/issues/2560), which would reveal the client IP address. Reqwest claims https-over-https proxy support, but [in my experience appears to fail](https://github.com/seanmonstar/reqwest/issues/423#issuecomment-1925851004). A test should be written to confirm. Ureq [may work for https-in-http but not https-in-https](https://github.com/algesten/ureq/pull/719), and should also be tested.\r\n\r\nFix #14 ", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/17/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/17/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/16", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/16/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/16/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/16", "id": 2133051901, "node_id": "PR_kwDOKsp_MM5myn90", "number": 16, "title": "Enforce cargo fmt", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-13T20:10:16Z", "updated_at": "2024-02-14T16:00:30Z", "closed_at": "2024-02-14T16:00:12Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/16", "html_url": "https://github.com/payjoin/ohttp-relay/pull/16", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/16.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/16.patch", "merged_at": "2024-02-14T16:00:12Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/16/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/16/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/15", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/15/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/15/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/15", "id": 2132891350, "node_id": "PR_kwDOKsp_MM5myFqF", "number": 15, "title": "Organize structure to test in CI", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-13T18:10:41Z", "updated_at": "2024-02-13T18:49:52Z", "closed_at": "2024-02-13T18:49:49Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/15", "html_url": "https://github.com/payjoin/ohttp-relay/pull/15", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/15.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/15.patch", "merged_at": "2024-02-13T18:49:49Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/15/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/15/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/12", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/12/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/12/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/12", "id": 2113710138, "node_id": "PR_kwDOKsp_MM5lxBco", "number": 12, "title": "Remove unnecessary binding", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-01T23:30:14Z", "updated_at": "2024-02-01T23:30:24Z", "closed_at": "2024-02-01T23:30:20Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/12", "html_url": "https://github.com/payjoin/ohttp-relay/pull/12", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/12.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/12.patch", "merged_at": "2024-02-01T23:30:20Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/12/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/12/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/11", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/11/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/11/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/11", "id": 2113397615, "node_id": "PR_kwDOKsp_MM5lv7lI", "number": 11, "title": "Proxy HTTPS GET ohttp-keys requests with bootstrap feature", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-01T20:20:03Z", "updated_at": "2024-02-13T16:26:48Z", "closed_at": "2024-02-12T17:18:15Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/11", "html_url": "https://github.com/payjoin/ohttp-relay/pull/11", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/11.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/11.patch", "merged_at": "2024-02-12T17:18:15Z"}, "body": "The Oblivious HTTP specification requires clients obtain `ohttp-keys` from the OHTTP Gateway but leaves a mechanism for doing so explicitly unspecified.\r\n\r\nThis introduces an HTTPS-in-WebSocket proxy to allow web clients to GET a gateway's ohttp-keys in an end-to-end-encrypted, authenticated manner using the OHTTP relay as a tunnel.\r\n\r\n- [x] Handle errors (don't just unwrap())", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/11/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/11/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/10", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/10/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/10/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/10", "id": 2105595427, "node_id": "PR_kwDOKsp_MM5lVNBH", "number": 10, "title": "Listen on either TcpListener or UnixListener", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-29T14:13:36Z", "updated_at": "2024-02-02T19:57:46Z", "closed_at": "2024-02-02T19:57:43Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/10", "html_url": "https://github.com/payjoin/ohttp-relay/pull/10", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/10.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/10.patch", "merged_at": "2024-02-02T19:57:43Z"}, "body": "Fix #9\r\n\r\nNot as straightforward as I thought it might be", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/10/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/10/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/8", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/8/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/8/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/8", "id": 2100913288, "node_id": "PR_kwDOKsp_MM5lF9Jb", "number": 8, "title": "Add \"Usage\" section", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-01-25T18:05:09Z", "updated_at": "2024-01-25T18:05:47Z", "closed_at": "2024-01-25T18:05:44Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/8", "html_url": "https://github.com/payjoin/ohttp-relay/pull/8", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/8.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/8.patch", "merged_at": "2024-01-25T18:05:44Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/8/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/8/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/7", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/7/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/7/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/7", "id": 2100904995, "node_id": "PR_kwDOKsp_MM5lF7Wq", "number": 7, "title": "Build with flake.nix", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-25T17:59:17Z", "updated_at": "2024-02-02T19:58:14Z", "closed_at": "2024-02-02T19:58:12Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/7", "html_url": "https://github.com/payjoin/ohttp-relay/pull/7", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/7.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/7.patch", "merged_at": "2024-02-02T19:58:12Z"}, "body": "@dongcarl how's this for a build flake?\r\n\r\nWhoever runs this needs to set e.g `PORT=3000` and `GATEWAY_ORIGIN=https://payjo.in`. How would downstream composition with those variables look?", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/7/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/7/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/6", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/6/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/6/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/6", "id": 2099509140, "node_id": "PR_kwDOKsp_MM5lBMo9", "number": 6, "title": "Test ohttp-relay end to end", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-01-25T03:46:39Z", "updated_at": "2024-01-25T16:59:10Z", "closed_at": "2024-01-25T16:59:07Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/6", "html_url": "https://github.com/payjoin/ohttp-relay/pull/6", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/6.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/6.patch", "merged_at": "2024-01-25T16:59:07Z"}, "body": "I believe this even uncovered [errata with RFC 9458](https://www.rfc-editor.org/errata/eid7781)", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/6/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/6/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/5", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/5/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/5/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/5", "id": 2098889713, "node_id": "PR_kwDOKsp_MM5k_F4y", "number": 5, "title": "Replace openresty with Rust hyper relay", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-01-24T18:55:48Z", "updated_at": "2024-01-25T01:32:05Z", "closed_at": "2024-01-25T01:32:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/5", "html_url": "https://github.com/payjoin/ohttp-relay/pull/5", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/5.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/5.patch", "merged_at": "2024-01-25T01:32:01Z"}, "body": "@dongcarl: I Rewrote most of the relay in hyper. Still have to enable TLS, custom server name, and add a flake.nix + Dockerfile", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/5/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/5/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/4", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/4/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/4/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/4", "id": 2061161864, "node_id": "PR_kwDOKsp_MM5i_LH0", "number": 4, "title": "Switch to OpenResty nginx to support CONNECT ohttp keys bootstrap", "user": {"login": "DanGould", "id": 8525467, "node_id": "MDQ6VXNlcjg1MjU0Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/8525467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanGould", "html_url": "https://github.com/DanGould", "followers_url": "https://api.github.com/users/DanGould/followers", "following_url": "https://api.github.com/users/DanGould/following{/other_user}", "gists_url": "https://api.github.com/users/DanGould/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanGould/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanGould/subscriptions", "organizations_url": "https://api.github.com/users/DanGould/orgs", "repos_url": "https://api.github.com/users/DanGould/repos", "events_url": "https://api.github.com/users/DanGould/events{/privacy}", "received_events_url": "https://api.github.com/users/DanGould/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-31T20:25:56Z", "updated_at": "2024-01-04T16:14:11Z", "closed_at": "2024-01-04T16:14:11Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/4", "html_url": "https://github.com/payjoin/ohttp-relay/pull/4", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/4.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/4.patch", "merged_at": "2024-01-04T16:14:11Z"}, "body": "In order to securely fetch the ohttp-config from the payjoin directory, we may tunnel an https request to the server using http CONNECT from this relay. However, Caddy does not support this.\r\n\r\nMy first attempt at this used both\r\n[headers-more-nginx-module](https://github.com/openresty/headers-more-nginx-module) and [ngx_http_proxy_connect_module](https://github.com/chobits/ngx_http_proxy_connect_module), however, it turns out headers-more-nginx-module's more_clear_input_headers '*'; does not function, the argument must be at least of length 2.\r\n\r\nSo I then figured this could be done using a Lua directive and the [lua-nginx-module](https://github.com/openresty/lua-nginx-module) but the documentation was right, it's notoriously difficult to compile.\r\n\r\naccess_by_lua_block {\r\n    local headers = ngx.req.get_headers()\r\n    for k, _ in pairs(headers) do\r\n        ngx.req.clear_header(k)\r\n    end\r\n}\r\n\r\n[OpenResty](https://openresty.org/) seems to be the easiest way to support this lua module and I have been able to build from source.\r\n\r\nThis also handles TLS provisioning in the second patch\r\n\r\nclose https://github.com/payjoin/ohttp-relay/issues/3", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/4/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/4/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/1", "repository_url": "https://api.github.com/repos/payjoin/ohttp-relay", "labels_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/1/comments", "events_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/1/events", "html_url": "https://github.com/payjoin/ohttp-relay/pull/1", "id": 2013161877, "node_id": "PR_kwDOKsp_MM5gfHKd", "number": 1, "title": "Use `rewrite` + `handle_path` for trailing slash and prefixes", "user": {"login": "dongcarl", "id": 3445290, "node_id": "MDQ6VXNlcjM0NDUyOTA=", "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dongcarl", "html_url": "https://github.com/dongcarl", "followers_url": "https://api.github.com/users/dongcarl/followers", "following_url": "https://api.github.com/users/dongcarl/following{/other_user}", "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}", "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions", "organizations_url": "https://api.github.com/users/dongcarl/orgs", "repos_url": "https://api.github.com/users/dongcarl/repos", "events_url": "https://api.github.com/users/dongcarl/events{/privacy}", "received_events_url": "https://api.github.com/users/dongcarl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-27T21:46:56Z", "updated_at": "2023-11-29T04:34:41Z", "closed_at": "2023-11-29T04:34:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/pulls/1", "html_url": "https://github.com/payjoin/ohttp-relay/pull/1", "diff_url": "https://github.com/payjoin/ohttp-relay/pull/1.diff", "patch_url": "https://github.com/payjoin/ohttp-relay/pull/1.patch", "merged_at": "2023-11-29T04:34:41Z"}, "body": "See:\r\n- https://caddyserver.com/docs/caddyfile/patterns#trailing-slashes\r\n- https://caddyserver.com/docs/caddyfile/directives/handle_path", "reactions": {"url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/1/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/payjoin/ohttp-relay/issues/1/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]