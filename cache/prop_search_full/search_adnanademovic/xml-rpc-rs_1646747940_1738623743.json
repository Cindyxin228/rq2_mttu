[{"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/7", "repository_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs", "labels_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/7/comments", "events_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/7/events", "html_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/7", "id": 2806506943, "node_id": "PR_kwDOBgBhHc6IvbRV", "number": 7, "title": "Bump serde-xml-rs to 0.6.0", "user": {"login": "MJohnson459", "id": 1353401, "node_id": "MDQ6VXNlcjEzNTM0MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1353401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MJohnson459", "html_url": "https://github.com/MJohnson459", "followers_url": "https://api.github.com/users/MJohnson459/followers", "following_url": "https://api.github.com/users/MJohnson459/following{/other_user}", "gists_url": "https://api.github.com/users/MJohnson459/gists{/gist_id}", "starred_url": "https://api.github.com/users/MJohnson459/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MJohnson459/subscriptions", "organizations_url": "https://api.github.com/users/MJohnson459/orgs", "repos_url": "https://api.github.com/users/MJohnson459/repos", "events_url": "https://api.github.com/users/MJohnson459/events{/privacy}", "received_events_url": "https://api.github.com/users/MJohnson459/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-01-23T10:23:05Z", "updated_at": "2025-02-03T20:52:58Z", "closed_at": "2025-02-03T20:52:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/pulls/7", "html_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/7", "diff_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/7.diff", "patch_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/7.patch", "merged_at": "2025-02-03T20:52:58Z"}, "body": "This is a minimal change to bump the version of `serde-xml-rs` to a newer version as the current version uses a yanked version of `xml-rs` (`^0.3.6`).\r\n\r\nThis fixes the upsteam issue in [rosrust](https://github.com/adnanademovic/rosrust/issues/210).", "reactions": {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/7/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/7/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/5", "repository_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs", "labels_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/5/comments", "events_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/5/events", "html_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/5", "id": 2507479918, "node_id": "PR_kwDOBgBhHc56gmGS", "number": 5, "title": "fix deserializing Option::Some", "user": {"login": "jobafr", "id": 81627156, "node_id": "MDQ6VXNlcjgxNjI3MTU2", "avatar_url": "https://avatars.githubusercontent.com/u/81627156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jobafr", "html_url": "https://github.com/jobafr", "followers_url": "https://api.github.com/users/jobafr/followers", "following_url": "https://api.github.com/users/jobafr/following{/other_user}", "gists_url": "https://api.github.com/users/jobafr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jobafr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jobafr/subscriptions", "organizations_url": "https://api.github.com/users/jobafr/orgs", "repos_url": "https://api.github.com/users/jobafr/repos", "events_url": "https://api.github.com/users/jobafr/events{/privacy}", "received_events_url": "https://api.github.com/users/jobafr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-09-05T11:08:36Z", "updated_at": "2025-02-03T21:30:26Z", "closed_at": "2025-02-03T21:30:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/pulls/5", "html_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/5", "diff_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/5.diff", "patch_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/5.patch", "merged_at": "2025-02-03T21:30:26Z"}, "body": "Hi,\r\n\r\nthere's a bug when `Deserialize`-ing a struct that contains an `Option` as one of its fields. We use this via `rosrust` to query a substructure of interrelated configuration parameters in a typed manner.\r\n\r\nExample to reproduce:\r\n```rust\r\nuse serde::Deserialize;\r\n\r\n#[derive(Debug, Deserialize)]\r\nstruct Config {\r\n    a : String,\r\n    b : Option<i64>,\r\n    sub : Option<SubStruct>\r\n}\r\n\r\n#[derive(Debug, Deserialize)]\r\nstruct SubStruct {\r\n    c : Option<f32>\r\n}\r\n\r\nfn main() {\r\n    rosrust::init(\"node\");\r\n    let config = rosrust::param(\"/config\").unwrap().get::<Config>().unwrap();\r\n    println!(\"{:#?}\", config);\r\n}\r\n```\r\n\r\nLoad this YAML file as rosparams (`rosparam load params.yaml`):\r\n```\r\nconfig:\r\n  a: \"hello\"\r\n  sub:\r\n    c: 3.1\r\n```\r\n\r\nThen `cargo run` it. With the current git main branch of xml-rpc-rs, we get\r\n```\r\nthread 'main' panicked at src/main.rs:17:69:\r\ncalled `Result::unwrap()` on an `Err` value: Server(\"Response data has unexpected structure: Issue while decoding data structure: invalid value: map, expected option\")\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n\r\nWith this patch, we get:\r\n```\r\nConfig {\r\n    a: \"hello\",\r\n    b: None,\r\n    sub: Some(\r\n        SubStruct {\r\n            c: Some(\r\n                3.1,\r\n            ),\r\n        },\r\n    ),\r\n}\r\n```\r\n\r\nNote that `Option` now behaves as expected for the `Some` case as well as the `None` case (the latter did work already before).", "reactions": {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/5/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/5/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/4", "repository_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs", "labels_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/4/comments", "events_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/4/events", "html_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/4", "id": 2370176845, "node_id": "PR_kwDOBgBhHc5zXS2T", "number": 4, "title": "allow interpreting Value::Int as f64 on deserialization", "user": {"login": "jobafr", "id": 81627156, "node_id": "MDQ6VXNlcjgxNjI3MTU2", "avatar_url": "https://avatars.githubusercontent.com/u/81627156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jobafr", "html_url": "https://github.com/jobafr", "followers_url": "https://api.github.com/users/jobafr/followers", "following_url": "https://api.github.com/users/jobafr/following{/other_user}", "gists_url": "https://api.github.com/users/jobafr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jobafr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jobafr/subscriptions", "organizations_url": "https://api.github.com/users/jobafr/orgs", "repos_url": "https://api.github.com/users/jobafr/repos", "events_url": "https://api.github.com/users/jobafr/events{/privacy}", "received_events_url": "https://api.github.com/users/jobafr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-06-24T12:52:06Z", "updated_at": "2025-02-03T21:30:55Z", "closed_at": "2025-02-03T21:30:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/pulls/4", "html_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/4", "diff_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/4.diff", "patch_url": "https://github.com/adnanademovic/xml-rpc-rs/pull/4.patch", "merged_at": "2025-02-03T21:30:55Z"}, "body": "When setting parameters, roscore casts whole numbers to the integer type, so even if you do something like `rosparam set /lidar_range 1.0`, the parameter will be set to the integer 1, and querying it will give you an integer type result. With current versions of rosrust, this gives me a deserialization error if I try to `get::<f64>()` such a parameter, or have a field of a larger parameter struct that's f64, when the value of that param has been implicitly converted to an integer by roscore.\r\n\r\nWith this patch, such queries succeed, and the integer value gets implicitly converted to f64. This does not change the behavior the other way round, so floats won't get silently rounded and converted to ints or anything.\r\n\r\nThere is the edge case of very large integers that are not representable exactly in f64, but I'd argue that this is not problematic, because for that implicit conversion to happen, you'd still have to be explicitly querying for f64, which would obviously be wrong if f64 cannot hold your expected parameter value.", "reactions": {"url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/4/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/adnanademovic/xml-rpc-rs/issues/4/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]