[{"url": "https://api.github.com/repos/fastly/Viceroy/issues/209", "repository_url": "https://api.github.com/repos/fastly/Viceroy", "labels_url": "https://api.github.com/repos/fastly/Viceroy/issues/209/labels{/name}", "comments_url": "https://api.github.com/repos/fastly/Viceroy/issues/209/comments", "events_url": "https://api.github.com/repos/fastly/Viceroy/issues/209/events", "html_url": "https://github.com/fastly/Viceroy/pull/209", "id": 1462591942, "node_id": "PR_kwDOFucv1c5Dm2Ke", "number": 209, "title": "Update to wasmtime 3.0 and enable wasi-nn calls", "user": {"login": "geekbeast", "id": 3698721, "node_id": "MDQ6VXNlcjM2OTg3MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3698721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geekbeast", "html_url": "https://github.com/geekbeast", "followers_url": "https://api.github.com/users/geekbeast/followers", "following_url": "https://api.github.com/users/geekbeast/following{/other_user}", "gists_url": "https://api.github.com/users/geekbeast/gists{/gist_id}", "starred_url": "https://api.github.com/users/geekbeast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geekbeast/subscriptions", "organizations_url": "https://api.github.com/users/geekbeast/orgs", "repos_url": "https://api.github.com/users/geekbeast/repos", "events_url": "https://api.github.com/users/geekbeast/events{/privacy}", "received_events_url": "https://api.github.com/users/geekbeast/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-24T00:27:04Z", "updated_at": "2023-01-19T23:01:25Z", "closed_at": "2023-01-17T22:17:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastly/Viceroy/pulls/209", "html_url": "https://github.com/fastly/Viceroy/pull/209", "diff_url": "https://github.com/fastly/Viceroy/pull/209.diff", "patch_url": "https://github.com/fastly/Viceroy/pull/209.patch", "merged_at": "2023-01-17T22:17:52Z"}, "body": "The main purpose of this PR was to support wasi-nn calls inside Viceroy. As the necessary changes weren't available until the wasmtime 3.0 release, I also made the updates to to make it compatible with the broader changes in that specific release.\r\n\r\nThe two big changes that came in were changes to the pattern for PoolingAllocationConfig and how error/traps are handled. There was also one minor change in that it looks like the linker is no longer under the tokio namespace.", "reactions": {"url": "https://api.github.com/repos/fastly/Viceroy/issues/209/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastly/Viceroy/issues/209/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/fastly/Viceroy/issues/208", "repository_url": "https://api.github.com/repos/fastly/Viceroy", "labels_url": "https://api.github.com/repos/fastly/Viceroy/issues/208/labels{/name}", "comments_url": "https://api.github.com/repos/fastly/Viceroy/issues/208/comments", "events_url": "https://api.github.com/repos/fastly/Viceroy/issues/208/events", "html_url": "https://github.com/fastly/Viceroy/pull/208", "id": 1453762527, "node_id": "PR_kwDOFucv1c5DIwc3", "number": 208, "title": "Release Viceroy 0.3.2", "user": {"login": "mgattozzi", "id": 3514399, "node_id": "MDQ6VXNlcjM1MTQzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3514399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgattozzi", "html_url": "https://github.com/mgattozzi", "followers_url": "https://api.github.com/users/mgattozzi/followers", "following_url": "https://api.github.com/users/mgattozzi/following{/other_user}", "gists_url": "https://api.github.com/users/mgattozzi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgattozzi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgattozzi/subscriptions", "organizations_url": "https://api.github.com/users/mgattozzi/orgs", "repos_url": "https://api.github.com/users/mgattozzi/repos", "events_url": "https://api.github.com/users/mgattozzi/events{/privacy}", "received_events_url": "https://api.github.com/users/mgattozzi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-17T18:04:01Z", "updated_at": "2022-11-18T17:54:42Z", "closed_at": "2022-11-18T17:54:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastly/Viceroy/pulls/208", "html_url": "https://github.com/fastly/Viceroy/pull/208", "diff_url": "https://github.com/fastly/Viceroy/pull/208.diff", "patch_url": "https://github.com/fastly/Viceroy/pull/208.patch", "merged_at": "2022-11-18T17:54:41Z"}, "body": "Changes since previous version from our CHANGELOG\r\n\r\n## 0.3.2 (2022-11-17)\r\n- Add geolocation implementation to Viceroy\r\n  ([#165](https://github.com/fastly/Viceroy/pull/165))\r\n- Implement async select hostcalls for Viceroy\r\n  ([#188](https://github.com/fastly/Viceroy/pull/188))\r\n- Update wasmtime dependency to 2.0\r\n  ([#194](https://github.com/fastly/Viceroy/pull/194))\r\n- Return a FastlyStatus::Inval when opening a non-existant object-store\r\n  ([#196](https://github.com/fastly/Viceroy/pull/196))\r\n- Add limit exceeded variant to fastly_status witx definition\r\n  ([#199](https://github.com/fastly/Viceroy/pull/199))", "reactions": {"url": "https://api.github.com/repos/fastly/Viceroy/issues/208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastly/Viceroy/issues/208/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/fastly/Viceroy/issues/203", "repository_url": "https://api.github.com/repos/fastly/Viceroy", "labels_url": "https://api.github.com/repos/fastly/Viceroy/issues/203/labels{/name}", "comments_url": "https://api.github.com/repos/fastly/Viceroy/issues/203/comments", "events_url": "https://api.github.com/repos/fastly/Viceroy/issues/203/events", "html_url": "https://github.com/fastly/Viceroy/pull/203", "id": 1442873682, "node_id": "PR_kwDOFucv1c5CkNw8", "number": 203, "title": "\ud83d\udd73 Implement `finish` semantics for streaming bodies", "user": {"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3162799463, "node_id": "MDU6TGFiZWwzMTYyNzk5NDYz", "url": "https://api.github.com/repos/fastly/Viceroy/labels/feature-prod", "name": "feature-prod", "color": "C0C7FB", "default": false, "description": "Related to matching the production C@E environment"}], "state": "closed", "locked": false, "assignee": {"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-11-09T22:47:32Z", "updated_at": "2023-01-18T22:42:12Z", "closed_at": "2023-01-18T22:42:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastly/Viceroy/pulls/203", "html_url": "https://github.com/fastly/Viceroy/pull/203", "diff_url": "https://github.com/fastly/Viceroy/pull/203.diff", "patch_url": "https://github.com/fastly/Viceroy/pull/203.patch", "merged_at": "2023-01-18T22:42:11Z"}, "body": "Moving forward, streaming bodies must be affirmatively finished when Wasm programs are finished writing to them. This helps prevent unexpected control flows due to error handling causing an incomplete `transfer-encoding: chunked` streaming body from appearing complete to its recipient.\r\n\r\nThese changes require updates to the integration test fixtures with a prerelease version of the SDK. Once the 0.9.0 Rust SDK is released, we'll follow up with an update to the released version.", "reactions": {"url": "https://api.github.com/repos/fastly/Viceroy/issues/203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastly/Viceroy/issues/203/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/fastly/Viceroy/issues/188", "repository_url": "https://api.github.com/repos/fastly/Viceroy", "labels_url": "https://api.github.com/repos/fastly/Viceroy/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/fastly/Viceroy/issues/188/comments", "events_url": "https://api.github.com/repos/fastly/Viceroy/issues/188/events", "html_url": "https://github.com/fastly/Viceroy/pull/188", "id": 1400196506, "node_id": "PR_kwDOFucv1c5AV-z1", "number": 188, "title": "Implement Async IO Select Hostcalls", "user": {"login": "mgattozzi", "id": 3514399, "node_id": "MDQ6VXNlcjM1MTQzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3514399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgattozzi", "html_url": "https://github.com/mgattozzi", "followers_url": "https://api.github.com/users/mgattozzi/followers", "following_url": "https://api.github.com/users/mgattozzi/following{/other_user}", "gists_url": "https://api.github.com/users/mgattozzi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgattozzi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgattozzi/subscriptions", "organizations_url": "https://api.github.com/users/mgattozzi/orgs", "repos_url": "https://api.github.com/users/mgattozzi/repos", "events_url": "https://api.github.com/users/mgattozzi/events{/privacy}", "received_events_url": "https://api.github.com/users/mgattozzi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-10-06T19:29:01Z", "updated_at": "2022-11-16T22:39:56Z", "closed_at": "2022-11-16T22:39:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/fastly/Viceroy/pulls/188", "html_url": "https://github.com/fastly/Viceroy/pull/188", "diff_url": "https://github.com/fastly/Viceroy/pull/188.diff", "patch_url": "https://github.com/fastly/Viceroy/pull/188.patch", "merged_at": "2022-11-16T22:39:55Z"}, "body": "This commit adds the fastly_async_io hostcalls `select` and `is_ready`\r\nto Viceroy. Up to this point we only would do `select` for things like\r\n`PendingRequest`. Now we abstract over an `AsyncItem` which could be a\r\n`PendingRequest`, `StreamingBody`, or `Body` and you can call `select`\r\nover any of these async io operations. Most of this code is to\r\naccomodate these changes while maintaining the behavior of `select` for\r\n`PendingRequest` utilizing these new calls and creating the `AsyncItem`\r\nenum to hold all of these differing types in the same `async_item` map.\r\n\r\nWe also add an integration test similar to the C@E platform's to make\r\nsure that we implement the behavior correctly. With this we can be\r\nconfident that select works the way we intend it too! As a bonus side\r\neffect of these changes we also add async support for hosts in our\r\ntesting code in Viceroy which gives us some more flexibility in what we\r\ncan accomplish or use!", "reactions": {"url": "https://api.github.com/repos/fastly/Viceroy/issues/188/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/fastly/Viceroy/issues/188/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]