{"url": "https://api.github.com/repos/linebender/druid/pulls/2327", "id": 1195407382, "node_id": "PR_kwDOCUkQWc5HQHgW", "html_url": "https://github.com/linebender/druid/pull/2327", "diff_url": "https://github.com/linebender/druid/pull/2327.diff", "patch_url": "https://github.com/linebender/druid/pull/2327.patch", "issue_url": "https://api.github.com/repos/linebender/druid/issues/2327", "number": 2327, "state": "closed", "locked": false, "title": "Update Rust edition to 2021.", "user": {"login": "xStrom", "id": 754881, "node_id": "MDQ6VXNlcjc1NDg4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/754881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xStrom", "html_url": "https://github.com/xStrom", "followers_url": "https://api.github.com/users/xStrom/followers", "following_url": "https://api.github.com/users/xStrom/following{/other_user}", "gists_url": "https://api.github.com/users/xStrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/xStrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xStrom/subscriptions", "organizations_url": "https://api.github.com/users/xStrom/orgs", "repos_url": "https://api.github.com/users/xStrom/repos", "events_url": "https://api.github.com/users/xStrom/events{/privacy}", "received_events_url": "https://api.github.com/users/xStrom/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "It seems that we can rather easily upgrade to Rust 2021 and there is currently a direct benefit, so I think we should do it. Specifically clippy 1.67 (beta) is buggy with Rust 2018 as I found out in #2326. Upgrading to Rust 2021 will solve that issue for us.\r\n\r\n---\r\n\r\nThere is an exception in `druid-derive` which will remain Rust 2018. We have macros that use syntax which is [no longer allowed in Rust 2021](https://doc.rust-lang.org/edition-guide/rust-2021/reserving-syntax.html).\r\n\r\n> This is mostly relevant to macros. E.g. `quote!{ #a#b }` is no longer accepted.\r\n\r\n```rust\r\nquote! {\r\n    #[doc = #struct_docs]\r\n    #[allow(non_camel_case_types)]\r\n    #[derive(Debug, Copy, Clone)]\r\n    pub struct #field_name#lens_ty_generics(#(#phantom_decls),*); // <- Illegal in Rust 2021\r\n\r\n    impl #lens_ty_generics #field_name#lens_ty_generics{ // <- Illegal in Rust 2021\r\n        #[doc = #fn_docs]\r\n        pub const fn new()->Self{\r\n            Self(#(#phantom_inits),*)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAs `druid-derive` doesn't have any `assert!` or `debug_assert!` usage that clippy complains about, staying at 2018 there isn't an issue for us right now.", "created_at": "2023-01-12T14:34:35Z", "updated_at": "2023-01-13T16:03:45Z", "closed_at": "2023-01-13T16:03:34Z", "merged_at": "2023-01-13T16:03:34Z", "merge_commit_sha": "839ac479983234c5485f977855a29c1aafddc7bf", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 1742376845, "node_id": "MDU6TGFiZWwxNzQyMzc2ODQ1", "url": "https://api.github.com/repos/linebender/druid/labels/maintenance", "name": "maintenance", "color": "a2eeef", "default": false, "description": "cleans up code or docs"}], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/linebender/druid/pulls/2327/commits", "review_comments_url": "https://api.github.com/repos/linebender/druid/pulls/2327/comments", "review_comment_url": "https://api.github.com/repos/linebender/druid/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/linebender/druid/issues/2327/comments", "statuses_url": "https://api.github.com/repos/linebender/druid/statuses/ec56f8e0b6b9bacc0c093bb88594d6cba604b54c", "head": {"label": "xStrom:rust2021", "ref": "rust2021", "sha": "ec56f8e0b6b9bacc0c093bb88594d6cba604b54c", "user": {"login": "xStrom", "id": 754881, "node_id": "MDQ6VXNlcjc1NDg4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/754881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xStrom", "html_url": "https://github.com/xStrom", "followers_url": "https://api.github.com/users/xStrom/followers", "following_url": "https://api.github.com/users/xStrom/following{/other_user}", "gists_url": "https://api.github.com/users/xStrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/xStrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xStrom/subscriptions", "organizations_url": "https://api.github.com/users/xStrom/orgs", "repos_url": "https://api.github.com/users/xStrom/repos", "events_url": "https://api.github.com/users/xStrom/events{/privacy}", "received_events_url": "https://api.github.com/users/xStrom/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "repo": {"id": 225450484, "node_id": "MDEwOlJlcG9zaXRvcnkyMjU0NTA0ODQ=", "name": "druid", "full_name": "xStrom/druid", "private": false, "owner": {"login": "xStrom", "id": 754881, "node_id": "MDQ6VXNlcjc1NDg4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/754881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xStrom", "html_url": "https://github.com/xStrom", "followers_url": "https://api.github.com/users/xStrom/followers", "following_url": "https://api.github.com/users/xStrom/following{/other_user}", "gists_url": "https://api.github.com/users/xStrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/xStrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xStrom/subscriptions", "organizations_url": "https://api.github.com/users/xStrom/orgs", "repos_url": "https://api.github.com/users/xStrom/repos", "events_url": "https://api.github.com/users/xStrom/events{/privacy}", "received_events_url": "https://api.github.com/users/xStrom/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/xStrom/druid", "description": "A data-first Rust-native UI design toolkit.", "fork": true, "url": "https://api.github.com/repos/xStrom/druid", "forks_url": "https://api.github.com/repos/xStrom/druid/forks", "keys_url": "https://api.github.com/repos/xStrom/druid/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/xStrom/druid/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/xStrom/druid/teams", "hooks_url": "https://api.github.com/repos/xStrom/druid/hooks", "issue_events_url": "https://api.github.com/repos/xStrom/druid/issues/events{/number}", "events_url": "https://api.github.com/repos/xStrom/druid/events", "assignees_url": "https://api.github.com/repos/xStrom/druid/assignees{/user}", "branches_url": "https://api.github.com/repos/xStrom/druid/branches{/branch}", "tags_url": "https://api.github.com/repos/xStrom/druid/tags", "blobs_url": "https://api.github.com/repos/xStrom/druid/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/xStrom/druid/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/xStrom/druid/git/refs{/sha}", "trees_url": "https://api.github.com/repos/xStrom/druid/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/xStrom/druid/statuses/{sha}", "languages_url": "https://api.github.com/repos/xStrom/druid/languages", "stargazers_url": "https://api.github.com/repos/xStrom/druid/stargazers", "contributors_url": "https://api.github.com/repos/xStrom/druid/contributors", "subscribers_url": "https://api.github.com/repos/xStrom/druid/subscribers", "subscription_url": "https://api.github.com/repos/xStrom/druid/subscription", "commits_url": "https://api.github.com/repos/xStrom/druid/commits{/sha}", "git_commits_url": "https://api.github.com/repos/xStrom/druid/git/commits{/sha}", "comments_url": "https://api.github.com/repos/xStrom/druid/comments{/number}", "issue_comment_url": "https://api.github.com/repos/xStrom/druid/issues/comments{/number}", "contents_url": "https://api.github.com/repos/xStrom/druid/contents/{+path}", "compare_url": "https://api.github.com/repos/xStrom/druid/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/xStrom/druid/merges", "archive_url": "https://api.github.com/repos/xStrom/druid/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/xStrom/druid/downloads", "issues_url": "https://api.github.com/repos/xStrom/druid/issues{/number}", "pulls_url": "https://api.github.com/repos/xStrom/druid/pulls{/number}", "milestones_url": "https://api.github.com/repos/xStrom/druid/milestones{/number}", "notifications_url": "https://api.github.com/repos/xStrom/druid/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/xStrom/druid/labels{/name}", "releases_url": "https://api.github.com/repos/xStrom/druid/releases{/id}", "deployments_url": "https://api.github.com/repos/xStrom/druid/deployments", "created_at": "2019-12-02T19:16:59Z", "updated_at": "2020-06-24T15:21:27Z", "pushed_at": "2025-12-14T16:34:32Z", "git_url": "git://github.com/xStrom/druid.git", "ssh_url": "git@github.com:xStrom/druid.git", "clone_url": "https://github.com/xStrom/druid.git", "svn_url": "https://github.com/xStrom/druid", "homepage": "", "size": 6925, "stargazers_count": 0, "watchers_count": 0, "language": "Rust", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "linebender:master", "ref": "master", "sha": "23963d38fdb85761f3a5d1918246958dee3375ad", "user": {"login": "linebender", "id": 46134943, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ2MTM0OTQz", "avatar_url": "https://avatars.githubusercontent.com/u/46134943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linebender", "html_url": "https://github.com/linebender", "followers_url": "https://api.github.com/users/linebender/followers", "following_url": "https://api.github.com/users/linebender/following{/other_user}", "gists_url": "https://api.github.com/users/linebender/gists{/gist_id}", "starred_url": "https://api.github.com/users/linebender/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linebender/subscriptions", "organizations_url": "https://api.github.com/users/linebender/orgs", "repos_url": "https://api.github.com/users/linebender/repos", "events_url": "https://api.github.com/users/linebender/events{/privacy}", "received_events_url": "https://api.github.com/users/linebender/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 155783257, "node_id": "MDEwOlJlcG9zaXRvcnkxNTU3ODMyNTc=", "name": "druid", "full_name": "linebender/druid", "private": false, "owner": {"login": "linebender", "id": 46134943, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ2MTM0OTQz", "avatar_url": "https://avatars.githubusercontent.com/u/46134943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/linebender", "html_url": "https://github.com/linebender", "followers_url": "https://api.github.com/users/linebender/followers", "following_url": "https://api.github.com/users/linebender/following{/other_user}", "gists_url": "https://api.github.com/users/linebender/gists{/gist_id}", "starred_url": "https://api.github.com/users/linebender/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/linebender/subscriptions", "organizations_url": "https://api.github.com/users/linebender/orgs", "repos_url": "https://api.github.com/users/linebender/repos", "events_url": "https://api.github.com/users/linebender/events{/privacy}", "received_events_url": "https://api.github.com/users/linebender/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/linebender/druid", "description": "A data-first Rust-native UI design toolkit. ", "fork": false, "url": "https://api.github.com/repos/linebender/druid", "forks_url": "https://api.github.com/repos/linebender/druid/forks", "keys_url": "https://api.github.com/repos/linebender/druid/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/linebender/druid/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/linebender/druid/teams", "hooks_url": "https://api.github.com/repos/linebender/druid/hooks", "issue_events_url": "https://api.github.com/repos/linebender/druid/issues/events{/number}", "events_url": "https://api.github.com/repos/linebender/druid/events", "assignees_url": "https://api.github.com/repos/linebender/druid/assignees{/user}", "branches_url": "https://api.github.com/repos/linebender/druid/branches{/branch}", "tags_url": "https://api.github.com/repos/linebender/druid/tags", "blobs_url": "https://api.github.com/repos/linebender/druid/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/linebender/druid/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/linebender/druid/git/refs{/sha}", "trees_url": "https://api.github.com/repos/linebender/druid/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/linebender/druid/statuses/{sha}", "languages_url": "https://api.github.com/repos/linebender/druid/languages", "stargazers_url": "https://api.github.com/repos/linebender/druid/stargazers", "contributors_url": "https://api.github.com/repos/linebender/druid/contributors", "subscribers_url": "https://api.github.com/repos/linebender/druid/subscribers", "subscription_url": "https://api.github.com/repos/linebender/druid/subscription", "commits_url": "https://api.github.com/repos/linebender/druid/commits{/sha}", "git_commits_url": "https://api.github.com/repos/linebender/druid/git/commits{/sha}", "comments_url": "https://api.github.com/repos/linebender/druid/comments{/number}", "issue_comment_url": "https://api.github.com/repos/linebender/druid/issues/comments{/number}", "contents_url": "https://api.github.com/repos/linebender/druid/contents/{+path}", "compare_url": "https://api.github.com/repos/linebender/druid/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/linebender/druid/merges", "archive_url": "https://api.github.com/repos/linebender/druid/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/linebender/druid/downloads", "issues_url": "https://api.github.com/repos/linebender/druid/issues{/number}", "pulls_url": "https://api.github.com/repos/linebender/druid/pulls{/number}", "milestones_url": "https://api.github.com/repos/linebender/druid/milestones{/number}", "notifications_url": "https://api.github.com/repos/linebender/druid/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/linebender/druid/labels{/name}", "releases_url": "https://api.github.com/repos/linebender/druid/releases{/id}", "deployments_url": "https://api.github.com/repos/linebender/druid/deployments", "created_at": "2018-11-01T22:25:17Z", "updated_at": "2026-01-17T03:37:49Z", "pushed_at": "2025-12-14T16:34:31Z", "git_url": "git://github.com/linebender/druid.git", "ssh_url": "git@github.com:linebender/druid.git", "clone_url": "https://github.com/linebender/druid.git", "svn_url": "https://github.com/linebender/druid", "homepage": "https://linebender.org/druid/", "size": 10180, "stargazers_count": 9712, "watchers_count": 9712, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": true, "has_discussions": false, "forks_count": 571, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 302, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 571, "open_issues": 302, "watchers": 9712, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/linebender/druid/pulls/2327"}, "html": {"href": "https://github.com/linebender/druid/pull/2327"}, "issue": {"href": "https://api.github.com/repos/linebender/druid/issues/2327"}, "comments": {"href": "https://api.github.com/repos/linebender/druid/issues/2327/comments"}, "review_comments": {"href": "https://api.github.com/repos/linebender/druid/pulls/2327/comments"}, "review_comment": {"href": "https://api.github.com/repos/linebender/druid/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/linebender/druid/pulls/2327/commits"}, "statuses": {"href": "https://api.github.com/repos/linebender/druid/statuses/ec56f8e0b6b9bacc0c093bb88594d6cba604b54c"}}, "author_association": "MEMBER", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "xStrom", "id": 754881, "node_id": "MDQ6VXNlcjc1NDg4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/754881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xStrom", "html_url": "https://github.com/xStrom", "followers_url": "https://api.github.com/users/xStrom/followers", "following_url": "https://api.github.com/users/xStrom/following{/other_user}", "gists_url": "https://api.github.com/users/xStrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/xStrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xStrom/subscriptions", "organizations_url": "https://api.github.com/users/xStrom/orgs", "repos_url": "https://api.github.com/users/xStrom/repos", "events_url": "https://api.github.com/users/xStrom/events{/privacy}", "received_events_url": "https://api.github.com/users/xStrom/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 0, "review_comments": 0, "maintainer_can_modify": false, "commits": 1, "additions": 12, "deletions": 7, "changed_files": 7}