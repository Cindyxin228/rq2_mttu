{"url": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/506", "id": 1982215674, "node_id": "PR_kwDOHrH1d852JjX6", "html_url": "https://github.com/kaspanet/rusty-kaspa/pull/506", "diff_url": "https://github.com/kaspanet/rusty-kaspa/pull/506.diff", "patch_url": "https://github.com/kaspanet/rusty-kaspa/pull/506.patch", "issue_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/issues/506", "number": 506, "state": "closed", "locked": false, "title": "Cumulative PR - omega branch (wRPC v2, integrations, typescript-v2, resolver v2)", "user": {"login": "aspect", "id": 7544020, "node_id": "MDQ6VXNlcjc1NDQwMjA=", "avatar_url": "https://avatars.githubusercontent.com/u/7544020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aspect", "html_url": "https://github.com/aspect", "followers_url": "https://api.github.com/users/aspect/followers", "following_url": "https://api.github.com/users/aspect/following{/other_user}", "gists_url": "https://api.github.com/users/aspect/gists{/gist_id}", "starred_url": "https://api.github.com/users/aspect/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aspect/subscriptions", "organizations_url": "https://api.github.com/users/aspect/orgs", "repos_url": "https://api.github.com/users/aspect/repos", "events_url": "https://api.github.com/users/aspect/events{/privacy}", "received_events_url": "https://api.github.com/users/aspect/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "This is a cumulative PR that merges the following PRs:\r\n\r\nOn `kaspanet/rusty-kaspa`:\r\n- #480 - wRPC v2 (refactored Borsh serialization)\r\n- #470 - CLI wallet watch-only account implementation by @1bananagirl\r\n- #489 - CLI updates\r\n- #486 - Updated typescript bindings (a.k.a. typescript-v2)\r\n\r\nOn `aspectron/rusty-kaspa`:\r\n- https://github.com/aspectron/rusty-kaspa/pull/73 - Fix Wallet API guards (related to Wallet API producing \"insufficient-funds\" error in async clients like KNG)\r\n- https://github.com/aspectron/rusty-kaspa/pull/69 - Custom input signature script API enhancements by @KaffinPX (extends `kaspa-wallet-core/PendingTransaction` APIs allowing for non-standard transactions such as KRC-20).\r\n- https://github.com/aspectron/rusty-kaspa/pull/68 - Enhancements to WASM API for ScriptBuilder by @surinder83singh and @KaffinPX\r\n- https://github.com/aspectron/rusty-kaspa/pull/67 - HexView interface for ScriptBuilder (formatted hex view for scripts)\r\n- https://github.com/aspectron/rusty-kaspa/pull/66 - client-side framework improvements to Mass Calculator (Kip9::Beta variant)\r\n- https://github.com/aspectron/rusty-kaspa/pull/59 - rebased #470 \r\n\r\n***\r\n\r\nThis branch also implements the following RPC methods or updates (all of them are related to `kaspa-resolver` refactoring): \r\n- `get_sync_status()` - provides node sync status (can be used for low-bandwidth node sync status polling)\r\n- `get_connection_count()` - provides the total number of TCP sockets in use by the node (sum of gRPC clients, wRPC clients, and connected peers)\r\n- `get_sysem_info()` - provides a unique ID of the system (a.k.a. machine-id in the Linux universe, with fallback on the mac address on other platforms), git commit hash of the rusty-kaspa repository (if available), total system RAM, number of CPU cores, and the internal FD limit of the kaspad process. These metrics are used by `kaspa-resolver` to profile the node for its socket (RPC client) connection capacity.\r\n- `get_metrics()` RPC call introduces a provisional dictionary-based map for custom metrics.\r\n\r\nIMPORTANT: `get_server_info()` used by the client-side framework is broken in this update due to the change in the data structure (this includes wRPC and gRPC protocols).\r\n\r\nwRPC v2 Borsh encoding introduces breaking protocol changes. wRPC resolver has been reconfigured to operate against the new public node infrastructure that uses wRPC v2 protocol. (ecosystem contributors are currently deploying this infrastructure). Rust and WASM SDK users will not experience any issues as when they update to the new version of the Rust or WASM framework based on this branch, they will switch over to already operational resolvers supporting the new protocol.\r\n\r\nwRPC v2 now introduces custom serializers (located beside their respective associated primitives) where each struct (as well as structs serialized with `serialize!()` macro are serialized into a `Vec<u8>`, which is then serialized into the wrapping structure.  This allows each data structure serialization to become \"elastic\" and introduce new data into payloads, while older clients will ignore it.\r\n\r\n***\r\n\r\nOther updates:\r\n- `kaspa-resolver` crate has been removed from the workspace and relocated to [aspectron/kaspa-resolver](https://github.com/aspectron/kaspa-resolver). This was done as a part of the v2 refactoring that uses an improved methodology for public node tracking.\r\n- Implement paginated access to the Transaction store backed by the browser `IndexDb` WASM interface inside of the `kaspa-wallet-core` crate (by @surinder83singh).\r\n- Fix conditions in `kaspa-wallet-core/UtxoProcessor` causing balance fluctuations during batch transaction processing (by @surinder83singh).\r\n- Introduced `kaspa-utils/git` now contains Git commit hash (long and short), which is now appended to `kaspad` version (a similar functionality was previously PRed in - #338, but in this update, @biryukovmaxim and I have created a custom solution that has a better security profile as it does not require any external `build.rs` dependencies).\r\n", "created_at": "2024-07-22T23:38:24Z", "updated_at": "2025-07-09T19:23:37Z", "closed_at": "2024-08-26T19:52:32Z", "merged_at": "2024-08-26T19:52:32Z", "merge_commit_sha": "1c1a6927d20042953f0389b1089720e515fe74e5", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/506/commits", "review_comments_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/506/comments", "review_comment_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/issues/506/comments", "statuses_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/statuses/9cec07787edf473a68f5a300842fab81747ba67e", "head": {"label": "aspectron:omega", "ref": "omega", "sha": "9cec07787edf473a68f5a300842fab81747ba67e", "user": {"login": "aspectron", "id": 783327, "node_id": "MDEyOk9yZ2FuaXphdGlvbjc4MzMyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/783327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aspectron", "html_url": "https://github.com/aspectron", "followers_url": "https://api.github.com/users/aspectron/followers", "following_url": "https://api.github.com/users/aspectron/following{/other_user}", "gists_url": "https://api.github.com/users/aspectron/gists{/gist_id}", "starred_url": "https://api.github.com/users/aspectron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aspectron/subscriptions", "organizations_url": "https://api.github.com/users/aspectron/orgs", "repos_url": "https://api.github.com/users/aspectron/repos", "events_url": "https://api.github.com/users/aspectron/events{/privacy}", "received_events_url": "https://api.github.com/users/aspectron/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 588316231, "node_id": "R_kgDOIxD-Rw", "name": "rusty-kaspa", "full_name": "aspectron/rusty-kaspa", "private": false, "owner": {"login": "aspectron", "id": 783327, "node_id": "MDEyOk9yZ2FuaXphdGlvbjc4MzMyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/783327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aspectron", "html_url": "https://github.com/aspectron", "followers_url": "https://api.github.com/users/aspectron/followers", "following_url": "https://api.github.com/users/aspectron/following{/other_user}", "gists_url": "https://api.github.com/users/aspectron/gists{/gist_id}", "starred_url": "https://api.github.com/users/aspectron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aspectron/subscriptions", "organizations_url": "https://api.github.com/users/aspectron/orgs", "repos_url": "https://api.github.com/users/aspectron/repos", "events_url": "https://api.github.com/users/aspectron/events{/privacy}", "received_events_url": "https://api.github.com/users/aspectron/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/aspectron/rusty-kaspa", "description": "Work in progress of implementing the Kaspa full-node and related libraries in the RUST programming language.", "fork": true, "url": "https://api.github.com/repos/aspectron/rusty-kaspa", "forks_url": "https://api.github.com/repos/aspectron/rusty-kaspa/forks", "keys_url": "https://api.github.com/repos/aspectron/rusty-kaspa/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/aspectron/rusty-kaspa/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/aspectron/rusty-kaspa/teams", "hooks_url": "https://api.github.com/repos/aspectron/rusty-kaspa/hooks", "issue_events_url": "https://api.github.com/repos/aspectron/rusty-kaspa/issues/events{/number}", "events_url": "https://api.github.com/repos/aspectron/rusty-kaspa/events", "assignees_url": "https://api.github.com/repos/aspectron/rusty-kaspa/assignees{/user}", "branches_url": "https://api.github.com/repos/aspectron/rusty-kaspa/branches{/branch}", "tags_url": "https://api.github.com/repos/aspectron/rusty-kaspa/tags", "blobs_url": "https://api.github.com/repos/aspectron/rusty-kaspa/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/aspectron/rusty-kaspa/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/aspectron/rusty-kaspa/git/refs{/sha}", "trees_url": "https://api.github.com/repos/aspectron/rusty-kaspa/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/aspectron/rusty-kaspa/statuses/{sha}", "languages_url": "https://api.github.com/repos/aspectron/rusty-kaspa/languages", "stargazers_url": "https://api.github.com/repos/aspectron/rusty-kaspa/stargazers", "contributors_url": "https://api.github.com/repos/aspectron/rusty-kaspa/contributors", "subscribers_url": "https://api.github.com/repos/aspectron/rusty-kaspa/subscribers", "subscription_url": "https://api.github.com/repos/aspectron/rusty-kaspa/subscription", "commits_url": "https://api.github.com/repos/aspectron/rusty-kaspa/commits{/sha}", "git_commits_url": "https://api.github.com/repos/aspectron/rusty-kaspa/git/commits{/sha}", "comments_url": "https://api.github.com/repos/aspectron/rusty-kaspa/comments{/number}", "issue_comment_url": "https://api.github.com/repos/aspectron/rusty-kaspa/issues/comments{/number}", "contents_url": "https://api.github.com/repos/aspectron/rusty-kaspa/contents/{+path}", "compare_url": "https://api.github.com/repos/aspectron/rusty-kaspa/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/aspectron/rusty-kaspa/merges", "archive_url": "https://api.github.com/repos/aspectron/rusty-kaspa/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/aspectron/rusty-kaspa/downloads", "issues_url": "https://api.github.com/repos/aspectron/rusty-kaspa/issues{/number}", "pulls_url": "https://api.github.com/repos/aspectron/rusty-kaspa/pulls{/number}", "milestones_url": "https://api.github.com/repos/aspectron/rusty-kaspa/milestones{/number}", "notifications_url": "https://api.github.com/repos/aspectron/rusty-kaspa/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/aspectron/rusty-kaspa/labels{/name}", "releases_url": "https://api.github.com/repos/aspectron/rusty-kaspa/releases{/id}", "deployments_url": "https://api.github.com/repos/aspectron/rusty-kaspa/deployments", "created_at": "2023-01-12T20:48:34Z", "updated_at": "2025-11-28T17:11:44Z", "pushed_at": "2026-01-02T17:05:28Z", "git_url": "git://github.com/aspectron/rusty-kaspa.git", "ssh_url": "git@github.com:aspectron/rusty-kaspa.git", "clone_url": "https://github.com/aspectron/rusty-kaspa.git", "svn_url": "https://github.com/aspectron/rusty-kaspa", "homepage": "", "size": 21517, "stargazers_count": 13, "watchers_count": 13, "language": "Rust", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 6, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 16, "license": {"key": "isc", "name": "ISC License", "spdx_id": "ISC", "url": "https://api.github.com/licenses/isc", "node_id": "MDc6TGljZW5zZTEw"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 6, "open_issues": 16, "watchers": 13, "default_branch": "master"}}, "base": {"label": "kaspanet:dev", "ref": "dev", "sha": "b0f07eff448f4e34193f3b7ace1a14d4b16b48df", "user": {"login": "kaspanet", "id": 31768579, "node_id": "MDEyOk9yZ2FuaXphdGlvbjMxNzY4NTc5", "avatar_url": "https://avatars.githubusercontent.com/u/31768579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaspanet", "html_url": "https://github.com/kaspanet", "followers_url": "https://api.github.com/users/kaspanet/followers", "following_url": "https://api.github.com/users/kaspanet/following{/other_user}", "gists_url": "https://api.github.com/users/kaspanet/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaspanet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaspanet/subscriptions", "organizations_url": "https://api.github.com/users/kaspanet/orgs", "repos_url": "https://api.github.com/users/kaspanet/repos", "events_url": "https://api.github.com/users/kaspanet/events{/privacy}", "received_events_url": "https://api.github.com/users/kaspanet/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 514979191, "node_id": "R_kgDOHrH1dw", "name": "rusty-kaspa", "full_name": "kaspanet/rusty-kaspa", "private": false, "owner": {"login": "kaspanet", "id": 31768579, "node_id": "MDEyOk9yZ2FuaXphdGlvbjMxNzY4NTc5", "avatar_url": "https://avatars.githubusercontent.com/u/31768579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kaspanet", "html_url": "https://github.com/kaspanet", "followers_url": "https://api.github.com/users/kaspanet/followers", "following_url": "https://api.github.com/users/kaspanet/following{/other_user}", "gists_url": "https://api.github.com/users/kaspanet/gists{/gist_id}", "starred_url": "https://api.github.com/users/kaspanet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kaspanet/subscriptions", "organizations_url": "https://api.github.com/users/kaspanet/orgs", "repos_url": "https://api.github.com/users/kaspanet/repos", "events_url": "https://api.github.com/users/kaspanet/events{/privacy}", "received_events_url": "https://api.github.com/users/kaspanet/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/kaspanet/rusty-kaspa", "description": "Kaspa full-node reference implementation and related libraries in the Rust programming language", "fork": false, "url": "https://api.github.com/repos/kaspanet/rusty-kaspa", "forks_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/forks", "keys_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/teams", "hooks_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/hooks", "issue_events_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/issues/events{/number}", "events_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/events", "assignees_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/assignees{/user}", "branches_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/branches{/branch}", "tags_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/tags", "blobs_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/git/refs{/sha}", "trees_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/statuses/{sha}", "languages_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/languages", "stargazers_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/stargazers", "contributors_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/contributors", "subscribers_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/subscribers", "subscription_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/subscription", "commits_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/commits{/sha}", "git_commits_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/git/commits{/sha}", "comments_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/comments{/number}", "issue_comment_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/issues/comments{/number}", "contents_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/contents/{+path}", "compare_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/merges", "archive_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/downloads", "issues_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/issues{/number}", "pulls_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls{/number}", "milestones_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/milestones{/number}", "notifications_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/labels{/name}", "releases_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/releases{/id}", "deployments_url": "https://api.github.com/repos/kaspanet/rusty-kaspa/deployments", "created_at": "2022-07-17T23:32:26Z", "updated_at": "2026-01-21T05:15:39Z", "pushed_at": "2026-01-21T15:36:54Z", "git_url": "git://github.com/kaspanet/rusty-kaspa.git", "ssh_url": "git@github.com:kaspanet/rusty-kaspa.git", "clone_url": "https://github.com/kaspanet/rusty-kaspa.git", "svn_url": "https://github.com/kaspanet/rusty-kaspa", "homepage": "", "size": 16986, "stargazers_count": 769, "watchers_count": 769, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 260, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 131, "license": {"key": "isc", "name": "ISC License", "spdx_id": "ISC", "url": "https://api.github.com/licenses/isc", "node_id": "MDc6TGljZW5zZTEw"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["consensus-protocol", "cryptocurrency", "rust", "wasm"], "visibility": "public", "forks": 260, "open_issues": 131, "watchers": 769, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/506"}, "html": {"href": "https://github.com/kaspanet/rusty-kaspa/pull/506"}, "issue": {"href": "https://api.github.com/repos/kaspanet/rusty-kaspa/issues/506"}, "comments": {"href": "https://api.github.com/repos/kaspanet/rusty-kaspa/issues/506/comments"}, "review_comments": {"href": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/506/comments"}, "review_comment": {"href": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/kaspanet/rusty-kaspa/pulls/506/commits"}, "statuses": {"href": "https://api.github.com/repos/kaspanet/rusty-kaspa/statuses/9cec07787edf473a68f5a300842fab81747ba67e"}}, "author_association": "COLLABORATOR", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": false, "rebaseable": false, "mergeable_state": "dirty", "merged_by": {"login": "michaelsutton", "id": 6299204, "node_id": "MDQ6VXNlcjYyOTkyMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6299204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelsutton", "html_url": "https://github.com/michaelsutton", "followers_url": "https://api.github.com/users/michaelsutton/followers", "following_url": "https://api.github.com/users/michaelsutton/following{/other_user}", "gists_url": "https://api.github.com/users/michaelsutton/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelsutton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelsutton/subscriptions", "organizations_url": "https://api.github.com/users/michaelsutton/orgs", "repos_url": "https://api.github.com/users/michaelsutton/repos", "events_url": "https://api.github.com/users/michaelsutton/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelsutton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 5, "review_comments": 34, "maintainer_can_modify": false, "commits": 190, "additions": 14059, "deletions": 5023, "changed_files": 273}