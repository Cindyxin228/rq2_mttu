[{"url": "https://api.github.com/repos/StardustXR/core/issues/14", "repository_url": "https://api.github.com/repos/StardustXR/core", "labels_url": "https://api.github.com/repos/StardustXR/core/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/StardustXR/core/issues/14/comments", "events_url": "https://api.github.com/repos/StardustXR/core/issues/14/events", "html_url": "https://github.com/StardustXR/core/pull/14", "id": 1828466600, "node_id": "PR_kwDOHQn_L85Wwr_b", "number": 14, "title": "Add Support for sending/recieving file-descriptors in the core messenger", "user": {"login": "UnderSampled", "id": 328009, "node_id": "MDQ6VXNlcjMyODAwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/328009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/UnderSampled", "html_url": "https://github.com/UnderSampled", "followers_url": "https://api.github.com/users/UnderSampled/followers", "following_url": "https://api.github.com/users/UnderSampled/following{/other_user}", "gists_url": "https://api.github.com/users/UnderSampled/gists{/gist_id}", "starred_url": "https://api.github.com/users/UnderSampled/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/UnderSampled/subscriptions", "organizations_url": "https://api.github.com/users/UnderSampled/orgs", "repos_url": "https://api.github.com/users/UnderSampled/repos", "events_url": "https://api.github.com/users/UnderSampled/events{/privacy}", "received_events_url": "https://api.github.com/users/UnderSampled/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-31T06:02:51Z", "updated_at": "2023-07-31T19:42:58Z", "closed_at": "2023-07-31T19:42:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/StardustXR/core/pulls/14", "html_url": "https://github.com/StardustXR/core/pull/14", "diff_url": "https://github.com/StardustXR/core/pull/14.diff", "patch_url": "https://github.com/StardustXR/core/pull/14.patch", "merged_at": "2023-07-31T19:42:58Z"}, "body": "I was not able to use sendFd because it didn't do async, but I was able to learn from it's source how it worked with Tokio and was able to do that myself as well\r\nOriginally, I had planned to include the FDs when the header is sent, but moved it to the body so that the number of FDs could be sent in the header too \r\nthe number to receive is limited by the OS; modern Linux is limited to 253 FDS\r\nwithFd just always made the buffer for receiving the FDs big enough to receive all 253, so I could have done it that way instead and used the suggested cmsg_space macro (I had to reimplement it to accept a variable number of expected FDs, but it was only a few lines) \r\nI brought the FDs all the way up to the scenegraph and mostly stopped there, thinking you'll want to take over from there. \r\n\r\nI also recommend turning the method response return value into a tuple (Vec<u8>, Vec<RawFd>)\r\n\r\nAlso: You have to send some data in the body if you're sending an FD. If that doesn't work for you, we can switch it back to the header message and fixed 253, since the header always has something.\r\n\r\nI did not test it at all, but it did compile.", "reactions": {"url": "https://api.github.com/repos/StardustXR/core/issues/14/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/StardustXR/core/issues/14/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]