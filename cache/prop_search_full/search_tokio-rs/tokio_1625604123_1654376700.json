[{"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4744", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4744/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4744/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4744/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4744", "id": 1260705677, "node_id": "PR_kwDOBAsbdc45HBpy", "number": 4744, "title": "chore: prepare tokio-util 0.7.3", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-04T10:13:42Z", "updated_at": "2022-06-04T20:04:03Z", "closed_at": "2022-06-04T20:04:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4744", "html_url": "https://github.com/tokio-rs/tokio/pull/4744", "diff_url": "https://github.com/tokio-rs/tokio/pull/4744.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4744.patch", "merged_at": "2022-06-04T20:04:02Z"}, "body": "# 0.7.3 (June 4, 2022)\r\n\r\n### Changed\r\n\r\n- tracing: don't require default tracing features ([#4592])\r\n- util: simplify implementation of `ReusableBoxFuture` ([#4675])\r\n\r\n### Added (unstable)\r\n\r\n- task: add `JoinMap` ([#4640], [#4697])\r\n\r\n[#4592]: https://github.com/tokio-rs/tokio/pull/4592\r\n[#4640]: https://github.com/tokio-rs/tokio/pull/4640\r\n[#4675]: https://github.com/tokio-rs/tokio/pull/4675\r\n[#4697]: https://github.com/tokio-rs/tokio/pull/4697", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4744/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4744/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4743", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4743/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4743/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4743/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4743", "id": 1260704841, "node_id": "PR_kwDOBAsbdc45HBgA", "number": 4743, "title": "chore: prepare tokio-stream 0.1.9", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2583818939, "node_id": "MDU6TGFiZWwyNTgzODE4OTM5", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-stream", "name": "A-tokio-stream", "color": "f7e101", "default": false, "description": "Area: The tokio-stream crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-04T10:09:09Z", "updated_at": "2022-06-04T20:04:22Z", "closed_at": "2022-06-04T20:04:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4743", "html_url": "https://github.com/tokio-rs/tokio/pull/4743", "diff_url": "https://github.com/tokio-rs/tokio/pull/4743.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4743.patch", "merged_at": "2022-06-04T20:04:21Z"}, "body": "# 0.1.9 (June 4, 2022)\r\n\r\n- deps: upgrade `tokio-util` dependency to `0.7.x` ([#3762])\r\n- stream: add `StreamExt::map_while` ([#4351])\r\n- stream: add `StreamExt::then` ([#4355])\r\n- stream: add cancel-safety docs to `StreamExt::next` and `try_next` ([#4715])\r\n- stream: expose `Elapsed` error ([#4502])\r\n- stream: expose `Timeout` ([#4601])\r\n- stream: implement `Extend` for `StreamMap` ([#4272])\r\n- sync: add `Clone` to `RecvError` types ([#4560])\r\n\r\n[#3762]: https://github.com/tokio-rs/tokio/pull/3762\r\n[#4272]: https://github.com/tokio-rs/tokio/pull/4272\r\n[#4351]: https://github.com/tokio-rs/tokio/pull/4351\r\n[#4355]: https://github.com/tokio-rs/tokio/pull/4355\r\n[#4502]: https://github.com/tokio-rs/tokio/pull/4502\r\n[#4560]: https://github.com/tokio-rs/tokio/pull/4560\r\n[#4601]: https://github.com/tokio-rs/tokio/pull/4601\r\n[#4715]: https://github.com/tokio-rs/tokio/pull/4715", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4743/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4742", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4742/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4742/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4742/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4742", "id": 1260703533, "node_id": "PR_kwDOBAsbdc45HBRK", "number": 4742, "title": "chore: prepare tokio-macros 1.8.0", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1436302597, "node_id": "MDU6TGFiZWwxNDM2MzAyNTk3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-macros", "name": "A-tokio-macros", "color": "f7e101", "default": false, "description": "Area: The tokio-macros crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-04T10:02:54Z", "updated_at": "2022-06-04T20:04:13Z", "closed_at": "2022-06-04T20:04:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4742", "html_url": "https://github.com/tokio-rs/tokio/pull/4742", "diff_url": "https://github.com/tokio-rs/tokio/pull/4742.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4742.patch", "merged_at": "2022-06-04T20:04:12Z"}, "body": "# 1.8.0 (June 4th, 2022)\r\n\r\n- macros: always emit return statement ([#4636])\r\n- macros: support setting a custom crate name for `#[tokio::main]` and `#[tokio::test]` ([#4613])\r\n\r\n[#4613]: https://github.com/tokio-rs/tokio/pull/4613\r\n[#4636]: https://github.com/tokio-rs/tokio/pull/4636", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4742/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4742/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4740", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4740/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4740/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4740/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4740", "id": 1260242362, "node_id": "PR_kwDOBAsbdc45Fg5b", "number": 4740, "title": "chore: fix changelog typo", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-03T18:44:31Z", "updated_at": "2022-06-03T19:17:13Z", "closed_at": "2022-06-03T19:17:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4740", "html_url": "https://github.com/tokio-rs/tokio/pull/4740", "diff_url": "https://github.com/tokio-rs/tokio/pull/4740.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4740.patch", "merged_at": "2022-06-03T19:17:12Z"}, "body": "Oops.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4740/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4739", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4739/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4739/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4739/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4739", "id": 1260152357, "node_id": "PR_kwDOBAsbdc45FNrO", "number": 4739, "title": "net: Add `take_error` to `TcpSocket` and `TcpStream`", "user": {"login": "mxinden", "id": 7047859, "node_id": "MDQ6VXNlcjcwNDc4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/7047859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mxinden", "html_url": "https://github.com/mxinden", "followers_url": "https://api.github.com/users/mxinden/followers", "following_url": "https://api.github.com/users/mxinden/following{/other_user}", "gists_url": "https://api.github.com/users/mxinden/gists{/gist_id}", "starred_url": "https://api.github.com/users/mxinden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mxinden/subscriptions", "organizations_url": "https://api.github.com/users/mxinden/orgs", "repos_url": "https://api.github.com/users/mxinden/repos", "events_url": "https://api.github.com/users/mxinden/events{/privacy}", "received_events_url": "https://api.github.com/users/mxinden/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993508926, "node_id": "MDU6TGFiZWwxOTkzNTA4OTI2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-net", "name": "M-net", "color": "f7b101", "default": false, "description": "Module: tokio/net"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-03T17:05:39Z", "updated_at": "2022-06-06T09:47:01Z", "closed_at": "2022-06-03T17:50:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4739", "html_url": "https://github.com/tokio-rs/tokio/pull/4739", "diff_url": "https://github.com/tokio-rs/tokio/pull/4739.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4739.patch", "merged_at": "2022-06-03T17:50:52Z"}, "body": "## Motivation\r\n\r\nWhen manually creating a `TcpSocket` or `TcpStream` e.g. via `tokio::net::TcpStream::try_from` one should be able to check for errors after awaiting the connection to be writable (`writable()`) before assuming the connection to be successfully established.\r\n\r\nThis is needed e.g. in rust-libp2p, see https://github.com/libp2p/rust-libp2p/pull/2458.\r\n\r\n## Solution\r\n\r\nThe first commit reintroduces https://github.com/tokio-rs/tokio/pull/4364 which first merged but later on reverted in https://github.com/tokio-rs/tokio/pull/4392. See also https://github.com/tokio-rs/tokio/pull/4392#issuecomment-1035542164.\r\n\r\nThe second commit adds the same method to `TcpStream`.\r\n\r\nTagging @taiki-e as the initial author.\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4739/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4739/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4738", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4738/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4738/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4738/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4738", "id": 1259867234, "node_id": "PR_kwDOBAsbdc45ESWR", "number": 4738, "title": "chore: prepare Tokio v1.19.0", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-03T12:42:32Z", "updated_at": "2022-06-03T18:41:17Z", "closed_at": "2022-06-03T18:41:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4738", "html_url": "https://github.com/tokio-rs/tokio/pull/4738", "diff_url": "https://github.com/tokio-rs/tokio/pull/4738.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4738.patch", "merged_at": "2022-06-03T18:41:16Z"}, "body": "# 1.19.0 (June 3, 2022)\r\n\r\n### Added\r\n\r\n- runtime: add `is_finished` method for `JoinHandle` and `AbortHandle` ([#4709])\r\n- runtime: make global queue and event polling intervals configurable ([#4671])\r\n- sync: add `Notified::enable` ([#4705])\r\n- sync: add `watch::Sender::send_if_modified` ([#4591])\r\n- sync: add resubscribe method to broadcast::Receiver ([#4607])\r\n\r\n### Changed\r\n\r\n- io: refactor out usage of Weak in the io handle ([#4656])\r\n\r\n### Fixed\r\n\r\n- macros: avoid starvation in `join!` and `try_join!` ([#4624])\r\n\r\n### Documented\r\n\r\n- runtime: clarify semantics of tasks outliving `block_on` ([#4729])\r\n- time: fix example for `MissedTickBehavior::Burst` ([#4713])\r\n\r\n### Unstable\r\n\r\n- metrics: correctly update atomics in `IoDriverMetrics` ([#4725])\r\n- metrics: fix compilation with unstable, process, and rt, but without net ([#4682])\r\n- task: add `#[track_caller]` to `JoinSet`/`JoinMap` ([#4697])\r\n- task: add `Builder::{spawn_on, spawn_local_on, spawn_blocking_on}` ([#4683])\r\n- task: add `consume_budget` for cooperative scheduling ([#4498])\r\n- task: add `join_set::Builder` for configuring `JoinSet` tasks ([#4687])\r\n- task: update return value of `JoinSet::join_one` ([#4726])\r\n\r\n[#4498]: https://github.com/tokio-rs/tokio/pull/4498\r\n[#4591]: https://github.com/tokio-rs/tokio/pull/4591\r\n[#4607]: https://github.com/tokio-rs/tokio/pull/4607\r\n[#4624]: https://github.com/tokio-rs/tokio/pull/4624\r\n[#4656]: https://github.com/tokio-rs/tokio/pull/4656\r\n[#4671]: https://github.com/tokio-rs/tokio/pull/4671\r\n[#4682]: https://github.com/tokio-rs/tokio/pull/4682\r\n[#4683]: https://github.com/tokio-rs/tokio/pull/4683\r\n[#4687]: https://github.com/tokio-rs/tokio/pull/4687\r\n[#4697]: https://github.com/tokio-rs/tokio/pull/4697\r\n[#4705]: https://github.com/tokio-rs/tokio/pull/4705\r\n[#4709]: https://github.com/tokio-rs/tokio/pull/4709\r\n[#4713]: https://github.com/tokio-rs/tokio/pull/4713\r\n[#4725]: https://github.com/tokio-rs/tokio/pull/4725\r\n[#4726]: https://github.com/tokio-rs/tokio/pull/4726\r\n[#4729]: https://github.com/tokio-rs/tokio/pull/4729", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4738/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4738/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4735", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4735/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4735/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4735/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4735", "id": 1258458003, "node_id": "PR_kwDOBAsbdc44_a4b", "number": 4735, "title": "Replace non-binding `if let` statements", "user": {"login": "djkoloski", "id": 7554649, "node_id": "MDQ6VXNlcjc1NTQ2NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/7554649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djkoloski", "html_url": "https://github.com/djkoloski", "followers_url": "https://api.github.com/users/djkoloski/followers", "following_url": "https://api.github.com/users/djkoloski/following{/other_user}", "gists_url": "https://api.github.com/users/djkoloski/gists{/gist_id}", "starred_url": "https://api.github.com/users/djkoloski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djkoloski/subscriptions", "organizations_url": "https://api.github.com/users/djkoloski/orgs", "repos_url": "https://api.github.com/users/djkoloski/repos", "events_url": "https://api.github.com/users/djkoloski/events{/privacy}", "received_events_url": "https://api.github.com/users/djkoloski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-02T17:02:09Z", "updated_at": "2022-06-03T07:41:16Z", "closed_at": "2022-06-03T07:41:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4735", "html_url": "https://github.com/tokio-rs/tokio/pull/4735", "diff_url": "https://github.com/tokio-rs/tokio/pull/4735.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4735.patch", "merged_at": "2022-06-03T07:41:16Z"}, "body": "## Motivation\r\n\r\nFound some `if let` statements that don't actually bind any variables. This can make it somewhat confusing as to whether the pattern is binding the value or being matched against (note that irrefutable `if let` patterns are flagged by clippy).\r\n\r\n## Solution\r\n\r\nSwitching to `matches!` and equality comparisons allow these to be removed.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4735/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4735/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4733", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4733/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4733/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4733/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4733", "id": 1257768628, "node_id": "PR_kwDOBAsbdc449Hyi", "number": 4733, "title": "Add 1.18 as LTS release", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-02T06:56:00Z", "updated_at": "2022-06-02T10:57:06Z", "closed_at": "2022-06-02T10:57:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4733", "html_url": "https://github.com/tokio-rs/tokio/pull/4733", "diff_url": "https://github.com/tokio-rs/tokio/pull/4733.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4733.patch", "merged_at": "2022-06-02T10:57:06Z"}, "body": "We should add a new LTS release.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4733/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4731", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4731/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4731/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4731/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4731", "id": 1256273122, "node_id": "PR_kwDOBAsbdc4431AK", "number": 4731, "title": "Check page capacity before obtaining base pointer", "user": {"login": "djkoloski", "id": 7554649, "node_id": "MDQ6VXNlcjc1NTQ2NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/7554649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djkoloski", "html_url": "https://github.com/djkoloski", "followers_url": "https://api.github.com/users/djkoloski/followers", "following_url": "https://api.github.com/users/djkoloski/following{/other_user}", "gists_url": "https://api.github.com/users/djkoloski/gists{/gist_id}", "starred_url": "https://api.github.com/users/djkoloski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djkoloski/subscriptions", "organizations_url": "https://api.github.com/users/djkoloski/orgs", "repos_url": "https://api.github.com/users/djkoloski/repos", "events_url": "https://api.github.com/users/djkoloski/events{/privacy}", "received_events_url": "https://api.github.com/users/djkoloski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-06-01T15:21:27Z", "updated_at": "2022-06-01T19:18:07Z", "closed_at": "2022-06-01T19:18:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4731", "html_url": "https://github.com/tokio-rs/tokio/pull/4731", "diff_url": "https://github.com/tokio-rs/tokio/pull/4731.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4731.patch", "merged_at": "2022-06-01T19:18:07Z"}, "body": "This doesn't cause any issues in practice because this is a private API that is only used in ways that cannot trigger UB. Indexing into `slots` is not sound until after we've asserted that the page is allocated, since that aliases the first slot which may not be allocated. This PR also switches to using `as_ptr` to obtain the base pointer for clarity.\r\n\r\n## Motivation\r\n\r\nWhile reviewing an upgrade of tokio for Fuchsia, we identified a potential soundness issue in `Slots::index_for`. In the future, changes to the uses of the structure could cause UB.\r\n\r\n## Solution\r\n\r\nThe assertion that the page is not empty has been moved earlier in the function and the method for getting a pointer to the first `Vec` element has been changed from `&slots[0] as *const _` to `slots.as_ptr()` which was stabilized in 1.37 and meets MSRV.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4731/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4731/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4729", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4729/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4729/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4729/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4729", "id": 1254279153, "node_id": "PR_kwDOBAsbdc44wyQ1", "number": 4729, "title": "doc: clarify semantics of tasks outliving block_on", "user": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-31T18:48:39Z", "updated_at": "2022-05-31T19:08:54Z", "closed_at": "2022-05-31T19:08:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4729", "html_url": "https://github.com/tokio-rs/tokio/pull/4729", "diff_url": "https://github.com/tokio-rs/tokio/pull/4729.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4729.patch", "merged_at": "2022-05-31T19:08:54Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4729/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4729/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4727", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4727/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4727/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4727/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4727", "id": 1252917899, "node_id": "PR_kwDOBAsbdc44sWEB", "number": 4727, "title": "chore: fix clippy warnings", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-30T16:00:42Z", "updated_at": "2022-05-31T18:26:33Z", "closed_at": "2022-05-31T18:26:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4727", "html_url": "https://github.com/tokio-rs/tokio/pull/4727", "diff_url": "https://github.com/tokio-rs/tokio/pull/4727.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4727.patch", "merged_at": "2022-05-31T18:26:32Z"}, "body": "This fixes the following clippy warnings. (They don't appear in CI because CI uses an older clippy.)\r\n```text\r\nwarning: this expression borrows a value the compiler would automatically borrow\r\n  --> tokio/src/future/poll_fn.rs:38:9\r\n   |\r\n38 |         (&mut self.f)(cx)\r\n   |         ^^^^^^^^^^^^^ help: change this to: `self.f`\r\n   |\r\n   = note: `#[warn(clippy::needless_borrow)]` on by default\r\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#needless_borrow\r\n\r\nwarning: methods called `is_*` usually take `self` by reference or no `self`\r\n  --> tokio/src/io/util/vec_with_initialized.rs:67:28\r\n   |\r\n67 |     pub(crate) fn is_empty(&mut self) -> bool {\r\n   |                            ^^^^^^^^^\r\n   |\r\n   = note: `#[warn(clippy::wrong_self_convention)]` on by default\r\n   = help: consider choosing a less ambiguous name\r\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wrong_self_convention\r\n\r\nwarning: unnecessary use of `to_vec`\r\n   --> tokio/src/net/addr.rs:148:20\r\n    |\r\n148 |         let iter = self.to_vec().into_iter();\r\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^ help: use: `self.iter().copied()`\r\n    |\r\n    = note: `#[warn(clippy::unnecessary_to_owned)]` on by default\r\n    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_to_owned\r\n```", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4727/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4726", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4726/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4726/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4726/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4726", "id": 1252868165, "node_id": "PR_kwDOBAsbdc44sLe_", "number": 4726, "title": "task: update return value of `JoinSet::join_one`", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-30T15:11:10Z", "updated_at": "2022-05-31T07:15:38Z", "closed_at": "2022-05-31T07:15:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4726", "html_url": "https://github.com/tokio-rs/tokio/pull/4726", "diff_url": "https://github.com/tokio-rs/tokio/pull/4726.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4726.patch", "merged_at": "2022-05-31T07:15:37Z"}, "body": "We agreed in #4535 to change the return value of `JoinSet::join_one`. This PR makes that change.\r\n\r\nThis is an unstable API, so changing it is okay.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4726/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4725", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4725/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4725/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4725/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4725", "id": 1252112145, "node_id": "PR_kwDOBAsbdc44pqOS", "number": 4725, "title": "Correctly update atomics in IoDriverMetrics", "user": {"login": "asomers", "id": 129721, "node_id": "MDQ6VXNlcjEyOTcyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/129721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asomers", "html_url": "https://github.com/asomers", "followers_url": "https://api.github.com/users/asomers/followers", "following_url": "https://api.github.com/users/asomers/following{/other_user}", "gists_url": "https://api.github.com/users/asomers/gists{/gist_id}", "starred_url": "https://api.github.com/users/asomers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asomers/subscriptions", "organizations_url": "https://api.github.com/users/asomers/orgs", "repos_url": "https://api.github.com/users/asomers/repos", "events_url": "https://api.github.com/users/asomers/events{/privacy}", "received_events_url": "https://api.github.com/users/asomers/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 3299450450, "node_id": "MDU6TGFiZWwzMjk5NDUwNDUw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-metrics", "name": "M-metrics", "color": "f7b101", "default": false, "description": "Module: tokio/runtime/metrics"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-30T02:46:23Z", "updated_at": "2022-06-03T16:24:25Z", "closed_at": "2022-05-30T09:14:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4725", "html_url": "https://github.com/tokio-rs/tokio/pull/4725", "diff_url": "https://github.com/tokio-rs/tokio/pull/4725.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4725.patch", "merged_at": "2022-05-30T09:14:57Z"}, "body": "Updating an atomic variable with a load followed by a store is racy.  It\r\ndefeats the entire purpose of using atomic variables, and can result in\r\n\"lost\" updates.  Instead, use fetch_add .\r\n\r\n## Motivation\r\n\r\nAvoid inaccurate metrics due to update races.\r\n\r\n## Solution\r\n\r\nAlways use atomic instructions to update atomic variables.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4725/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4715", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4715/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4715/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4715/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4715", "id": 1247160820, "node_id": "PR_kwDOBAsbdc44ZU7D", "number": 4715, "title": "docs: add cancel-safety docs to StreamExt::next methods and types", "user": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993675323, "node_id": "MDU6TGFiZWwxOTkzNjc1MzIz", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-stream", "name": "M-stream", "color": "F7B101", "default": false, "description": "Module: tokio/stream"}, {"id": 2583818939, "node_id": "MDU6TGFiZWwyNTgzODE4OTM5", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-stream", "name": "A-tokio-stream", "color": "f7e101", "default": false, "description": "Area: The tokio-stream crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-24T21:50:09Z", "updated_at": "2022-05-31T15:22:16Z", "closed_at": "2022-05-27T08:28:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4715", "html_url": "https://github.com/tokio-rs/tokio/pull/4715", "diff_url": "https://github.com/tokio-rs/tokio/pull/4715.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4715.patch", "merged_at": "2022-05-27T08:28:30Z"}, "body": "## Motivation\r\n\r\nMany futures are commonly used in `select!` (or similar) constructs, and people are interested to know which futures are cancel-safe. Two such common features are `next` and `try_next`, to get new values from a `Stream`. These only hold onto references to the underlying stream, and are therefor cancel-safe.\r\n\r\n## Solution\r\n\r\nDocument the cancel-safety of the `StreamExt::next` and `StreamExt::try_next` methods (and their underlying future types)\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4715/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4713", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4713/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4713/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4713/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4713", "id": 1244307724, "node_id": "PR_kwDOBAsbdc44P6bk", "number": 4713, "title": "docs: correct example in MissedTickBehavior::Burst", "user": {"login": "ekzhang", "id": 7550632, "node_id": "MDQ6VXNlcjc1NTA2MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/7550632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekzhang", "html_url": "https://github.com/ekzhang", "followers_url": "https://api.github.com/users/ekzhang/followers", "following_url": "https://api.github.com/users/ekzhang/following{/other_user}", "gists_url": "https://api.github.com/users/ekzhang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekzhang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekzhang/subscriptions", "organizations_url": "https://api.github.com/users/ekzhang/orgs", "repos_url": "https://api.github.com/users/ekzhang/repos", "events_url": "https://api.github.com/users/ekzhang/events{/privacy}", "received_events_url": "https://api.github.com/users/ekzhang/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993513841, "node_id": "MDU6TGFiZWwxOTkzNTEzODQx", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-time", "name": "M-time", "color": "f7b101", "default": false, "description": "Module: tokio/time"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-22T16:43:32Z", "updated_at": "2022-05-22T22:11:20Z", "closed_at": "2022-05-22T19:22:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4713", "html_url": "https://github.com/tokio-rs/tokio/pull/4713", "diff_url": "https://github.com/tokio-rs/tokio/pull/4713.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4713.patch", "merged_at": "2022-05-22T19:22:03Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\nHi there! While looking at the [docs for MissedTickBehavior](https://docs.rs/tokio/1.18.2/tokio/time/enum.MissedTickBehavior.html#variant.Burst), I noticed that the comments in the code example have a very small error.\r\n\r\n```rust\r\nuse tokio::time::{interval, Duration};\r\n\r\nlet mut interval = interval(Duration::from_millis(50));\r\n\r\ntask_that_takes_200_millis().await;\r\n// The `Interval` has missed a tick\r\n\r\n// Since we have exceeded our timeout, this will resolve immediately\r\ninterval.tick().await;\r\n\r\n// Since we are more than 100ms after the start of `interval`, this will\r\n// also resolve immediately.\r\ninterval.tick().await;\r\n\r\n// Also resolves immediately, because it was supposed to resolve at\r\n// 150ms after the start of `interval`\r\ninterval.tick().await;\r\n\r\n// Resolves immediately\r\ninterval.tick().await;\r\n\r\n// Since we have gotten to 200ms after the start of `interval`, this\r\n// will resolve after 50ms\r\ninterval.tick().await;\r\n```\r\n\r\nThe code example forgets that the first `interval.tick()` resolves immediately after creation. So if you print out all of the elapsed times after each tick, you'll see that they all resolve immediately. \r\n\r\nHere's a [playground link](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=1981aebae29f25555ae390079ca27782) that shows the issue. If you run this code then you'll see the following output:\r\n\r\n```\r\n1. 201.484664ms\r\n2. 201.523575ms\r\n3. 201.528885ms\r\n4. 201.535065ms\r\n5. 201.555235ms\r\n```\r\n\r\nHowever, if you uncomment line 11, which has the extra `interval.tick().await;` that this PR proposes, then the output changes to what would be expected in the docs:\r\n\r\n```\r\n1. 202.916324ms\r\n2. 203.013206ms\r\n3. 203.050227ms\r\n4. 203.094128ms\r\n5. 251.418813ms\r\n```\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\n\r\nThis PR fixes the issue by just adding one more line with `interval.tick().await` at the beginning of the example, before the long task.\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4713/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4712", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4712/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4712/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4712/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4712", "id": 1244269659, "node_id": "PR_kwDOBAsbdc44PzQT", "number": 4712, "title": "Add broadcast to list of channel types", "user": {"login": "barafael", "id": 6966738, "node_id": "MDQ6VXNlcjY5NjY3Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/6966738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barafael", "html_url": "https://github.com/barafael", "followers_url": "https://api.github.com/users/barafael/followers", "following_url": "https://api.github.com/users/barafael/following{/other_user}", "gists_url": "https://api.github.com/users/barafael/gists{/gist_id}", "starred_url": "https://api.github.com/users/barafael/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barafael/subscriptions", "organizations_url": "https://api.github.com/users/barafael/orgs", "repos_url": "https://api.github.com/users/barafael/repos", "events_url": "https://api.github.com/users/barafael/events{/privacy}", "received_events_url": "https://api.github.com/users/barafael/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-22T14:19:14Z", "updated_at": "2022-05-22T16:46:34Z", "closed_at": "2022-05-22T16:46:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4712", "html_url": "https://github.com/tokio-rs/tokio/pull/4712", "diff_url": "https://github.com/tokio-rs/tokio/pull/4712.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4712.patch", "merged_at": "2022-05-22T16:46:34Z"}, "body": "## Motivation\r\n\r\nI was for a moment irritated when reading the \"Working with Tasks\" because only 3 channel types were listed there.\r\n\r\n## Solution\r\n\r\nList the `broadcast` channel type there too.\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4712/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4710", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4710/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4710/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4710/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4710", "id": 1243965927, "node_id": "PR_kwDOBAsbdc44O4xS", "number": 4710, "title": "chore: fix cargo audit warning", "user": {"login": "name1e5s", "id": 15176913, "node_id": "MDQ6VXNlcjE1MTc2OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/15176913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/name1e5s", "html_url": "https://github.com/name1e5s", "followers_url": "https://api.github.com/users/name1e5s/followers", "following_url": "https://api.github.com/users/name1e5s/following{/other_user}", "gists_url": "https://api.github.com/users/name1e5s/gists{/gist_id}", "starred_url": "https://api.github.com/users/name1e5s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/name1e5s/subscriptions", "organizations_url": "https://api.github.com/users/name1e5s/orgs", "repos_url": "https://api.github.com/users/name1e5s/repos", "events_url": "https://api.github.com/users/name1e5s/events{/privacy}", "received_events_url": "https://api.github.com/users/name1e5s/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-21T12:33:53Z", "updated_at": "2022-05-21T13:17:42Z", "closed_at": "2022-05-21T13:17:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4710", "html_url": "https://github.com/tokio-rs/tokio/pull/4710", "diff_url": "https://github.com/tokio-rs/tokio/pull/4710.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4710.patch", "merged_at": "2022-05-21T13:17:42Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\nFix RUSTSEC-2020-0095(#4012)\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\nBump mockall version to 0.11", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4710/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4710/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4709", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4709/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4709/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4709/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4709", "id": 1243958321, "node_id": "PR_kwDOBAsbdc44O3Kp", "number": 4709, "title": "chore(runtime): add `is_finished` method for `JoinHandle` and `AbortHandle`", "user": {"login": "name1e5s", "id": 15176913, "node_id": "MDQ6VXNlcjE1MTc2OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/15176913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/name1e5s", "html_url": "https://github.com/name1e5s", "followers_url": "https://api.github.com/users/name1e5s/followers", "following_url": "https://api.github.com/users/name1e5s/following{/other_user}", "gists_url": "https://api.github.com/users/name1e5s/gists{/gist_id}", "starred_url": "https://api.github.com/users/name1e5s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/name1e5s/subscriptions", "organizations_url": "https://api.github.com/users/name1e5s/orgs", "repos_url": "https://api.github.com/users/name1e5s/repos", "events_url": "https://api.github.com/users/name1e5s/events{/privacy}", "received_events_url": "https://api.github.com/users/name1e5s/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-21T12:08:23Z", "updated_at": "2022-05-31T09:22:10Z", "closed_at": "2022-05-31T09:22:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4709", "html_url": "https://github.com/tokio-rs/tokio/pull/4709", "diff_url": "https://github.com/tokio-rs/tokio/pull/4709.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4709.patch", "merged_at": "2022-05-31T09:22:09Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\nadd `is_finished` method for `JoinHandle` and `AbortHandle` .\r\nClose #4707\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\n\r\nCheck task's state is whether `COMPLETE` or `CANCELLED`. \r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4709/reactions", "total_count": 4, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 2, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4709/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4706", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4706/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4706/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4706/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4706", "id": 1241927136, "node_id": "PR_kwDOBAsbdc44INV0", "number": 4706, "title": "chore: update macro output tests for 1.61.0", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1436302597, "node_id": "MDU6TGFiZWwxNDM2MzAyNTk3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-macros", "name": "A-tokio-macros", "color": "f7e101", "default": false, "description": "Area: The tokio-macros crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-19T15:05:15Z", "updated_at": "2022-05-19T15:55:12Z", "closed_at": "2022-05-19T15:55:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4706", "html_url": "https://github.com/tokio-rs/tokio/pull/4706", "diff_url": "https://github.com/tokio-rs/tokio/pull/4706.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4706.patch", "merged_at": "2022-05-19T15:55:11Z"}, "body": "Rust version 1.61.0 was just released, and it comes with some changes to how errors are formatted.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4706/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4706/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4705", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4705/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4705/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4705/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4705", "id": 1241615999, "node_id": "PR_kwDOBAsbdc44HLoQ", "number": 4705, "title": "sync: add `Notified::enable`", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-19T11:15:19Z", "updated_at": "2022-06-05T06:53:44Z", "closed_at": "2022-05-19T16:31:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4705", "html_url": "https://github.com/tokio-rs/tokio/pull/4705", "diff_url": "https://github.com/tokio-rs/tokio/pull/4705.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4705.patch", "merged_at": "2022-05-19T16:31:23Z"}, "body": "This adds a new method `Notified::enable` and adds a bunch more documentation to `Notify`.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4705/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4699", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4699/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4699/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4699/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4699", "id": 1239180671, "node_id": "PR_kwDOBAsbdc43_HvZ", "number": 4699, "title": "chore: add Netlify doc previews", "user": {"login": "davidbarsky", "id": 2067774, "node_id": "MDQ6VXNlcjIwNjc3NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2067774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidbarsky", "html_url": "https://github.com/davidbarsky", "followers_url": "https://api.github.com/users/davidbarsky/followers", "following_url": "https://api.github.com/users/davidbarsky/following{/other_user}", "gists_url": "https://api.github.com/users/davidbarsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidbarsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidbarsky/subscriptions", "organizations_url": "https://api.github.com/users/davidbarsky/orgs", "repos_url": "https://api.github.com/users/davidbarsky/repos", "events_url": "https://api.github.com/users/davidbarsky/events{/privacy}", "received_events_url": "https://api.github.com/users/davidbarsky/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 2119690410, "node_id": "MDU6TGFiZWwyMTE5NjkwNDEw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-ci", "name": "A-ci", "color": "f7e101", "default": false, "description": "Area: The continuous integration setup"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-17T21:35:07Z", "updated_at": "2022-05-19T07:30:07Z", "closed_at": "2022-05-19T07:30:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4699", "html_url": "https://github.com/tokio-rs/tokio/pull/4699", "diff_url": "https://github.com/tokio-rs/tokio/pull/4699.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4699.patch", "merged_at": "2022-05-19T07:30:07Z"}, "body": "This branch (tries) to setup tracing-style rustdoc previews in PRs; I'm not sure if it works yet. We'll see! I'll update this PR accordingly.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4699/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4699/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4698", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4698/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4698/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4698/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4698", "id": 1238886442, "node_id": "PR_kwDOBAsbdc43-IUc", "number": 4698, "title": "rt: fix flaky `wake_while_rt_is_dropping` test", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-17T16:24:18Z", "updated_at": "2022-05-17T17:20:38Z", "closed_at": "2022-05-17T17:20:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4698", "html_url": "https://github.com/tokio-rs/tokio/pull/4698", "diff_url": "https://github.com/tokio-rs/tokio/pull/4698.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4698.patch", "merged_at": "2022-05-17T17:20:35Z"}, "body": "Fix flaky test introduced by #4696.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4698/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4697", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4697/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4697/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4697/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4697", "id": 1237389340, "node_id": "PR_kwDOBAsbdc435DQT", "number": 4697, "title": "task: add `#[track_caller]` to `JoinSet`/`JoinMap`", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-16T16:16:27Z", "updated_at": "2022-05-16T16:36:25Z", "closed_at": "2022-05-16T16:36:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4697", "html_url": "https://github.com/tokio-rs/tokio/pull/4697", "diff_url": "https://github.com/tokio-rs/tokio/pull/4697.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4697.patch", "merged_at": "2022-05-16T16:36:24Z"}, "body": "## Motivation\r\n\r\nCurrently, the various spawning methods on `tokio::task::JoinSet` and\r\n`tokio_util::task::JoinMap` lack `#[track_caller]` attributes, so the\r\n`tracing` spans generated for tasks spawned on `JoinSet`s/`JoinMap`s\r\nwill have the `JoinSet` spawning method as their spawn location, rather\r\nthan the user code that called that method.\r\n\r\n## Solution\r\n\r\nThis PR fixes that by...adding a bunch of `#[track_caller]` attributes.\r\n\r\n## Future Work\r\n\r\nIn the future, we may also want to consider adding additional data to\r\nthe task span indicating that the task is spawned on a `JoinSet`...", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4697/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4697/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4696", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4696/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4696/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4696/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4696", "id": 1236459703, "node_id": "PR_kwDOBAsbdc4319Wq", "number": 4696, "title": "Enable ASAN in CI", "user": {"login": "Finomnis", "id": 3129043, "node_id": "MDQ6VXNlcjMxMjkwNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/3129043?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Finomnis", "html_url": "https://github.com/Finomnis", "followers_url": "https://api.github.com/users/Finomnis/followers", "following_url": "https://api.github.com/users/Finomnis/following{/other_user}", "gists_url": "https://api.github.com/users/Finomnis/gists{/gist_id}", "starred_url": "https://api.github.com/users/Finomnis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Finomnis/subscriptions", "organizations_url": "https://api.github.com/users/Finomnis/orgs", "repos_url": "https://api.github.com/users/Finomnis/repos", "events_url": "https://api.github.com/users/Finomnis/events{/privacy}", "received_events_url": "https://api.github.com/users/Finomnis/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2119690410, "node_id": "MDU6TGFiZWwyMTE5NjkwNDEw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-ci", "name": "A-ci", "color": "f7e101", "default": false, "description": "Area: The continuous integration setup"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-15T23:22:28Z", "updated_at": "2022-05-16T15:26:05Z", "closed_at": "2022-05-16T14:57:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4696", "html_url": "https://github.com/tokio-rs/tokio/pull/4696", "diff_url": "https://github.com/tokio-rs/tokio/pull/4696.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4696.patch", "merged_at": "2022-05-16T14:57:03Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\nLLVM's ASAN is a very useful tool to find memory leaks, and it is built-in for the rust nightly compier.\r\n\r\nWhen I ran it on my local computer, there were several memory leaks detected in the tests.\r\nAccording to the LLVM docs, ASAN does not produce false positives.\r\n\r\nSadly, ASAN is not yet enabled in the CI.\r\n\r\n## Solution\r\n- [x] Enable ASAN in CI\r\n- [x] Fix leaks\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4696/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4696/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4693", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4693/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4693/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4693/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4693", "id": 1236218694, "node_id": "PR_kwDOBAsbdc431Nk0", "number": 4693, "title": "Merge tokio-util 0.7.2", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-15T08:09:45Z", "updated_at": "2022-05-15T18:17:10Z", "closed_at": "2022-05-15T18:17:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4693", "html_url": "https://github.com/tokio-rs/tokio/pull/4693", "diff_url": "https://github.com/tokio-rs/tokio/pull/4693.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4693.patch", "merged_at": "2022-05-15T18:17:09Z"}, "body": "Merges changelog changes from #4691 and #4690 into master with a merge commit.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4693/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4691", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4691/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4691/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4691/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4691", "id": 1236027969, "node_id": "PR_kwDOBAsbdc430q2x", "number": 4691, "title": "Prepare tokio-util 0.6.10", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-14T15:18:51Z", "updated_at": "2022-05-14T20:19:39Z", "closed_at": "2022-05-14T20:19:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4691", "html_url": "https://github.com/tokio-rs/tokio/pull/4691", "diff_url": "https://github.com/tokio-rs/tokio/pull/4691.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4691.patch", "merged_at": "2022-05-14T20:19:39Z"}, "body": "# 0.6.10 (May 14, 2021)\r\n\r\nThis is a backport for a memory leak in `CancellationToken`. ([#4652])\r\n\r\n[#4652]: https://github.com/tokio-rs/tokio/pull/4652", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4691/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4691/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4690", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4690/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4690/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4690/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4690", "id": 1235937901, "node_id": "PR_kwDOBAsbdc430fdG", "number": 4690, "title": "Prepare tokio-util 0.7.2", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-14T10:27:56Z", "updated_at": "2022-05-15T08:06:31Z", "closed_at": "2022-05-15T08:06:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4690", "html_url": "https://github.com/tokio-rs/tokio/pull/4690", "diff_url": "https://github.com/tokio-rs/tokio/pull/4690.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4690.patch", "merged_at": "2022-05-15T08:06:29Z"}, "body": "# 0.7.2 (May 14, 2022)\r\n\r\nThis release contains a rewrite of `CancellationToken` that fixes a memory leak. ([#4652])\r\n\r\nTo avoid preventing people from getting this fix, we have not included the other changes to tokio-util on master, because they include a bump of the required version of Tokio to 1.18. However, this release _does_ bump the required version of Tokio from 1.6 to 1.7 because it is required by the fix.\r\n\r\n[#4652]: https://github.com/tokio-rs/tokio/pull/4652", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4690/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4689", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4689/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4689/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4689/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4689", "id": 1235935951, "node_id": "PR_kwDOBAsbdc430fE7", "number": 4689, "title": "Display JoinMap on docs.rs", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-14T10:18:05Z", "updated_at": "2022-05-14T16:55:30Z", "closed_at": "2022-05-14T16:55:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4689", "html_url": "https://github.com/tokio-rs/tokio/pull/4689", "diff_url": "https://github.com/tokio-rs/tokio/pull/4689.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4689.patch", "merged_at": "2022-05-14T16:55:27Z"}, "body": "Currently, the new `JoinMap` introduced by [#4640] would not be visible on [docs.rs] because we don't enable unstable features.\r\n\r\n[#4640]: https://github.com/tokio-rs/tokio/pull/4640\r\n[docs.rs]: https://docs.rs/tokio-util/", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4689/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4687", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4687/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4687/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4687/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4687", "id": 1235628211, "node_id": "PR_kwDOBAsbdc43zjGr", "number": 4687, "title": "task: add `join_set::Builder` for configuring `JoinSet` tasks", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-13T19:47:52Z", "updated_at": "2022-05-30T16:23:41Z", "closed_at": "2022-05-30T16:23:40Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4687", "html_url": "https://github.com/tokio-rs/tokio/pull/4687", "diff_url": "https://github.com/tokio-rs/tokio/pull/4687.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4687.patch", "merged_at": "2022-05-30T16:23:40Z"}, "body": "## Motivation\r\n\r\nThe `JoinSet` API controls the spawning of tasks on a `JoinSet` --- a\r\nfuture is passed into one of `JoinSet`'s `spawn` methods, rather than\r\nhaving the user spawn the task on their own and pass a `JoinHandle` into\r\nthe `JoinSet`. This is intended to ensure forwards-compatibility with\r\npotential future changes where a `JoinSet` might allocate new tasks\r\ndifferently from how the public `tokio::spawn` and similar APIs do.\r\nHowever, it means that `JoinSet` needs to have a number of API methods\r\nfor various _ways_ of spawning a task, including on a `LocalSet` or via\r\na runtime `Handle`.\r\n\r\nCurrently, there is no way to use a `task::Builder` to configure a task\r\nprior to spawning it on a `JoinSet`. This is a deficiency, as it means\r\nthat (unstable) task names cannot be added to tasks spawned on a\r\n`JoinSet`.\r\n\r\nSee\r\nhttps://github.com/tokio-rs/tokio/issues/4535#issuecomment-1124339615\r\nfor details.\r\n\r\n## Solution\r\n\r\nThis branch introduces a new `JoinSet::build_task()` method that returns\r\na new `join_set::Builder` type. This type is a variant of\r\n`task::Builder` which exposes a similar API, but it wraps both a\r\n`task::Builder` and an `&mut JoinSet`, and spawns the built task on that\r\n`JoinSet`.\r\n\r\nI felt like this was the best approach from the perspective of the\r\nuser-facing API. It does require a bit of boilerplate code to duplicate\r\nthe `task::Builder` interface for the `JoinSet::builder` type, but I\r\nthink the interface presented to the user of the API is much nicer than\r\nan approach where `spawn_{whatever}_with_builder` methods are added to\r\nthe `JoinSet` type. I discussed this a bit in this comment:\r\nhttps://github.com/tokio-rs/tokio/issues/4535#issuecomment-1125241378\r\n\r\nThis depends on #4683, which adds `spawn_on` methods to the\r\n`task::Builder` API. These are necessary to implement `JoinSet`'s `spawn_on`\r\nmethods using a task builder, but are also probably just generally useful.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4687/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4683", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4683/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4683/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4683/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4683", "id": 1234328267, "node_id": "PR_kwDOBAsbdc43vQSK", "number": 4683, "title": "task: add `Builder::{spawn_on, spawn_local_on, spawn_blocking_on}`", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-05-12T18:15:22Z", "updated_at": "2022-05-16T18:04:00Z", "closed_at": "2022-05-14T17:44:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4683", "html_url": "https://github.com/tokio-rs/tokio/pull/4683", "diff_url": "https://github.com/tokio-rs/tokio/pull/4683.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4683.patch", "merged_at": "2022-05-14T17:44:47Z"}, "body": "## Motivation\r\n\r\n`task::JoinSet` currently has both `spawn`/`spawn_local` methods,\r\nand `spawn_on`/`spawn_local_on` variants of these methods that take a\r\nreference to a runtime `Handle` or to a `LocalSet`, and spawn tasks on\r\nthe provided runtime/`LocalSet`, rather than the current one. The\r\n`task::Builder` type is _also_ an API type that can spawn tasks, but it\r\ndoesn't have `spawn_on` variants of its methods. It occurred to me that\r\nit would be nice to have similar APIs on `task::Builder`.\r\n\r\n## Solution\r\n\r\nThis branch adds `task::Builder::spawn_on`,\r\n`task::Builder::spawn_local_on`, and `task::Builder::spawn_blocking_on`\r\nmethods, similar to those on `JoinSet`. In addition, I did some\r\nrefactoring of the internal spawning APIs --- there was a bit of\r\nduplicated code that this PR reduces.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4683/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4682", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4682/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4682/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4682/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4682", "id": 1233057934, "node_id": "PR_kwDOBAsbdc43rEfN", "number": 4682, "title": "metrics: fix compilation with unstable, process, and rt", "user": {"login": "Noah-Kennedy", "id": 9875622, "node_id": "MDQ6VXNlcjk4NzU2MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/9875622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Noah-Kennedy", "html_url": "https://github.com/Noah-Kennedy", "followers_url": "https://api.github.com/users/Noah-Kennedy/followers", "following_url": "https://api.github.com/users/Noah-Kennedy/following{/other_user}", "gists_url": "https://api.github.com/users/Noah-Kennedy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Noah-Kennedy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Noah-Kennedy/subscriptions", "organizations_url": "https://api.github.com/users/Noah-Kennedy/orgs", "repos_url": "https://api.github.com/users/Noah-Kennedy/repos", "events_url": "https://api.github.com/users/Noah-Kennedy/events{/privacy}", "received_events_url": "https://api.github.com/users/Noah-Kennedy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 439897188, "node_id": "MDU6TGFiZWw0Mzk4OTcxODg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 3299450450, "node_id": "MDU6TGFiZWwzMjk5NDUwNDUw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-metrics", "name": "M-metrics", "color": "f7b101", "default": false, "description": "Module: tokio/runtime/metrics"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-11T18:54:27Z", "updated_at": "2022-05-11T19:31:38Z", "closed_at": "2022-05-11T19:31:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4682", "html_url": "https://github.com/tokio-rs/tokio/pull/4682", "diff_url": "https://github.com/tokio-rs/tokio/pull/4682.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4682.patch", "merged_at": "2022-05-11T19:31:37Z"}, "body": "Fixes #4681.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4682/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4682/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4676", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4676/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4676/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4676/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4676", "id": 1231411802, "node_id": "PR_kwDOBAsbdc43lw3T", "number": 4676, "title": "docs: mention that Clippy must be run with the MSRV", "user": {"login": "SabrinaJewson", "id": 58880148, "node_id": "MDQ6VXNlcjU4ODgwMTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/58880148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SabrinaJewson", "html_url": "https://github.com/SabrinaJewson", "followers_url": "https://api.github.com/users/SabrinaJewson/followers", "following_url": "https://api.github.com/users/SabrinaJewson/following{/other_user}", "gists_url": "https://api.github.com/users/SabrinaJewson/gists{/gist_id}", "starred_url": "https://api.github.com/users/SabrinaJewson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SabrinaJewson/subscriptions", "organizations_url": "https://api.github.com/users/SabrinaJewson/orgs", "repos_url": "https://api.github.com/users/SabrinaJewson/repos", "events_url": "https://api.github.com/users/SabrinaJewson/events{/privacy}", "received_events_url": "https://api.github.com/users/SabrinaJewson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-05-10T16:29:14Z", "updated_at": "2022-06-18T07:50:31Z", "closed_at": "2022-05-10T17:53:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4676", "html_url": "https://github.com/tokio-rs/tokio/pull/4676", "diff_url": "https://github.com/tokio-rs/tokio/pull/4676.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4676.patch", "merged_at": "2022-05-10T17:53:44Z"}, "body": "## Motivation\r\n\r\nIn #4675 I learnt the hard way that Tokio uses Clippy on its MSRV. \r\n\r\n## Solution\r\n\r\nDocument this in the contributor's guide.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4676/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4676/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4675", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4675/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4675/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4675/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4675", "id": 1231331975, "node_id": "PR_kwDOBAsbdc43lf6o", "number": 4675, "title": "util: implement `ReusableBoxFuture` with one function", "user": {"login": "SabrinaJewson", "id": 58880148, "node_id": "MDQ6VXNlcjU4ODgwMTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/58880148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SabrinaJewson", "html_url": "https://github.com/SabrinaJewson", "followers_url": "https://api.github.com/users/SabrinaJewson/followers", "following_url": "https://api.github.com/users/SabrinaJewson/following{/other_user}", "gists_url": "https://api.github.com/users/SabrinaJewson/gists{/gist_id}", "starred_url": "https://api.github.com/users/SabrinaJewson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SabrinaJewson/subscriptions", "organizations_url": "https://api.github.com/users/SabrinaJewson/orgs", "repos_url": "https://api.github.com/users/SabrinaJewson/repos", "events_url": "https://api.github.com/users/SabrinaJewson/events{/privacy}", "received_events_url": "https://api.github.com/users/SabrinaJewson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-10T15:22:22Z", "updated_at": "2022-05-14T05:49:03Z", "closed_at": "2022-05-13T21:39:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4675", "html_url": "https://github.com/tokio-rs/tokio/pull/4675", "diff_url": "https://github.com/tokio-rs/tokio/pull/4675.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4675.patch", "merged_at": "2022-05-13T21:39:13Z"}, "body": "## Motivation\r\n\r\n`ReusableBoxFuture` is currently complex-ish, with `unsafe` code and types in multiple places.\r\n\r\n## Solution\r\n\r\nMove all the `unsafe`ty into a single function `reuse_pin_box` (and a helper type). I think this makes the definition of `ReusableBoxFuture` a bit simpler, and I'm pretty sure that it's sound. The function has the signature:\r\n\r\n```rs\r\nfn reuse_pin_box<T: ?Sized, U, O, F>(boxed: Pin<Box<T>>, new_value: U, callback: F) -> Result<O, U>\r\nwhere\r\n    F: FnOnce(Box<U>) -> O,\r\n```\r\n\r\nIt encapsulates the basic premise of `ReusableBoxFuture` \u2014 a `Box` that can be reused \u2014 and `ReusableBoxFuture` is then implemented on top of it. It accepts a callback instead of returning `Result<Box<U>, O>` so that code can be run even if dropping the old `T` fails.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4675/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4671", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4671/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4671/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4671/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4671", "id": 1230346808, "node_id": "PR_kwDOBAsbdc43iQ-T", "number": 4671, "title": "Make global queue and event polling intervals configurable", "user": {"login": "aturon", "id": 709807, "node_id": "MDQ6VXNlcjcwOTgwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aturon", "html_url": "https://github.com/aturon", "followers_url": "https://api.github.com/users/aturon/followers", "following_url": "https://api.github.com/users/aturon/following{/other_user}", "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}", "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aturon/subscriptions", "organizations_url": "https://api.github.com/users/aturon/orgs", "repos_url": "https://api.github.com/users/aturon/repos", "events_url": "https://api.github.com/users/aturon/events{/privacy}", "received_events_url": "https://api.github.com/users/aturon/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-05-09T23:01:14Z", "updated_at": "2022-06-02T20:06:38Z", "closed_at": "2022-05-18T09:23:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4671", "html_url": "https://github.com/tokio-rs/tokio/pull/4671", "diff_url": "https://github.com/tokio-rs/tokio/pull/4671.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4671.patch", "merged_at": "2022-05-18T09:23:54Z"}, "body": "Closes #4651\r\n\r\n# Motivation\r\n\r\nSome workloads strongly benefit from changing the scheduler constants that control:\r\n\r\n* Global queue polling\r\n* Event polling (the driver: timer, process, and I/O events)\r\n\r\n# Solution\r\n\r\nAdds knobs to the runtime builder to control the number of ticks between polling the global task queue (fairness) and the event driver (I/O prioritization). The default values for these knobs are determined based on what scheduler kind the builder is started with.\r\n\r\nBoth varieties of scheduler already supported these intervals, but they were defined by private constants. This PR moves the constants into the `Core` struct, where they can be supplied by the builder configuration.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4671/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4671/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4669", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4669/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4669/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4669/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4669", "id": 1228971720, "node_id": "PR_kwDOBAsbdc43dvPX", "number": 4669, "title": "Merge 1.18.2", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-08T19:47:07Z", "updated_at": "2022-05-08T21:36:57Z", "closed_at": "2022-05-08T21:36:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4669", "html_url": "https://github.com/tokio-rs/tokio/pull/4669", "diff_url": "https://github.com/tokio-rs/tokio/pull/4669.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4669.patch", "merged_at": "2022-05-08T21:36:56Z"}, "body": "Merge the changelog changes in #4666 into master.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4669/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4669/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4666", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4666/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4666/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4666/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4666", "id": 1228954105, "node_id": "PR_kwDOBAsbdc43dr8z", "number": 4666, "title": "Prepare tokio 1.18.2", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-08T18:20:06Z", "updated_at": "2022-05-08T19:41:16Z", "closed_at": "2022-05-08T19:41:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4666", "html_url": "https://github.com/tokio-rs/tokio/pull/4666", "diff_url": "https://github.com/tokio-rs/tokio/pull/4666.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4666.patch", "merged_at": "2022-05-08T19:41:15Z"}, "body": "# 1.18.2 (May 5, 2022)\r\n\r\nAdd missing features for the `winapi` dependency. ([#4663])\r\n\r\n[#4663]: https://github.com/tokio-rs/tokio/pull/4663", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4666/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4666/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4663", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4663/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4663/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4663/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4663", "id": 1228944897, "node_id": "PR_kwDOBAsbdc43dqPf", "number": 4663, "title": "windows: add feature std for winapi", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-08T17:37:41Z", "updated_at": "2022-05-08T18:29:17Z", "closed_at": "2022-05-08T18:14:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4663", "html_url": "https://github.com/tokio-rs/tokio/pull/4663", "diff_url": "https://github.com/tokio-rs/tokio/pull/4663.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4663.patch", "merged_at": "2022-05-08T18:14:29Z"}, "body": "Switching from winapi to windows-sys in mio means that the `std` feature of winapi is no longer enabled when compiling Tokio on windows. However, in this case, the `c_void` type is not the same as the `c_void` type in the standard library, which causes some compiler errors in various places.\r\n\r\n(The first commit to this PR does not add the feature to verify that CI catches the issue when its not fixed.)\r\n\r\nCloses: #4662", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4663/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4658", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4658/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4658/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4658/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4658", "id": 1228594788, "node_id": "PR_kwDOBAsbdc43cp2g", "number": 4658, "title": "util: improve `impl Send for ReusableBoxFuture` docs", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-07T10:39:47Z", "updated_at": "2022-05-07T20:32:30Z", "closed_at": "2022-05-07T20:32:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4658", "html_url": "https://github.com/tokio-rs/tokio/pull/4658", "diff_url": "https://github.com/tokio-rs/tokio/pull/4658.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4658.patch", "merged_at": "2022-05-07T20:32:30Z"}, "body": "The safety comment is unclear.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4658/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4656", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4656/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4656/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4656/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4656", "id": 1226983602, "node_id": "PR_kwDOBAsbdc43Xrti", "number": 4656, "title": "io: Refactor out usage of Weak in the io handle", "user": {"login": "hidva", "id": 17427025, "node_id": "MDQ6VXNlcjE3NDI3MDI1", "avatar_url": "https://avatars.githubusercontent.com/u/17427025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hidva", "html_url": "https://github.com/hidva", "followers_url": "https://api.github.com/users/hidva/followers", "following_url": "https://api.github.com/users/hidva/following{/other_user}", "gists_url": "https://api.github.com/users/hidva/gists{/gist_id}", "starred_url": "https://api.github.com/users/hidva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hidva/subscriptions", "organizations_url": "https://api.github.com/users/hidva/orgs", "repos_url": "https://api.github.com/users/hidva/repos", "events_url": "https://api.github.com/users/hidva/events{/privacy}", "received_events_url": "https://api.github.com/users/hidva/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-05-05T17:37:05Z", "updated_at": "2022-05-19T08:24:39Z", "closed_at": "2022-05-19T08:24:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4656", "html_url": "https://github.com/tokio-rs/tokio/pull/4656", "diff_url": "https://github.com/tokio-rs/tokio/pull/4656.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4656.patch", "merged_at": "2022-05-19T08:24:28Z"}, "body": "\r\n## Motivation\r\n\r\nFix https://github.com/tokio-rs/tokio/issues/4509\r\n\r\n## Solution\r\n\r\nThe cycle is broken by making sure nobody can register a new io resources on shutdown and by emptying the driver.\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4656/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4655", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4655/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4655/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4655/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4655", "id": 1226947074, "node_id": "PR_kwDOBAsbdc43Xj3R", "number": 4655, "title": "Document and shrink some unsafe blocks in tokio-util", "user": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-05-05T16:58:20Z", "updated_at": "2022-05-05T19:48:40Z", "closed_at": "2022-05-05T19:48:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4655", "html_url": "https://github.com/tokio-rs/tokio/pull/4655", "diff_url": "https://github.com/tokio-rs/tokio/pull/4655.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4655.patch", "merged_at": "2022-05-05T19:48:39Z"}, "body": "## Motivation\r\n\r\nWe are auditing a tokio update in https://fuchsia-review.googlesource.com/c/fuchsia/+/611683, and we thought it would save other auditors time if we documented and shrunk down some `unsafe {}` blocks.\r\n\r\n## Solution\r\n\r\nThis documents why it is safe to convert `bytes::UninitSlice` to `&mut [MaybeUninit<u8>]`, and shrinks one of the unsafe blocks to make these functions easier to audit.\r\n\r\nThis also removes an out of date comment around converting a `&mut [MaybeUninit<u8>]` to a `&mut [u8]`, which predated the conversion over to `ReadBuf`, and is no longer applicable to the code.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4655/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4655/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4652", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4652/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4652/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4652/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4652", "id": 1223490216, "node_id": "PR_kwDOBAsbdc43MuwX", "number": 4652, "title": "Rewrite tokio-util::sync::CancellationToken", "user": {"login": "Finomnis", "id": 3129043, "node_id": "MDQ6VXNlcjMxMjkwNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/3129043?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Finomnis", "html_url": "https://github.com/Finomnis", "followers_url": "https://api.github.com/users/Finomnis/followers", "following_url": "https://api.github.com/users/Finomnis/following{/other_user}", "gists_url": "https://api.github.com/users/Finomnis/gists{/gist_id}", "starred_url": "https://api.github.com/users/Finomnis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Finomnis/subscriptions", "organizations_url": "https://api.github.com/users/Finomnis/orgs", "repos_url": "https://api.github.com/users/Finomnis/repos", "events_url": "https://api.github.com/users/Finomnis/events{/privacy}", "received_events_url": "https://api.github.com/users/Finomnis/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2022-05-03T00:17:52Z", "updated_at": "2023-07-23T13:33:52Z", "closed_at": "2022-05-13T21:26:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4652", "html_url": "https://github.com/tokio-rs/tokio/pull/4652", "diff_url": "https://github.com/tokio-rs/tokio/pull/4652.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4652.patch", "merged_at": "2022-05-13T21:26:15Z"}, "body": "Fixes leak from https://github.com/tokio-rs/tokio/issues/4639.\r\n\r\n## Motivation\r\nCancellationToken uses a lot of unsafe code and seems to be error-prone.\r\n\r\n## Solution\r\n\r\n@Darksonn suggested a rewrite.\r\n\r\nAfter a discussion on discord this is my attempt to combine and polish our ideas.\r\n\r\nA thorough review will be necessary.\r\n\r\n## State\r\n\r\n- [x] Architectural discussion on discord\r\n- [x] Rewrite attempt\r\n- [x] Close TODOs in code\r\n- [x] Clippy\r\n- [x] More tests? (Related: https://github.com/tokio-rs/tokio/pull/4645)\r\n- [x] Thorough review of @Darksonn\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4652/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4650", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4650/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4650/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4650/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4650", "id": 1222782497, "node_id": "PR_kwDOBAsbdc43KYZZ", "number": 4650, "title": "tokio: prepare Tokio v1.18.1", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-02T11:38:05Z", "updated_at": "2022-05-02T15:07:28Z", "closed_at": "2022-05-02T15:07:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4650", "html_url": "https://github.com/tokio-rs/tokio/pull/4650", "diff_url": "https://github.com/tokio-rs/tokio/pull/4650.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4650.patch", "merged_at": "2022-05-02T15:07:28Z"}, "body": "# 1.18.1 (May 2, 2022)\r\n\r\nThe 1.18.0 release broke the build for targets without 64-bit atomics when building with `tokio_unstable`. This release fixes that. ([#4649])\r\n\r\n[#4649]: https://github.com/tokio-rs/tokio/pull/4649", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4650/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4649", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4649/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4649/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4649/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4649", "id": 1222608846, "node_id": "PR_kwDOBAsbdc43JzVm", "number": 4649, "title": "Use mocked AtomicU64 in IO metrics driver", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 3299450450, "node_id": "MDU6TGFiZWwzMjk5NDUwNDUw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-metrics", "name": "M-metrics", "color": "f7b101", "default": false, "description": "Module: tokio/runtime/metrics"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-02T08:12:37Z", "updated_at": "2022-05-02T11:33:10Z", "closed_at": "2022-05-02T11:33:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4649", "html_url": "https://github.com/tokio-rs/tokio/pull/4649", "diff_url": "https://github.com/tokio-rs/tokio/pull/4649.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4649.patch", "merged_at": "2022-05-02T11:32:59Z"}, "body": "Closes: #4648", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4649/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4646", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4646/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4646/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4646/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4646", "id": 1222045058, "node_id": "PR_kwDOBAsbdc43H9Nn", "number": 4646, "title": "Update actions/checkout action to v3", "user": {"login": "taiki-e", "id": 43724913, "node_id": "MDQ6VXNlcjQzNzI0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/43724913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taiki-e", "html_url": "https://github.com/taiki-e", "followers_url": "https://api.github.com/users/taiki-e/followers", "following_url": "https://api.github.com/users/taiki-e/following{/other_user}", "gists_url": "https://api.github.com/users/taiki-e/gists{/gist_id}", "starred_url": "https://api.github.com/users/taiki-e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taiki-e/subscriptions", "organizations_url": "https://api.github.com/users/taiki-e/orgs", "repos_url": "https://api.github.com/users/taiki-e/repos", "events_url": "https://api.github.com/users/taiki-e/events{/privacy}", "received_events_url": "https://api.github.com/users/taiki-e/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2119690410, "node_id": "MDU6TGFiZWwyMTE5NjkwNDEw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-ci", "name": "A-ci", "color": "f7e101", "default": false, "description": "Area: The continuous integration setup"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-05-01T06:44:06Z", "updated_at": "2022-05-04T13:54:17Z", "closed_at": "2022-05-04T13:54:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4646", "html_url": "https://github.com/tokio-rs/tokio/pull/4646", "diff_url": "https://github.com/tokio-rs/tokio/pull/4646.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4646.patch", "merged_at": "2022-05-04T13:54:16Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4646/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4641", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4641/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4641/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4641/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4641", "id": 1217609626, "node_id": "PR_kwDOBAsbdc42424-", "number": 4641, "title": "tokio: prepare to release v1.18.0", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-04-27T16:39:36Z", "updated_at": "2022-04-27T17:08:08Z", "closed_at": "2022-04-27T17:08:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4641", "html_url": "https://github.com/tokio-rs/tokio/pull/4641", "diff_url": "https://github.com/tokio-rs/tokio/pull/4641.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4641.patch", "merged_at": "2022-04-27T17:08:07Z"}, "body": "# 1.18.0 (April 27, 2022)\r\n\r\nThis release adds a number of new APIs in `tokio::net`, `tokio::signal`, and\r\n`tokio::sync`. In addition, it adds new unstable APIs to `tokio::task` (`Id`s\r\nfor uniquely identifying a task, and `AbortHandle` for remotely cancelling a\r\ntask), as well as a number of bugfixes.\r\n\r\n### Fixed\r\n\r\n- blocking: add missing `#[track_caller]` for `spawn_blocking` ([#4616])\r\n- macros: fix `select` macro to process 64 branches ([#4519])\r\n- net: fix `try_io` methods not calling Mio's `try_io` internally ([#4582])\r\n- runtime: recover when OS fails to spawn a new thread ([#4485])\r\n\r\n### Added\r\n\r\n- macros: support setting a custom crate name for `#[tokio::main]` and\r\n  `#[tokio::test]` ([#4613])\r\n- net: add `UdpSocket::peer_addr` ([#4611])\r\n- net: add `try_read_buf` method for named pipes ([#4626])\r\n- signal: add `SignalKind` `Hash`/`Eq` impls and `c_int` conversion ([#4540])\r\n- signal: add support for signals up to `SIGRTMAX` ([#4555])\r\n- sync: add `watch::Sender::send_modify` method ([#4310])\r\n- sync: add `broadcast::Receiver::len` method ([#4542])\r\n- sync: add `watch::Receiver::same_channel` method ([#4581])\r\n- sync: implement `Clone` for `RecvError` types ([#4560])\r\n\r\n### Changed\r\n\r\n- update `mio` to 0.8.1 ([#4582])\r\n- macros: rename `tokio::select!`'s internal `util` module ([#4543])\r\n- runtime: use `Vec::with_capacity` when building runtime ([#4553])\r\n\r\n### Documented\r\n\r\n- improve docs for `tokio_unstable` ([#4524])\r\n- runtime: include more documentation for thread_pool/worker ([#4511])\r\n- runtime: update `Handle::current`'s docs to mention `EnterGuard` ([#4567])\r\n- time: clarify platform specific timer resolution ([#4474])\r\n- signal: document that `Signal::recv` is cancel-safe ([#4634])\r\n- sync: `UnboundedReceiver` close docs ([#4548])\r\n\r\n### Unstable\r\n\r\nThe following changes only apply when building with `--cfg tokio_unstable`:\r\n\r\n- task: add `task::Id` type ([#4630])\r\n- task: add `AbortHandle` type for cancelling tasks in a `JoinSet` ([#4530],\r\n  [#4640])\r\n- task: fix missing `doc(cfg(...))` attributes for `JoinSet` ([#4531])\r\n- task: fix broken link in `AbortHandle` RustDoc ([#4545])\r\n- metrics: add initial IO driver metrics ([#4507])\r\n\r\n[#4616]: https://github.com/tokio-rs/tokio/pull/4616\r\n[#4519]: https://github.com/tokio-rs/tokio/pull/4519\r\n[#4582]: https://github.com/tokio-rs/tokio/pull/4582\r\n[#4485]: https://github.com/tokio-rs/tokio/pull/4485\r\n[#4613]: https://github.com/tokio-rs/tokio/pull/4613\r\n[#4611]: https://github.com/tokio-rs/tokio/pull/4611\r\n[#4626]: https://github.com/tokio-rs/tokio/pull/4626\r\n[#4540]: https://github.com/tokio-rs/tokio/pull/4540\r\n[#4555]: https://github.com/tokio-rs/tokio/pull/4555\r\n[#4310]: https://github.com/tokio-rs/tokio/pull/4310\r\n[#4542]: https://github.com/tokio-rs/tokio/pull/4542\r\n[#4581]: https://github.com/tokio-rs/tokio/pull/4581\r\n[#4560]: https://github.com/tokio-rs/tokio/pull/4560\r\n[#4631]: https://github.com/tokio-rs/tokio/pull/4631\r\n[#4582]: https://github.com/tokio-rs/tokio/pull/4582\r\n[#4543]: https://github.com/tokio-rs/tokio/pull/4543\r\n[#4553]: https://github.com/tokio-rs/tokio/pull/4553\r\n[#4524]: https://github.com/tokio-rs/tokio/pull/4524\r\n[#4511]: https://github.com/tokio-rs/tokio/pull/4511\r\n[#4567]: https://github.com/tokio-rs/tokio/pull/4567\r\n[#4474]: https://github.com/tokio-rs/tokio/pull/4474\r\n[#4634]: https://github.com/tokio-rs/tokio/pull/4634\r\n[#4548]: https://github.com/tokio-rs/tokio/pull/4548\r\n[#4630]: https://github.com/tokio-rs/tokio/pull/4630\r\n[#4530]: https://github.com/tokio-rs/tokio/pull/4530\r\n[#4640]: https://github.com/tokio-rs/tokio/pull/4640\r\n[#4531]: https://github.com/tokio-rs/tokio/pull/4531\r\n[#4545]: https://github.com/tokio-rs/tokio/pull/4545\r\n[#4507]: https://github.com/tokio-rs/tokio/pull/4507", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4641/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4640", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4640/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4640/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4640/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4640", "id": 1215054640, "node_id": "PR_kwDOBAsbdc42wU0f", "number": 4640, "title": "util: implement `JoinMap`", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-04-25T21:17:00Z", "updated_at": "2022-04-26T17:25:49Z", "closed_at": "2022-04-26T17:25:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4640", "html_url": "https://github.com/tokio-rs/tokio/pull/4640", "diff_url": "https://github.com/tokio-rs/tokio/pull/4640.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4640.patch", "merged_at": "2022-04-26T17:25:48Z"}, "body": "Depends on #4630.\r\n\r\n## Motivation\r\n\r\nIn many cases, it is desirable to spawn a set of tasks associated with\r\nkeys, with the ability to cancel them by key. As an example use case for\r\nthis sort of thing, see Tower's [`ReadyCache` type][1].\r\n\r\nNow that PR #4530 adds a way of cancelling tasks in a\r\n`tokio::task::JoinSet`, we can implement a map-like API based on the\r\nsame `IdleNotifiedSet` primitive.\r\n\r\n## Solution\r\n\r\nThis PR adds an implementation of a `JoinMap` type to\r\n`tokio_util::task`, using the `JoinSet` type from `tokio::task`, the\r\n`AbortHandle` type added in #4530, and the new task IDs added in #4630.\r\n\r\nIndividual tasks can be aborted by key using the `JoinMap::abort`\r\nmethod, and a set of tasks whose key match a given predicate can be\r\naborted using `JoinMap::abort_matching`.\r\n\r\nWhen tasks complete, `JoinMap::join_one` returns their associated key\r\nalongside the output from the spawned future, or the key and the\r\n`JoinError` if the task did not complete successfully.\r\n\r\nOverall, I think the way this works is pretty straightforward; much of\r\nthis PR is just API boilerplate to implement the union of applicable\r\nAPIs from `JoinSet` and `HashMap`. Unlike previous iterations on the\r\n`JoinMap` API (e.g. #4538), this version is implemented entirely in\r\n`tokio_util`, using only public APIs from the `tokio` crate. Currently,\r\nthe required `tokio` APIs are unstable, but implementing `JoinMap` in\r\n`tokio-util` means we will never have to make stability commitments for\r\nthe `JoinMap` API itself.\r\n\r\n[1]: https://github.com/tower-rs/tower/blob/master/tower/src/ready_cache/cache.rs", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4640/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4640/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4636", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4636/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4636/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4636/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4636", "id": 1213582841, "node_id": "PR_kwDOBAsbdc42riXf", "number": 4636, "title": "macros: always emit return statement", "user": {"login": "taiki-e", "id": 43724913, "node_id": "MDQ6VXNlcjQzNzI0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/43724913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taiki-e", "html_url": "https://github.com/taiki-e", "followers_url": "https://api.github.com/users/taiki-e/followers", "following_url": "https://api.github.com/users/taiki-e/following{/other_user}", "gists_url": "https://api.github.com/users/taiki-e/gists{/gist_id}", "starred_url": "https://api.github.com/users/taiki-e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taiki-e/subscriptions", "organizations_url": "https://api.github.com/users/taiki-e/orgs", "repos_url": "https://api.github.com/users/taiki-e/repos", "events_url": "https://api.github.com/users/taiki-e/events{/privacy}", "received_events_url": "https://api.github.com/users/taiki-e/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1436302597, "node_id": "MDU6TGFiZWwxNDM2MzAyNTk3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-macros", "name": "A-tokio-macros", "color": "f7e101", "default": false, "description": "Area: The tokio-macros crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-24T08:14:25Z", "updated_at": "2022-04-27T22:53:42Z", "closed_at": "2022-04-27T22:53:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4636", "html_url": "https://github.com/tokio-rs/tokio/pull/4636", "diff_url": "https://github.com/tokio-rs/tokio/pull/4636.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4636.patch", "merged_at": "2022-04-27T22:53:40Z"}, "body": "Fixes #4635\r\n\r\nThere are two approaches, each divided into commits to compare.\r\n\r\nThe first commit is the `let () =` approach mentioned in https://github.com/tokio-rs/tokio/issues/4635#issuecomment-1107684720, which fixes #4635 while maintaining the current diagnostics. However, the diagnostics for #4635's case are not very good.\r\n\r\nThe second commit is a greatly simplified version of the current approach. There is small diagnostics regression, but it improves somewhat for #4635's case.\r\n\r\nI tend to prefer the second one, but if other reviewers prefer the first one, I can revert the second commit.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4636/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4636/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4634", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4634/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4634/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4634/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4634", "id": 1212693442, "node_id": "PR_kwDOBAsbdc42pEjK", "number": 4634, "title": "docs: Signal::recv is cancel-safe", "user": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511454, "node_id": "MDU6TGFiZWwxOTkzNTExNDU0", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-signal", "name": "M-signal", "color": "f7b101", "default": false, "description": "Module: tokio/signal"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-22T19:15:53Z", "updated_at": "2022-04-23T11:11:23Z", "closed_at": "2022-04-23T09:12:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4634", "html_url": "https://github.com/tokio-rs/tokio/pull/4634", "diff_url": "https://github.com/tokio-rs/tokio/pull/4634.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4634.patch", "merged_at": "2022-04-23T09:12:25Z"}, "body": "I think this is the case, so let's document it!", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4634/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4634/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4632", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4632/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4632/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4632/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4632", "id": 1210779462, "node_id": "PR_kwDOBAsbdc42i8zo", "number": 4632, "title": "fix some typos", "user": {"login": "cuishuang", "id": 15921519, "node_id": "MDQ6VXNlcjE1OTIxNTE5", "avatar_url": "https://avatars.githubusercontent.com/u/15921519?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuishuang", "html_url": "https://github.com/cuishuang", "followers_url": "https://api.github.com/users/cuishuang/followers", "following_url": "https://api.github.com/users/cuishuang/following{/other_user}", "gists_url": "https://api.github.com/users/cuishuang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuishuang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuishuang/subscriptions", "organizations_url": "https://api.github.com/users/cuishuang/orgs", "repos_url": "https://api.github.com/users/cuishuang/repos", "events_url": "https://api.github.com/users/cuishuang/events{/privacy}", "received_events_url": "https://api.github.com/users/cuishuang/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-21T09:42:54Z", "updated_at": "2022-04-21T10:16:19Z", "closed_at": "2022-04-21T10:16:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4632", "html_url": "https://github.com/tokio-rs/tokio/pull/4632", "diff_url": "https://github.com/tokio-rs/tokio/pull/4632.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4632.patch", "merged_at": "2022-04-21T10:16:19Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4632/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4631", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4631/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4631/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4631/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4631", "id": 1210434536, "node_id": "PR_kwDOBAsbdc42h4LZ", "number": 4631, "title": "Upgrade nix to 0.24, limit features", "user": {"login": "rtzoeller", "id": 573497, "node_id": "MDQ6VXNlcjU3MzQ5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/573497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rtzoeller", "html_url": "https://github.com/rtzoeller", "followers_url": "https://api.github.com/users/rtzoeller/followers", "following_url": "https://api.github.com/users/rtzoeller/following{/other_user}", "gists_url": "https://api.github.com/users/rtzoeller/gists{/gist_id}", "starred_url": "https://api.github.com/users/rtzoeller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rtzoeller/subscriptions", "organizations_url": "https://api.github.com/users/rtzoeller/orgs", "repos_url": "https://api.github.com/users/rtzoeller/repos", "events_url": "https://api.github.com/users/rtzoeller/events{/privacy}", "received_events_url": "https://api.github.com/users/rtzoeller/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-21T03:03:46Z", "updated_at": "2022-04-21T04:31:16Z", "closed_at": "2022-04-21T04:31:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4631", "html_url": "https://github.com/tokio-rs/tokio/pull/4631", "diff_url": "https://github.com/tokio-rs/tokio/pull/4631.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4631.patch", "merged_at": "2022-04-21T04:31:15Z"}, "body": "## Motivation\r\n\r\nThis reduces tokio's test compile time by a few seconds.\r\n\r\n## Solution\r\n\r\nUpgrade nix to 0.24, which split nix into multiple features. Opt out of the default features and request just the ones required for tokio.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4631/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4630", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4630/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4630/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4630/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4630", "id": 1210079380, "node_id": "PR_kwDOBAsbdc42guMS", "number": 4630, "title": "task: add task IDs", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 439897190, "node_id": "MDU6TGFiZWw0Mzk4OTcxOTA=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: A PR with an enhancement or bugfix."}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-04-20T18:47:21Z", "updated_at": "2022-04-25T17:31:20Z", "closed_at": "2022-04-25T17:31:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4630", "html_url": "https://github.com/tokio-rs/tokio/pull/4630", "diff_url": "https://github.com/tokio-rs/tokio/pull/4630.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4630.patch", "merged_at": "2022-04-25T17:31:19Z"}, "body": "## Motivation\r\n\r\nPR #4538 adds a prototype implementation of a `JoinMap` API in\r\n`tokio::task`. In [this comment][1] on that PR, @carllerche pointed out\r\nthat a much simpler `JoinMap` type could be implemented outside of\r\n`tokio` (either in `tokio-util` or in user code) if we just modified\r\n`JoinSet` to return a task ID type when spawning new tasks, and when\r\ntasks complete. This seems like a better approach for the following\r\nreasons:\r\n\r\n* A `JoinMap`-like type need not become a permanent part of `tokio`'s\r\n  stable API\r\n* Task IDs seem like something that could be generally useful outside of\r\n  a `JoinMap` implementation\r\n\r\n## Solution\r\n\r\nThis branch adds a `tokio::task::Id` type that uniquely identifies a\r\ntask relative to all other spawned tasks. Task IDs are assigned\r\nsequentially based on an atomic `usize` counter of spawned tasks.\r\n\r\nIn addition, I modified `JoinSet` to add a `join_with_id` method that\r\nbehaves identically to `join_one` but also returns an ID. This can be\r\nused to implement a `JoinMap` type.\r\n\r\nNote that because `join_with_id` must return a task ID regardless of\r\nwhether the task completes successfully or returns a `JoinError`, I've\r\nalso changed `JoinError` to carry the ID of the task that errored, and \r\nadded a `JoinError::id` method for accessing it. Alternatively, we could\r\nhave done one of the following:\r\n\r\n* have `join_with_id` return `Option<(Id, Result<T, JoinError>)>`, which\r\n  would be inconsistent with the return type of `join_one` (which we've\r\n  [already bikeshedded over once][2]...)\r\n* have `join_with_id` return `Result<Option<(Id, T)>, (Id, JoinError)>>`,\r\n  which just feels gross.\r\n\r\nI thought adding the task ID to `JoinError` was the nicest option, and\r\nis potentially useful for other stuff as well, so it's probably a good API to\r\nhave anyway.\r\n\r\n[1]: https://github.com/tokio-rs/tokio/pull/4538#issuecomment-1065614755\r\n[2]: https://github.com/tokio-rs/tokio/pull/4335#discussion_r773377901\r\n\r\nCloses #4538", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4630/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4630/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4629", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4629/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4629/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4629/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4629", "id": 1209978474, "node_id": "PR_kwDOBAsbdc42gaOt", "number": 4629, "title": "rt: internally split Handle into two structs", "user": {"login": "carllerche", "id": 6180, "node_id": "MDQ6VXNlcjYxODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carllerche", "html_url": "https://github.com/carllerche", "followers_url": "https://api.github.com/users/carllerche/followers", "following_url": "https://api.github.com/users/carllerche/following{/other_user}", "gists_url": "https://api.github.com/users/carllerche/gists{/gist_id}", "starred_url": "https://api.github.com/users/carllerche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carllerche/subscriptions", "organizations_url": "https://api.github.com/users/carllerche/orgs", "repos_url": "https://api.github.com/users/carllerche/repos", "events_url": "https://api.github.com/users/carllerche/events{/privacy}", "received_events_url": "https://api.github.com/users/carllerche/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1119430889, "node_id": "MDU6TGFiZWwxMTE5NDMwODg5", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/C-maintenance", "name": "C-maintenance", "color": "f5f1fd", "default": false, "description": "Category: PRs that clean code up or issues documenting cleanup."}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-20T17:15:49Z", "updated_at": "2022-04-20T19:56:56Z", "closed_at": "2022-04-20T19:56:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4629", "html_url": "https://github.com/tokio-rs/tokio/pull/4629", "diff_url": "https://github.com/tokio-rs/tokio/pull/4629.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4629.patch", "merged_at": "2022-04-20T19:56:56Z"}, "body": "Previously, `runtime::Handle` was a single struct composed of the\r\ninternal handles for each runtime component. This patch splits the\r\n`Handle` struct into a `HandleInner` which contains everything\r\n**except** the task scheduler handle. Now, `HandleInner` is passed to\r\nthe task scheduler during creation and the task scheduler is responsible\r\nfor storing it. `Handle` only  needs to hold the scheduler handle and\r\ncan access the rest of the component handles by querying the task\r\nscheduler.\r\n\r\nThe motivation for this change is it now enables the multi-threaded\r\nscheduler to have direct access to the blocking spawner handle.\r\nPreviously, when spawning a new thread, the multi-threaded scheduler had\r\nto access the blocking spawner by accessing a thread-local variable.\r\nNow, in theory, the multi-threaded scheduler can use `HandleInner`\r\ndirectly. However, this change hasn't been done in this PR yet.\r\n\r\nAlso, now the `Handle` struct is much smaller.\r\n\r\nThis change is intended to make it easier for the multi-threaded\r\nscheduler to shutdown idle threads and respawn them on demand.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4629/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4629/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4626", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4626/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4626/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4626/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4626", "id": 1206783758, "node_id": "PR_kwDOBAsbdc42WRKe", "number": 4626, "title": "Add `try_read_buf` for named pipes", "user": {"login": "cptpiepmatz", "id": 3590829, "node_id": "MDQ6VXNlcjM1OTA4Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/3590829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cptpiepmatz", "html_url": "https://github.com/cptpiepmatz", "followers_url": "https://api.github.com/users/cptpiepmatz/followers", "following_url": "https://api.github.com/users/cptpiepmatz/following{/other_user}", "gists_url": "https://api.github.com/users/cptpiepmatz/gists{/gist_id}", "starred_url": "https://api.github.com/users/cptpiepmatz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cptpiepmatz/subscriptions", "organizations_url": "https://api.github.com/users/cptpiepmatz/orgs", "repos_url": "https://api.github.com/users/cptpiepmatz/repos", "events_url": "https://api.github.com/users/cptpiepmatz/events{/privacy}", "received_events_url": "https://api.github.com/users/cptpiepmatz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993508926, "node_id": "MDU6TGFiZWwxOTkzNTA4OTI2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-net", "name": "M-net", "color": "f7b101", "default": false, "description": "Module: tokio/net"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-04-18T07:51:22Z", "updated_at": "2022-04-21T07:50:21Z", "closed_at": "2022-04-21T07:50:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4626", "html_url": "https://github.com/tokio-rs/tokio/pull/4626", "diff_url": "https://github.com/tokio-rs/tokio/pull/4626.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4626.patch", "merged_at": "2022-04-21T07:50:12Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n[`net::windows::named_pipe::NamedPipeClient`](https://docs.rs/tokio/latest/tokio/net/windows/named_pipe/struct.NamedPipeClient.html) is missing the `add_try_buf` method. Similar structs implement this method like [`net::TcpStream`](https://docs.rs/tokio/latest/tokio/net/struct.TcpStream.html#method.try_read_buf) or [`net::UnixStream`](https://docs.rs/tokio/latest/tokio/net/struct.UnixStream.html#method.try_read_buf).\r\n\r\nTherefore this will fix #4602.\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\nSince `TcpStream` and `UnixStream` are so similar, I just copied over the method body and replaced references to the original type.\r\n\r\nI realized that all three types are very similar and may benefit from using macros but since it's not currently used, this is out of scope of this PR.\r\n\r\nAlso a test is missing. `TcpStream` and `UnixStream` have test cases for `try_read_buf` and other methods but `NamedPipeClient` is missing these too. Therefore I think this may be out of scope for this one.\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4626/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4624", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4624/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4624/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4624/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4624", "id": 1206424067, "node_id": "PR_kwDOBAsbdc42VGjC", "number": 4624, "title": "macros: join! start by polling a different future each time poll_fn is polled", "user": {"login": "PoorlyDefinedBehaviour", "id": 17282221, "node_id": "MDQ6VXNlcjE3MjgyMjIx", "avatar_url": "https://avatars.githubusercontent.com/u/17282221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PoorlyDefinedBehaviour", "html_url": "https://github.com/PoorlyDefinedBehaviour", "followers_url": "https://api.github.com/users/PoorlyDefinedBehaviour/followers", "following_url": "https://api.github.com/users/PoorlyDefinedBehaviour/following{/other_user}", "gists_url": "https://api.github.com/users/PoorlyDefinedBehaviour/gists{/gist_id}", "starred_url": "https://api.github.com/users/PoorlyDefinedBehaviour/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PoorlyDefinedBehaviour/subscriptions", "organizations_url": "https://api.github.com/users/PoorlyDefinedBehaviour/orgs", "repos_url": "https://api.github.com/users/PoorlyDefinedBehaviour/repos", "events_url": "https://api.github.com/users/PoorlyDefinedBehaviour/events{/privacy}", "received_events_url": "https://api.github.com/users/PoorlyDefinedBehaviour/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 2025338308, "node_id": "MDU6TGFiZWwyMDI1MzM4MzA4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-coop", "name": "M-coop", "color": "f7b101", "default": false, "description": "Module: tokio/coop"}, {"id": 2216880757, "node_id": "MDU6TGFiZWwyMjE2ODgwNzU3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-macros", "name": "M-macros", "color": "f7b101", "default": false, "description": "Module: macros in the main Tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-17T16:32:38Z", "updated_at": "2022-05-07T14:51:16Z", "closed_at": "2022-05-07T10:42:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4624", "html_url": "https://github.com/tokio-rs/tokio/pull/4624", "diff_url": "https://github.com/tokio-rs/tokio/pull/4624.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4624.patch", "merged_at": "2022-05-07T10:42:44Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\nFixes: https://github.com/tokio-rs/tokio/issues/4612\r\n\r\nSince `tokio::join!` runs the futures in the same task, the futures were are the same budget which makes it possible for one future to consume the whole budget leaving nothing for the other futures to consume.\r\n\r\nStarvation example taken from #4612\r\n\r\n```rust\r\n    use std::{sync::Arc, time::Duration};\r\n    use tokio::sync::Semaphore;\r\n\r\n    #[tokio::main]\r\n    async fn main() {\r\n        let permits = Arc::new(Semaphore::new(10));\r\n\r\n        tokio::join!(non_cooperative_task(permits), poor_little_task());\r\n    }\r\n\r\n    async fn non_cooperative_task(permits: Arc<Semaphore>) {\r\n        loop {\r\n            let permit = permits.clone().acquire_owned().await.unwrap();\r\n            // uncommenting the following makes it work\r\n            // tokio::time::sleep(Duration::from_millis(1)).await;\r\n        }\r\n    }\r\n    \r\n    async fn poor_little_task() {\r\n        loop {\r\n            tokio::time::sleep(Duration::from_secs(1)).await;\r\n            // This println! never gets to run.\r\n            println!(\"Hello!\")\r\n        }\r\n    }\r\n```\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n\r\nStart by polling a different future each time the future generated by `poll_ fn` is polled. This way, each future will get the chance to make progress even if there are futures that consume the whole budget.\r\n\r\nGiven futures `A`, `B` and `C` passsed to `join!`\r\n```rust\r\ntokio::join!(A, B, C);\r\n```\r\n\r\nThe polling will look like this:\r\n\r\nThe first time the future generated by `poll_fn` is polled:\r\n\r\n```\r\npoll A\r\npoll B\r\npoll C\r\n```\r\n\r\nThe second time:\r\n\r\n```\r\npoll B\r\npoll C\r\npoll A\r\n```\r\n\r\nThe third time:\r\n\r\n```\r\npoll C\r\npoll A\r\npoll B\r\n```\r\n\r\nThe fourth time (we are back at the start):\r\n\r\n```\r\npoll A \r\npoll B\r\npoll C\r\n```\r\n\r\n### Cargo expand example\r\n\r\n```rust\r\n#![feature(prelude_import)]\r\n#[prelude_import]\r\nuse std::prelude::rust_2021::*;\r\n#[macro_use]\r\nextern crate std;\r\nuse std::{sync::Arc, time::Duration};\r\nuse tokio::sync::Semaphore;\r\nfn main() {\r\n    let body = async {\r\n        let permits = Arc::new(Semaphore::new(10));\r\n        {\r\n            use ::tokio::macros::support::{maybe_done, poll_fn, Future, Pin};\r\n            use ::tokio::macros::support::Poll::{Ready, Pending};\r\n            let mut futures = (\r\n                maybe_done(non_cooperative_task(permits)),\r\n                maybe_done(poor_little_task()),\r\n            );\r\n            let mut skip_next_time: u32 = 0;\r\n            poll_fn(move |cx| {\r\n                const COUNT: u32 = 0 + 1 + 1;\r\n                let mut is_pending = false;\r\n                let mut to_run = COUNT;\r\n                let mut skip = skip_next_time;\r\n                skip_next_time = if skip + 1 == COUNT { 0 } else { skip + 1 };\r\n                loop {\r\n                    if skip == 0 {\r\n                        if to_run == 0 {\r\n                            break;\r\n                        }\r\n                        to_run -= 1;\r\n                        let (fut, ..) = &mut futures;\r\n                        let mut fut = unsafe { Pin::new_unchecked(fut) };\r\n                        if fut.poll(cx).is_pending() {\r\n                            is_pending = true;\r\n                        }\r\n                    } else {\r\n                        skip -= 1;\r\n                    }\r\n                    if skip == 0 {\r\n                        if to_run == 0 {\r\n                            break;\r\n                        }\r\n                        to_run -= 1;\r\n                        let (_, fut, ..) = &mut futures;\r\n                        let mut fut = unsafe { Pin::new_unchecked(fut) };\r\n                        if fut.poll(cx).is_pending() {\r\n                            is_pending = true;\r\n                        }\r\n                    } else {\r\n                        skip -= 1;\r\n                    }\r\n                }\r\n                if is_pending {\r\n                    Pending\r\n                } else {\r\n                    Ready((\r\n                        {\r\n                            let (fut, ..) = &mut futures;\r\n                            let mut fut = unsafe { Pin::new_unchecked(fut) };\r\n                            fut.take_output().expect(\"expected completed future\")\r\n                        },\r\n                        {\r\n                            let (_, fut, ..) = &mut futures;\r\n                            let mut fut = unsafe { Pin::new_unchecked(fut) };\r\n                            fut.take_output().expect(\"expected completed future\")\r\n                        },\r\n                    ))\r\n                }\r\n            })\r\n            .await\r\n        };\r\n    };\r\n    #[allow(clippy::expect_used)]\r\n    tokio::runtime::Builder::new_multi_thread()\r\n        .enable_all()\r\n        .build()\r\n        .expect(\"Failed building the Runtime\")\r\n        .block_on(body);\r\n}\r\nasync fn non_cooperative_task(permits: Arc<Semaphore>) {\r\n    loop {\r\n        let _permit = permits.clone().acquire_owned().await.unwrap();\r\n    }\r\n}\r\nasync fn poor_little_task() {\r\n    loop {\r\n        tokio::time::sleep(Duration::from_secs(1)).await;\r\n        ::std::io::_print(::core::fmt::Arguments::new_v1(&[\"Hello!\\n\"], &[]))\r\n    }\r\n}\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4624/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4624/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4622", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4622/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4622/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4622/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4622", "id": 1205696247, "node_id": "PR_kwDOBAsbdc42TAB7", "number": 4622, "title": "chore: add panic documentation for `tokio::sync::broadcast::channel`", "user": {"login": "name1e5s", "id": 15176913, "node_id": "MDQ6VXNlcjE1MTc2OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/15176913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/name1e5s", "html_url": "https://github.com/name1e5s", "followers_url": "https://api.github.com/users/name1e5s/followers", "following_url": "https://api.github.com/users/name1e5s/following{/other_user}", "gists_url": "https://api.github.com/users/name1e5s/gists{/gist_id}", "starred_url": "https://api.github.com/users/name1e5s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/name1e5s/subscriptions", "organizations_url": "https://api.github.com/users/name1e5s/orgs", "repos_url": "https://api.github.com/users/name1e5s/repos", "events_url": "https://api.github.com/users/name1e5s/events{/privacy}", "received_events_url": "https://api.github.com/users/name1e5s/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-15T16:18:18Z", "updated_at": "2022-04-17T11:34:51Z", "closed_at": "2022-04-17T11:34:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4622", "html_url": "https://github.com/tokio-rs/tokio/pull/4622", "diff_url": "https://github.com/tokio-rs/tokio/pull/4622.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4622.patch", "merged_at": "2022-04-17T11:34:51Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\nclose #4621\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4622/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4620", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4620/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4620/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4620/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4620", "id": 1204705427, "node_id": "PR_kwDOBAsbdc42PxeS", "number": 4620, "title": "Update FreeBSD CI image to 12.3.  12.2 is EoL.", "user": {"login": "asomers", "id": 129721, "node_id": "MDQ6VXNlcjEyOTcyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/129721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asomers", "html_url": "https://github.com/asomers", "followers_url": "https://api.github.com/users/asomers/followers", "following_url": "https://api.github.com/users/asomers/following{/other_user}", "gists_url": "https://api.github.com/users/asomers/gists{/gist_id}", "starred_url": "https://api.github.com/users/asomers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asomers/subscriptions", "organizations_url": "https://api.github.com/users/asomers/orgs", "repos_url": "https://api.github.com/users/asomers/repos", "events_url": "https://api.github.com/users/asomers/events{/privacy}", "received_events_url": "https://api.github.com/users/asomers/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2119690410, "node_id": "MDU6TGFiZWwyMTE5NjkwNDEw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-ci", "name": "A-ci", "color": "f7e101", "default": false, "description": "Area: The continuous integration setup"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-14T15:49:57Z", "updated_at": "2022-04-15T09:50:49Z", "closed_at": "2022-04-15T09:50:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4620", "html_url": "https://github.com/tokio-rs/tokio/pull/4620", "diff_url": "https://github.com/tokio-rs/tokio/pull/4620.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4620.patch", "merged_at": "2022-04-15T09:50:41Z"}, "body": "## Motivation\r\n\r\nFreeBSD 12.2 is EoL.  It has no support, and at some point soon pre-built packages might start depending on 12.3 features.\r\n\r\n## Solution\r\n\r\nUpdate the CI image.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4620/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4616", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4616/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4616/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4616/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4616", "id": 1203289031, "node_id": "PR_kwDOBAsbdc42LQ9C", "number": 4616, "title": "blocking: #[track_caller] for spawn_blocking", "user": {"login": "domodwyer", "id": 9275968, "node_id": "MDQ6VXNlcjkyNzU5Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/9275968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/domodwyer", "html_url": "https://github.com/domodwyer", "followers_url": "https://api.github.com/users/domodwyer/followers", "following_url": "https://api.github.com/users/domodwyer/following{/other_user}", "gists_url": "https://api.github.com/users/domodwyer/gists{/gist_id}", "starred_url": "https://api.github.com/users/domodwyer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/domodwyer/subscriptions", "organizations_url": "https://api.github.com/users/domodwyer/orgs", "repos_url": "https://api.github.com/users/domodwyer/repos", "events_url": "https://api.github.com/users/domodwyer/events{/privacy}", "received_events_url": "https://api.github.com/users/domodwyer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993541559, "node_id": "MDU6TGFiZWwxOTkzNTQxNTU5", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-blocking", "name": "M-blocking", "color": "f7b101", "default": false, "description": "Module: tokio/task/blocking"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-13T13:17:17Z", "updated_at": "2022-04-13T15:27:59Z", "closed_at": "2022-04-13T15:27:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4616", "html_url": "https://github.com/tokio-rs/tokio/pull/4616", "diff_url": "https://github.com/tokio-rs/tokio/pull/4616.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4616.patch", "merged_at": "2022-04-13T15:27:58Z"}, "body": "This PR adds a `#[track_caller]` annotation to [`runtime::blocking::spawn_blocking()`](https://github.com/domodwyer/tokio/blob/eed85e46740cb21449fcfa92e14485d6b6c936e2/tokio/src/runtime/blocking/pool.rs#L108).\r\n\r\nSimilar to #4483, the driver behind this change is to correctly tag the caller as the spawn location in tracing spans, primarily for consumption with `tokio-console`. \r\n\r\nPrior to this PR, any tasks spawned with `spawn_blocking()` would show a spawn location within tokio:\r\n\r\n![Screenshot 2022-04-13 at 14 04 38](https://user-images.githubusercontent.com/9275968/163188291-56603b90-1473-48ba-9abc-38e9916148c3.png)\r\n\r\nAfter this PR, the spawn location is correctly recorded as the `main.rs` file in my reproducer:\r\n\r\n![Screenshot 2022-04-13 at 14 05 42](https://user-images.githubusercontent.com/9275968/163188438-b3315d6e-b95b-467f-b1c8-8f6121da5b70.png)\r\n\r\nI am not sure how to effectively test this, and #4483 didn't test it either - happy to add tests with a bit of guidance!\r\n\r\n---\r\n\r\n* blocking: #[track_caller] for spawn_blocking (eed85e46)\r\n\r\n      Annotates spawn_blocking() with #[track_caller] in order to produce the \r\n      correct tracing span spawn locations that show the caller as the spawn point.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4616/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4613", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4613/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4613/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4613/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4613", "id": 1200160637, "node_id": "PR_kwDOBAsbdc42AwMx", "number": 4613, "title": "macros: custom crate name for #[tokio::main] and #[tokio::test]", "user": {"login": "kezhuw", "id": 541734, "node_id": "MDQ6VXNlcjU0MTczNA==", "avatar_url": "https://avatars.githubusercontent.com/u/541734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kezhuw", "html_url": "https://github.com/kezhuw", "followers_url": "https://api.github.com/users/kezhuw/followers", "following_url": "https://api.github.com/users/kezhuw/following{/other_user}", "gists_url": "https://api.github.com/users/kezhuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/kezhuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kezhuw/subscriptions", "organizations_url": "https://api.github.com/users/kezhuw/orgs", "repos_url": "https://api.github.com/users/kezhuw/repos", "events_url": "https://api.github.com/users/kezhuw/events{/privacy}", "received_events_url": "https://api.github.com/users/kezhuw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1436302597, "node_id": "MDU6TGFiZWwxNDM2MzAyNTk3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-macros", "name": "A-tokio-macros", "color": "f7e101", "default": false, "description": "Area: The tokio-macros crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-11T15:42:11Z", "updated_at": "2022-04-18T09:24:28Z", "closed_at": "2022-04-18T09:24:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4613", "html_url": "https://github.com/tokio-rs/tokio/pull/4613", "diff_url": "https://github.com/tokio-rs/tokio/pull/4613.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4613.patch", "merged_at": "2022-04-18T09:24:28Z"}, "body": "## Motivation\r\n* Accommodate to dependency rename(rust-lang/cargo#5653). Fixes #2312.\r\n* Enable `#[crate::test(crate = \"crate\")]` in unit tests.\r\n\r\n## Solution\r\nSupport `NameValue` attribute `crate` to custom crate name.\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4613/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4613/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4611", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4611/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4611/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4611/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4611", "id": 1198769547, "node_id": "PR_kwDOBAsbdc418fci", "number": 4611, "title": "net: add peer_addr to UdpSocket", "user": {"login": "PoorlyDefinedBehaviour", "id": 17282221, "node_id": "MDQ6VXNlcjE3MjgyMjIx", "avatar_url": "https://avatars.githubusercontent.com/u/17282221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PoorlyDefinedBehaviour", "html_url": "https://github.com/PoorlyDefinedBehaviour", "followers_url": "https://api.github.com/users/PoorlyDefinedBehaviour/followers", "following_url": "https://api.github.com/users/PoorlyDefinedBehaviour/following{/other_user}", "gists_url": "https://api.github.com/users/PoorlyDefinedBehaviour/gists{/gist_id}", "starred_url": "https://api.github.com/users/PoorlyDefinedBehaviour/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PoorlyDefinedBehaviour/subscriptions", "organizations_url": "https://api.github.com/users/PoorlyDefinedBehaviour/orgs", "repos_url": "https://api.github.com/users/PoorlyDefinedBehaviour/repos", "events_url": "https://api.github.com/users/PoorlyDefinedBehaviour/events{/privacy}", "received_events_url": "https://api.github.com/users/PoorlyDefinedBehaviour/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993508926, "node_id": "MDU6TGFiZWwxOTkzNTA4OTI2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-net", "name": "M-net", "color": "f7b101", "default": false, "description": "Module: tokio/net"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-09T21:00:04Z", "updated_at": "2022-04-10T16:26:24Z", "closed_at": "2022-04-10T01:52:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4611", "html_url": "https://github.com/tokio-rs/tokio/pull/4611", "diff_url": "https://github.com/tokio-rs/tokio/pull/4611.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4611.patch", "merged_at": "2022-04-10T01:52:45Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\nThe std [UdpSocket](https://doc.rust-lang.org/stable/std/net/struct.UdpSocket.html) exposes the method [peer_addr](https://doc.rust-lang.org/stable/std/net/struct.UdpSocket.html#method.peer_addr) to get the address of the remote peer the socket is connected to but tokio `UdpSocket` does not.\r\n\r\nThere are other ways to get the peer address as mentioned in #4609 but `peer_addr` makes it convenient.\r\n\r\nFixes: #4609\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n\r\nImplement `peer_addr` for `UdpSocket` and forward the call to [mio](https://github.com/tokio-rs/mio).", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4611/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4607", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4607/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4607/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4607/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4607", "id": 1197686520, "node_id": "PR_kwDOBAsbdc415AH6", "number": 4607, "title": "WIP: Add resubscribe functionality to broadcast::Receiver", "user": {"login": "estk", "id": 390090, "node_id": "MDQ6VXNlcjM5MDA5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/390090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estk", "html_url": "https://github.com/estk", "followers_url": "https://api.github.com/users/estk/followers", "following_url": "https://api.github.com/users/estk/following{/other_user}", "gists_url": "https://api.github.com/users/estk/gists{/gist_id}", "starred_url": "https://api.github.com/users/estk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estk/subscriptions", "organizations_url": "https://api.github.com/users/estk/orgs", "repos_url": "https://api.github.com/users/estk/repos", "events_url": "https://api.github.com/users/estk/events{/privacy}", "received_events_url": "https://api.github.com/users/estk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2022-04-08T18:54:48Z", "updated_at": "2023-08-10T12:30:24Z", "closed_at": "2022-05-28T20:15:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4607", "html_url": "https://github.com/tokio-rs/tokio/pull/4607", "diff_url": "https://github.com/tokio-rs/tokio/pull/4607.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4607.patch", "merged_at": "2022-05-28T20:15:27Z"}, "body": "Add subscribe method to broadcast::Receiver with the same functionality as the clone impl removed in #3020.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4607/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4601", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4601/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4601/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4601/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4601", "id": 1194351867, "node_id": "PR_kwDOBAsbdc41uGhD", "number": 4601, "title": "stream: expose Timeout", "user": {"login": "madadam", "id": 5271, "node_id": "MDQ6VXNlcjUyNzE=", "avatar_url": "https://avatars.githubusercontent.com/u/5271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madadam", "html_url": "https://github.com/madadam", "followers_url": "https://api.github.com/users/madadam/followers", "following_url": "https://api.github.com/users/madadam/following{/other_user}", "gists_url": "https://api.github.com/users/madadam/gists{/gist_id}", "starred_url": "https://api.github.com/users/madadam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madadam/subscriptions", "organizations_url": "https://api.github.com/users/madadam/orgs", "repos_url": "https://api.github.com/users/madadam/repos", "events_url": "https://api.github.com/users/madadam/events{/privacy}", "received_events_url": "https://api.github.com/users/madadam/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993513841, "node_id": "MDU6TGFiZWwxOTkzNTEzODQx", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-time", "name": "M-time", "color": "f7b101", "default": false, "description": "Module: tokio/time"}, {"id": 2583818939, "node_id": "MDU6TGFiZWwyNTgzODE4OTM5", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-stream", "name": "A-tokio-stream", "color": "f7e101", "default": false, "description": "Area: The tokio-stream crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-06T09:42:47Z", "updated_at": "2022-04-06T14:49:23Z", "closed_at": "2022-04-06T13:17:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4601", "html_url": "https://github.com/tokio-rs/tokio/pull/4601", "diff_url": "https://github.com/tokio-rs/tokio/pull/4601.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4601.patch", "merged_at": "2022-04-06T13:17:58Z"}, "body": "Expose `Timeout` so users can refer to it in their code.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4601/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4601/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4592", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4592/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4592/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4592/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4592", "id": 1189257966, "node_id": "PR_kwDOBAsbdc41dkTQ", "number": 4592, "title": "Import tracing without the default attributes feature", "user": {"login": "paolobarbolini", "id": 6215781, "node_id": "MDQ6VXNlcjYyMTU3ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/6215781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paolobarbolini", "html_url": "https://github.com/paolobarbolini", "followers_url": "https://api.github.com/users/paolobarbolini/followers", "following_url": "https://api.github.com/users/paolobarbolini/following{/other_user}", "gists_url": "https://api.github.com/users/paolobarbolini/gists{/gist_id}", "starred_url": "https://api.github.com/users/paolobarbolini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paolobarbolini/subscriptions", "organizations_url": "https://api.github.com/users/paolobarbolini/orgs", "repos_url": "https://api.github.com/users/paolobarbolini/repos", "events_url": "https://api.github.com/users/paolobarbolini/events{/privacy}", "received_events_url": "https://api.github.com/users/paolobarbolini/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 2229248027, "node_id": "MDU6TGFiZWwyMjI5MjQ4MDI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-tracing", "name": "M-tracing", "color": "f7b101", "default": false, "description": "Tracing support in Tokio"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-04-01T05:27:35Z", "updated_at": "2022-04-03T09:30:07Z", "closed_at": "2022-04-03T09:30:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4592", "html_url": "https://github.com/tokio-rs/tokio/pull/4592", "diff_url": "https://github.com/tokio-rs/tokio/pull/4592.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4592.patch", "merged_at": "2022-04-03T09:30:07Z"}, "body": "## Motivation\r\n\r\ntracing enables the `attributes` feature by default, which we don't need here. I'd like to keep a close eye on the proc macro crates in my dependency tree.\r\n\r\n## Solution\r\n\r\nDisable default features and enable only the ones we need.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4592/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4591", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4591/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4591/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4591/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4591", "id": 1187827313, "node_id": "PR_kwDOBAsbdc41Yqol", "number": 4591, "title": "watch::Sender: Modify and send value conditionally", "user": {"login": "uklotzde", "id": 1474154, "node_id": "MDQ6VXNlcjE0NzQxNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1474154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uklotzde", "html_url": "https://github.com/uklotzde", "followers_url": "https://api.github.com/users/uklotzde/followers", "following_url": "https://api.github.com/users/uklotzde/following{/other_user}", "gists_url": "https://api.github.com/users/uklotzde/gists{/gist_id}", "starred_url": "https://api.github.com/users/uklotzde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uklotzde/subscriptions", "organizations_url": "https://api.github.com/users/uklotzde/orgs", "repos_url": "https://api.github.com/users/uklotzde/repos", "events_url": "https://api.github.com/users/uklotzde/events{/privacy}", "received_events_url": "https://api.github.com/users/uklotzde/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-03-31T09:57:28Z", "updated_at": "2022-05-03T09:11:14Z", "closed_at": "2022-05-03T06:57:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4591", "html_url": "https://github.com/tokio-rs/tokio/pull/4591", "diff_url": "https://github.com/tokio-rs/tokio/pull/4591.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4591.patch", "merged_at": "2022-05-03T06:57:10Z"}, "body": "### TODO\r\n- [x] Improve documentation\r\n\r\nOften times you need to check preconditions and constraints before actually modifying a value. Currently receivers are notified unconditionally, even if the value has not been modified.\r\n\r\nThis PR adds a function `send_if_modified()` that is more versatile than `send_modify()`. The result of the passed closure indicates if the mutably borrowed value has actually been modified or not. Receivers are only notified if the value has been modified as indicated by the sender.\r\n\r\nSigned-off-by: Uwe Klotz <uwe.klotz@slowtec.de>", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4591/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4591/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4587", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4587/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4587/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4587/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4587", "id": 1183846870, "node_id": "PR_kwDOBAsbdc41LVin", "number": 4587, "title": "tests: complete TODOs in uds_stream.", "user": {"login": "arashsm79", "id": 57039957, "node_id": "MDQ6VXNlcjU3MDM5OTU3", "avatar_url": "https://avatars.githubusercontent.com/u/57039957?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arashsm79", "html_url": "https://github.com/arashsm79", "followers_url": "https://api.github.com/users/arashsm79/followers", "following_url": "https://api.github.com/users/arashsm79/following{/other_user}", "gists_url": "https://api.github.com/users/arashsm79/gists{/gist_id}", "starred_url": "https://api.github.com/users/arashsm79/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arashsm79/subscriptions", "organizations_url": "https://api.github.com/users/arashsm79/orgs", "repos_url": "https://api.github.com/users/arashsm79/repos", "events_url": "https://api.github.com/users/arashsm79/events{/privacy}", "received_events_url": "https://api.github.com/users/arashsm79/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993508926, "node_id": "MDU6TGFiZWwxOTkzNTA4OTI2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-net", "name": "M-net", "color": "f7b101", "default": false, "description": "Module: tokio/net"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-28T18:48:19Z", "updated_at": "2022-03-29T06:25:33Z", "closed_at": "2022-03-28T19:58:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4587", "html_url": "https://github.com/tokio-rs/tokio/pull/4587", "diff_url": "https://github.com/tokio-rs/tokio/pull/4587.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4587.patch", "merged_at": "2022-03-28T19:58:06Z"}, "body": "This completes the TODOs in uds_stream `accept_read_write` test by\r\nusing `AsyncWriteExt::write_all` instead of `AsyncWriteExt::write` and\r\n`AsyncReadExt::read_to_end` instead of `AsyncReadExt::read_exact`.\r\n\r\n<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\nComplete the TODOs in uds_stream `accept_read_write` test.\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\nUse `AsyncWriteExt::write_all` instead of `AsyncWriteExt::write` and\r\n`AsyncReadExt::read_to_end` instead of `AsyncReadExt::read_exact`.\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4587/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4582", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4582/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4582/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4582/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4582", "id": 1181818493, "node_id": "PR_kwDOBAsbdc41EljG", "number": 4582, "title": "Make try_io methods call mio's try_io internally", "user": {"login": "masa-koz", "id": 19515421, "node_id": "MDQ6VXNlcjE5NTE1NDIx", "avatar_url": "https://avatars.githubusercontent.com/u/19515421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masa-koz", "html_url": "https://github.com/masa-koz", "followers_url": "https://api.github.com/users/masa-koz/followers", "following_url": "https://api.github.com/users/masa-koz/following{/other_user}", "gists_url": "https://api.github.com/users/masa-koz/gists{/gist_id}", "starred_url": "https://api.github.com/users/masa-koz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masa-koz/subscriptions", "organizations_url": "https://api.github.com/users/masa-koz/orgs", "repos_url": "https://api.github.com/users/masa-koz/repos", "events_url": "https://api.github.com/users/masa-koz/events{/privacy}", "received_events_url": "https://api.github.com/users/masa-koz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993508926, "node_id": "MDU6TGFiZWwxOTkzNTA4OTI2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-net", "name": "M-net", "color": "f7b101", "default": false, "description": "Module: tokio/net"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-26T14:50:51Z", "updated_at": "2022-03-28T12:05:21Z", "closed_at": "2022-03-28T09:06:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4582", "html_url": "https://github.com/tokio-rs/tokio/pull/4582", "diff_url": "https://github.com/tokio-rs/tokio/pull/4582.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4582.patch", "merged_at": "2022-03-28T09:06:47Z"}, "body": "## Motivation\r\n\r\nA user defined I/O closure should be called by mio's try_io to ensure that the I/O receives more events if it hits a WouldBlock error.\r\n\r\n## Solution\r\n\r\nMake tokio's try_io methods call mio's try_io method using a given closure.\r\n\r\nFixes: #4510 ", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4582/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4581", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4581/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4581/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4581/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4581", "id": 1181047820, "node_id": "PR_kwDOBAsbdc41B-Mf", "number": 4581, "title": "sync: add `watch::Receiver::same_channel`", "user": {"login": "ahrens", "id": 799124, "node_id": "MDQ6VXNlcjc5OTEyNA==", "avatar_url": "https://avatars.githubusercontent.com/u/799124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahrens", "html_url": "https://github.com/ahrens", "followers_url": "https://api.github.com/users/ahrens/followers", "following_url": "https://api.github.com/users/ahrens/following{/other_user}", "gists_url": "https://api.github.com/users/ahrens/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahrens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahrens/subscriptions", "organizations_url": "https://api.github.com/users/ahrens/orgs", "repos_url": "https://api.github.com/users/ahrens/repos", "events_url": "https://api.github.com/users/ahrens/events{/privacy}", "received_events_url": "https://api.github.com/users/ahrens/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-25T17:21:46Z", "updated_at": "2022-03-25T19:59:59Z", "closed_at": "2022-03-25T19:16:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4581", "html_url": "https://github.com/tokio-rs/tokio/pull/4581", "diff_url": "https://github.com/tokio-rs/tokio/pull/4581.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4581.patch", "merged_at": "2022-03-25T19:16:47Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\nI'd like to determine if two `watch::Receiver`s are part of the same channel (i.e. will receive values from the same `watch::Sender`.\r\n\r\nSpecifically, I'd like to have a `HashMap<K, watch::Receiver<V>>`, and then later be able to check if *my* entry is still there, or someone else has removed it (and potentially replaced it with a Receiver for a different Sender).\r\n\r\nCloses: https://github.com/tokio-rs/tokio/issues/4579\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\nAdd a `same_channel()` method which uses `Arc::ptr_eq` on `Receiver::shared`\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4581/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4581/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4578", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4578/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4578/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4578/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4578", "id": 1175291045, "node_id": "PR_kwDOBAsbdc40vDIR", "number": 4578, "title": "ci: run reusable_box tests with Miri", "user": {"login": "taiki-e", "id": 43724913, "node_id": "MDQ6VXNlcjQzNzI0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/43724913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taiki-e", "html_url": "https://github.com/taiki-e", "followers_url": "https://api.github.com/users/taiki-e/followers", "following_url": "https://api.github.com/users/taiki-e/following{/other_user}", "gists_url": "https://api.github.com/users/taiki-e/gists{/gist_id}", "starred_url": "https://api.github.com/users/taiki-e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taiki-e/subscriptions", "organizations_url": "https://api.github.com/users/taiki-e/orgs", "repos_url": "https://api.github.com/users/taiki-e/repos", "events_url": "https://api.github.com/users/taiki-e/events{/privacy}", "received_events_url": "https://api.github.com/users/taiki-e/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-21T12:08:34Z", "updated_at": "2022-03-21T14:57:49Z", "closed_at": "2022-03-21T14:57:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4578", "html_url": "https://github.com/tokio-rs/tokio/pull/4578", "diff_url": "https://github.com/tokio-rs/tokio/pull/4578.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4578.patch", "merged_at": "2022-03-21T14:57:47Z"}, "body": "Miri now supports trait objects with arbitrary-self receivers: https://github.com/rust-lang/rust/pull/95071", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4578/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4578/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4567", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4567/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4567/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4567/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4567", "id": 1167723425, "node_id": "PR_kwDOBAsbdc40XMsZ", "number": 4567, "title": "Update Handle::current to mention EnterGuard", "user": {"login": "ObsidianMinor", "id": 10121870, "node_id": "MDQ6VXNlcjEwMTIxODcw", "avatar_url": "https://avatars.githubusercontent.com/u/10121870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ObsidianMinor", "html_url": "https://github.com/ObsidianMinor", "followers_url": "https://api.github.com/users/ObsidianMinor/followers", "following_url": "https://api.github.com/users/ObsidianMinor/following{/other_user}", "gists_url": "https://api.github.com/users/ObsidianMinor/gists{/gist_id}", "starred_url": "https://api.github.com/users/ObsidianMinor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ObsidianMinor/subscriptions", "organizations_url": "https://api.github.com/users/ObsidianMinor/orgs", "repos_url": "https://api.github.com/users/ObsidianMinor/repos", "events_url": "https://api.github.com/users/ObsidianMinor/events{/privacy}", "received_events_url": "https://api.github.com/users/ObsidianMinor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}, {"id": 2607559888, "node_id": "MDU6TGFiZWwyNjA3NTU5ODg4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-examples", "name": "A-examples", "color": "f7e101", "default": false, "description": "Area: The examples"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-13T23:17:18Z", "updated_at": "2022-04-06T13:23:49Z", "closed_at": "2022-04-06T13:23:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4567", "html_url": "https://github.com/tokio-rs/tokio/pull/4567", "diff_url": "https://github.com/tokio-rs/tokio/pull/4567.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4567.patch", "merged_at": "2022-04-06T13:23:49Z"}, "body": "`Handle::current` docs say it's not possible to call it on any non-runtime thread, but you can call it from a runtime context created by an `EnterGuard`. This updates the docs to mention `EnterGuard` as a way to avoid this panic.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4567/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4567/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4562", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4562/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4562/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4562/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4562", "id": 1166765379, "node_id": "PR_kwDOBAsbdc40UTXf", "number": 4562, "title": "ci: run doctests for unstable APIs", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 2119690410, "node_id": "MDU6TGFiZWwyMTE5NjkwNDEw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-ci", "name": "A-ci", "color": "f7e101", "default": false, "description": "Area: The continuous integration setup"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-11T19:12:10Z", "updated_at": "2022-03-12T11:01:02Z", "closed_at": "2022-03-11T20:13:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4562", "html_url": "https://github.com/tokio-rs/tokio/pull/4562", "diff_url": "https://github.com/tokio-rs/tokio/pull/4562.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4562.patch", "merged_at": "2022-03-11T20:13:51Z"}, "body": "It turns out that the CI job for testing `tokio_unstable` features isn't\r\nactually running doctests for `tokio_unstable`, just lib and integration\r\ntests. This is because RustDoc is responsible for running doctests, and\r\nit needs the unstable cfg passed to it separately from `RUSTFLAGS`.\r\n\r\nThis means that if the examples for unstable APIs are broken, CI won't\r\ncatch this, which is not great!\r\n\r\nThis commit changes the `test-unstable` CI job to pass `--cfg\r\ntokio_unstable` in `RUSTDOCFLAGS` as well as `RUSTFLAGS`. This way,\r\ndoctests for unstable APIs should actually run.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4562/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4562/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4560", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4560/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4560/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4560/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4560", "id": 1164722516, "node_id": "PR_kwDOBAsbdc40NlA6", "number": 4560, "title": "Add Clone to RecvError types", "user": {"login": "stepancheg", "id": 28969, "node_id": "MDQ6VXNlcjI4OTY5", "avatar_url": "https://avatars.githubusercontent.com/u/28969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stepancheg", "html_url": "https://github.com/stepancheg", "followers_url": "https://api.github.com/users/stepancheg/followers", "following_url": "https://api.github.com/users/stepancheg/following{/other_user}", "gists_url": "https://api.github.com/users/stepancheg/gists{/gist_id}", "starred_url": "https://api.github.com/users/stepancheg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stepancheg/subscriptions", "organizations_url": "https://api.github.com/users/stepancheg/orgs", "repos_url": "https://api.github.com/users/stepancheg/repos", "events_url": "https://api.github.com/users/stepancheg/events{/privacy}", "received_events_url": "https://api.github.com/users/stepancheg/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-10T04:02:11Z", "updated_at": "2022-04-06T13:26:46Z", "closed_at": "2022-04-06T13:26:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4560", "html_url": "https://github.com/tokio-rs/tokio/pull/4560", "diff_url": "https://github.com/tokio-rs/tokio/pull/4560.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4560.patch", "merged_at": "2022-04-06T13:26:46Z"}, "body": "So `Result<T, RecvError>` is `Clone`, so `Receiver<T>` can be placed in `Shared<...>`.\r\n\r\nNote `mpsc::TryRecvError` is already `Clone`.\r\n\r\nNote `mpsc::TryRecvError` is also `Copy`, but this PR only adds `Clone`, because it is future proof.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4560/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4559", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4559/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4559/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4559/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4559", "id": 1164208367, "node_id": "PR_kwDOBAsbdc40L6hi", "number": 4559, "title": "Add method that exposes the internal buffer of StreamReader", "user": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993508195, "node_id": "MDU6TGFiZWwxOTkzNTA4MTk1", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-io", "name": "M-io", "color": "f7b101", "default": false, "description": "Module: tokio/io"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-09T17:04:01Z", "updated_at": "2022-03-23T20:04:15Z", "closed_at": "2022-03-23T19:41:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4559", "html_url": "https://github.com/tokio-rs/tokio/pull/4559", "diff_url": "https://github.com/tokio-rs/tokio/pull/4559.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4559.patch", "merged_at": "2022-03-23T19:41:10Z"}, "body": "Attempt to fix https://github.com/tokio-rs/tokio/issues/4552 by exposing the internal buffer of `StreamReader`.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4559/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4558", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4558/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4558/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4558/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4558", "id": 1162930349, "node_id": "PR_kwDOBAsbdc40HquA", "number": 4558, "title": "chore: fix a bunch of annoying clippy lints", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-03-08T17:30:54Z", "updated_at": "2022-03-08T20:24:20Z", "closed_at": "2022-03-08T20:24:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4558", "html_url": "https://github.com/tokio-rs/tokio/pull/4558", "diff_url": "https://github.com/tokio-rs/tokio/pull/4558.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4558.patch", "merged_at": "2022-03-08T20:24:19Z"}, "body": "## Motivation\r\n\r\nRecent Clippy releases have added some new lints that trigger on some\r\ncode in Tokio. These aren't a big deal, but seeing them in my editor is\r\nmildly annoying.\r\n\r\n## Solution\r\n\r\nThis branch fixes the following issues flagged by Clippy:\r\n\r\n* manual `Option::map` implementation\r\n* use of `.map(...).flatten(...)` that could be replaced with\r\n  `.and_then(...)`\r\n* manual implementation of saturating arithmetic on `Duration`s\r\n* simplify some boolean expressions in assertions (`!res.is_ok()` can be\r\n`res.is_err()`)\r\n* fix redundant field names in initializers\r\n* ~~allow the `clippy::unnecessary_to_owned` lint in `ToSocketAddrs` impl\r\n  for `&[SocketAddr]` --- the \"unnecessary\" `to_vec()` call is actually\r\n  necessary to ensure the iterator is `'static`~~\r\n* replace an unnecessary cast to `usize` with an explicitly typed\r\n  integer literal", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4558/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4558/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4555", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4555/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4555/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4555/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4555", "id": 1157942759, "node_id": "PR_kwDOBAsbdc4z3glV", "number": 4555, "title": "tokio: add support for signals up to SIGRTMAX", "user": {"login": "weisbrja", "id": 65398029, "node_id": "MDQ6VXNlcjY1Mzk4MDI5", "avatar_url": "https://avatars.githubusercontent.com/u/65398029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weisbrja", "html_url": "https://github.com/weisbrja", "followers_url": "https://api.github.com/users/weisbrja/followers", "following_url": "https://api.github.com/users/weisbrja/following{/other_user}", "gists_url": "https://api.github.com/users/weisbrja/gists{/gist_id}", "starred_url": "https://api.github.com/users/weisbrja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weisbrja/subscriptions", "organizations_url": "https://api.github.com/users/weisbrja/orgs", "repos_url": "https://api.github.com/users/weisbrja/repos", "events_url": "https://api.github.com/users/weisbrja/events{/privacy}", "received_events_url": "https://api.github.com/users/weisbrja/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511454, "node_id": "MDU6TGFiZWwxOTkzNTExNDU0", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-signal", "name": "M-signal", "color": "f7b101", "default": false, "description": "Module: tokio/signal"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-03-03T04:05:20Z", "updated_at": "2022-03-05T06:33:33Z", "closed_at": "2022-03-05T06:33:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4555", "html_url": "https://github.com/tokio-rs/tokio/pull/4555", "diff_url": "https://github.com/tokio-rs/tokio/pull/4555.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4555.patch", "merged_at": "2022-03-05T06:33:33Z"}, "body": "The POSIX standard not only supports \"reliable signals\", but also\r\n\"real-time signals\". This commit adds support for the latter.\r\n\r\nFixes: #4554", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4555/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4553", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4553/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4553/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4553/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4553", "id": 1156456005, "node_id": "PR_kwDOBAsbdc4zyeI5", "number": 4553, "title": "Use with_capacity", "user": {"login": "SUPERCILEX", "id": 9490724, "node_id": "MDQ6VXNlcjk0OTA3MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9490724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SUPERCILEX", "html_url": "https://github.com/SUPERCILEX", "followers_url": "https://api.github.com/users/SUPERCILEX/followers", "following_url": "https://api.github.com/users/SUPERCILEX/following{/other_user}", "gists_url": "https://api.github.com/users/SUPERCILEX/gists{/gist_id}", "starred_url": "https://api.github.com/users/SUPERCILEX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SUPERCILEX/subscriptions", "organizations_url": "https://api.github.com/users/SUPERCILEX/orgs", "repos_url": "https://api.github.com/users/SUPERCILEX/repos", "events_url": "https://api.github.com/users/SUPERCILEX/events{/privacy}", "received_events_url": "https://api.github.com/users/SUPERCILEX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-02T05:31:41Z", "updated_at": "2022-03-02T11:41:44Z", "closed_at": "2022-03-02T11:41:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4553", "html_url": "https://github.com/tokio-rs/tokio/pull/4553", "diff_url": "https://github.com/tokio-rs/tokio/pull/4553.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4553.patch", "merged_at": "2022-03-02T11:41:43Z"}, "body": "Quick PR: noticed all those vecs are pushed to unconditionally, so pre-allocate their sizes.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4553/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4548", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4548/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4548/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4548/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4548", "id": 1152763572, "node_id": "PR_kwDOBAsbdc4zl_XQ", "number": 4548, "title": "Unbounded receiver docs", "user": {"login": "QnnOkabayashi", "id": 57224050, "node_id": "MDQ6VXNlcjU3MjI0MDUw", "avatar_url": "https://avatars.githubusercontent.com/u/57224050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QnnOkabayashi", "html_url": "https://github.com/QnnOkabayashi", "followers_url": "https://api.github.com/users/QnnOkabayashi/followers", "following_url": "https://api.github.com/users/QnnOkabayashi/following{/other_user}", "gists_url": "https://api.github.com/users/QnnOkabayashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/QnnOkabayashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QnnOkabayashi/subscriptions", "organizations_url": "https://api.github.com/users/QnnOkabayashi/orgs", "repos_url": "https://api.github.com/users/QnnOkabayashi/repos", "events_url": "https://api.github.com/users/QnnOkabayashi/events{/privacy}", "received_events_url": "https://api.github.com/users/QnnOkabayashi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-27T03:58:56Z", "updated_at": "2022-02-27T21:13:25Z", "closed_at": "2022-02-27T21:12:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4548", "html_url": "https://github.com/tokio-rs/tokio/pull/4548", "diff_url": "https://github.com/tokio-rs/tokio/pull/4548.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4548.patch", "merged_at": "2022-02-27T21:12:29Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\ncc @Firstyear\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\nThe documentation for `tokio::sync::mpsc::UnboundedReceiver` is inconsistent with the bounded `Receiver` counterpart, lacking critical details including how calling `UnboundedReceiver::recv` returns `None` after `close` is called, even if there are remaining senders.\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\nCopy and paste the relevant parts from the bounded `Receiver` documentation into `UnboundedReceiver`.\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4548/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4545", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4545/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4545/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4545/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4545", "id": 1150749821, "node_id": "PR_kwDOBAsbdc4zeyvp", "number": 4545, "title": "task: fix broken link in `AbortHandle` RustDoc", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-25T18:49:43Z", "updated_at": "2022-02-25T19:08:01Z", "closed_at": "2022-02-25T19:08:00Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4545", "html_url": "https://github.com/tokio-rs/tokio/pull/4545", "diff_url": "https://github.com/tokio-rs/tokio/pull/4545.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4545.patch", "merged_at": "2022-02-25T19:08:00Z"}, "body": "## Motivation\r\n\r\nThere's a broken docs link in the docs for `AbortHandle`. Somehow this\r\nmanaged to slip past CI yesterday when #4530 was merged\r\n(https://github.com/tokio-rs/tokio/runs/5325278596?check_suite_focus=true)\r\nbut it's breaking the build now\r\n(https://github.com/tokio-rs/tokio/runs/5337182732?check_suite_focus=true)\r\nwhich seems really weird to me, but...whatever...\r\n\r\n## Solution\r\n\r\nThis branch fixes the broken link lol.\r\n\r\nSigned-off-by: Eliza Weisman <eliza@buoyant.io>", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4545/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4543", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4543/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4543/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4543/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4543", "id": 1150720341, "node_id": "PR_kwDOBAsbdc4zesjm", "number": 4543, "title": "Rename `tokio::select!`'s internal `util` module to `__tokio_select_util`", "user": {"login": "WilliamVenner", "id": 14863743, "node_id": "MDQ6VXNlcjE0ODYzNzQz", "avatar_url": "https://avatars.githubusercontent.com/u/14863743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WilliamVenner", "html_url": "https://github.com/WilliamVenner", "followers_url": "https://api.github.com/users/WilliamVenner/followers", "following_url": "https://api.github.com/users/WilliamVenner/following{/other_user}", "gists_url": "https://api.github.com/users/WilliamVenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/WilliamVenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WilliamVenner/subscriptions", "organizations_url": "https://api.github.com/users/WilliamVenner/orgs", "repos_url": "https://api.github.com/users/WilliamVenner/repos", "events_url": "https://api.github.com/users/WilliamVenner/events{/privacy}", "received_events_url": "https://api.github.com/users/WilliamVenner/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 2216880757, "node_id": "MDU6TGFiZWwyMjE2ODgwNzU3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-macros", "name": "M-macros", "color": "f7b101", "default": false, "description": "Module: macros in the main Tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-25T18:09:05Z", "updated_at": "2022-03-02T12:37:37Z", "closed_at": "2022-03-02T12:37:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4543", "html_url": "https://github.com/tokio-rs/tokio/pull/4543", "diff_url": "https://github.com/tokio-rs/tokio/pull/4543.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4543.patch", "merged_at": "2022-03-02T12:37:37Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\nThis internal module's identifier can clash with existing identifiers in library users' code and produce confusing error messages.\r\n\r\n```rust\r\nmod util {\r\n    pub fn hello_world() {\r\n        println!(\"Hello, world!\");\r\n    }\r\n}\r\n\r\n#[tokio::main]\r\nasync fn main() {\r\n    let f1 = async {};\r\n    let f2 = async {};\r\n\r\n    tokio::select! {\r\n        _ = f1 => {\r\n            // The following line would fix the compile error, showing that Tokio is creating an internal identifier called `util` which is clashing\r\n            // use crate::util;\r\n\r\n            util::hello_world();\r\n        },\r\n\r\n        _ = f2 => {}\r\n    }\r\n}\r\n```\r\n\r\n```rust\r\nerror[[E0425]](https://doc.rust-lang.org/stable/error-index.html#E0425): cannot find function `hello_world` in module `util`\r\n  --> src/main.rs:14:19\r\n   |\r\n14 |             util::hello_world();\r\n   |                   ^^^^^^^^^^^ not found in `util`\r\n   |\r\nhelp: consider importing this function\r\n   |\r\n1  | [use crate::util::hello_world;](https://play.rust-lang.org/#)\r\n   |\r\n\r\nFor more information about this error, try `rustc --explain E0425`.\r\n```\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n\r\nI have renamed the `util` module in `tokio::select!` to `__tokio_util` to prevent any identifier clashes.\r\n\r\nAdditionally, I also added `#[doc(hidden)]` to the module.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4543/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4543/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4542", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4542/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4542/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4542/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4542", "id": 1150226870, "node_id": "PR_kwDOBAsbdc4zdDG6", "number": 4542, "title": "Add a method on Receiver that gives information on queue status in broadcast channel", "user": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-25T09:26:10Z", "updated_at": "2022-03-07T12:53:39Z", "closed_at": "2022-03-07T12:47:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4542", "html_url": "https://github.com/tokio-rs/tokio/pull/4542", "diff_url": "https://github.com/tokio-rs/tokio/pull/4542.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4542.patch", "merged_at": "2022-03-07T12:47:26Z"}, "body": "Attempts to fix https://github.com/tokio-rs/tokio/issues/4405\r\n\r\nThis PR adds a method `recv_with_queue_status` to `Receiver` that returns (in a successful call) a tuple consisting of the received message and the number of messages that have been sent into the channel but have yet to be received by this Receiver.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4542/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4542/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4540", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4540/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4540/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4540/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4540", "id": 1149942193, "node_id": "PR_kwDOBAsbdc4zcH9d", "number": 4540, "title": "feat: Add SignalKind Hash/Eq impls and c_int conversion", "user": {"login": "andybarron", "id": 3630243, "node_id": "MDQ6VXNlcjM2MzAyNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/3630243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andybarron", "html_url": "https://github.com/andybarron", "followers_url": "https://api.github.com/users/andybarron/followers", "following_url": "https://api.github.com/users/andybarron/following{/other_user}", "gists_url": "https://api.github.com/users/andybarron/gists{/gist_id}", "starred_url": "https://api.github.com/users/andybarron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andybarron/subscriptions", "organizations_url": "https://api.github.com/users/andybarron/orgs", "repos_url": "https://api.github.com/users/andybarron/repos", "events_url": "https://api.github.com/users/andybarron/events{/privacy}", "received_events_url": "https://api.github.com/users/andybarron/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993511454, "node_id": "MDU6TGFiZWwxOTkzNTExNDU0", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-signal", "name": "M-signal", "color": "f7b101", "default": false, "description": "Module: tokio/signal"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-25T01:28:00Z", "updated_at": "2022-02-26T12:23:29Z", "closed_at": "2022-02-26T12:23:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4540", "html_url": "https://github.com/tokio-rs/tokio/pull/4540", "diff_url": "https://github.com/tokio-rs/tokio/pull/4540.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4540.patch", "merged_at": "2022-02-26T12:23:28Z"}, "body": "## Motivation\r\n\r\nThe type `tokio::signal::unix::SignalKind` corresponds to a `libc::c_int`. The newtype is missing some useful functionality:\r\n* No `Hash`/`Eq` impls, so they can't be compared or used as map keys\r\n* No ability to convert a `SignalKind` back into a `c_int`, which can be useful for interop\r\n\r\n## Solution\r\n* Add derived impls of `Hash`, `PartialEq`, and `Eq` to `SignalKind`\r\n* Add `as_raw_value()` method and `From`/`Into`\r\n* Add conversion tests\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4540/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4539", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4539/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4539/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4539/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4539", "id": 1149845213, "node_id": "PR_kwDOBAsbdc4zbzUH", "number": 4539, "title": "switch tokio-util from log to tracing", "user": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-02-24T22:42:19Z", "updated_at": "2022-02-26T11:47:04Z", "closed_at": "2022-02-26T11:47:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4539", "html_url": "https://github.com/tokio-rs/tokio/pull/4539", "diff_url": "https://github.com/tokio-rs/tokio/pull/4539.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4539.patch", "merged_at": "2022-02-26T11:47:04Z"}, "body": "## Motivation\r\n\r\nI am trying to remove any usage of `log` in our dep tree, so I can turn off the `tracing-log` feature, and I noticed `tokio-util` still used `log`, so I am trying to change it to `tracing`!\r\n\r\n## Solution\r\n\r\nThere were only a few callsites using `log` in `tokio-util`, so I figured switching them to tracing, like the rest of the tokio ecosystem would be fine!\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4539/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4536", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4536/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4536/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4536/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4536", "id": 1149627472, "node_id": "PR_kwDOBAsbdc4zbEgj", "number": 4536, "title": "macros: update `trybuild` output for Rust 1.59.0 ", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2119690410, "node_id": "MDU6TGFiZWwyMTE5NjkwNDEw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-ci", "name": "A-ci", "color": "f7e101", "default": false, "description": "Area: The continuous integration setup"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-24T18:43:14Z", "updated_at": "2022-02-24T21:51:26Z", "closed_at": "2022-02-24T19:52:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4536", "html_url": "https://github.com/tokio-rs/tokio/pull/4536", "diff_url": "https://github.com/tokio-rs/tokio/pull/4536.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4536.patch", "merged_at": "2022-02-24T19:52:48Z"}, "body": "## Motivation\r\n\r\nRust error messages seem to have changed a bit in 1.59.0\r\n\r\n## Solution\r\n\r\nUpdate the `trybuild` stderr output.\r\n\r\nThis should unbreak the tests on the latest Rust (and fix CI).", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4536/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4536/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4531", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4531/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4531/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4531/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4531", "id": 1148549018, "node_id": "PR_kwDOBAsbdc4zXhDF", "number": 4531, "title": "task: fix missing doc(cfg(...)) attributes for `JoinSet`", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-23T20:33:47Z", "updated_at": "2022-02-23T21:03:42Z", "closed_at": "2022-02-23T21:03:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4531", "html_url": "https://github.com/tokio-rs/tokio/pull/4531", "diff_url": "https://github.com/tokio-rs/tokio/pull/4531.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4531.patch", "merged_at": "2022-02-23T21:03:41Z"}, "body": "## Motivation\r\n\r\nThe `JoinSet` type is currently missing the `tokio_unstable` and\r\n`feature = \"rt\"` `doc(cfg(...))` attributes, making it erroneously\r\nappear to be available without the required feature and without unstable\r\nfeatures enabled. This is incorrect.\r\n\r\nI believe this is because `doc(cfg(...))` on a re-export doesn't\r\nactually add the required cfgs to the type itself, and the\r\n`cfg_unstable!` is currently only guarding a re-export and module.\r\n\r\n## Solution\r\n\r\nThis PR fixes the missing attributes.\r\n\r\nBefore:\r\n\r\n![image](https://user-images.githubusercontent.com/2796466/155403491-10be1a17-8709-4323-8ea3-cbc1046f6000.png)\r\n\r\nAfter:\r\n\r\n![image](https://user-images.githubusercontent.com/2796466/155403583-2c47262a-c1dc-47dc-99e2-c82cd39e3663.png)\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4531/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4530", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4530/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4530/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4530/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4530", "id": 1148540031, "node_id": "PR_kwDOBAsbdc4zXfII", "number": 4530, "title": "task: add `AbortHandle` type for cancelling tasks in a `JoinSet`", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}, {"id": 2229259479, "node_id": "MDU6TGFiZWwyMjI5MjU5NDc5", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/C-feature-accepted", "name": "C-feature-accepted", "color": "f5f1fd", "default": false, "description": "Category: A feature request that has been accepted pending implementation."}], "state": "closed", "locked": false, "assignee": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2022-02-23T20:24:48Z", "updated_at": "2023-09-27T17:28:26Z", "closed_at": "2022-02-24T21:08:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4530", "html_url": "https://github.com/tokio-rs/tokio/pull/4530", "diff_url": "https://github.com/tokio-rs/tokio/pull/4530.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4530.patch", "merged_at": "2022-02-24T21:08:23Z"}, "body": "\r\n## Motivation\r\n\r\nBefore we stabilize the `JoinSet` API, we intend to add a method for\r\nindividual tasks in the `JoinSet` to be aborted. Because the\r\n`JoinHandle`s for the tasks spawned on a `JoinSet` are owned by the\r\n`JoinSet`, the user can no longer use them to abort tasks on the\r\n`JoinSet`. Therefore, we need another way to cause a remote abort of a\r\ntask on a `JoinSet` without holding its `JoinHandle`.\r\n\r\n## Solution\r\n\r\nThis branch adds a new `AbortHandle` type in `tokio::task`, which\r\nrepresents the owned permission to remotely cancel a task, but _not_ to\r\nawait its output. The `AbortHandle` type holds an additional reference\r\nto the task cell.\r\n\r\nA crate-private method is added to `JoinHandle` that returns an\r\n`AbortHandle` for the same task, incrementing its ref count.\r\n`AbortHandle` provides a single method, `AbortHandle::abort(self)`, that\r\nremotely cancels the task. Dropping an `AbortHandle` decrements the\r\ntask's ref count but does not cancel it. The `AbortHandle` type is\r\ncurrently marked as unstable.\r\n\r\nThe spawning methods on `JoinSet` are modified to return an\r\n`AbortHandle` that can be used to cancel the spawned task.\r\n\r\n## Future Work\r\n\r\n- Currently, the `AbortHandle` type is _only_ available in the public\r\nAPI through a `JoinSet`. We could also make the\r\n`JoinHandle::abort_handle` method public, to allow users to use the\r\n`AbortHandle` type in other contexts. I didn't do that in this PR,\r\nbecause I wanted to make the API addition as minimal as possible, but we\r\ncould make this method public later.\r\n\r\n- Currently, `AbortHandle` is not `Clone`. We could easily make it\r\n`Clone` by incrementing the task's ref count. Since this adds more trait\r\nimpls to the API, we may want to be cautious about this, but I see no\r\nobvious reason we would need to remove a `Clone` implementation if one\r\nwas added...\r\n\r\n- There's been some discussion of adding a `JoinMap` type that allows\r\naborting tasks by key, and manages a hash map of keys to `AbortHandle`s,\r\nand removes the tasks from the map when they complete. This would make\r\naborting by key much easier, since the user wouldn't have to worry about\r\nkeeping the state of the map of abort handles and the tasks actually\r\nactive on the `JoinSet` in sync. After thinking about it a bit, I\r\nthought this is probably best as a `tokio-util` API --- it can currently\r\nbe implemented in `tokio-util` with the APIs added in `tokio` in this\r\nPR.\r\n\r\n- I noticed while working on this that `JoinSet::join_one` and\r\n`JoinSet::poll_join_one` return a cancelled `JoinError` when a task is\r\ncancelled. I'm not sure if I love this behavior --- it seems like it\r\nwould be nicer to just skip cancelled tasks and continue polling. But,\r\nthere are currently tests that expect a cancelled `JoinError` to be\r\nreturned for each cancelled task, so I didn't want to change it in\r\n_this_ PR. I think this is worth revisiting before stabilizing the API,\r\nthough?\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4530/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4530/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4527", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4527/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4527/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4527/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4527", "id": 1147896685, "node_id": "PR_kwDOBAsbdc4zVYSD", "number": 4527, "title": "ci: fix test not working on wasm", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 2119690410, "node_id": "MDU6TGFiZWwyMTE5NjkwNDEw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-ci", "name": "A-ci", "color": "f7e101", "default": false, "description": "Area: The continuous integration setup"}, {"id": 4361775828, "node_id": "LA_kwDOBAsbdc8AAAABA_tq1A", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-wasm", "name": "T-wasm", "color": "bfd4f2", "default": false, "description": "Topic: Web Assembly"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-23T10:13:35Z", "updated_at": "2022-07-25T14:18:51Z", "closed_at": "2022-02-23T10:46:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4527", "html_url": "https://github.com/tokio-rs/tokio/pull/4527", "diff_url": "https://github.com/tokio-rs/tokio/pull/4527.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4527.patch", "merged_at": "2022-02-23T10:46:17Z"}, "body": "This fixes a test failure that broke master.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4527/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4525", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4525/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4525/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4525/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4525", "id": 1147062073, "node_id": "PR_kwDOBAsbdc4zSxnX", "number": 4525, "title": "remove `example`'s `Cargo.toml` dependencies path,make example works.", "user": {"login": "zys864", "id": 23713554, "node_id": "MDQ6VXNlcjIzNzEzNTU0", "avatar_url": "https://avatars.githubusercontent.com/u/23713554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zys864", "html_url": "https://github.com/zys864", "followers_url": "https://api.github.com/users/zys864/followers", "following_url": "https://api.github.com/users/zys864/following{/other_user}", "gists_url": "https://api.github.com/users/zys864/gists{/gist_id}", "starred_url": "https://api.github.com/users/zys864/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zys864/subscriptions", "organizations_url": "https://api.github.com/users/zys864/orgs", "repos_url": "https://api.github.com/users/zys864/repos", "events_url": "https://api.github.com/users/zys864/events{/privacy}", "received_events_url": "https://api.github.com/users/zys864/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2607559888, "node_id": "MDU6TGFiZWwyNjA3NTU5ODg4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-examples", "name": "A-examples", "color": "f7e101", "default": false, "description": "Area: The examples"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-22T15:37:03Z", "updated_at": "2022-02-28T21:51:40Z", "closed_at": "2022-02-28T21:51:33Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4525", "html_url": "https://github.com/tokio-rs/tokio/pull/4525", "diff_url": "https://github.com/tokio-rs/tokio/pull/4525.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4525.patch", "merged_at": "2022-02-28T21:51:33Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\nThe poll request [#4521](https://github.com/tokio-rs/tokio/runs/5273189299?check_suite_focus=true) CI `cargo test --workspace --all-features` failed,\r\n## Solution\r\nremove `examples/Cargo.toml`  path dependencies\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4525/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4524", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4524/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4524/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4524/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4524", "id": 1146321925, "node_id": "PR_kwDOBAsbdc4zQWw7", "number": 4524, "title": "Improve docs for tokio_unstable.", "user": {"login": "NfNitLoop", "id": 339075, "node_id": "MDQ6VXNlcjMzOTA3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/339075?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NfNitLoop", "html_url": "https://github.com/NfNitLoop", "followers_url": "https://api.github.com/users/NfNitLoop/followers", "following_url": "https://api.github.com/users/NfNitLoop/following{/other_user}", "gists_url": "https://api.github.com/users/NfNitLoop/gists{/gist_id}", "starred_url": "https://api.github.com/users/NfNitLoop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NfNitLoop/subscriptions", "organizations_url": "https://api.github.com/users/NfNitLoop/orgs", "repos_url": "https://api.github.com/users/NfNitLoop/repos", "events_url": "https://api.github.com/users/NfNitLoop/events{/privacy}", "received_events_url": "https://api.github.com/users/NfNitLoop/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2022-02-22T00:08:05Z", "updated_at": "2022-02-25T17:36:52Z", "closed_at": "2022-02-25T17:36:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4524", "html_url": "https://github.com/tokio-rs/tokio/pull/4524", "diff_url": "https://github.com/tokio-rs/tokio/pull/4524.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4524.patch", "merged_at": "2022-02-25T17:36:38Z"}, "body": "## Motivation\r\n\r\nRan into some headaches getting `tokio_unstable` working, since I'd never had to deal with `--cfg` directly before. I was told \"PRs welcome\" in the [Tokio Discord][1], so here I am. :) \r\n\r\n[1]: https://discord.com/channels/500028886025895936/500336333500448798/945420414052614204\r\n\r\n## Solution\r\n\r\nMostly I added an example `.cargo/config.toml` for others who run into this.\r\n\r\nBut the existing docs seemed really focused on \"these feature flags are enabled by tokio_unstable\", but now tioko_unstable also enables JoinSet, so I reworked it a bit to call that out explicitly.\r\n\r\nI didn't want to blather on too much in rustdoc about \"this is why we can't just use a crate feature\", so I just linked to the writeup I posted about it on the Rust internals forum.  Is that weird? \ud83d\ude05 \r\n\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4524/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4521", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4521/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4521/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4521/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4521", "id": 1145661445, "node_id": "PR_kwDOBAsbdc4zOK3W", "number": 4521, "title": "chore: prepare tokio-util 0.7.1 release", "user": {"login": "djc", "id": 158471, "node_id": "MDQ6VXNlcjE1ODQ3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/158471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djc", "html_url": "https://github.com/djc", "followers_url": "https://api.github.com/users/djc/followers", "following_url": "https://api.github.com/users/djc/following{/other_user}", "gists_url": "https://api.github.com/users/djc/gists{/gist_id}", "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djc/subscriptions", "organizations_url": "https://api.github.com/users/djc/orgs", "repos_url": "https://api.github.com/users/djc/repos", "events_url": "https://api.github.com/users/djc/events{/privacy}", "received_events_url": "https://api.github.com/users/djc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-21T11:16:23Z", "updated_at": "2022-03-28T12:34:12Z", "closed_at": "2022-03-28T12:34:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4521", "html_url": "https://github.com/tokio-rs/tokio/pull/4521", "diff_url": "https://github.com/tokio-rs/tokio/pull/4521.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4521.patch", "merged_at": "2022-03-28T12:34:11Z"}, "body": "The minimal versions fix from #4490 is required to bump h2, which is probably one of the more prominent tokio-util users.\r\n\r\nWe might want to wait to get #4520 and/or #4508 in, too?", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4521/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4521/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4520", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4520/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4520/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4520/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4520", "id": 1145637214, "node_id": "PR_kwDOBAsbdc4zOFvJ", "number": 4520, "title": "util: fix import path of CancellationToken in example code", "user": {"login": "k4ji", "id": 9458203, "node_id": "MDQ6VXNlcjk0NTgyMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/9458203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k4ji", "html_url": "https://github.com/k4ji", "followers_url": "https://api.github.com/users/k4ji/followers", "following_url": "https://api.github.com/users/k4ji/following{/other_user}", "gists_url": "https://api.github.com/users/k4ji/gists{/gist_id}", "starred_url": "https://api.github.com/users/k4ji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k4ji/subscriptions", "organizations_url": "https://api.github.com/users/k4ji/orgs", "repos_url": "https://api.github.com/users/k4ji/repos", "events_url": "https://api.github.com/users/k4ji/events{/privacy}", "received_events_url": "https://api.github.com/users/k4ji/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-21T10:55:59Z", "updated_at": "2022-02-23T10:55:46Z", "closed_at": "2022-02-23T10:46:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4520", "html_url": "https://github.com/tokio-rs/tokio/pull/4520", "diff_url": "https://github.com/tokio-rs/tokio/pull/4520.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4520.patch", "merged_at": "2022-02-23T10:46:36Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\nExamples in `cancellation_token.rs` doesn't work since import path of `CancellationToken` is not up to date. I'd like to fix this to make the examples work without each developer fixing import path.\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\nFix import path of CancellationToken\ud83d\udc4d\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4520/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4511", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4511/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4511/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4511/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4511", "id": 1140659746, "node_id": "PR_kwDOBAsbdc4y9KOh", "number": 4511, "title": "Include more documentation for thread_pool/worker", "user": {"login": "rcmgleite", "id": 5962389, "node_id": "MDQ6VXNlcjU5NjIzODk=", "avatar_url": "https://avatars.githubusercontent.com/u/5962389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rcmgleite", "html_url": "https://github.com/rcmgleite", "followers_url": "https://api.github.com/users/rcmgleite/followers", "following_url": "https://api.github.com/users/rcmgleite/following{/other_user}", "gists_url": "https://api.github.com/users/rcmgleite/gists{/gist_id}", "starred_url": "https://api.github.com/users/rcmgleite/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rcmgleite/subscriptions", "organizations_url": "https://api.github.com/users/rcmgleite/orgs", "repos_url": "https://api.github.com/users/rcmgleite/repos", "events_url": "https://api.github.com/users/rcmgleite/events{/privacy}", "received_events_url": "https://api.github.com/users/rcmgleite/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993510878, "node_id": "MDU6TGFiZWwxOTkzNTEwODc4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-runtime", "name": "M-runtime", "color": "f7b101", "default": false, "description": "Module: tokio/runtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-16T22:37:01Z", "updated_at": "2022-03-02T12:55:15Z", "closed_at": "2022-03-02T12:55:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4511", "html_url": "https://github.com/tokio-rs/tokio/pull/4511", "diff_url": "https://github.com/tokio-rs/tokio/pull/4511.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4511.patch", "merged_at": "2022-03-02T12:55:15Z"}, "body": "## Motivation\r\n\r\nAfter spending some time reading the internals of the runtime I thought that having more comments on the code around specific behaviors would be helpful to others.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4511/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4508", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4508/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4508/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4508/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4508", "id": 1140429734, "node_id": "PR_kwDOBAsbdc4y8hPz", "number": 4508, "title": "Add `length_field_type` to `LengthDelimitedCodec` builder", "user": {"login": "nvzqz", "id": 10367662, "node_id": "MDQ6VXNlcjEwMzY3NjYy", "avatar_url": "https://avatars.githubusercontent.com/u/10367662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nvzqz", "html_url": "https://github.com/nvzqz", "followers_url": "https://api.github.com/users/nvzqz/followers", "following_url": "https://api.github.com/users/nvzqz/following{/other_user}", "gists_url": "https://api.github.com/users/nvzqz/gists{/gist_id}", "starred_url": "https://api.github.com/users/nvzqz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nvzqz/subscriptions", "organizations_url": "https://api.github.com/users/nvzqz/orgs", "repos_url": "https://api.github.com/users/nvzqz/repos", "events_url": "https://api.github.com/users/nvzqz/events{/privacy}", "received_events_url": "https://api.github.com/users/nvzqz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 2025360731, "node_id": "MDU6TGFiZWwyMDI1MzYwNzMx", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-codec", "name": "M-codec", "color": "f7b101", "default": false, "description": "Module: tokio-util/codec"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-16T18:51:31Z", "updated_at": "2022-02-23T18:23:19Z", "closed_at": "2022-02-23T10:46:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4508", "html_url": "https://github.com/tokio-rs/tokio/pull/4508", "diff_url": "https://github.com/tokio-rs/tokio/pull/4508.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4508.patch", "merged_at": "2022-02-23T10:46:53Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\nLike `length_field_length` except you pass a compile-time checked unsigned integer type instead.\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\nPowers of two are the most common values for `length_field_length`, but passing in a number of bytes for these feels a bit awkward, especially when the docs state \"parse a `u16` length field\".\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n\r\nAdd `length_field_type` method that takes a generic type.\r\n\r\nImplement a sealed (public in private) trait for acceptable types, failing on bad types at compile-time (e.g. `i32`, `u128`, `String`).", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4508/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4508/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4507", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4507/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4507/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4507/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4507", "id": 1140349765, "node_id": "PR_kwDOBAsbdc4y8Qcj", "number": 4507, "title": "tokio: Add initial io driver metrics", "user": {"login": "LucioFranco", "id": 5758045, "node_id": "MDQ6VXNlcjU3NTgwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5758045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LucioFranco", "html_url": "https://github.com/LucioFranco", "followers_url": "https://api.github.com/users/LucioFranco/followers", "following_url": "https://api.github.com/users/LucioFranco/following{/other_user}", "gists_url": "https://api.github.com/users/LucioFranco/gists{/gist_id}", "starred_url": "https://api.github.com/users/LucioFranco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LucioFranco/subscriptions", "organizations_url": "https://api.github.com/users/LucioFranco/orgs", "repos_url": "https://api.github.com/users/LucioFranco/repos", "events_url": "https://api.github.com/users/LucioFranco/events{/privacy}", "received_events_url": "https://api.github.com/users/LucioFranco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993508195, "node_id": "MDU6TGFiZWwxOTkzNTA4MTk1", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-io", "name": "M-io", "color": "f7b101", "default": false, "description": "Module: tokio/io"}, {"id": 3299450450, "node_id": "MDU6TGFiZWwzMjk5NDUwNDUw", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-metrics", "name": "M-metrics", "color": "f7b101", "default": false, "description": "Module: tokio/runtime/metrics"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-16T17:33:21Z", "updated_at": "2022-02-24T18:39:38Z", "closed_at": "2022-02-24T18:39:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4507", "html_url": "https://github.com/tokio-rs/tokio/pull/4507", "diff_url": "https://github.com/tokio-rs/tokio/pull/4507.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4507.patch", "merged_at": "2022-02-24T18:39:38Z"}, "body": "### Work in progress\r\n\r\nThis adds the initial IO driver metrics.\r\n\r\nRef: https://github.com/tokio-rs/tokio/issues/4073\r\n\r\n### Todo\r\n\r\n- [x] tests\r\n- [x] docs\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4507/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4507/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4504", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4504/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4504/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4504/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4504", "id": 1139175179, "node_id": "PR_kwDOBAsbdc4y4e7T", "number": 4504, "title": "chore: prepare Tokio v1.17.0 release", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-02-15T20:19:54Z", "updated_at": "2022-02-16T18:50:23Z", "closed_at": "2022-02-16T18:50:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4504", "html_url": "https://github.com/tokio-rs/tokio/pull/4504", "diff_url": "https://github.com/tokio-rs/tokio/pull/4504.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4504.patch", "merged_at": "2022-02-16T18:50:22Z"}, "body": "# 1.17.0 (February 15, 2022)\r\n\r\nThis release updates the minimum supported Rust version (MSRV) to 1.49,\r\nthe `mio` dependency to v0.8, and the (optional) `parking_lot`\r\ndependency to v0.12. Additionally, it contains several bug fixes, as\r\nwell as internal refactoring and performance improvements.\r\n\r\n### Fixed\r\n\r\n- time: prevent panicking in `sleep` with large durations ([#4495])\r\n- time: eliminate potential panics in `Instant` arithmetic on platforms\r\n  where `Instant::now` is not monotonic ([#4461])\r\n- io: fix `DuplexStream` not participating in cooperative yielding\r\n  ([#4478])\r\n- rt: fix potential double panic when dropping a `JoinHandle` ([#4430])\r\n\r\n### Changed\r\n\r\n- update minimum supported Rust version to 1.49 ([#4457])\r\n- update `parking_lot` dependency to v0.12.0 ([#4459])\r\n- update `mio` dependency to v0.8 ([#4449])\r\n- rt: remove an unnecessary lock in the blocking pool ([#4436])\r\n- rt: remove an unnecessary enum in the basic scheduler ([#4462])\r\n- time: use bit manipulation instead of modulo to improve performance\r\n  ([#4480])\r\n- net: use `std::future::Ready` instead of our own `Ready` future\r\n  ([#4271])\r\n- replace deprecated `atomic::spin_loop_hint` with `hint::spin_loop`\r\n  ([#4491])\r\n- fix miri failures in intrusive linked lists ([#4397])\r\n\r\n### Documented\r\n\r\n- io: add an example for `tokio::process::ChildStdin` ([#4479])\r\n\r\n### Unstable\r\n\r\nThe following changes only apply when building with `--cfg\r\ntokio_unstable`:\r\n\r\n- task: fix missing location information in `tracing` spans generated by\r\n  `spawn_local` ([#4483])\r\n- task: add `JoinSet` for managing sets of tasks ([#4335])\r\n- metrics: fix compilation error on MIPS ([#4475])\r\n- metrics: fix compilation error on arm32v7 ([#4453])\r\n\r\n[#4495]: https://github.com/tokio-rs/tokio/pull/4495\r\n[#4461]: https://github.com/tokio-rs/tokio/pull/4461\r\n[#4478]: https://github.com/tokio-rs/tokio/pull/4478\r\n[#4430]: https://github.com/tokio-rs/tokio/pull/4430\r\n[#4457]: https://github.com/tokio-rs/tokio/pull/4457\r\n[#4459]: https://github.com/tokio-rs/tokio/pull/4459\r\n[#4449]: https://github.com/tokio-rs/tokio/pull/4449\r\n[#4462]: https://github.com/tokio-rs/tokio/pull/4462\r\n[#4436]: https://github.com/tokio-rs/tokio/pull/4436\r\n[#4480]: https://github.com/tokio-rs/tokio/pull/4480\r\n[#4271]: https://github.com/tokio-rs/tokio/pull/4271\r\n[#4491]: https://github.com/tokio-rs/tokio/pull/4491\r\n[#4397]: https://github.com/tokio-rs/tokio/pull/4397\r\n[#4479]: https://github.com/tokio-rs/tokio/pull/4479\r\n[#4483]: https://github.com/tokio-rs/tokio/pull/4483\r\n[#4335]: https://github.com/tokio-rs/tokio/pull/4335\r\n[#4475]: https://github.com/tokio-rs/tokio/pull/4475\r\n[#4453]: https://github.com/tokio-rs/tokio/pull/4453", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4504/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4504/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4503", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4503/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4503/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4503/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4503", "id": 1138992927, "node_id": "PR_kwDOBAsbdc4y3682", "number": 4503, "title": "task: fix unstable API documentation notes", "user": {"login": "hawkw", "id": 2796466, "node_id": "MDQ6VXNlcjI3OTY0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2796466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hawkw", "html_url": "https://github.com/hawkw", "followers_url": "https://api.github.com/users/hawkw/followers", "following_url": "https://api.github.com/users/hawkw/following{/other_user}", "gists_url": "https://api.github.com/users/hawkw/gists{/gist_id}", "starred_url": "https://api.github.com/users/hawkw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hawkw/subscriptions", "organizations_url": "https://api.github.com/users/hawkw/orgs", "repos_url": "https://api.github.com/users/hawkw/repos", "events_url": "https://api.github.com/users/hawkw/events{/privacy}", "received_events_url": "https://api.github.com/users/hawkw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 830340165, "node_id": "MDU6TGFiZWw4MzAzNDAxNjU=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}, {"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-15T17:24:44Z", "updated_at": "2022-02-15T17:57:07Z", "closed_at": "2022-02-15T17:57:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4503", "html_url": "https://github.com/tokio-rs/tokio/pull/4503", "diff_url": "https://github.com/tokio-rs/tokio/pull/4503.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4503.patch", "merged_at": "2022-02-15T17:57:06Z"}, "body": "## Motivation\r\n\r\nPR #4499 made the `JoinSet` API unstable, but did not add a\r\ndocumentation note explaining unstable features. In general, since the\r\ndocs.rs build includes unstable APIs, it's probably worth including\r\nthese notes so that users understand what it means for an API to be\r\nunstable.\r\n\r\n## Solution\r\n\r\nThis branch adds a note on unstable APIs to the `JoinSet` type-level\r\ndocumentation, similar to the notes for `task::Builder` and the runtime\r\nmetrics APIs.\r\n\r\nAlso, I noticed that there was a broken link to the top-level\r\ndocumentation on unstable APIs in the docs for `task::Builder`, so I\r\nfixed that as well.\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4503/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4502", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4502/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4502/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4502/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4502", "id": 1138829336, "node_id": "PR_kwDOBAsbdc4y3aHt", "number": 4502, "title": "stream: expose `Elapsed`", "user": {"login": "lambdalisue", "id": 546312, "node_id": "MDQ6VXNlcjU0NjMxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/546312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lambdalisue", "html_url": "https://github.com/lambdalisue", "followers_url": "https://api.github.com/users/lambdalisue/followers", "following_url": "https://api.github.com/users/lambdalisue/following{/other_user}", "gists_url": "https://api.github.com/users/lambdalisue/gists{/gist_id}", "starred_url": "https://api.github.com/users/lambdalisue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lambdalisue/subscriptions", "organizations_url": "https://api.github.com/users/lambdalisue/orgs", "repos_url": "https://api.github.com/users/lambdalisue/repos", "events_url": "https://api.github.com/users/lambdalisue/events{/privacy}", "received_events_url": "https://api.github.com/users/lambdalisue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993513841, "node_id": "MDU6TGFiZWwxOTkzNTEzODQx", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-time", "name": "M-time", "color": "f7b101", "default": false, "description": "Module: tokio/time"}, {"id": 2583818939, "node_id": "MDU6TGFiZWwyNTgzODE4OTM5", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-stream", "name": "A-tokio-stream", "color": "f7e101", "default": false, "description": "Area: The tokio-stream crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-15T15:17:39Z", "updated_at": "2022-03-02T15:00:27Z", "closed_at": "2022-03-02T12:53:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4502", "html_url": "https://github.com/tokio-rs/tokio/pull/4502", "diff_url": "https://github.com/tokio-rs/tokio/pull/4502.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4502.patch", "merged_at": "2022-03-02T12:53:22Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\nWe cannot use an error on `StreamExt::timeout()`\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n\r\nExpose `Elapsed` as `tokio_stream::Elapsed`\r\n\r\n## Note\r\n\r\nIt seems https://github.com/tokio-rs/tokio/pull/4286 points the same issue but it looked like it had stopped while so I made a new one. ", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4502/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4499", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4499/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4499/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4499/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4499", "id": 1137671462, "node_id": "PR_kwDOBAsbdc4yzipb", "number": 4499, "title": "rt: make `JoinSet` unstable", "user": {"login": "carllerche", "id": 6180, "node_id": "MDQ6VXNlcjYxODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carllerche", "html_url": "https://github.com/carllerche", "followers_url": "https://api.github.com/users/carllerche/followers", "following_url": "https://api.github.com/users/carllerche/following{/other_user}", "gists_url": "https://api.github.com/users/carllerche/gists{/gist_id}", "starred_url": "https://api.github.com/users/carllerche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carllerche/subscriptions", "organizations_url": "https://api.github.com/users/carllerche/orgs", "repos_url": "https://api.github.com/users/carllerche/repos", "events_url": "https://api.github.com/users/carllerche/events{/privacy}", "received_events_url": "https://api.github.com/users/carllerche/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993512328, "node_id": "MDU6TGFiZWwxOTkzNTEyMzI4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-task", "name": "M-task", "color": "f7b101", "default": false, "description": "Module: tokio/task"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-14T18:17:23Z", "updated_at": "2022-02-15T09:37:41Z", "closed_at": "2022-02-15T09:37:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4499", "html_url": "https://github.com/tokio-rs/tokio/pull/4499", "diff_url": "https://github.com/tokio-rs/tokio/pull/4499.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4499.patch", "merged_at": "2022-02-15T09:37:41Z"}, "body": "There are still some open questions related to the API. Until they are\r\nresolved, the type should be marked as unstable so releases are not\r\nblocked.\r\n\r\nSpecifically, how can tasks spawned onto the `JoinSet` be canceled?\r\nMy inclination would be to return an `AbortHandle` from `JoinSet::spawn`.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4499/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4499/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4498", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4498/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4498/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4498/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4498", "id": 1137477865, "node_id": "PR_kwDOBAsbdc4yy5Z0", "number": 4498, "title": "Add task::consume_budget util for cooperative scheduling", "user": {"login": "psarna", "id": 10433047, "node_id": "MDQ6VXNlcjEwNDMzMDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10433047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psarna", "html_url": "https://github.com/psarna", "followers_url": "https://api.github.com/users/psarna/followers", "following_url": "https://api.github.com/users/psarna/following{/other_user}", "gists_url": "https://api.github.com/users/psarna/gists{/gist_id}", "starred_url": "https://api.github.com/users/psarna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psarna/subscriptions", "organizations_url": "https://api.github.com/users/psarna/orgs", "repos_url": "https://api.github.com/users/psarna/repos", "events_url": "https://api.github.com/users/psarna/events{/privacy}", "received_events_url": "https://api.github.com/users/psarna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 2025338308, "node_id": "MDU6TGFiZWwyMDI1MzM4MzA4", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-coop", "name": "M-coop", "color": "f7b101", "default": false, "description": "Module: tokio/coop"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2022-02-14T15:36:15Z", "updated_at": "2022-05-30T09:21:45Z", "closed_at": "2022-05-30T09:15:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4498", "html_url": "https://github.com/tokio-rs/tokio/pull/4498", "diff_url": "https://github.com/tokio-rs/tokio/pull/4498.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4498.patch", "merged_at": "2022-05-30T09:15:54Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\nFor cpu-only computations that do not use any Tokio resources, budgeting does not really kick in in order to yield and prevent other tasks from starvation. One way to take part in budgeting is to use a Tokio resource, but some workloads simply don't need any, as they just need to compute a lot and occasionally  yield in order to keep latencies low (e.g. a Wasm engine).\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\n\r\nThe new mechanism - `task::consume_budget`, performs a budget check and consumes a unit of it as if a Tokio resource was used (except it wasn't, so it's cheaper) and yields only if the task exceeded the budget. That allows cpu-intenstive computations to define yield points that yield only conditionally, since unconditional yielding to runtime is a potentially heavy operation.\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4498/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4498/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4497", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4497/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4497/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4497/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4497", "id": 1135687918, "node_id": "PR_kwDOBAsbdc4ysnzx", "number": 4497, "title": "Fix waker update condition in `CancellationTokenState::check_for_cancellation`", "user": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 930277298, "node_id": "MDU6TGFiZWw5MzAyNzcyOTg=", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio-util", "name": "A-tokio-util", "color": "f7e101", "default": false, "description": "Area: The tokio-util crate"}, {"id": 1993511927, "node_id": "MDU6TGFiZWwxOTkzNTExOTI3", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-sync", "name": "M-sync", "color": "f7b101", "default": false, "description": "Module: tokio/sync"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-02-13T11:22:54Z", "updated_at": "2022-02-14T21:18:10Z", "closed_at": "2022-02-14T21:18:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4497", "html_url": "https://github.com/tokio-rs/tokio/pull/4497", "diff_url": "https://github.com/tokio-rs/tokio/pull/4497.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4497.patch", "merged_at": "2022-02-14T21:18:10Z"}, "body": "There was a missing exclamation mark in the condition we used to test whether we need a waker update in `check_for_cancellation`.\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4497/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4497/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4495", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4495/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4495/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4495/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4495", "id": 1134245181, "node_id": "PR_kwDOBAsbdc4ynTsM", "number": 4495, "title": "Prevent panicking in sleep() with large durations", "user": {"login": "ecton", "id": 50053, "node_id": "MDQ6VXNlcjUwMDUz", "avatar_url": "https://avatars.githubusercontent.com/u/50053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecton", "html_url": "https://github.com/ecton", "followers_url": "https://api.github.com/users/ecton/followers", "following_url": "https://api.github.com/users/ecton/following{/other_user}", "gists_url": "https://api.github.com/users/ecton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecton/subscriptions", "organizations_url": "https://api.github.com/users/ecton/orgs", "repos_url": "https://api.github.com/users/ecton/repos", "events_url": "https://api.github.com/users/ecton/events{/privacy}", "received_events_url": "https://api.github.com/users/ecton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}, {"id": 1993513841, "node_id": "MDU6TGFiZWwxOTkzNTEzODQx", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/M-time", "name": "M-time", "color": "f7b101", "default": false, "description": "Module: tokio/time"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-12T16:22:24Z", "updated_at": "2022-02-15T09:49:42Z", "closed_at": "2022-02-15T09:49:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4495", "html_url": "https://github.com/tokio-rs/tokio/pull/4495", "diff_url": "https://github.com/tokio-rs/tokio/pull/4495.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4495.patch", "merged_at": "2022-02-15T09:49:41Z"}, "body": "Closes #4494.\r\n\r\nReplaced an `expect()` with a graceful failure of returning u64::MAX.\r\nWhen looking at the usages of deadline/instant_to_tick, this new\r\nbehavior appears to be consistent with the expectations of the callers.\r\n\r\n## Motivation\r\n\r\nA user of my crate reported a panic in code that was calling `sleep()` with a large duration. The code behind `sleep()` does a checked_add()`, which to me implied that the code handled large durations. The documentation doesn't mention this panic as a possible outcome, despite a unit test being present to test for the failure.\r\n\r\n## Solution\r\n\r\nMy initial report was that this was purely a bug, but after looking at the code the panic was intentionally added due to the resolution of Instant on some platforms. However, when looking at the code that causes the panic, it has nothing to do with platform-specific behaviors.\r\n\r\nThe code in `time/driver/entry.rs` seems to only care about the relative order of the returned u64, and a value of u64::MAX seems to me to produce consistent, predictable results. So, this PR's proposed fix is to remove the panic and gracefully fail with `u64::MAX`.\r\n\r\nThe only test broken by this change is the panic-testing unit test. After removing that one unit test, the entire test suite passes.", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4495/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4492", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4492/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4492/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4492/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4492", "id": 1133644200, "node_id": "PR_kwDOBAsbdc4ylHr_", "number": 4492, "title": "chore: update minimal mio requirement to 0.7.11", "user": {"login": "taiki-e", "id": 43724913, "node_id": "MDQ6VXNlcjQzNzI0OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/43724913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taiki-e", "html_url": "https://github.com/taiki-e", "followers_url": "https://api.github.com/users/taiki-e/followers", "following_url": "https://api.github.com/users/taiki-e/following{/other_user}", "gists_url": "https://api.github.com/users/taiki-e/gists{/gist_id}", "starred_url": "https://api.github.com/users/taiki-e/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taiki-e/subscriptions", "organizations_url": "https://api.github.com/users/taiki-e/orgs", "repos_url": "https://api.github.com/users/taiki-e/repos", "events_url": "https://api.github.com/users/taiki-e/events{/privacy}", "received_events_url": "https://api.github.com/users/taiki-e/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-12T06:31:46Z", "updated_at": "2022-02-12T09:02:47Z", "closed_at": "2022-02-12T09:02:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4492", "html_url": "https://github.com/tokio-rs/tokio/pull/4492", "diff_url": "https://github.com/tokio-rs/tokio/pull/4492.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4492.patch", "merged_at": "2022-02-12T09:02:46Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\n\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\nUpdate minimal mio requirement to 0.7.11 includes https://github.com/tokio-rs/mio/pull/1478 (needed for windows) and https://github.com/tokio-rs/mio/pull/1434 (needed for macos).\r\n\r\nCaught in https://github.com/tokio-rs/tokio/pull/4490#issuecomment-1037008658 by using https://github.com/taiki-e/cargo-minimal-versions/pull/4.\r\n\r\n```\r\ninfo: running `cargo check --all-features` on tokio-stream (1/1)\r\n   Compiling libc v0.2.69\r\n   Compiling log v0.4.8\r\n   Compiling autocfg v1.0.0\r\n   Compiling memchr v2.2.0\r\n    Checking cfg-if v0.1.2\r\n    Checking arc-swap v0.4.0\r\n    Checking pin-project-lite v0.2.5\r\n    Checking once_cell v1.5.2\r\n    Checking bytes v1.0.0\r\n    Checking futures-core v0.3.0\r\n    Checking futures-sink v0.3.0\r\n   Compiling tokio v1.8.0\r\n    Checking signal-hook-registry v1.1.1\r\n    Checking mio v0.7.6\r\nerror[E0425]: cannot find value `TCP_KEEPINTVL` in crate `libc`\r\n    --> /Users/taiki/.cargo/registry/src/github.com-1ecc6299db9ec823/mio-0.7.6/src/sys/unix/tcp.rs:334:15\r\n     |\r\n334  |         libc::TCP_KEEPINTVL,\r\n     |               ^^^^^^^^^^^^^ help: a constant with a similar name exists: `TCP_KEEPALIVE`\r\n     |\r\n    ::: /Users/taiki/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.69/src/unix/bsd/apple/mod.rs:2259:1\r\n     |\r\n2259 | pub const TCP_KEEPALIVE: ::c_int = 0x10;\r\n     | ---------------------------------------- similarly named constant `TCP_KEEPALIVE` defined here\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4492/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4492/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4491", "repository_url": "https://api.github.com/repos/tokio-rs/tokio", "labels_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4491/labels{/name}", "comments_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4491/comments", "events_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4491/events", "html_url": "https://github.com/tokio-rs/tokio/pull/4491", "id": 1133611862, "node_id": "PR_kwDOBAsbdc4ylAr3", "number": 4491, "title": "replace deprecated `spin_loop_hint` with `hint::spin_loop`", "user": {"login": "name1e5s", "id": 15176913, "node_id": "MDQ6VXNlcjE1MTc2OTEz", "avatar_url": "https://avatars.githubusercontent.com/u/15176913?v=4", "gravatar_id": "", "url": "https://api.github.com/users/name1e5s", "html_url": "https://github.com/name1e5s", "followers_url": "https://api.github.com/users/name1e5s/followers", "following_url": "https://api.github.com/users/name1e5s/following{/other_user}", "gists_url": "https://api.github.com/users/name1e5s/gists{/gist_id}", "starred_url": "https://api.github.com/users/name1e5s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/name1e5s/subscriptions", "organizations_url": "https://api.github.com/users/name1e5s/orgs", "repos_url": "https://api.github.com/users/name1e5s/repos", "events_url": "https://api.github.com/users/name1e5s/events{/privacy}", "received_events_url": "https://api.github.com/users/name1e5s/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1993501286, "node_id": "MDU6TGFiZWwxOTkzNTAxMjg2", "url": "https://api.github.com/repos/tokio-rs/tokio/labels/A-tokio", "name": "A-tokio", "color": "f7e101", "default": false, "description": "Area: The main tokio crate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-12T04:58:11Z", "updated_at": "2022-02-12T19:47:04Z", "closed_at": "2022-02-12T19:47:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tokio-rs/tokio/pulls/4491", "html_url": "https://github.com/tokio-rs/tokio/pull/4491", "diff_url": "https://github.com/tokio-rs/tokio/pull/4491.diff", "patch_url": "https://github.com/tokio-rs/tokio/pull/4491.patch", "merged_at": "2022-02-12T19:47:04Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tokio-rs/tokio/blob/master/CONTRIBUTING.md\r\n\r\nThe contributors guide includes instructions for running rustfmt and building the\r\ndocumentation, which requires special commands beyond `cargo fmt` and `cargo doc`.\r\n-->\r\n\r\n## Motivation\r\nSince our MSRV has been increased to 1.49 in #4457, it's ok to replace deprecated `spin_loop_hint` with `hint::spin_loop`.\r\n\r\nclose #3498.\r\n<!--\r\nExplain the context and why you're making that change. What is the problem\r\nyou're trying to solve? In some cases there is not a problem and this can be\r\nthought of as being the motivation for your change.\r\n-->\r\n\r\n## Solution\r\n\r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tokio-rs/tokio/issues/4491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tokio-rs/tokio/issues/4491/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]