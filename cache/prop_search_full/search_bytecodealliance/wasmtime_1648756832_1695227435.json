[{"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7067", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7067/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7067/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7067/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7067", "id": 1903881866, "node_id": "PR_kwDOBhDaXM5aucPh", "number": 7067, "title": "Release Wasmtime 13.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-20T00:12:34Z", "updated_at": "2023-09-20T14:37:36Z", "closed_at": "2023-09-20T14:37:35Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7067", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7067", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7067.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7067.patch", "merged_at": "2023-09-20T14:37:35Z"}, "body": "This is an [automated pull request][process] from CI which is\nintended to notify maintainers that it's time to release Wasmtime\n13.0.0. The [release branch][branch] was created roughly two weeks ago\nand it's now time for it to be published and released.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n[branch]: https://github.com/bytecodealliance/wasmtime/tree/release-13.0.0\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7067/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7067/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7066", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7066/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7066/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7066/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7066", "id": 1903881837, "node_id": "PR_kwDOBhDaXM5aucPG", "number": 7066, "title": "Update release date of Wasmtime 13.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-20T00:12:31Z", "updated_at": "2023-09-20T15:27:29Z", "closed_at": "2023-09-20T15:27:28Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7066", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7066", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7066.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7066.patch", "merged_at": "2023-09-20T15:27:28Z"}, "body": "This is an [automated pull request][process] from CI which is updating\nthe release date of Wasmtime 13.0.0 to today. This PR's base branch\nis `main` and a second PR will be coming to perform the actual\nrelease which will be targeted at `release-13.0.0`.\n\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7066/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7064", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7064/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7064/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7064/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7064", "id": 1903727985, "node_id": "PR_kwDOBhDaXM5at64i", "number": 7064, "title": "c-api: Expose image_range for modules", "user": {"login": "rockwotj", "id": 8669100, "node_id": "MDQ6VXNlcjg2NjkxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8669100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockwotj", "html_url": "https://github.com/rockwotj", "followers_url": "https://api.github.com/users/rockwotj/followers", "following_url": "https://api.github.com/users/rockwotj/following{/other_user}", "gists_url": "https://api.github.com/users/rockwotj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockwotj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockwotj/subscriptions", "organizations_url": "https://api.github.com/users/rockwotj/orgs", "repos_url": "https://api.github.com/users/rockwotj/repos", "events_url": "https://api.github.com/users/rockwotj/events{/privacy}", "received_events_url": "https://api.github.com/users/rockwotj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-19T21:10:16Z", "updated_at": "2023-09-20T15:19:30Z", "closed_at": "2023-09-20T15:19:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7064", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7064", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7064.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7064.patch", "merged_at": "2023-09-20T15:19:30Z"}, "body": "We're using this to monitor the amount of executable memory each module\nneeds.\n\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7064/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7063", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7063/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7063/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7063/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7063", "id": 1903663672, "node_id": "PR_kwDOBhDaXM5ats3P", "number": 7063, "title": "wasi: Fix a few issues around stdin", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-19T20:14:41Z", "updated_at": "2023-09-19T23:32:41Z", "closed_at": "2023-09-19T23:32:40Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7063", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7063", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7063.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7063.patch", "merged_at": "2023-09-19T23:32:40Z"}, "body": "This commit is intended to address #6986 and some other issues related to stdin and reading it, notably:\r\n\r\n* Previously once EOF was reached the `closed` flag was mistakenly not set.\r\n* Previously data would be infinitely buffered regardless of how fast the guest program would consume it.\r\n* Previously stdin would be immediately ready by Wasmtime regardless of whether the guest wanted to read stdin or not.\r\n* The host-side preview1-to-preview2 adapter didn't perform a blocking read meaning that it never blocked.\r\n\r\nThese issues are addressed by refactoring the code in question. Note that this is similar to the logic of `AsyncReadStream` somewhat but that type is not appropriate in this context due to the singleton nature of stdin meaning that the per-stream helper task and per-stream buffer of `AsyncReadStream` are not appropriate.\r\n\r\nClosees #6986\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7063/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7059", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7059/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7059/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7059/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7059", "id": 1901795769, "node_id": "PR_kwDOBhDaXM5anYYM", "number": 7059, "title": "Update wasm-tools family of crates", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-18T21:44:08Z", "updated_at": "2023-09-18T23:06:15Z", "closed_at": "2023-09-18T23:06:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7059", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7059", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7059.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7059.patch", "merged_at": "2023-09-18T23:06:13Z"}, "body": "Mostly minor updates, but staying up-to-date.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7059/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7059/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7058", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7058/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7058/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7058/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7058", "id": 1901664025, "node_id": "PR_kwDOBhDaXM5am7Z-", "number": 7058, "title": "Force usage of a worker thread for stdin on all platforms", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-18T20:11:04Z", "updated_at": "2023-10-25T19:13:31Z", "closed_at": "2023-09-19T04:31:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7058", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7058", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7058.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7058.patch", "merged_at": "2023-09-19T04:31:30Z"}, "body": "This commit is a follow-up to #6833 to remove the `unix` module for handling stdio which sets stdin to nonblocking mode. I've just now discovered that on macOS at least configuring `O_NONBLOCK` for stdin affects the stdout/stderr descriptors too. This program for example will panic:\r\n\r\n    fn main() {\r\n        unsafe {\r\n            let r = libc::fcntl(\r\n                libc::STDIN_FILENO,\r\n                libc::F_SETFL,\r\n                libc::fcntl(libc::STDIN_FILENO, libc::F_GETFL) | libc::O_NONBLOCK,\r\n            );\r\n            assert_eq!(r, 0);\r\n        }\r\n\r\n        loop {\r\n            println!(\"hello\");\r\n        }\r\n    }\r\n\r\nIt was originally assumed that updating the flags for stdin wouldn't affect anything else except Wasmtime, but because this looks to not be the case this commit removes the logic of registering stdin raw with Tokio and instead unconditionally using the worker thread solution which should work in all situations.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7058/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7057", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7057/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7057/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7057/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7057", "id": 1901641836, "node_id": "PR_kwDOBhDaXM5am2mZ", "number": 7057, "title": "riscv64: Add compressed `addi`", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-18T19:54:29Z", "updated_at": "2023-09-19T00:16:27Z", "closed_at": "2023-09-19T00:16:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7057", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7057", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7057.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7057.patch", "merged_at": "2023-09-19T00:16:26Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR introduces all of the compressed variations of the `addi` instruction (4 different adds!) as well as compressed trap, compressed `debugtrap`, and compressed shift left.\r\n\r\nWe have the following add variants:\r\n\r\n* `c.addi` this is the normal `addi`, with a signed 6 bit immediate field.\r\n* `c.addiw` also fairly normal, a 32 bit add with a 6 bit immediate, that sign extends the result to 64bits.\r\n* `c.addi16sp` modifies the stack pointer with a signed 6 bit immediate scaled by 16.\r\n* `c.addi4spn` adds a zero extended 6 bit immediate scaled by 4 to the stack pointer. Unlike `c.addi16sp` it allows saving the result in any compressible register.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7057/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7055", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7055/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7055/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7055/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7055", "id": 1900456700, "node_id": "PR_kwDOBhDaXM5aizah", "number": 7055, "title": "Allow building for x86_64-linux-android", "user": {"login": "truboxl", "id": 12658589, "node_id": "MDQ6VXNlcjEyNjU4NTg5", "avatar_url": "https://avatars.githubusercontent.com/u/12658589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/truboxl", "html_url": "https://github.com/truboxl", "followers_url": "https://api.github.com/users/truboxl/followers", "following_url": "https://api.github.com/users/truboxl/following{/other_user}", "gists_url": "https://api.github.com/users/truboxl/gists{/gist_id}", "starred_url": "https://api.github.com/users/truboxl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/truboxl/subscriptions", "organizations_url": "https://api.github.com/users/truboxl/orgs", "repos_url": "https://api.github.com/users/truboxl/repos", "events_url": "https://api.github.com/users/truboxl/events{/privacy}", "received_events_url": "https://api.github.com/users/truboxl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-18T08:45:38Z", "updated_at": "2023-09-18T15:38:41Z", "closed_at": "2023-09-18T14:49:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7055", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7055", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7055.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7055.patch", "merged_at": "2023-09-18T14:49:24Z"}, "body": "Hi, these set of patches allow building for target x86_64-linux-android.\r\n\r\narmv7-linux-androideabi and i686-linux-android are blocked by https://github.com/mitsuhiko/listenfd/issues/16.\r\nThere maybe other roadblocks ahead but I wont investigate further for now.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7055/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7055/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7050", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7050/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7050/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7050/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7050", "id": 1899013229, "node_id": "PR_kwDOBhDaXM5aeNj6", "number": 7050, "title": "Implement support for exported resources in `bindgen!`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-15T20:03:42Z", "updated_at": "2023-09-15T22:24:50Z", "closed_at": "2023-09-15T22:24:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7050", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7050", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7050.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7050.patch", "merged_at": "2023-09-15T22:24:49Z"}, "body": "This commit updates the `wasmtime::component::bindgen!` to support exported resources. Exported resources are themselves always modeled as `ResourceAny` at runtime and are required to perform dynamic type checks to ensure that the right type of resource is passed in. Exported resources have their own `GuestXXX` structure exported to namespace all of their methods. Otherwise, like imports, there's not a whole lot of special treatment of exported resources.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7050/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7048", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7048/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7048/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7048/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7048", "id": 1898906243, "node_id": "PR_kwDOBhDaXM5ad2rD", "number": 7048, "title": "[release-13.0] backport #7031", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-15T18:38:17Z", "updated_at": "2023-09-15T19:27:14Z", "closed_at": "2023-09-15T19:27:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7048", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7048", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7048.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7048.patch", "merged_at": "2023-09-15T19:27:13Z"}, "body": "Backport #7031 to release 13. We wouldn't ordinarily accept backports this late, but this is the last release where this code will exist, so we are fixing a streams problem with this PR.\r\n\r\n@eduardomourar ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7048/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7048/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7047", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7047/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7047/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7047/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7047", "id": 1898393970, "node_id": "PR_kwDOBhDaXM5acGzy", "number": 7047, "title": "riscv64: Cleanup trap handling", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-09-15T13:01:15Z", "updated_at": "2023-09-18T20:32:01Z", "closed_at": "2023-09-18T20:32:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7047", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7047", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7047.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7047.patch", "merged_at": "2023-09-18T20:32:00Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR cleans up our trap instructions in the backend. We have 2 \"TrapIf\" style instructions. One that compares against zero, and a second that does any integer comparison. This PR does a couple of changes.\r\n\r\nMerge both `TrapIf` and `TrapIfC`. The new `TrapIf` instruction allows trapping with any integer condition. This is the first commit, and it does not change any of the emitted instruction sequences, just our printing.\r\n\r\nUse the new `MachBuffer::defer_trap` (#6011) method to place trap opcodes out of line. This does actually change the golden tests, and is contained to the second commit.\r\n\r\nLastly, the `defer_trap` change exposed a bug in our lowering of `br_table`. Previously we were emitting islands right before the jump table targets, but crucially *after* calculating the jump offset. This meant that if the island were actually emitted, we could jump right into the middle of it!\r\n\r\nThis was exposed by the `defer_trap` change since the test case would emit a trap before a huge `br_table`, forcing the island, and then jump into the first `br_table` target, which actually ended up being the trap opcode instead of the intended branch target.\r\n\r\nWe now emit the island at the start of the `br_table` sequence instead of in the middle.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7047/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7046", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7046/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7046/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7046/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7046", "id": 1897481367, "node_id": "PR_kwDOBhDaXM5aZDQN", "number": 7046, "title": "Flag more WASI methods as not-async", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T23:31:13Z", "updated_at": "2023-09-15T00:41:59Z", "closed_at": "2023-09-15T00:41:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7046", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7046", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7046.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7046.patch", "merged_at": "2023-09-15T00:41:57Z"}, "body": "All of `check-write`, `write`, and `write-zeros` can be represented as synchronous functions and don't need `async` treatment.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7046/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7045", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7045/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7045/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7045/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7045", "id": 1897480617, "node_id": "PR_kwDOBhDaXM5aZDGD", "number": 7045, "title": "riscv64: Refactor how immediates are stored and used", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-14T23:30:08Z", "updated_at": "2023-09-15T16:43:29Z", "closed_at": "2023-09-15T16:43:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7045", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7045", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7045.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7045.patch", "merged_at": "2023-09-15T16:43:28Z"}, "body": "I was curious to poke around the riscv64 backend and I wanted to touch up the handling of `Imm{12,20}` a bit after reading it. This commit is a refactoring of these two types with the following changes:\r\n\r\n* The payload of these types is now unsigned and guarantees that irrelevant bits are set to zero. For example `Imm12` is stored as `u16` where the upper four bits are guaranteed to be zero. This fixes a discrepancy where `Imm12::maybe_from_i64` was masked for example but `Imm12::from_bits` wasn't.\r\n\r\n* The `Neg for Imm12` impl was removed because -2048 is a valid `Imm12` but 2048 is not in-range for `Imm12` meaning that it is not an infallible operation.\r\n\r\n* Accessors are now named `bits` to get the `u32` representation suitable to be encoded into an instruction. Acquiring the underlying value is now done with `as_i{16,32}` depending on the type. The signed accessor does sign-extension as required to produce the semantically equivalent value.\r\n\r\n* Manual constructors were renamed to `from_{i16,i32}` instead of `from_bits`. This in theory helps convey that they're constructors for logical values rather than literal bit-wise values. Additionally asserts are now placed in these constructors asserting that the provided value is in-range.\r\n\r\n* The `FALSE` and `TRUE` constants were renamed `ZERO` and `ONE` and `Imm20::ZERO` was added.\r\n\r\nThis commit ended up changing many runtests, but only their CLIF printing rather than their encoding. This change is due to the fact that `Display` now prints the logical value of the immediate rather than the raw bit representation as a base 10 integer. It's not intended that this commit actually changes any behavior, instead it should purely be internal refactorings.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7045/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7044", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7044/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7044/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7044/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7044", "id": 1897340258, "node_id": "PR_kwDOBhDaXM5aYj19", "number": 7044, "title": "Simplify bindings generation for preview2 WASI", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T21:38:18Z", "updated_at": "2023-09-14T23:55:07Z", "closed_at": "2023-09-14T22:49:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7044", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7044", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7044.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7044.patch", "merged_at": "2023-09-14T22:49:48Z"}, "body": "This commit attempts to simplify the `preview2::bindings` module by consolidating everything into a single invocation of `bindgen!`. Previously this was separated out (I think) to handle some methods being `async` and not others, but the `bindgen!` macro has since grown the capability to have some functions async and not all.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7044/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7043", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7043/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7043/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7043/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7043", "id": 1897163377, "node_id": "PR_kwDOBhDaXM5aX-X0", "number": 7043, "title": "[13.0.0] Finish release notes for 13.0.0", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T19:18:45Z", "updated_at": "2023-09-14T20:43:39Z", "closed_at": "2023-09-14T20:43:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7043", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7043", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7043.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7043.patch", "merged_at": "2023-09-14T20:43:38Z"}, "body": "This is a backport of #6969 to the 13.0.0 release branch", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7043/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7042", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7042/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7042/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7042/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7042", "id": 1897137669, "node_id": "PR_kwDOBhDaXM5aX5CS", "number": 7042, "title": "Fix test expectations", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T18:59:26Z", "updated_at": "2023-10-25T19:12:24Z", "closed_at": "2023-09-14T20:14:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7042", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7042", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7042.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7042.patch", "merged_at": "2023-09-14T20:14:41Z"}, "body": "Same as https://github.com/bytecodealliance/wasmtime/pull/7038, but for `main`", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7042/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7042/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7041", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7041/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7041/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7041/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7041", "id": 1897136620, "node_id": "PR_kwDOBhDaXM5aX4z6", "number": 7041, "title": "[13.0.0] Fix test expectations", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T18:58:38Z", "updated_at": "2023-09-14T19:53:26Z", "closed_at": "2023-09-14T19:53:24Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7041", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7041", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7041.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7041.patch", "merged_at": "2023-09-14T19:53:24Z"}, "body": "Same as https://github.com/bytecodealliance/wasmtime/pull/7038, but for 13.0.0", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7041/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7040", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7040/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7040/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7040/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7040", "id": 1897135952, "node_id": "PR_kwDOBhDaXM5aX4q9", "number": 7040, "title": "[10.0.0] Fix test expectations", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T18:58:05Z", "updated_at": "2023-09-14T20:11:44Z", "closed_at": "2023-09-14T20:11:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7040", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7040", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7040.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7040.patch", "merged_at": "2023-09-14T20:11:43Z"}, "body": "Same as https://github.com/bytecodealliance/wasmtime/pull/7038, but for 10.0.x", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7040/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7039", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7039/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7039/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7039/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7039", "id": 1897135223, "node_id": "PR_kwDOBhDaXM5aX4hC", "number": 7039, "title": "[11.0.0] Fix test expectations", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T18:57:31Z", "updated_at": "2023-09-14T21:38:32Z", "closed_at": "2023-09-14T21:38:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7039", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7039", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7039.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7039.patch", "merged_at": "2023-09-14T21:38:31Z"}, "body": "Same as https://github.com/bytecodealliance/wasmtime/pull/7038, but for 11.0.x", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7039/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7038", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7038/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7038/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7038/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7038", "id": 1897134384, "node_id": "PR_kwDOBhDaXM5aX4V3", "number": 7038, "title": "[12.0.0] Fix test expectations", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-14T18:56:53Z", "updated_at": "2023-09-14T21:41:40Z", "closed_at": "2023-09-14T21:41:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7038", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7038", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7038.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7038.patch", "merged_at": "2023-09-14T21:41:39Z"}, "body": "This PR fixes a mistake in the prepared fixes for the recently published [security advisory](https://github.com/bytecodealliance/wasmtime/security/advisories/GHSA-gw5p-q8mj-p7gh). I mistakenly forgot to run the full test suite locally which meant that some golden test expectations relevant to the bug in question weren't fixed.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7038/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7036", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7036/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7036/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7036/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7036", "id": 1896937084, "node_id": "PR_kwDOBhDaXM5aXNqS", "number": 7036, "title": "Gracefully handle failure to allocate memory during compilation", "user": {"login": "rockwotj", "id": 8669100, "node_id": "MDQ6VXNlcjg2NjkxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8669100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockwotj", "html_url": "https://github.com/rockwotj", "followers_url": "https://api.github.com/users/rockwotj/followers", "following_url": "https://api.github.com/users/rockwotj/following{/other_user}", "gists_url": "https://api.github.com/users/rockwotj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockwotj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockwotj/subscriptions", "organizations_url": "https://api.github.com/users/rockwotj/orgs", "repos_url": "https://api.github.com/users/rockwotj/repos", "events_url": "https://api.github.com/users/rockwotj/events{/privacy}", "received_events_url": "https://api.github.com/users/rockwotj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-14T16:37:15Z", "updated_at": "2023-09-14T17:57:06Z", "closed_at": "2023-09-14T17:57:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7036", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7036", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7036.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7036.patch", "merged_at": "2023-09-14T17:57:06Z"}, "body": "We run in a unique environment with very little memory, so\nit's possible if there are many modules that we run out of memory,\ncallers should be able to handle this gracefully.\n\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7036/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7035", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7035/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7035/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7035/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7035", "id": 1896904888, "node_id": "PR_kwDOBhDaXM5aXGpQ", "number": 7035, "title": "winch: Add floating point rounding instructions for sse41", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T16:15:57Z", "updated_at": "2023-09-14T17:35:23Z", "closed_at": "2023-09-14T17:35:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7035", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7035", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7035.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7035.patch", "merged_at": "2023-09-14T17:35:22Z"}, "body": "Add floating point rounding instructions using `roundss` and `roundsd`. The fall-back path is currently unimplemented, but once we have support for libcalls we can use the same fallback that the cranelift lowerings use.\n\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7035/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7035/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7033", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7033/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7033/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7033/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7033", "id": 1895577631, "node_id": "PR_kwDOBhDaXM5aSjs7", "number": 7033, "title": "Fix a typo in an error message.", "user": {"login": "nirvdrum", "id": 12584, "node_id": "MDQ6VXNlcjEyNTg0", "avatar_url": "https://avatars.githubusercontent.com/u/12584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nirvdrum", "html_url": "https://github.com/nirvdrum", "followers_url": "https://api.github.com/users/nirvdrum/followers", "following_url": "https://api.github.com/users/nirvdrum/following{/other_user}", "gists_url": "https://api.github.com/users/nirvdrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/nirvdrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nirvdrum/subscriptions", "organizations_url": "https://api.github.com/users/nirvdrum/orgs", "repos_url": "https://api.github.com/users/nirvdrum/repos", "events_url": "https://api.github.com/users/nirvdrum/events{/privacy}", "received_events_url": "https://api.github.com/users/nirvdrum/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-14T03:07:46Z", "updated_at": "2023-09-14T05:24:50Z", "closed_at": "2023-09-14T05:24:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7033", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7033", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7033.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7033.patch", "merged_at": "2023-09-14T05:24:50Z"}, "body": "I didn't open a discussion for this issue since it's seems straightforward. While looking through the source I noticed there was a typo in a couple of error messages. This PR simply updates the error message strings. Since it was the same typo in two places we could extract a common string, but I wanted to keep this diff as small as possible. I don't think we need a new test case for this, but if you'd like one I can look into it.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7033/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7033/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7032", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7032/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7032/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7032/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7032", "id": 1895447245, "node_id": "PR_kwDOBhDaXM5aSL76", "number": 7032, "title": "impl `Clone` for `wasmtime::component::Linker`", "user": {"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": {"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2023-09-14T00:47:57Z", "updated_at": "2023-09-25T20:41:14Z", "closed_at": "2023-09-14T15:57:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7032", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7032", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7032.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7032.patch", "merged_at": "2023-09-14T15:57:35Z"}, "body": "The core Wasm `Linker` type is clonable, and the component linker needs to be used in similar settings where clonability is important.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7032/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7031", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7031/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7031/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7031/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7031", "id": 1895358654, "node_id": "PR_kwDOBhDaXM5aR5NB", "number": 7031, "title": "fix(wasi-http): honor permit in output stream", "user": {"login": "eduardomourar", "id": 16357187, "node_id": "MDQ6VXNlcjE2MzU3MTg3", "avatar_url": "https://avatars.githubusercontent.com/u/16357187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eduardomourar", "html_url": "https://github.com/eduardomourar", "followers_url": "https://api.github.com/users/eduardomourar/followers", "following_url": "https://api.github.com/users/eduardomourar/following{/other_user}", "gists_url": "https://api.github.com/users/eduardomourar/gists{/gist_id}", "starred_url": "https://api.github.com/users/eduardomourar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eduardomourar/subscriptions", "organizations_url": "https://api.github.com/users/eduardomourar/orgs", "repos_url": "https://api.github.com/users/eduardomourar/repos", "events_url": "https://api.github.com/users/eduardomourar/events{/privacy}", "received_events_url": "https://api.github.com/users/eduardomourar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-13T22:41:32Z", "updated_at": "2023-09-15T19:02:46Z", "closed_at": "2023-09-15T18:25:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7031", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7031", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7031.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7031.patch", "merged_at": "2023-09-15T18:25:57Z"}, "body": "This will enable back some of the WASI HTTP tests while also fixing the following bugs:\r\n- Honor permit in output stream as well as flushing it as expected (this was causing the sync tests to fail)\r\n- Inverted position in the result for `check-write` (wasi:io/stream) function wrap.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7031/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7030", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7030/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7030/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7030/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7030", "id": 1895075975, "node_id": "PR_kwDOBhDaXM5aQ7Ly", "number": 7030, "title": "riscv64: Add more compressed instructions", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-13T18:53:05Z", "updated_at": "2023-09-15T09:49:14Z", "closed_at": "2023-09-15T09:49:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7030", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7030", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7030.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7030.patch", "merged_at": "2023-09-15T09:49:13Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR adds two new compressed instruction formats. CA and CJ. These are used for some register-register arithmetic ops (CA) and jump instructions (CJ).\r\n\r\nIt also changes all instructions that use a Label, StackMap or Relocation to use `emit_uncompressed` to ensure that we don't wrongly compress a instruction when it is expecting a different type of label or relocation.\r\n\r\nCapstone seems to not recognize `c.jr ra` as `c.ret`, but it is technically an alias as far as I understand it.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7030/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7028", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7028/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7028/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7028/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7028", "id": 1893428661, "node_id": "PR_kwDOBhDaXM5aLWb6", "number": 7028, "title": "[s390x] Re-enable pseudo min/max test", "user": {"login": "uweigand", "id": 4154057, "node_id": "MDQ6VXNlcjQxNTQwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4154057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uweigand", "html_url": "https://github.com/uweigand", "followers_url": "https://api.github.com/users/uweigand/followers", "following_url": "https://api.github.com/users/uweigand/following{/other_user}", "gists_url": "https://api.github.com/users/uweigand/gists{/gist_id}", "starred_url": "https://api.github.com/users/uweigand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uweigand/subscriptions", "organizations_url": "https://api.github.com/users/uweigand/orgs", "repos_url": "https://api.github.com/users/uweigand/repos", "events_url": "https://api.github.com/users/uweigand/events{/privacy}", "received_events_url": "https://api.github.com/users/uweigand/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-12T22:57:02Z", "updated_at": "2023-09-13T00:51:55Z", "closed_at": "2023-09-13T00:51:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7028", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7028", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7028.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7028.patch", "merged_at": "2023-09-13T00:51:55Z"}, "body": "Due to a bug in the qemu emulation of the corresponding instruction, tests for pseudo min/max support had been disabled.  After moving to qemu 8.0.4, where the bug is fixed, these can be re-enabled.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7028/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7010", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7010/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7010/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7010/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7010", "id": 1893268162, "node_id": "PR_kwDOBhDaXM5aK4pJ", "number": 7010, "title": "Add support for `v128` to the typed function API", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-12T21:04:48Z", "updated_at": "2023-09-14T16:44:35Z", "closed_at": "2023-09-14T16:44:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7010", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7010", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7010.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7010.patch", "merged_at": "2023-09-14T16:44:34Z"}, "body": "This commit adds a Rust type `V128` which corresponds to the wasm `v128` type. This is intended to perhaps one day have accessors for lanes of various sizes but in the meantime only supports conversion back and forth between `u128`. The intention of this type is to allow platforms to perform typed between to functions that take or return `v128` wasm values.\r\n\r\nPreviously this was not implemented because it's a bit tricky ABI-wise. Typed functions work by passing arguments in registers which requires the calling convention to match in both Cranelift and in Rust. This should be the case for supported platforms and the default calling convention, especially now that the wasm calling convention is separate from the platform calling convention. This does mean, however, that this feature can only be supported on x86_64 and AArch64. Currently neither s390x nor RISC-V have a means of supporting the vector calling convention since the vector types aren't available on stable in Rust itself. This means that it's now unfortunately possible to write a Wasmtime embedding that compiles on x86_64 that doesn't compile on s390x for example, but given how niche this feature is that seems like an ok tradeoff for now and by the time it's a problem Rust might have native stable support for vector types on these platforms.\r\n\r\nprtest:full\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7010/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7009", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7009/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7009/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7009/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7009", "id": 1893206970, "node_id": "PR_kwDOBhDaXM5aKrDJ", "number": 7009, "title": "[release-13.0] Backport stream backpressure and associated fixups to 13.0", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}, {"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-12T20:23:53Z", "updated_at": "2023-09-13T03:04:30Z", "closed_at": "2023-09-13T03:04:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7009", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7009", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7009.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7009.patch", "merged_at": "2023-09-13T03:04:29Z"}, "body": "This is a backport of #6877, #7007, and #7008  to the `release-13.0.0` branch.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7009/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7009/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7008", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7008/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7008/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7008/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7008", "id": 1893158969, "node_id": "PR_kwDOBhDaXM5aKgg1", "number": 7008, "title": "Remove submodule re-added by accident", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-12T19:50:43Z", "updated_at": "2023-09-12T21:01:02Z", "closed_at": "2023-09-12T21:01:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7008", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7008", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7008.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7008.patch", "merged_at": "2023-09-12T21:01:01Z"}, "body": "This was removed in #6195 but re-added in #6877, I believe by accident, so this re-deletes it. I've also edited `.gitmodules` a bit while I was here to remove it and additionally keep other entries up-to-date with matching paths.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7008/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7008/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7007", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7007/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7007/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7007/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7007", "id": 1893154194, "node_id": "PR_kwDOBhDaXM5aKfcz", "number": 7007, "title": "Un-ignore now-passing test", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-12T19:47:41Z", "updated_at": "2023-09-13T01:51:19Z", "closed_at": "2023-09-12T21:01:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7007", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7007", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7007.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7007.patch", "merged_at": "2023-09-12T21:01:01Z"}, "body": "With the merging of #6877 prints to stdout with preview2 should now work without requiring extra sleeps or such.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7007/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7005", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7005/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7005/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7005/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7005", "id": 1892848835, "node_id": "PR_kwDOBhDaXM5aJcTS", "number": 7005, "title": "Add license to wasmtime-c-api-macros crate", "user": {"login": "rockwotj", "id": 8669100, "node_id": "MDQ6VXNlcjg2NjkxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8669100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockwotj", "html_url": "https://github.com/rockwotj", "followers_url": "https://api.github.com/users/rockwotj/followers", "following_url": "https://api.github.com/users/rockwotj/following{/other_user}", "gists_url": "https://api.github.com/users/rockwotj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockwotj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockwotj/subscriptions", "organizations_url": "https://api.github.com/users/rockwotj/orgs", "repos_url": "https://api.github.com/users/rockwotj/repos", "events_url": "https://api.github.com/users/rockwotj/events{/privacy}", "received_events_url": "https://api.github.com/users/rockwotj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-12T16:16:48Z", "updated_at": "2023-09-12T17:32:18Z", "closed_at": "2023-09-12T17:32:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7005", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7005", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7005.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7005.patch", "merged_at": "2023-09-12T17:32:17Z"}, "body": "Running cargo license on the c-api crate reports that this crate is\nunlicensed.\n\nWe use cargo-license to automate our license tracking for this library\nin our C++ application and it'd be nice to just have a license in here.\n\nI used the standard license that wasmtime uses, but happy to use\nanother.\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7005/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7003", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7003/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7003/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7003/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7003", "id": 1892389076, "node_id": "PR_kwDOBhDaXM5aH38O", "number": 7003, "title": "riscv64: Implement ELF TLS GD Relocations ", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-12T12:14:06Z", "updated_at": "2023-09-18T15:25:43Z", "closed_at": "2023-09-18T15:25:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7003", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7003", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7003.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7003.patch", "merged_at": "2023-09-18T15:25:42Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR implements ELF TLS GD relocations in the RISC-V backend. This is required to get the `rustc_codegen_cranelift`'s testsuite passing on this architecture.\r\n\r\nThe [TLS GD model for RISC-V](https://github.com/riscv-non-isa/riscv-elf-psabi-doc/blob/master/riscv-elf.adoc#global-dynamic) works slightly differently from the rest of the existing architectures. Usually you have 2 or 3 relocations pointing to a symbol and then a call to `__tls_get_addr`. RISC-V however has one relocation pointing to the symbol in a `auipc` instruction, and then a relocation pointing to a label in that `auipc` instruction, not the final symbol itself.\r\n\r\n```asm\r\nlabel:\r\n    auipc a0,0                    # R_RISCV_TLS_GD_HI20 (symbol)\r\n    addi  a0,a0,0                 # R_RISCV_PCREL_LO12_I (label)\r\n    call __tls_get_addr@plt\r\n```\r\n\r\nThis presents a problem as we currently don't have a way to export labels into the final binary, or a way to target labels with relocations.\r\n\r\nMost of this PR is dealing with that issue. In the first commit I've introduced a notion of label visibility that allows a label to be marked as public, and if so, be carried all the way through to binary object emission.\r\n\r\nSecondly is altering our allowed relocation targets. Currently we only allow external names, such as libcalls or other functions. I've altered this to allow targeting other labels within the function.\r\n\r\nOnly the final commit deals with implementing the TLS GD relocations in the RISC-V backend.\r\n\r\n\r\n---\r\n\r\nI also considered implementing TLS descriptors, but their spec isn't finalized yet (https://github.com/riscv-non-isa/riscv-elf-psabi-doc/issues/94)\r\n\r\nThis doesn't have a great deal of tests as its quite difficult to test these kinds of binary emissions. But I've manually tested this by running `cg_clif`'s testsuite.\r\n\r\nCC: @bjorn3 ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7003/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7003/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7002", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7002/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7002/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7002/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7002", "id": 1891375329, "node_id": "PR_kwDOBhDaXM5aEb2H", "number": 7002, "title": "winch: Use `Reg` where appropriate in the Masm", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-11T22:38:30Z", "updated_at": "2023-09-12T11:39:00Z", "closed_at": "2023-09-12T11:38:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7002", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7002", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7002.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7002.patch", "merged_at": "2023-09-12T11:38:59Z"}, "body": "This change is a small refactoring to some of the MacroAssembler functions to use `Reg` instead of `RegImm` where appropriate (e.g. when the operand is a destination).\r\n\r\n@elliottt pointed this out while working on https://github.com/bytecodealliance/wasmtime/pull/6982\r\n\r\nThis change also changes the signature of `float_abs` and `float_neg`, which can be simplified to take a single register.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7002/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7000", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7000/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7000/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7000/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7000", "id": 1891083800, "node_id": "PR_kwDOBhDaXM5aDbrK", "number": 7000, "title": "[backport-13.0][wasmtime-wasi] fix logic error in `monotonic-clock/subscribe`", "user": {"login": "dicej", "id": 1243153, "node_id": "MDQ6VXNlcjEyNDMxNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1243153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dicej", "html_url": "https://github.com/dicej", "followers_url": "https://api.github.com/users/dicej/followers", "following_url": "https://api.github.com/users/dicej/following{/other_user}", "gists_url": "https://api.github.com/users/dicej/gists{/gist_id}", "starred_url": "https://api.github.com/users/dicej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dicej/subscriptions", "organizations_url": "https://api.github.com/users/dicej/orgs", "repos_url": "https://api.github.com/users/dicej/repos", "events_url": "https://api.github.com/users/dicej/events{/privacy}", "received_events_url": "https://api.github.com/users/dicej/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-11T18:56:31Z", "updated_at": "2023-09-11T20:00:12Z", "closed_at": "2023-09-11T20:00:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7000", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7000", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7000.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7000.patch", "merged_at": "2023-09-11T20:00:12Z"}, "body": "This is a backport of https://github.com/bytecodealliance/wasmtime/pull/6993 to `release-13.0.0`.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7000/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6999", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6999/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6999/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6999/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6999", "id": 1890887310, "node_id": "PR_kwDOBhDaXM5aCxFL", "number": 6999, "title": "Fix build of `wasmtime-wasi-bench`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T16:42:02Z", "updated_at": "2023-09-11T17:56:36Z", "closed_at": "2023-09-11T17:56:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6999", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6999", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6999.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6999.patch", "merged_at": "2023-09-11T17:56:35Z"}, "body": "Looks like this wasn't built on CI since it wasn't tested. Flag it as testable which should build it on CI which should catch future errors like this.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6999/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6998", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6998/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6998/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6998/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6998", "id": 1890858613, "node_id": "PR_kwDOBhDaXM5aCq7Y", "number": 6998, "title": "[13.0.0]: Remove recursion from AMode lowering rules", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T16:24:20Z", "updated_at": "2023-09-11T17:05:20Z", "closed_at": "2023-09-11T17:05:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6998", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6998", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6998.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6998.patch", "merged_at": "2023-09-11T17:05:19Z"}, "body": "This is a backport of https://github.com/bytecodealliance/wasmtime/pull/6968 to the 13.0.0 release branch of Wasmtime. Note that unlike the other backports this does indeed include the AArch64 fixes as well.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6998/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6997", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6997/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6997/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6997/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6997", "id": 1890851726, "node_id": "PR_kwDOBhDaXM5aCpa9", "number": 6997, "title": " [10.0.0]: x64: Remove recursion in to_amode helper ", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T16:19:48Z", "updated_at": "2023-09-11T17:02:38Z", "closed_at": "2023-09-11T17:02:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6997", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6997", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6997.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6997.patch", "merged_at": "2023-09-11T17:02:37Z"}, "body": "This is a backport of https://github.com/bytecodealliance/wasmtime/pull/6968 to the 10.0.0 release branch of Wasmtime. Note that AArch64 is not backported as its recursion is not present on this branch.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6997/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6996", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6996/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6996/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6996/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6996", "id": 1890849961, "node_id": "PR_kwDOBhDaXM5aCpBk", "number": 6996, "title": "[11.0.0]: x64: Remove recursion in to_amode helper ", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T16:18:46Z", "updated_at": "2023-09-11T17:02:44Z", "closed_at": "2023-09-11T17:02:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6996", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6996", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6996.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6996.patch", "merged_at": "2023-09-11T17:02:43Z"}, "body": "This is a backport of https://github.com/bytecodealliance/wasmtime/pull/6968 to the 11.0.0 release branch of Wasmtime. Note that AArch64 is not backported as its recursion is not present on this branch.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6996/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6995", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6995/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6995/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6995/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6995", "id": 1890848217, "node_id": "PR_kwDOBhDaXM5aCopP", "number": 6995, "title": "[12.0.0]: x64: Remove recursion in `to_amode` helper", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T16:17:38Z", "updated_at": "2023-09-11T17:05:17Z", "closed_at": "2023-09-11T17:05:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6995", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6995", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6995.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6995.patch", "merged_at": "2023-09-11T17:05:16Z"}, "body": "This is a backport of https://github.com/bytecodealliance/wasmtime/pull/6968 to the 12.0.0 release branch of Wasmtime. Note that AArch64 is not backported as its recursion is not present on this branch.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6995/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6994", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6994/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6994/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6994/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6994", "id": 1890836559, "node_id": "PR_kwDOBhDaXM5aCmHM", "number": 6994, "title": "Bring some of Wasmtime's documentation more up-to-date", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T16:10:05Z", "updated_at": "2023-09-11T17:36:37Z", "closed_at": "2023-09-11T17:36:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6994", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6994", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6994.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6994.patch", "merged_at": "2023-09-11T17:36:36Z"}, "body": "Wasmtime has a fair bit of docs which are quite dated at this point or also somewhat duplicated. Additionally Wasmtime has a number of sections of \"more coming soon!\" where \"soon\" hasn't happened in a few years. I've gone through some sections here and tried to modernize docs a bit, and the high-level changes are:\r\n\r\n* Documentation about writing wasm is removed.\r\n* Wasm/WASI proposals are folded into tier documentation.\r\n* The tier documentation now additionally documents unsupported features.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6994/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6993", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6993/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6993/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6993/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6993", "id": 1890830671, "node_id": "PR_kwDOBhDaXM5aCk4Y", "number": 6993, "title": "[wasmtime-wasi] fix logic error in `monotonic-clock/subscribe`", "user": {"login": "dicej", "id": 1243153, "node_id": "MDQ6VXNlcjEyNDMxNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1243153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dicej", "html_url": "https://github.com/dicej", "followers_url": "https://api.github.com/users/dicej/followers", "following_url": "https://api.github.com/users/dicej/following{/other_user}", "gists_url": "https://api.github.com/users/dicej/gists{/gist_id}", "starred_url": "https://api.github.com/users/dicej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dicej/subscriptions", "organizations_url": "https://api.github.com/users/dicej/orgs", "repos_url": "https://api.github.com/users/dicej/repos", "events_url": "https://api.github.com/users/dicej/events{/privacy}", "received_events_url": "https://api.github.com/users/dicej/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-11T16:06:18Z", "updated_at": "2023-09-11T18:23:57Z", "closed_at": "2023-09-11T18:23:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6993", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6993", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6993.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6993.patch", "merged_at": "2023-09-11T18:23:57Z"}, "body": "When calculating the number of nanoseconds to wait, we should subtract the current time from the deadline, not vice-versa.  This was causing guests to sleep indefinitely due to integer underflow.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6993/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6992", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6992/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6992/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6992/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6992", "id": 1890611211, "node_id": "PR_kwDOBhDaXM5aB1s1", "number": 6992, "title": "Release Wasmtime 12.0.2", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-11T14:10:08Z", "updated_at": "2023-09-14T18:29:21Z", "closed_at": "2023-09-14T18:29:21Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6992", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6992", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6992.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6992.patch", "merged_at": "2023-09-14T18:29:20Z"}, "body": "This is an [automated pull request][process] from CI to create a patch\nrelease for Wasmtime 12.0.2, requested by @alexcrichton.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6992/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6991", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6991/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6991/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6991/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6991", "id": 1890610474, "node_id": "PR_kwDOBhDaXM5aB1in", "number": 6991, "title": "Release Wasmtime 10.0.2", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-11T14:09:46Z", "updated_at": "2023-09-14T18:29:01Z", "closed_at": "2023-09-14T18:29:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6991", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6991", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6991.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6991.patch", "merged_at": "2023-09-14T18:29:01Z"}, "body": "This is an [automated pull request][process] from CI to create a patch\nrelease for Wasmtime 10.0.2, requested by @alexcrichton.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6991/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6990", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6990/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6990/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6990/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6990", "id": 1890610430, "node_id": "PR_kwDOBhDaXM5aB1iD", "number": 6990, "title": "Release Wasmtime 11.0.2", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-11T14:09:44Z", "updated_at": "2023-09-14T18:28:57Z", "closed_at": "2023-09-14T18:28:56Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6990", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6990", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6990.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6990.patch", "merged_at": "2023-09-14T18:28:56Z"}, "body": "This is an [automated pull request][process] from CI to create a patch\nrelease for Wasmtime 11.0.2, requested by @alexcrichton.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6990/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6989", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6989/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6989/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6989/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6989", "id": 1889147961, "node_id": "PR_kwDOBhDaXM5Z88oC", "number": 6989, "title": "riscv64: Introduce Compressed Instructions", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-10T13:32:38Z", "updated_at": "2023-09-12T11:12:32Z", "closed_at": "2023-09-12T11:12:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6989", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6989", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6989.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6989.patch", "merged_at": "2023-09-12T11:12:31Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR makes introduces compressed instructions to the RISC-V backend as part of the C extension.\r\n\r\n### C extension introduction\r\n\r\nThe C Extension adds encodings for 16 bit instructions. These are allowed to be freely interleaved with uncompressed instructions (i.e. we don't  need a mode switch like Thumb2).\r\n\r\nSome C instruction formats cannot encode all registers, so they may only be emitted if they get assigned a certain physical register. Additionally C instructions (almost) always have an equivalent uncompressed instruction.\r\n\r\n### Implementation\r\n\r\nI've implemented this as an encoding only change. So our VCode instructions remain the same, but if we happen to get the correct registers and all the stars line up we emit a compressed instruction instead of a full sized instruction. \r\n\r\n`Inst::emit` is now split into 3 stages:\r\n\r\n1. First we run the instruction through `Inst::allocate` which just transforms a `Inst` with virtual registers, into a `Inst` with physical registers\r\n2. We then try to emit the instruction as a compressed instruction\r\n    * This may fail, and that's ok\r\n    * Since we now have the final physical registers we can check if it's possible to emit it as a compressed instruction\r\n3. If the compressed emission fails we default to the uncompressed emission\r\n\r\nThis PR only enables 2 instructions `c.add` and `c.mv`. Both of these use the CR format which allows the full range of registers. However they are enough to get us into trouble. `c.mv` is emitted quite often, and is enough to \"unalign\" most of the rest of the code.\r\n\r\n### Issues with capstone\r\n\r\nCapstone supports decoding C instructions with a separate \"Extra Mode\".\r\n\r\nCapstone currently cannot decode a number of instructions that we emit (i.e `Zca`, `Zcb`, `Zcs` or Vector Instructions). This is normally ok since it emits a `.byte ...` directive and we can still read the V-Code to figure out what is going on.\r\n\r\nIf I enable this \"Extra Mode\" by default it tries to decode these unknown instructions as C instructions and makes the whole thing unreadable.\r\n\r\nMy solution for this was to make C a non default extension, and only enable the Extra Mode when C is enabled. This lets us keep the normal disassembly for all current test cases. Mixing C instructions and Vector instructions still makes the whole thing unreadable, but at least its not the common case.\r\n\r\n### Runtests\r\n\r\nI've made pretty much all runtests run with C as well as without. Even if the runtest will never directly emits a C instruction, it can emit for example a `c.mv` and emit the rest of the instructions \"unaligned\" which is also a configuration worth testing.\r\n\r\n---\r\n\r\nThis is built on top of #6988 so it's worth waiting for that to be merged before looking into this. Additionally, it's probably a good idea to review this commit by commit instead of all at once.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6989/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6989/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6988", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6988/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6988/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6988/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6988", "id": 1889086721, "node_id": "PR_kwDOBhDaXM5Z8wvv", "number": 6988, "title": "riscv64: Remove support for fixed offset jumps from Jump instructions", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-10T10:18:47Z", "updated_at": "2023-09-11T15:28:00Z", "closed_at": "2023-09-11T15:27:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6988", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6988", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6988.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6988.patch", "merged_at": "2023-09-11T15:27:59Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR removes fixed offset jumps from some instructions in the RISC-V backend. Fixed offset jumps were replaced with labels in #6955. But we still have support for them.\r\n\r\nCurrently all branch instructions use the `BranchTarget` struct, that allows a label based jump, or a fixed offset jump.\r\n\r\nThis PR does the following changes:\r\n* `Jal` now takes a single `MachLabel` as it's target\r\n* `BrTable` similarly now takes a `Vec<MachLabel>`\r\n* `CondBr` still uses `BranchTarget`, but it can only do a label jump, or fallthrough. It can no longer do a fixed offset jump\r\n\r\nSince `BranchTarget` is now only used in `CondBr`, I've renamed it `CondBrTarget`.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6988/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6985", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6985/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6985/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6985/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6985", "id": 1888710145, "node_id": "PR_kwDOBhDaXM5Z7ope", "number": 6985, "title": "cranelift: Fix `v{all,any}_true` and `vhigh_bits` instructions in the interpreter", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-09T11:49:53Z", "updated_at": "2023-09-09T18:22:42Z", "closed_at": "2023-09-09T18:22:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6985", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6985", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6985.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6985.patch", "merged_at": "2023-09-09T18:22:42Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR fixes the `v{all,any}_true` and `vhigh_bits` instructions for floats in the cranelift interpreter. Since these are all bitwise operations, the fix was similar for all of them, convert the type to an equivalent sized integer type and proceed with the operation as normal.\r\n\r\nAdditionally this PR also restricts the return types for [`vhigh_bits`](https://docs.rs/cranelift-codegen/latest/cranelift_codegen/ir/trait.InstBuilder.html#method.vhigh_bits) down to scalar integers. It currently allows returning SIMD integer types which looks like an oversight since it clearly states that it returns a scalar integer in the docs. (Let me know if you'd like me to pull this into a separate PR)\r\n\r\nFinally, these instructions are also enabled in the fuzzgen fuzzer.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6985/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6984", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6984/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6984/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6984/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6984", "id": 1888708747, "node_id": "PR_kwDOBhDaXM5Z7oYo", "number": 6984, "title": "riscv64: Delete unused code", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-09T11:44:58Z", "updated_at": "2023-09-09T18:10:47Z", "closed_at": "2023-09-09T18:10:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6984", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6984", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6984.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6984.patch", "merged_at": "2023-09-09T18:10:47Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR deletes some unused instructions and functions that I've come across in the RISC-V backend.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6984/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6984/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6982", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6982/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6982/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6982/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6982", "id": 1888413493, "node_id": "PR_kwDOBhDaXM5Z6rf1", "number": 6982, "title": "winch: Support abs and neg for f32 and f64 on x64", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-08T22:09:33Z", "updated_at": "2023-09-10T22:53:49Z", "closed_at": "2023-09-10T22:53:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6982", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6982", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6982.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6982.patch", "merged_at": "2023-09-10T22:53:49Z"}, "body": "Adds support for `f32.abs`, `f64.abs`, `f32.neg`, and `f64.neg` to winch. Additionally, this adds a `gpr_to_xmm` function to the x64 backend to allow loading a constant and moving it to an xmm register. It also reserves `xmm15` as the scratch xmm register.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6982/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6982/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6981", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6981/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6981/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6981/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6981", "id": 1888109325, "node_id": "PR_kwDOBhDaXM5Z5oJP", "number": 6981, "title": "Add component call micro-benchmarks", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-08T18:01:36Z", "updated_at": "2023-09-14T15:43:22Z", "closed_at": "2023-09-09T18:08:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6981", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6981", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6981.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6981.patch", "merged_at": "2023-09-09T18:08:23Z"}, "body": "This commit adds the component equivalents of the existing core Wasm call micro-benchmarks. This also adds a sprinkling of `#[inline]` to some functions that I noticed when glancing at some profiles.\r\n\r\nThe two most important numbers:\r\n\r\n```\r\nsync/no-hook/component - host-to-wasm - typed - nop\r\n                        time:   [75.849 ns 76.476 ns 77.247 ns]\r\n\r\nsync/no-hook/component - wasm-to-host - typed - nop\r\n                        time:   [33.614 ns 33.872 ns 34.170 ns]\r\n```\r\n\r\nThe full benchmark results are in here:\r\n\r\n<details>\r\n\r\n```\r\n$ cargo bench --features component-model --bench call 'component'\r\n    Finished bench [optimized] target(s) in 0.19s\r\n     Running benches/call.rs (target/release/deps/call-4d8d1585dd2825a2)\r\nsync/no-hook/component - host-to-wasm - typed - nop\r\n                        time:   [75.849 ns 76.476 ns 77.247 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  1 (1.00%) high mild\r\n  4 (4.00%) high severe\r\nsync/no-hook/component - host-to-wasm - untyped - nop\r\n                        time:   [108.29 ns 109.66 ns 111.51 ns]\r\nFound 7 outliers among 100 measurements (7.00%)\r\n  2 (2.00%) high mild\r\n  5 (5.00%) high severe\r\nsync/no-hook/component - host-to-wasm - typed - nop-params-and-results\r\n                        time:   [79.968 ns 80.756 ns 81.728 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  5 (5.00%) high severe\r\nsync/no-hook/component - host-to-wasm - untyped - nop-params-and-results\r\n                        time:   [210.27 ns 211.72 ns 213.34 ns]\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  3 (3.00%) high mild\r\n  3 (3.00%) high severe\r\n\r\nsync/hook-sync/component - host-to-wasm - typed - nop\r\n                        time:   [76.840 ns 77.295 ns 77.770 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  2 (2.00%) high mild\r\n  1 (1.00%) high severe\r\nsync/hook-sync/component - host-to-wasm - untyped - nop\r\n                        time:   [109.63 ns 110.42 ns 111.26 ns]\r\nFound 1 outliers among 100 measurements (1.00%)\r\n  1 (1.00%) high severe\r\nsync/hook-sync/component - host-to-wasm - typed - nop-params-and-results\r\n                        time:   [81.324 ns 82.344 ns 83.663 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  2 (2.00%) high mild\r\n  3 (3.00%) high severe\r\nsync/hook-sync/component - host-to-wasm - untyped - nop-params-and-results\r\n                        time:   [211.84 ns 215.06 ns 219.22 ns]\r\nFound 8 outliers among 100 measurements (8.00%)\r\n  4 (4.00%) high mild\r\n  4 (4.00%) high severe\r\n\r\nasync/no-hook/component - host-to-wasm - typed - nop\r\n                        time:   [23.759 \u00b5s 23.969 \u00b5s 24.221 \u00b5s]\r\nFound 11 outliers among 100 measurements (11.00%)\r\n  1 (1.00%) high mild\r\n  10 (10.00%) high severe\r\nasync/no-hook/component - host-to-wasm - untyped - nop\r\n                        time:   [23.941 \u00b5s 24.093 \u00b5s 24.254 \u00b5s]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  2 (2.00%) high mild\r\n  1 (1.00%) high severe\r\nasync/no-hook/component - host-to-wasm - typed - nop-params-and-results\r\n                        time:   [24.286 \u00b5s 24.459 \u00b5s 24.629 \u00b5s]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  1 (1.00%) high mild\r\n  2 (2.00%) high severe\r\nasync/no-hook/component - host-to-wasm - untyped - nop-params-and-results\r\n                        time:   [24.258 \u00b5s 24.390 \u00b5s 24.528 \u00b5s]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  1 (1.00%) high mild\r\n  2 (2.00%) high severe\r\n\r\nasync/hook-sync/component - host-to-wasm - typed - nop\r\n                        time:   [24.055 \u00b5s 24.224 \u00b5s 24.408 \u00b5s]\r\nFound 1 outliers among 100 measurements (1.00%)\r\n  1 (1.00%) high severe\r\nasync/hook-sync/component - host-to-wasm - untyped - nop\r\n                        time:   [24.217 \u00b5s 24.364 \u00b5s 24.517 \u00b5s]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  3 (3.00%) high severe\r\nasync/hook-sync/component - host-to-wasm - typed - nop-params-and-results\r\n                        time:   [24.207 \u00b5s 24.331 \u00b5s 24.463 \u00b5s]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  1 (1.00%) high mild\r\n  2 (2.00%) high severe\r\nasync/hook-sync/component - host-to-wasm - untyped - nop-params-and-results\r\n                        time:   [24.607 \u00b5s 24.767 \u00b5s 24.936 \u00b5s]\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  4 (4.00%) high mild\r\n  2 (2.00%) high severe\r\n\r\nasync-pool/no-hook/component - host-to-wasm - typed - nop\r\n                        time:   [456.89 ns 459.65 ns 462.68 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  3 (3.00%) high mild\r\n  1 (1.00%) high severe\r\nasync-pool/no-hook/component - host-to-wasm - untyped - nop\r\n                        time:   [490.07 ns 492.87 ns 495.88 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  1 (1.00%) high mild\r\n  1 (1.00%) high severe\r\nasync-pool/no-hook/component - host-to-wasm - typed - nop-params-and-results\r\n                        time:   [471.68 ns 475.01 ns 478.59 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  1 (1.00%) high mild\r\n  2 (2.00%) high severe\r\nasync-pool/no-hook/component - host-to-wasm - untyped - nop-params-and-results\r\n                        time:   [597.02 ns 600.61 ns 604.53 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  2 (2.00%) high mild\r\n  3 (3.00%) high severe\r\n\r\nasync-pool/hook-sync/component - host-to-wasm - typed - nop\r\n                        time:   [458.06 ns 460.82 ns 463.77 ns]\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  6 (6.00%) high severe\r\nasync-pool/hook-sync/component - host-to-wasm - untyped - nop\r\n                        time:   [494.20 ns 497.65 ns 501.48 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  2 (2.00%) high severe\r\nasync-pool/hook-sync/component - host-to-wasm - typed - nop-params-and-results\r\n                        time:   [472.40 ns 476.08 ns 480.10 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  3 (3.00%) high severe\r\nasync-pool/hook-sync/component - host-to-wasm - untyped - nop-params-and-results\r\n                        time:   [598.55 ns 603.79 ns 610.18 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  2 (2.00%) high mild\r\n  1 (1.00%) high severe\r\n\r\nsync/no-hook/component - wasm-to-host - typed - nop\r\n                        time:   [33.614 ns 33.872 ns 34.170 ns]\r\nFound 9 outliers among 100 measurements (9.00%)\r\n  1 (1.00%) high mild\r\n  8 (8.00%) high severe\r\nsync/no-hook/component - wasm-to-host - typed - nop-params-and-results\r\n                        time:   [37.416 ns 37.700 ns 38.002 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  1 (1.00%) high mild\r\n  3 (3.00%) high severe\r\nsync/no-hook/component - wasm-to-host - untyped - nop\r\n                        time:   [58.126 ns 58.478 ns 58.846 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  1 (1.00%) high mild\r\n  1 (1.00%) high severe\r\nsync/no-hook/component - wasm-to-host - untyped - nop-params-and-results\r\n                        time:   [170.14 ns 171.33 ns 172.68 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  3 (3.00%) high mild\r\n  2 (2.00%) high severe\r\n\r\nsync/hook-sync/component - wasm-to-host - typed - nop\r\n                        time:   [33.336 ns 33.556 ns 33.796 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  1 (1.00%) high mild\r\n  2 (2.00%) high severe\r\nsync/hook-sync/component - wasm-to-host - typed - nop-params-and-results\r\n                        time:   [37.399 ns 37.654 ns 37.904 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  1 (1.00%) high mild\r\n  1 (1.00%) high severe\r\nsync/hook-sync/component - wasm-to-host - untyped - nop\r\n                        time:   [58.438 ns 58.924 ns 59.485 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  1 (1.00%) high mild\r\n  3 (3.00%) high severe\r\nsync/hook-sync/component - wasm-to-host - untyped - nop-params-and-results\r\n                        time:   [169.36 ns 170.44 ns 171.60 ns]\r\nFound 8 outliers among 100 measurements (8.00%)\r\n  4 (4.00%) high mild\r\n  4 (4.00%) high severe\r\n\r\nasync/no-hook/component - wasm-to-host - typed - nop\r\n                        time:   [33.882 ns 34.198 ns 34.573 ns]\r\nFound 11 outliers among 100 measurements (11.00%)\r\n  6 (6.00%) high mild\r\n  5 (5.00%) high severe\r\nasync/no-hook/component - wasm-to-host - typed - nop-params-and-results\r\n                        time:   [37.407 ns 37.820 ns 38.371 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  1 (1.00%) high mild\r\n  3 (3.00%) high severe\r\nasync/no-hook/component - wasm-to-host - untyped - nop\r\n                        time:   [58.400 ns 58.937 ns 59.537 ns]\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  4 (4.00%) high mild\r\n  2 (2.00%) high severe\r\nasync/no-hook/component - wasm-to-host - untyped - nop-params-and-results\r\n                        time:   [170.15 ns 171.72 ns 173.52 ns]\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  3 (3.00%) high mild\r\n  3 (3.00%) high severe\r\nasync/no-hook/component - wasm-to-host - async-typed - nop\r\n                        time:   [48.383 ns 48.801 ns 49.317 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  4 (4.00%) high mild\r\n  1 (1.00%) high severe\r\nasync/no-hook/component - wasm-to-host - async-typed - nop-params-and-results\r\n                        time:   [59.723 ns 60.158 ns 60.657 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  2 (2.00%) high mild\r\n  1 (1.00%) high severe\r\n\r\nasync/hook-sync/component - wasm-to-host - typed - nop\r\n                        time:   [33.537 ns 34.056 ns 34.742 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  1 (1.00%) high mild\r\n  3 (3.00%) high severe\r\nasync/hook-sync/component - wasm-to-host - typed - nop-params-and-results\r\n                        time:   [37.390 ns 37.888 ns 38.562 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  1 (1.00%) high mild\r\n  3 (3.00%) high severe\r\nasync/hook-sync/component - wasm-to-host - untyped - nop\r\n                        time:   [58.506 ns 58.906 ns 59.361 ns]\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  4 (4.00%) high mild\r\n  2 (2.00%) high severe\r\nasync/hook-sync/component - wasm-to-host - untyped - nop-params-and-results\r\n                        time:   [170.70 ns 172.62 ns 174.80 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  2 (2.00%) high mild\r\n  3 (3.00%) high severe\r\nasync/hook-sync/component - wasm-to-host - async-typed - nop\r\n                        time:   [48.308 ns 48.764 ns 49.267 ns]\r\nFound 6 outliers among 100 measurements (6.00%)\r\n  3 (3.00%) high mild\r\n  3 (3.00%) high severe\r\nasync/hook-sync/component - wasm-to-host - async-typed - nop-params-and-results\r\n                        time:   [57.503 ns 57.887 ns 58.307 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  3 (3.00%) high severe\r\n\r\nasync-pool/no-hook/component - wasm-to-host - typed - nop\r\n                        time:   [33.473 ns 33.792 ns 34.142 ns]\r\nFound 8 outliers among 100 measurements (8.00%)\r\n  4 (4.00%) high mild\r\n  4 (4.00%) high severe\r\nasync-pool/no-hook/component - wasm-to-host - typed - nop-params-and-results\r\n                        time:   [37.523 ns 38.040 ns 38.638 ns]\r\nFound 8 outliers among 100 measurements (8.00%)\r\n  4 (4.00%) high mild\r\n  4 (4.00%) high severe\r\nasync-pool/no-hook/component - wasm-to-host - untyped - nop\r\n                        time:   [57.989 ns 58.350 ns 58.737 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  2 (2.00%) high severe\r\nasync-pool/no-hook/component - wasm-to-host - untyped - nop-params-and-results\r\n                        time:   [169.55 ns 170.93 ns 172.48 ns]\r\nFound 7 outliers among 100 measurements (7.00%)\r\n  4 (4.00%) high mild\r\n  3 (3.00%) high severe\r\nasync-pool/no-hook/component - wasm-to-host - async-typed - nop\r\n                        time:   [48.323 ns 48.700 ns 49.144 ns]\r\nFound 5 outliers among 100 measurements (5.00%)\r\n  1 (1.00%) high mild\r\n  4 (4.00%) high severe\r\nasync-pool/no-hook/component - wasm-to-host - async-typed - nop-params-and-results\r\n                        time:   [57.521 ns 58.090 ns 58.739 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  3 (3.00%) high mild\r\n  1 (1.00%) high severe\r\n\r\nasync-pool/hook-sync/component - wasm-to-host - typed - nop\r\n                        time:   [33.379 ns 33.602 ns 33.838 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  1 (1.00%) high mild\r\n  1 (1.00%) high severe\r\nasync-pool/hook-sync/component - wasm-to-host - typed - nop-params-and-results\r\n                        time:   [37.361 ns 37.608 ns 37.857 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  1 (1.00%) high mild\r\n  1 (1.00%) high severe\r\nasync-pool/hook-sync/component - wasm-to-host - untyped - nop\r\n                        time:   [58.523 ns 58.848 ns 59.180 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  2 (2.00%) high severe\r\nasync-pool/hook-sync/component - wasm-to-host - untyped - nop-params-and-results\r\n                        time:   [170.59 ns 171.57 ns 172.63 ns]\r\nFound 2 outliers among 100 measurements (2.00%)\r\n  2 (2.00%) high severe\r\nasync-pool/hook-sync/component - wasm-to-host - async-typed - nop\r\n                        time:   [48.265 ns 48.520 ns 48.794 ns]\r\nFound 4 outliers among 100 measurements (4.00%)\r\n  4 (4.00%) high severe\r\nasync-pool/hook-sync/component - wasm-to-host - async-typed - nop-params-and-results\r\n                        time:   [57.619 ns 57.918 ns 58.234 ns]\r\nFound 3 outliers among 100 measurements (3.00%)\r\n  3 (3.00%) high severe\r\n```\r\n\r\n</details>\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6981/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6981/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6980", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6980/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6980/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6980/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6980", "id": 1888068630, "node_id": "PR_kwDOBhDaXM5Z5fVE", "number": 6980, "title": "doc: document `HostOutputStream`", "user": {"login": "rvolosatovs", "id": 12877905, "node_id": "MDQ6VXNlcjEyODc3OTA1", "avatar_url": "https://avatars.githubusercontent.com/u/12877905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rvolosatovs", "html_url": "https://github.com/rvolosatovs", "followers_url": "https://api.github.com/users/rvolosatovs/followers", "following_url": "https://api.github.com/users/rvolosatovs/following{/other_user}", "gists_url": "https://api.github.com/users/rvolosatovs/gists{/gist_id}", "starred_url": "https://api.github.com/users/rvolosatovs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rvolosatovs/subscriptions", "organizations_url": "https://api.github.com/users/rvolosatovs/orgs", "repos_url": "https://api.github.com/users/rvolosatovs/repos", "events_url": "https://api.github.com/users/rvolosatovs/events{/privacy}", "received_events_url": "https://api.github.com/users/rvolosatovs/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-08T17:28:53Z", "updated_at": "2023-09-08T21:33:28Z", "closed_at": "2023-09-08T21:33:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6980", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6980", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6980.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6980.patch", "merged_at": "2023-09-08T21:33:27Z"}, "body": "Document `HostOutputStream`", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6980/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6980/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6979", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6979/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6979/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6979/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6979", "id": 1886950676, "node_id": "PR_kwDOBhDaXM5Z1q8F", "number": 6979, "title": "Cranelift: Improve codegen of store_imm on x64", "user": {"login": "mchesser", "id": 4961637, "node_id": "MDQ6VXNlcjQ5NjE2Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4961637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mchesser", "html_url": "https://github.com/mchesser", "followers_url": "https://api.github.com/users/mchesser/followers", "following_url": "https://api.github.com/users/mchesser/following{/other_user}", "gists_url": "https://api.github.com/users/mchesser/gists{/gist_id}", "starred_url": "https://api.github.com/users/mchesser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mchesser/subscriptions", "organizations_url": "https://api.github.com/users/mchesser/orgs", "repos_url": "https://api.github.com/users/mchesser/repos", "events_url": "https://api.github.com/users/mchesser/events{/privacy}", "received_events_url": "https://api.github.com/users/mchesser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-08T05:19:10Z", "updated_at": "2023-09-11T14:42:17Z", "closed_at": "2023-09-11T14:42:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6979", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6979", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6979.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6979.patch", "merged_at": "2023-09-11T14:42:16Z"}, "body": "Improve code generation of store_imm on x64 by adding a new rule that directly handles stores of small immediates.\r\n\r\n\r\nCurrently storing to constant to memory is achieved by first copying the constant into a temporary register, then performing a store of the register value to memory. For example:\r\n\r\n```clif\r\n    v1 = load.i64 v0\r\n    v2 = iconst.i8 1\r\n    store v2, v1\r\n```\r\n\r\nIs currently compiled to:\r\n\r\n```asm\r\n    MOV RCX,qword ptr [RDI]\r\n    MOV EDX,0x1\r\n    MOV byte ptr [RCX],DL\r\n```\r\n\r\nOn x86 constants can be stored directly to memory, e.g., after this patch, the constant is inlined into the store instruction removing the extra temporary register.\r\n\r\n```asm\r\n    MOV RCX,qword ptr [RDI]\r\n    MOV byte ptr [RCX],0x1\r\n```\r\n\r\nThe overall performance impact is probably very minimal, but it could help with frontend/decoder pressure in cases where this pattern is common.\r\n\r\n(Draft PR since this was partially an exercise in understanding ISLE so I could be missing something here).\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6979/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6977", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6977/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6977/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6977/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6977", "id": 1886598064, "node_id": "PR_kwDOBhDaXM5Z0eto", "number": 6977, "title": "Fix cargo binary at configure time", "user": {"login": "rockwotj", "id": 8669100, "node_id": "MDQ6VXNlcjg2NjkxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8669100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockwotj", "html_url": "https://github.com/rockwotj", "followers_url": "https://api.github.com/users/rockwotj/followers", "following_url": "https://api.github.com/users/rockwotj/following{/other_user}", "gists_url": "https://api.github.com/users/rockwotj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockwotj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockwotj/subscriptions", "organizations_url": "https://api.github.com/users/rockwotj/orgs", "repos_url": "https://api.github.com/users/rockwotj/repos", "events_url": "https://api.github.com/users/rockwotj/events{/privacy}", "received_events_url": "https://api.github.com/users/rockwotj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-07T21:44:15Z", "updated_at": "2023-09-07T23:06:22Z", "closed_at": "2023-09-07T23:06:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6977", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6977", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6977.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6977.patch", "merged_at": "2023-09-07T23:06:21Z"}, "body": "This allows for running the generated make files directly if your\nconfirgure step wants to use a vendored cargo program.\n\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6977/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6976", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6976/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6976/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6976/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6976", "id": 1886228541, "node_id": "PR_kwDOBhDaXM5ZzOYG", "number": 6976, "title": "x64: Add support for some BMI2 instructions", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-07T16:35:28Z", "updated_at": "2023-09-12T15:52:43Z", "closed_at": "2023-09-12T15:52:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6976", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6976", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6976.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6976.patch", "merged_at": "2023-09-12T15:52:42Z"}, "body": "This PR adds support for some isntructions in the BMI2 instruction set, namely `sarx`, `shlx`, `shrx`, and `rorx`. The shifting instructions can't encode immediates but use a 3-operand form and place no constraints on the amount being shifted by (as opposed to `sar`-style instructions which require that in `%cl`). The `x`-suffixed instructions are prioritized for this reason when BMI2 is enabled so long as an immediate shift amount isn't used. These new instrutions additionally support loading the value-to-shift from memory, unlike the old instructions (they store the result to memory as opposed to the new instructions which store the result in a register), but this functionality is not exposed at this time.\r\n\r\nFor `rorx` the benefits are similar, but the amount being shifted by is required to be an immediate. This means that rotation instructions, either left or right, will unconditionally use `rorx` so long as the amount-to-rotate is an immediate. This theoretically reduces register allocator pressure since the destination register can be different from the source. \r\n\r\nI'll note that I don't personally have a compelling performance reason for adding these. I was poking around at instruction set extensions awhile back and never got around to making a PR for this until just now.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6976/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6975", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6975/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6975/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6975/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6975", "id": 1885872652, "node_id": "PR_kwDOBhDaXM5ZyBOH", "number": 6975, "title": "riscv64: Check that the minimum set of feature flags is enabled", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-07T13:12:50Z", "updated_at": "2023-09-07T16:53:34Z", "closed_at": "2023-09-07T16:53:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6975", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6975", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6975.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6975.patch", "merged_at": "2023-09-07T16:53:33Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR Is a follow up to #6955 where @alexcrichton suggested that we check that all the flags the backend currently expects.\r\n\r\nMost of the backend does not even check these flags, so to avoid emitting instructions where there is no support for them, we reject building the ISA when they aren't present.\r\n\r\nThis PR also renames the `INSTRUCTION_SIZE` constant to something more suitable, since we are going to have varying instruction lengths.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6975/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6974", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6974/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6974/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6974/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6974", "id": 1884899072, "node_id": "PR_kwDOBhDaXM5ZuuzR", "number": 6974, "title": "chore: backport 6878 to release-13.0.0", "user": {"login": "eduardomourar", "id": 16357187, "node_id": "MDQ6VXNlcjE2MzU3MTg3", "avatar_url": "https://avatars.githubusercontent.com/u/16357187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eduardomourar", "html_url": "https://github.com/eduardomourar", "followers_url": "https://api.github.com/users/eduardomourar/followers", "following_url": "https://api.github.com/users/eduardomourar/following{/other_user}", "gists_url": "https://api.github.com/users/eduardomourar/gists{/gist_id}", "starred_url": "https://api.github.com/users/eduardomourar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eduardomourar/subscriptions", "organizations_url": "https://api.github.com/users/eduardomourar/orgs", "repos_url": "https://api.github.com/users/eduardomourar/repos", "events_url": "https://api.github.com/users/eduardomourar/events{/privacy}", "received_events_url": "https://api.github.com/users/eduardomourar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-06T23:55:47Z", "updated_at": "2023-09-11T18:56:43Z", "closed_at": "2023-09-11T16:58:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6974", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6974", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6974.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6974.patch", "merged_at": "2023-09-11T16:58:45Z"}, "body": "Backporting #6878 to release v13.0.0 branch.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6974/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6974/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6973", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6973/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6973/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6973/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6973", "id": 1884801143, "node_id": "PR_kwDOBhDaXM5ZuZ52", "number": 6973, "title": "adapter: eliminate State::with_mut", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-06T21:45:21Z", "updated_at": "2023-09-07T00:17:17Z", "closed_at": "2023-09-07T00:17:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6973", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6973", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6973.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6973.patch", "merged_at": "2023-09-07T00:17:16Z"}, "body": "There is no need to get exclusive access to State:\r\n* All mutation of State and Descriptors is handled internally with cells. `descriptors_mut` does not need exclusive access to State, and eliminating that constraint means we can trivially shorten all uses of `with_mut` to `with`.\r\n* recursive access to State is required for implementing the cabi_realloc functions. These functions do not need exclusive access to State, but if another call has already taken an exclusive borrow, realloc will trap.\r\n\r\nThis changes fixes a bug that would occur if `path_open` is the first call into the adapter, the State will be borrowed exclusively and `descriptors_mut` will initialize the descriptors by calling out to get the preopens. Because preopens are a list, the runtime needs to call cabi_realloc to return them, and that call will fail where cabi_import_realloc tries to borrow the exclusively- borrowed State.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6973/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6972", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6972/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6972/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6972/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6972", "id": 1884603935, "node_id": "PR_kwDOBhDaXM5Ztu3J", "number": 6972, "title": "wasmtime: Enable Relaxed SIMD testsuite for RISC-V", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-06T19:15:12Z", "updated_at": "2023-09-07T13:25:47Z", "closed_at": "2023-09-06T20:30:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6972", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6972", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6972.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6972.patch", "merged_at": "2023-09-06T20:30:16Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR enables the Relaxed SIMD testsuite on the RISC-V backend. This has been implemented for a while, but was hitting the codegen issue in #6954. While this is enabled, I haven't checked if we have the optimal lowerings for each of the relaxed instructions.\r\n\r\nIt also adds a comment explaining why we have the `issue_3327_bnot_lowering` test disabled.\r\n\r\nCloses #6961", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6972/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6971", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6971/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6971/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6971/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6971", "id": 1884578473, "node_id": "PR_kwDOBhDaXM5ZtpUz", "number": 6971, "title": "Optimize `list<u8>` lifting and lowering", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-06T18:55:52Z", "updated_at": "2023-09-06T22:02:54Z", "closed_at": "2023-09-06T22:02:53Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6971", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6971", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6971.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6971.patch", "merged_at": "2023-09-06T22:02:53Z"}, "body": "This commit optimizes the lifting and lowering routines for `list<u8>` and other similar primitive integer types. The current lifting/lowering is intended to be general-purpose and correct but doesn't optimize well with LLVM for a number of reasons. I first attempted to reshape the general-purpose code to be easier for LLVM to optimize but in the end was unable to convince LLVM that various pointers here don't alias which meant that the general-purpose lowering/lifting never optimized well.\r\n\r\nInstead, however, I've added new trait methods which are implemented the same way as the general purpose methods beforehand. The integer/primitive implementations overwrite these implementations with more specialized versions given knowledge of primitives.\r\n\r\nOn a local benchmark this makes lifting/lowering disappear from a profile since memcpy is generally much faster than per-item processing.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6971/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6970", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6970/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6970/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6970/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6970", "id": 1884375417, "node_id": "PR_kwDOBhDaXM5Zs8ye", "number": 6970, "title": "Refactor prolog/epilog generation code", "user": {"login": "uweigand", "id": 4154057, "node_id": "MDQ6VXNlcjQxNTQwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4154057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uweigand", "html_url": "https://github.com/uweigand", "followers_url": "https://api.github.com/users/uweigand/followers", "following_url": "https://api.github.com/users/uweigand/following{/other_user}", "gists_url": "https://api.github.com/users/uweigand/gists{/gist_id}", "starred_url": "https://api.github.com/users/uweigand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uweigand/subscriptions", "organizations_url": "https://api.github.com/users/uweigand/orgs", "repos_url": "https://api.github.com/users/uweigand/repos", "events_url": "https://api.github.com/users/uweigand/events{/privacy}", "received_events_url": "https://api.github.com/users/uweigand/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-09-06T16:36:14Z", "updated_at": "2023-09-13T17:59:19Z", "closed_at": "2023-09-12T19:48:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6970", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6970", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6970.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6970.patch", "merged_at": "2023-09-12T19:48:49Z"}, "body": "This patch refactors all of the ISA/ABI specific prolog/epilog generation code around the following two ideas:\r\n\r\n1. Separate *planning* of the function's frame layout from the actual *implementation* within prolog / epilog code.\r\n\r\n2. No longer overload different purposes (middle-end register tracking, platform-specific details like authorization modes, and pop-stack-on-return) into a single return instruction.\r\n\r\nAs to 1., the new approach is based around a FrameLayout data structure, which collects all information needed to emit prolog and epilog code, specifically the list of clobbered registers, and the sizes of all areas of the function's stack frame.\r\n\r\nThis data structure is now computed *once*, before any code is emitted, and stored in the Callee data structure.  ABIs need to implement this via a new compute_frame_layout callback, which gets all data from common code needed to make all decisions around stack layout in one place.\r\n\r\nThe FrameLayout is then used going forward to answer all questions about frame sizes, and it is passed to all ABI routines involved in prolog / epilog code generation.  [ This removes a lot of duplicated calculation, e.g. the list of clobbered registers is now only computed once and re-used everywhere. ]\r\n\r\nThis in turn allows to reduce the number of distinct callbacks ABIs need to implement, and simplifies common code logic around how and when to call them.  In particular, we now only have the following four routines, which are always called in this order:\r\n\r\ngen_prologue_frame_setup\r\ngen_clobber_save\r\n\r\ngen_clobber_restore\r\ngen_epilogue_frame_restore\r\n\r\nThe main differences to before are:\r\n- frame_setup/restore are now called unconditionally (the target ABI can look in the FrameLayout to detect the case where no frame setup is required and skip whatever it thinks appropriate in that case)\r\n- there is no separate gen_prologue_start; if the target needs to do anything here, it can now just do it instead in gen_prologue_frame_setup\r\n- common code no longer attempts to emit a return instruction; instead the target can do whatever is necessary/optimal in gen_epilogue_frame_restore\r\n\r\n[ In principle we could also just have a single gen_prologue and gen_epilogue callback - I didn't implement this because then all the stack checking / probing logic would have to be moved to target code as well. ]\r\n\r\nAs to 2., currently targets are required to implement a single\r\n\"Ret\" return instruction.   This is initially used during\r\nregister allocation to hold a list of return preg/vreg pairs.\r\nDuring epilog emission, this is replaced by another copy of\r\nthe same \"Ret\" instruction that now carries various platform\r\nspecific data (e.g. authorization modes on aarch64), and is\r\nalso overloaded to handle the case where the ABI requires\r\nthat a number of bytes are popped during return.\r\n\r\nThis is a bit unfortunate in that it blows up the size of the instruction data, and also forces targets (that do not have a \"ret N\" instruction like Intel) into duplicated and possible sub-optimal implementations of stack adjustment during low-level emission of the return instruction.\r\n\r\nThe new approach separates these concerns.  Initially, common code emits a new \"Rets\" instruction that is completely parallel to the existing \"Args\", and is used only during register allocation holding the preg/vreg pairs.  That instruction -like now- is replaced during epilog emission - but unlike now the replacement is now completely up to the target, which can do whatever it needs in gen_epilogue_frame_restore.\r\n\r\nThis would typically emit some platform-specific low-level \"Ret\" instruction instead of the regalloc \"Rets\".  It also allows non-Intel targets to just create a normal (or even optimized) stack adjustment sequence before its low-level \"Ret\".\r\n\r\n[ In particular, on riscv64 pop-stack-before-return currently emits two distinct stack adjustment instructions immediately after one another.  These could now be easily merged, but that's not yet done in this patch.  ]\r\n\r\nNo functional change intended on any target.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6970/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6969", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6969/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6969/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6969/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6969", "id": 1884283995, "node_id": "PR_kwDOBhDaXM5Zso2D", "number": 6969, "title": "Finish release notes for 13.0.0", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-06T15:39:16Z", "updated_at": "2023-09-11T17:27:57Z", "closed_at": "2023-09-11T17:27:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6969", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6969", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6969.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6969.patch", "merged_at": "2023-09-11T17:27:56Z"}, "body": "Filling out everything that happened since #6929\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6969/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6968", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6968/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6968/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6968/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6968", "id": 1884228224, "node_id": "PR_kwDOBhDaXM5ZscuA", "number": 6968, "title": "Remove recursion from AMode lowering rules", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-06T15:08:58Z", "updated_at": "2023-09-11T16:40:30Z", "closed_at": "2023-09-11T16:40:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6968", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6968", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6968.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6968.patch", "merged_at": "2023-09-11T16:40:29Z"}, "body": "This commit removes recursion from AMode lowering rules for both the x64 and aarch64 backends. On the x64 backend this can lead to stack overflow on the host given wasm inputs during compilation due to the fact that `i32.add` goes through this path of lowering (e.g. trying to use the `lea` instruction). The recursion in these rules are rewritten to hunt for constants differently in a non-recursive fashion which relies on egraph optimizations to place constants in the right place to get good code output.\r\n\r\nThis PR additionally updates the AArch64 backend to remove the recursion there as well. While not reachable from wasm this is still reachable from Cranelift and is a good bug to fix regardless.\r\n\r\nNote that the stack overflow during compilation requires optimizations to be disabled, as otherwise egraphs will already fold constants together which means that recursion won't happen deeply.\r\n\r\nThanks to DFINITY for notifying the security@bytecodealliance.org mailing list for this issue! We concluded this in the end wasn't a CVE-worthy issue because it requires non-default settings to trigger (e.g. disabling optimizations). This is something I'll backport to the 13 release branch, however.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6968/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6967", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6967/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6967/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6967/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6967", "id": 1882792703, "node_id": "PR_kwDOBhDaXM5Zni4A", "number": 6967, "title": "cranelift: Fix fuzzgen `iconst` encoding", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-05T22:12:07Z", "updated_at": "2023-09-05T23:24:03Z", "closed_at": "2023-09-05T23:24:03Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6967", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6967", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6967.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6967.patch", "merged_at": "2023-09-05T23:24:03Z"}, "body": "#### If this work has been discussed elsewhere:\r\n\r\n#6965\r\n\r\n#### Explain why this change is needed:\r\n\r\nSince #6850, the immediate of `iconst.i32 -2` is encoded in `UnaryImm::imm` as `0xffff_fffe`, and not `-2`, despite being stored in a signed 64-bit integer. The fuzzing generator for `iconst` has not been modified accordingly and is still encoding the previous example as `-2`. This PR fixes that.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6967/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6964", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6964/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6964/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6964/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6964", "id": 1880976404, "node_id": "PR_kwDOBhDaXM5ZhaUT", "number": 6964, "title": "Bump Wasmtime to 14.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-05T00:02:36Z", "updated_at": "2023-09-05T14:39:10Z", "closed_at": "2023-09-05T14:39:08Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6964", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6964", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6964.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6964.patch", "merged_at": "2023-09-05T14:39:08Z"}, "body": "This is an [automated pull request][process] from CI which indicates\nthat the next [`release-13.0.0` branch][branch] has been created and\nthe `main` branch is getting its version number bumped from 13.0.0 to\n14.0.0.\n\nMaintainers should take a moment to review the [release\nnotes][RELEASES.md] for 13.0.0, and if any changes are necessary send\nPRs to the `main` branch to update [RELEASES.md] and then backport\nthese PRs to the [release branch][branch].\n\nMaintainers should also review that aarch64-apple-darwin builds\nare passing via [embark's CI](https://buildkite.com/embark-studios/wasmtime-aarch64-apple-darwin).\n\nAnother automated PR will be made in roughly 2 weeks time when for\nthe actual release itself.\n\nIf any issues arise on the `main` branch before the release is made\nthen the issue should first be fixed on `main` and then backported\nto the `release-13.0.0` branch.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[branch]: https://github.com/bytecodealliance/wasmtime/tree/release-13.0.0\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6964/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6963", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6963/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6963/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6963/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6963", "id": 1880949484, "node_id": "PR_kwDOBhDaXM5ZhUil", "number": 6963, "title": "Add a note about `_NO_DEBUG_HEAP` to the WASM debugging document", "user": {"login": "SingleAccretion", "id": 62474226, "node_id": "MDQ6VXNlcjYyNDc0MjI2", "avatar_url": "https://avatars.githubusercontent.com/u/62474226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SingleAccretion", "html_url": "https://github.com/SingleAccretion", "followers_url": "https://api.github.com/users/SingleAccretion/followers", "following_url": "https://api.github.com/users/SingleAccretion/following{/other_user}", "gists_url": "https://api.github.com/users/SingleAccretion/gists{/gist_id}", "starred_url": "https://api.github.com/users/SingleAccretion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SingleAccretion/subscriptions", "organizations_url": "https://api.github.com/users/SingleAccretion/orgs", "repos_url": "https://api.github.com/users/SingleAccretion/repos", "events_url": "https://api.github.com/users/SingleAccretion/events{/privacy}", "received_events_url": "https://api.github.com/users/SingleAccretion/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-04T23:14:27Z", "updated_at": "2024-10-31T18:53:17Z", "closed_at": "2023-09-05T14:49:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6963", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6963", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6963.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6963.patch", "merged_at": "2023-09-05T14:49:43Z"}, "body": "This is a little speculative, as `_NO_DEBUG_HEAP` is not WASM-related at all, and this document should not become a kitchen sink of \"native debugging tips\", still, the truly massive slowdown (~_65x_ for my machine and sample module, 10 seconds -> 11 minutes) is experience-breaking for Windows wasmtime+LLDB users, so I would expect it to be worth adding nevertheless.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6963/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6960", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6960/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6960/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6960/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6960", "id": 1880481836, "node_id": "PR_kwDOBhDaXM5Zfuju", "number": 6960, "title": "Support referencing stack slots in the DWARF debug info", "user": {"login": "SingleAccretion", "id": 62474226, "node_id": "MDQ6VXNlcjYyNDc0MjI2", "avatar_url": "https://avatars.githubusercontent.com/u/62474226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SingleAccretion", "html_url": "https://github.com/SingleAccretion", "followers_url": "https://api.github.com/users/SingleAccretion/followers", "following_url": "https://api.github.com/users/SingleAccretion/following{/other_user}", "gists_url": "https://api.github.com/users/SingleAccretion/gists{/gist_id}", "starred_url": "https://api.github.com/users/SingleAccretion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SingleAccretion/subscriptions", "organizations_url": "https://api.github.com/users/SingleAccretion/orgs", "repos_url": "https://api.github.com/users/SingleAccretion/repos", "events_url": "https://api.github.com/users/SingleAccretion/events{/privacy}", "received_events_url": "https://api.github.com/users/SingleAccretion/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-04T15:10:04Z", "updated_at": "2024-10-15T21:42:18Z", "closed_at": "2023-09-05T21:58:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6960", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6960", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6960.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6960.patch", "merged_at": "2023-09-05T21:58:56Z"}, "body": "Implements the plan essentially outlined in https://github.com/bytecodealliance/wasmtime/issues/2856#issuecomment-1192419659:\r\n\r\n1) Emit or use SysV-style unwind info if debug info is requested.\r\n2) Reference that unwind info in the form of `.debug_frame` using `DW_OP_call_frame_cfa`.\r\n3) Plumb the right offsets through.\r\n\r\nFixes #3884 (at least to some degree - however, that issue does not contain anything actionable), and also the example I was looking at in C#, though only for `-opt-level 0` codegen.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6960/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6959", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6959/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6959/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6959/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6959", "id": 1879056029, "node_id": "PR_kwDOBhDaXM5Za91f", "number": 6959, "title": "riscv64: Use canonical move instruction", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-03T11:17:38Z", "updated_at": "2023-09-05T22:24:19Z", "closed_at": "2023-09-05T22:24:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6959", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6959", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6959.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6959.patch", "merged_at": "2023-09-05T22:24:18Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThe canonical move instruction on RISC-V is `addi rd, rs, 0`, however we currently emit `ori ...` which while it achieves the same thing is technically not optimal as some processors may miss the renaming opportunity. It also disassembles better.\r\n\r\nThis seems to be a leftover of the AArch64 port that does use `or` as it's move instruction.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6959/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6957", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6957/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6957/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6957/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6957", "id": 1878708792, "node_id": "PR_kwDOBhDaXM5ZZ8ni", "number": 6957, "title": "Make MachineEnv a per-ABI property", "user": {"login": "uweigand", "id": 4154057, "node_id": "MDQ6VXNlcjQxNTQwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4154057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uweigand", "html_url": "https://github.com/uweigand", "followers_url": "https://api.github.com/users/uweigand/followers", "following_url": "https://api.github.com/users/uweigand/following{/other_user}", "gists_url": "https://api.github.com/users/uweigand/gists{/gist_id}", "starred_url": "https://api.github.com/users/uweigand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uweigand/subscriptions", "organizations_url": "https://api.github.com/users/uweigand/orgs", "repos_url": "https://api.github.com/users/uweigand/repos", "events_url": "https://api.github.com/users/uweigand/events{/privacy}", "received_events_url": "https://api.github.com/users/uweigand/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-02T14:20:17Z", "updated_at": "2023-09-12T21:25:04Z", "closed_at": "2023-09-12T19:57:18Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6957", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6957", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6957.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6957.patch", "merged_at": "2023-09-12T19:57:18Z"}, "body": "The MachineEnv structure contains the allocatable and preferred register sets.  This is currently fixed per TargetIsa - however, conceptually these register sets can differ between ABIs on the same ISA.\r\n\r\nTo allow for this, replace the TargetIsa machine_env routine with an ABIMachineSpec get_machine_env routine.  To ensure the structure is still only allocated once, cache it via static OnceLock variables.\r\n\r\nNo functional change intended.\r\n\r\nFYI @cfallin - this is what I suggested in last week's meeting.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6957/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6956", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6956/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6956/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6956/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6956", "id": 1878706861, "node_id": "PR_kwDOBhDaXM5ZZ8QQ", "number": 6956, "title": "riscv64: Reorder register allocation preference for C Extension", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-02T14:14:40Z", "updated_at": "2023-09-06T22:56:13Z", "closed_at": "2023-09-06T22:56:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6956", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6956", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6956.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6956.patch", "merged_at": "2023-09-06T22:56:11Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis is a preparation commit for the introduction of compressed instructions in the RISC-V backend.\r\n\r\nSome compressed instruction formats can only represent a limited range of registers (x8 to x15). Outside of those ranges we have to fallback to the non compressed version of the instruction.\r\n\r\nThus, this commit reorders the register allocation preference to try an use those registers as much as possible. In order to maximize the opportunities to emit compressed instructions.\r\n\r\nThe preference list is now roughly as follows:\r\n\r\n1. Compressible Caller Saved registers.\r\n2. Non-Compressible Caller Saved registers.\r\n3. Compressible Callee Saved registers.\r\n4. Non-Compressible Callee Saved registers.\r\n\r\nOnly Compressible Caller Saved registers (1) are marked as preferred registers in regalloc, the rest are marked as non preferred but listed in order (2, 3, 4)  (not entirely sure if that helps or not).\r\n\r\nThis applies for both Integer and Floating point registers. Vector registers currently are all caller saved, so it doesn't make much of a difference.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6956/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6955", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6955/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6955/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6955/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6955", "id": 1878649742, "node_id": "PR_kwDOBhDaXM5ZZxKM", "number": 6955, "title": "riscv64: Use labels for branches whenever possible", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-02T11:38:59Z", "updated_at": "2023-09-06T20:03:09Z", "closed_at": "2023-09-06T20:03:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6955", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6955", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6955.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6955.patch", "merged_at": "2023-09-06T20:03:08Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR is a preparation for enabling the C (Compressed instructions) extension on the RISC-V backend. This extension means that we can emit a bunch of instructions as compressed instructions (2 bytes instead of 4) and essentially makes this a variable(-ish) length ISA.\r\n\r\nThe first step is to try to remove as many fixed offset jumps as possible and replace them with label based counterparts that should take into account if an instruction has been emitted as compressed or not. \r\n\r\nAdditionally and somewhat unrelated this PR also enables by default the minimum set of flags with what we expect in the backend. We currently target RISC-V GC which is the general set of extensions for application processors. This is also aligned with the rust toolchain target for Cranelift/Wasmtime which is `riscv64gc-...`.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6955/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6954", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6954/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6954/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6954/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6954", "id": 1878535287, "node_id": "PR_kwDOBhDaXM5ZZYsK", "number": 6954, "title": "riscv64: Forbid mask/dst overlaps for masked instructions", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-02T09:40:06Z", "updated_at": "2023-09-07T13:25:46Z", "closed_at": "2023-09-06T15:34:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6954", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6954", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6954.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6954.patch", "merged_at": "2023-09-06T15:34:01Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis is the first fuzz bug for RISC-V from fuzzgen! It took 80 core-hours to find on QEMU.\r\n\r\nThe example code below produces the following instruction somewhere in the middle:\r\n```\r\nvmerge.vvm v0, v31, v3, v0.t #avl=2, #vtype=(e64, m1, ta, ma)\r\n```\r\n\r\nThis is a masked operation that writes the results to the mask register. Apparently this is illegal in pretty much all opcodes except for a handful (see [\u00a7 5.3 Vector Masking](https://github.com/riscv/riscv-v-spec/blob/master/v-spec.adoc#53-vector-masking)).\r\n\r\nWe already have a mechanism to deal with instructions that can't write to one of their source operands, so the fix here is to also apply that to these masked instructions. I tried to look for a way to encode these constraints separately but gave up and decided that it isn't that big a deal to forbid all overlaps, even if we could just forbid the mask/dst overlap.\r\n\r\nI've added a trait to organize overlapping information for opcodes, it Isn't strictly necessary but it gives me a nice centralized location to describe all the overlapping constraints (and how to merge them!).", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6954/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6953", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6953/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6953/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6953/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6953", "id": 1878077596, "node_id": "PR_kwDOBhDaXM5ZX8Iz", "number": 6953, "title": "tcp tests: need a blocking_read to get messages", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-01T21:45:58Z", "updated_at": "2023-09-01T22:52:23Z", "closed_at": "2023-09-01T22:52:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6953", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6953", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6953.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6953.patch", "merged_at": "2023-09-01T22:52:21Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6953/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6953/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6952", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6952/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6952/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6952/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6952", "id": 1877621792, "node_id": "PR_kwDOBhDaXM5ZWZKx", "number": 6952, "title": "[s390x] Improve handling of negative i32 constants", "user": {"login": "uweigand", "id": 4154057, "node_id": "MDQ6VXNlcjQxNTQwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4154057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uweigand", "html_url": "https://github.com/uweigand", "followers_url": "https://api.github.com/users/uweigand/followers", "following_url": "https://api.github.com/users/uweigand/following{/other_user}", "gists_url": "https://api.github.com/users/uweigand/gists{/gist_id}", "starred_url": "https://api.github.com/users/uweigand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uweigand/subscriptions", "organizations_url": "https://api.github.com/users/uweigand/orgs", "repos_url": "https://api.github.com/users/uweigand/repos", "events_url": "https://api.github.com/users/uweigand/events{/privacy}", "received_events_url": "https://api.github.com/users/uweigand/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-01T15:24:00Z", "updated_at": "2023-09-02T00:00:21Z", "closed_at": "2023-09-02T00:00:21Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6952", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6952", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6952.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6952.patch", "merged_at": "2023-09-02T00:00:21Z"}, "body": "After https://github.com/bytecodealliance/wasmtime/pull/6850 was merged, the s390x back-end now always uses iilf instead of lhi to load negative constants, which is a small code size regression.\r\n\r\nFix the isle predicate to get back lhi whenever possible.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6952/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6952/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6951", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6951/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6951/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6951/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6951", "id": 1877611078, "node_id": "PR_kwDOBhDaXM5ZWW18", "number": 6951, "title": "winch: Add support for `br_table`", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-09-01T15:16:18Z", "updated_at": "2023-09-02T12:31:46Z", "closed_at": "2023-09-02T00:00:21Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6951", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6951", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6951.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6951.patch", "merged_at": "2023-09-02T00:00:20Z"}, "body": "Part of https://github.com/bytecodealliance/wasmtime/issues/6528\r\n\r\nThis change adds support for the `br_table` instruction, including several modifications to the existing control flow implementation:\r\n\r\n* Improved handling of jumps to loops: Previously, the compiler erroneously treated the result of loop blocks as the definitive result of the jump. This change fixes this bug.\r\n\r\n* Streamlined result handling and stack pointer balancing: In the past, these operations were executed in two distinct steps, complicating the process of ensuring the correct invariants when emitting unconditional jumps. To simplify this, `CodeGenContext::unconditional_jump` is introduced . This function guarantees all necessary invariants are met, encapsulating the entire operation within a single function for easier understanding and maintenance.\r\n\r\n* Handling of unreachable state at the end of a function: when reaching the end of a function in an unreachable state, clear the stack and ensure that the machine stack pointer is correctly placed according to the expectations of the outermost block.\r\n\r\nIn addition to the above refactoring, the main implementation of the `br_table` instruction involves emitting labels for each target. Within each label, an unconditional jump is emitted to the frame's label, ensuring correct stack pointer balancing  when the jump is emitted.\r\n\r\nWhile it is possible to optimize this process by avoiding intermediate labels when balancing isn't required, I've opted to maintain the current implementation until such optimization becomes necessary.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6951/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6950", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6950/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6950/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6950/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6950", "id": 1877575193, "node_id": "PR_kwDOBhDaXM5ZWPBj", "number": 6950, "title": "[pch/backpressure_2] Merge changes from `main` and resolve conflicts", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-01T14:52:52Z", "updated_at": "2023-09-07T16:08:09Z", "closed_at": "2023-09-01T15:56:33Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6950", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6950", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6950.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6950.patch", "merged_at": "2023-09-01T15:56:33Z"}, "body": "Handle conflicts generated by https://github.com/bytecodealliance/wasmtime/pull/6948", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6950/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6950/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6949", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6949/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6949/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6949/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6949", "id": 1877419584, "node_id": "PR_kwDOBhDaXM5ZVs9X", "number": 6949, "title": "fuzzgen: Enable SIMD fuzzing for RISC-V", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-01T13:22:05Z", "updated_at": "2023-09-02T03:43:00Z", "closed_at": "2023-09-02T03:42:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6949", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6949", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6949.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6949.patch", "merged_at": "2023-09-02T03:42:59Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR enables fuzzing SIMD instructions for the RISC-V backend. This is the only backend that requires a extension (`has_v`) for SIMD to work, so we need to check that it has been enabled before allowing SIMD types and instructions.\r\n\r\nI've ran this for a while with `icache` and It's no longer crashing. But I haven't been able to run `fuzzgen` very well since I don't have a machine with the V extension, and running it with QEMU is quite slow.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6949/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6949/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6948", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6948/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6948/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6948/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6948", "id": 1876520599, "node_id": "PR_kwDOBhDaXM5ZSp8t", "number": 6948, "title": "Some minor fixes and features for WASI and sockets", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-01T01:06:18Z", "updated_at": "2023-09-07T16:08:04Z", "closed_at": "2023-09-01T03:55:22Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6948", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6948", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6948.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6948.patch", "merged_at": "2023-09-01T03:55:22Z"}, "body": "* Use `command::add_to_linker` in tests to reduce the number of times all the `add_to_linker` are listed.\r\n* Add all `wasi:sockets` interfaces currently implemented to both the sync and async `command` functions (this enables all the interfaces in the CLI for example).\r\n* Use `tokio::net::TcpStream::try_io` whenever I/O is performed on a socket, ensuring that readable/writable flags are set/cleared appropriately (otherwise once readable a socket is infinitely readable).\r\n* Add a `with_ambient_tokio_runtime` helper function to use when creating a `tokio::net::TcpStream` since otherwise it panics due to a lack of active runtime in a synchronous context.\r\n* Add `WouldBlock` handling to return a 0-length read.\r\n* Add an `--inherit-network` CLI flag to enable basic usage of sockets in the CLI.\r\n\r\nThis will conflict a small amount with #6877 but should be easy to resolve, and otherwise this targets different usability points/issues than that PR.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6948/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6947", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6947/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6947/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6947/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6947", "id": 1876484413, "node_id": "PR_kwDOBhDaXM5ZShv9", "number": 6947, "title": "Update in-tree wit-bindgen to 0.11.0", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-01T00:39:10Z", "updated_at": "2023-09-06T16:02:34Z", "closed_at": "2023-09-06T16:02:33Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6947", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6947", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6947.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6947.patch", "merged_at": "2023-09-06T16:02:33Z"}, "body": "This only affects tests and the adapter itself, but not in any breaking way. The tests for wasi-http are reorganized to be commands which is also required to not have any exports currently since wit-bindgen for Rust guests doesn't support generating bindings in one crate and exporting in another.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6947/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6947/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6946", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6946/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6946/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6946/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6946", "id": 1876219620, "node_id": "PR_kwDOBhDaXM5ZRo_i", "number": 6946, "title": "Require Wasmtime options come before wasm modules", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-31T20:01:48Z", "updated_at": "2023-09-13T19:32:22Z", "closed_at": "2023-09-13T19:32:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6946", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6946", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6946.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6946.patch", "merged_at": "2023-09-13T19:32:20Z"}, "body": "This commit implements a new behavior for the CLI of the `wasmtime` executable which will require that options for Wasmtime itself come before the wasm module being run. Currently they're allowed to come afterwards, but instead all arguments and flags coming after a module will be interpreted as arguments for the module itself.\r\n\r\nThis feature has a bit of a storied history at this point, and the breadcrumbs are:\r\n\r\n* Originally landed in #6737\r\n* Reverted for 12.0.0 in #6830\r\n* Reverted for 13.0.0 in #6944\r\n\r\nThis PR is intended to be landed as a sibling of #6925, another independent overhaul of Wasmtime's own options on the CLI, for the Wasmtime 14.0.0 release. More information about the motivation for this change, as well as consequences of the fallout, can be found on #6737.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6946/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6945", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6945/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6945/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6945/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6945", "id": 1876183293, "node_id": "PR_kwDOBhDaXM5ZRhCO", "number": 6945, "title": "aarch64: Use `RegScaled*` addressing modes", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-31T19:34:27Z", "updated_at": "2023-08-31T21:04:44Z", "closed_at": "2023-08-31T21:04:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6945", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6945", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6945.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6945.patch", "merged_at": "2023-08-31T21:04:43Z"}, "body": "This commit adds a few cases to `amode` construction on AArch64 for using the `RegScaled*` variants of `AMode`. This won't affect wasm due to this only matching the sign-extension happening before the shift, but it should otherwise help non-wasm Cranelift use cases.\r\n\r\nCloses #6742\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6945/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6945/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6944", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6944/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6944/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6944/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6944", "id": 1875980869, "node_id": "PR_kwDOBhDaXM5ZQ0Jz", "number": 6944, "title": "Partially revert CLI argument changes from #6737", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-31T17:40:02Z", "updated_at": "2023-08-31T18:58:13Z", "closed_at": "2023-08-31T18:58:12Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6944", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6944", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6944.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6944.patch", "merged_at": "2023-08-31T18:58:11Z"}, "body": "This commit is a partial revert of #6737. That change was reverted in #6830 for the 12.0.0 release of Wasmtime and otherwise it's currently slated to get released with the 13.0.0 release of Wasmtime. Discussion at today's Wasmtime meeting concluded that it's best to couple this change with #6925 as a single release rather than spread out across multiple releases. This commit is thus the revert of #6737, although it's a partial revert in that I've kept many of the new tests added to showcase the differences before/after when the change lands.\r\n\r\nThis means that Wasmtime 13.0.0 will exhibit the same CLI behavior as 12.0.0 and all prior releases. The 14.0.0 release will have both a new CLI and new argument passing semantics. I'll revert this revert (aka re-land #6737) once the 13.0.0 release branch is created and `main` becomes 14.0.0.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6944/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6943", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6943/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6943/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6943/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6943", "id": 1875726865, "node_id": "PR_kwDOBhDaXM5ZP8QK", "number": 6943, "title": "Fix some more fuzz-test cases from pooling changes ", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-31T15:07:44Z", "updated_at": "2023-08-31T17:02:40Z", "closed_at": "2023-08-31T16:34:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6943", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6943", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6943.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6943.patch", "merged_at": "2023-08-31T16:34:16Z"}, "body": "This commit addresses some more fallout from https://github.com/bytecodealliance/wasmtime/pull/6835 by updating some\r\nerror messages and adding clauses for new conditions. Namely:\r\n\r\n* Module compilation is now allowed to fail when the module may have\r\n  more memories/tables than the pooling allocator allows per-module.\r\n* The error message for the core instance limit being reached has been\r\n  updated.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6943/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6942", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6942/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6942/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6942/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6942", "id": 1875656522, "node_id": "PR_kwDOBhDaXM5ZPs4w", "number": 6942, "title": "Enhance `async` configuration of `bindgen!` macro", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-31T14:30:04Z", "updated_at": "2023-08-31T17:44:25Z", "closed_at": "2023-08-31T17:44:24Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6942", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6942", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6942.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6942.patch", "merged_at": "2023-08-31T17:44:24Z"}, "body": "\r\n\r\nThis commit takes a leaf out of `wiggle`'s book to enable bindings\r\ngeneration for async host functions where only some host functions are\r\nasync instead of all of them. This enhances the `async` key with a few\r\nmore options:\r\n\r\n    async: {\r\n        except_imports: [\"foo\"],\r\n        only_imports: [\"bar\"],\r\n    }\r\n\r\nThis is beyond what `wiggle` supports where either an allow-list or\r\ndeny-list can be specified (although only one can be specified). This\r\ncan be useful if either the list of sync imports or the list of async\r\nimports is small.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6942/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6941", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6941/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6941/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6941/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6941", "id": 1875603033, "node_id": "PR_kwDOBhDaXM5ZPhRd", "number": 6941, "title": "Document the `ownership` key of the `bindgen!` macro", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-31T14:00:27Z", "updated_at": "2023-08-31T17:02:43Z", "closed_at": "2023-08-31T16:34:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6941", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6941", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6941.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6941.patch", "merged_at": "2023-08-31T16:34:16Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6941/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6941/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6939", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6939/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6939/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6939/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6939", "id": 1875339870, "node_id": "PR_kwDOBhDaXM5ZOnuO", "number": 6939, "title": "cranelift-interpreter: Fix SIMD shifts and rotates", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-31T11:28:45Z", "updated_at": "2023-08-31T17:56:34Z", "closed_at": "2023-08-31T17:56:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6939", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6939", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6939.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6939.patch", "merged_at": "2023-08-31T17:56:33Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR fixes the `ishl`/`{s,u}shr`/`rot{r,l}` instructions for SIMD in the interpreter. The main issue is that while the LHS is a vector the RHS is a scalar and by default we perform the operations lanewise. The solution is to splat the RHS into a similar sized vector and perform the normal operation individually.\r\n\r\nThis PR also enables these operations in fuzzgen. As well as `ineg` (fixed in #6844) and `bitselect` with floats (which was working previously)", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6939/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6938", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6938/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6938/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6938/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6938", "id": 1875178969, "node_id": "PR_kwDOBhDaXM5ZOEed", "number": 6938, "title": "riscv64: Use `PCRelLo12I` relocation on Loads", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-31T09:50:54Z", "updated_at": "2023-08-31T19:04:00Z", "closed_at": "2023-08-31T19:03:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6938", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6938", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6938.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6938.patch", "merged_at": "2023-08-31T19:03:59Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis is a small follow up to #6933 that restores our ability to use a relocation for loads that point to a label / constant pool label.\r\n\r\nIt looks like the relocation that I needed to use was already implemented so this ended up being a lot easier than I expected.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6938/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6937", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6937/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6937/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6937/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6937", "id": 1874200330, "node_id": "PR_kwDOBhDaXM5ZKwuN", "number": 6937, "title": "Add `Engine::detect_precompiled_file()`", "user": {"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-30T18:48:41Z", "updated_at": "2023-09-26T02:33:56Z", "closed_at": "2023-08-30T23:35:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6937", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6937", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6937.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6937.patch", "merged_at": "2023-08-30T23:35:55Z"}, "body": "This is handy for users of `deserialize_file()` to determine which version to call.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6937/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6934", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6934/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6934/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6934/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6934", "id": 1873820131, "node_id": "PR_kwDOBhDaXM5ZJelp", "number": 6934, "title": "Expose `target` and Cranelift settings in C API", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-30T14:37:15Z", "updated_at": "2023-08-30T16:16:56Z", "closed_at": "2023-08-30T16:16:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6934", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6934", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6934.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6934.patch", "merged_at": "2023-08-30T16:16:55Z"}, "body": "This commit comes from discussion on #6932 and adds target settings to the C API to configure compilation artifacts.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6934/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6934/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6933", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6933/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6933/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6933/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6933", "id": 1873710244, "node_id": "PR_kwDOBhDaXM5ZJGbZ", "number": 6933, "title": "riscv64: Load constants from the constant pool", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-30T13:41:50Z", "updated_at": "2023-08-30T16:16:56Z", "closed_at": "2023-08-30T16:16:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6933", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6933", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6933.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6933.patch", "merged_at": "2023-08-30T16:16:55Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis is a follow up to #6915 (and #5578 I guess). This PR enables loading ISLE constants from the constant pool. \r\n\r\nNot all constants are loaded from the constant pool. Constants that are observed at emit time are still loaded inline since I couldn't find a way of registering them with the MachBuffer for loading.\r\n\r\nThis also causes a slight pessimization of the dynamic instruction count since we currently force the address to be fully loaded into a register before a load when resolving labels. This is easily fixable, but I'm going to do it in a follow-up PR.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6933/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6931", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6931/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6931/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6931/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6931", "id": 1873521054, "node_id": "PR_kwDOBhDaXM5ZIdC7", "number": 6931, "title": "Two fixes for the `-g` (debug info) option", "user": {"login": "SingleAccretion", "id": 62474226, "node_id": "MDQ6VXNlcjYyNDc0MjI2", "avatar_url": "https://avatars.githubusercontent.com/u/62474226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SingleAccretion", "html_url": "https://github.com/SingleAccretion", "followers_url": "https://api.github.com/users/SingleAccretion/followers", "following_url": "https://api.github.com/users/SingleAccretion/following{/other_user}", "gists_url": "https://api.github.com/users/SingleAccretion/gists{/gist_id}", "starred_url": "https://api.github.com/users/SingleAccretion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SingleAccretion/subscriptions", "organizations_url": "https://api.github.com/users/SingleAccretion/orgs", "repos_url": "https://api.github.com/users/SingleAccretion/repos", "events_url": "https://api.github.com/users/SingleAccretion/events{/privacy}", "received_events_url": "https://api.github.com/users/SingleAccretion/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-30T11:54:13Z", "updated_at": "2024-10-15T21:42:13Z", "closed_at": "2023-09-01T17:42:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6931", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6931", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6931.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6931.patch", "merged_at": "2023-09-01T17:42:27Z"}, "body": "Two changes:\r\n1) Fix a small bug where a constant DWARF \"block\" wasn't handled in transformation.\r\n2) Fix up instruction offsets after code emission to account for branch removal.\r\n\r\nSee also the commit messages for a bit more detail.\r\n\r\nWith these two changes, I am able to step through the code generated by the [compiler](https://github.com/dotnet/runtimelab/tree/feature/NativeAOT-LLVM) we are working on.\r\n\r\nFixes #3999.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6931/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6930", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6930/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6930/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6930/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6930", "id": 1872556619, "node_id": "PR_kwDOBhDaXM5ZFMeN", "number": 6930, "title": "Handle more errors in `maybe_exit_on_error`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-29T22:00:56Z", "updated_at": "2023-08-29T23:31:16Z", "closed_at": "2023-08-29T23:14:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6930", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6930", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6930.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6930.patch", "merged_at": "2023-08-29T23:14:06Z"}, "body": "There are currently two `I32Exit` types, one in `wasi-common` and one in `wasmtime-wasi`. The `maybe_exit_on_error` helper only searched for the former though, so update it to search for the latter as well to handle exits in the component CLI.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6930/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6930/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6929", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6929/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6929/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6929/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6929", "id": 1872497994, "node_id": "PR_kwDOBhDaXM5ZE_Xu", "number": 6929, "title": "Add some initial release notes for 13.0.0", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-29T21:24:20Z", "updated_at": "2023-08-29T22:56:26Z", "closed_at": "2023-08-29T22:56:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6929", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6929", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6929.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6929.patch", "merged_at": "2023-08-29T22:56:25Z"}, "body": "May need more updates over the coming days, but this should document everything up-to-now.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6929/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6928", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6928/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6928/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6928/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6928", "id": 1872450600, "node_id": "PR_kwDOBhDaXM5ZE0kP", "number": 6928, "title": "Rework `write` for sockets", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-29T20:58:42Z", "updated_at": "2023-08-30T23:53:27Z", "closed_at": "2023-08-30T23:53:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6928", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6928", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6928.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6928.patch", "merged_at": "2023-08-30T23:53:27Z"}, "body": "Spawn a task if we can't immediately satisfy a write, storing its join handle for later. Use the presence of the join handle to decide when writes are ready, or if a flush has completed.\n\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6928/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6928/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6927", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6927/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6927/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6927/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6927", "id": 1872365360, "node_id": "PR_kwDOBhDaXM5ZEiCX", "number": 6927, "title": "Remove clippy configuration from repo and crates", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-29T20:17:08Z", "updated_at": "2023-08-29T21:52:56Z", "closed_at": "2023-08-29T21:52:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6927", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6927", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6927.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6927.patch", "merged_at": "2023-08-29T21:52:55Z"}, "body": "Wasmtime's CI does not run clippy so there's no enforcement of this configuration. Additionally the configuration per-crate is not uniformly applied across all of the Wasmtime workspace and is only on some historical crates. Because we don't run clippy in CI this commit removes all of the clippy annotations for allow/warn/deny from the source.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6927/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6927/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6925", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6925/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6925/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6925/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6925", "id": 1872139894, "node_id": "PR_kwDOBhDaXM5ZD3fA", "number": 6925, "title": "Redesign Wasmtime's CLI", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}, {"id": 3832704028, "node_id": "LA_kwDOBhDaXM7kcmwc", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:config", "name": "wasmtime:config", "color": "006b75", "default": false, "description": "Issues related to the configuration of Wasmtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2023-08-29T17:53:06Z", "updated_at": "2023-10-23T19:02:34Z", "closed_at": "2023-09-11T22:49:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6925", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6925", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6925.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6925.patch", "merged_at": "2023-09-11T22:49:08Z"}, "body": "This commit follows through on discussion from #6741 to redesign the flags that the `wasmtime` binary accepts on the CLI. Almost all flags have been renamed/moved and will require callers to update. The main motivation here is to cut down on the forest of options in `wasmtime -h` which are difficult to mentally group together and understand.\r\n\r\nThe main change implemented here is to move options behind \"option groups\" which are intended to be abbreviated with a single letter:\r\n\r\n* `-O foo` - an optimization or performance-tuning related option\r\n* `-C foo` - a codegen option affecting the compilation process.\r\n* `-D foo` - a debug-related option\r\n* `-W foo` - a wasm-related option, for example changing wasm semantics\r\n* `-S foo` - a WASI-related option, configuring various proposals for example\r\n\r\nEach option group can be explored by passing `help`, for example `-O help`. This will print all options within the group along with their help message. Additionally `-O help-long` can be passed to print the full comment for each option if desired.\r\n\r\nOption groups can be specified multiple times on the command line, for example `-Wrelaxed-simd -Wthreads`. They can also be combined together with commas as `-Wrelaxed-simd,threads`. Configuration works as a \"last option wins\" so `-Ccache,cache=n` would end up with a compilation cache disabled.\r\n\r\nBoolean options can be specified as `-C foo` to enable `foo`, or they can be specified with `-Cfoo=$val` with any of `y`, `n`, `yes`, `no`, `true`, or `false`. All other options require a `=foo` value to be passed and the parsing depends on the type.\r\n\r\nThis commit additionally applies a few small refactorings to the CLI as well. For example the help text no longer prints information about wasm features after printing the option help. This is still available via `-Whelp` as all wasm features have moved from `--wasm-features` to `-W`. Additionally flags are no longer conditionally compiled in, but instead all flags are always supported. A runtime error is returned if support for a flag is not compiled in. Additionally the \"experimental\" name of WASI proposals has been dropped in favor of just the name of the proposal, for example `--wasi nn` instead of `--wasi-modules experimental-wasi-nn`. This is intended to mirror how wasm proposals don't have \"experimental\" in the name and an opt-in is required regardless.\r\n\r\n<details>\r\n\r\n<summary>Full listing of flags and how they have changed</summary>\r\n\r\n| old cli flag                                  | new cli flag                                    |\r\n|-----------------------------------------------|-------------------------------------------------|\r\n| `-O, --optimize`                              | removed                                         |\r\n| `--opt-level <LEVEL>`                         | `-O opt-level=N`                                |\r\n| `--dynamic-memory-guard-size <SIZE>`          | `-O dynamic-memory-guard-size=...`              |\r\n| `--static-memory-forced`                      | `-O static-memory-forced`                       |\r\n| `--static-memory-guard-size <SIZE>`           | `-O static-memory-guard-size=N`                 |\r\n| `--static-memory-maximum-size <MAXIMUM>`      | `-O static-memory-maximum-size=N`               |\r\n| `--dynamic-memory-reserved-for-growth <SIZE>` | `-O dynamic-memory-reserved-for-growth=...`     |\r\n| `--pooling-allocator`                         | `-O pooling-allocator`                          |\r\n| `--disable-memory-init-cow`                   | `-O memory-init-cow=no`                         |\r\n| `--compiler <COMPILER>`                       | `-C compiler=..`                                |\r\n| `--enable-cranelift-debug-verifier`           | `-C cranelift-debug-verifier`                   |\r\n| `--cranelift-enable <SETTING>`                | `-C cranelift-NAME`                             |\r\n| `--cranelift-set <NAME=VALUE>`                | `-C cranelift-NAME=VALUE`                       |\r\n| `--config <CONFIG_PATH>`                      | `-C cache-config=..`                            |\r\n| `--disable-cache`                             | `-C cache=no`                                   |\r\n| `--disable-parallel-compilation`              | `-C parallel-compilation=no`                    |\r\n| `-g`                                          | `-D debug-info`                                 |\r\n| `--disable-address-map`                       | `-D address-map=no`                             |\r\n| `--disable-logging`                           | `-D logging=no`                                 |\r\n| `--log-to-files`                              | `-D log-to-files`                               |\r\n| `--coredump-on-trap <PATH>`                   | `-D coredump=..`                                |\r\n| `--wasm-features all`                         | `-W all-proposals`                              |\r\n| `--wasm-features -all`                        | `-W all-proposals=n`                            |\r\n| `--wasm-features bulk-memory`                 | `-W bulk-memory`                                |\r\n| `--wasm-features multi-memory`                | `-W multi-memory`                               |\r\n| `--wasm-features multi-value`                 | `-W multi-value`                                |\r\n| `--wasm-features reference-types`             | `-W reference-types`                            |\r\n| `--wasm-features simd`                        | `-W simd`                                       |\r\n| `--wasm-features tail-call`                   | `-W tail-call`                                  |\r\n| `--wasm-features threads`                     | `-W threads`                                    |\r\n| `--wasm-features memory64`                    | `-W memory64`                                   |\r\n| `--wasm-features copmonent-model`             | `-W component-model`                            |\r\n| `--wasm-features function-references`         | `-W function-references`                        |\r\n| `--relaxed-simd-deterministic`                | `-W relaxed-simd-deterministic`                 |\r\n| `--enable-cranelift-nan-canonicalization`     | `-W nan-canonicalization`                       |\r\n| `--fuel <N>`                                  | `-W fuel=N`                                     |\r\n| `--epoch-interruption`                        | `-W epoch-interruption`                         |\r\n| `--allow-unknown-exports`                     | `-W unknown-exports-allow`                      |\r\n| `--trap-unknown-imports`                      | `-W unknown-imports-trap`                       |\r\n| `--default-values-unknown-imports`            | `-W unknown-imports-default`                    |\r\n| `--max-instances <MAX_INSTANCES>`             | `-W max-instances=N`                            |\r\n| `--max-memories <MAX_MEMORIES>`               | `-W max-memories=N`                             |\r\n| `--max-memory-size <BYTES>`                   | `-W max-memory-size=N`                          |\r\n| `--max-table-elements <MAX_TABLE_ELEMENTS>`   | `-W max-table-elements=N`                       |\r\n| `--max-tables <MAX_TABLES>`                   | `-W max-tables=N`                               |\r\n| `--max-wasm-stack <MAX_WASM_STACK>`           | `-W max-wasm-stack=N`                           |\r\n| `--trap-on-grow-failure`                      | `-W trap-on-grow-failure`                       |\r\n| `--wasm-timeout <TIME>`                       | `-W timeout=N`                                  |\r\n| `--wmemcheck`                                 | `-W wmemcheck`                                  |\r\n| `--wasi-modules default`                      | removed                                         |\r\n| `--wasi-modules -default`                     | removed                                         |\r\n| `--wasi-modules wasi-common`                  | `-S common`                                     |\r\n| `--wasi-modules -wasi-common`                 | `-S common=n`                                   |\r\n| `--wasi-modules experimental-wasi-nn`         | `-S nn`                                         |\r\n| `--wasi-modules experimental-wasi-threads`    | `-S threads`                                    |\r\n| `--wasi-modules experimental-wasi-http`       | `-S http`                                       |\r\n| `--listenfd`                                  | `-S listenfd`                                   |\r\n| `--tcplisten <SOCKET ADDRESS>`                | `-S tcplisten=...`                              |\r\n| `--wasi-nn-graph <FORMAT::HOST>`              | `-S nn-graph=FORMAT::HOST`                      |\r\n| `--preview2`                                  | `-S preview2`                                   |\r\n| `--dir <DIRECTORY>`                           | `--dir ...`                                     |\r\n| `--mapdir <GUEST_DIR::HOST_DIR>`              | `--dir a::b`                                    |\r\n\r\n</details>\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6925/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6924", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6924/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6924/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6924/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6924", "id": 1872050908, "node_id": "PR_kwDOBhDaXM5ZDkFR", "number": 6924, "title": "riscv64: Implement SIMD floating point conversion instructions", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-29T16:49:27Z", "updated_at": "2023-08-30T21:53:59Z", "closed_at": "2023-08-30T21:53:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6924", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6924", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6924.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6924.patch", "merged_at": "2023-08-30T21:53:59Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR implements the floating point conversion instructions (`fvdemote`, `fvpromote_low`, `fcvt_{to,from}_{u,s}int{,_sat}`) on the RISC-V backend. \r\n\r\nAlmost all instructions match 1-to-1 with the WASM spec, except `fcvt_to_{u,s}int_sat`, where NaN's need to be manually zeroed out. And on `fvdemote` RISC-V leaves the upper lanes undefined, so we also zero them out manually.\r\n\r\n---\r\n\r\n\ud83c\udf89 With this PR we now have SIMD fully implemented for RISC-V\ud83c\udf89 \r\n\r\nThere is 1 test that is not passing yet, but I think that is due to a NaN payload bit mismatch that is allowed by the spec. But I'm going to open a separate issue to confirm that.\r\n\r\n(This PR is built on top of #6920 so we need to merge that one first)", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6924/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6924/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6921", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6921/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6921/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6921/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6921", "id": 1870080481, "node_id": "PR_kwDOBhDaXM5Y873S", "number": 6921, "title": "update serde and provide cargo vet", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-28T16:29:04Z", "updated_at": "2023-08-28T17:42:59Z", "closed_at": "2023-08-28T17:42:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6921", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6921", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6921.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6921.patch", "merged_at": "2023-08-28T17:42:58Z"}, "body": "Set dependency of serde and serde_derive to 1.0.188, and import audits.\r\n\r\nRequired for https://github.com/bytecodealliance/wasmtime/pull/6917", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6921/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6920", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6920/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6920/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6920/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6920", "id": 1869839945, "node_id": "PR_kwDOBhDaXM5Y8HNt", "number": 6920, "title": "riscv64: Implement vector floating point rounding instructions", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 4590005593, "node_id": "LA_kwDOBhDaXM8AAAABEZXtWQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:riscv64", "name": "cranelift:area:riscv64", "color": "fbca04", "default": false, "description": "Issues related to the RISC-V 64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-28T14:06:55Z", "updated_at": "2023-08-30T20:20:15Z", "closed_at": "2023-08-30T20:20:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6920", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6920", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6920.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6920.patch", "merged_at": "2023-08-30T20:20:13Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR Implements the floating point rounding instructions for SIMD values in the RISC-V backend. I'm not too familiar with the intricacies of this algorithm, I've mostly just copied what LLVM emits.\r\n\r\nThis PR also re-introduces CSR Instructions (deleted in #6267). CSR's are [Control and Status Registers](https://five-embeddev.com/riscv-isa-manual/latest/csr.html), which are used to hold architectural state such as Floating point round modes and Vector type state, etc..\r\n\r\nDespite being part of the Zicsr extension, this extension is part of the minimum set of extensions that we need to function (i.e. it is required for floating point to work).", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6920/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6920/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6918", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6918/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6918/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6918/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6918", "id": 1868624536, "node_id": "PR_kwDOBhDaXM5Y3-FA", "number": 6918, "title": "x64: Implement `bitselect` for scalars", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-27T20:34:09Z", "updated_at": "2023-08-28T16:30:29Z", "closed_at": "2023-08-28T16:30:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6918", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6918", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6918.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6918.patch", "merged_at": "2023-08-28T16:30:28Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR Implements `bitselect` for all scalars in the x64 backend.\r\n\r\nIt also enables bitwise ops on floats for fuzzgen since they have been implemented (#4870, #5041)\r\n\r\nCloses #5197", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6918/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6918/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]