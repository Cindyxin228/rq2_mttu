[{"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5245", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5245/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5245/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5245/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5245", "id": 1444319325, "node_id": "PR_kwDOBhDaXM5CpJ9K", "number": 5245, "title": "Fix CI after CVE fixes", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-10T17:48:03Z", "updated_at": "2022-11-10T19:35:17Z", "closed_at": "2022-11-10T19:35:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5245", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5245", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5245.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5245.patch", "merged_at": "2022-11-10T19:35:16Z"}, "body": "Alas we can't run CI ahead of time so this fixes various minor build issues from the merging of the recent CVE fixes. Note that I plan to publish the advisories once CI issues are sorted out.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5245/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5244", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5244/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5244/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5244/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5244", "id": 1444065274, "node_id": "PR_kwDOBhDaXM5CoSWz", "number": 5244, "title": "Avoid unconditional `getrandom` syscall creating a `WasiCtx`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-11-10T15:02:45Z", "updated_at": "2022-11-10T19:58:13Z", "closed_at": "2022-11-10T19:58:12Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5244", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5244", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5244.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5244.patch", "merged_at": "2022-11-10T19:58:12Z"}, "body": "This commit updates the default random context inserted into a `WasiCtxt` to be seeded from `thread_rng` rather than the system's entropy. This avoids an unconditional syscall on the creation of all `WasiCtx` structures shouldn't reduce the quality of the random numbers produced.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5244/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5238", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5238/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5238/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5238/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5238", "id": 1442744247, "node_id": "PR_kwDOBhDaXM5Cjw0K", "number": 5238, "title": "winch: Prepare for an update to the `wasm-tools` crates", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-09T21:05:14Z", "updated_at": "2022-11-10T20:01:44Z", "closed_at": "2022-11-10T20:01:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5238", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5238", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5238.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5238.patch", "merged_at": "2022-11-10T20:01:43Z"}, "body": "This commit prepares the `winch` crate for updating `wasm-tools`, notably changing a bit about how the visitation of operators works. This moves the function body and wasm validator out of the `CodeGen` structure and into parameters threaded into the emission of the actual function.\r\n\r\nAdditionally the `VisitOperator` implementation was updated to remove the explicit calls to the validator, favoring instead a macro-generated solution to guarantee that all validation happens before any translation proceeds. This means that the `VisitOperator for CodeGen` impl is now infallible and the various methods have been inlined into the trait methods as well as removing the `Result<_>`.\r\n\r\nFinally this commit updates translation to call `validator.finish(..)` which is required to perform the final validation steps of the function body.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5238/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5238/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]