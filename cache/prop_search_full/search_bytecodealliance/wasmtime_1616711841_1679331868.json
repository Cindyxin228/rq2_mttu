[{"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6065", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6065/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6065/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6065/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6065", "id": 1631177003, "node_id": "PR_kwDOBhDaXM5MZt0x", "number": 6065, "title": "Release Wasmtime 7.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-20T00:14:43Z", "updated_at": "2023-03-20T15:09:45Z", "closed_at": "2023-03-20T15:09:43Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6065", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6065", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6065.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6065.patch", "merged_at": "2023-03-20T15:09:43Z"}, "body": "This is an [automated pull request][process] from CI which is\nintended to notify maintainers that it's time to release Wasmtime\n7.0.0. The [release branch][branch] was created roughly two weeks ago\nand it's now time for it to be published and released.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n[branch]: https://github.com/bytecodealliance/wasmtime/tree/release-7.0.0\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6065/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6064", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6064/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6064/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6064/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6064", "id": 1631176992, "node_id": "PR_kwDOBhDaXM5MZt0q", "number": 6064, "title": "Update release date of Wasmtime 7.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-20T00:14:41Z", "updated_at": "2023-03-20T15:09:34Z", "closed_at": "2023-03-20T15:09:29Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6064", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6064", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6064.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6064.patch", "merged_at": "2023-03-20T15:09:29Z"}, "body": "This is an [automated pull request][process] from CI which is updating\nthe release date of Wasmtime 7.0.0 to today. This PR's base branch\nis `main` and a second PR will be coming to perform the actual\nrelease which will be targeted at `release-7.0.0`.\n\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6064/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6060", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6060/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6060/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6060/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6060", "id": 1630058031, "node_id": "PR_kwDOBhDaXM5MWHMZ", "number": 6060, "title": "x64: Fix vbroadcastss with AVX2 and without AVX", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-18T00:37:52Z", "updated_at": "2023-03-18T19:14:40Z", "closed_at": "2023-03-18T19:14:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6060", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6060", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6060.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6060.patch", "merged_at": "2023-03-18T19:14:38Z"}, "body": "This commit fixes a corner case in the emission of the `vbroadcasts{s,d}` instructions. The memory-to-xmm form of these instructions was available with the AVX instruction set, but the xmm-to-xmm form of these instructions wasn't available until AVX2. The instruction requirement for these are listed as AVX but the lowering rules are appropriately annotated to use either AVX2 or AVX when appropriate.\r\n\r\nWhile this should work in practice this didn't work for the assertion about enabled features for each instruction. The `vbroadcastss` instruction was listed as requiring AVX but could get emitted when AVX2 was enabled (due to the reg-to-reg form being available). This caused an issue for the fuzzer where AVX2 was enabled but AVX was disabled.\r\n\r\nOne possible fix would be to add more opcodes, one for reg-to-reg and one for mem-to-reg. That seemed like somewhat overkill for a pretty niche situation that shouldn't actually come up in practice anywhere. Instead this commit changes all the `has_avx` accessors to the `use_avx_simd` predicate already available in the target flags. The `use_avx2_simd` predicate was then updated to additionally require `has_avx`, so if AVX2 is enabled and AVX is disabled then the `vbroadcastss` instruction won't get emitted any more.\r\n\r\nCloses #6059\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6060/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6057", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6057/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6057/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6057/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6057", "id": 1629875320, "node_id": "PR_kwDOBhDaXM5MVg85", "number": 6057, "title": "Remove reference to `store` in `Linker::instantiate_pre` docs", "user": {"login": "lann", "id": 245734, "node_id": "MDQ6VXNlcjI0NTczNA==", "avatar_url": "https://avatars.githubusercontent.com/u/245734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lann", "html_url": "https://github.com/lann", "followers_url": "https://api.github.com/users/lann/followers", "following_url": "https://api.github.com/users/lann/following{/other_user}", "gists_url": "https://api.github.com/users/lann/gists{/gist_id}", "starred_url": "https://api.github.com/users/lann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lann/subscriptions", "organizations_url": "https://api.github.com/users/lann/orgs", "repos_url": "https://api.github.com/users/lann/repos", "events_url": "https://api.github.com/users/lann/events{/privacy}", "received_events_url": "https://api.github.com/users/lann/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-17T20:05:30Z", "updated_at": "2023-03-17T21:10:03Z", "closed_at": "2023-03-17T21:10:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6057", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6057", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6057.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6057.patch", "merged_at": "2023-03-17T21:10:03Z"}, "body": "The `store` param was removed in #5683\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6057/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6057/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6054", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6054/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6054/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6054/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6054", "id": 1629785667, "node_id": "PR_kwDOBhDaXM5MVNpA", "number": 6054, "title": "`cranelift-wasm`: Refactor bounds checks to avoid repetition of Spectre and non-Spectre", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-17T18:54:57Z", "updated_at": "2023-03-17T21:21:36Z", "closed_at": "2023-03-17T21:13:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6054", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6054", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6054.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6054.patch", "merged_at": "2023-03-17T21:13:13Z"}, "body": "Builds on top of https://github.com/bytecodealliance/wasmtime/pull/6031\r\n\r\n(Draft until that PR lands)", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6054/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6053", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6053/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6053/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6053/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6053", "id": 1629749235, "node_id": "PR_kwDOBhDaXM5MVFrc", "number": 6053, "title": "craneleft: cancel `ineg` when args to `imul`", "user": {"login": "Kmeakin", "id": 19665139, "node_id": "MDQ6VXNlcjE5NjY1MTM5", "avatar_url": "https://avatars.githubusercontent.com/u/19665139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kmeakin", "html_url": "https://github.com/Kmeakin", "followers_url": "https://api.github.com/users/Kmeakin/followers", "following_url": "https://api.github.com/users/Kmeakin/following{/other_user}", "gists_url": "https://api.github.com/users/Kmeakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kmeakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kmeakin/subscriptions", "organizations_url": "https://api.github.com/users/Kmeakin/orgs", "repos_url": "https://api.github.com/users/Kmeakin/repos", "events_url": "https://api.github.com/users/Kmeakin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kmeakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-17T18:28:08Z", "updated_at": "2024-01-30T00:29:54Z", "closed_at": "2023-03-17T20:26:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6053", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6053", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6053.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6053.patch", "merged_at": "2023-03-17T20:26:53Z"}, "body": "```\r\n;; ineg(x) * ineg(y) == x*y.\r\n```", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6053/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6052", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6052/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6052/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6052/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6052", "id": 1629730146, "node_id": "PR_kwDOBhDaXM5MVBka", "number": 6052, "title": "cranelift: rewrite `x*-1` to `ineg(x)`", "user": {"login": "Kmeakin", "id": 19665139, "node_id": "MDQ6VXNlcjE5NjY1MTM5", "avatar_url": "https://avatars.githubusercontent.com/u/19665139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kmeakin", "html_url": "https://github.com/Kmeakin", "followers_url": "https://api.github.com/users/Kmeakin/followers", "following_url": "https://api.github.com/users/Kmeakin/following{/other_user}", "gists_url": "https://api.github.com/users/Kmeakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kmeakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kmeakin/subscriptions", "organizations_url": "https://api.github.com/users/Kmeakin/orgs", "repos_url": "https://api.github.com/users/Kmeakin/repos", "events_url": "https://api.github.com/users/Kmeakin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kmeakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-17T18:10:14Z", "updated_at": "2024-01-30T00:29:55Z", "closed_at": "2023-03-17T20:28:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6052", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6052", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6052.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6052.patch", "merged_at": "2023-03-17T20:28:12Z"}, "body": "```\r\n;; x*-1 == -1*x == ineg(x).\r\n```", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6052/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6052/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6047", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6047/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6047/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6047/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6047", "id": 1629646860, "node_id": "PR_kwDOBhDaXM5MUvmt", "number": 6047, "title": "Validate the OPCODE_SIGNATURES table", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-17T17:02:04Z", "updated_at": "2023-03-18T19:14:38Z", "closed_at": "2023-03-18T19:14:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6047", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6047", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6047.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6047.patch", "merged_at": "2023-03-18T19:14:37Z"}, "body": "Add a test to cranelift-fuzzgen that validates the `OPCODE_SIGNATURES` table by comparing it against valid instruction instantiations. Additionally, fix some signatures that were identified as not matching the signature from the instruction's specification.\r\n\r\nThis is incremental work towards generating instruction instantiations in cranelift-fuzzgen using the instruction specification instead of explicitly opting-in an instruction.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6047/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6046", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6046/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6046/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6046/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6046", "id": 1629634898, "node_id": "PR_kwDOBhDaXM5MUs6-", "number": 6046, "title": "cranelift: Emit a table of opcodes in gen_inst", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-17T16:55:55Z", "updated_at": "2023-03-17T18:13:05Z", "closed_at": "2023-03-17T18:13:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6046", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6046", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6046.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6046.patch", "merged_at": "2023-03-17T18:13:04Z"}, "body": "Generate a constant that contains all opcodes that cranelift knows about. This is convenient for analyses, and will aid generating instruction instantiations when fuzzing in the future.\n\nAs a more immediate need, I'm using this table to check the opcode signatures that we use when fuzzing cranelift, but thought it would make sense to consider this change in isolation.\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6046/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6045", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6045/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6045/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6045/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6045", "id": 1629549097, "node_id": "PR_kwDOBhDaXM5MUaRZ", "number": 6045, "title": "x64: Elide more uextend with extractlane", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-17T15:53:52Z", "updated_at": "2023-03-17T16:52:38Z", "closed_at": "2023-03-17T16:52:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6045", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6045", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6045.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6045.patch", "merged_at": "2023-03-17T16:52:37Z"}, "body": "I've confirmed locally now that `pextr{b,w,d}` all zero the upper bits of the full 64-bit register size which means that the `extractlane` operation with a zero-extend can be elided for more cases, including 8-to-64-bit casts as well as 32-to-64.\r\n\r\nThis helps elide a few extra `mov`s in a loop I was looking at and had a modest corresponding increase in performance (my guess was due to the slightly decreased code size mostly as opposed to the removed `mov`s).\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6045/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6044", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6044/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6044/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6044/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6044", "id": 1629145463, "node_id": "PR_kwDOBhDaXM5MTDlo", "number": 6044, "title": "Remove split_blocks_created field", "user": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-17T11:24:02Z", "updated_at": "2023-03-17T19:49:00Z", "closed_at": "2023-03-17T17:09:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6044", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6044", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6044.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6044.patch", "merged_at": "2023-03-17T17:09:05Z"}, "body": "This has been unused since #5731", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6044/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6043", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6043/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6043/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6043/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6043", "id": 1629111256, "node_id": "PR_kwDOBhDaXM5MS8KC", "number": 6043, "title": "Make sequence numbers local to instructions", "user": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-17T10:59:14Z", "updated_at": "2023-03-18T13:10:56Z", "closed_at": "2023-03-17T21:39:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6043", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6043", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6043.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6043.patch", "merged_at": "2023-03-17T21:39:16Z"}, "body": "This allows renumbering to be localized to a single block where previously it could affect the entire function. Also saves 32bit of overhead per block.\r\n\r\nI originally set out to remove sequence numbers entirely to save 32bit of overhead for every instruction, but the dominator tree code uses sequence numbers to find the relative order of instructions within a block.\r\n\r\nBuilds on top of https://github.com/bytecodealliance/wasmtime/pull/6042. I split both of them to simplify bisection and help with reviewing.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6043/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6042", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6042/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6042/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6042/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6042", "id": 1629106352, "node_id": "PR_kwDOBhDaXM5MS7Er", "number": 6042, "title": "Various cleanups to Layout", "user": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-17T10:55:59Z", "updated_at": "2023-03-17T19:42:56Z", "closed_at": "2023-03-17T19:21:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6042", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6042", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6042.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6042.patch", "merged_at": "2023-03-17T19:21:43Z"}, "body": "This removes some dead code, replaces some function calls with more specific function calls and renames a couple of items to have a clearer name.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6042/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6042/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6041", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6041/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6041/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6041/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6041", "id": 1628811960, "node_id": "PR_kwDOBhDaXM5MR8r6", "number": 6041, "title": "fix `ISLE`,`Pos`'`col`, looks like a bug to me. ", "user": {"login": "yuyang-ok", "id": 96557710, "node_id": "U_kgDOBcFajg", "avatar_url": "https://avatars.githubusercontent.com/u/96557710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuyang-ok", "html_url": "https://github.com/yuyang-ok", "followers_url": "https://api.github.com/users/yuyang-ok/followers", "following_url": "https://api.github.com/users/yuyang-ok/following{/other_user}", "gists_url": "https://api.github.com/users/yuyang-ok/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuyang-ok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuyang-ok/subscriptions", "organizations_url": "https://api.github.com/users/yuyang-ok/orgs", "repos_url": "https://api.github.com/users/yuyang-ok/repos", "events_url": "https://api.github.com/users/yuyang-ok/events{/privacy}", "received_events_url": "https://api.github.com/users/yuyang-ok/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-17T07:06:26Z", "updated_at": "2023-03-17T23:02:22Z", "closed_at": "2023-03-17T23:02:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6041", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6041", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6041.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6041.patch", "merged_at": "2023-03-17T23:02:21Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6041/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6037", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6037/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6037/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6037/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6037", "id": 1628461555, "node_id": "PR_kwDOBhDaXM5MQzPI", "number": 6037, "title": "cranelift: simplify `icmp` against UMAX/SMIN/SMAX", "user": {"login": "Kmeakin", "id": 19665139, "node_id": "MDQ6VXNlcjE5NjY1MTM5", "avatar_url": "https://avatars.githubusercontent.com/u/19665139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kmeakin", "html_url": "https://github.com/Kmeakin", "followers_url": "https://api.github.com/users/Kmeakin/followers", "following_url": "https://api.github.com/users/Kmeakin/following{/other_user}", "gists_url": "https://api.github.com/users/Kmeakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kmeakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kmeakin/subscriptions", "organizations_url": "https://api.github.com/users/Kmeakin/orgs", "repos_url": "https://api.github.com/users/Kmeakin/repos", "events_url": "https://api.github.com/users/Kmeakin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kmeakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": {"login": "cfallin", "id": 216148, "node_id": "MDQ6VXNlcjIxNjE0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/216148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfallin", "html_url": "https://github.com/cfallin", "followers_url": "https://api.github.com/users/cfallin/followers", "following_url": "https://api.github.com/users/cfallin/following{/other_user}", "gists_url": "https://api.github.com/users/cfallin/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfallin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfallin/subscriptions", "organizations_url": "https://api.github.com/users/cfallin/orgs", "repos_url": "https://api.github.com/users/cfallin/repos", "events_url": "https://api.github.com/users/cfallin/events{/privacy}", "received_events_url": "https://api.github.com/users/cfallin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "cfallin", "id": 216148, "node_id": "MDQ6VXNlcjIxNjE0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/216148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfallin", "html_url": "https://github.com/cfallin", "followers_url": "https://api.github.com/users/cfallin/followers", "following_url": "https://api.github.com/users/cfallin/following{/other_user}", "gists_url": "https://api.github.com/users/cfallin/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfallin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfallin/subscriptions", "organizations_url": "https://api.github.com/users/cfallin/orgs", "repos_url": "https://api.github.com/users/cfallin/repos", "events_url": "https://api.github.com/users/cfallin/events{/privacy}", "received_events_url": "https://api.github.com/users/cfallin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2023-03-16T23:29:18Z", "updated_at": "2024-01-30T00:29:51Z", "closed_at": "2023-03-17T19:55:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6037", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6037", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6037.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6037.patch", "merged_at": "2023-03-17T19:55:37Z"}, "body": "Adds the following rewrites:\r\n```\r\n;; ult(x, 0) == false.\r\n;; ule(x, 0) == eq(x, 0)\r\n;; ugt(x, 0) == ne(x, 0).\r\n;; uge(x, 0) == true.\r\n\r\n;; ult(x, UMAX) == ne(x, UMAX).\r\n;; ule(x, UMAX) == true.\r\n;; ugt(x, UMAX) == false.\r\n;; uge(x, UMAX) == eq(x, UMAX).\r\n\r\n;; slt(x, SMIN) == false.\r\n;; sle(x, SMIN) == eq(x, SMIN).\r\n;; sgt(x, SMIN) == ne(x, SMIN).\r\n;; sge(x, SMIN) == true.\r\n\r\n;; slt(x, SMAX) == ne(x, SMAX).\r\n;; sle(x, SMAX) == true.\r\n;; sgt(x, SMAX) == false.\r\n;; sge(x, SMAX) == eq(x, SMAX).\r\n```\r\n\r\nAlso adds `ty_umin`, `ty_umax`, `ty_smin` and `ty_smax` constructors", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6037/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6036", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6036/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6036/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6036/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6036", "id": 1628453264, "node_id": "PR_kwDOBhDaXM5MQxhP", "number": 6036, "title": "Add note to README to encourage using the rustup method to install Rust.", "user": {"login": "cfallin", "id": 216148, "node_id": "MDQ6VXNlcjIxNjE0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/216148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfallin", "html_url": "https://github.com/cfallin", "followers_url": "https://api.github.com/users/cfallin/followers", "following_url": "https://api.github.com/users/cfallin/following{/other_user}", "gists_url": "https://api.github.com/users/cfallin/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfallin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfallin/subscriptions", "organizations_url": "https://api.github.com/users/cfallin/orgs", "repos_url": "https://api.github.com/users/cfallin/repos", "events_url": "https://api.github.com/users/cfallin/events{/privacy}", "received_events_url": "https://api.github.com/users/cfallin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-16T23:16:04Z", "updated_at": "2023-03-17T03:01:41Z", "closed_at": "2023-03-17T03:01:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6036", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6036", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6036.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6036.patch", "merged_at": "2023-03-17T03:01:39Z"}, "body": "This addresses the root confusion in #6035.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6036/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6034", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6034/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6034/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6034/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6034", "id": 1628180447, "node_id": "PR_kwDOBhDaXM5MP0mQ", "number": 6034, "title": "cranelift: simplify `fneg(fneg(x))` to `x`", "user": {"login": "Kmeakin", "id": 19665139, "node_id": "MDQ6VXNlcjE5NjY1MTM5", "avatar_url": "https://avatars.githubusercontent.com/u/19665139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kmeakin", "html_url": "https://github.com/Kmeakin", "followers_url": "https://api.github.com/users/Kmeakin/followers", "following_url": "https://api.github.com/users/Kmeakin/following{/other_user}", "gists_url": "https://api.github.com/users/Kmeakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kmeakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kmeakin/subscriptions", "organizations_url": "https://api.github.com/users/Kmeakin/orgs", "repos_url": "https://api.github.com/users/Kmeakin/repos", "events_url": "https://api.github.com/users/Kmeakin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kmeakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-16T20:03:41Z", "updated_at": "2023-03-17T01:56:33Z", "closed_at": "2023-03-17T01:32:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6034", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6034", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6034.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6034.patch", "merged_at": "2023-03-17T01:32:18Z"}, "body": "`algebraic.isle` includes rewrites for cancelling `fneg`s when used as arguments to `fma`, but not for `fneg` cancelling itself", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6034/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6033", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6033/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6033/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6033/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6033", "id": 1628179402, "node_id": "PR_kwDOBhDaXM5MP0Xw", "number": 6033, "title": "cranelift: simplify `ineg(ineg(x))` to `x`", "user": {"login": "Kmeakin", "id": 19665139, "node_id": "MDQ6VXNlcjE5NjY1MTM5", "avatar_url": "https://avatars.githubusercontent.com/u/19665139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kmeakin", "html_url": "https://github.com/Kmeakin", "followers_url": "https://api.github.com/users/Kmeakin/followers", "following_url": "https://api.github.com/users/Kmeakin/following{/other_user}", "gists_url": "https://api.github.com/users/Kmeakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kmeakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kmeakin/subscriptions", "organizations_url": "https://api.github.com/users/Kmeakin/orgs", "repos_url": "https://api.github.com/users/Kmeakin/repos", "events_url": "https://api.github.com/users/Kmeakin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kmeakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-16T20:02:53Z", "updated_at": "2023-03-17T01:12:34Z", "closed_at": "2023-03-17T00:51:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6033", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6033", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6033.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6033.patch", "merged_at": "2023-03-17T00:51:42Z"}, "body": "`algrebraic.isle` rewrites `0-x` to `isub x`, but misses an opportunity to further simplify\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6033/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6033/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6032", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6032/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6032/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6032/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6032", "id": 1628175256, "node_id": "PR_kwDOBhDaXM5MPzdK", "number": 6032, "title": "cranelift: simplify `x-x` to `0`", "user": {"login": "Kmeakin", "id": 19665139, "node_id": "MDQ6VXNlcjE5NjY1MTM5", "avatar_url": "https://avatars.githubusercontent.com/u/19665139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kmeakin", "html_url": "https://github.com/Kmeakin", "followers_url": "https://api.github.com/users/Kmeakin/followers", "following_url": "https://api.github.com/users/Kmeakin/following{/other_user}", "gists_url": "https://api.github.com/users/Kmeakin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kmeakin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kmeakin/subscriptions", "organizations_url": "https://api.github.com/users/Kmeakin/orgs", "repos_url": "https://api.github.com/users/Kmeakin/repos", "events_url": "https://api.github.com/users/Kmeakin/events{/privacy}", "received_events_url": "https://api.github.com/users/Kmeakin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-16T20:00:12Z", "updated_at": "2024-01-30T00:29:53Z", "closed_at": "2023-03-17T15:54:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6032", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6032", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6032.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6032.patch", "merged_at": "2023-03-17T15:54:20Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6032/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6031", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6031/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6031/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6031/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6031", "id": 1628134453, "node_id": "PR_kwDOBhDaXM5MPqnq", "number": 6031, "title": "cranelift-wasm: Add a bounds-checking optimization for dynamic memories and guard pages", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-03-16T19:26:50Z", "updated_at": "2023-03-17T19:57:32Z", "closed_at": "2023-03-17T19:57:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6031", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6031", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6031.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6031.patch", "merged_at": "2023-03-17T19:57:31Z"}, "body": "This is a new special case for when we know that there are enough guard pages to cover the memory access's offset and access size.\r\n\r\nThe precise should-we-trap condition is\r\n\r\n    index + offset + access_size > bound\r\n\r\nHowever, if we instead check only the partial condition\r\n\r\n    index > bound\r\n\r\nthen the most out of bounds that the access can be, while that partial check still succeeds, is `offset + access_size`.\r\n\r\nHowever, when we have a guard region that is at least as large as `offset + access_size`, we can rely on the virtual memory subsystem handling these out-of-bounds errors at runtime. Therefore, the partial `index > bound` check is sufficient for this heap configuration.\r\n\r\nAdditionally, this has the advantage that a series of Wasm loads that use the same dynamic index operand but different static offset immediates -- which is a common code pattern when accessing multiple fields in the same struct that is in linear memory -- will all emit the same `index > bound` check, which we can GVN.\r\n\r\nPartially.\r\n\r\nThe bounds check comparison is GVN'd but we still branch on values we should know will always be true if we get this far in the code. This is actual `br_if`s in the non-Spectre code and `select_spectre_guard`s that we should know will always go a certain way if we have Spectre mitigations enabled. See the second commit for examples.\r\n\r\nImproving the non-Spectre case is pretty straightforward: walk the dominator tree and remember which values we've already branched on at this point, and therefore we can simplify any further conditional branches on those same values into direct jumps.\r\n\r\nImproving the Spectre case requires something that is morally the same, but has a couple snags:\r\n\r\n* We don't have actual `br_if`s to determine whether the bounds checking condition succeeded or not. We need to instead reason about dominating `select_spectre_guard; {load, store}` instruction pairs.\r\n\r\n* We have to be SUPER careful about reasoning \"through\" `select_spectre_guard`s.  Our general rule is never to do that, since it could break the speculative execution sandboxing that the instruction is designed for.\r\n\r\nThis pull request leaves implementing these new optimization passes for follow ups.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6031/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6029", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6029/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6029/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6029/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6029", "id": 1626334507, "node_id": "PR_kwDOBhDaXM5MJjw1", "number": 6029, "title": "Bump cargo-vet to 0.5", "user": {"login": "bholley", "id": 377435, "node_id": "MDQ6VXNlcjM3NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/377435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bholley", "html_url": "https://github.com/bholley", "followers_url": "https://api.github.com/users/bholley/followers", "following_url": "https://api.github.com/users/bholley/following{/other_user}", "gists_url": "https://api.github.com/users/bholley/gists{/gist_id}", "starred_url": "https://api.github.com/users/bholley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bholley/subscriptions", "organizations_url": "https://api.github.com/users/bholley/orgs", "repos_url": "https://api.github.com/users/bholley/repos", "events_url": "https://api.github.com/users/bholley/events{/privacy}", "received_events_url": "https://api.github.com/users/bholley/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-15T21:49:56Z", "updated_at": "2023-03-15T22:51:26Z", "closed_at": "2023-03-15T22:51:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6029", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6029", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6029.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6029.patch", "merged_at": "2023-03-15T22:51:24Z"}, "body": "Aside from a few new features (notably automatic registry suggestions), this\r\nrelease removes the need to import description for criteria that are not\r\ndirectly used, and adds an explicit version to the cargo-vet instance.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6029/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6028", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6028/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6028/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6028/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6028", "id": 1626274709, "node_id": "PR_kwDOBhDaXM5MJWov", "number": 6028, "title": "Validate faulting addresses are valid to fault on", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-03-15T20:58:56Z", "updated_at": "2023-03-17T15:37:55Z", "closed_at": "2023-03-17T15:37:53Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6028", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6028", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6028.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6028.patch", "merged_at": "2023-03-17T15:37:53Z"}, "body": "This commit adds a defense-in-depth measure to Wasmtime which is intended to mitigate the impact of CVEs such as GHSA-ff4p-7xrq-q5r8. Currently Wasmtime will catch `SIGSEGV` signals for WebAssembly code so long as the instruction which faulted is an allow-listed instruction (aka has a trap code listed for it). With the recent security issue, however, the problem was that a wasm guest could exploit a compiler bug to access memory outside of its sandbox. If the access was successful there's no real way to detect that, but if the access was unsuccessful then Wasmtime would happily swallow the `SIGSEGV` and report a nominal trap. To embedders, this might look like nothing is going awry.\r\n\r\nThe new strategy implemented here in this commit is to attempt to be more robust towards these sorts of failures. When a `SIGSEGV` is raised the faulting pc is recorded but additionally the address of the inaccessible location is also record. After the WebAssembly stack is unwound and control returns to Wasmtime which has access to a `Store` Wasmtime will now use this inaccessible faulting address to translate it to a wasm address. This process should be guaranteed to succeed as WebAssembly should only be able to access a well-defined region of memory for all linear memories in a `Store`.\r\n\r\nIf no linear memory in a `Store` could contain the faulting address, then Wasmtime now prints a scary message and aborts the process. The purpose of this is to catch these sorts of bugs, make them very loud errors, and hopefully mitigate impact. This would continue to not mitigate the impact of a guest successfully loading data outside of its sandbox, but if a guest was doing a sort of probing strategy trying to find valid addresses then any invalid access would turn into a process crash which would immediately be noticed by embedders.\r\n\r\nWhile I was here I went ahead and additionally took a stab at #3120. Traps due to `SIGSEGV` will now report the size of linear memory and the address that was being accessed in addition to the bland \"access out of bounds\" error. While this is still somewhat bland in the context of a high level source language it's hopefully at least a little bit more actionable for some. I'll note though that this isn't a guaranteed contextual message since only the default configuration for Wasmtime generates `SIGSEGV` on out-of-bounds memory accesses. Dynamically bounds-checked configurations, for example, don't do this.\r\n\r\nTesting-wise I unfortunately am not aware of a great way to test this. The closet equivalent would be something like an `unsafe` method `Config::allow_wasm_sandbox_escape`. In lieu of adding tests, though, I can confirm that during development the crashing messages works just fine as it took awhile on macOS to figure out where the faulting address was recorded in the exception information which meant I had lots of instances of recording an address of a trap not accessible from wasm.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6028/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6027", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6027/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6027/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6027/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6027", "id": 1626144010, "node_id": "PR_kwDOBhDaXM5MI6GJ", "number": 6027, "title": "Rename `as_bool` to `as_truthy`, and fix TypeSet::as_bool", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-15T19:25:14Z", "updated_at": "2023-03-17T21:59:41Z", "closed_at": "2023-03-17T21:59:40Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6027", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6027", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6027.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6027.patch", "merged_at": "2023-03-17T21:59:40Z"}, "body": "Rename the `as_bool` functions in cranelift-codegen-meta to `as_truthy` to better describe their behavior. Additionally, fix the implementation of `TypeSet::as_truthy` to match the behavior of `Type::as_truthy`, as it was returning an empty `TypeSet` when it should have been mirroring the behavior.\r\n\r\nThis bug was introduced in #5031 when we removed booleans from cranelift.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6027/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6026", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6026/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6026/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6026/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6026", "id": 1625985752, "node_id": "PR_kwDOBhDaXM5MIXb2", "number": 6026, "title": "x64: Take SIGFPE signals for divide traps", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-03-15T17:44:21Z", "updated_at": "2023-05-16T23:33:50Z", "closed_at": "2023-03-16T00:59:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6026", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6026", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6026.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6026.patch", "merged_at": "2023-03-16T00:59:51Z"}, "body": "Prior to this commit Wasmtime would configure `avoid_div_traps=true` unconditionally for Cranelift. This, for the division-based instructions, would change emitted code to explicitly trap on trap conditions instead of letting the `div` x86 instruction trap.\r\n\r\nThere's no specific reason for Wasmtime, however, to specifically avoid traps in the `div` instruction. This means that the extra generated branches on x86 aren't necessary since the `div` and `idiv` instructions already trap for similar conditions as wasm requires.\r\n\r\nThis commit instead disables the `avoid_div_traps` setting for Wasmtime's usage of Cranelift. Subsequently the codegen rules were updated slightly:\r\n\r\n* When `avoid_div_traps=true`, traps are no longer emitted for `div` instructions.\r\n* The `udiv`/`urem` instructions now list their trap as divide-by-zero instead of integer overflow.\r\n* The lowering for `sdiv` was updated to still explicitly check for zero but the integer overflow case is deferred to the instruction itself.\r\n* The lowering of `srem` no longer checks for zero and the listed trap for the `div` instruction is a divide-by-zero.\r\n\r\nThis means that the codegen for `udiv` and `urem` no longer have any branches. The codegen for `sdiv` removes one branch but keeps the zero-check to differentiate the two kinds of traps. The codegen for `srem` removes one branch but keeps the -1 check since the semantics of `srem` mismatch with the semantics of `idiv` with a -1 divisor (specifically for INT_MIN).\r\n\r\nThis is unlikely to have really all that much of a speedup but was something I noticed during #6008 which seemed like it'd be good to clean up. Plus Wasmtime's signal handling was already set up to catch `SIGFPE`, it was just never firing.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6026/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6025", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6025/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6025/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6025/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6025", "id": 1625849370, "node_id": "PR_kwDOBhDaXM5MH54g", "number": 6025, "title": "x64: Improve codegen for splats", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-15T16:21:45Z", "updated_at": "2023-03-15T22:12:29Z", "closed_at": "2023-03-15T22:12:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6025", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6025", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6025.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6025.patch", "merged_at": "2023-03-15T22:12:27Z"}, "body": "This commit goes through the lowerings for the CLIF `splat` instruction and improves the support for each operator. Many of these lowerings are mirrored from v8/SpiderMonkey and there are a number of improvements:\r\n\r\n* AVX2 `v{p,}broadcast*` instructions are added and used when available.\r\n* Float-based splats are much simpler and always a single-instruction\r\n* Integer-based splats don't insert into an uninit xmm value and instead start out with a `movd` to move into an `xmm` register. This thoeretically breaks dependencies with prior instructions since `movd` creates a fresh new value in the destination register.\r\n* Loads are now sunk into all of the instructions. A new extractor, `sinkable_load_exact`, was added to sink the i8/i16 loads.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6025/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6024", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6024/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6024/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6024/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6024", "id": 1625188704, "node_id": "PR_kwDOBhDaXM5MFqij", "number": 6024, "title": "perf: Create a per-process JIT dump file", "user": {"login": "bnjbvr", "id": 1180019, "node_id": "MDQ6VXNlcjExODAwMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1180019?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bnjbvr", "html_url": "https://github.com/bnjbvr", "followers_url": "https://api.github.com/users/bnjbvr/followers", "following_url": "https://api.github.com/users/bnjbvr/following{/other_user}", "gists_url": "https://api.github.com/users/bnjbvr/gists{/gist_id}", "starred_url": "https://api.github.com/users/bnjbvr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bnjbvr/subscriptions", "organizations_url": "https://api.github.com/users/bnjbvr/orgs", "repos_url": "https://api.github.com/users/bnjbvr/repos", "events_url": "https://api.github.com/users/bnjbvr/events{/privacy}", "received_events_url": "https://api.github.com/users/bnjbvr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-15T10:06:19Z", "updated_at": "2023-03-15T14:54:15Z", "closed_at": "2023-03-15T14:43:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6024", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6024", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6024.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6024.patch", "merged_at": "2023-03-15T14:43:37Z"}, "body": "We create a new `JitDumpAgent`  per `wasmtime::Engine,`, and the former creates a new jit dump file in its constructor. Since the jit dump file name has to be unique and must follow the format expected by `perf inject`, the file name is a constant. This causes a bug that multiple `Engine`s creations will clobber the jit dump file. Because of the file name requirement, we can't simply add a counter suffix in the jit dump file name, because then `perf inject` wouldn't find the files anymore.\r\n\r\nInstead, we can use a single, per-process JIT dump file, that's shared across all the `wasmtime::Engine`; this works well in practice, and moves the mutex in `JitDumpAgent` in the outside world.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6024/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6024/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6023", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6023/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6023/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6023/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6023", "id": 1624503167, "node_id": "PR_kwDOBhDaXM5MDXP1", "number": 6023, "title": "x64: Add support for the `pblendw` instruction", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-15T00:25:03Z", "updated_at": "2023-03-28T19:56:18Z", "closed_at": "2023-03-15T18:03:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6023", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6023", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6023.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6023.patch", "merged_at": "2023-03-15T18:03:35Z"}, "body": "This commit adds another case for `shuffle` lowering to the x64 backend for the `{,v}pblendw` instruction. This instruction selects 16-bit values from either of the inputs corresponding to an immediate 8-bit-mask where each bit selects the corresponding lane from the inputs.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6023/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6022", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6022/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6022/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6022/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6022", "id": 1624478645, "node_id": "PR_kwDOBhDaXM5MDSFx", "number": 6022, "title": "x64: Refactor and add extractlane special case for uextend/sextend", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-14T23:58:37Z", "updated_at": "2023-03-17T02:17:36Z", "closed_at": "2023-03-17T02:17:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6022", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6022", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6022.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6022.patch", "merged_at": "2023-03-17T02:17:35Z"}, "body": "This commit refactors the `{s,u}extend` instruction lowerings for the x64 backend to share a bit more code and move heavy lifting to `extend_to_gpr` which is called from a number of other locations as well. Additionally special cases for `pextr{b,w}` are added to this as more special-cases where the zero-extend can be elided due to the automatic zero-extensions of the original instructions.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6022/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6020", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6020/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6020/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6020/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6020", "id": 1624355568, "node_id": "PR_kwDOBhDaXM5MC3v8", "number": 6020, "title": "cranelift: Fix shift overflow when constructing BitSet", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-14T21:56:43Z", "updated_at": "2023-03-14T23:00:17Z", "closed_at": "2023-03-14T23:00:15Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6020", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6020", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6020.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6020.patch", "merged_at": "2023-03-14T23:00:15Z"}, "body": "When constructing the `Wider` constraint for `I128`, avoid initializing the `ints` field of `ValueTypeSet` at all. There are two reasons for this change:\n\n1. The type set will already be empty, as `I128` is the largest integer type we support\n2. `BitSet8::from_range` will panic if the lower bound is `>= 8`, as this would cause the shift it uses to compute the lower bound value to overflow the `u8`.\n\nThe only situation that would produce this problem would be a situation where the constraint was already invalid (like `uextend.i128` of a value that's already an `I128`) so this shouldn't be triggered by any already valid uses of cranelift. Additionally, this shouldn't be triggered by any existing fuzzing, as we're trying not to generate programs that would fail validation.\n\nI discovered this bug while running #5947 locally, which uses the operand constraints to generate instruction instantiations, and as such came up with a bad one for `uextend`.\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6020/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6019", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6019/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6019/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6019/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6019", "id": 1624105376, "node_id": "PR_kwDOBhDaXM5MCB2I", "number": 6019, "title": "craelift: Compact cases in valid_for_target with or-patterns", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-14T18:47:12Z", "updated_at": "2023-03-14T21:28:09Z", "closed_at": "2023-03-14T21:28:09Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6019", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6019", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6019.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6019.patch", "merged_at": "2023-03-14T21:28:09Z"}, "body": "Compact down the cases in `valid_for_target` a bit by using or-patterns. In many cases, this means that we can express the exemptions of a single issue with one entry, rather than spreading them across many entries.\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6019/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6018", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6018/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6018/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6018/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6018", "id": 1623991918, "node_id": "PR_kwDOBhDaXM5MBpFC", "number": 6018, "title": "cranelift: Exclude the control type in narrower and wider", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-14T17:36:18Z", "updated_at": "2023-03-15T15:49:25Z", "closed_at": "2023-03-14T18:43:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6018", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6018", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6018.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6018.patch", "merged_at": "2023-03-14T18:43:38Z"}, "body": "In #6013 we added support for two new constraints in the instruction DSL: `narrower` and `wider`. While these were meant to replace the special-case typechecking in the verifier, they didn't replicate the logic there exactly: both constraints would include the original control type in the sets they produced.\n\nThis PR corrects this bug by excluding the control type in the type sets produced when constraining the control type with `narrower` and `wider`.\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6018/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6018/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6017", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6017/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6017/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6017/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6017", "id": 1623955285, "node_id": "PR_kwDOBhDaXM5MBhHg", "number": 6017, "title": "winch: Introduce `winch-environ`", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-14T17:14:38Z", "updated_at": "2023-03-14T20:44:20Z", "closed_at": "2023-03-14T20:44:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6017", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6017", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6017.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6017.patch", "merged_at": "2023-03-14T20:44:18Z"}, "body": "This commit introduces the `winch-environ` crate. This crate's responsibility is\nto provide a shared implementatation of the `winch_codegen::FuncEnv` trait,\nwhich is Winch's function compilation environment, used to resolve module and\nruntime specific information needed by the code generation, such as resolving\nall the details about a callee in a WebAssembly module, or resolving specific\ninformation from the `VMContext`.\n\nAs of this change, the implementation only includes the necessary pieces to\nresolve a function callee in a WebAssembly module. The idea is to evolve the\n`winch_codegen::FuncEnv` trait as we evolve Winch's code generation.\n\n-------\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6017/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6016", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6016/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6016/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6016/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6016", "id": 1623305758, "node_id": "PR_kwDOBhDaXM5L_UVz", "number": 6016, "title": "cranelift: Translate `stack_*` accesses as unaligned", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-14T11:44:07Z", "updated_at": "2023-03-15T18:39:34Z", "closed_at": "2023-03-15T18:39:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6016", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6016", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6016.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6016.patch", "merged_at": "2023-03-15T18:39:32Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nWe can't currently ensure that these will be aligned, so we shouldn't mark them as such. Once we have alignment specifiers it would be neat to check those and optimize these legalizations if possible.\r\n\r\nSee also the discussion on #5922 we may want to eventually make `stack_{load,store}` accept `MemFlags` directly, or remove the instructions entirely.\r\n\r\nFixes #5922", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6016/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6014", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6014/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6014/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6014/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6014", "id": 1622461003, "node_id": "PR_kwDOBhDaXM5L8fUe", "number": 6014, "title": "cranelift: Mark fpromote and fdemote as operating on float scalars", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-13T23:30:51Z", "updated_at": "2023-03-14T01:29:08Z", "closed_at": "2023-03-14T01:29:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6014", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6014", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6014.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6014.patch", "merged_at": "2023-03-14T01:29:07Z"}, "body": "Mark `fpromote` and `fdemote` as not operating on scalars. This enforces the existing behavior in the backends, as no backend currently supports either of these instructions with vector arguments. Tightening up the argument/result types in the instruction definitions will help with landing #5947, and opting more instructions into fuzzing automatically.\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6014/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6013", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6013/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6013/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6013/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6013", "id": 1622458471, "node_id": "PR_kwDOBhDaXM5L8eyg", "number": 6013, "title": "cranelift: Add narrower and wider constraints to the instruction DSL", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-13T23:26:58Z", "updated_at": "2023-03-14T17:15:27Z", "closed_at": "2023-03-14T17:15:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6013", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6013", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6013.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6013.patch", "merged_at": "2023-03-14T17:15:25Z"}, "body": "In service of merging #5947, add the `narrower` and `wider` constraints to the `TypeVar` type in the instruction DSL.\n\nThese two new constraints capture the situation where an instruction requires that its output be either narrower or wider than one of its input arguments. Instructions that fit one of these two patterns include: `uextend`, `sextend`, `ireduce`, `fpromote`, and `fdemote`. Previously these constraints were validated by special case typechecking behavior in the verifier, and with their addition those special cases can now be removed.\n\nThe benefit to #5947 is that the constraints are now available to the `function_generator` module when determining which arguments to select for random instruction instantiations. This gets us a bit closer to being able to use the generated opcode list as the source of truth for how we generate arbitrary instructions.\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6013/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6010", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6010/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6010/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6010/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6010", "id": 1622252989, "node_id": "PR_kwDOBhDaXM5L7xet", "number": 6010, "title": "wasmtime: Option to return default values for unknown imports", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-13T21:01:15Z", "updated_at": "2023-03-13T23:16:19Z", "closed_at": "2023-03-13T22:21:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6010", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6010", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6010.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6010.patch", "merged_at": "2023-03-13T22:21:06Z"}, "body": "Similar to the `--trap-unknown-imports` option, which defines unknown function imports with functions that trap when called, this new `--default-values-unknown-imports` option defines unknown function imports with a function that returns the default values for the result types (either zero or null depending on the value type).\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6010/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6008", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6008/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6008/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6008/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6008", "id": 1622234111, "node_id": "PR_kwDOBhDaXM5L7tcH", "number": 6008, "title": "x64: Migrate {s,u}{div,rem} to ISLE", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-13T20:46:43Z", "updated_at": "2023-03-14T02:27:31Z", "closed_at": "2023-03-14T02:27:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6008", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6008", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6008.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6008.patch", "merged_at": "2023-03-14T02:27:29Z"}, "body": "This commit migrates most of the logic of the div/rem CLIF instructions to ISLE for the x64 backend. Previously most of the logic was encapsulated between the `emit_div_rem_seq` method and the `CheckedDivOrRemSeq` pseudo-instruction. Nick and I found last week, however, that this poorly interacts with division-by-constants because despite being a constant checks were still emitted to ensure it wasn't a divide-by-zero or similar. To improve this constant case I figured it'd be a good opportunity to move things to ISLE.\r\n\r\nUnfortunately though these instructions couldn't be moved 100% to ISLE. Signed division, for example, needs to access labels/jumps to check for `INT_MIN / -1`. Signed remainder needs to not actually execute `idiv` when the divisor is -1 and instead return 0 as well. This means that while the bulk of the logic now lives in ISLE but a chunk still lives inside the pseudo-instructions in `emit.rs`.\r\n\r\nSpecifically the changes in this PR are:\r\n\r\n* The `CheckedDivOrRemSeq` pseudo-instruction and its helpers were removed.\r\n* The `Div` instruction was split into `Div` and `Div8` since 8-bit division has different regalloc behavior.\r\n* New `ValidateSdivDivisor{,64}` instructions were added. The 64-bit one is different because it needs a temporary register as input.\r\n* New `CheckedSRem{,8}` instructions were added. These assume a check-for-zero has already happened but internally do branching to handle a -1 divisor. The 8-bit version is different due to different regalloc behavior.\r\n* The ISLE for x64 now special-cases div/rem by constants to elide checks if it can.\r\n\r\nOverall despite replacing one pseudo-op with 4 I feel that this is a simplification relative to prior. The majority of the logic now resides in ISLE and the isel optimizations around constants are more obvious and easier to understand. Additionally the fiddly-bits about how idiv/div work on x64 are encoded in ISLE rules too.\r\n\r\nI still think there's room to improve here in the long run. For example Wasmtime currently sets `avoid_div_traps=true` which isn't actually necessary. Most checks can be elided here to defer to signal handling to catch issues for x64. I hope to do this in a follow-up PR later on.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6008/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6008/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6007", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6007/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6007/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6007/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6007", "id": 1622232238, "node_id": "PR_kwDOBhDaXM5L7tBs", "number": 6007, "title": "Allow to disable clocks in WasiCtx", "user": {"login": "RReverser", "id": 557590, "node_id": "MDQ6VXNlcjU1NzU5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/557590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RReverser", "html_url": "https://github.com/RReverser", "followers_url": "https://api.github.com/users/RReverser/followers", "following_url": "https://api.github.com/users/RReverser/following{/other_user}", "gists_url": "https://api.github.com/users/RReverser/gists{/gist_id}", "starred_url": "https://api.github.com/users/RReverser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RReverser/subscriptions", "organizations_url": "https://api.github.com/users/RReverser/orgs", "repos_url": "https://api.github.com/users/RReverser/repos", "events_url": "https://api.github.com/users/RReverser/events{/privacy}", "received_events_url": "https://api.github.com/users/RReverser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-13T20:45:35Z", "updated_at": "2023-03-14T01:17:13Z", "closed_at": "2023-03-14T00:25:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6007", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6007", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6007.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6007.patch", "merged_at": "2023-03-14T00:25:05Z"}, "body": "Takes the approach described in #6004, but also creates a wrapper for the monotonic time that encapsulates the `creation_time` field as well, since they logically belong and are always used together.\n\nThis makes it easier to configure `WasiCtx` with custom clocks as well as disable them for security or determinism reasons.\n\nCloses #6004.\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6007/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6006", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6006/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6006/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6006/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6006", "id": 1622121465, "node_id": "PR_kwDOBhDaXM5L7V-4", "number": 6006, "title": "Reduce VM overhead of pooling spec tests", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-13T19:30:11Z", "updated_at": "2023-03-13T20:55:44Z", "closed_at": "2023-03-13T20:55:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6006", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6006", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6006.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6006.patch", "merged_at": "2023-03-13T20:55:43Z"}, "body": "This commit forces bounds checks to be used when pooling and running the spec tests to ensure that they can be run at a reasonable degree of parallelism. Otherwise currently the VM reservation required for the multi-memory tests is so large that it fails to get reserved at runtime, failing the test.\r\n\r\nCloses #6003\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6006/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6005", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6005/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6005/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6005/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6005", "id": 1621935112, "node_id": "PR_kwDOBhDaXM5L6ukt", "number": 6005, "title": "cranelift-codegen(x64): Expose `CallInfo`", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-13T17:25:31Z", "updated_at": "2023-03-13T18:27:18Z", "closed_at": "2023-03-13T18:27:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/6005", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/6005", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/6005.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/6005.patch", "merged_at": "2023-03-13T18:27:16Z"}, "body": "This commit exposes the `CallInfo` struct, needed by Winch to emit function\r\ncalls.\r\n\r\n(This is the first of a couple of PRs that I have lined up for the initial\r\nsupport of function calls in Winch).\r\n\r\n\r\n-------\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/6005/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5999", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5999/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5999/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5999/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5999", "id": 1620475685, "node_id": "PR_kwDOBhDaXM5L12wj", "number": 5999, "title": "x64: Add `shuffle` specialization for `palignr`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-12T19:05:05Z", "updated_at": "2023-03-13T21:45:49Z", "closed_at": "2023-03-13T21:45:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5999", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5999", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5999.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5999.patch", "merged_at": "2023-03-13T21:45:48Z"}, "body": "This commit adds specializations for the `palignr` instruction to the x64 backend to specialize some more patterns of byte shuffles.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5999/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5998", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5998/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5998/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5998/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5998", "id": 1620415757, "node_id": "PR_kwDOBhDaXM5L1rO1", "number": 5998, "title": "cranelift: Fuzz mid-end optimizations", "user": {"login": "ghostway0", "id": 125699321, "node_id": "U_kgDOB34E-Q", "avatar_url": "https://avatars.githubusercontent.com/u/125699321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghostway0", "html_url": "https://github.com/ghostway0", "followers_url": "https://api.github.com/users/ghostway0/followers", "following_url": "https://api.github.com/users/ghostway0/following{/other_user}", "gists_url": "https://api.github.com/users/ghostway0/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghostway0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghostway0/subscriptions", "organizations_url": "https://api.github.com/users/ghostway0/orgs", "repos_url": "https://api.github.com/users/ghostway0/repos", "events_url": "https://api.github.com/users/ghostway0/events{/privacy}", "received_events_url": "https://api.github.com/users/ghostway0/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-03-12T15:58:30Z", "updated_at": "2023-03-17T03:46:57Z", "closed_at": "2023-03-17T03:46:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5998", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5998", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5998.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5998.patch", "merged_at": "2023-03-17T03:46:57Z"}, "body": "This has been discussed on Zulip as well as in #5967.\r\nThe PR fuzzes and tests after optimization or on the host by demand in the `cranelift-fuzzgen` target.\r\nCloses #5967", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5998/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5997", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5997/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5997/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5997/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5997", "id": 1620206892, "node_id": "PR_kwDOBhDaXM5L1EPc", "number": 5997, "title": "aarch64: Use `VCodeConstant` for f64/v128 constants", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-12T02:10:08Z", "updated_at": "2023-03-13T20:21:33Z", "closed_at": "2023-03-13T20:21:32Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5997", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5997", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5997.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5997.patch", "merged_at": "2023-03-13T20:21:32Z"}, "body": "As was [pointed out recently](https://github.com/bytecodealliance/wasmtime/pull/5976#discussion_r1131926356) one minor improvement to the AArch64 backend is to use the same infrastructure that x64 uses for loading constants which is to pool them at the end of the function instead of having them inline in the body. This commit implements this strategy to ensure that fallback `shuffle` instructions, for example, don't generate a branch instruction to skip over immediates.\r\n\r\nAdditionally in these commits is a refactoring of float/splat lowering in the aarch64 backend. Previously it was all living in Rust but to get to know it I translated it all to ISLE. I felt that the logic was a bit more understandable after the transition and more easily shows off what all the special cases are (the problem is more well-suited for ISLE I think than Rust, nothing against the prior code of course which was perfectly readable).", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5997/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5995", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5995/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5995/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5995/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5995", "id": 1620111799, "node_id": "PR_kwDOBhDaXM5L0yvG", "number": 5995, "title": "Change CLIF `shuffle` to validate lane indices", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-11T19:02:08Z", "updated_at": "2023-03-13T15:04:23Z", "closed_at": "2023-03-13T15:04:21Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5995", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5995", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5995.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5995.patch", "merged_at": "2023-03-13T15:04:21Z"}, "body": "Previously the CLIF `shuffle` instruction did not perform any validation on the lane shuffle mask and specified that out-of-bounds lanes always returned 0 as the value. This behavior though is not required by WebAssembly which validates that lane indices are always in-bounds. Additionally since these are static immediates even other code generators should be able to verify that the immediates are in-bounds.\r\n\r\nAs a result this commit updates the definition of the `shuffle` instruction to specify that all byte immediates must be in-bounds in the range of [0, 32). The verifier has been updated and some test cases have been removed that were testing this functionality.\r\n\r\nCloses #5989\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5995/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5994", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5994/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5994/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5994/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5994", "id": 1620100188, "node_id": "PR_kwDOBhDaXM5L0wtW", "number": 5994, "title": "fuzzgen: Add more arithmetic ops", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-11T18:22:03Z", "updated_at": "2023-03-17T16:03:13Z", "closed_at": "2023-03-17T16:03:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5994", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5994", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5994.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5994.patch", "merged_at": "2023-03-17T16:03:12Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis is part 2 of #5991. In that PR I added some arithmetic ops to the interpreter, in this one we add those to the fuzzer.\r\n\r\nSome notes:\r\n* SIMD `rotl`/`rotr`/`ishl`/`ushr`/`sshr` were affected by #5991 but since the RHS for these ops is scalar, the interpreter is returning the wrong result so I didn't add them here.\r\n* `bnot` is a unary op, but was being inserted as a binary op. We were ignoring the second argument, I've now fixed that in the opcode list.\r\n\r\nThis PR is built on top of #5991, but the only relevant commit is the last one.\r\n\r\nI've been running the fuzzer for about an hour on x86 and AArch64 and it hasn't complained yet, I'll update this if it finds something.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5994/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5991", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5991/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5991/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5991/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5991", "id": 1620026436, "node_id": "PR_kwDOBhDaXM5L0ihK", "number": 5991, "title": "cranelift-interpreter: Implement a bunch of SIMD arithmetic ops", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-11T14:30:59Z", "updated_at": "2023-03-16T22:13:23Z", "closed_at": "2023-03-16T22:13:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5991", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5991", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5991.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5991.patch", "merged_at": "2023-03-16T22:13:22Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThe interpreter can already deal with some opcodes in a polymorphic way, but this wasn't enabled for most binary and unary opcodes. This PR changes that. We get a bunch of opcodes implemented in a relatively easy way.\r\n\r\nPlease review this commit by commit, The first commits are just moving ops that weren't implemented from the main `simd-arithmetic.clif` into their own separate files. So that we could later enable that file for testing in the interpreter.\r\n\r\nWill add fuzzer support in a separate PR.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5991/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5991/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5988", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5988/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5988/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5988/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5988", "id": 1619840180, "node_id": "PR_kwDOBhDaXM5Lz-qg", "number": 5988, "title": "Fix some minor issues with the `explorer` command", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-11T02:11:09Z", "updated_at": "2023-03-12T18:58:54Z", "closed_at": "2023-03-11T03:06:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5988", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5988", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5988.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5988.patch", "merged_at": "2023-03-11T03:06:51Z"}, "body": "This commit fixes a few minor issues that Nick and I ran into walking through some code with the `wasmtime explore` command:\r\n\r\n* When a new function is reached the address map iterator is advanced past the prior function to avoid accidentally attributing instructions across functions.\r\n\r\n* A `<` comparison was changed to `<=` to fix some off-by-one attributions from instructions to wasm instructions.\r\n\r\n* The `skipdata` option is enabled in Capstone to avoid truncating AArch64 disassemblies too early.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5988/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5987", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5987/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5987/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5987/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5987", "id": 1619750012, "node_id": "PR_kwDOBhDaXM5Lzr1i", "number": 5987, "title": "Cranelift: aarch64: fix undefined dest reg in f32x4.splat case.", "user": {"login": "cfallin", "id": 216148, "node_id": "MDQ6VXNlcjIxNjE0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/216148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfallin", "html_url": "https://github.com/cfallin", "followers_url": "https://api.github.com/users/cfallin/followers", "following_url": "https://api.github.com/users/cfallin/following{/other_user}", "gists_url": "https://api.github.com/users/cfallin/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfallin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfallin/subscriptions", "organizations_url": "https://api.github.com/users/cfallin/orgs", "repos_url": "https://api.github.com/users/cfallin/repos", "events_url": "https://api.github.com/users/cfallin/events{/privacy}", "received_events_url": "https://api.github.com/users/cfallin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-10T23:26:30Z", "updated_at": "2023-03-11T01:01:04Z", "closed_at": "2023-03-11T01:01:03Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5987", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5987", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5987.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5987.patch", "merged_at": "2023-03-11T01:01:03Z"}, "body": "One of the cases for a splat operation, as updated in #5370, wrote to a temp reg but then only conditionally transformed the temp into the final destination register. In another codepath, `rd` was left undefined. This causes a panic later when regalloc2 verifies SSA properties of its input (here, value not def'd before use).\r\n\r\nFixes #5985.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5987/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5986", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5986/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5986/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5986/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5986", "id": 1619624040, "node_id": "PR_kwDOBhDaXM5LzRcP", "number": 5986, "title": "x64: Add lea-based lowering for iadd", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-10T21:06:20Z", "updated_at": "2023-03-15T17:52:08Z", "closed_at": "2023-03-15T17:50:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5986", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5986", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5986.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5986.patch", "merged_at": "2023-03-15T17:50:10Z"}, "body": "This commit adds a rule for the lowering of `iadd` to use `lea` for 32\r\nand 64-bit addition. The theoretical benefit of `lea` over the `add`\r\ninstruction is that the `lea` variant can emulate a 3-operand\r\ninstruction which doesn't destructively modify on of its operands.\r\nAdditionally the `lea` operation can fold in other components such as\r\nconstant additions and shifts.\r\n\r\nIn practice, however, if `lea` is unconditionally used instead of `iadd`\r\nit ends up losing 10% performance on a local `meshoptimizer` benchmark.\r\nMy best guess as to what's going on here is that my CPU's dedicated\r\nunits for address computation are all overloaded while the ALUs are\r\nbasically idle in a memory-intensive loop. Previously when the ALU was\r\nused for `add` and the address units for stores/loads it in theory\r\npipelined things better (most of this is me shooting in the dark). To\r\nprevent the performance loss here I've updated the lowering of `iadd` to\r\nconditionally sometimes use `lea` and sometimes use `add` depending on\r\nhow \"complicated\" the `Amode` is. Simple ones like `a + b` or `a + $imm`\r\ncontinue to use `add` (and its subsequent hypothetical extra `mov`\r\nnecessary into the result). More complicated ones like `a + b + $imm` or\r\n`a + b << c + $imm` use `lea` as it can remove the need for extra\r\ninstructions. Locally at least this fixes the performance loss relative\r\nto unconditionally using `lea`.\r\n\r\nOne note is that this adds an `OperandSize` argument to the\r\n`MInst::LoadEffectiveAddress` variant to add an encoding for 32-bit\r\n`lea` in addition to the preexisting 64-bit encoding.\r\n\r\nAdditionally this PR has a prior commit which is a \"no functional changes intended\" update to the `Amode` computation in the x64 backend to rely less on recursion and avoid blowing the stack at compile time for very-long-chains of the `iadd` instruction.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5986/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5984", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5984/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5984/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5984/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5984", "id": 1619553732, "node_id": "PR_kwDOBhDaXM5LzCU3", "number": 5984, "title": "riscv64: Codemotion cleanups to ISLE files", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-10T20:08:07Z", "updated_at": "2023-03-13T20:21:30Z", "closed_at": "2023-03-13T20:21:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5984", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5984", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5984.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5984.patch", "merged_at": "2023-03-13T20:21:28Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThese are the code motion changes that are part of #5854. In the RISCV backend we have a bunch of unrelated rules scattered all over the place. This PR attempts to wrangle some order into some of these, mostly the ones that I noticed when working on #5854.\r\n\r\nThe best way to review this would be commit by commit, they are somewhat logical in what each one does.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5984/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5984/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5983", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5983/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5983/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5983/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5983", "id": 1619541518, "node_id": "PR_kwDOBhDaXM5Ly_uL", "number": 5983, "title": "Update `wasmprinter` and `wasm-mutate` deps", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-10T19:56:55Z", "updated_at": "2023-03-10T21:30:30Z", "closed_at": "2023-03-10T20:55:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5983", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5983", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5983.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5983.patch", "merged_at": "2023-03-10T20:55:44Z"}, "body": "<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5983/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5982", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5982/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5982/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5982/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5982", "id": 1619419435, "node_id": "PR_kwDOBhDaXM5LylwW", "number": 5982, "title": "x64: Improve memory support in `{insert,extract}lane`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-10T18:22:16Z", "updated_at": "2023-03-13T20:21:31Z", "closed_at": "2023-03-13T20:21:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5982", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5982", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5982.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5982.patch", "merged_at": "2023-03-13T20:21:30Z"}, "body": "This commit improves adds support to Cranelift to emit `pextr{b,w,d,q}` with a memory destination, merging a store-of-extract operation into one instruction. Additionally AVX support is added for the `pextr*` instructions.\r\n\r\nI've additionally tried to ensure that codegen tests and runtests exist for all forms of these instructions too.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5982/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5982/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5981", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5981/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5981/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5981/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5981", "id": 1619274073, "node_id": "PR_kwDOBhDaXM5LyGFY", "number": 5981, "title": "s390x: Fix mistake in available_in_isa", "user": {"login": "uweigand", "id": 4154057, "node_id": "MDQ6VXNlcjQxNTQwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4154057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uweigand", "html_url": "https://github.com/uweigand", "followers_url": "https://api.github.com/users/uweigand/followers", "following_url": "https://api.github.com/users/uweigand/following{/other_user}", "gists_url": "https://api.github.com/users/uweigand/gists{/gist_id}", "starred_url": "https://api.github.com/users/uweigand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uweigand/subscriptions", "organizations_url": "https://api.github.com/users/uweigand/orgs", "repos_url": "https://api.github.com/users/uweigand/repos", "events_url": "https://api.github.com/users/uweigand/events{/privacy}", "received_events_url": "https://api.github.com/users/uweigand/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-10T16:42:56Z", "updated_at": "2023-03-10T20:21:48Z", "closed_at": "2023-03-10T20:21:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5981", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5981", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5981.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5981.patch", "merged_at": "2023-03-10T20:21:47Z"}, "body": "The 32-bit float<->int conversion instructions are part of the VXRS_EXT2 facility, not MIE2.\r\n\r\nFixes https://github.com/bytecodealliance/wasmtime/issues/5979.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5981/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5981/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5980", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5980/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5980/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5980/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5980", "id": 1619255594, "node_id": "PR_kwDOBhDaXM5LyB4p", "number": 5980, "title": "Add a `--dynamic-memory-reserved-for-growth` CLI flag", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-10T16:35:21Z", "updated_at": "2023-03-10T18:43:37Z", "closed_at": "2023-03-10T18:43:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5980", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5980", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5980.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5980.patch", "merged_at": "2023-03-10T18:43:36Z"}, "body": "Maps to the corresponding `wasmtime::Config` option. The motivation here is largely completeness and was something I was looking into with the failures in #5970\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5980/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5980/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5978", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5978/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5978/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5978/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5978", "id": 1619004573, "node_id": "PR_kwDOBhDaXM5LxMQg", "number": 5978, "title": "cranelift-entity: more efficient `EntitySet` implementation", "user": {"login": "maekawatoshiki", "id": 9913176, "node_id": "MDQ6VXNlcjk5MTMxNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/9913176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maekawatoshiki", "html_url": "https://github.com/maekawatoshiki", "followers_url": "https://api.github.com/users/maekawatoshiki/followers", "following_url": "https://api.github.com/users/maekawatoshiki/following{/other_user}", "gists_url": "https://api.github.com/users/maekawatoshiki/gists{/gist_id}", "starred_url": "https://api.github.com/users/maekawatoshiki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maekawatoshiki/subscriptions", "organizations_url": "https://api.github.com/users/maekawatoshiki/orgs", "repos_url": "https://api.github.com/users/maekawatoshiki/repos", "events_url": "https://api.github.com/users/maekawatoshiki/events{/privacy}", "received_events_url": "https://api.github.com/users/maekawatoshiki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-10T13:45:44Z", "updated_at": "2023-03-15T06:12:33Z", "closed_at": "2023-03-13T19:22:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5978", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5978", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5978.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5978.patch", "merged_at": "2023-03-13T19:22:27Z"}, "body": "As discussed on https://github.com/bytecodealliance/wasmtime/issues/5804, this PR replaces `u8` elements in `EntitySet` with `usize` elements.\r\n\r\nI didn't add doc-tests. If I did so, I needed to add a piece of code like below to doc-tests for every method, which looks redundant to me. I think there's no need to remove the existing tests.\r\nLet me know if something in my opinion is wrong.\r\n\r\n```rust\r\n// `EntityRef` impl for testing.\r\n#[derive(Clone, Copy, Debug, PartialEq, Eq, PartialOrd, Ord)]\r\nstruct E(u32);\r\n\r\nimpl EntityRef for E {\r\n    fn new(i: usize) -> Self {\r\n        E(i as u32)\r\n    }\r\n    fn index(self) -> usize {\r\n        self.0 as usize\r\n    }\r\n}\r\n\r\nlet mut m = EntitySet::new();\r\n...\r\n```\r\n\r\n------\r\n\r\nI realized that, in `wasmtime/cranelift/entity`, `cargo test` fails on some tests below.\r\n\r\n```\r\nrunning 52 tests\r\n...omitted...\r\n\r\nfailures:\r\n\r\n---- tests::basic_entity::cannot_construct_from_reserved_u32 stdout ----\r\nnote: test did not panic as expected\r\n---- tests::basic_entity::cannot_construct_from_reserved_usize stdout ----\r\nnote: test did not panic as expected\r\n---- tests::other_entity::cannot_construct_from_reserved_u32 stdout ----\r\nnote: test did not panic as expected\r\n---- tests::other_entity::cannot_construct_from_reserved_usize stdout ----\r\nnote: test did not panic as expected\r\n---- tests::prefix_entity::cannot_construct_from_reserved_u32 stdout ----\r\nnote: test did not panic as expected\r\n---- tests::prefix_entity::cannot_construct_from_reserved_usize stdout ----\r\nnote: test did not panic as expected\r\n\r\nfailures:\r\n    tests::basic_entity::cannot_construct_from_reserved_u32\r\n    tests::basic_entity::cannot_construct_from_reserved_usize\r\n    tests::other_entity::cannot_construct_from_reserved_u32\r\n    tests::other_entity::cannot_construct_from_reserved_usize\r\n    tests::prefix_entity::cannot_construct_from_reserved_u32\r\n    tests::prefix_entity::cannot_construct_from_reserved_usize\r\n\r\ntest result: FAILED. 46 passed; 6 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\r\n```\r\n\r\nIs this an expected behavior?", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5978/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5977", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5977/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5977/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5977/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5977", "id": 1618300197, "node_id": "PR_kwDOBhDaXM5Lu2Z7", "number": 5977, "title": "aarch64: Add specialized `shuffle` lowerings", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-10T03:28:20Z", "updated_at": "2023-03-10T22:19:09Z", "closed_at": "2023-03-10T22:19:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5977", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5977", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5977.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5977.patch", "merged_at": "2023-03-10T22:19:08Z"}, "body": "This is the equivalent of https://github.com/bytecodealliance/wasmtime/pull/5930 but for AArch64. I went through various instructions I saw for AArch64 and added corresponding `shuffle` lowerings where appropriate. These lowerings cover all the lowerings I found in the meshoptimizer repository plus a few more based on various instructions I found while perusing ARM's documentation. Like with x86_64 I've tried to make sure there's a runtest and a precise-output test for each lowering, even if some of them probably overlap with the x86_64 runtests.\r\n\r\nI'll note that many of these lowerings probably won't end up getting used by \"portable\" wasm binaries since some of the shifts here are pretty specific to AArch64 and don't have efficient 1/2 instruction lowerings on x86_64. That being said these are useful to any sort of hypothetical Cranelift-as-an-AArch64-backend-compiler such as rustc_cranelift_codegen since this broadens the spectrum of instructions supported by Cranelift's AArch64 backend.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5977/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5976", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5976/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5976/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5976/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5976", "id": 1618297591, "node_id": "PR_kwDOBhDaXM5Lu12p", "number": 5976, "title": "aarch64: Specialize constant vector shifts", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-10T03:24:03Z", "updated_at": "2023-03-13T23:16:37Z", "closed_at": "2023-03-13T23:16:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5976", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5976", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5976.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5976.patch", "merged_at": "2023-03-13T23:16:35Z"}, "body": "This commit adds special lowering rules for\r\nvector-shifts-by-constant-amounts to use dedicated instructions which cuts down on the codegen here quite a bit for constant values.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5976/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5975", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5975/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5975/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5975/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5975", "id": 1618220061, "node_id": "PR_kwDOBhDaXM5Lul52", "number": 5975, "title": "Introduce the `wasmtime-explorer` crate", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-10T01:28:43Z", "updated_at": "2023-03-11T01:12:56Z", "closed_at": "2023-03-11T01:12:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5975", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5975", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5975.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5975.patch", "merged_at": "2023-03-11T01:12:55Z"}, "body": "This implements Godbolt Compiler Explorer-like functionality for Wasmtime and Cranelift. Given a Wasm module, it compiles the module to native code and then writes a standalone HTML file that gives a split pane view between the WAT and ASM disassemblies.\r\n\r\nTHIS IS VERY MUCH AN MVP!!! Tons of stuff we could do with this, very little it actually does so far.\r\n\r\nUsage:\r\n\r\n```\r\n$ wasmtime explore test.wasm -o test.explore.html\r\n$ xdg-open test.explore.html\r\n```\r\n\r\nOnce visiting the HTML page, you can hover over lines of WAT or asm and the corresponding lines will be highlighted. You can also click to scroll the corresponding line into view.\r\n\r\nHere is a little screen recording, although the mouse itself isn't captured so it is a little hard to see what is going on:\r\n\r\n[Screencast from 2023-03-09 17-22-06.webm](https://user-images.githubusercontent.com/74571/224199689-6980f0f6-e4bc-4d86-95a3-d536dcc71785.webm)\r\n\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5975/reactions", "total_count": 9, "+1": 0, "-1": 0, "laugh": 0, "hooray": 2, "confused": 0, "heart": 7, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5975/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5973", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5973/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5973/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5973/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5973", "id": 1617712062, "node_id": "PR_kwDOBhDaXM5Ls31F", "number": 5973, "title": "wasmtime: Privately expose a module's address map and its functions' bytes", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-09T17:48:20Z", "updated_at": "2023-03-09T20:39:12Z", "closed_at": "2023-03-09T20:39:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5973", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5973", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5973.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5973.patch", "merged_at": "2023-03-09T20:39:10Z"}, "body": "This will allow us to build developer tools for Wasmtime and Cranelift like WAT and asm side-by-side viewers (a la Godbolt).\r\n\r\nThese are not proper public APIs, so they are marked `doc(hidden)` and have comments saying they are only for use within this repo's workspace.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5973/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5972", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5972/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5972/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5972/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5972", "id": 1617640951, "node_id": "PR_kwDOBhDaXM5LsokI", "number": 5972, "title": "Cranelift: x64, aarch64, s390x, riscv64: ensure addresses are I64s.", "user": {"login": "cfallin", "id": 216148, "node_id": "MDQ6VXNlcjIxNjE0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/216148?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfallin", "html_url": "https://github.com/cfallin", "followers_url": "https://api.github.com/users/cfallin/followers", "following_url": "https://api.github.com/users/cfallin/following{/other_user}", "gists_url": "https://api.github.com/users/cfallin/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfallin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfallin/subscriptions", "organizations_url": "https://api.github.com/users/cfallin/orgs", "repos_url": "https://api.github.com/users/cfallin/repos", "events_url": "https://api.github.com/users/cfallin/events{/privacy}", "received_events_url": "https://api.github.com/users/cfallin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-09T17:03:52Z", "updated_at": "2023-03-09T19:46:46Z", "closed_at": "2023-03-09T19:46:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5972", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5972", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5972.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5972.patch", "merged_at": "2023-03-09T19:46:44Z"}, "body": "@avanhatt has been looking at our address-mode lowering and found an example where when feeding an `I32`-typed address into a load or store, we can violate assumptions and get incorrect codegen.\r\n\r\nThis should never be reachable in practice, because all producers on 64-bit architectures use 64-bit types for addresses. However, our IR is insufficiently constrained, and allows loads/stores to `I32` addresses as well. This is nonsensical on a 64-bit architecture.\r\n\r\nInitially I had thought we should tighten either the instruction definition's accepted types, or the CLIF verifier, to reject this. However both are target-independent, and we don't want to bake an assumption of 64-bit-ness into the compiler core. Instead this PR tightens specific backends' lowerings to rejecct loads/stores of `I32`-typed addresses.\r\n\r\naarch64 still has `lower_address` in Rust and no clear single place to put an LHS constraint, so I opted for an assert in the external ctor. riscv64 has no single point where we have a `Value` and produce an address (`gen_load` takes a `Reg`) so all load/store lowerings get the constraint.\r\n\r\ntl;dr: no security implications as all producers use I64-typed addresses (and must, for correct operation); but we currently accept I32-typed addresses too, and this breaks other assumptions.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5972/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5971", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5971/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5971/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5971/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5971", "id": 1617579928, "node_id": "PR_kwDOBhDaXM5LsbPt", "number": 5971, "title": "fuzzgen: Add SIMD instructions supported by the interpreter", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-09T16:30:02Z", "updated_at": "2023-03-11T12:58:31Z", "closed_at": "2023-03-11T12:58:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5971", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5971", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5971.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5971.patch", "merged_at": "2023-03-11T12:58:29Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis PR adds all SIMD instructions currently supported by the interpreter to the fuzzer. There is a surprising amount of missing coverage even with all of these ones (i.e. lots of work to do in the interpreter)!\r\n\r\nI've also had to disable aligned loads/stores for > 8 bytes. It's really hard to do this without support from cranelift, and I think its probably best to go add support for that before re-enabling it here.\r\n\r\nI gave this a bunch of fuzzing time, and it has stopped crashing on all arches. S390X was a little bit harder since I was only able to test it on QEMU and its quite a bit slower than native hardware though it ran about 12hours on 8 cores without crashing, so \u00af\\\\\\_(\u30c4)\\_\\/\u00af. \r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5971/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5970", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5970/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5970/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5970/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5970", "id": 1617527549, "node_id": "PR_kwDOBhDaXM5LsP3t", "number": 5970, "title": "Update the spec test suite submodule", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-09T15:59:34Z", "updated_at": "2023-03-10T17:30:08Z", "closed_at": "2023-03-10T17:30:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5970", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5970", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5970.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5970.patch", "merged_at": "2023-03-10T17:30:06Z"}, "body": "Delete the local copies of the relaxed-simd test suite as well as they're now incorporated.\r\n\r\nCloses #5914\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5970/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5969", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5969/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5969/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5969/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5969", "id": 1616259895, "node_id": "PR_kwDOBhDaXM5Ln4zz", "number": 5969, "title": "cranelift-meta: Don't let-bind operand definitions", "user": {"login": "jameysharp", "id": 865272, "node_id": "MDQ6VXNlcjg2NTI3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/865272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jameysharp", "html_url": "https://github.com/jameysharp", "followers_url": "https://api.github.com/users/jameysharp/followers", "following_url": "https://api.github.com/users/jameysharp/following{/other_user}", "gists_url": "https://api.github.com/users/jameysharp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jameysharp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jameysharp/subscriptions", "organizations_url": "https://api.github.com/users/jameysharp/orgs", "repos_url": "https://api.github.com/users/jameysharp/repos", "events_url": "https://api.github.com/users/jameysharp/events{/privacy}", "received_events_url": "https://api.github.com/users/jameysharp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-09T01:51:49Z", "updated_at": "2023-03-09T18:30:02Z", "closed_at": "2023-03-09T18:30:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5969", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5969", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5969.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5969.patch", "merged_at": "2023-03-09T18:30:00Z"}, "body": "We've adopted this pattern in Cranelift's instruction definitions where we let-bind some calls to `Operand::new` and then later use them in one or more calls to `Inst::new`.\r\n\r\nThat pattern has two problems:\r\n- It puts the type of each operand somewhere potentially far removed from the instruction in which it's used.\r\n- We let-bind the same name for many different operands, compounding the first problem by making it harder to find _which_ definition is used.\r\n\r\nSo instead this commit removes all let-bindings for operand definitions and constructs a new `Operand` every time.\r\n\r\nConstructing an `Operand` at every use means we duplicate some documentation strings, but not all that many of them as it turns out.\r\n\r\nI've left the let-bound type-sets alone, so those are currently still shared across many instructions. They have some of the same problems and should be reviewed as well.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5969/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5968", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5968/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5968/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5968/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5968", "id": 1616049941, "node_id": "PR_kwDOBhDaXM5LnKks", "number": 5968, "title": "components: Fix bindgen! with renamed interfaces", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-08T22:32:51Z", "updated_at": "2023-03-08T23:50:04Z", "closed_at": "2023-03-08T23:50:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5968", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5968", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5968.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5968.patch", "merged_at": "2023-03-08T23:50:02Z"}, "body": "This follows the same strategy pioneered by the `wit-bindgen` guest Rust bindgen which keeps track of the latest name of an interface for how to refer to an interface.\r\n\r\nCloses #5961\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5968/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5966", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5966/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5966/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5966/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5966", "id": 1615456951, "node_id": "PR_kwDOBhDaXM5LlL6H", "number": 5966, "title": "Add `Clone for component::InstancePre`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-08T15:22:57Z", "updated_at": "2023-03-08T17:55:50Z", "closed_at": "2023-03-08T17:55:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5966", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5966", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5966.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5966.patch", "merged_at": "2023-03-08T17:55:48Z"}, "body": "This is present on `wasmtime::InstancePre` and should be available for components as well.\r\n\r\nCloses #5965\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5966/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5966/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5964", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5964/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5964/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5964/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5964", "id": 1614722866, "node_id": "PR_kwDOBhDaXM5Liunc", "number": 5964, "title": "Codegen fix `fcvt_from_sint.f32 ` with small types on riscv64.", "user": {"login": "yuyang-ok", "id": 96557710, "node_id": "U_kgDOBcFajg", "avatar_url": "https://avatars.githubusercontent.com/u/96557710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuyang-ok", "html_url": "https://github.com/yuyang-ok", "followers_url": "https://api.github.com/users/yuyang-ok/followers", "following_url": "https://api.github.com/users/yuyang-ok/following{/other_user}", "gists_url": "https://api.github.com/users/yuyang-ok/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuyang-ok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuyang-ok/subscriptions", "organizations_url": "https://api.github.com/users/yuyang-ok/orgs", "repos_url": "https://api.github.com/users/yuyang-ok/repos", "events_url": "https://api.github.com/users/yuyang-ok/events{/privacy}", "received_events_url": "https://api.github.com/users/yuyang-ok/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-08T06:21:37Z", "updated_at": "2023-03-10T11:08:49Z", "closed_at": "2023-03-10T11:08:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5964", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5964", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5964.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5964.patch", "merged_at": "2023-03-10T11:08:48Z"}, "body": "This will fix #5952.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5964/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5963", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5963/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5963/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5963/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5963", "id": 1614662562, "node_id": "PR_kwDOBhDaXM5LiiaK", "number": 5963, "title": "Add release notes for 7.0.0", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-08T05:05:19Z", "updated_at": "2023-03-08T22:00:14Z", "closed_at": "2023-03-08T22:00:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5963", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5963", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5963.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5963.patch", "merged_at": "2023-03-08T22:00:13Z"}, "body": "<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5963/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5960", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5960/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5960/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5960/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5960", "id": 1614380235, "node_id": "PR_kwDOBhDaXM5LhmwO", "number": 5960, "title": "Fix the original block for block params in egraphs", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-07T23:36:12Z", "updated_at": "2023-03-08T00:35:50Z", "closed_at": "2023-03-08T00:35:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5960", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5960", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5960.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5960.patch", "merged_at": "2023-03-08T00:35:48Z"}, "body": "This fixes an issue where block params were always listed as being members of the current block in egraphs, even when the block param was actually defined in a separate block. This then enables instructions which depend on these parameters to get hoisted up out of inner loops at least to the block that defined the argument.\r\n\r\nCloses #5957\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5960/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5959", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5959/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5959/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5959/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5959", "id": 1614354077, "node_id": "PR_kwDOBhDaXM5LhhBe", "number": 5959, "title": "Update cargo-vet imports", "user": {"login": "bholley", "id": 377435, "node_id": "MDQ6VXNlcjM3NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/377435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bholley", "html_url": "https://github.com/bholley", "followers_url": "https://api.github.com/users/bholley/followers", "following_url": "https://api.github.com/users/bholley/following{/other_user}", "gists_url": "https://api.github.com/users/bholley/gists{/gist_id}", "starred_url": "https://api.github.com/users/bholley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bholley/subscriptions", "organizations_url": "https://api.github.com/users/bholley/orgs", "repos_url": "https://api.github.com/users/bholley/repos", "events_url": "https://api.github.com/users/bholley/events{/privacy}", "received_events_url": "https://api.github.com/users/bholley/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-07T23:09:54Z", "updated_at": "2023-03-08T01:02:01Z", "closed_at": "2023-03-08T01:01:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5959", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5959", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5959.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5959.patch", "merged_at": "2023-03-08T01:01:59Z"}, "body": "This PR switches the Mozilla import from Firefox-only to the full aggregated set, and adds Embark Studios, ChromeOS, and ISRG (the same imports Mozilla currently uses). Each of these allows us to remove some exemptions.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5959/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5958", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5958/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5958/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5958/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5958", "id": 1614347317, "node_id": "PR_kwDOBhDaXM5Lhfi7", "number": 5958, "title": "Fix typo in `Config::generate_address_map` docs", "user": {"login": "fitzgen", "id": 74571, "node_id": "MDQ6VXNlcjc0NTcx", "avatar_url": "https://avatars.githubusercontent.com/u/74571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fitzgen", "html_url": "https://github.com/fitzgen", "followers_url": "https://api.github.com/users/fitzgen/followers", "following_url": "https://api.github.com/users/fitzgen/following{/other_user}", "gists_url": "https://api.github.com/users/fitzgen/gists{/gist_id}", "starred_url": "https://api.github.com/users/fitzgen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fitzgen/subscriptions", "organizations_url": "https://api.github.com/users/fitzgen/orgs", "repos_url": "https://api.github.com/users/fitzgen/repos", "events_url": "https://api.github.com/users/fitzgen/events{/privacy}", "received_events_url": "https://api.github.com/users/fitzgen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-07T23:03:36Z", "updated_at": "2023-03-08T00:02:25Z", "closed_at": "2023-03-08T00:02:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5958", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5958", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5958.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5958.patch", "merged_at": "2023-03-08T00:02:24Z"}, "body": "<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5958/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5956", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5956/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5956/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5956/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5956", "id": 1614225562, "node_id": "PR_kwDOBhDaXM5LhFly", "number": 5956, "title": "Restrict fcvt_to_uint and fcvt_to_sint to produce scalar integers", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-07T21:19:20Z", "updated_at": "2023-03-08T05:35:57Z", "closed_at": "2023-03-08T05:35:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5956", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5956", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5956.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5956.patch", "merged_at": "2023-03-08T05:35:55Z"}, "body": "The `fcvt_to_uint` and `fcvt_to_sint` operations both lack lowerings that would produce vectors on all backends. This PR tightens up the result type of both instructions to no longer permit vector results.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5956/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5955", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5955/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5955/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5955/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5955", "id": 1614055610, "node_id": "PR_kwDOBhDaXM5Lggpf", "number": 5955, "title": "Run `cargo vet` on PRs that modify `supply-chain`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-07T19:19:07Z", "updated_at": "2023-03-07T20:16:48Z", "closed_at": "2023-03-07T20:16:46Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5955", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5955", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5955.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5955.patch", "merged_at": "2023-03-07T20:16:46Z"}, "body": "Noted in #5954 this'll report `cargo vet` status checks on PRs that modify the `supply-chain` directory in addition to `Cargo.lock` modifications that already happen.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5955/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5954", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5954/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5954/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5954/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5954", "id": 1613946097, "node_id": "PR_kwDOBhDaXM5LgJFF", "number": 5954, "title": "Bump cargo-vet to 0.4.0", "user": {"login": "bholley", "id": 377435, "node_id": "MDQ6VXNlcjM3NzQzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/377435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bholley", "html_url": "https://github.com/bholley", "followers_url": "https://api.github.com/users/bholley/followers", "following_url": "https://api.github.com/users/bholley/following{/other_user}", "gists_url": "https://api.github.com/users/bholley/gists{/gist_id}", "starred_url": "https://api.github.com/users/bholley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bholley/subscriptions", "organizations_url": "https://api.github.com/users/bholley/orgs", "repos_url": "https://api.github.com/users/bholley/repos", "events_url": "https://api.github.com/users/bholley/events{/privacy}", "received_events_url": "https://api.github.com/users/bholley/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-07T17:58:17Z", "updated_at": "2023-03-07T19:59:08Z", "closed_at": "2023-03-07T19:59:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5954", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5954", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5954.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5954.patch", "merged_at": "2023-03-07T19:59:07Z"}, "body": "This PR bumps cargo-vet to the new release and runs the newly-available `cargo vet prune`, which shrinks imports and exemptions to the minimal set.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5954/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5953", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5953/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5953/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5953/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5953", "id": 1613936507, "node_id": "PR_kwDOBhDaXM5LgG92", "number": 5953, "title": "Restrict uextend and sextend to scalar integers", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-07T17:51:47Z", "updated_at": "2023-03-07T19:51:40Z", "closed_at": "2023-03-07T19:51:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5953", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5953", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5953.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5953.patch", "merged_at": "2023-03-07T19:51:38Z"}, "body": "The `uextend` and `sextend` operations had types in the instruction dsl that suggested they could produce vectors from scalars, while no backends could support this behavior. This PR tightens the result type constraints for both instructions to only produce scalar integers, and further restricts the types matched in the s390x backend to avoid any ambiguity.\n\ncc @uweigand\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5953/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5953/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5951", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5951/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5951/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5951/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5951", "id": 1613347382, "node_id": "PR_kwDOBhDaXM5LeF3-", "number": 5951, "title": "riscv64: Fix underflow in call relocation handling", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2023-03-07T12:31:27Z", "updated_at": "2023-03-10T12:28:44Z", "closed_at": "2023-03-10T12:28:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5951", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5951", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5951.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5951.patch", "merged_at": "2023-03-10T12:28:42Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nUnder some test case layouts the call relocation was panicking with an underflow. Use `wrapping_sub` to signal that this is expected.\r\n\r\nThe fuzzer took a while to generate such a test case. And I can't introduce it as a regression test because when running via the regular clif-util run tests the layout is different and the test case passes!\r\n\r\nI think this is because in the fuzzer we only add one trampoline, while in clif-util we build trampolines for each function in the file.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5951/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5948", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5948/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5948/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5948/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5948", "id": 1612534665, "node_id": "PR_kwDOBhDaXM5LbXeA", "number": 5948, "title": "Stop supporting vectors with `bmask`", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-07T01:36:21Z", "updated_at": "2023-03-07T18:14:32Z", "closed_at": "2023-03-07T18:14:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5948", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5948", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5948.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5948.patch", "merged_at": "2023-03-07T18:14:31Z"}, "body": "The `bmask` instruction does not have a lowering in any backend that will produce a vector result, but the opcode constraints indicate that it is possible to produce a vector. Any attempt to produce a vector with `bmask` currently yields a panic, so this PR avoids that by rejecting these cases in the verifier instead.\r\n\r\nAdditionally, it's possible to produce a vector of comparison results whose lanes will be all `1` or `0` using either `icmp` or `fcmp`, rendering this possible behavior of `bmask` redundant. @jameysharp also points out that we can use a combination of `bmask` and `splat` to get similar behavior as well, so there are many ways to work around `bmask` not supporting vector results.\r\n\r\nCo-authored-by: Jamey Sharp <jsharp@fastly.com>\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5948/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5946", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5946/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5946/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5946/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5946", "id": 1612428759, "node_id": "PR_kwDOBhDaXM5LbA6t", "number": 5946, "title": "cargo vet: add audits for criterion upgrade, and its transitive deps", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T23:59:34Z", "updated_at": "2023-03-07T00:55:17Z", "closed_at": "2023-03-07T00:55:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5946", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5946", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5946.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5946.patch", "merged_at": "2023-03-07T00:55:15Z"}, "body": "Required for https://github.com/bytecodealliance/wasmtime/pull/5935\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5946/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5945", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5945/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5945/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5945/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5945", "id": 1612365324, "node_id": "PR_kwDOBhDaXM5Lay-p", "number": 5945, "title": "Update wasm-tools crates", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T23:02:49Z", "updated_at": "2023-03-07T00:28:25Z", "closed_at": "2023-03-07T00:28:24Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5945", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5945", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5945.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5945.patch", "merged_at": "2023-03-07T00:28:23Z"}, "body": "This notably updates `wasmparser` for updates to the relaxed-simd proposal and an implementation of the function-references proposal. Additionally there are some minor bug fixes being picked up for WIT and the component model.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5945/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5945/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5944", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5944/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5944/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5944/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5944", "id": 1612161325, "node_id": "PR_kwDOBhDaXM5LaHLa", "number": 5944, "title": "winch: Refactoring wasmtime compiler integration pieces to share more between Cranelift and Winch", "user": {"login": "KevinRizzoTO", "id": 32458485, "node_id": "MDQ6VXNlcjMyNDU4NDg1", "avatar_url": "https://avatars.githubusercontent.com/u/32458485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KevinRizzoTO", "html_url": "https://github.com/KevinRizzoTO", "followers_url": "https://api.github.com/users/KevinRizzoTO/followers", "following_url": "https://api.github.com/users/KevinRizzoTO/following{/other_user}", "gists_url": "https://api.github.com/users/KevinRizzoTO/gists{/gist_id}", "starred_url": "https://api.github.com/users/KevinRizzoTO/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KevinRizzoTO/subscriptions", "organizations_url": "https://api.github.com/users/KevinRizzoTO/orgs", "repos_url": "https://api.github.com/users/KevinRizzoTO/repos", "events_url": "https://api.github.com/users/KevinRizzoTO/events{/privacy}", "received_events_url": "https://api.github.com/users/KevinRizzoTO/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3832704028, "node_id": "LA_kwDOBhDaXM7kcmwc", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:config", "name": "wasmtime:config", "color": "006b75", "default": false, "description": "Issues related to the configuration of Wasmtime"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-06T20:32:50Z", "updated_at": "2023-03-08T15:51:09Z", "closed_at": "2023-03-08T15:51:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5944", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5944", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5944.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5944.patch", "merged_at": "2023-03-08T15:51:08Z"}, "body": "<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n\r\nAs discussed with @saulecabrera and @alexcrichton, this PR adds in some refactors that will make the initial Winch integration with `wasmtime` smoother. At a high level:\r\n\r\n- move shared code into the new `wasmtime-cranelift-shared` crate, which will provide a temporary location to put shared code between Winch and Cranelift while we see what patterns need to be abtracted\r\n- combine some Isa operations under a shared `IsaBuilder` trait\r\n- have the `enable_incremental_compilation` method on the `wasmtime_environ::CompilerBuilder` trait return a `Result` so the implementation can decide if it's supported or not\r\n\r\nBig thanks to @alexcrichton for helping out here! I ended up using a lot of his first pass (compared to my much messier version \ud83d\ude1b).\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5944/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5943", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5943/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5943/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5943/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5943", "id": 1612118821, "node_id": "PR_kwDOBhDaXM5LZ-AX", "number": 5943, "title": "components: Assert sizes match `wit-parser` sizes", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T20:02:41Z", "updated_at": "2023-03-08T22:16:50Z", "closed_at": "2023-03-08T22:16:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5943", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5943", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5943.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5943.patch", "merged_at": "2023-03-08T22:16:48Z"}, "body": "I was debugging [an issue] recently where it appears that the underlying cause was a discrepancy in the size/align of a WIT type between Wasmtime and `wit-parser`. This commit adds compile-time assertions that the size of a WIT type is the same with `wit-parser` as it is in Wasmtime since the two have different systems to calculate the size of a type. The hope is that this will head off any future issues if they crop up.\r\n\r\n[an issue]: https://github.com/bytecodealliance/wit-bindgen/issues/526\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5943/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5942", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5942/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5942/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5942/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5942", "id": 1612049390, "node_id": "PR_kwDOBhDaXM5LZvKK", "number": 5942, "title": "Determine the instruction generation strategy based on format", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T19:09:19Z", "updated_at": "2023-03-06T20:34:32Z", "closed_at": "2023-03-06T20:34:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5942", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5942", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5942.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5942.patch", "merged_at": "2023-03-06T20:34:30Z"}, "body": "Determine the instruction generation strategy in the fuzzer by matching on the instruction format. This will help simplify the generation of the `OPCODE_SIGNATURES` table from the shared instruction format definition, rather than maintaining it by hand.\n\n<!--\n\nPlease ensure that the following steps are all taken care of before submitting\nthe PR.\n\n- [ ] This has been discussed in issue #..., or if not, please tell us why\n  here.\n- [ ] A short description of what this does, why it is needed; if the\n  description becomes long, the matter should probably be discussed in an issue\n  first.\n- [ ] This PR contains test cases, if meaningful.\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\n  If you don't know who could review this, please indicate so. The list of\n  suggested reviewers on the right can help you.\n\nPlease ensure all communication adheres to the [code of\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5942/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5941", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5941/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5941/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5941/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5941", "id": 1611917178, "node_id": "PR_kwDOBhDaXM5LZSYP", "number": 5941, "title": "cranelift: Make `sqmul_round_sat` vector only", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T17:40:50Z", "updated_at": "2023-03-06T19:03:15Z", "closed_at": "2023-03-06T19:03:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5941", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5941", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5941.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5941.patch", "merged_at": "2023-03-06T19:03:13Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nAs discussed in #5923, this instruction wasn't enabled for scalar types despite the documentation stating as such. Lets update the docs to reflect the current state of things.\r\n\r\nFixes: #5923 ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5941/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5941/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5940", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5940/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5940/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5940/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5940", "id": 1611737221, "node_id": "PR_kwDOBhDaXM5LYrQc", "number": 5940, "title": "Update security release documentation slightly", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-06T16:01:56Z", "updated_at": "2023-03-28T19:56:55Z", "closed_at": "2023-03-06T17:54:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5940", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5940", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5940.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5940.patch", "merged_at": "2023-03-06T17:54:36Z"}, "body": "This modernizes our process doc a bit with what I've been doing for the last security release and the upcoming one as well.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5940/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5940/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5939", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5939/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5939/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5939/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5939", "id": 1611701261, "node_id": "PR_kwDOBhDaXM5LYjRg", "number": 5939, "title": "Release Wasmtime 6.0.1", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-06T15:47:43Z", "updated_at": "2023-03-08T19:03:54Z", "closed_at": "2023-03-08T19:03:53Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5939", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5939", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5939.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5939.patch", "merged_at": "2023-03-08T19:03:53Z"}, "body": "This is an [automated pull request][process] from CI to create a patch\nrelease for Wasmtime 6.0.1, requested by @alexcrichton.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5939/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5938", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5938/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5938/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5938/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5938", "id": 1611700932, "node_id": "PR_kwDOBhDaXM5LYjNB", "number": 5938, "title": "Release Wasmtime 4.0.1", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-06T15:47:34Z", "updated_at": "2023-03-08T19:03:19Z", "closed_at": "2023-03-08T19:03:18Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5938", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5938", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5938.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5938.patch", "merged_at": "2023-03-08T19:03:18Z"}, "body": "This is an [automated pull request][process] from CI to create a patch\nrelease for Wasmtime 4.0.1, requested by @alexcrichton.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5938/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5938/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5937", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5937/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5937/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5937/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5937", "id": 1611700241, "node_id": "PR_kwDOBhDaXM5LYjDc", "number": 5937, "title": "Release Wasmtime 5.0.1", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-06T15:47:17Z", "updated_at": "2023-03-08T19:03:40Z", "closed_at": "2023-03-08T19:03:39Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5937", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5937", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5937.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5937.patch", "merged_at": "2023-03-08T19:03:39Z"}, "body": "This is an [automated pull request][process] from CI to create a patch\nrelease for Wasmtime 5.0.1, requested by @alexcrichton.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5937/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5935", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5935/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5935/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5935/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5935", "id": 1611148511, "node_id": "PR_kwDOBhDaXM5LWrQj", "number": 5935, "title": "deps: update criterion dependency to v0.4.0", "user": {"login": "koushiro", "id": 12652341, "node_id": "MDQ6VXNlcjEyNjUyMzQx", "avatar_url": "https://avatars.githubusercontent.com/u/12652341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koushiro", "html_url": "https://github.com/koushiro", "followers_url": "https://api.github.com/users/koushiro/followers", "following_url": "https://api.github.com/users/koushiro/following{/other_user}", "gists_url": "https://api.github.com/users/koushiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/koushiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koushiro/subscriptions", "organizations_url": "https://api.github.com/users/koushiro/orgs", "repos_url": "https://api.github.com/users/koushiro/repos", "events_url": "https://api.github.com/users/koushiro/events{/privacy}", "received_events_url": "https://api.github.com/users/koushiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-06T10:57:26Z", "updated_at": "2023-03-07T16:01:02Z", "closed_at": "2023-03-07T15:56:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5935", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5935", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5935.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5935.patch", "merged_at": "2023-03-07T15:56:04Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5935/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5932", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5932/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5932/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5932/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5932", "id": 1609993322, "node_id": "PR_kwDOBhDaXM5LS56u", "number": 5932, "title": "Bump Wasmtime to 8.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-05T00:03:12Z", "updated_at": "2023-03-06T15:47:00Z", "closed_at": "2023-03-06T15:46:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5932", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5932", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5932.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5932.patch", "merged_at": "2023-03-06T15:46:58Z"}, "body": "This is an [automated pull request][process] from CI which indicates\nthat the next [`release-7.0.0` branch][branch] has been created and\nthe `main` branch is getting its version number bumped from 7.0.0 to\n8.0.0.\n\nMaintainers should take a moment to review the [release\nnotes][RELEASES.md] for 7.0.0, and if any changes are necessary send\nPRs to the `main` branch to update [RELEASES.md] and then backport\nthese PRs to the [release branch][branch].\n\nMaintainers should also review that aarch64-apple-darwin builds\nare passing via [embark's CI](https://buildkite.com/embark-studios/wasmtime-aarch64-apple-darwin).\n\nAnother automated PR will be made in roughly 2 weeks time when for\nthe actual release itself.\n\nIf any issues arise on the `main` branch before the release is made\nthen the issue should first be fixed on `main` and then backported\nto the `release-7.0.0` branch.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[branch]: https://github.com/bytecodealliance/wasmtime/tree/release-7.0.0\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5932/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5932/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5931", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5931/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5931/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5931/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5931", "id": 1609971950, "node_id": "PR_kwDOBhDaXM5LS18O", "number": 5931, "title": "x64: Add more support for more AVX instructions", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-03-04T22:33:17Z", "updated_at": "2023-03-10T00:42:28Z", "closed_at": "2023-03-10T00:42:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5931", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5931", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5931.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5931.patch", "merged_at": "2023-03-10T00:42:27Z"}, "body": "One aspect of AVX that I have just recently become aware of is that there's apparently a performance penalty associated with mixing AVX and SSE intructions. One reason for this is that AVX instructions which operate over 128-bit values always zero the higher-than-128-bits of each register operate on. SSE instructions, however, don't do this. This means that false dependencies can be created between instructions because SSE instructions look like they're intentionally preserving higher bits where AVX instructions intentionally zero them. According to [this stackoverflow question](https://stackoverflow.com/questions/41303780/why-is-this-sse-code-6-times-slower-without-vzeroupper-on-skylake/41349852#41349852) the processor also tracks whether an instruction has been executed and there's a \"scary red line\" for mixing AVX/SSE.\r\n\r\nOn the local meshoptimizer benchmark this PR doesn't actually have any effect on the generate code's performance, or not one that I can measure. In that sense this is more of a hygiene thing than anything else.\r\n\r\nSpecifically the changes here were to refactor many ISLE helpers that were generating instructions with `SseOpcode.XXX` manually to instead using the instruction helpers which will use the AVX variant if enabled. Additionally more AVX instructions were added for moving data to/from memory and such.\r\n\r\nI don't think this 100% handles all the SSE instructions cranelift can generate when AVX is enabled, but it at least raises the bar further and removes a bunch of cases of SSE-generated instructions when AVX is enabled.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5931/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5930", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5930/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5930/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5930/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5930", "id": 1609968500, "node_id": "PR_kwDOBhDaXM5LS1UN", "number": 5930, "title": "x64: Add a smattering of lowerings for `shuffle` specializations", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-04T22:18:45Z", "updated_at": "2023-03-10T00:12:05Z", "closed_at": "2023-03-09T23:40:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5930", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5930", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5930.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5930.patch", "merged_at": "2023-03-09T23:40:01Z"}, "body": "I took the [meshoptimizer benchmark](https://github.com/zeux/meshoptimizer), compiled it to wasm, and ran it through both Wasmtime and v8. One major improvement for Wasmtime was to use specialized shuffle instructions instead of the generic fallback which requires two `pshufd` with rip-relative immediates plus a `por` vs a single instruction in many cases. I trawled through the v8 disassembly and found a number of shuffle-related instructions and translated all of their lowerings to Wasmtime. On one specific benchmark in that program this PR improves the throughput by 30%, and another by 5%.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5930/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5930/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5928", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5928/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5928/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5928/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5928", "id": 1609923760, "node_id": "PR_kwDOBhDaXM5LSs6-", "number": 5928, "title": "fuzzgen: Add invalid input counter", "user": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-04T19:52:55Z", "updated_at": "2023-03-04T22:05:34Z", "closed_at": "2023-03-04T22:05:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5928", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5928", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5928.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5928.patch", "merged_at": "2023-03-04T22:05:33Z"}, "body": "\ud83d\udc4b Hey,\r\n\r\nThis is a followup to a suggestion that @jameysharp pointed out in https://github.com/bytecodealliance/wasmtime/pull/5820#pullrequestreview-1304302471. With the refactoring done there we can now count how many inputs we reject.\r\n\r\nThis is great since we can at least keep track of this and hopefully improve it in the future. Right now it isn't great at about 74% rejected inputs:\r\n```\r\n== FuzzGen Statistics  ====================\r\nValid Inputs: 130000\r\nInvalid Inputs: 373838 (74.2% of Total Inputs)\r\nTotal Runs: 705910\r\nSuccessful Runs: 690177 (97.8% of Total Runs)\r\nTimed out Runs: 8247 (1.2% of Total Runs)\r\nTraps:\r\n        user code: int_divz: 6448 (0.9% of Total Runs)\r\n        user code: int_ovf: 566 (0.1% of Total Runs)\r\n        user code: bad_toint: 472 (0.1% of Total Runs)\r\n```", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5928/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5928/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5924", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5924/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5924/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5924/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5924", "id": 1609348139, "node_id": "PR_kwDOBhDaXM5LQ2CE", "number": 5924, "title": "x64: Optimize store-of-extract-lane-0", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-03T22:45:15Z", "updated_at": "2023-03-10T01:44:22Z", "closed_at": "2023-03-10T01:44:21Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5924", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5924", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5924.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5924.patch", "merged_at": "2023-03-10T01:44:21Z"}, "body": "The `movss` and `movsd` instructions can be used to store the 0th lane of a `t32x4` or a `t64x2` vector into memory, enabling fusing a `store` and an `extractlane` instruction.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5924/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5924/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5921", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5921/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5921/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5921/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5921", "id": 1608758311, "node_id": "PR_kwDOBhDaXM5LO4dW", "number": 5921, "title": "cranelift-interpreter: Add trap on misaligned memory accesses", "user": {"login": "jan-justin", "id": 22789485, "node_id": "MDQ6VXNlcjIyNzg5NDg1", "avatar_url": "https://avatars.githubusercontent.com/u/22789485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jan-justin", "html_url": "https://github.com/jan-justin", "followers_url": "https://api.github.com/users/jan-justin/followers", "following_url": "https://api.github.com/users/jan-justin/following{/other_user}", "gists_url": "https://api.github.com/users/jan-justin/gists{/gist_id}", "starred_url": "https://api.github.com/users/jan-justin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jan-justin/subscriptions", "organizations_url": "https://api.github.com/users/jan-justin/orgs", "repos_url": "https://api.github.com/users/jan-justin/repos", "events_url": "https://api.github.com/users/jan-justin/events{/privacy}", "received_events_url": "https://api.github.com/users/jan-justin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-03T14:39:18Z", "updated_at": "2023-03-07T08:58:49Z", "closed_at": "2023-03-07T00:45:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5921", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5921", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5921.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5921.patch", "merged_at": "2023-03-07T00:45:52Z"}, "body": "This PR adds trap generation on misaligned memory accesses when the `aligned` memory flag is set, as proposed over at #5899.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5921/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5919", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5919/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5919/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5919/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5919", "id": 1607839363, "node_id": "PR_kwDOBhDaXM5LLxyT", "number": 5919, "title": "Codegen  fix atomic_cas with samll types on riscv64", "user": {"login": "yuyang-ok", "id": 96557710, "node_id": "U_kgDOBcFajg", "avatar_url": "https://avatars.githubusercontent.com/u/96557710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuyang-ok", "html_url": "https://github.com/yuyang-ok", "followers_url": "https://api.github.com/users/yuyang-ok/followers", "following_url": "https://api.github.com/users/yuyang-ok/following{/other_user}", "gists_url": "https://api.github.com/users/yuyang-ok/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuyang-ok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuyang-ok/subscriptions", "organizations_url": "https://api.github.com/users/yuyang-ok/orgs", "repos_url": "https://api.github.com/users/yuyang-ok/repos", "events_url": "https://api.github.com/users/yuyang-ok/events{/privacy}", "received_events_url": "https://api.github.com/users/yuyang-ok/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-03-03T02:26:48Z", "updated_at": "2023-03-08T00:54:28Z", "closed_at": "2023-03-07T14:19:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5919", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5919", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5919.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5919.patch", "merged_at": "2023-03-07T14:19:01Z"}, "body": "This   fix #5901.\r\nWhen dealing with samll types,We should `extract` value to `dst` register instead of `t0` register.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5919/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5918", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5918/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5918/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5918/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5918", "id": 1607670284, "node_id": "PR_kwDOBhDaXM5LLNGF", "number": 5918, "title": "Remove the Cranelift `vselect` instruction", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-02T23:12:06Z", "updated_at": "2023-03-08T03:27:39Z", "closed_at": "2023-03-08T01:24:33Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5918", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5918", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5918.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5918.patch", "merged_at": "2023-03-08T01:24:32Z"}, "body": "This instruction is documented as selecting lanes based on the \"truthy\" value of the condition lane, but the current status of the implementation of this instruction is:\r\n\r\n* x64 - uses the high bit for `f32x4` and `f64x2` and otherwise uses the high bit of each byte doing a byte-wise lane select rather than whatever the controlling type is.\r\n\r\n* AArch64 - this is the same as `bitselect` which is a bit-wise selection rather than a lane-wise selection.\r\n\r\n* s390x - this is the same as AArch64, a bit-wise selection rather than lane-wise.\r\n\r\n* interpreter - the interpreter implements the documented semantics of selecting based on \"truthy\" values.\r\n\r\nCoupled with the status of the implementation is the fact that this instruction is not used by WebAssembly SIMD today either. The only use of this instruction in Cranelift is the nan-canonicalization pass. By moving nan-canonicalization to `bitselect`, since that has the desired semantics, there's no longer any need for `vselect`.\r\n\r\nGiven this situation this commit subsqeuently removes `vselect` and all usage of it throughout Cranelift.\r\n\r\nCloses #5917\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5918/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5918/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5912", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5912/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5912/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5912/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5912", "id": 1606741037, "node_id": "PR_kwDOBhDaXM5LICsr", "number": 5912, "title": "doc: fix WASI-api link", "user": {"login": "TristanCacqueray", "id": 154392, "node_id": "MDQ6VXNlcjE1NDM5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/154392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TristanCacqueray", "html_url": "https://github.com/TristanCacqueray", "followers_url": "https://api.github.com/users/TristanCacqueray/followers", "following_url": "https://api.github.com/users/TristanCacqueray/following{/other_user}", "gists_url": "https://api.github.com/users/TristanCacqueray/gists{/gist_id}", "starred_url": "https://api.github.com/users/TristanCacqueray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TristanCacqueray/subscriptions", "organizations_url": "https://api.github.com/users/TristanCacqueray/orgs", "repos_url": "https://api.github.com/users/TristanCacqueray/repos", "events_url": "https://api.github.com/users/TristanCacqueray/events{/privacy}", "received_events_url": "https://api.github.com/users/TristanCacqueray/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-02T12:41:55Z", "updated_at": "2023-03-02T14:03:50Z", "closed_at": "2023-03-02T14:00:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5912", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5912", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5912.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5912.patch", "merged_at": "2023-03-02T14:00:03Z"}, "body": "The previous link is 404.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5912/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5910", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5910/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5910/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5910/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5910", "id": 1606151797, "node_id": "PR_kwDOBhDaXM5LGCYA", "number": 5910, "title": "Add egraph optimization for fneg's cancelling out", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-02T05:50:55Z", "updated_at": "2023-03-02T19:11:51Z", "closed_at": "2023-03-02T19:11:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5910", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5910", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5910.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5910.patch", "merged_at": "2023-03-02T19:11:50Z"}, "body": "This implements comments from #5895 to cancel out `fneg` operations in `fma` instructions. Additional support for `fmul` is added as well.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5910/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5909", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5909/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5909/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5909/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5909", "id": 1606145789, "node_id": "PR_kwDOBhDaXM5LGBF8", "number": 5909, "title": "Allow hoisting `vconst` instructions out of loops", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-03-02T05:42:55Z", "updated_at": "2023-03-06T20:44:31Z", "closed_at": "2023-03-06T16:03:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5909", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5909", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5909.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5909.patch", "merged_at": "2023-03-06T16:03:37Z"}, "body": "Staring at some SIMD code and what LLVM and v8 both generate it appears that a common technique for SIMD-loops is to hoist constants outside of loops since they're nontrivial to rematerialize unlike integer constants. This commit updates the `loop_hoist_level` calculation with egraphs to have a nonzero default for instructions that have no arguments (e.g. consts) which enables hoisting these instructions out of loops.\r\n\r\nNote, though, that for now I've listed the maximum as hoisting outside of one loop, but not all of them. While theoretically vconsts could move up to the top of the function I'd be worried about their impact on register pressure and having to save/restore around calls or similar, so hopefully if the hot part of a program is a single loop then hoisting out of one loop is a reasonable-enough heuristic for now.\r\n\r\nLocally on x64 with a benchmark that just encodes binary to hex this saw a 15% performance improvement taking hex encoding from ~6G/s to ~6.7G/s.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5909/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5907", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5907/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5907/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5907/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5907", "id": 1605863718, "node_id": "PR_kwDOBhDaXM5LFEr3", "number": 5907, "title": "wasi-threads: run test suite", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-01T23:40:58Z", "updated_at": "2023-03-06T01:38:29Z", "closed_at": "2023-03-04T22:22:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5907", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5907", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5907.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5907.patch", "merged_at": "2023-03-04T22:22:31Z"}, "body": "This change enables the running of the wasi-threads [test suite]. It relies on a Wasmtime CLI binary being available and runs all `*.wasm` and `*.wat` files present in the test suite directory. The results of each execution are compared against a JSON spec file with the same base name as the WebAssembly module. The spec file defines the expected exit code, e.g.\r\n\r\nThis commit does not yet build any `*.c` or `*.s` files from the test suite. That could be done later, perhaps upstream; in the meantime, this work is still valuable as it lays the foundation for running other WASI tests from the in-progress [wasi-testsuite] which share the same JSON spec infrastructure.\r\n\r\n[test suite]: https://github.com/WebAssembly/wasi-threads/tree/main/test/testsuite\r\n[wasi-testsuite]: https://github.com/WebAssembly/wasi-testsuite\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5907/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5906", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5906/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5906/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5906/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5906", "id": 1605613028, "node_id": "PR_kwDOBhDaXM5LENUi", "number": 5906, "title": "x64: Improve codegen for i8x16.shr_u", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 2061886492, "node_id": "MDU6TGFiZWwyMDYxODg2NDky", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:x64", "name": "cranelift:area:x64", "color": "fbca04", "default": false, "description": "Issues related to x64 codegen"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-01T20:21:58Z", "updated_at": "2023-03-02T06:18:56Z", "closed_at": "2023-03-02T06:18:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/5906", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/5906", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/5906.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/5906.patch", "merged_at": "2023-03-02T06:18:55Z"}, "body": "This catches a case that wasn't handled previously by #5880 to allow a constant load to be folded into an instruction rather than forcing it to be loaded into a temporary register.\r\n\r\n<!--\r\n\r\nPlease ensure that the following steps are all taken care of before submitting\r\nthe PR.\r\n\r\n- [ ] This has been discussed in issue #..., or if not, please tell us why\r\n  here.\r\n- [ ] A short description of what this does, why it is needed; if the\r\n  description becomes long, the matter should probably be discussed in an issue\r\n  first.\r\n- [ ] This PR contains test cases, if meaningful.\r\n- [ ] A reviewer from the core maintainer team has been assigned for this PR.\r\n  If you don't know who could review this, please indicate so. The list of\r\n  suggested reviewers on the right can help you.\r\n\r\nPlease ensure all communication adheres to the [code of\r\nconduct](https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md).\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/5906/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]