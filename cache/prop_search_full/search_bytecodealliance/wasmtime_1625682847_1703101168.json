[{"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7709", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7709/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7709/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7709/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7709", "id": 2049613855, "node_id": "PR_kwDOBhDaXM5ia9Cx", "number": 7709, "title": "Release Wasmtime 16.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-20T00:11:23Z", "updated_at": "2023-12-20T17:54:59Z", "closed_at": "2023-12-20T17:54:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7709", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7709", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7709.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7709.patch", "merged_at": "2023-12-20T17:54:58Z"}, "body": "This is an [automated pull request][process] from CI which is\nintended to notify maintainers that it's time to release Wasmtime\n16.0.0. The [release branch][branch] was created roughly two weeks ago\nand it's now time for it to be published and released.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n[branch]: https://github.com/bytecodealliance/wasmtime/tree/release-16.0.0\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7709/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7708", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7708/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7708/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7708/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7708", "id": 2049613825, "node_id": "PR_kwDOBhDaXM5ia9CX", "number": 7708, "title": "Update release date of Wasmtime 16.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-20T00:11:21Z", "updated_at": "2023-12-20T02:20:39Z", "closed_at": "2023-12-20T02:20:38Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7708", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7708", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7708.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7708.patch", "merged_at": "2023-12-20T02:20:38Z"}, "body": "This is an [automated pull request][process] from CI which is updating\nthe release date of Wasmtime 16.0.0 to today. This PR's base branch\nis `main` and a second PR will be coming to perform the actual\nrelease which will be targeted at `release-16.0.0`.\n\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7708/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7708/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7703", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7703/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7703/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7703/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7703", "id": 2047595857, "node_id": "PR_kwDOBhDaXM5iUFH8", "number": 7703, "title": "Update stability-tiers.md to fix a Markdown typo", "user": {"login": "brettcannon", "id": 54418, "node_id": "MDQ6VXNlcjU0NDE4", "avatar_url": "https://avatars.githubusercontent.com/u/54418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brettcannon", "html_url": "https://github.com/brettcannon", "followers_url": "https://api.github.com/users/brettcannon/followers", "following_url": "https://api.github.com/users/brettcannon/following{/other_user}", "gists_url": "https://api.github.com/users/brettcannon/gists{/gist_id}", "starred_url": "https://api.github.com/users/brettcannon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brettcannon/subscriptions", "organizations_url": "https://api.github.com/users/brettcannon/orgs", "repos_url": "https://api.github.com/users/brettcannon/repos", "events_url": "https://api.github.com/users/brettcannon/events{/privacy}", "received_events_url": "https://api.github.com/users/brettcannon/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-18T22:53:23Z", "updated_at": "2023-12-18T23:39:35Z", "closed_at": "2023-12-18T23:39:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7703", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7703", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7703.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7703.patch", "merged_at": "2023-12-18T23:39:35Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7703/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7703/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7702", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7702/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7702/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7702/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7702", "id": 2047572701, "node_id": "PR_kwDOBhDaXM5iT_7M", "number": 7702, "title": "More spaceship patterns", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-18T22:33:46Z", "updated_at": "2023-12-19T21:59:17Z", "closed_at": "2023-12-19T21:40:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7702", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7702", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7702.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7702.patch", "merged_at": "2023-12-19T21:40:56Z"}, "body": "This is a continuation of #7636 that added the spaceship patterns.\r\n\r\nIn particular, I noticed that what Rust currently does in `sort_by`\r\n\r\nhttps://github.com/rust-lang/rust/blob/bf9229a2e366b4c311f059014a4aa08af16de5d8/library/core/src/slice/mod.rs#L3008\r\n\r\nis a simplification pattern that I'd missed, so this adds that, and a couple other related things I saw in the area.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7702/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7702/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7698", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7698/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7698/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7698/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7698", "id": 2046064384, "node_id": "PR_kwDOBhDaXM5iO3Ax", "number": 7698, "title": "Fix clippy lint issues in component macro bindgen file", "user": {"login": "kajacx", "id": 5281491, "node_id": "MDQ6VXNlcjUyODE0OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/5281491?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kajacx", "html_url": "https://github.com/kajacx", "followers_url": "https://api.github.com/users/kajacx/followers", "following_url": "https://api.github.com/users/kajacx/following{/other_user}", "gists_url": "https://api.github.com/users/kajacx/gists{/gist_id}", "starred_url": "https://api.github.com/users/kajacx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kajacx/subscriptions", "organizations_url": "https://api.github.com/users/kajacx/orgs", "repos_url": "https://api.github.com/users/kajacx/repos", "events_url": "https://api.github.com/users/kajacx/events{/privacy}", "received_events_url": "https://api.github.com/users/kajacx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-18T08:48:19Z", "updated_at": "2023-12-18T17:56:08Z", "closed_at": "2023-12-18T17:56:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7698", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7698", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7698.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7698.patch", "merged_at": "2023-12-18T17:56:08Z"}, "body": "I have a copy of this crate's code in [my project](https://github.com/kajacx/wasm-bridge/tree/master/crates/wasm-bridge-macros/src/original), with the license and a list of changes.\r\n\r\nBut I have also set up clippy checks in my pipeline, and they fail because of these lints. It felt best to just commit the changes upstream.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7698/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7693", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7693/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7693/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7693/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7693", "id": 2042943893, "node_id": "PR_kwDOBhDaXM5iEYhr", "number": 7693, "title": "Cranelift: use more `iconst_[su]` in opts, notably enabling some i128 patterns", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-15T05:46:32Z", "updated_at": "2023-12-18T21:19:10Z", "closed_at": "2023-12-18T20:47:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7693", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7693", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7693.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7693.patch", "merged_at": "2023-12-18T20:47:27Z"}, "body": "This uses `iconst_u` and `iconst_s` a bunch more in ISLE opts.\r\n\r\nWe can now enable some of the patterns that had to be excluded before to avoid generating `iconst.i128` that doesn't exist, since these rules do the right thing.  For example, `x - x` with this PR will now give `uextend.i128 (iconst.i64 0)` when `x` is `i128`, rather than staying unchanged as it did before.\r\n\r\nThere's a bunch of things that still don't have it, like const-prop, since the constant values are still only 64-bit, not 128-bit, so those patterns are still restricted to the smaller types.\r\n\r\n\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7693/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7690", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7690/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7690/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7690/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7690", "id": 2042152113, "node_id": "PR_kwDOBhDaXM5iBs0S", "number": 7690, "title": "wasi-sockets: Add SO_REUSEADDR back in", "user": {"login": "badeend", "id": 3646561, "node_id": "MDQ6VXNlcjM2NDY1NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3646561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badeend", "html_url": "https://github.com/badeend", "followers_url": "https://api.github.com/users/badeend/followers", "following_url": "https://api.github.com/users/badeend/following{/other_user}", "gists_url": "https://api.github.com/users/badeend/gists{/gist_id}", "starred_url": "https://api.github.com/users/badeend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badeend/subscriptions", "organizations_url": "https://api.github.com/users/badeend/orgs", "repos_url": "https://api.github.com/users/badeend/repos", "events_url": "https://api.github.com/users/badeend/events{/privacy}", "received_events_url": "https://api.github.com/users/badeend/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-14T17:27:55Z", "updated_at": "2023-12-17T19:18:07Z", "closed_at": "2023-12-17T19:18:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7690", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7690", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7690.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7690.patch", "merged_at": "2023-12-17T19:18:07Z"}, "body": "In #7662 the call to `bind_existing_tcp_listener` was replaced with `rustix::net::bind`. Unfortunately, besides calling `bind`, `bind_existing_tcp_listener` also set `SO_REUSEADDR`. This PR restores that behavior. I've added an integration test and a note to the WITs too. \r\n\r\nUnrelated: I also removed the workarounds in the Bind tests:\r\n```rs\r\n        // Concurrent invocations of this test can yield `AddressInUse` and that\r\n        // same error can show up on Windows as `AccessDenied`.\r\n        Err(ErrorCode::AddressInUse | ErrorCode::AccessDenied) => return,\r\n```\r\nby using a random generated port instead of a single constant.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7690/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7689", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7689/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7689/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7689/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7689", "id": 2041996377, "node_id": "PR_kwDOBhDaXM5iBKrn", "number": 7689, "title": "[16.0.0] Release notes", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-14T16:00:13Z", "updated_at": "2023-12-14T17:14:30Z", "closed_at": "2023-12-14T17:14:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7689", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7689", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7689.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7689.patch", "merged_at": "2023-12-14T17:14:29Z"}, "body": "This is a backport of https://github.com/bytecodealliance/wasmtime/pull/7678", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7689/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7687", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7687/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7687/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7687/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7687", "id": 2041715582, "node_id": "PR_kwDOBhDaXM5iAM35", "number": 7687, "title": "wasi-sockets: Factor out cap-std", "user": {"login": "badeend", "id": 3646561, "node_id": "MDQ6VXNlcjM2NDY1NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3646561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badeend", "html_url": "https://github.com/badeend", "followers_url": "https://api.github.com/users/badeend/followers", "following_url": "https://api.github.com/users/badeend/following{/other_user}", "gists_url": "https://api.github.com/users/badeend/gists{/gist_id}", "starred_url": "https://api.github.com/users/badeend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badeend/subscriptions", "organizations_url": "https://api.github.com/users/badeend/orgs", "repos_url": "https://api.github.com/users/badeend/repos", "events_url": "https://api.github.com/users/badeend/events{/privacy}", "received_events_url": "https://api.github.com/users/badeend/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-14T13:35:15Z", "updated_at": "2023-12-14T16:39:19Z", "closed_at": "2023-12-14T16:39:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7687", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7687", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7687.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7687.patch", "merged_at": "2023-12-14T16:39:18Z"}, "body": "Previously we already didn't use cap-std quite as intended for sockets. #7662 removed our usage of Pool, which effectively took out the \"cap\" from cap-std.\r\nThis PR cleans up many of the remaining references to cap-std from the sockets code. Some references remain, and those have been pushed into network::util, because that's all `cap_net_ext` does for us now: provide platform compatibility fixes.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7687/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7686", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7686/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7686/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7686/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7686", "id": 2041344414, "node_id": "PR_kwDOBhDaXM5h-7Gl", "number": 7686, "title": "fix(wasi-common): convert `ErrorKind::WouldBlock` instead of trapping", "user": {"login": "haraldh", "id": 427825, "node_id": "MDQ6VXNlcjQyNzgyNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/427825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haraldh", "html_url": "https://github.com/haraldh", "followers_url": "https://api.github.com/users/haraldh/followers", "following_url": "https://api.github.com/users/haraldh/following{/other_user}", "gists_url": "https://api.github.com/users/haraldh/gists{/gist_id}", "starred_url": "https://api.github.com/users/haraldh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haraldh/subscriptions", "organizations_url": "https://api.github.com/users/haraldh/orgs", "repos_url": "https://api.github.com/users/haraldh/repos", "events_url": "https://api.github.com/users/haraldh/events{/privacy}", "received_events_url": "https://api.github.com/users/haraldh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-14T09:57:10Z", "updated_at": "2023-12-14T16:40:06Z", "closed_at": "2023-12-14T16:40:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7686", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7686", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7686.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7686.patch", "merged_at": "2023-12-14T16:40:06Z"}, "body": "Fixes\r\n\r\n```\r\nCaused by:\r\n    0: error while executing at wasm backtrace:\r\n           0: 0x31b84 - wasi::lib_generated::fd_read::h1fcd502250db20a8\r\n                           at /cargo/registry/src/index.crates.io-6f17d22bba15001f/wasi-0.11.0+wasi-snapshot-preview1/src/lib_generated.rs:1568:15\r\n           1: 0x2d3c9 - std::sys::wasi::fd::WasiFd::read_buf::h1312cce7ac06e1bc\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/sys/wasi/fd.rs:55:19              - std::sys::wasi::fs::File::read_buf::h0ca7167b0ca5b60a\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/sys/wasi/fs.rs:444:9              - <std::fs::File as std::io::Read>::read_buf::h8adf939d301eeec5\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/fs.rs:754:9\r\n           2: 0x90ca - std::io::impls::<impl std::io::Read for &mut R>::read_buf::he16fcc35b9c33c8b\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/impls.rs:25:9\r\n           3: 0x906c - std::io::impls::<impl std::io::Read for &mut R>::read_buf::hc5e0ce1a6791ef6b\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/impls.rs:25:9\r\n           4: 0xad21 - std::io::buffered::bufreader::buffer::Buffer::fill_buf::h3242158c3a177d7e\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/buffered/bufreader/buffer.rs:114:13\r\n           5: 0xb260 - <std::io::buffered::bufreader::BufReader<R> as std::io::BufRead>::fill_buf::h4649de3e84258773\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/buffered/bufreader.rs:376:9\r\n           6: 0xe8f9 - std::io::read_until::h9db73250f385c902\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/mod.rs:1928:35\r\n           7: 0xef49 - std::io::BufRead::read_line::{{closure}}::h6bf04b54cf41082e\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/mod.rs:2223:44\r\n           8: 0xed2c - std::io::append_to_string::he57ad3fa45facdec\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/mod.rs:340:15\r\n           9: 0xaf70 - std::io::BufRead::read_line::h19a09c8def82c7d8\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/io/mod.rs:2223:18\r\n          10: 0x12cec - enarx_wasm_tests::assert_copy_line::h5d59fd155afd7cc8\r\n                           at /home/harald/git/enarx/enarx/tests/crates/enarx_wasm_tests/src/lib.rs:15:15\r\n          11: 0x12a63 - enarx_wasm_tests::assert_stream::hbeb69ada561a9d6e\r\n                           at /home/harald/git/enarx/enarx/tests/crates/enarx_wasm_tests/src/lib.rs:51:5\r\n          12: 0x112fb - listen::main::h659bfd5eb99767e6\r\n                           at /home/harald/git/enarx/enarx/tests/crates/enarx_wasm_tests/src/bin/listen.rs:41:5\r\n          13: 0x971d - core::ops::function::FnOnce::call_once::h68036f3375670974\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/core/src/ops/function.rs:250:5\r\n          14: 0x7330 - std::sys_common::backtrace::__rust_begin_short_backtrace::he16b7e0314041306\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/sys_common/backtrace.rs:134:18\r\n          15: 0x1322b - std::rt::lang_start::{{closure}}::hdb99de76d99bbf78\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/rt.rs:166:18\r\n          16: 0x2b405 - core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once::hef13acc07fb495a1\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/core/src/ops/function.rs:287:13              - std::panicking::try::do_call::hbe2c8138241fe21b\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/panicking.rs:485:40              - std::panicking::try::h1cede0ac0e99262c\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/panicking.rs:449:19              - std::panic::catch_unwind::h4d1cf95a1e500514\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/panic.rs:140:14              - std::rt::lang_start_internal::{{closure}}::h8997a9c00b45f195\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/rt.rs:148:48              - std::panicking::try::do_call::h0d25fe933c44f263\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/panicking.rs:485:40              - std::panicking::try::h2f9f2a031d18c02e\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/panicking.rs:449:19              - std::panic::catch_unwind::h4be34609b24e707a\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/panic.rs:140:14              - std::rt::lang_start_internal::h6c23e823dc99289d\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/rt.rs:148:20\r\n          17: 0x131c7 - std::rt::lang_start::hf469253146897dfa\r\n                           at /rustc/84dd17b56a931a631a23dfd5ef2018fd3ef49108/library/std/src/rt.rs:165:17\r\n          18: 0x12039 - <unknown>!__main_void\r\n          19:  0xa22 - <unknown>!_start\r\n    1: Unknown OS error\r\n    2: operation would block\r\n```", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7686/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7683", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7683/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7683/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7683/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7683", "id": 2040441615, "node_id": "PR_kwDOBhDaXM5h76RY", "number": 7683, "title": "Winch: Integer conversion instructions", "user": {"login": "jeffcharles", "id": 154890, "node_id": "MDQ6VXNlcjE1NDg5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/154890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffcharles", "html_url": "https://github.com/jeffcharles", "followers_url": "https://api.github.com/users/jeffcharles/followers", "following_url": "https://api.github.com/users/jeffcharles/following{/other_user}", "gists_url": "https://api.github.com/users/jeffcharles/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffcharles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffcharles/subscriptions", "organizations_url": "https://api.github.com/users/jeffcharles/orgs", "repos_url": "https://api.github.com/users/jeffcharles/repos", "events_url": "https://api.github.com/users/jeffcharles/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffcharles/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-13T20:44:57Z", "updated_at": "2023-12-13T22:18:49Z", "closed_at": "2023-12-13T22:18:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7683", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7683", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7683.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7683.patch", "merged_at": "2023-12-13T22:18:49Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\nAdds support for the following integer conversion instructions to Winch:\r\n- `i32.wrap_i64`\r\n- `i64.extend_i32_s`\r\n- `i64.extend_i32_u`\r\n- `i32.extend8_s`\r\n- `i32.extend16_s`\r\n- `i64.extend8_s`\r\n- `i64.extend16_s`\r\n- `i64.extend32_s`", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7683/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7682", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7682/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7682/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7682/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7682", "id": 2040246855, "node_id": "PR_kwDOBhDaXM5h7PyY", "number": 7682, "title": "Winch: Change emits to return TypedReg to put on stack", "user": {"login": "jeffcharles", "id": 154890, "node_id": "MDQ6VXNlcjE1NDg5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/154890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffcharles", "html_url": "https://github.com/jeffcharles", "followers_url": "https://api.github.com/users/jeffcharles/followers", "following_url": "https://api.github.com/users/jeffcharles/following{/other_user}", "gists_url": "https://api.github.com/users/jeffcharles/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffcharles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffcharles/subscriptions", "organizations_url": "https://api.github.com/users/jeffcharles/orgs", "repos_url": "https://api.github.com/users/jeffcharles/repos", "events_url": "https://api.github.com/users/jeffcharles/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffcharles/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-13T18:21:44Z", "updated_at": "2023-12-13T19:11:20Z", "closed_at": "2023-12-13T19:11:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7682", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7682", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7682.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7682.patch", "merged_at": "2023-12-13T19:11:20Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\nThere is a small bug where some instructions are putting values containing `TypedReg`s with the incorrect type on the stack. Specifically `i64.eqz` and the i64 comparison instructions. This change has the `emit` functions in the `unop` and `binop` helpers return the the typed registers to put on the stack instead of assigning a type that is the same as the input type.\r\n\r\nThe filetests for the comparison operators should now be moving the `e` variant of registers instead of the `r` variant of registers. I also needed to add an additional test for `i64.eqz` since the existing tests did not change as a result of fixing this issue.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7682/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7682/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7680", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7680/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7680/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7680/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7680", "id": 2039885787, "node_id": "PR_kwDOBhDaXM5h6BLL", "number": 7680, "title": "feat(wasmtime): allow definition of dynamic resource types in the linker", "user": {"login": "rvolosatovs", "id": 12877905, "node_id": "MDQ6VXNlcjEyODc3OTA1", "avatar_url": "https://avatars.githubusercontent.com/u/12877905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rvolosatovs", "html_url": "https://github.com/rvolosatovs", "followers_url": "https://api.github.com/users/rvolosatovs/followers", "following_url": "https://api.github.com/users/rvolosatovs/following{/other_user}", "gists_url": "https://api.github.com/users/rvolosatovs/gists{/gist_id}", "starred_url": "https://api.github.com/users/rvolosatovs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rvolosatovs/subscriptions", "organizations_url": "https://api.github.com/users/rvolosatovs/orgs", "repos_url": "https://api.github.com/users/rvolosatovs/repos", "events_url": "https://api.github.com/users/rvolosatovs/events{/privacy}", "received_events_url": "https://api.github.com/users/rvolosatovs/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-13T14:56:34Z", "updated_at": "2023-12-13T18:20:35Z", "closed_at": "2023-12-13T17:56:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7680", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7680", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7680.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7680.patch", "merged_at": "2023-12-13T17:56:56Z"}, "body": "This addresses the first part of https://github.com/bytecodealliance/wasmtime/issues/7676#issuecomment-1852531249, I still need to study the internals a bit more to figure out how to take `Resource<T>` into a `ResourceAny`, which will be addressed in a follow-up", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7680/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7680/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7679", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7679/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7679/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7679/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7679", "id": 2038810451, "node_id": "PR_kwDOBhDaXM5h2WZM", "number": 7679, "title": "wasi-nn: adapt to new test infrastructure", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-13T01:47:28Z", "updated_at": "2023-12-15T23:47:58Z", "closed_at": "2023-12-15T23:47:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7679", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7679", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7679.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7679.patch", "merged_at": "2023-12-15T23:47:57Z"}, "body": "This is a modern refactoring of #6895 to make wasi-nn use the test infrastructure that other WASI proposals are using (i.e., `crates/test-programs`). This is only the beginning: in follow up PRs, wasi-nn could gain unit tests, the existing examples could be removed, more kinds of tests could be added, etc. This will be easier in the future, though, once this infrastructure is in place for the `wasmtime-wasi-nn` crate. ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7679/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7679/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7678", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7678/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7678/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7678/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7678", "id": 2038700088, "node_id": "PR_kwDOBhDaXM5h1-4Q", "number": 7678, "title": "Add release notes for Wasmtime 16", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-12T23:30:47Z", "updated_at": "2023-12-13T19:19:29Z", "closed_at": "2023-12-13T19:19:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7678", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7678", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7678.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7678.patch", "merged_at": "2023-12-13T19:19:28Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7678/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7675", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7675/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7675/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7675/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7675", "id": 2037884995, "node_id": "PR_kwDOBhDaXM5hzM36", "number": 7675, "title": "[16.0.0] Backport `adapter_{open|close}_badfd` exports", "user": {"login": "dicej", "id": 1243153, "node_id": "MDQ6VXNlcjEyNDMxNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1243153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dicej", "html_url": "https://github.com/dicej", "followers_url": "https://api.github.com/users/dicej/followers", "following_url": "https://api.github.com/users/dicej/following{/other_user}", "gists_url": "https://api.github.com/users/dicej/gists{/gist_id}", "starred_url": "https://api.github.com/users/dicej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dicej/subscriptions", "organizations_url": "https://api.github.com/users/dicej/orgs", "repos_url": "https://api.github.com/users/dicej/repos", "events_url": "https://api.github.com/users/dicej/events{/privacy}", "received_events_url": "https://api.github.com/users/dicej/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-12T14:34:43Z", "updated_at": "2023-12-12T15:07:43Z", "closed_at": "2023-12-12T15:07:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7675", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7675", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7675.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7675.patch", "merged_at": "2023-12-12T15:07:42Z"}, "body": "This backports #7663 and #7672 to the `release-16.0.0` branch, which will make it easier for us to test the ongoing work to support `wasi-sockets` in `wasi-libc`.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7675/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7674", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7674/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7674/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7674/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7674", "id": 2037009493, "node_id": "PR_kwDOBhDaXM5hwPDV", "number": 7674, "title": "ci: Update to `actions/checkout@v4` from `v3`.", "user": {"login": "waywardmonkeys", "id": 178582, "node_id": "MDQ6VXNlcjE3ODU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/178582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waywardmonkeys", "html_url": "https://github.com/waywardmonkeys", "followers_url": "https://api.github.com/users/waywardmonkeys/followers", "following_url": "https://api.github.com/users/waywardmonkeys/following{/other_user}", "gists_url": "https://api.github.com/users/waywardmonkeys/gists{/gist_id}", "starred_url": "https://api.github.com/users/waywardmonkeys/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waywardmonkeys/subscriptions", "organizations_url": "https://api.github.com/users/waywardmonkeys/orgs", "repos_url": "https://api.github.com/users/waywardmonkeys/repos", "events_url": "https://api.github.com/users/waywardmonkeys/events{/privacy}", "received_events_url": "https://api.github.com/users/waywardmonkeys/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-12T05:26:56Z", "updated_at": "2023-12-12T15:44:40Z", "closed_at": "2023-12-12T15:44:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7674", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7674", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7674.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7674.patch", "merged_at": "2023-12-12T15:44:08Z"}, "body": "This mainly updates to use Node 20 rather than Node 16 internally.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7674/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7673", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7673/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7673/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7673/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7673", "id": 2036640273, "node_id": "PR_kwDOBhDaXM5hu_JK", "number": 7673, "title": "Remove unnecessary macro argument", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-11T22:29:02Z", "updated_at": "2023-12-12T14:51:46Z", "closed_at": "2023-12-11T23:47:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7673", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7673", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7673.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7673.patch", "merged_at": "2023-12-11T23:47:16Z"}, "body": "The `$raw:ident` in this macro was unused as far as I could tell; this change removes it.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7673/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7672", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7672/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7672/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7672/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7672", "id": 2035919684, "node_id": "PR_kwDOBhDaXM5hsgAt", "number": 7672, "title": "Update `*_badfd` methods in the adapter to return an errno", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-11T15:21:20Z", "updated_at": "2023-12-11T16:05:17Z", "closed_at": "2023-12-11T16:05:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7672", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7672", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7672.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7672.patch", "merged_at": "2023-12-11T16:05:16Z"}, "body": "Makes them a bit more consistent with the rest of the WASI functions as opposed to returning a boolean.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7672/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7672/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7670", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7670/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7670/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7670/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7670", "id": 2033783146, "node_id": "PR_kwDOBhDaXM5hlXIY", "number": 7670, "title": "Cranelift: Add iconst shorthand to simplify ISLE opts", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-12-09T10:20:55Z", "updated_at": "2023-12-12T20:58:02Z", "closed_at": "2023-12-12T20:31:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7670", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7670", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7670.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7670.patch", "merged_at": "2023-12-12T20:31:49Z"}, "body": "Extracting an `iconst` with value `1` today is easy enough, albeit needing more type-conversions than one might like\r\n\r\nhttps://github.com/bytecodealliance/wasmtime/blob/4f2d634ca4291a09003eaba26f989cd544c1a289/cranelift/codegen/src/opts/arithmetic.isle#L52-L56\r\n\r\nHowever there's no way to *extract* against a type-aware `-1`, meaning those patterns have an extra step\r\n\r\nhttps://github.com/bytecodealliance/wasmtime/blob/4f2d634ca4291a09003eaba26f989cd544c1a289/cranelift/codegen/src/opts/arithmetic.isle#L64-L67\r\n\r\nThis PR adds `iconst_s ty c` that can directly extract a sign-extended value as well as construct a properly masked constant (so `iconst_s ty -1` will give `iconst.i8 255` or `iconst.i16 0xFFFF` or \u2026).  And for symmetry, it also adds `iconst_u`, which also works as both constructor and extractor.\r\n\r\nThus the pattern looking for `-1` is simplified to just\r\n```lisp\r\n;; x*-1 == ineg(x).\r\n(rule (simplify (imul ty x (iconst_s ty -1)))\r\n      (ineg ty x))\r\n```\r\n\r\nAnd even unsigned cases are shortened and simplified by no longer needing to remember to get `u64_from_imm64` vs `imm64` correct depending whether something is extracting or constructing, since `iconst_u` works for both\r\n```diff\r\n ;; uge(x, 0) == true.\r\n-(rule (simplify (uge (fits_in_64 (ty_int bty)) x zero @ (iconst _ (u64_from_imm64 0))))\r\n-      (subsume (iconst bty (imm64 1))))\r\n+(rule (simplify (uge (fits_in_64 (ty_int bty)) x zero @ (iconst_u _ 0)))\r\n+      (subsume (iconst_u bty 1)))\r\n```\r\n\r\nThis makes no functional changes to the patterns, just makes them shorter using the new etor+ctors, and thus there are no test changes.  (There's way too many changes in the ISLE for it to be a good idea to try to also change any functionality here.  Similarly, to attempt to ease review, I did no formatting changes in the ISLE, even where I might have otherwise removed some line-breaking.)\r\n\r\n---\r\n\r\nThis also moves `simm32` and `uimm8` to lowering ISLE only, as they appear not actually useful for *opts* ISLE.\r\n\r\nIn particular, it's very tempting to write\r\n```lisp\r\n;; x*-1 == ineg(x).\r\n(rule (simplify (imul ty x (iconst _ (simm32 -1))))\r\n      (ineg ty x))\r\n```\r\nbut despite its name, **that doesn't even work for 32-bit numbers** because of how `simm32` is implemented.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7670/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7670/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7663", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7663/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7663/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7663/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7663", "id": 2033082537, "node_id": "PR_kwDOBhDaXM5hi_Ta", "number": 7663, "title": "add `adapter_{open|close}_badfd` exports to Preview 1 adapter", "user": {"login": "dicej", "id": 1243153, "node_id": "MDQ6VXNlcjEyNDMxNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1243153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dicej", "html_url": "https://github.com/dicej", "followers_url": "https://api.github.com/users/dicej/followers", "following_url": "https://api.github.com/users/dicej/following{/other_user}", "gists_url": "https://api.github.com/users/dicej/gists{/gist_id}", "starred_url": "https://api.github.com/users/dicej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dicej/subscriptions", "organizations_url": "https://api.github.com/users/dicej/orgs", "repos_url": "https://api.github.com/users/dicej/repos", "events_url": "https://api.github.com/users/dicej/events{/privacy}", "received_events_url": "https://api.github.com/users/dicej/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-08T17:51:41Z", "updated_at": "2023-12-09T00:00:08Z", "closed_at": "2023-12-09T00:00:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7663", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7663", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7663.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7663.patch", "merged_at": "2023-12-09T00:00:07Z"}, "body": "This is to be used by `wasi-libc` to reserve file descriptors for its own use (e.g. for sockets), ensuring that any attempt to pass them directly to Preview 1 functions will consistently return an error.\r\n\r\nSee https://github.com/WebAssembly/wasi-libc/issues/447 for further details.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7663/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7662", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7662/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7662/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7662/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7662", "id": 2033054175, "node_id": "PR_kwDOBhDaXM5hi5MP", "number": 7662, "title": "[WASI] Dynamic `SocketAddr` check for outbound socket traffic", "user": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2023-12-08T17:29:15Z", "updated_at": "2023-12-13T19:44:47Z", "closed_at": "2023-12-13T19:19:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7662", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7662", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7662.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7662.patch", "merged_at": "2023-12-13T19:19:28Z"}, "body": "This PR adds the ability to do dynamic checks of whether to allow outbound socket traffic to a given `SocketAddr`. The checks are purely additive over the underlying `cap_std::net::Pool`. If the check returns `true` the traffic is allowed, while if it returns false, the underlying `cap_std::net::Pool` is then checked. \r\n\r\nThis also changes the `WasiCtx::inherit_network` function to not take an `AmbientAuthority` since all other methods on `WasiCtx` do not take this value. ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7662/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7662/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7658", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7658/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7658/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7658/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7658", "id": 2032415503, "node_id": "PR_kwDOBhDaXM5hgtiB", "number": 7658, "title": "Replace clap attributes with command and arg", "user": {"login": "iawia002", "id": 9134003, "node_id": "MDQ6VXNlcjkxMzQwMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/9134003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iawia002", "html_url": "https://github.com/iawia002", "followers_url": "https://api.github.com/users/iawia002/followers", "following_url": "https://api.github.com/users/iawia002/following{/other_user}", "gists_url": "https://api.github.com/users/iawia002/gists{/gist_id}", "starred_url": "https://api.github.com/users/iawia002/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iawia002/subscriptions", "organizations_url": "https://api.github.com/users/iawia002/orgs", "repos_url": "https://api.github.com/users/iawia002/repos", "events_url": "https://api.github.com/users/iawia002/events{/privacy}", "received_events_url": "https://api.github.com/users/iawia002/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-08T10:43:35Z", "updated_at": "2023-12-12T01:40:20Z", "closed_at": "2023-12-08T16:59:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7658", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7658", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7658.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7658.patch", "merged_at": "2023-12-08T16:59:18Z"}, "body": "While reading the code, I noticed that we were mixing clap's `clap`, `command`, `arg`, and `structopt` attributes, and it seemed quite messy, and even though `#[clap()]` still works, `#[arg()]` and `#[command()]` are now recommended since clap v4, ref https://github.com/clap-rs/clap/pull/4180.\r\n\r\nSo this patch standardizes them, eliminating the use of outdated `clap` attributes and removing some meaningless name configurations.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7658/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7657", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7657/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7657/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7657/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7657", "id": 2032334799, "node_id": "PR_kwDOBhDaXM5hgb3D", "number": 7657, "title": "Add a test for `allow-ip-name-lookup=no`", "user": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-08T09:50:16Z", "updated_at": "2023-12-11T08:51:13Z", "closed_at": "2023-12-08T18:11:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7657", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7657", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7657.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7657.patch", "merged_at": "2023-12-08T18:11:48Z"}, "body": "The test simply tries looking up example.com and ensuring it fails with `PermanentResolverFailure`. Additionally, `PermanentResolverFailure` is removed as one of the allowed errors in the normal ip name lookup test as those allowed errors should only be transient lookup errors and `PermanentResolverFailure` is very much not a transient error.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7657/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7656", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7656/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7656/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7656/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7656", "id": 2031844053, "node_id": "PR_kwDOBhDaXM5hewsd", "number": 7656, "title": "[bindgen] Include Version in the export name if needed", "user": {"login": "jsturtevant", "id": 648372, "node_id": "MDQ6VXNlcjY0ODM3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/648372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsturtevant", "html_url": "https://github.com/jsturtevant", "followers_url": "https://api.github.com/users/jsturtevant/followers", "following_url": "https://api.github.com/users/jsturtevant/following{/other_user}", "gists_url": "https://api.github.com/users/jsturtevant/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsturtevant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsturtevant/subscriptions", "organizations_url": "https://api.github.com/users/jsturtevant/orgs", "repos_url": "https://api.github.com/users/jsturtevant/repos", "events_url": "https://api.github.com/users/jsturtevant/events{/privacy}", "received_events_url": "https://api.github.com/users/jsturtevant/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-12-08T02:54:43Z", "updated_at": "2023-12-11T15:50:20Z", "closed_at": "2023-12-11T15:50:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7656", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7656", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7656.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7656.patch", "merged_at": "2023-12-11T15:50:20Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n\r\nWhen exporting multiple versions of the same package the version name needs to be included.\r\n\r\nBefore this change the generator would produce:\r\n\r\n```\r\npub fn test_dep_test(&self) -> &exports::test::dep0_1_0::test::Test { &self.interface1 } \r\npub fn test_dep_test(&self) -> &exports::test::dep0_2_0::test::Test { &self.interface2 }\r\n```\r\n\r\nnow it will produce: \r\n\r\n```\r\npub fn test_dep_0_1_0_test(&self) -> &exports::test::dep0_1_0::test::Test { &self.interface1 } \r\npub fn test_dep_0_2_0_test(&self) -> &exports::test::dep0_2_0::test::Test { &self.interface2 }\r\n```\r\n\r\nFound in https://github.com/bytecodealliance/wit-bindgen/pull/787/files#r1416724258\r\nDiscussed in https://bytecodealliance.zulipchat.com/#narrow/stream/327223-wit-bindgen/topic/Host.20Exports.20across.20versions\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7656/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7656/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7655", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7655/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7655/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7655/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7655", "id": 2031354024, "node_id": "PR_kwDOBhDaXM5hdHQ4", "number": 7655, "title": "Move wasmtime-wasi's Table to wasmtime::component::ResourceTable", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-07T19:01:04Z", "updated_at": "2023-12-08T01:26:26Z", "closed_at": "2023-12-08T01:26:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7655", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7655", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7655.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7655.patch", "merged_at": "2023-12-08T01:26:25Z"}, "body": "This abstraction is useful for all component model Resource lookups, not exclusive to WASI, so we are promoting it to live in wasmtime::component.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7655/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7655/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7654", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7654/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7654/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7654/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7654", "id": 2031291832, "node_id": "PR_kwDOBhDaXM5hc52T", "number": 7654, "title": "Cranelift: More simplification opts for `iadd`/`isub`", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-07T18:15:08Z", "updated_at": "2023-12-08T00:57:17Z", "closed_at": "2023-12-07T23:20:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7654", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7654", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7654.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7654.patch", "merged_at": "2023-12-07T23:20:27Z"}, "body": "This PR came out of me seeing that the opt patterns were written out to handle both\r\n```\r\n(!x) + 1 == !(x) - (-1) == ineg(x)\r\n```\r\nand thus being sad that every pattern including `(iadd _ 1)` needed to be written again for `(isub _ -1)`.\r\n\r\nSo this takes a look at more opt patterns around `iadd` and `isub`:\r\n- Various combinations with `ineg`, like `x + -y == -y + x == -(y - x) == x - y`\r\n- Avoiding subtract-a-\"negative\"-constant, so `(isub x 255_u8)` becomes `(iadd x 1_u8)` (but `(isub x 1)` is left alone)\r\n- And removing now-unnecessary patterns in arithmetic.isle and bitops.isle, like I did in #7599 \r\n\r\nI originally had `x + -1` \u2192 `x - 1` as well, but that regressed codegen with addressing modes -- something that had been in one x64 LEA ended up being a LEA and a SUB.  So there's an interesting question about whether to turn *all* `(isub x CONST)` into `(iadd x CONST)`, but that felt like something that would need a zulip conversation, and thus it's not included in this hopefully-simpler PR.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7654/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7654/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7651", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7651/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7651/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7651/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7651", "id": 2029460536, "node_id": "PR_kwDOBhDaXM5hWnzu", "number": 7651, "title": "Increase stack size in `examples/threads.c`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-06T22:03:13Z", "updated_at": "2023-12-06T22:55:30Z", "closed_at": "2023-12-06T22:55:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7651", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7651", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7651.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7651.patch", "merged_at": "2023-12-06T22:55:29Z"}, "body": "This commit is an attempt to address the CI failure popping up in #7636. I can reproduce the failure locally and it appears to be due to the fact that macOS is giving spawned threads via `pthread_create` a 512K stack by default. Cranelift when compiled in debug mode is taking more stack than this (but working in release mode). I was talking with Trevor and Jamey about possible ways to reduce the stack size here but for now I'm going with Jamey's suggestion of increasing the stack size as the best course of action for now.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7651/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7650", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7650/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7650/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7650/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7650", "id": 2029330752, "node_id": "PR_kwDOBhDaXM5hWLSr", "number": 7650, "title": "use wasi-http and wasi-cli 0.2.0-rc-2023-12-05 (#7640)", "user": {"login": "ricochet", "id": 974323, "node_id": "MDQ6VXNlcjk3NDMyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/974323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ricochet", "html_url": "https://github.com/ricochet", "followers_url": "https://api.github.com/users/ricochet/followers", "following_url": "https://api.github.com/users/ricochet/following{/other_user}", "gists_url": "https://api.github.com/users/ricochet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ricochet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ricochet/subscriptions", "organizations_url": "https://api.github.com/users/ricochet/orgs", "repos_url": "https://api.github.com/users/ricochet/repos", "events_url": "https://api.github.com/users/ricochet/events{/privacy}", "received_events_url": "https://api.github.com/users/ricochet/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-06T20:28:38Z", "updated_at": "2023-12-06T20:56:27Z", "closed_at": "2023-12-06T20:56:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7650", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7650", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7650.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7650.patch", "merged_at": "2023-12-06T20:56:27Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\nCherry-pick 08d101b from #7640. This will make it so that Wasmtime's 16.0.0 release will have the latest WIT definitions and potentially the release candidate that will graduate to be the Preview 2 release.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7650/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7649", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7649/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7649/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7649/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7649", "id": 2029203350, "node_id": "PR_kwDOBhDaXM5hVvaV", "number": 7649, "title": "Use the compilation cache for components", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-06T18:59:46Z", "updated_at": "2023-12-12T23:23:49Z", "closed_at": "2023-12-12T23:23:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7649", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7649", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7649.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7649.patch", "merged_at": "2023-12-12T23:23:47Z"}, "body": "Cache whole components in the compilation cache. This doesn't address the situation where we could cache individual modules used within the component separately, and reuse those results across multiple components. However, it does improve the runtime of command-line uses of components today, and anecdotally people are benchmarking `wasmtime run` with components.\n\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7649/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7648", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7648/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7648/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7648/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7648", "id": 2029027656, "node_id": "PR_kwDOBhDaXM5hVIzy", "number": 7648, "title": "Ensure `remote-address` is allowed when creating UDP stream", "user": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-12-06T17:14:40Z", "updated_at": "2023-12-10T11:27:29Z", "closed_at": "2023-12-08T16:41:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7648", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7648", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7648.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7648.patch", "merged_at": "2023-12-08T16:41:13Z"}, "body": "Until now, the `remote-address` argument to `wasi:sockets/udp-socket#stream` was not checked against the `Pool` of allowed IP addresses. Now, we store the `Pool` from `network` into the `socket` object in `wasi:sockets/udp-socket#bind` and later use that `Pool` in `wasi:sockets/udp-socket#stream` to check that `remote-address` is allowed.\r\n\r\nThe check itself is a bit hacky since `Pool` doesn't seem to expose a way to just check an address so we use `PoolExt` to create a `UdpConnecter` which we will fail if we don't have permission to connect to the remote address.\r\n\r\nI can add a test once I figure out the testing story in https://github.com/bytecodealliance/wasmtime/pull/7647", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7648/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7648/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7647", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7647/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7647/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7647/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7647", "id": 2028924069, "node_id": "PR_kwDOBhDaXM5hUx11", "number": 7647, "title": "Add options to WasiCtx for toggling TCP and UDP on and off", "user": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-12-06T16:19:34Z", "updated_at": "2023-12-08T23:37:03Z", "closed_at": "2023-12-07T19:20:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7647", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7647", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7647.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7647.patch", "merged_at": "2023-12-07T19:20:49Z"}, "body": "This adds options to `WasiCtx` that allow disabling TCP and UDP wholesale. For TCP this prevents usage of binding, connecting, listening, and accepting while for UDP it prevents binding. ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7647/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7644", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7644/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7644/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7644/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7644", "id": 2027619881, "node_id": "PR_kwDOBhDaXM5hQUbe", "number": 7644, "title": "Additional `extend` opt patterns", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-06T04:21:07Z", "updated_at": "2023-12-07T06:37:48Z", "closed_at": "2023-12-07T00:19:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7644", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7644", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7644.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7644.patch", "merged_at": "2023-12-07T00:19:40Z"}, "body": "It already had the homogeneous chaining cases\r\n\r\nhttps://github.com/bytecodealliance/wasmtime/blob/5c8bce70a11657ad6740f56a852f64d147f93494/cranelift/codegen/src/opts/extends.isle#L1-L5\r\n\r\nThis PR adds heterogeneous chaining cases, where possible.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7644/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7642", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7642/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7642/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7642/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7642", "id": 2027416394, "node_id": "PR_kwDOBhDaXM5hPodv", "number": 7642, "title": "mpk: deduplicate documentation", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-06T00:48:03Z", "updated_at": "2023-12-06T16:45:04Z", "closed_at": "2023-12-06T16:45:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7642", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7642", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7642.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7642.patch", "merged_at": "2023-12-06T16:45:04Z"}, "body": "This change deduplicates some module documentation the pooling allocator. Previously, the module-level documentation for `pooling.rs` and `memory_pool.rs` had duplicated content which this change removes. It also takes a stab at clarifying \"how\" and \"why\" MPK is used for memory pooling.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7642/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7642/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7641", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7641/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7641/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7641/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7641", "id": 2027364806, "node_id": "PR_kwDOBhDaXM5hPdOk", "number": 7641, "title": "Backport the fields.has addition to the 16.x release branch", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-06T00:02:25Z", "updated_at": "2023-12-06T16:14:11Z", "closed_at": "2023-12-06T16:14:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7641", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7641", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7641.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7641.patch", "merged_at": "2023-12-06T16:14:11Z"}, "body": "Backport #7625 to the 16.x release branch.\r\n\r\nIt doesn't seem like this needs an entry in the release notes, as it's just keeping up with the upstream wasi-http spec, but I'd be happy to add one.\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7641/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7641/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7640", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7640/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7640/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7640/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7640", "id": 2027279851, "node_id": "PR_kwDOBhDaXM5hPKJK", "number": 7640, "title": "use wasi-http and wasi-cli 0.2.0-rc-2023-12-05", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-05T23:01:29Z", "updated_at": "2023-12-06T19:23:53Z", "closed_at": "2023-12-06T19:23:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7640", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7640", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7640.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7640.patch", "merged_at": "2023-12-06T19:23:52Z"}, "body": "wasi-cli pulls in the change from upstream renaming its `reactor` world to `imports`.\r\nwasi-http had no diff against upstream except for the version bump.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7640/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7640/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7636", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7636/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7636/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7636/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7636", "id": 2026899475, "node_id": "PR_kwDOBhDaXM5hN1lK", "number": 7636, "title": "Add opt patterns for 3-way comparison (`Ord::cmp` or `<=>`)", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-12-05T18:48:36Z", "updated_at": "2023-12-07T06:37:29Z", "closed_at": "2023-12-06T23:32:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7636", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7636", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7636.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7636.patch", "merged_at": "2023-12-06T23:32:22Z"}, "body": "Previous zulip conversation: <https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/3-way.20compare.20.28Rust.20.60cmp.60.2C.20C.2B.2B20.20.60.3C.3D.3E.60.29/near/404519375>\r\n\r\nThis PR adds a bunch of ISLE opt patterns for three-way comparison on primitives, as exposed by `Ord::cmp` in Rust or as `<=>` \"spaceship\" in C++20.  It's split in two parts:\r\n1. Detecting nested `select`s that are actually doing this, of which there are sadly many possible forms and no well-known-best way.  By doing this cranelift can emit a much simpler MachInst pattern for it than if it needs to use cmovs and constants.\r\n2. Adding simplifications when common comparisons are done on the *result* of the spaceship.  This is particularly relevant for any code written against a 3-way-comparison interface but that only needs a 2-way result.  For example, if you use `.sort_by(|a, b| b.cmp(a))` in Rust to reverse-sort something, [it immediately just checks for `Ordering::Less`](https://doc.rust-lang.org/1.74.0/src/alloc/slice.rs.html#263-268), and if you have `#[derive(PartialOrd)] struct Foo(u32);` then the generated `<` operator is doing the equivalent of `(a <=> b) < 0`, which this will improve to `a < b`.\r\n\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7636/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7636/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7635", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7635/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7635/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7635/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7635", "id": 2026716493, "node_id": "PR_kwDOBhDaXM5hNNHa", "number": 7635, "title": "Document `cargo vet` in contributing docs", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-05T17:05:24Z", "updated_at": "2024-03-11T18:23:10Z", "closed_at": "2023-12-05T17:56:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7635", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7635", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7635.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7635.patch", "merged_at": "2023-12-05T17:56:35Z"}, "body": "I realized just now that we haven't actually documented our usage of `cargo vet` anywhere in our contributing documentation (or not that I could find), so I decided to try and rectify that!\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7635/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7634", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7634/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7634/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7634/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7634", "id": 2026645835, "node_id": "PR_kwDOBhDaXM5hM9eb", "number": 7634, "title": "Add audits for windows-sys 0.52", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-05T16:40:01Z", "updated_at": "2023-12-05T17:22:44Z", "closed_at": "2023-12-05T17:22:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7634", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7634", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7634.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7634.patch", "merged_at": "2023-12-05T17:22:43Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7634/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7634/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7632", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7632/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7632/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7632/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7632", "id": 2025552176, "node_id": "PR_kwDOBhDaXM5hJLZJ", "number": 7632, "title": "Update to windows-sys 0.52", "user": {"login": "kayabaNerve", "id": 25259837, "node_id": "MDQ6VXNlcjI1MjU5ODM3", "avatar_url": "https://avatars.githubusercontent.com/u/25259837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kayabaNerve", "html_url": "https://github.com/kayabaNerve", "followers_url": "https://api.github.com/users/kayabaNerve/followers", "following_url": "https://api.github.com/users/kayabaNerve/following{/other_user}", "gists_url": "https://api.github.com/users/kayabaNerve/gists{/gist_id}", "starred_url": "https://api.github.com/users/kayabaNerve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kayabaNerve/subscriptions", "organizations_url": "https://api.github.com/users/kayabaNerve/orgs", "repos_url": "https://api.github.com/users/kayabaNerve/repos", "events_url": "https://api.github.com/users/kayabaNerve/events{/privacy}", "received_events_url": "https://api.github.com/users/kayabaNerve/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2023-12-05T08:12:34Z", "updated_at": "2023-12-18T04:01:04Z", "closed_at": "2023-12-17T18:59:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7632", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7632", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7632.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7632.patch", "merged_at": "2023-12-17T18:59:13Z"}, "body": "Unfortunately, due to the C dependencies, I couldn't locally verify this builds.\r\n\r\nI did use the GitHub CI to verify it builds and the tests passed, yet due to the size of the CI *and the fact I on-purposely didn't add a new vet statement which made the CI self-cancel*, I'm unsure this is completely valid at this time.\r\n\r\nOn the belief this is a valid patch, my question is how should vet be handled. Personally, I see no reason to trust the windows-sys 0.48 published by Microsoft yet not windows-sys 0.51 given its FFI bindings, not some original library. If an attestation the changes are as expected is needed, I'd ask someone who has experience doing said reviews *and whose name actually means something to this project* performs said review. If no such explicit review is needed, I'd be happy to update the existing vet attestation if informed how.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7632/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7631", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7631/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7631/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7631/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7631", "id": 2025028776, "node_id": "PR_kwDOBhDaXM5hHajN", "number": 7631, "title": "Bump Wasmtime to 17.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-05T00:02:12Z", "updated_at": "2023-12-05T00:50:33Z", "closed_at": "2023-12-05T00:50:32Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7631", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7631", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7631.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7631.patch", "merged_at": "2023-12-05T00:50:32Z"}, "body": "This is an [automated pull request][process] from CI which indicates\nthat the next [`release-16.0.0` branch][branch] has been created and\nthe `main` branch is getting its version number bumped from 16.0.0 to\n17.0.0.\n\nMaintainers should take a moment to review the [release\nnotes][RELEASES.md] for 16.0.0, and if any changes are necessary send\nPRs to the `main` branch to update [RELEASES.md] and then backport\nthese PRs to the [release branch][branch].\n\nMaintainers should also review that aarch64-apple-darwin builds\nare passing via [embark's CI](https://buildkite.com/embark-studios/wasmtime-aarch64-apple-darwin).\n\nAnother automated PR will be made in roughly 2 weeks time when for\nthe actual release itself.\n\nIf any issues arise on the `main` branch before the release is made\nthen the issue should first be fixed on `main` and then backported\nto the `release-16.0.0` branch.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[branch]: https://github.com/bytecodealliance/wasmtime/tree/release-16.0.0\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7631/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7629", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7629/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7629/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7629/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7629", "id": 2024420494, "node_id": "PR_kwDOBhDaXM5hFadH", "number": 7629, "title": "Rewrite wait/notify with wasm threads", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-04T17:58:42Z", "updated_at": "2023-12-05T17:07:05Z", "closed_at": "2023-12-05T17:07:03Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7629", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7629", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7629.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7629.patch", "merged_at": "2023-12-05T17:07:03Z"}, "body": "This commit rewrites and refactors the `ParkingSpot` implementation in Wasmtime. This is motivated by #7623 primarily which is something I haven't been able to reproduce but it doesn't look like a spurious issue. Additionally in reviewing the previous implementation I'm not sure if it was technically spec-compliant.\r\n\r\nPreviously each parking spot was modeled with a single condition variable. All threads blocking on the same address would block on the same condition variable. When waking up N threads the condition variable would either use `notify_all` or `notify_one` N times. The part I wasn't so sure about is that each thread, when waking up, would \"consume\" a wakeup notification on the way out, going back to sleep if a notification wasn't available. This was intended to handle spurious wakeups from the OS condition variable in use. This could mean, however, that a spurious wakeup of one thread could consume a notification from another thread. This was documented already as a possibility and \"probably ok\" but my gut is that this behavior led to #7623, although I haven't been able to construct a trace that would lead the test here to deadlock.\r\n\r\nOut of caution, however, this commit rewrites the implementation to be similar to what V8 and SpiderMonkey are doing. Both of those implementations are using a linked list of waiters for threads that are blocked and then notifying N threads dequeues N threads to wake them up. This makes the semantics of knowing which thread is waken up easier to understand from an implementation point of view since each wakeup notification deterministically goes to a specified thread. The tricky part about this implementation is that a doubly-linked-list needs to be maintained within `ParkingSpot` to handle this.\r\n\r\nWhile I was here I additionally refactored the interface of `ParkingSpot` to more closely match the raw interface of WebAssembly. This is intended to scope the problem being solved more narrowly to what wasm needs rather than trying to solve a more general problem at the same time.\r\n\r\nCloses #7623\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7629/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7628", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7628/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7628/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7628/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7628", "id": 2024348504, "node_id": "PR_kwDOBhDaXM5hFKrH", "number": 7628, "title": "winch: Rework `br_table` jumps", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-04T17:17:33Z", "updated_at": "2023-12-05T11:03:09Z", "closed_at": "2023-12-05T11:03:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7628", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7628", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7628.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7628.patch", "merged_at": "2023-12-05T11:03:08Z"}, "body": "\r\nFollow up to: https://github.com/bytecodealliance/wasmtime/pull/7616\r\n\r\nThe fuzzer has been running for a while now (~2 days) without reporting new issues. \r\n\r\nThis commit reworks the `br_table` logic so that it correctly handles all the jumps involved to each of the targets.\r\n\r\nEven though it is safe to use the default branch for type information, it is not safe to use it to derive the base stack pointer and base value stack length. Each block might and will probably have, different values as base stack pointer and base value stack length. This change ensures that each target offset is taken into account to balance the value stack prior to each jump.\r\n\r\n\r\n \r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7628/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7627", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7627/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7627/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7627/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7627", "id": 2023718393, "node_id": "PR_kwDOBhDaXM5hC_v-", "number": 7627, "title": "Update tutorial to use wasi_snapshot_preview1", "user": {"login": "matthewp", "id": 361671, "node_id": "MDQ6VXNlcjM2MTY3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/361671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewp", "html_url": "https://github.com/matthewp", "followers_url": "https://api.github.com/users/matthewp/followers", "following_url": "https://api.github.com/users/matthewp/following{/other_user}", "gists_url": "https://api.github.com/users/matthewp/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewp/subscriptions", "organizations_url": "https://api.github.com/users/matthewp/orgs", "repos_url": "https://api.github.com/users/matthewp/repos", "events_url": "https://api.github.com/users/matthewp/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-04T12:13:17Z", "updated_at": "2023-12-05T12:34:48Z", "closed_at": "2023-12-04T15:56:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7627", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7627", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7627.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7627.patch", "merged_at": "2023-12-04T15:56:04Z"}, "body": "\r\n- Was going through the tutorial and noticed it used the older (I think?) `wasi_unstable` which no longer updated. So updating here.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7627/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7627/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7626", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7626/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7626/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7626/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7626", "id": 2022383038, "node_id": "PR_kwDOBhDaXM5g-hnA", "number": 7626, "title": "Consolidate platform-specific definitions in Wasmtime", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-03T05:53:42Z", "updated_at": "2023-12-05T01:05:03Z", "closed_at": "2023-12-04T23:23:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7626", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7626", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7626.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7626.patch", "merged_at": "2023-12-04T23:23:16Z"}, "body": "Prior to this commit Wasmtime did not not have a style or system for\r\ncontaining platform-specific logic in files. The goal of this commit is\r\nto consolidate all platform-specific functionality into one location to\r\nmake it easier to port Wasmtime to new systems. This commit creates a\r\n`sys` module within the `wasmtime-runtime` crate which conditionally\r\ndefines all of the platform support that Wasmtime requires, namely\r\nthings related to virtual memory management and trap handling. Many of\r\nthe previous `unix.rs` files interspersed throughout the tree are now\r\nall located in a single `unix` directory. This additionally helps split\r\nout `miri`-specific functionality by pretending `miri` is its own\r\nplatform.\r\n\r\nThis change additionally goes through `#[cfg]` directives throughout\r\n`wasmtime-runtime`, `wasmtime-jit`, and `wasmtime` itself to place all\r\nof this target-specific functionality within this `sys` directory. The\r\nend state is that there are two new top-level modules in the\r\n`wasmtime-runtime` crate:\r\n\r\n* `arch` - this conditionally defines architecture-specific logic such\r\n  as the state used by backtraces, libcalls, etc.\r\n* `sys` - this conditionally defines OS or platform-specific logic such\r\n  as virtual memory management.\r\n\r\nOne secondary goal of this commit is to enable the ability to easily\r\nadd new platforms to Wasmtime, even if it's in a fork of Wasmtime.\r\nPreviously patches might have to touch a good number of locations where\r\nnow they'd ideally only have to touch `sys/mod.rs` to declare a new\r\nplatform and `sys/$platform/*.rs` to define all the functionality.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7626/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7625", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7625/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7625/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7625/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7625", "id": 2021763366, "node_id": "PR_kwDOBhDaXM5g8iRD", "number": 7625, "title": "Add `fields.has` to query if a header is present in a `fields`", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-12-02T00:22:16Z", "updated_at": "2023-12-05T08:00:45Z", "closed_at": "2023-12-05T08:00:44Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7625", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7625", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7625.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7625.patch", "merged_at": "2023-12-05T08:00:44Z"}, "body": "As discussed in https://github.com/WebAssembly/wasi-http/issues/82, it would be nice to be able to know when a header value exists, vs when it's empty.\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7625/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7622", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7622/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7622/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7622/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7622", "id": 2019704304, "node_id": "PR_kwDOBhDaXM5g1iEg", "number": 7622, "title": "mpk: optimize layout of protected stripes, again", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-11-30T23:44:41Z", "updated_at": "2023-12-01T23:25:10Z", "closed_at": "2023-12-01T18:58:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7622", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7622", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7622.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7622.patch", "merged_at": "2023-12-01T18:58:23Z"}, "body": "This is another attempt at #7603, attempting reduce the slab layout sizes of MPK-protected stripes. While experimenting with the limits of MPK-protected memory pools, @alexcrichton and I discovered that the current slab layout calculations were too conservative. This meant that the memory pool could not pack in as many memories as it should have been able: we were expecting, but not seeing, ~15x more memory slots over non-MPK memory pools.\r\n\r\nThis change brings together several fixes:\r\n- it more aggressively divides up the stripes (as in b212152)\r\n- it eliminates an extra stripe (as in 8813a30)\r\n- it replaces some uses of `checked_*` with `saturating_*` (as in fb22a20)\r\n- it improves some documentation\r\n- and, crucially, it reports back a larger value for `memory_and_guard_size`\r\n\r\nThe failures observed with #7603 when run with MPK (`WASMTIME_TEST_FORCE_MPK=1 cargo test`) were due to `Store::wasm_fault` not being able to identify which memory an OOB address belonged to. This is because the `MemoryPool` was underreporting the size of the region in which OOB accesses would fault. The correct value is provided by the new `SlabLayout::bytes_to_next_stripe_slot`: any OOB access within that larger region must fault because (1) the other stripes have different protection keys and (2) a `Store` can only use one protection key. We also use (2) to guarantee that `Store::wasm_fault` will be able to calculate the Wasm address from the raw address.\r\n\r\nThis change also provides a new `traps` test that will reproduce the failures from #7603; if we observe `SIGABRT` from that test, it will be a regression.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7622/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7622/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7621", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7621/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7621/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7621/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7621", "id": 2019381771, "node_id": "PR_kwDOBhDaXM5g0ah7", "number": 7621, "title": "winch(fuzzing): Tighten fuzzing criteria", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1900794583, "node_id": "MDU6TGFiZWwxOTAwNzk0NTgz", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/fuzzing", "name": "fuzzing", "color": "45a3b2", "default": false, "description": "Issues related to our fuzzing infrastructure"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-11-30T19:42:49Z", "updated_at": "2024-02-09T12:36:25Z", "closed_at": "2023-11-30T21:18:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7621", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7621", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7621.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7621.patch", "merged_at": "2023-11-30T21:18:39Z"}, "body": "This commit tightens the fuzzing criteria for Winch. The previous implementation only accounted for unsupported instructions. However, unsupported types can also cause the fuzzer to crash.\r\n\r\nWinch currently doesn't support `v128` and most of the `Ref` types.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7621/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7620", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7620/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7620/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7620/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7620", "id": 2019057955, "node_id": "PR_kwDOBhDaXM5gzShU", "number": 7620, "title": "Add release notes for 15.0.1", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-30T16:39:55Z", "updated_at": "2023-12-04T20:15:04Z", "closed_at": "2023-11-30T17:46:53Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7620", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7620", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7620.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7620.patch", "merged_at": "2023-11-30T17:46:53Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7620/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7620/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7619", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7619/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7619/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7619/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7619", "id": 2019046423, "node_id": "PR_kwDOBhDaXM5gzP8F", "number": 7619, "title": "Release Wasmtime 15.0.1", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-30T16:34:20Z", "updated_at": "2023-12-01T18:32:20Z", "closed_at": "2023-12-01T18:32:19Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7619", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7619", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7619.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7619.patch", "merged_at": "2023-12-01T18:32:19Z"}, "body": "This is an [automated pull request][process] from CI to create a patch\nrelease for Wasmtime 15.0.1, requested by @alexcrichton.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7619/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7619/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7618", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7618/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7618/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7618/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7618", "id": 2019019733, "node_id": "PR_kwDOBhDaXM5gzJ_K", "number": 7618, "title": "[15.0.0] Remove wasi-http \"checking authority\" log", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-30T16:21:04Z", "updated_at": "2023-12-01T05:21:06Z", "closed_at": "2023-12-01T05:21:05Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7618", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7618", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7618.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7618.patch", "merged_at": "2023-12-01T05:21:05Z"}, "body": "This is a backport of #7607", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7618/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7617", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7617/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7617/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7617/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7617", "id": 2019004784, "node_id": "PR_kwDOBhDaXM5gzGu3", "number": 7617, "title": "Add small tests for `wasi:random/{random,insecure}`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-30T16:14:27Z", "updated_at": "2023-11-30T17:01:36Z", "closed_at": "2023-11-30T17:01:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7617", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7617", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7617.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7617.patch", "merged_at": "2023-11-30T17:01:34Z"}, "body": "This followed #7613 with a test to ensure that the interface isn't accidentally left out in the future too.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7617/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7616", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7616/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7616/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7616/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7616", "id": 2018740194, "node_id": "PR_kwDOBhDaXM5gyMRv", "number": 7616, "title": "Revert \"winch: Ensure stack pointer for br_table\"", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-30T14:05:02Z", "updated_at": "2023-11-30T17:01:37Z", "closed_at": "2023-11-30T17:01:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7616", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7616", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7616.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7616.patch", "merged_at": "2023-11-30T17:01:35Z"}, "body": "Reverts bytecodealliance/wasmtime#7602\r\n\r\nThe fuzzer reported other issues related to `br_table`. I'd like to revert this change temporarily to:\r\n\r\n* Come up with the proper fix for this and the new edge cases.\r\n* Leave the fuzzer running locally a bit more to ensure that the fix handles all the possible edge cases. ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7616/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7616/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7615", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7615/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7615/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7615/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7615", "id": 2018084566, "node_id": "PR_kwDOBhDaXM5gv8Mi", "number": 7615, "title": "Cranelift: additional `icmp` & `select` ISLE opts", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-30T07:59:40Z", "updated_at": "2023-11-30T20:14:25Z", "closed_at": "2023-11-30T20:05:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7615", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7615", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7615.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7615.patch", "merged_at": "2023-11-30T20:05:01Z"}, "body": "I was writing a pattern for Rust's `Ord::cmp` ([context zulip thread](https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/3-way.20compare.20.28Rust.20.60cmp.60.2C.20C.2B.2B20.20.60.3C.3D.3E.60.29/near/404501312))\r\n\r\nhttps://github.com/rust-lang/rust/blob/e55544c8043ec2074c1ef2499afc78ee6b5108b7/library/core/src/cmp.rs#L1518-L1520\r\n\r\nAnd noticed that the `if *self == *other { Equal } else { Greater }` part is `if c { false } else { true }`.\r\n\r\nSo here's a smaller PR with some simpler sub-patterns first.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7615/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7615/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7614", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7614/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7614/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7614/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7614", "id": 2017792925, "node_id": "PR_kwDOBhDaXM5gu9NR", "number": 7614, "title": "[15.0.0] include `wasi:random/insecure{_seed}` in `command::add_to_linker`", "user": {"login": "dicej", "id": 1243153, "node_id": "MDQ6VXNlcjEyNDMxNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1243153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dicej", "html_url": "https://github.com/dicej", "followers_url": "https://api.github.com/users/dicej/followers", "following_url": "https://api.github.com/users/dicej/following{/other_user}", "gists_url": "https://api.github.com/users/dicej/gists{/gist_id}", "starred_url": "https://api.github.com/users/dicej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dicej/subscriptions", "organizations_url": "https://api.github.com/users/dicej/orgs", "repos_url": "https://api.github.com/users/dicej/repos", "events_url": "https://api.github.com/users/dicej/events{/privacy}", "received_events_url": "https://api.github.com/users/dicej/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-30T03:13:15Z", "updated_at": "2023-11-30T18:19:51Z", "closed_at": "2023-11-30T16:07:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7614", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7614", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7614.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7614.patch", "merged_at": "2023-11-30T16:07:46Z"}, "body": "This backports https://github.com/bytecodealliance/wasmtime/pull/7613 to the `release-15.0.0` branch.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7614/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7613", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7613/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7613/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7613/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7613", "id": 2017669714, "node_id": "PR_kwDOBhDaXM5gui92", "number": 7613, "title": "include `wasi:random/insecure{_seed}` in `command::add_to_linker`", "user": {"login": "dicej", "id": 1243153, "node_id": "MDQ6VXNlcjEyNDMxNTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1243153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dicej", "html_url": "https://github.com/dicej", "followers_url": "https://api.github.com/users/dicej/followers", "following_url": "https://api.github.com/users/dicej/following{/other_user}", "gists_url": "https://api.github.com/users/dicej/gists{/gist_id}", "starred_url": "https://api.github.com/users/dicej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dicej/subscriptions", "organizations_url": "https://api.github.com/users/dicej/orgs", "repos_url": "https://api.github.com/users/dicej/repos", "events_url": "https://api.github.com/users/dicej/events{/privacy}", "received_events_url": "https://api.github.com/users/dicej/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-30T00:45:13Z", "updated_at": "2023-11-30T03:14:33Z", "closed_at": "2023-11-30T01:31:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7613", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7613", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7613.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7613.patch", "merged_at": "2023-11-30T01:31:14Z"}, "body": "I believe these were omitted by mistake.\r\n\r\nTODO: We should definitely use the `wasmtime-wit-bindgen`-generated `add_to_linker` function for the `command` world if possible, which would avoid such mistakes in the future.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7613/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7611", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7611/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7611/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7611/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7611", "id": 2017539891, "node_id": "PR_kwDOBhDaXM5guGt6", "number": 7611, "title": "Revert \"mpk: optimize layout of protected stripes (#7603)\"", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-29T22:28:45Z", "updated_at": "2023-11-30T00:29:53Z", "closed_at": "2023-11-29T23:15:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7611", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7611", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7611.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7611.patch", "merged_at": "2023-11-29T23:15:28Z"}, "body": "This reverts commit 043e4cef69a4b22996c54c5d844ca236a69a0e5d. The following fails when running locally on an MPK-enabled machine:\r\n\r\n```\r\nWASMTIME_TEST_FORCE_MPK=1 cargo test\r\n```\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7611/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7611/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7610", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7610/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7610/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7610/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7610", "id": 2017482749, "node_id": "PR_kwDOBhDaXM5gt5yY", "number": 7610, "title": "Add extended version information to `wasmtime --version`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-29T21:52:54Z", "updated_at": "2023-11-29T23:01:30Z", "closed_at": "2023-11-29T23:01:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7610", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7610", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7610.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7610.patch", "merged_at": "2023-11-29T23:01:29Z"}, "body": "This commit adds some more information to `wasmtime --version` which includes the git commit plus the git commit's date. This matches `rustc -V` for example which was additionally copied to `wasm-tools` and mirrored as `wasm-tools -V`.\r\n\r\nPersonally I've found this useful since it can help point to exact commits and additionally quickly get a sense of how old a version is based on its commit date presented.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7610/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7610/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7609", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7609/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7609/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7609/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7609", "id": 2017415964, "node_id": "PR_kwDOBhDaXM5gtrDZ", "number": 7609, "title": "mpk: add an example testing the memory limits", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 3832704028, "node_id": "LA_kwDOBhDaXM7kcmwc", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:config", "name": "wasmtime:config", "color": "006b75", "default": false, "description": "Issues related to the configuration of Wasmtime"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-11-29T21:06:41Z", "updated_at": "2023-12-02T01:19:02Z", "closed_at": "2023-12-02T01:19:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7609", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7609", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7609.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7609.patch", "merged_at": "2023-12-02T01:19:01Z"}, "body": "This change adds an example program showing:\r\n- how to build a pool-allocated engine that uses MPK\r\n- the difference in the number of memory slots when creating an engine with MPK versus not\r\n\r\nThe output could look like:\r\n\r\n```console\r\n$ cargo run --example mpk\r\nwithout MPK:    14591 memory slots      85.5 TiB reserved\r\nwith MPK:       218861 memory slots     85.5 TiB reserved\r\n                14.999x more slots per reserved memory\r\n```\r\n\r\nThe example program probes exponentially larger memory pools to find the maximum available on the current system. This search is highly dependent on the memory available, the OS limits on VMAs, and various engine configuration parameters. See the example docs for more details.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7609/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7608", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7608/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7608/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7608/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7608", "id": 2017407499, "node_id": "PR_kwDOBhDaXM5gtpNV", "number": 7608, "title": "wasi-sockets: Fix flaky UDP test.", "user": {"login": "badeend", "id": 3646561, "node_id": "MDQ6VXNlcjM2NDY1NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3646561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badeend", "html_url": "https://github.com/badeend", "followers_url": "https://api.github.com/users/badeend/followers", "following_url": "https://api.github.com/users/badeend/following{/other_user}", "gists_url": "https://api.github.com/users/badeend/gists{/gist_id}", "starred_url": "https://api.github.com/users/badeend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badeend/subscriptions", "organizations_url": "https://api.github.com/users/badeend/orgs", "repos_url": "https://api.github.com/users/badeend/repos", "events_url": "https://api.github.com/users/badeend/events{/privacy}", "received_events_url": "https://api.github.com/users/badeend/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-29T20:59:57Z", "updated_at": "2023-11-29T21:41:28Z", "closed_at": "2023-11-29T21:41:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7608", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7608", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7608.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7608.patch", "merged_at": "2023-11-29T21:41:28Z"}, "body": "Fixes: https://github.com/bytecodealliance/wasmtime/issues/7606\r\n\r\nThird time's a charm? :) ", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7608/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7607", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7607/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7607/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7607/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7607", "id": 2017296700, "node_id": "PR_kwDOBhDaXM5gtQ5I", "number": 7607, "title": "Remove wasi-http \"checking authority\" log", "user": {"login": "itowlson", "id": 865538, "node_id": "MDQ6VXNlcjg2NTUzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/865538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itowlson", "html_url": "https://github.com/itowlson", "followers_url": "https://api.github.com/users/itowlson/followers", "following_url": "https://api.github.com/users/itowlson/following{/other_user}", "gists_url": "https://api.github.com/users/itowlson/gists{/gist_id}", "starred_url": "https://api.github.com/users/itowlson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itowlson/subscriptions", "organizations_url": "https://api.github.com/users/itowlson/orgs", "repos_url": "https://api.github.com/users/itowlson/repos", "events_url": "https://api.github.com/users/itowlson/events{/privacy}", "received_events_url": "https://api.github.com/users/itowlson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-29T19:38:55Z", "updated_at": "2023-11-29T20:32:04Z", "closed_at": "2023-11-29T20:32:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7607", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7607", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7607.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7607.patch", "merged_at": "2023-11-29T20:32:04Z"}, "body": "The Spin framework uses `wasi-http` as a crate.  Since updating to Wasmtime 15, whenever a Spin guest makes an outbound HTTP call, it prints \"checking authority (whatever)\".  This PR removes that extraneous print.\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7607/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7604", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7604/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7604/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7604/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7604", "id": 2017215233, "node_id": "PR_kwDOBhDaXM5gs-zO", "number": 7604, "title": "Update wasm-tools crates", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-29T18:52:23Z", "updated_at": "2023-11-29T19:38:25Z", "closed_at": "2023-11-29T19:38:24Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7604", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7604", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7604.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7604.patch", "merged_at": "2023-11-29T19:38:24Z"}, "body": "This fixes a fuzz-bug found from the last update where GC types were accidentally leaking through validation.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7604/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7603", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7603/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7603/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7603/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7603", "id": 2017209986, "node_id": "PR_kwDOBhDaXM5gs9pj", "number": 7603, "title": "mpk: optimize layout of protected stripes", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-29T18:48:56Z", "updated_at": "2023-11-29T20:58:37Z", "closed_at": "2023-11-29T20:58:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7603", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7603", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7603.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7603.patch", "merged_at": "2023-11-29T20:58:36Z"}, "body": "While experimenting with the limits of MPK-protected memory pools, @alexcrichton and I discovered that the current slab layout calculations were too conservative. This meant that the memory pool could not pack in as many memories as it should have been able: we were expecting, but not seeing, ~15x more memory slots over non-MPK memory pools.\r\n\r\nThe fix ends up being simpler than the original: we must maintain the codegen constraints that expect a static memory to be inaccessible for OOB access within a `static_memory_maximum_size +\r\nstatic_memory_guard_size` region (called `expected_slot_bytes + guard_bytes` in `memory_pool.rs`). By dividing up that region between the stripes, we still guarantee that the region is inaccessible by packing in other MPK-protected stripes. And we still need to make sure that the `post_slab_guard_bytes` add up to that region. These changes fix the memory inefficiency issues we were seeing.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7603/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7602", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7602/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7602/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7602/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7602", "id": 2017090147, "node_id": "PR_kwDOBhDaXM5gsjzP", "number": 7602, "title": "winch: Ensure stack pointer for br_table", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-11-29T17:31:45Z", "updated_at": "2023-11-29T20:41:49Z", "closed_at": "2023-11-29T20:41:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7602", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7602", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7602.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7602.patch", "merged_at": "2023-11-29T20:41:48Z"}, "body": "Follow up to:\r\n\r\nhttps://github.com/bytecodealliance/wasmtime/pull/7547\r\n\r\nIn which I overlooked this change and the fuzzer found an issue with the following program:\r\n\r\n```wat\r\n(module\r\n  (func (export \"\") (result i32)\r\n    block (result i32)\r\n       i32.const 0\r\n    end\r\n    i32.const 0\r\n    i32.const 0\r\n    br_table 0\r\n  )\r\n)\r\n```\r\n\r\nThis commit ensures that the stack pointer is correctly positioned when emitting br_table.\r\n\r\nWe can't know for sure which branch will be taken, but since all branches must share the same type information, we can be certain that the expectations regarding the stack pointer are the same and thus can we use the default target in order to ensure the correct placement.\r\n\r\nThis change also adds some missing spec test cases for `br_table`.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7602/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7602/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7601", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7601/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7601/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7601/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7601", "id": 2017032747, "node_id": "PR_kwDOBhDaXM5gsXUj", "number": 7601, "title": "add clang format", "user": {"login": "rockwotj", "id": 8669100, "node_id": "MDQ6VXNlcjg2NjkxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8669100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockwotj", "html_url": "https://github.com/rockwotj", "followers_url": "https://api.github.com/users/rockwotj/followers", "following_url": "https://api.github.com/users/rockwotj/following{/other_user}", "gists_url": "https://api.github.com/users/rockwotj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockwotj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockwotj/subscriptions", "organizations_url": "https://api.github.com/users/rockwotj/orgs", "repos_url": "https://api.github.com/users/rockwotj/repos", "events_url": "https://api.github.com/users/rockwotj/events{/privacy}", "received_events_url": "https://api.github.com/users/rockwotj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-29T16:58:10Z", "updated_at": "2023-12-02T01:17:47Z", "closed_at": "2023-11-29T19:07:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7601", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7601", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7601.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7601.patch", "merged_at": "2023-11-29T19:07:41Z"}, "body": "Add a .clang-format for the C code in wasmtime.\n\nWe choose the WebKit style because out of all the style options available in .clang-format, it was the closes to the existing style of the c-api crate. I am not really interested in tuning the settings more, but more want consistency and to let the tool format instead of it happening manually.\n\nThere is also a check added in CI for it, it always runs and should be very fast. It uses the latest installed `clang-format` binary in GitHub actions, but I am also happy to download a fixed version if we want to pin the version.\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7601/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7601/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7599", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7599/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7599/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7599/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7599", "id": 2016030320, "node_id": "PR_kwDOBhDaXM5go6xZ", "number": 7599, "title": "Cranelift: Remove some unneeded `arithmetic.isle` patterns", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-29T08:05:01Z", "updated_at": "2023-11-29T23:13:44Z", "closed_at": "2023-11-29T17:03:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7599", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7599", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7599.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7599.patch", "merged_at": "2023-11-29T17:03:44Z"}, "body": "I noticed that, thanks to const prop, a few of the patterns in `arithmetic.isle` aren't actually needed to keep the same behaviour.\r\n\r\nThis seems to have mostly lowered the register numbers in the affected tests, so it seems at least plausible.  But if it's expected that patterns don't don't rely on canonicalization and it's better to keep these duplicates, then please just close this PR.\r\n\r\n(I needed to learn how to edit patterns and write+run tests against them for what I actually want to do, so this was a useful learning exercise for me whether it lands or not.)\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7599/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7599/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7597", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7597/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7597/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7597/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7597", "id": 2015374131, "node_id": "PR_kwDOBhDaXM5gmsuL", "number": 7597, "title": "Trim `wasmtime serve`'s default world", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-28T21:46:46Z", "updated_at": "2023-11-29T20:08:03Z", "closed_at": "2023-11-29T20:08:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7597", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7597", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7597.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7597.patch", "merged_at": "2023-11-29T20:08:02Z"}, "body": "This commit aims to address a discrepancy in Wasmtime where the world supported by `wasmtime serve` is too large today. This includes WIT interfaces which are not specified in `wasi:http/proxy` such as `wasi:filesystem/types`, aka access to a filesystem.\r\n\r\nThis commit slims down `wasmtime serve` to, by default, only supporting the `wasi:http/proxy` world. Like with `wasmtime run` various CLI flags can be passed to enable more interfaces, however:\r\n\r\n* `-Scommon` - this enables \"common\" interfaces such as `wasi:filesystem`, `wasi:sockets`, and `wasi:cli/*`.\r\n* `-Snn` - this enables wasi-nn\r\n\r\nIt's expected that more will get extended here over time too.\r\n\r\nThis change is enabled by a third build of the adapter, a \"proxy\" mode. In this mode most functions are cfg'd to return `ERRNO_NOTSUP` to indicate that the runtime does not support it. Notably this includes the filesystem, arguments, and environment variables.\r\n\r\nThis change is tested by updating all `api_proxy*` tests to use this new adapter which is now required that many previous interfaces are no longer present by default in the proxy world.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7597/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7596", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7596/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7596/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7596/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7596", "id": 2014985596, "node_id": "PR_kwDOBhDaXM5glW7m", "number": 7596, "title": "Replace the preview2 table's HashMap storage with a Vec", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-28T17:49:22Z", "updated_at": "2023-11-29T19:07:42Z", "closed_at": "2023-11-29T19:07:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7596", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7596", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7596.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7596.patch", "merged_at": "2023-11-29T19:07:41Z"}, "body": "Fix the TODO in preview2's table implementation about performance of key generation once the index space has wrapped; instead of incrementing a u32, store resources in a vector and keep a free queue in the empty slots.\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7596/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7596/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7595", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7595/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7595/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7595/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7595", "id": 2014899488, "node_id": "PR_kwDOBhDaXM5glD4l", "number": 7595, "title": "c-api: support disabling mach ports use on macos", "user": {"login": "casimiro", "id": 456648, "node_id": "MDQ6VXNlcjQ1NjY0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/456648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/casimiro", "html_url": "https://github.com/casimiro", "followers_url": "https://api.github.com/users/casimiro/followers", "following_url": "https://api.github.com/users/casimiro/following{/other_user}", "gists_url": "https://api.github.com/users/casimiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/casimiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/casimiro/subscriptions", "organizations_url": "https://api.github.com/users/casimiro/orgs", "repos_url": "https://api.github.com/users/casimiro/repos", "events_url": "https://api.github.com/users/casimiro/events{/privacy}", "received_events_url": "https://api.github.com/users/casimiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-28T17:03:24Z", "updated_at": "2023-11-28T17:55:05Z", "closed_at": "2023-11-28T17:55:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7595", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7595", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7595.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7595.patch", "merged_at": "2023-11-28T17:55:05Z"}, "body": "This PR proposes exposing [macos_use_mach_ports](https://docs.wasmtime.dev/api/wasmtime/struct.Config.html#method.macos_use_mach_ports) engine configuration in the c-api.\r\n\r\nAs discussed [here](https://github.com/bytecodealliance/wasmtime/issues/6785) host applications that employ fork strategies might benefit from disabling `macos_use_mach_ports` when running on macOS. \r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7595/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7595/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7593", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7593/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7593/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7593/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7593", "id": 2014385797, "node_id": "PR_kwDOBhDaXM5gjSg5", "number": 7593, "title": "PCC: Fix several aarch64 check_constant failures", "user": {"login": "feilongjiang", "id": 18413380, "node_id": "MDQ6VXNlcjE4NDEzMzgw", "avatar_url": "https://avatars.githubusercontent.com/u/18413380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feilongjiang", "html_url": "https://github.com/feilongjiang", "followers_url": "https://api.github.com/users/feilongjiang/followers", "following_url": "https://api.github.com/users/feilongjiang/following{/other_user}", "gists_url": "https://api.github.com/users/feilongjiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/feilongjiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feilongjiang/subscriptions", "organizations_url": "https://api.github.com/users/feilongjiang/orgs", "repos_url": "https://api.github.com/users/feilongjiang/repos", "events_url": "https://api.github.com/users/feilongjiang/events{/privacy}", "received_events_url": "https://api.github.com/users/feilongjiang/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877973890, "node_id": "MDU6TGFiZWwxODc3OTczODkw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:machinst", "name": "cranelift:area:machinst", "color": "AB0FAC", "default": false, "description": "Issues related to instruction selection and the new MachInst backend."}, {"id": 1994488670, "node_id": "MDU6TGFiZWwxOTk0NDg4Njcw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:area:aarch64", "name": "cranelift:area:aarch64", "color": "fbca04", "default": false, "description": "Issues related to AArch64 backend."}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-11-28T12:59:25Z", "updated_at": "2023-12-13T00:19:13Z", "closed_at": "2023-12-12T20:13:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7593", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7593", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7593.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7593.patch", "merged_at": "2023-12-12T20:13:31Z"}, "body": "Hi team, please consider:\r\nThis patch fixes several aarch64 check_constant failures:\r\n\r\n1. `check_subsume` for `AluRRImmLogic` failed due to the mismatch of fact width\r\n\r\n  isle rule for `orr_imm` always generates fact with bit_width 64 regardless of\r\n  immediate type. So when Type is I32, `check_subsume` will be failed.\r\n  This could be reproduced with the simple wasm module [1].\r\n\r\n2. `MovN` generates incorrect fact range value when `first_is_inverted` is true\r\n\r\n  `running_value` should be calculated as `!(((!imm16) & 0xffff) << shift)` or\r\n  `!(u64::from(imm.bits) << shift)`\r\n  This could be reproduced with the simple wasm module [2].\r\n\r\nAdded two test cases in cranelift/filetests/filetests/pcc/succeed/const.clif.\r\n\r\nAdditional fix for `get_fact_or_default`:\r\n\r\n  `trace!` treats `reg` as VirtualReg and it will panic when `reg` is RealReg and\r\n  `trace-log` feature is enabled.\r\n\r\n\r\n[1]:\r\n```wasm\r\n;; test_logic.wat\r\n(module\r\n  (func (export \"test_logic\") (result i32) (i32.const 0x100010))\r\n)\r\n```\r\n[2]:\r\n```wasm\r\n;; test_const.wat\r\n(module\r\n  (func (export \"test_constant\") (result i64) (i64.const 0x0009ffffffff))\r\n)\r\n```\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7593/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7591", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7591/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7591/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7591/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7591", "id": 2013386132, "node_id": "PR_kwDOBhDaXM5gf5I2", "number": 7591, "title": "Raise Http{Request,Response}BodyError when Content-Length doesn't match", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-28T00:47:44Z", "updated_at": "2023-11-29T19:50:58Z", "closed_at": "2023-11-29T19:50:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7591", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7591", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7591.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7591.patch", "merged_at": "2023-11-29T19:50:57Z"}, "body": "Instead of `InternalError`, raise a more specific request or response body size error when the number of bytes written to the outgoing body doesn't match the expectation set by the `Content-Length` header.\r\n\r\nThis change does overload the meaning of the `http-{request,response}-body-size` errors, as they were previously defined as meaning specifically that the body was too large, while this PR uses them to mean that the body length didn't match the expected length.\r\n\r\nAddresses https://github.com/WebAssembly/WASI/issues/810\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7591/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7590", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7590/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7590/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7590/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7590", "id": 2013282506, "node_id": "PR_kwDOBhDaXM5gfiRV", "number": 7590, "title": "Winch: cleanup stack in br_if in non-fallthrough case", "user": {"login": "jeffcharles", "id": 154890, "node_id": "MDQ6VXNlcjE1NDg5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/154890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffcharles", "html_url": "https://github.com/jeffcharles", "followers_url": "https://api.github.com/users/jeffcharles/followers", "following_url": "https://api.github.com/users/jeffcharles/following{/other_user}", "gists_url": "https://api.github.com/users/jeffcharles/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffcharles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffcharles/subscriptions", "organizations_url": "https://api.github.com/users/jeffcharles/orgs", "repos_url": "https://api.github.com/users/jeffcharles/repos", "events_url": "https://api.github.com/users/jeffcharles/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffcharles/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-27T23:07:35Z", "updated_at": "2023-11-28T22:04:10Z", "closed_at": "2023-11-28T20:53:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7590", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7590", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7590.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7590.patch", "merged_at": "2023-11-28T20:53:02Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\nI discovered that executing the following module compiled with Winch causes a segmentation fault:\r\n\r\n```wat\r\n(module\r\n  (func (export \"\") \r\n    call 1\r\n    call 1\r\n    br_if 0\r\n    drop\r\n  )\r\n  (func (;1;) (result i32)\r\n    i32.const 1\r\n  )\r\n)\r\n```\r\n\r\nThe cause appears to be that the code that would increment `rsp` to balance the machine stack is jumped over when the `br_if` path is taken.\r\n\r\nWhat appears to work is, if the frame's `sp_offset` is different than the current `sp_offset`, we invert the existing jump and execute instructions to balance the stack before jumping to the frame's label, and reset the `sp_offset` before continuing with the fallthrough code (falling through in terms of the `br_if`, not the machine code jump). In the case where there is no difference between `sp_offset`s, we can use the existing `jne` machine code emission since we don't need to run any stack balancing instructions.\r\n\r\nIn terms of machine instructions, we'd be changing\r\n\r\n```\r\nsub rsp, 4\r\ntest <reg> <reg>\r\njne end\r\nadd rsp, 4\r\nend:\r\nadd rsp, 8\r\npop rbp\r\nret\r\n```\r\n\r\nto\r\n\r\n```\r\nsub rsp, 4\r\ntest <reg> <reg>\r\njeq fallthrough\r\nadd rsp, 4\r\njmp end\r\nfallthrough:\r\nadd rsp, 4\r\nend:\r\nadd rsp, 8\r\npop rbp\r\nret\r\n```", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7590/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7589", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7589/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7589/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7589/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7589", "id": 2013239834, "node_id": "PR_kwDOBhDaXM5gfYzz", "number": 7589, "title": "wasi-http spec tweaks", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-27T22:32:57Z", "updated_at": "2023-11-29T18:59:34Z", "closed_at": "2023-11-29T18:59:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7589", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7589", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7589.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7589.patch", "merged_at": "2023-11-29T18:59:33Z"}, "body": "This is a draft of some proposed tweaks to the wasi-http spec:\n\n* Removing the `-ms` suffix on the timout setters, and references to the value being in milliseconds\n* Making the `future-trailers.get` method return the trailers only once, and as a result also returning an owned `HostFields`\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7589/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7589/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7587", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7587/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7587/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7587/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7587", "id": 2012796879, "node_id": "PR_kwDOBhDaXM5gd26a", "number": 7587, "title": "Update the wasm-tools family of crates", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}, {"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1907753318, "node_id": "MDU6TGFiZWwxOTA3NzUzMzE4", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:wasm", "name": "cranelift:wasm", "color": "ededed", "default": false, "description": null}, {"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-27T17:51:32Z", "updated_at": "2023-11-27T19:09:08Z", "closed_at": "2023-11-27T19:09:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7587", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7587", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7587.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7587.patch", "merged_at": "2023-11-27T19:09:06Z"}, "body": "This commit updates to the latest wasm-tools and `wit-bindgen` to bring the family of crates forward. This update notably includes Nick's work on packed indices in the `wasmparser` crate for validation for the upcoming implementation of GC types. This meant that translation from `wasmparser` types to Wasmtime types now may work with a \"type id\" instead of just a type index which required plumbing not only Wasmtime's own type information but additionally `wasmparser`'s type information throughout translation.\r\n\r\nThis required a fair bit of refactoring to get this working but no change in functionality is intended, only a different way of doing everything prior.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7587/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7586", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7586/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7586/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7586/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7586", "id": 2012700058, "node_id": "PR_kwDOBhDaXM5gdhxs", "number": 7586, "title": "preview1: Update semantics of seeking on appending files", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-27T16:52:48Z", "updated_at": "2023-11-27T19:45:28Z", "closed_at": "2023-11-27T17:49:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7586", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7586", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7586.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7586.patch", "merged_at": "2023-11-27T17:49:56Z"}, "body": "This commit updates the semantics of `fd_{seek,tell}` on preview1 to match native Unix when used with appending files. On Unix `write` claims to always update the file position pointer to the end of the file, so this commit implements that instead of the previous logic of ignoring the position update for appending files. This currently requires an extra roundtrip via `stat` to figure out the size of the file, but for now that seems to be the best that can be done.\r\n\r\nCloses #7583\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7586/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7585", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7585/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7585/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7585/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7585", "id": 2012685375, "node_id": "PR_kwDOBhDaXM5gdelQ", "number": 7585, "title": "Fix typo in wasmtime crate documentation", "user": {"login": "cstyles", "id": 4869194, "node_id": "MDQ6VXNlcjQ4NjkxOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4869194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cstyles", "html_url": "https://github.com/cstyles", "followers_url": "https://api.github.com/users/cstyles/followers", "following_url": "https://api.github.com/users/cstyles/following{/other_user}", "gists_url": "https://api.github.com/users/cstyles/gists{/gist_id}", "starred_url": "https://api.github.com/users/cstyles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cstyles/subscriptions", "organizations_url": "https://api.github.com/users/cstyles/orgs", "repos_url": "https://api.github.com/users/cstyles/repos", "events_url": "https://api.github.com/users/cstyles/events{/privacy}", "received_events_url": "https://api.github.com/users/cstyles/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-27T16:44:25Z", "updated_at": "2023-11-27T17:36:15Z", "closed_at": "2023-11-27T17:36:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7585", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7585", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7585.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7585.patch", "merged_at": "2023-11-27T17:36:14Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7585/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7585/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7584", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7584/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7584/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7584/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7584", "id": 2012644677, "node_id": "PR_kwDOBhDaXM5gdVtK", "number": 7584, "title": "cranelift-jit: implement GOT relocations for aarch64", "user": {"login": "Mrmaxmeier", "id": 3913977, "node_id": "MDQ6VXNlcjM5MTM5Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/3913977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mrmaxmeier", "html_url": "https://github.com/Mrmaxmeier", "followers_url": "https://api.github.com/users/Mrmaxmeier/followers", "following_url": "https://api.github.com/users/Mrmaxmeier/following{/other_user}", "gists_url": "https://api.github.com/users/Mrmaxmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mrmaxmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mrmaxmeier/subscriptions", "organizations_url": "https://api.github.com/users/Mrmaxmeier/orgs", "repos_url": "https://api.github.com/users/Mrmaxmeier/repos", "events_url": "https://api.github.com/users/Mrmaxmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/Mrmaxmeier/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-27T16:23:50Z", "updated_at": "2023-11-27T21:07:27Z", "closed_at": "2023-11-27T20:57:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7584", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7584", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7584.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7584.patch", "merged_at": "2023-11-27T20:57:11Z"}, "body": "This is a prerequisite for #2735, but doesn't implement the PLT entries yet.\r\n(I'm using hot function replace, which happens in the GOT but doesn't strictly require the PLT.)\r\n\r\nThe instruction encoding for `adrp` is kind of complicated, but re-using existing lowering infrastructure doesn't work well since it's not designed to do partial updates.  Xref: #5550, which introduced these relocation types.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7584/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7577", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7577/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7577/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7577/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7577", "id": 2007228524, "node_id": "PR_kwDOBhDaXM5gLcNu", "number": 7577, "title": "Fix broken link in ISLE language reference", "user": {"login": "brettcannon", "id": 54418, "node_id": "MDQ6VXNlcjU0NDE4", "avatar_url": "https://avatars.githubusercontent.com/u/54418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brettcannon", "html_url": "https://github.com/brettcannon", "followers_url": "https://api.github.com/users/brettcannon/followers", "following_url": "https://api.github.com/users/brettcannon/following{/other_user}", "gists_url": "https://api.github.com/users/brettcannon/gists{/gist_id}", "starred_url": "https://api.github.com/users/brettcannon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brettcannon/subscriptions", "organizations_url": "https://api.github.com/users/brettcannon/orgs", "repos_url": "https://api.github.com/users/brettcannon/repos", "events_url": "https://api.github.com/users/brettcannon/events{/privacy}", "received_events_url": "https://api.github.com/users/brettcannon/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-22T23:10:26Z", "updated_at": "2023-11-23T00:45:58Z", "closed_at": "2023-11-23T00:28:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7577", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7577", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7577.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7577.patch", "merged_at": "2023-11-23T00:28:46Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7577/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7576", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7576/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7576/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7576/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7576", "id": 2007179997, "node_id": "PR_kwDOBhDaXM5gLRvN", "number": 7576, "title": "mpk: allow forcing MPK during tests", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-22T22:09:57Z", "updated_at": "2023-11-28T15:34:05Z", "closed_at": "2023-11-28T15:34:05Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7576", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7576", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7576.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7576.patch", "merged_at": "2023-11-28T15:34:04Z"}, "body": "For testing on machines on which we know MPK is enabled, we want to be\nable to force-enable MPK, ensuring we get coverage of MPK-related code.\nThis change adds a `WASMTIME_TEST_FORCE_MPK` environment variable which,\nwhen set, sets the pooling allocator configuration to force-enable MPK.\nThis variable, like the `WASMTIME_TEST_NO_HOG_MEMORY` variable it is\nstyled from, could be used in CI workflows on which we know MPK should\nbe available.\n\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7576/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7575", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7575/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7575/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7575/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7575", "id": 2007175289, "node_id": "PR_kwDOBhDaXM5gLQun", "number": 7575, "title": "mpk: fix CPUID bit check", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-22T22:04:21Z", "updated_at": "2023-11-22T22:55:46Z", "closed_at": "2023-11-22T22:55:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7575", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7575", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7575.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7575.patch", "merged_at": "2023-11-22T22:55:45Z"}, "body": "This bug was discovered when testing with QEMU: the documentation states\nthat \"bit 3\" should be checked but this is a 0-based bit. The check\npreviously performed a 1-based \"bit 3\" check, which tests the UMIP\nfeature. This change switches to use the correct bit.\n\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7575/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7575/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7574", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7574/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7574/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7574/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7574", "id": 2007053636, "node_id": "PR_kwDOBhDaXM5gK14h", "number": 7574, "title": "ci: log CPU details when testing", "user": {"login": "abrown", "id": 541880, "node_id": "MDQ6VXNlcjU0MTg4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/541880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abrown", "html_url": "https://github.com/abrown", "followers_url": "https://api.github.com/users/abrown/followers", "following_url": "https://api.github.com/users/abrown/following{/other_user}", "gists_url": "https://api.github.com/users/abrown/gists{/gist_id}", "starred_url": "https://api.github.com/users/abrown/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abrown/subscriptions", "organizations_url": "https://api.github.com/users/abrown/orgs", "repos_url": "https://api.github.com/users/abrown/repos", "events_url": "https://api.github.com/users/abrown/events{/privacy}", "received_events_url": "https://api.github.com/users/abrown/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-22T20:14:40Z", "updated_at": "2023-11-22T22:20:17Z", "closed_at": "2023-11-22T22:20:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7574", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7574", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7574.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7574.patch", "merged_at": "2023-11-22T22:20:17Z"}, "body": "When testing, there are certain CPU-dependent features that influence Cranelift's codegen (e.g., availability of AVX512 instructions). This additional CI step logs the current CPU information to aid in troubleshooting, such as the MPK-related troubleshooting over in #7445. Also, if we let this run in CI for a while, we may be able to run queries on the logs to determine how often jobs run on servers with certain features enabled.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7574/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7574/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7573", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7573/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7573/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7573/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7573", "id": 2007026042, "node_id": "PR_kwDOBhDaXM5gKv0Q", "number": 7573, "title": "Winch: fix bug by spilling when emitting func call", "user": {"login": "jeffcharles", "id": 154890, "node_id": "MDQ6VXNlcjE1NDg5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/154890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffcharles", "html_url": "https://github.com/jeffcharles", "followers_url": "https://api.github.com/users/jeffcharles/followers", "following_url": "https://api.github.com/users/jeffcharles/following{/other_user}", "gists_url": "https://api.github.com/users/jeffcharles/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffcharles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffcharles/subscriptions", "organizations_url": "https://api.github.com/users/jeffcharles/orgs", "repos_url": "https://api.github.com/users/jeffcharles/repos", "events_url": "https://api.github.com/users/jeffcharles/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffcharles/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-22T19:52:05Z", "updated_at": "2023-11-23T14:36:05Z", "closed_at": "2023-11-23T12:43:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7573", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7573", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7573.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7573.patch", "merged_at": "2023-11-23T12:43:10Z"}, "body": "<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\nThe differential fuzzer triggered a `mem.slot.offset.as_u32() == masm.sp_offset().as_u32()` assertion while compiling the following module:\r\n\r\n```wat\r\n(module\r\n  (func (;0;) (param i32) (result i32)\r\n    local.get 0\r\n    i32.const 1\r\n    call 0\r\n    i32.const 1\r\n    call 0\r\n    br_if 0 (;@0;)\r\n    unreachable\r\n  )\r\n  (export \"\" (func 0))\r\n)\r\n```\r\n\r\nIt looks like cause of the issue is that using `save_live_registers_and_calculate_sizeof` can violate a value stack invariant by placing `Memory` entries after `Local` and `Reg` entries.\r\n\r\nTo remediate this, we can trigger a spill instead of only saving live registers when emitting the machine code for a function call and we can calculate the amount of stack space consumed by the call in the `cleanup` method by summing the size of each memory entry used as an argument for the call.\r\n\r\nAs a result of spilling, I needed to add specify which scratch register to use for `funcref`s. I also needed to add a spill at the start of visiting a `call_indirect` operator. This is because the machine code associated with a spill that occurs when calling a function to initialize the table element may be jumped over, resulting in the codegen context state being out of sync with the machine state, which potentially causes the machine stack to become unbalanced.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7573/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7573/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7572", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7572/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7572/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7572/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7572", "id": 2006952675, "node_id": "PR_kwDOBhDaXM5gKfkP", "number": 7572, "title": "c-api: support accessing the module of an instance_pre", "user": {"login": "rockwotj", "id": 8669100, "node_id": "MDQ6VXNlcjg2NjkxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8669100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockwotj", "html_url": "https://github.com/rockwotj", "followers_url": "https://api.github.com/users/rockwotj/followers", "following_url": "https://api.github.com/users/rockwotj/following{/other_user}", "gists_url": "https://api.github.com/users/rockwotj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockwotj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockwotj/subscriptions", "organizations_url": "https://api.github.com/users/rockwotj/orgs", "repos_url": "https://api.github.com/users/rockwotj/repos", "events_url": "https://api.github.com/users/rockwotj/events{/privacy}", "received_events_url": "https://api.github.com/users/rockwotj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1843568109, "node_id": "MDU6TGFiZWwxODQzNTY4MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:c-api", "name": "wasmtime:c-api", "color": "006b75", "default": false, "description": "Issues pertaining to the C API."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-22T18:59:53Z", "updated_at": "2023-11-22T21:08:58Z", "closed_at": "2023-11-22T20:25:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7572", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7572", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7572.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7572.patch", "merged_at": "2023-11-22T20:25:47Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7572/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7570", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7570/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7570/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7570/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7570", "id": 2006195918, "node_id": "PR_kwDOBhDaXM5gH4SV", "number": 7570, "title": "wasi-sockets: integration test & internal documentation updates", "user": {"login": "badeend", "id": 3646561, "node_id": "MDQ6VXNlcjM2NDY1NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/3646561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badeend", "html_url": "https://github.com/badeend", "followers_url": "https://api.github.com/users/badeend/followers", "following_url": "https://api.github.com/users/badeend/following{/other_user}", "gists_url": "https://api.github.com/users/badeend/gists{/gist_id}", "starred_url": "https://api.github.com/users/badeend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badeend/subscriptions", "organizations_url": "https://api.github.com/users/badeend/orgs", "repos_url": "https://api.github.com/users/badeend/repos", "events_url": "https://api.github.com/users/badeend/events{/privacy}", "received_events_url": "https://api.github.com/users/badeend/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-22T12:03:23Z", "updated_at": "2023-11-29T19:46:01Z", "closed_at": "2023-11-29T19:46:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7570", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7570", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7570.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7570.patch", "merged_at": "2023-11-29T19:46:01Z"}, "body": "- Implement timeout on all blocking utility methods in the test suite.\r\n- Expand documentation of compatibility fixes. Alex suggested this in https://github.com/bytecodealliance/wasmtime/pull/7423", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7570/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7570/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7569", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7569/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7569/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7569/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7569", "id": 2004851392, "node_id": "PR_kwDOBhDaXM5gDTjl", "number": 7569, "title": "wasi: fs time precision option", "user": {"login": "guybedford", "id": 598730, "node_id": "MDQ6VXNlcjU5ODczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/598730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guybedford", "html_url": "https://github.com/guybedford", "followers_url": "https://api.github.com/users/guybedford/followers", "following_url": "https://api.github.com/users/guybedford/following{/other_user}", "gists_url": "https://api.github.com/users/guybedford/gists{/gist_id}", "starred_url": "https://api.github.com/users/guybedford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guybedford/subscriptions", "organizations_url": "https://api.github.com/users/guybedford/orgs", "repos_url": "https://api.github.com/users/guybedford/repos", "events_url": "https://api.github.com/users/guybedford/events{/privacy}", "received_events_url": "https://api.github.com/users/guybedford/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2023-11-21T18:01:50Z", "updated_at": "2024-01-23T19:57:38Z", "closed_at": "2023-11-27T04:50:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7569", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7569", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7569.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7569.patch", "merged_at": "2023-11-27T04:50:21Z"}, "body": "Node.js mtime setting only works up to microsecond accuracy.\r\n\r\nThis updates the test to work at this level at minimum when the `FS_TIME_PRECISION` option is set.\r\n\r\n~~We could make this a configurable test option, I just wasn't sure how to set up such a conditional build feature for the test program - suggestions welcome if not reducing overall accuracy is preferred.~~", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7569/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7569/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7566", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7566/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7566/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7566/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7566", "id": 2004082800, "node_id": "PR_kwDOBhDaXM5gAp2e", "number": 7566, "title": "docs: clarify definition in Introduction", "user": {"login": "vwkd", "id": 33468089, "node_id": "MDQ6VXNlcjMzNDY4MDg5", "avatar_url": "https://avatars.githubusercontent.com/u/33468089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vwkd", "html_url": "https://github.com/vwkd", "followers_url": "https://api.github.com/users/vwkd/followers", "following_url": "https://api.github.com/users/vwkd/following{/other_user}", "gists_url": "https://api.github.com/users/vwkd/gists{/gist_id}", "starred_url": "https://api.github.com/users/vwkd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vwkd/subscriptions", "organizations_url": "https://api.github.com/users/vwkd/orgs", "repos_url": "https://api.github.com/users/vwkd/repos", "events_url": "https://api.github.com/users/vwkd/events{/privacy}", "received_events_url": "https://api.github.com/users/vwkd/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-21T11:37:44Z", "updated_at": "2023-11-23T11:16:43Z", "closed_at": "2023-11-22T22:16:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7566", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7566", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7566.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7566.patch", "merged_at": "2023-11-22T22:16:30Z"}, "body": "Clarify the definition of the project in the Introduction. A direct \"X is a Z\" is clearer than a \"X is a Y that is a Z\" where Y is some superset of Z.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7566/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7565", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7565/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7565/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7565/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7565", "id": 2003420736, "node_id": "PR_kwDOBhDaXM5f-Zw7", "number": 7565, "title": "clarify custom memory needs to be zero filled", "user": {"login": "rockwotj", "id": 8669100, "node_id": "MDQ6VXNlcjg2NjkxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8669100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockwotj", "html_url": "https://github.com/rockwotj", "followers_url": "https://api.github.com/users/rockwotj/followers", "following_url": "https://api.github.com/users/rockwotj/following{/other_user}", "gists_url": "https://api.github.com/users/rockwotj/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockwotj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockwotj/subscriptions", "organizations_url": "https://api.github.com/users/rockwotj/orgs", "repos_url": "https://api.github.com/users/rockwotj/repos", "events_url": "https://api.github.com/users/rockwotj/events{/privacy}", "received_events_url": "https://api.github.com/users/rockwotj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1785771916, "node_id": "MDU6TGFiZWwxNzg1NzcxOTE2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:api", "name": "wasmtime:api", "color": "006b75", "default": false, "description": "Related to the API of the `wasmtime` crate itself"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-21T04:11:37Z", "updated_at": "2023-11-22T02:12:40Z", "closed_at": "2023-11-21T06:02:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7565", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7565", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7565.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7565.patch", "merged_at": "2023-11-21T06:02:15Z"}, "body": "Discussion on [Zulip][1], this bit me for a while as I didn't understand why valid code was getting out of bounds memory accesses when run in different contexts.\n\n[1]: https://bytecodealliance.zulipchat.com/#narrow/stream/217126-wasmtime/topic/.E2.9C.94.20custom.20memory.20APIs.20for.20Wasmtime\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7565/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7564", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7564/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7564/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7564/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7564", "id": 2003304309, "node_id": "PR_kwDOBhDaXM5f-BKx", "number": 7564, "title": "move wasmtime-wasi's unit test for stdin to a separate integration test", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-21T01:54:30Z", "updated_at": "2023-11-21T18:14:25Z", "closed_at": "2023-11-21T18:14:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7564", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7564", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7564.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7564.patch", "merged_at": "2023-11-21T18:14:24Z"}, "body": "fork is always a terrible idea, but when we wrote this test, we couldn't think of an alternative method. alex showed us how `/tests/host_segfault.rs` works, which solves a similar problem for measuring process behavior without forking.\r\n\r\nthe forking version of this test would occasionally hang in the child's creation of a tokio runtime because std Once is not fork-safe (nor should it be. nothing should be fork-safe. forks are an abomination).\r\n\r\nso instead, this is now a separate integration test with `harness = false` that will exec itself in order to run the child.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7564/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7563", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7563/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7563/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7563/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7563", "id": 2003280259, "node_id": "PR_kwDOBhDaXM5f98Fq", "number": 7563, "title": "wasi: noent error for dangling symlink", "user": {"login": "guybedford", "id": 598730, "node_id": "MDQ6VXNlcjU5ODczMA==", "avatar_url": "https://avatars.githubusercontent.com/u/598730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guybedford", "html_url": "https://github.com/guybedford", "followers_url": "https://api.github.com/users/guybedford/followers", "following_url": "https://api.github.com/users/guybedford/following{/other_user}", "gists_url": "https://api.github.com/users/guybedford/gists{/gist_id}", "starred_url": "https://api.github.com/users/guybedford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guybedford/subscriptions", "organizations_url": "https://api.github.com/users/guybedford/orgs", "repos_url": "https://api.github.com/users/guybedford/repos", "events_url": "https://api.github.com/users/guybedford/events{/privacy}", "received_events_url": "https://api.github.com/users/guybedford/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-21T01:24:21Z", "updated_at": "2024-01-23T19:57:46Z", "closed_at": "2023-11-21T02:32:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7563", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7563", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7563.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7563.patch", "merged_at": "2023-11-21T02:32:46Z"}, "body": "Updates the dangling symlink error test case to support `ENOENT` as a valid error code.\r\n\r\nThis was the default when applying this operation in Node.js. We can also patch the implementation to throw the right code as well depending what the expected behaviour would be.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7563/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7563/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7561", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7561/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7561/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7561/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7561", "id": 2003008064, "node_id": "PR_kwDOBhDaXM5f9Arr", "number": 7561, "title": "Configure workspace lints, enable running some Clippy lints on CI", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1877824860, "node_id": "MDU6TGFiZWwxODc3ODI0ODYw", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift", "name": "cranelift", "color": "f9d0c4", "default": false, "description": "Issues related to the Cranelift code generator"}, {"id": 1877975109, "node_id": "MDU6TGFiZWwxODc3OTc1MTA5", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:meta", "name": "cranelift:meta", "color": "ea48b4", "default": false, "description": "Everything related to the meta-language."}, {"id": 1907753255, "node_id": "MDU6TGFiZWwxOTA3NzUzMjU1", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/cranelift:module", "name": "cranelift:module", "color": "ededed", "default": false, "description": null}, {"id": 3552806557, "node_id": "LA_kwDOBhDaXM7Tw4ad", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/isle", "name": "isle", "color": "E40E9C", "default": false, "description": "Related to the ISLE domain-specific language"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-20T21:07:15Z", "updated_at": "2023-11-20T23:50:12Z", "closed_at": "2023-11-20T23:50:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7561", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7561", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7561.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7561.patch", "merged_at": "2023-11-20T23:50:11Z"}, "body": "This PR is a series of commits building up to the ability to selectively enable clippy lints to prevent issues such as https://github.com/bytecodealliance/wasmtime/issues/7558 from occurring. The root cause of the issue is the behavior of casting a smaller integer to a larger integer and switching signs. For example casting an i8 to a u32. I certainly don't remember whether this is a zero-extend or a sign-extend, and I suspect that I'm not alone. Ideally I was looking for a lint to help weed these out on CI. \r\n\r\nUnfortunately rustc does not have a lint for this. Clippy, however, has a somewhat similar lint called `cast_sign_loss`. Empowered with Rust's 1.74 release and Cargo's addition of a `[lints]` configuration for workspaces, I realized this seemed like a reasonable time to kick the tires. Historically Wasmtime hasn't enabled Clippy because it's too noisy by default and it's too cumbersome to turn it off for all crates. With `[lints]` however it's a single line to turn off all clippy for the entire workspace, which felt like a much better balance to me at least.\r\n\r\nFirst configuring `[lints]` as well as `[workspace.lints]` helped moved some lint configuration for various crates into one location. Afterwards all clippy lints were then disabled and then `cargo clippy` was added to CI. It turns out that `cast_sign_loss` is still too noisy for our purposes to enable for the whole workspace, but it can be selectively enabled for a few crates in question which do at least much of the casting for values at runtime.\r\n\r\nThis is intended to be somewhat of a trial run to see if we can make running Clippy in CI useful. I'm sure Clippy has other useful lints for helping to catch issues as well as helping with stylistic things for contributors. For now everything is left disabled but if desired selective lints can be enabled as necessary.", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7561/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7561/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7560", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7560/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7560/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7560/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7560", "id": 2002452752, "node_id": "PR_kwDOBhDaXM5f7HKi", "number": 7560, "title": "Fix MIRI validation of `ScopeVec`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-20T15:26:37Z", "updated_at": "2023-11-20T18:25:14Z", "closed_at": "2023-11-20T18:25:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7560", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7560", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7560.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7560.patch", "merged_at": "2023-11-20T18:25:13Z"}, "body": "Juggle around where a pointer comes from to ensure that it passes MIRI cleanly.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7560/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7559", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7559/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7559/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7559/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7559", "id": 2002414953, "node_id": "PR_kwDOBhDaXM5f6-3N", "number": 7559, "title": "Fix memory initialization when offset is negative", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-20T15:09:56Z", "updated_at": "2023-11-20T18:39:02Z", "closed_at": "2023-11-20T18:39:00Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7559", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7559", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7559.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7559.patch", "merged_at": "2023-11-20T18:39:00Z"}, "body": "This commit fixes a bug in initializing memory segments of 32-bit memories where if the offset was negative when viewed as a signed integer the offset was incorrectly sign-extended to a 64-bit value instead of zero-extended. This commit replaces an `i32`-to-`u64` cast with an `i32`-to-`u32` cast followed by a `u32`-to-`u64` cast which performs the zero extend.\r\n\r\nCloses #7558\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7559/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7557", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7557/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7557/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7557/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7557", "id": 2001140114, "node_id": "PR_kwDOBhDaXM5f2qpN", "number": 7557, "title": "Release Wasmtime 15.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-20T00:14:27Z", "updated_at": "2023-11-20T15:27:16Z", "closed_at": "2023-11-20T15:27:15Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7557", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7557", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7557.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7557.patch", "merged_at": "2023-11-20T15:27:15Z"}, "body": "This is an [automated pull request][process] from CI which is\nintended to notify maintainers that it's time to release Wasmtime\n15.0.0. The [release branch][branch] was created roughly two weeks ago\nand it's now time for it to be published and released.\n\nIt's recommended that maintainers double-check that [RELEASES.md]\nis up-to-date and that there are no known issues before merging this\nPR. When this PR is merged a release tag will automatically be\ncreated, crates will be published, and CI artifacts will be produced.\n\n[RELEASES.md]: https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n[branch]: https://github.com/bytecodealliance/wasmtime/tree/release-15.0.0\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7557/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7556", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7556/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7556/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7556/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7556", "id": 2001140073, "node_id": "PR_kwDOBhDaXM5f2qok", "number": 7556, "title": "Update release date of Wasmtime 15.0.0", "user": {"login": "wasmtime-publish", "id": 59749941, "node_id": "MDQ6VXNlcjU5NzQ5OTQx", "avatar_url": "https://avatars.githubusercontent.com/u/59749941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wasmtime-publish", "html_url": "https://github.com/wasmtime-publish", "followers_url": "https://api.github.com/users/wasmtime-publish/followers", "following_url": "https://api.github.com/users/wasmtime-publish/following{/other_user}", "gists_url": "https://api.github.com/users/wasmtime-publish/gists{/gist_id}", "starred_url": "https://api.github.com/users/wasmtime-publish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wasmtime-publish/subscriptions", "organizations_url": "https://api.github.com/users/wasmtime-publish/orgs", "repos_url": "https://api.github.com/users/wasmtime-publish/repos", "events_url": "https://api.github.com/users/wasmtime-publish/events{/privacy}", "received_events_url": "https://api.github.com/users/wasmtime-publish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1907753222, "node_id": "MDU6TGFiZWwxOTA3NzUzMjIy", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasmtime:docs", "name": "wasmtime:docs", "color": "006b75", "default": false, "description": "Issues related to Wasmtime's documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-20T00:14:25Z", "updated_at": "2023-11-20T16:47:56Z", "closed_at": "2023-11-20T16:47:55Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7556", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7556", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7556.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7556.patch", "merged_at": "2023-11-20T16:47:55Z"}, "body": "This is an [automated pull request][process] from CI which is updating\nthe release date of Wasmtime 15.0.0 to today. This PR's base branch\nis `main` and a second PR will be coming to perform the actual\nrelease which will be targeted at `release-15.0.0`.\n\n[process]: https://docs.wasmtime.dev/contributing-release-process.html\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7556/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7555", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7555/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7555/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7555/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7555", "id": 1999504243, "node_id": "PR_kwDOBhDaXM5fxVcu", "number": 7555, "title": "Update hyper dependency to stable release", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-17T16:31:01Z", "updated_at": "2023-11-17T17:33:21Z", "closed_at": "2023-11-17T17:33:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7555", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7555", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7555.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7555.patch", "merged_at": "2023-11-17T17:33:20Z"}, "body": "This updates hyper to 1.0.0 and handles the various updates necessary along with a few other dependency updates.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7555/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7555/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7554", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7554/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7554/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7554/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7554", "id": 1998009734, "node_id": "PR_kwDOBhDaXM5fsSsj", "number": 7554, "title": "Bump MSRV to 1.72.0", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-17T00:13:56Z", "updated_at": "2023-11-17T05:09:14Z", "closed_at": "2023-11-17T05:09:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7554", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7554", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7554.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7554.patch", "merged_at": "2023-11-17T05:09:13Z"}, "body": "Following today's release of Rust 1.74.0.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7554/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7553", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7553/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7553/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7553/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7553", "id": 1997623263, "node_id": "PR_kwDOBhDaXM5fq9CJ", "number": 7553, "title": "Wasi test suite cleanups", "user": {"login": "pchickey", "id": 118618, "node_id": "MDQ6VXNlcjExODYxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/118618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pchickey", "html_url": "https://github.com/pchickey", "followers_url": "https://api.github.com/users/pchickey/followers", "following_url": "https://api.github.com/users/pchickey/following{/other_user}", "gists_url": "https://api.github.com/users/pchickey/gists{/gist_id}", "starred_url": "https://api.github.com/users/pchickey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pchickey/subscriptions", "organizations_url": "https://api.github.com/users/pchickey/orgs", "repos_url": "https://api.github.com/users/pchickey/repos", "events_url": "https://api.github.com/users/pchickey/events{/privacy}", "received_events_url": "https://api.github.com/users/pchickey/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-16T19:37:56Z", "updated_at": "2023-11-17T01:05:54Z", "closed_at": "2023-11-17T01:05:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7553", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7553", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7553.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7553.patch", "merged_at": "2023-11-17T01:05:53Z"}, "body": "We have had three wasi preview1 tests that have been marked should_panic since they were written years ago, because some part of the behavior they tested isn't consistent across operating systems. This PR changes those tests to only test consistent behavior, notes what behavior is not tested, and enforces that they pass from here out:\r\n\r\n\r\n* `preview1_remove_directory_trailing_slashes` is now renamed `preview1_remove_directory`, and no longer tests for the trailing slash behavior that is inconsistient. I also fixed an incorrect assertion about windows behavior which the other test prevented from being executed.\r\n* `preview1_path_rename_trailing_slashes` is deleted. the consistient behavior is covered by the `preview1_path_rename` and `preview1_path_rename_dir_trailing_slashes` tests.\r\n* `preview1_interesting_paths` now describes the windows behavior correctly- a trailing nul byte is accepted on windows, apparently.\r\n\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7553/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7548", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7548/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7548/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7548/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7548", "id": 1995683590, "node_id": "PR_kwDOBhDaXM5fkUa5", "number": 7548, "title": "Implement WASI \"preview0\" in `wasmtime-wasi`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1903464656, "node_id": "MDU6TGFiZWwxOTAzNDY0NjU2", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/wasi", "name": "wasi", "color": "7c5fce", "default": false, "description": "Issues pertaining to WASI"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-15T22:32:14Z", "updated_at": "2023-11-16T16:57:43Z", "closed_at": "2023-11-16T16:57:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7548", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7548", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7548.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7548.patch", "merged_at": "2023-11-16T16:57:42Z"}, "body": "This commit implements the `wasi_unstable` module, sometimes referred to as \"preview0\", in the `wasmtime-wasi` crate. Previously this was only implemented by the `wasi-common` crate but now this is implemented for both meaning that the switch to preview2 won't lose this functionality.\r\n\r\nThe preview0 WITX files are vendored like the preview1 files and the implementation of preview0 is exclusively implemented by delegating to the preview1 implementation.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7548/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7548/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7547", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7547/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7547/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7547/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7547", "id": 1995645065, "node_id": "PR_kwDOBhDaXM5fkMQd", "number": 7547, "title": "winch: Solidify unreachable code handling", "user": {"login": "saulecabrera", "id": 1423601, "node_id": "MDQ6VXNlcjE0MjM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/1423601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saulecabrera", "html_url": "https://github.com/saulecabrera", "followers_url": "https://api.github.com/users/saulecabrera/followers", "following_url": "https://api.github.com/users/saulecabrera/following{/other_user}", "gists_url": "https://api.github.com/users/saulecabrera/gists{/gist_id}", "starred_url": "https://api.github.com/users/saulecabrera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saulecabrera/subscriptions", "organizations_url": "https://api.github.com/users/saulecabrera/orgs", "repos_url": "https://api.github.com/users/saulecabrera/repos", "events_url": "https://api.github.com/users/saulecabrera/events{/privacy}", "received_events_url": "https://api.github.com/users/saulecabrera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5021130657, "node_id": "LA_kwDOBhDaXM8AAAABK0hfoQ", "url": "https://api.github.com/repos/bytecodealliance/wasmtime/labels/winch", "name": "winch", "color": "4DE22F", "default": false, "description": "Winch issues or pull requests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-15T22:02:18Z", "updated_at": "2023-11-16T18:02:00Z", "closed_at": "2023-11-16T18:01:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7547", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7547", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7547.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7547.patch", "merged_at": "2023-11-16T18:01:59Z"}, "body": "This commit solidifies the approach for unreachable code handling in control flow.\r\n\r\nPrior to this change, at unconditional jump sites, the compiler would reset the machine stack as well as the value stack. Even though this appoach might seem natural at first, it actually broke several of the invariants that must be met at the end of each contol block, this was specially noticeable with programs that conditionally entered in an unreachable state, like for example\r\n\r\n```wat\r\n(module\r\n  (func (;0;) (param i32) (result i32)\r\n    local.get 0\r\n    local.get 0\r\n    if (result i32)\r\n      i32.const 1\r\n      return\r\n    else\r\n      i32.const 2\r\n    end\r\n    i32.sub\r\n  )\r\n  (export \"main\" (func 0))\r\n)\r\n```\r\n\r\nThe approach followed in this commit ensures that all the invariants are met and introduces more guardrails around those invariants. In short, instead of resetting the value stack at unconditional jump sites, the value stack handling is deferred until the reachability analysis restores the reachability of the code generation process, ensuring that the value stack contains the exact amount of values expected by the frame where reachability is restored. Given that unconditional jumps reset the machine stack, when the reachability of the code generation process is restored, the SP offset is also restored which should match the size of the value stack.\r\n\r\n<!--\r\nPlease make sure you include the following information:\r\n\r\n- If this work has been discussed elsewhere, please include a link to that\r\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\r\n\r\n- Explain why this change is needed. If the details are in an issue already,\r\n  this can be brief.\r\n\r\nOur development process is documented in the Wasmtime book:\r\nhttps://docs.wasmtime.dev/contributing-development-process.html\r\n\r\nPlease ensure all communication follows the code of conduct:\r\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7547/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7546", "repository_url": "https://api.github.com/repos/bytecodealliance/wasmtime", "labels_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7546/labels{/name}", "comments_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7546/comments", "events_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7546/events", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7546", "id": 1995618225, "node_id": "PR_kwDOBhDaXM5fkGK0", "number": 7546, "title": "Backport authority changes", "user": {"login": "elliottt", "id": 22708, "node_id": "MDQ6VXNlcjIyNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottt", "html_url": "https://github.com/elliottt", "followers_url": "https://api.github.com/users/elliottt/followers", "following_url": "https://api.github.com/users/elliottt/following{/other_user}", "gists_url": "https://api.github.com/users/elliottt/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottt/subscriptions", "organizations_url": "https://api.github.com/users/elliottt/orgs", "repos_url": "https://api.github.com/users/elliottt/repos", "events_url": "https://api.github.com/users/elliottt/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-15T21:47:40Z", "updated_at": "2023-11-15T22:29:12Z", "closed_at": "2023-11-15T22:29:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/pulls/7546", "html_url": "https://github.com/bytecodealliance/wasmtime/pull/7546", "diff_url": "https://github.com/bytecodealliance/wasmtime/pull/7546.diff", "patch_url": "https://github.com/bytecodealliance/wasmtime/pull/7546.patch", "merged_at": "2023-11-15T22:29:11Z"}, "body": "Backport the changes from #7545 to ensure that we see consistent behavior with the `authority` on incoming requests in `wasmtime serve`.\n\n<!--\nPlease make sure you include the following information:\n\n- If this work has been discussed elsewhere, please include a link to that\n  conversation. If it was discussed in an issue, just mention \"issue #...\".\n\n- Explain why this change is needed. If the details are in an issue already,\n  this can be brief.\n\nOur development process is documented in the Wasmtime book:\nhttps://docs.wasmtime.dev/contributing-development-process.html\n\nPlease ensure all communication follows the code of conduct:\nhttps://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\n-->\n", "reactions": {"url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/bytecodealliance/wasmtime/issues/7546/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]