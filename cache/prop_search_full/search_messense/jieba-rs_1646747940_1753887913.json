[{"url": "https://api.github.com/repos/messense/jieba-rs/issues/129", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/129/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/129/events", "html_url": "https://github.com/messense/jieba-rs/pull/129", "id": 3268206942, "node_id": "PR_kwDOB-MfP86g4yQw", "number": 129, "title": "Upgrade to Rust 2024 edition, replace lazy_static and jemallocator", "user": {"login": "miyayaLora", "id": 17351910, "node_id": "MDQ6VXNlcjE3MzUxOTEw", "avatar_url": "https://avatars.githubusercontent.com/u/17351910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miyayaLora", "html_url": "https://github.com/miyayaLora", "followers_url": "https://api.github.com/users/miyayaLora/followers", "following_url": "https://api.github.com/users/miyayaLora/following{/other_user}", "gists_url": "https://api.github.com/users/miyayaLora/gists{/gist_id}", "starred_url": "https://api.github.com/users/miyayaLora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miyayaLora/subscriptions", "organizations_url": "https://api.github.com/users/miyayaLora/orgs", "repos_url": "https://api.github.com/users/miyayaLora/repos", "events_url": "https://api.github.com/users/miyayaLora/events{/privacy}", "received_events_url": "https://api.github.com/users/miyayaLora/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-07-28T05:41:11Z", "updated_at": "2025-07-28T07:12:53Z", "closed_at": "2025-07-28T07:08:48Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/129", "html_url": "https://github.com/messense/jieba-rs/pull/129", "diff_url": "https://github.com/messense/jieba-rs/pull/129.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/129.patch", "merged_at": "2025-07-28T07:08:48Z"}, "body": "1. upgrade to Rust 2024 edition\r\n2. Rust 2024 corresponds to Rust version 1.85. In the standard library, there is [std::sync::LazyLock](https://rust-lang.github.io/rfcs/2788-standard-lazy-types.html?highlight=once_cell#), which is an alternative to `lazy_static`, and its main code comes from `once_cell`. Both `once_cell` and `lazy_static` have entered the maintenance stage. Using `std::sync::LazyLock` from the standard library is a good choice\r\n3. jemallocator is no longer maintained. Currently, in the Rust ecosystem, the fork version of tikv is mainly used. It should be migrated to tikv_jemallocator", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/129/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/128", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/128/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/128/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/128/events", "html_url": "https://github.com/messense/jieba-rs/pull/128", "id": 3267103849, "node_id": "PR_kwDOB-MfP86g1INi", "number": 128, "title": "Update dependencies, remove unused dev dependency and make clippy happy", "user": {"login": "miyayaLora", "id": 17351910, "node_id": "MDQ6VXNlcjE3MzUxOTEw", "avatar_url": "https://avatars.githubusercontent.com/u/17351910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miyayaLora", "html_url": "https://github.com/miyayaLora", "followers_url": "https://api.github.com/users/miyayaLora/followers", "following_url": "https://api.github.com/users/miyayaLora/following{/other_user}", "gists_url": "https://api.github.com/users/miyayaLora/gists{/gist_id}", "starred_url": "https://api.github.com/users/miyayaLora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miyayaLora/subscriptions", "organizations_url": "https://api.github.com/users/miyayaLora/orgs", "repos_url": "https://api.github.com/users/miyayaLora/repos", "events_url": "https://api.github.com/users/miyayaLora/events{/privacy}", "received_events_url": "https://api.github.com/users/miyayaLora/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-07-27T13:26:57Z", "updated_at": "2025-07-27T14:25:34Z", "closed_at": "2025-07-27T14:25:28Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/128", "html_url": "https://github.com/messense/jieba-rs/pull/128", "diff_url": "https://github.com/messense/jieba-rs/pull/128.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/128.patch", "merged_at": "2025-07-27T14:25:28Z"}, "body": "1. update dependencies\r\n2. remove unused dev dependency - rand\r\n3. make clippy happy", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/128/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/127", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/127/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/127/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/127/events", "html_url": "https://github.com/messense/jieba-rs/pull/127", "id": 3228408875, "node_id": "PR_kwDOB-MfP86eyLDZ", "number": 127, "title": "perf: apply some optimizations", "user": {"login": "messense", "id": 1556054, "node_id": "MDQ6VXNlcjE1NTYwNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1556054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messense", "html_url": "https://github.com/messense", "followers_url": "https://api.github.com/users/messense/followers", "following_url": "https://api.github.com/users/messense/following{/other_user}", "gists_url": "https://api.github.com/users/messense/gists{/gist_id}", "starred_url": "https://api.github.com/users/messense/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messense/subscriptions", "organizations_url": "https://api.github.com/users/messense/orgs", "repos_url": "https://api.github.com/users/messense/repos", "events_url": "https://api.github.com/users/messense/events{/privacy}", "received_events_url": "https://api.github.com/users/messense/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-07-14T11:20:59Z", "updated_at": "2025-07-14T11:23:20Z", "closed_at": "2025-07-14T11:23:14Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/127", "html_url": "https://github.com/messense/jieba-rs/pull/127", "diff_url": "https://github.com/messense/jieba-rs/pull/127.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/127.patch", "merged_at": "2025-07-14T11:23:14Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/127/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/126", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/126/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/126/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/126/events", "html_url": "https://github.com/messense/jieba-rs/pull/126", "id": 3226522393, "node_id": "PR_kwDOB-MfP86er3zk", "number": 126, "title": "Fix memory allocation issue for large files by capping StaticSparseDAG capacity", "user": {"login": "Copilot", "id": 198982749, "node_id": "BOT_kgDOC9w8XQ", "avatar_url": "https://avatars.githubusercontent.com/in/1143301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Copilot", "html_url": "https://github.com/apps/copilot-swe-agent", "followers_url": "https://api.github.com/users/Copilot/followers", "following_url": "https://api.github.com/users/Copilot/following{/other_user}", "gists_url": "https://api.github.com/users/Copilot/gists{/gist_id}", "starred_url": "https://api.github.com/users/Copilot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Copilot/subscriptions", "organizations_url": "https://api.github.com/users/Copilot/orgs", "repos_url": "https://api.github.com/users/Copilot/repos", "events_url": "https://api.github.com/users/Copilot/events{/privacy}", "received_events_url": "https://api.github.com/users/Copilot/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [{"login": "messense", "id": 1556054, "node_id": "MDQ6VXNlcjE1NTYwNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1556054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messense", "html_url": "https://github.com/messense", "followers_url": "https://api.github.com/users/messense/followers", "following_url": "https://api.github.com/users/messense/following{/other_user}", "gists_url": "https://api.github.com/users/messense/gists{/gist_id}", "starred_url": "https://api.github.com/users/messense/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messense/subscriptions", "organizations_url": "https://api.github.com/users/messense/orgs", "repos_url": "https://api.github.com/users/messense/repos", "events_url": "https://api.github.com/users/messense/events{/privacy}", "received_events_url": "https://api.github.com/users/messense/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "Copilot", "id": 198982749, "node_id": "BOT_kgDOC9w8XQ", "avatar_url": "https://avatars.githubusercontent.com/in/1143301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Copilot", "html_url": "https://github.com/apps/copilot-swe-agent", "followers_url": "https://api.github.com/users/Copilot/followers", "following_url": "https://api.github.com/users/Copilot/following{/other_user}", "gists_url": "https://api.github.com/users/Copilot/gists{/gist_id}", "starred_url": "https://api.github.com/users/Copilot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Copilot/subscriptions", "organizations_url": "https://api.github.com/users/Copilot/orgs", "repos_url": "https://api.github.com/users/Copilot/repos", "events_url": "https://api.github.com/users/Copilot/events{/privacy}", "received_events_url": "https://api.github.com/users/Copilot/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2025-07-13T13:52:51Z", "updated_at": "2025-07-13T14:31:00Z", "closed_at": "2025-07-13T14:30:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/126", "html_url": "https://github.com/messense/jieba-rs/pull/126", "diff_url": "https://github.com/messense/jieba-rs/pull/126.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/126.patch", "merged_at": "2025-07-13T14:30:53Z"}, "body": "Thanks for asking me to work on this. I will get started on it and keep this PR's description up to date as I form a plan and make progress.\n\nOriginal description:\n\n> Reproduce this issue and try to fix it\n\n\n\n<!-- START COPILOT CODING AGENT TIPS -->\n---\n\n\ud83d\udcac Share your feedback on Copilot coding agent for the chance to win a $200 gift card! Click [here](https://survey.alchemer.com/s3/8343779/Copilot-Coding-agent) to start the survey.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/126/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/126/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/125", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/125/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/125/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/125/events", "html_url": "https://github.com/messense/jieba-rs/pull/125", "id": 3171649307, "node_id": "PR_kwDOB-MfP86b2ZSR", "number": 125, "title": "refactor: optimize string slicing and improve SplitState API for better performance", "user": {"login": "aniaan", "id": 40813941, "node_id": "MDQ6VXNlcjQwODEzOTQx", "avatar_url": "https://avatars.githubusercontent.com/u/40813941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aniaan", "html_url": "https://github.com/aniaan", "followers_url": "https://api.github.com/users/aniaan/followers", "following_url": "https://api.github.com/users/aniaan/following{/other_user}", "gists_url": "https://api.github.com/users/aniaan/gists{/gist_id}", "starred_url": "https://api.github.com/users/aniaan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aniaan/subscriptions", "organizations_url": "https://api.github.com/users/aniaan/orgs", "repos_url": "https://api.github.com/users/aniaan/repos", "events_url": "https://api.github.com/users/aniaan/events{/privacy}", "received_events_url": "https://api.github.com/users/aniaan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-24T11:36:39Z", "updated_at": "2025-07-13T13:49:28Z", "closed_at": "2025-07-13T13:49:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/125", "html_url": "https://github.com/messense/jieba-rs/pull/125", "diff_url": "https://github.com/messense/jieba-rs/pull/125.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/125.patch", "merged_at": "2025-07-13T13:49:21Z"}, "body": "## Summary\r\nThis PR refactors the string slicing logic and enhances the `SplitState` API to improve performance and code readability.\r\n\r\n## Changes Made\r\n\r\n### \ud83d\ude80 Performance Improvements\r\n- **Simplified string slicing**: Removed redundant boundary checks in multiple places by using `&sentence[byte_start..byte_end]` directly instead of conditional slicing\r\n- **Optimized method calls**: Replaced `skip_state.into_str()` with `skip_state.as_str()` to avoid unnecessary ownership transfers\r\n- **Efficient state checking**: Replaced regex matching with direct state checking using `skip_state.is_matched()`\r\n\r\n### \ud83d\udd27 API Enhancements\r\n- **Added `SplitState::as_str(&self)`**: Non-consuming version for getting string slice\r\n- **Added `SplitState::is_matched(&self)`**: Direct method to check if state is matched, improving semantic clarity\r\n\r\n### \ud83e\uddf9 Code Cleanup\r\n- Removed repetitive conditional slicing patterns:\r\n  ```rust\r\n  // Before\r\n  let wfrag = if byte_end == str_len {\r\n      &sentence[byte_start..]\r\n  } else {\r\n      &sentence[byte_start..byte_end]\r\n  };\r\n  \r\n  // After\r\n  let wfrag = &sentence[byte_start..byte_end];\r\n  ```\r\n\r\n### \u2705 Testing\r\n- Added new test case `test_cut_no_hmm1` for additional coverage\r\n- All existing tests continue to pass (22/22)\r\n\r\n## Benefits\r\n- **Performance**: Reduced memory allocations and avoided redundant regex operations\r\n- **Readability**: More concise and self-documenting code\r\n- **Maintainability**: Eliminated duplicate boundary checking logic\r\n- **API Consistency**: Unified approach to string access through `as_str()`\r\n\r\n## Breaking Changes\r\nNone. This is a backward-compatible refactor that maintains all existing functionality.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/125/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/123", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/123/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/123/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/123/events", "html_url": "https://github.com/messense/jieba-rs/pull/123", "id": 3095982436, "node_id": "PR_kwDOB-MfP86X5Dbg", "number": 123, "title": "optimize HmmContext initialization", "user": {"login": "wangrunji0408", "id": 15158738, "node_id": "MDQ6VXNlcjE1MTU4NzM4", "avatar_url": "https://avatars.githubusercontent.com/u/15158738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangrunji0408", "html_url": "https://github.com/wangrunji0408", "followers_url": "https://api.github.com/users/wangrunji0408/followers", "following_url": "https://api.github.com/users/wangrunji0408/following{/other_user}", "gists_url": "https://api.github.com/users/wangrunji0408/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangrunji0408/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangrunji0408/subscriptions", "organizations_url": "https://api.github.com/users/wangrunji0408/orgs", "repos_url": "https://api.github.com/users/wangrunji0408/repos", "events_url": "https://api.github.com/users/wangrunji0408/events{/privacy}", "received_events_url": "https://api.github.com/users/wangrunji0408/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-28T04:40:58Z", "updated_at": "2025-05-30T02:26:26Z", "closed_at": "2025-05-28T05:01:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/123", "html_url": "https://github.com/messense/jieba-rs/pull/123", "diff_url": "https://github.com/messense/jieba-rs/pull/123.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/123.patch", "merged_at": "2025-05-28T05:01:46Z"}, "body": "Currently, `HmmContext` is created and allocates memory during every tokenization, regardless of whether it's actually used. However, the `viterbi` function already ensures the buffer is resized to the required length before using `HmmContext`. \r\n\r\nhttps://github.com/messense/jieba-rs/blob/91d39ccd64b817d85ec0db01db01cd7d32dce6ff/src/hmm.rs#L82-L93\r\n\r\nThis PR removes the unnecessary pre-allocation in `HmmContext::new`, eliminating many redundant malloc operations and improving performance.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/123/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/122", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/122/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/122/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/122/events", "html_url": "https://github.com/messense/jieba-rs/pull/122", "id": 3089942501, "node_id": "PR_kwDOB-MfP86XknCe", "number": 122, "title": "Optimize performance for large-scale parallelism", "user": {"login": "wangrunji0408", "id": 15158738, "node_id": "MDQ6VXNlcjE1MTU4NzM4", "avatar_url": "https://avatars.githubusercontent.com/u/15158738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangrunji0408", "html_url": "https://github.com/wangrunji0408", "followers_url": "https://api.github.com/users/wangrunji0408/followers", "following_url": "https://api.github.com/users/wangrunji0408/following{/other_user}", "gists_url": "https://api.github.com/users/wangrunji0408/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangrunji0408/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangrunji0408/subscriptions", "organizations_url": "https://api.github.com/users/wangrunji0408/orgs", "repos_url": "https://api.github.com/users/wangrunji0408/repos", "events_url": "https://api.github.com/users/wangrunji0408/events{/privacy}", "received_events_url": "https://api.github.com/users/wangrunji0408/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-26T04:12:24Z", "updated_at": "2025-05-30T02:26:29Z", "closed_at": "2025-05-26T05:23:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/122", "html_url": "https://github.com/messense/jieba-rs/pull/122", "diff_url": "https://github.com/messense/jieba-rs/pull/122.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/122.patch", "merged_at": "2025-05-26T05:23:16Z"}, "body": "This PR addresses performance bottlenecks in multithreaded scenarios by refactoring how Regex objects are handled.\r\n\r\nThe crate currently uses a globally shared Regex object, which internally maintains a [cache pool](https://docs.rs/regex-automata/0.4.9/regex_automata/util/pool/struct.Pool.html). This implementation causes significant contention overhead when accessed by multiple threads simultaneously.\r\n\r\nThis PR changes Regex objects from global to thread-local storage. Each thread now compiles its own Regex upon first access and maintains an independent cache. We also add a new multithreaded benchmark to demonstrate the impact.\r\n\r\nOn a 11-core Macbook M3 Pro:\r\n```\r\nmain:\r\nmultithreaded/multi_thread\r\n                        time:   [118.90 \u00b5s 119.68 \u00b5s 120.63 \u00b5s]\r\n                        thrpt:  [971.50 KiB/s 979.16 KiB/s 985.63 KiB/s]\r\n\r\nthis PR:\r\nmultithreaded/multi_thread\r\n                        time:   [98.642 \u00b5s 99.572 \u00b5s 100.53 \u00b5s]\r\n                        thrpt:  [1.1384 MiB/s 1.1493 MiB/s 1.1602 MiB/s]\r\n                 change:\r\n                        time:   [-18.014% -17.382% -16.666%] (p = 0.00 < 0.05)\r\n                        thrpt:  [+20.000% +21.039% +21.972%]\r\n```\r\n\r\nOn a 192-core x86_64 server:\r\n```\r\nmain:\r\nmultithreaded/multi_thread\r\n                        time:   [1.1241 ms 1.1523 ms 1.2042 ms]\r\n                        thrpt:  [95.038 MiB/s 99.318 MiB/s 101.81 MiB/s]\r\n\r\nthis PR:\r\nmultithreaded/multi_thread\r\n                        time:   [257.17 \u00b5s 258.42 \u00b5s 259.53 \u00b5s]\r\n                        thrpt:  [440.96 MiB/s 442.85 MiB/s 445.01 MiB/s]\r\n                 change:\r\n                        time:   [-77.636% -77.141% -76.776%] (p = 0.00 < 0.05)\r\n                        thrpt:  [+330.59% +337.47% +347.15%]\r\n```\r\n\r\nTips: **Hide whitespace** for better review experience", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/122/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/122/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/121", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/121/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/121/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/121/events", "html_url": "https://github.com/messense/jieba-rs/pull/121", "id": 2876015065, "node_id": "PR_kwDOB-MfP86MWGyl", "number": 121, "title": "Avoid duplicate crates", "user": {"login": "rex4539", "id": 227442, "node_id": "MDQ6VXNlcjIyNzQ0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/227442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rex4539", "html_url": "https://github.com/rex4539", "followers_url": "https://api.github.com/users/rex4539/followers", "following_url": "https://api.github.com/users/rex4539/following{/other_user}", "gists_url": "https://api.github.com/users/rex4539/gists{/gist_id}", "starred_url": "https://api.github.com/users/rex4539/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rex4539/subscriptions", "organizations_url": "https://api.github.com/users/rex4539/orgs", "repos_url": "https://api.github.com/users/rex4539/repos", "events_url": "https://api.github.com/users/rex4539/events{/privacy}", "received_events_url": "https://api.github.com/users/rex4539/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-02-24T19:57:05Z", "updated_at": "2025-02-25T04:26:17Z", "closed_at": "2025-02-25T04:26:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/121", "html_url": "https://github.com/messense/jieba-rs/pull/121", "diff_url": "https://github.com/messense/jieba-rs/pull/121.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/121.patch", "merged_at": "2025-02-25T04:26:01Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/121/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/119", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/119/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/119/events", "html_url": "https://github.com/messense/jieba-rs/pull/119", "id": 2840060177, "node_id": "PR_kwDOB-MfP86KhXaE", "number": 119, "title": "fix clippy warnings", "user": {"login": "rex4539", "id": 227442, "node_id": "MDQ6VXNlcjIyNzQ0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/227442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rex4539", "html_url": "https://github.com/rex4539", "followers_url": "https://api.github.com/users/rex4539/followers", "following_url": "https://api.github.com/users/rex4539/following{/other_user}", "gists_url": "https://api.github.com/users/rex4539/gists{/gist_id}", "starred_url": "https://api.github.com/users/rex4539/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rex4539/subscriptions", "organizations_url": "https://api.github.com/users/rex4539/orgs", "repos_url": "https://api.github.com/users/rex4539/repos", "events_url": "https://api.github.com/users/rex4539/events{/privacy}", "received_events_url": "https://api.github.com/users/rex4539/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-02-08T15:03:55Z", "updated_at": "2025-02-08T15:13:19Z", "closed_at": "2025-02-08T15:13:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/119", "html_url": "https://github.com/messense/jieba-rs/pull/119", "diff_url": "https://github.com/messense/jieba-rs/pull/119.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/119.patch", "merged_at": "2025-02-08T15:13:11Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/119/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/117", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/117/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/117/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/117/events", "html_url": "https://github.com/messense/jieba-rs/pull/117", "id": 2758812359, "node_id": "PR_kwDOB-MfP86GNlvD", "number": 117, "title": "Add jieba-macros for HMM data generation and remove build.rs file", "user": {"login": "sepcnt", "id": 30561671, "node_id": "MDQ6VXNlcjMwNTYxNjcx", "avatar_url": "https://avatars.githubusercontent.com/u/30561671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sepcnt", "html_url": "https://github.com/sepcnt", "followers_url": "https://api.github.com/users/sepcnt/followers", "following_url": "https://api.github.com/users/sepcnt/following{/other_user}", "gists_url": "https://api.github.com/users/sepcnt/gists{/gist_id}", "starred_url": "https://api.github.com/users/sepcnt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sepcnt/subscriptions", "organizations_url": "https://api.github.com/users/sepcnt/orgs", "repos_url": "https://api.github.com/users/sepcnt/repos", "events_url": "https://api.github.com/users/sepcnt/events{/privacy}", "received_events_url": "https://api.github.com/users/sepcnt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-12-25T13:34:59Z", "updated_at": "2024-12-25T14:42:36Z", "closed_at": "2024-12-25T14:42:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/117", "html_url": "https://github.com/messense/jieba-rs/pull/117", "diff_url": "https://github.com/messense/jieba-rs/pull/117.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/117.patch", "merged_at": "2024-12-25T14:42:30Z"}, "body": "Introduce a new `jieba-macros` package to handle HMM data generation, eliminating the need for file operations in `build.rs`. \n\n(This would work better with some downstream crates: https://github.com/surrealdb/surrealdb/pull/4556#issuecomment-2300391350)\n\nUpdate dependencies and integrate the macro into the existing codebase.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/117/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/113", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/113/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/113/events", "html_url": "https://github.com/messense/jieba-rs/pull/113", "id": 2328916758, "node_id": "PR_kwDOB-MfP85xL1XR", "number": 113, "title": "fix wrong visibility modifier", "user": {"login": "zh217", "id": 2103823, "node_id": "MDQ6VXNlcjIxMDM4MjM=", "avatar_url": "https://avatars.githubusercontent.com/u/2103823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh217", "html_url": "https://github.com/zh217", "followers_url": "https://api.github.com/users/zh217/followers", "following_url": "https://api.github.com/users/zh217/following{/other_user}", "gists_url": "https://api.github.com/users/zh217/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh217/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh217/subscriptions", "organizations_url": "https://api.github.com/users/zh217/orgs", "repos_url": "https://api.github.com/users/zh217/repos", "events_url": "https://api.github.com/users/zh217/events{/privacy}", "received_events_url": "https://api.github.com/users/zh217/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-06-01T05:08:43Z", "updated_at": "2024-06-01T05:16:37Z", "closed_at": "2024-06-01T05:14:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/113", "html_url": "https://github.com/messense/jieba-rs/pull/113", "diff_url": "https://github.com/messense/jieba-rs/pull/113.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/113.patch", "merged_at": "2024-06-01T05:14:20Z"}, "body": "This fixes the following error when using this crate:\r\n\r\n```\r\nerror[E0446]: crate-private type `HmmContext` in public interface\r\n   --> /Users/zh217/.cargo/registry/src/index.crates.io-6f17d22bba15001f/jieba-rs-0.7.0/src/hmm.rs:154:1\r\n    |\r\n59  | pub(crate) struct HmmContext {\r\n    | ---------------------------- `HmmContext` declared as crate-private\r\n...\r\n154 | pub fn cut_internal<'a>(sentence: &'a str, words: &mut Vec<&'a str>, hmm_context: &mut HmmContext) {\r\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ can't leak crate-private type\r\n```", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/113/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/111", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/111/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/111/events", "html_url": "https://github.com/messense/jieba-rs/pull/111", "id": 2305778794, "node_id": "PR_kwDOB-MfP85v8rxt", "number": 111, "title": "feat: compress data at build time", "user": {"login": "fengkx", "id": 16515468, "node_id": "MDQ6VXNlcjE2NTE1NDY4", "avatar_url": "https://avatars.githubusercontent.com/u/16515468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fengkx", "html_url": "https://github.com/fengkx", "followers_url": "https://api.github.com/users/fengkx/followers", "following_url": "https://api.github.com/users/fengkx/following{/other_user}", "gists_url": "https://api.github.com/users/fengkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/fengkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fengkx/subscriptions", "organizations_url": "https://api.github.com/users/fengkx/orgs", "repos_url": "https://api.github.com/users/fengkx/repos", "events_url": "https://api.github.com/users/fengkx/events{/privacy}", "received_events_url": "https://api.github.com/users/fengkx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-05-20T11:29:44Z", "updated_at": "2024-05-22T03:45:59Z", "closed_at": "2024-05-22T03:45:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/111", "html_url": "https://github.com/messense/jieba-rs/pull/111", "diff_url": "https://github.com/messense/jieba-rs/pull/111.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/111.patch", "merged_at": "2024-05-22T03:45:59Z"}, "body": "For wasm build, code size matters.\r\n<img width=\"461\" alt=\"image\" src=\"https://github.com/messense/jieba-rs/assets/16515468/141392da-0207-4aac-915b-26a295f9d653\">\r\n\r\nData take up most of space in the wasm build. If it could be compressed at the Rust layer, that would be great. By compressing data wasm build shrink from 7.1 MB to 4.1M ", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/111/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/108", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/108/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/108/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/108/events", "html_url": "https://github.com/messense/jieba-rs/pull/108", "id": 2242358195, "node_id": "PR_kwDOB-MfP85smz45", "number": 108, "title": "Replace magic number 4 with NUM_STATES. Add comments.", "user": {"login": "awong-dev", "id": 144579, "node_id": "MDQ6VXNlcjE0NDU3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/144579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awong-dev", "html_url": "https://github.com/awong-dev", "followers_url": "https://api.github.com/users/awong-dev/followers", "following_url": "https://api.github.com/users/awong-dev/following{/other_user}", "gists_url": "https://api.github.com/users/awong-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/awong-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awong-dev/subscriptions", "organizations_url": "https://api.github.com/users/awong-dev/orgs", "repos_url": "https://api.github.com/users/awong-dev/repos", "events_url": "https://api.github.com/users/awong-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/awong-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-04-14T20:43:17Z", "updated_at": "2024-04-15T04:42:25Z", "closed_at": "2024-04-15T04:42:25Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/108", "html_url": "https://github.com/messense/jieba-rs/pull/108", "diff_url": "https://github.com/messense/jieba-rs/pull/108.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/108.patch", "merged_at": "2024-04-15T04:42:24Z"}, "body": "Makes the hmm code more understandable for folks (like me) who don't actually know viterbi well.\r\n\r\nAlso avoids leaking magic number from the implementation into the public API.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/108/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/107", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/107/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/107/events", "html_url": "https://github.com/messense/jieba-rs/pull/107", "id": 2242008147, "node_id": "PR_kwDOB-MfP85sluaq", "number": 107, "title": "Extract HmmContext struct.", "user": {"login": "awong-dev", "id": 144579, "node_id": "MDQ6VXNlcjE0NDU3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/144579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awong-dev", "html_url": "https://github.com/awong-dev", "followers_url": "https://api.github.com/users/awong-dev/followers", "following_url": "https://api.github.com/users/awong-dev/following{/other_user}", "gists_url": "https://api.github.com/users/awong-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/awong-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awong-dev/subscriptions", "organizations_url": "https://api.github.com/users/awong-dev/orgs", "repos_url": "https://api.github.com/users/awong-dev/repos", "events_url": "https://api.github.com/users/awong-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/awong-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-04-14T06:52:14Z", "updated_at": "2024-04-14T19:58:44Z", "closed_at": "2024-04-14T08:33:51Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/107", "html_url": "https://github.com/messense/jieba-rs/pull/107", "diff_url": "https://github.com/messense/jieba-rs/pull/107.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/107.patch", "merged_at": "2024-04-14T08:33:51Z"}, "body": "Group the variables V, prev, and path together into one struct that provies all the context for the HMM model to function.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/107/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/107/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/106", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/106/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/106/events", "html_url": "https://github.com/messense/jieba-rs/pull/106", "id": 2241293996, "node_id": "PR_kwDOB-MfP85sjcAW", "number": 106, "title": "Complete KeywordExtractConfigBuilder coverage. Clean code.", "user": {"login": "awong-dev", "id": 144579, "node_id": "MDQ6VXNlcjE0NDU3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/144579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awong-dev", "html_url": "https://github.com/awong-dev", "followers_url": "https://api.github.com/users/awong-dev/followers", "following_url": "https://api.github.com/users/awong-dev/following{/other_user}", "gists_url": "https://api.github.com/users/awong-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/awong-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awong-dev/subscriptions", "organizations_url": "https://api.github.com/users/awong-dev/orgs", "repos_url": "https://api.github.com/users/awong-dev/repos", "events_url": "https://api.github.com/users/awong-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/awong-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-04-13T04:49:30Z", "updated_at": "2024-04-13T06:11:35Z", "closed_at": "2024-04-13T06:11:35Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/106", "html_url": "https://github.com/messense/jieba-rs/pull/106", "diff_url": "https://github.com/messense/jieba-rs/pull/106.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/106.patch", "merged_at": "2024-04-13T06:11:35Z"}, "body": "Previous code was missing some coverage. These additional tests fix it.\r\n\r\nAlso, updated the remove_stop_words() api to use AsRef<str> so\r\nboth literals and string objects can be passed in. There is no effect on\r\ncopies/moves in this setup.\r\n\r\nLastly, cleaned up the DEFAULT_STOP_WORDS creation code to read\r\na little more idiomatically.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/106/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/105", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/105/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/105/events", "html_url": "https://github.com/messense/jieba-rs/pull/105", "id": 2241259684, "node_id": "PR_kwDOB-MfP85sjUni", "number": 105, "title": "Add doctest support into coverage", "user": {"login": "awong-dev", "id": 144579, "node_id": "MDQ6VXNlcjE0NDU3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/144579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awong-dev", "html_url": "https://github.com/awong-dev", "followers_url": "https://api.github.com/users/awong-dev/followers", "following_url": "https://api.github.com/users/awong-dev/following{/other_user}", "gists_url": "https://api.github.com/users/awong-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/awong-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awong-dev/subscriptions", "organizations_url": "https://api.github.com/users/awong-dev/orgs", "repos_url": "https://api.github.com/users/awong-dev/repos", "events_url": "https://api.github.com/users/awong-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/awong-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-04-13T03:48:54Z", "updated_at": "2024-04-13T03:58:04Z", "closed_at": "2024-04-13T03:56:19Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/105", "html_url": "https://github.com/messense/jieba-rs/pull/105", "diff_url": "https://github.com/messense/jieba-rs/pull/105.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/105.patch", "merged_at": "2024-04-13T03:56:19Z"}, "body": "Moving tests to doctests caused the previous llvm-cov command to stop running them.  Adding the --doctest flag puts them back in but requires the nightly toolchain.", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/105/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/104", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/104/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/104/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/104/events", "html_url": "https://github.com/messense/jieba-rs/pull/104", "id": 2241048694, "node_id": "PR_kwDOB-MfP85sim3K", "number": 104, "title": "Add KeywordExtractConfigBuilder", "user": {"login": "awong-dev", "id": 144579, "node_id": "MDQ6VXNlcjE0NDU3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/144579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awong-dev", "html_url": "https://github.com/awong-dev", "followers_url": "https://api.github.com/users/awong-dev/followers", "following_url": "https://api.github.com/users/awong-dev/following{/other_user}", "gists_url": "https://api.github.com/users/awong-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/awong-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awong-dev/subscriptions", "organizations_url": "https://api.github.com/users/awong-dev/orgs", "repos_url": "https://api.github.com/users/awong-dev/repos", "events_url": "https://api.github.com/users/awong-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/awong-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-04-12T22:15:16Z", "updated_at": "2024-04-13T04:16:09Z", "closed_at": "2024-04-13T04:12:31Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/104", "html_url": "https://github.com/messense/jieba-rs/pull/104", "diff_url": "https://github.com/messense/jieba-rs/pull/104.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/104.patch", "merged_at": "2024-04-13T04:12:31Z"}, "body": "Use builder pattern to construct the KeywordExtractConfig. Expose the KeywordExtractConfig internal state as more rust-standard getters that are just a function with the same identifier as the field name.\r\n\r\nThis code uses the derive_builder module.\r\n\r\nfixes #101", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/104/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/103", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/103/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/103/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/103/events", "html_url": "https://github.com/messense/jieba-rs/pull/103", "id": 2237602557, "node_id": "PR_kwDOB-MfP85sWpOH", "number": 103, "title": "Try use std hashmap instead of hashbrown", "user": {"login": "messense", "id": 1556054, "node_id": "MDQ6VXNlcjE1NTYwNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1556054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messense", "html_url": "https://github.com/messense", "followers_url": "https://api.github.com/users/messense/followers", "following_url": "https://api.github.com/users/messense/following{/other_user}", "gists_url": "https://api.github.com/users/messense/gists{/gist_id}", "starred_url": "https://api.github.com/users/messense/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messense/subscriptions", "organizations_url": "https://api.github.com/users/messense/orgs", "repos_url": "https://api.github.com/users/messense/repos", "events_url": "https://api.github.com/users/messense/events{/privacy}", "received_events_url": "https://api.github.com/users/messense/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-04-11T12:22:18Z", "updated_at": "2024-04-11T12:26:13Z", "closed_at": "2024-04-11T12:26:12Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/103", "html_url": "https://github.com/messense/jieba-rs/pull/103", "diff_url": "https://github.com/messense/jieba-rs/pull/103.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/103.patch", "merged_at": "2024-04-11T12:26:12Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/103/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/102", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/102/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/102/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/102/events", "html_url": "https://github.com/messense/jieba-rs/pull/102", "id": 2237532176, "node_id": "PR_kwDOB-MfP85sWZps", "number": 102, "title": "Update actions to latest versions", "user": {"login": "messense", "id": 1556054, "node_id": "MDQ6VXNlcjE1NTYwNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1556054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messense", "html_url": "https://github.com/messense", "followers_url": "https://api.github.com/users/messense/followers", "following_url": "https://api.github.com/users/messense/following{/other_user}", "gists_url": "https://api.github.com/users/messense/gists{/gist_id}", "starred_url": "https://api.github.com/users/messense/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messense/subscriptions", "organizations_url": "https://api.github.com/users/messense/orgs", "repos_url": "https://api.github.com/users/messense/repos", "events_url": "https://api.github.com/users/messense/events{/privacy}", "received_events_url": "https://api.github.com/users/messense/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-04-11T11:41:52Z", "updated_at": "2024-04-11T11:51:46Z", "closed_at": "2024-04-11T11:51:42Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/102", "html_url": "https://github.com/messense/jieba-rs/pull/102", "diff_url": "https://github.com/messense/jieba-rs/pull/102.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/102.patch", "merged_at": "2024-04-11T11:51:42Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/102/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/100", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/100/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/100/events", "html_url": "https://github.com/messense/jieba-rs/pull/100", "id": 2226584268, "node_id": "PR_kwDOB-MfP85rxDwo", "number": 100, "title": "Break lifetime entanglement of TextExtract, TFIDF and Jieba", "user": {"login": "awong-dev", "id": 144579, "node_id": "MDQ6VXNlcjE0NDU3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/144579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awong-dev", "html_url": "https://github.com/awong-dev", "followers_url": "https://api.github.com/users/awong-dev/followers", "following_url": "https://api.github.com/users/awong-dev/following{/other_user}", "gists_url": "https://api.github.com/users/awong-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/awong-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awong-dev/subscriptions", "organizations_url": "https://api.github.com/users/awong-dev/orgs", "repos_url": "https://api.github.com/users/awong-dev/repos", "events_url": "https://api.github.com/users/awong-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/awong-dev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2024-04-04T21:52:41Z", "updated_at": "2024-04-11T05:40:50Z", "closed_at": "2024-04-11T04:59:14Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/100", "html_url": "https://github.com/messense/jieba-rs/pull/100", "diff_url": "https://github.com/messense/jieba-rs/pull/100.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/100.patch", "merged_at": "2024-04-11T04:59:14Z"}, "body": "Modify KeywordExtract to take a Jieba instance during the keyword extraction call instead of during construction.  Remove the Jieba reference and the lifetimes from struct TextRank as well as struct TFIDF.\r\n\r\nThis is desirable in situations where the extractor instance might outlive a single function call.\r\n\r\nOne specific case where this comes up is in binding from other languages where the Jieba instance may be refcounted and shared between API calls in a way that depends on the other languages's calling semantics. In these situations, it is hard to have TextRank and TFIDF be bound to the Jieba instance via Rust's understanding of scoped-based lifetimes.\r\n\r\nLuckily, the KeywordExtract interface only uses the Jieba instance on execution of the extraction and arguably, the API should just take the Jieba instance in (or even possibly the resulting segments) to reduce coupling of the structs.  In this PR, the Jieba instance was moved from construction down to the function where it was used.\r\n\r\nSince this is an API breaking change, the PR also cleans up the API style per This brings the API more in line with Rust conventions per\r\n\r\nhttps://rust-lang.github.io/api-guidelines/interoperability.html#types-eagerly-implement-common-traits-c-common-traits\r\n\r\nSpecifically:\r\n  * TFIDF was renamed TfIdf to follow Rust's capitalization conventions for acronyms.\r\n  * KeywordExtract::extract_tags() was renamed to KeywordExtract::extract_keywords()\r\n  * A KeywordExtractConfig object was created holding common code from both TextRank and TfIdf.\r\n  * {TextExtract,TfIdf}::new() no longer encodes defaults and just the algorithm parameters as well as a KeywordExtractConfig object\r\n   * TextExtract and TfIdf both implement the Default trait and expose a default() method with the default configuration.\r\n   * API tests moved into doc tests further collocating code with test.\r\n\r\nCAVEAT: In the new code, TextExtract defaults to NOT use hmm in the Jieba cutting.  In the old code TextExtract had hmm on and TFIDF had hmm had it off. This inconsistency looks like an oversight.\r\n\r\nfixes #99 ", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/100/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/90", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/90/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/90/events", "html_url": "https://github.com/messense/jieba-rs/pull/90", "id": 1401235400, "node_id": "PR_kwDOB-MfP85AZc43", "number": 90, "title": "Fix typos", "user": {"login": "kianmeng", "id": 134518, "node_id": "MDQ6VXNlcjEzNDUxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/134518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kianmeng", "html_url": "https://github.com/kianmeng", "followers_url": "https://api.github.com/users/kianmeng/followers", "following_url": "https://api.github.com/users/kianmeng/following{/other_user}", "gists_url": "https://api.github.com/users/kianmeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/kianmeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kianmeng/subscriptions", "organizations_url": "https://api.github.com/users/kianmeng/orgs", "repos_url": "https://api.github.com/users/kianmeng/repos", "events_url": "https://api.github.com/users/kianmeng/events{/privacy}", "received_events_url": "https://api.github.com/users/kianmeng/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-07T14:06:08Z", "updated_at": "2022-10-08T06:48:14Z", "closed_at": "2022-10-07T14:17:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/90", "html_url": "https://github.com/messense/jieba-rs/pull/90", "diff_url": "https://github.com/messense/jieba-rs/pull/90.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/90.patch", "merged_at": "2022-10-07T14:17:57Z"}, "body": "Found via `typos --format brief`", "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/90/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/90/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/messense/jieba-rs/issues/89", "repository_url": "https://api.github.com/repos/messense/jieba-rs", "labels_url": "https://api.github.com/repos/messense/jieba-rs/issues/89/labels{/name}", "comments_url": "https://api.github.com/repos/messense/jieba-rs/issues/89/comments", "events_url": "https://api.github.com/repos/messense/jieba-rs/issues/89/events", "html_url": "https://github.com/messense/jieba-rs/pull/89", "id": 1394710213, "node_id": "PR_kwDOB-MfP85ADfHj", "number": 89, "title": "chore: update dependencies", "user": {"login": "messense", "id": 1556054, "node_id": "MDQ6VXNlcjE1NTYwNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1556054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messense", "html_url": "https://github.com/messense", "followers_url": "https://api.github.com/users/messense/followers", "following_url": "https://api.github.com/users/messense/following{/other_user}", "gists_url": "https://api.github.com/users/messense/gists{/gist_id}", "starred_url": "https://api.github.com/users/messense/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messense/subscriptions", "organizations_url": "https://api.github.com/users/messense/orgs", "repos_url": "https://api.github.com/users/messense/repos", "events_url": "https://api.github.com/users/messense/events{/privacy}", "received_events_url": "https://api.github.com/users/messense/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-10-03T13:11:32Z", "updated_at": "2022-10-03T13:21:28Z", "closed_at": "2022-10-03T13:21:25Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/messense/jieba-rs/pulls/89", "html_url": "https://github.com/messense/jieba-rs/pull/89", "diff_url": "https://github.com/messense/jieba-rs/pull/89.diff", "patch_url": "https://github.com/messense/jieba-rs/pull/89.patch", "merged_at": "2022-10-03T13:21:25Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/messense/jieba-rs/issues/89/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/messense/jieba-rs/issues/89/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]