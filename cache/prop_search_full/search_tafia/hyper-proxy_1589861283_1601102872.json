[{"url": "https://api.github.com/repos/tafia/hyper-proxy/issues/17", "repository_url": "https://api.github.com/repos/tafia/hyper-proxy", "labels_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/17/comments", "events_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/17/events", "html_url": "https://github.com/tafia/hyper-proxy/pull/17", "id": 688011408, "node_id": "MDExOlB1bGxSZXF1ZXN0NDc1MzUzNDk4", "number": 17, "title": "Add the ability to use CONNECT method for http", "user": {"login": "roblabla", "id": 1069318, "node_id": "MDQ6VXNlcjEwNjkzMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roblabla", "html_url": "https://github.com/roblabla", "followers_url": "https://api.github.com/users/roblabla/followers", "following_url": "https://api.github.com/users/roblabla/following{/other_user}", "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}", "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions", "organizations_url": "https://api.github.com/users/roblabla/orgs", "repos_url": "https://api.github.com/users/roblabla/repos", "events_url": "https://api.github.com/users/roblabla/events{/privacy}", "received_events_url": "https://api.github.com/users/roblabla/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-28T11:33:25Z", "updated_at": "2020-09-09T09:49:05Z", "closed_at": "2020-09-09T09:49:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tafia/hyper-proxy/pulls/17", "html_url": "https://github.com/tafia/hyper-proxy/pull/17", "diff_url": "https://github.com/tafia/hyper-proxy/pull/17.diff", "patch_url": "https://github.com/tafia/hyper-proxy/pull/17.patch", "merged_at": "2020-09-09T09:49:01Z"}, "body": "I'm trying to proxy some HTTP/2.0 cleartext requests through a proxy that only understands CONNECT. In order to do this, I need to be able to force the connector to use a CONNECT stream instead of sending a \"normal\" proxy request.\r\n\r\nThis PR adds a `force_connect` method to Proxy, which, when set, will ensure requests going through it are always proxied through a CONNECT tunnel.", "reactions": {"url": "https://api.github.com/repos/tafia/hyper-proxy/issues/17/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/17/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tafia/hyper-proxy/issues/16", "repository_url": "https://api.github.com/repos/tafia/hyper-proxy", "labels_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/16/comments", "events_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/16/events", "html_url": "https://github.com/tafia/hyper-proxy/pull/16", "id": 656634081, "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ4ODk4NDAy", "number": 16, "title": "feat: add rustls-webpki feature", "user": {"login": "QuietMisdreavus", "id": 5217170, "node_id": "MDQ6VXNlcjUyMTcxNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/5217170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QuietMisdreavus", "html_url": "https://github.com/QuietMisdreavus", "followers_url": "https://api.github.com/users/QuietMisdreavus/followers", "following_url": "https://api.github.com/users/QuietMisdreavus/following{/other_user}", "gists_url": "https://api.github.com/users/QuietMisdreavus/gists{/gist_id}", "starred_url": "https://api.github.com/users/QuietMisdreavus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QuietMisdreavus/subscriptions", "organizations_url": "https://api.github.com/users/QuietMisdreavus/orgs", "repos_url": "https://api.github.com/users/QuietMisdreavus/repos", "events_url": "https://api.github.com/users/QuietMisdreavus/events{/privacy}", "received_events_url": "https://api.github.com/users/QuietMisdreavus/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-07-14T13:57:21Z", "updated_at": "2020-07-21T18:41:54Z", "closed_at": "2020-07-20T01:13:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tafia/hyper-proxy/pulls/16", "html_url": "https://github.com/tafia/hyper-proxy/pull/16", "diff_url": "https://github.com/tafia/hyper-proxy/pull/16.diff", "patch_url": "https://github.com/tafia/hyper-proxy/pull/16.patch", "merged_at": "2020-07-20T01:13:58Z"}, "body": "Closes #15 \r\n\r\nThis PR adds a new Cargo feature: `rustls-webpki`. This allows users to use both the `rustls` TLS stack, as well as the `webpki-roots` static CA certificates, to enable a truly independent implementation.\r\n\r\nThe basic idea is that now there are four primary versions of the library:\r\n\r\n1. No TLS support (building with no features)\r\n2. TLS via `native-tls` (default, using the `tls` feature)\r\n3. TLS via `rustls` and native CA certificates (using the `rustls` feature)\r\n4. TLS via `rustls` and compiled-in CA certificates from `webpki-roots` (using the `rustls-webpki` feature)\r\n\r\nThe two `rustls` features build off a new `rustls-base` feature, which sets up the common code between `rustls` and `rustls-webpki`. The two user-facing features then configure the `TlsConnector` in `ProxyConnector::new` based on their respective certificate store crates.\r\n\r\nOne question i have about the initial implementation: Since i introduced a separate cargo feature (`rustls-base`) to represent the common `rustls` code, there's a potential situation where someone deliberately sets the `rustls-base` feature without setting either `rustls` or `rustls-webpki` to add certificates to the TLS configuration. This will create a situation where it looks like you can set up a TLS connection to the proxy, but nothing will succeed because there are no certificates loaded into the trust store for the connection. Should we set up a guard in the library code to emit a `compile_error!()` macro if this happens?\r\n\r\nThanks for setting up this library! I'm looking forward to integrating it with my own. :grin: ", "reactions": {"url": "https://api.github.com/repos/tafia/hyper-proxy/issues/16/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tafia/hyper-proxy/issues/16/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]