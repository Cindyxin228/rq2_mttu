[{"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/78", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/78/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/78/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/78", "id": 1956904203, "node_id": "PR_kwDOHb-6iM5dhDpH", "number": 78, "title": "Support different alphabets in webfinger username", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-10-23T11:02:04Z", "updated_at": "2023-10-24T09:08:56Z", "closed_at": "2023-10-24T09:08:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/78", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/78", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/78.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/78.patch", "merged_at": "2023-10-24T09:08:56Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/78/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/78/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/76", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/76/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/76/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/76", "id": 1954450411, "node_id": "PR_kwDOHb-6iM5dZBB8", "number": 76, "title": "Support fetches with redirect", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-10-20T14:50:12Z", "updated_at": "2023-10-24T08:54:00Z", "closed_at": "2023-10-24T08:54:00Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/76", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/76", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/76.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/76.patch", "merged_at": "2023-10-24T08:54:00Z"}, "body": "When fetching a URL with redirect, return the final URL and use that for verification instead of the original URL. Necessary for https://github.com/LemmyNet/lemmy/pull/4073. However this might cause some security problems, not sure.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/76/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/76/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/75", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/75/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/75/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/75", "id": 1861827348, "node_id": "PR_kwDOHb-6iM5YhLSE", "number": 75, "title": "Remove activity queue and add raw sending", "user": {"login": "phiresky", "id": 2303841, "node_id": "MDQ6VXNlcjIzMDM4NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2303841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phiresky", "html_url": "https://github.com/phiresky", "followers_url": "https://api.github.com/users/phiresky/followers", "following_url": "https://api.github.com/users/phiresky/following{/other_user}", "gists_url": "https://api.github.com/users/phiresky/gists{/gist_id}", "starred_url": "https://api.github.com/users/phiresky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phiresky/subscriptions", "organizations_url": "https://api.github.com/users/phiresky/orgs", "repos_url": "https://api.github.com/users/phiresky/repos", "events_url": "https://api.github.com/users/phiresky/events{/privacy}", "received_events_url": "https://api.github.com/users/phiresky/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-22T16:34:57Z", "updated_at": "2023-09-01T09:19:23Z", "closed_at": "2023-09-01T09:19:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/75", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/75", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/75.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/75.patch", "merged_at": "2023-09-01T09:19:22Z"}, "body": "The integrated in-memory activity queue does not scale well since it sends many activities in parallel to the same server, and sequentially to multiple servers. There's also no backpressure so  memory keeps building up. It's also not reliable and gets destroyed on process restart. It's been causing lots of issues for lemmy, even though it's been tweaked to be improved a fair bit by e.g @cetra3  .\r\n\r\nThis PR adds a method to send activities directly, without any queueing or retrying logic. The error handling is kept the same.\r\n\r\nIt also removes the activity queue. The intention is to replace the queue (in lemmy) with this: https://github.com/LemmyNet/lemmy/pull/3605 . Parts of that code could *probably* be extracted to not be lemmy- and postgresql specific, but that's out of scope for now.\r\n\r\n\r\nFor applications that don't need reliability or large scale, you can still use `send_activity()` (without retries or parallelization) or implement your own parallel replacement by using a simple retry loop and a tokio JoinSet.\r\n\r\nSince the new queue always calls the `SendActivityTask::prepare` function with only a single inbox, this PR also adds caching to the private key instantiation - otherwise it would be instantiated once per target inbox. I added a config option for the size of this cache. It would be possible to move the cache outside this crate but then the openssl crate would have to become part of the public interface of this crate.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/75/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/75/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/74", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/74/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/74/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/74", "id": 1824340576, "node_id": "PR_kwDOHb-6iM5Wi1y1", "number": 74, "title": "Add webfinger template field, used for remote follow", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-27T13:09:28Z", "updated_at": "2023-08-31T11:42:59Z", "closed_at": "2023-08-31T11:42:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/74", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/74", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/74.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/74.patch", "merged_at": "2023-08-31T11:42:58Z"}, "body": "https://socialhub.activitypub.rocks/t/what-is-the-current-spec-for-remote-follow/2020/15", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/74/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/74/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/72", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/72/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/72/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/72", "id": 1814056550, "node_id": "PR_kwDOHb-6iM5WAWx5", "number": 72, "title": "Increase fetch_object max body size", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-20T13:54:26Z", "updated_at": "2023-07-20T14:27:52Z", "closed_at": "2023-07-20T14:27:51Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/72", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/72", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/72.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/72.patch", "merged_at": "2023-07-20T14:27:51Z"}, "body": "Increase max body size for HTTP requests. The current limit is too low and results in an error when fetching `https://lemmy.ml/c/degoogle/outbox` which has 125014 bytes.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/72/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/72/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/71", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/71/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/71/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/71", "id": 1810631517, "node_id": "PR_kwDOHb-6iM5V0nIg", "number": 71, "title": "Fix tests", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-18T20:03:42Z", "updated_at": "2023-07-18T20:10:26Z", "closed_at": "2023-07-18T20:10:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/71", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/71", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/71.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/71.patch", "merged_at": "2023-07-18T20:10:25Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/71/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/71/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/69", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/69/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/69/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/69", "id": 1805250600, "node_id": "PR_kwDOHb-6iM5VijFq", "number": 69, "title": "Fix webfinger fetching non-compliance", "user": {"login": "samueltardieu", "id": 44656, "node_id": "MDQ6VXNlcjQ0NjU2", "avatar_url": "https://avatars.githubusercontent.com/u/44656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samueltardieu", "html_url": "https://github.com/samueltardieu", "followers_url": "https://api.github.com/users/samueltardieu/followers", "following_url": "https://api.github.com/users/samueltardieu/following{/other_user}", "gists_url": "https://api.github.com/users/samueltardieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/samueltardieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samueltardieu/subscriptions", "organizations_url": "https://api.github.com/users/samueltardieu/orgs", "repos_url": "https://api.github.com/users/samueltardieu/repos", "events_url": "https://api.github.com/users/samueltardieu/events{/privacy}", "received_events_url": "https://api.github.com/users/samueltardieu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-07-14T17:46:01Z", "updated_at": "2023-07-18T20:17:22Z", "closed_at": "2023-07-18T20:17:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/69", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/69", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/69.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/69.patch", "merged_at": "2023-07-18T20:17:22Z"}, "body": "This adds a private function allowing webfinger to use \"jrd+json\" instead of \"activity+json\".\r\n\r\nFix #68", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/69/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/69/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/65", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/65/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/65/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/65", "id": 1796884796, "node_id": "PR_kwDOHb-6iM5VF8yY", "number": 65, "title": "Use anyhow::Error for UrlVerifier return type (fixes #61)", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-10T14:17:47Z", "updated_at": "2023-07-26T14:26:22Z", "closed_at": "2023-07-26T14:26:22Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/65", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/65", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/65.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/65.patch", "merged_at": "2023-07-26T14:26:22Z"}, "body": "This will allow returning LemmyErrorType from [check_apub_id_valid](https://github.com/LemmyNet/lemmy/blob/error-enum-fixed/crates/apub/src/lib.rs#L65) and avoid this ugly workaround:\r\n\r\nhttps://github.com/LemmyNet/lemmy/blob/error-enum-fixed/crates/apub/src/lib.rs#L148-L153", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/65/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/65/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/62", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/62/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/62/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/62", "id": 1790248297, "node_id": "PR_kwDOHb-6iM5UvcLD", "number": 62, "title": "make time-zone aware", "user": {"login": "phiresky", "id": 2303841, "node_id": "MDQ6VXNlcjIzMDM4NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2303841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phiresky", "html_url": "https://github.com/phiresky", "followers_url": "https://api.github.com/users/phiresky/followers", "following_url": "https://api.github.com/users/phiresky/following{/other_user}", "gists_url": "https://api.github.com/users/phiresky/gists{/gist_id}", "starred_url": "https://api.github.com/users/phiresky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phiresky/subscriptions", "organizations_url": "https://api.github.com/users/phiresky/orgs", "repos_url": "https://api.github.com/users/phiresky/repos", "events_url": "https://api.github.com/users/phiresky/events{/privacy}", "received_events_url": "https://api.github.com/users/phiresky/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-07-05T20:25:57Z", "updated_at": "2023-07-26T14:17:40Z", "closed_at": "2023-07-26T14:17:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/62", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/62", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/62.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/62.patch", "merged_at": "2023-07-26T14:17:39Z"}, "body": "companion PR to https://github.com/LemmyNet/lemmy/pull/3496 \r\n\r\nReplaces all instances of NaiveDateTime with DateTime<Utc>", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/62/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/62/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/56", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/56/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/56/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/56", "id": 1785576633, "node_id": "PR_kwDOHb-6iM5Ufnmm", "number": 56, "title": "Fix regex error when actix-web feature not enabled", "user": {"login": "colatkinson", "id": 6528368, "node_id": "MDQ6VXNlcjY1MjgzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/6528368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colatkinson", "html_url": "https://github.com/colatkinson", "followers_url": "https://api.github.com/users/colatkinson/followers", "following_url": "https://api.github.com/users/colatkinson/following{/other_user}", "gists_url": "https://api.github.com/users/colatkinson/gists{/gist_id}", "starred_url": "https://api.github.com/users/colatkinson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colatkinson/subscriptions", "organizations_url": "https://api.github.com/users/colatkinson/orgs", "repos_url": "https://api.github.com/users/colatkinson/repos", "events_url": "https://api.github.com/users/colatkinson/events{/privacy}", "received_events_url": "https://api.github.com/users/colatkinson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-07-03T08:01:32Z", "updated_at": "2023-07-03T13:05:19Z", "closed_at": "2023-07-03T13:05:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/56", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/56", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/56.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/56.patch", "merged_at": "2023-07-03T13:05:18Z"}, "body": "If the crate is built with only the axum feature, compiling the webfinger account regex will fail with an error \"Unicode-aware case insensitivity matching is not available...\" because of the missing unicode-case feature. This doesn't happen if actix is installed because it pulls in the regex crate with all features (via [actix-router][0]).\r\n\r\nThe failure can be demonstrated by reverting this commit's change to Cargo.toml and running:\r\n\r\n    cargo test --no-default-features --features=axum --doc extract_webfinger_name\r\n\r\nResolve this by adding the unicode-case feature to the regex dependency.\r\n\r\n[0]: https://github.com/actix/actix-web/blob/0e8ed50e3a7ac93d94e6c1c6603d0048e1f33fb8/actix-router/Cargo.toml#L25", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/56/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/56/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/54", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/54/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/54/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/54/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/54", "id": 1782506189, "node_id": "PR_kwDOHb-6iM5UVJ9p", "number": 54, "title": "add a separate allow_http flag", "user": {"login": "phiresky", "id": 2303841, "node_id": "MDQ6VXNlcjIzMDM4NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2303841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phiresky", "html_url": "https://github.com/phiresky", "followers_url": "https://api.github.com/users/phiresky/followers", "following_url": "https://api.github.com/users/phiresky/following{/other_user}", "gists_url": "https://api.github.com/users/phiresky/gists{/gist_id}", "starred_url": "https://api.github.com/users/phiresky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phiresky/subscriptions", "organizations_url": "https://api.github.com/users/phiresky/orgs", "repos_url": "https://api.github.com/users/phiresky/repos", "events_url": "https://api.github.com/users/phiresky/events{/privacy}", "received_events_url": "https://api.github.com/users/phiresky/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-06-30T13:08:55Z", "updated_at": "2023-07-03T14:24:12Z", "closed_at": "2023-07-03T14:24:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/54", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/54", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/54.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/54.patch", "merged_at": "2023-07-03T14:24:11Z"}, "body": "this adds a separate configuration to allow http connections. It defaults to debug, so this should be backwards-compatible.\r\n\r\nI need this for local performance benchmarking that has to run in prod mode. But I also think this kind of functionality shouldn't be coupled to the build mode anyways.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/54/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/54/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/53", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/53/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/53/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/53", "id": 1782502386, "node_id": "PR_kwDOHb-6iM5UVJJG", "number": 53, "title": "add shutdown method", "user": {"login": "phiresky", "id": 2303841, "node_id": "MDQ6VXNlcjIzMDM4NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2303841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phiresky", "html_url": "https://github.com/phiresky", "followers_url": "https://api.github.com/users/phiresky/followers", "following_url": "https://api.github.com/users/phiresky/following{/other_user}", "gists_url": "https://api.github.com/users/phiresky/gists{/gist_id}", "starred_url": "https://api.github.com/users/phiresky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phiresky/subscriptions", "organizations_url": "https://api.github.com/users/phiresky/orgs", "repos_url": "https://api.github.com/users/phiresky/repos", "events_url": "https://api.github.com/users/phiresky/events{/privacy}", "received_events_url": "https://api.github.com/users/phiresky/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-06-30T13:06:02Z", "updated_at": "2023-07-04T14:08:44Z", "closed_at": "2023-07-04T14:08:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/53", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/53", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/53.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/53.patch", "merged_at": "2023-07-04T14:08:39Z"}, "body": "This adds a public shutdown method that shuts down the federation while waiting for the workers. This is useful because otherwise the queue is completely lost on shutdown.\r\n\r\nI added this because I need it to benchmark federation performance, but it should probably be added to lemmy as well.\r\n\r\nI also moved the print of Stats to the Debug impl since it's useful in other places.\r\n\r\nCurrently, shutdown only works correctly if worker_count is > 0, but that can be fixed separately.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/53/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/53/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/52", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/52/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/52/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/52", "id": 1774708996, "node_id": "PR_kwDOHb-6iM5T6q5z", "number": 52, "title": "Fix HTTP signature expiration (ref #46)", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-26T12:51:55Z", "updated_at": "2023-08-23T12:55:10Z", "closed_at": "2023-06-27T07:46:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/52", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/52", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/52.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/52.patch", "merged_at": "2023-06-27T07:46:41Z"}, "body": "Turns out that the expiration time needs to be set explicity on the verification side as well. So the previous expiration time of 24 hours was effectively unused, and was really limited to 10 seconds.\r\n\r\nWith this Im setting the expiration back to one hour, as that should be more than sufficient when applied properly. \r\n\r\nThanks @stnfrd for noticing this.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/52/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/52/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/51", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/51/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/51/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/51", "id": 1772165769, "node_id": "PR_kwDOHb-6iM5TyRSx", "number": 51, "title": "fix: make \"other\" error actually transparent", "user": {"login": "phiresky", "id": 2303841, "node_id": "MDQ6VXNlcjIzMDM4NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2303841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phiresky", "html_url": "https://github.com/phiresky", "followers_url": "https://api.github.com/users/phiresky/followers", "following_url": "https://api.github.com/users/phiresky/following{/other_user}", "gists_url": "https://api.github.com/users/phiresky/gists{/gist_id}", "starred_url": "https://api.github.com/users/phiresky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phiresky/subscriptions", "organizations_url": "https://api.github.com/users/phiresky/orgs", "repos_url": "https://api.github.com/users/phiresky/repos", "events_url": "https://api.github.com/users/phiresky/events{/privacy}", "received_events_url": "https://api.github.com/users/phiresky/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-06-23T21:16:26Z", "updated_at": "2023-06-29T08:19:55Z", "closed_at": "2023-06-29T08:19:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/51", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/51", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/51.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/51.patch", "merged_at": "2023-06-29T08:19:49Z"}, "body": "This PR fixes the Display trait for the \"Other\" error. Before, these errors would just output \"Other errors which are not explicitly handled\" for everything without any other context.\r\nwith this change, they output the full anyhow content.\r\n\r\ne.g.: \"data did not match any variant of untagged enum PersonOrGroup\"\r\n\r\nor: \"Request error: error sending request for url (http://localhost:5313/u/Lady_Albedo_96): connection error: Connection reset by peer (os error 104)\"\r\n\r\n\r\nThe reason for this issue was some bad interaction between the \"displaydoc\" library and the \"thiserror\" library. I tried a few other things to fix it but nothing except removing DisplayDoc worked.\r\n\r\nThis PR also adds a few random \"context\" calls that I needed while debugging something. They aren't great but imo the more anyhow context is used the better.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/51/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/51/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/48", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/48/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/48/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/48", "id": 1768387274, "node_id": "PR_kwDOHb-6iM5TlmUF", "number": 48, "title": "Retry connection failure", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-06-21T20:04:24Z", "updated_at": "2023-06-22T07:21:07Z", "closed_at": "2023-06-22T07:21:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/48", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/48", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/48.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/48.patch", "merged_at": "2023-06-22T07:21:06Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/48/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/48/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/47", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/47/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/47/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/47", "id": 1768381636, "node_id": "PR_kwDOHb-6iM5TllCq", "number": 47, "title": "Increase HTTP signature expiration time to one day (fixes #46)", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-06-21T20:01:20Z", "updated_at": "2023-06-26T11:53:43Z", "closed_at": "2023-06-22T07:20:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/47", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/47", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/47.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/47.patch", "merged_at": "2023-06-22T07:20:57Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/47/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/47/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/45", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/45/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/45/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/45", "id": 1766542601, "node_id": "PR_kwDOHb-6iM5TflKw", "number": 45, "title": "Add a no limit option to the config", "user": {"login": "cetra3", "id": 6415435, "node_id": "MDQ6VXNlcjY0MTU0MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6415435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cetra3", "html_url": "https://github.com/cetra3", "followers_url": "https://api.github.com/users/cetra3/followers", "following_url": "https://api.github.com/users/cetra3/following{/other_user}", "gists_url": "https://api.github.com/users/cetra3/gists{/gist_id}", "starred_url": "https://api.github.com/users/cetra3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cetra3/subscriptions", "organizations_url": "https://api.github.com/users/cetra3/orgs", "repos_url": "https://api.github.com/users/cetra3/repos", "events_url": "https://api.github.com/users/cetra3/events{/privacy}", "received_events_url": "https://api.github.com/users/cetra3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-06-21T02:06:14Z", "updated_at": "2023-06-24T15:06:31Z", "closed_at": "2023-06-22T07:40:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/45", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/45", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/45.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/45.patch", "merged_at": "2023-06-22T07:40:59Z"}, "body": "This is an extension to an earlier PR which allows you to set the retry & worker counts to `0` to have basically unlimited tasks.  This does mean that if the server can't keep up with the outgoing requests then it will probably hit RAM limits (i.e, out of memory will occur).", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/45/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/45/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/44", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/44/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/44/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/44", "id": 1763042106, "node_id": "PR_kwDOHb-6iM5TUI4-", "number": 44, "title": "Adding security-considerations to 02_overview.md", "user": {"login": "peterdew", "id": 27804639, "node_id": "MDQ6VXNlcjI3ODA0NjM5", "avatar_url": "https://avatars.githubusercontent.com/u/27804639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peterdew", "html_url": "https://github.com/peterdew", "followers_url": "https://api.github.com/users/peterdew/followers", "following_url": "https://api.github.com/users/peterdew/following{/other_user}", "gists_url": "https://api.github.com/users/peterdew/gists{/gist_id}", "starred_url": "https://api.github.com/users/peterdew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peterdew/subscriptions", "organizations_url": "https://api.github.com/users/peterdew/orgs", "repos_url": "https://api.github.com/users/peterdew/repos", "events_url": "https://api.github.com/users/peterdew/events{/privacy}", "received_events_url": "https://api.github.com/users/peterdew/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-19T08:41:12Z", "updated_at": "2023-06-20T11:48:39Z", "closed_at": "2023-06-20T11:48:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/44", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/44", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/44.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/44.patch", "merged_at": "2023-06-20T11:48:32Z"}, "body": "Activitypub-federation in Rust is presented as a high-level framework that encompasses all basic functionalities, thereby requiring less technical expertise. This may give the impression that security concerns have also been addressed, especially considering the framework handles HTTP signatures.\r\n\r\nMisplaced trust of peaople in the security of data from the Fediverse can further reinforce this perception.\r\nTherefore this addition of security considerations in the overview-section. ", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/44/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/44/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/42", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/42/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/42/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/42", "id": 1756083036, "node_id": "PR_kwDOHb-6iM5S83yl", "number": 42, "title": "Remove `actix-rt` and replace with tokio tasks", "user": {"login": "cetra3", "id": 6415435, "node_id": "MDQ6VXNlcjY0MTU0MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6415435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cetra3", "html_url": "https://github.com/cetra3", "followers_url": "https://api.github.com/users/cetra3/followers", "following_url": "https://api.github.com/users/cetra3/following{/other_user}", "gists_url": "https://api.github.com/users/cetra3/gists{/gist_id}", "starred_url": "https://api.github.com/users/cetra3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cetra3/subscriptions", "organizations_url": "https://api.github.com/users/cetra3/orgs", "repos_url": "https://api.github.com/users/cetra3/repos", "events_url": "https://api.github.com/users/cetra3/events{/privacy}", "received_events_url": "https://api.github.com/users/cetra3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2023-06-14T05:26:06Z", "updated_at": "2023-07-06T12:14:29Z", "closed_at": "2023-06-20T09:54:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/42", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/42", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/42.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/42.patch", "merged_at": "2023-06-20T09:54:14Z"}, "body": "This removes the `background-jobs` crate and replaces it with an inline activity queue that spawns tokio tasks to handle the background queue.  \r\n\r\nI haven't given this a good test yet, as it doesn't appear very easy to benchmark/stress test the activity queue out, so would be interested in thoughts there.\r\n\r\nThis could be built into something with a bit more persistence in the future & generalise on the task submission.\r\n\r\nResolves https://github.com/LemmyNet/activitypub-federation-rust/issues/38 & https://github.com/LemmyNet/activitypub-federation-rust/issues/32\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/42/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/42/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/40", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/40/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/40/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/40/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/40", "id": 1734043851, "node_id": "PR_kwDOHb-6iM5Rx8XA", "number": 40, "title": "Specify in docs that `send_activity` takes remote inboxes", "user": {"login": "Grafcube", "id": 34889224, "node_id": "MDQ6VXNlcjM0ODg5MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/34889224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Grafcube", "html_url": "https://github.com/Grafcube", "followers_url": "https://api.github.com/users/Grafcube/followers", "following_url": "https://api.github.com/users/Grafcube/following{/other_user}", "gists_url": "https://api.github.com/users/Grafcube/gists{/gist_id}", "starred_url": "https://api.github.com/users/Grafcube/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Grafcube/subscriptions", "organizations_url": "https://api.github.com/users/Grafcube/orgs", "repos_url": "https://api.github.com/users/Grafcube/repos", "events_url": "https://api.github.com/users/Grafcube/events{/privacy}", "received_events_url": "https://api.github.com/users/Grafcube/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-31T11:53:33Z", "updated_at": "2023-05-31T12:19:40Z", "closed_at": "2023-05-31T12:18:36Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/40", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/40", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/40.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/40.patch", "merged_at": "2023-05-31T12:18:36Z"}, "body": "Clarify that `send_activity` ignores any local URLs in `inboxes`.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/40/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/40/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/39", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/39/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/39/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/39", "id": 1732922689, "node_id": "PR_kwDOHb-6iM5RuKGw", "number": 39, "title": "Secure mode federation support (WIP)", "user": {"login": "Alexis211", "id": 101484, "node_id": "MDQ6VXNlcjEwMTQ4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/101484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexis211", "html_url": "https://github.com/Alexis211", "followers_url": "https://api.github.com/users/Alexis211/followers", "following_url": "https://api.github.com/users/Alexis211/following{/other_user}", "gists_url": "https://api.github.com/users/Alexis211/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexis211/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexis211/subscriptions", "organizations_url": "https://api.github.com/users/Alexis211/orgs", "repos_url": "https://api.github.com/users/Alexis211/repos", "events_url": "https://api.github.com/users/Alexis211/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexis211/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-05-30T20:07:02Z", "updated_at": "2023-06-12T11:33:00Z", "closed_at": "2023-06-12T11:32:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/39", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/39", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/39.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/39.patch", "merged_at": "2023-06-12T11:32:54Z"}, "body": "This is a first iteration of my work aiming at adding support for so-called \"secure-mode federation\" (#35) (see [Mastodon documentation](https://docs.joinmastodon.org/spec/activitypub/#secure-mode)). The following features are added:\r\n\r\n- In addition to `ObjectId::dereference`, a new function `ObjectId::dereference_signed`, which takes an actor as an additionnal argument and signs the GET request with the actor's private key\r\n- For the server side, a new helper function `signing_actor` (currently only for Actix web) checks whether the request has a valid signature from any actor, and returns that actor so that further checks can be made (e.g. on the actor's identity or on the server where it is hosted).\r\n\r\nOpen questions:\r\n\r\n- Does the proposed API look sensible, does it address well the problem?\r\n- A lot of code is currently duplicated for the `dereference_signed` code path, how can this be improved?", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/39/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/39/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/37", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/37/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/37/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/37", "id": 1718136549, "node_id": "PR_kwDOHb-6iM5Q8GFG", "number": 37, "title": "Change `domain` to `host_str`", "user": {"login": "Grafcube", "id": 34889224, "node_id": "MDQ6VXNlcjM0ODg5MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/34889224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Grafcube", "html_url": "https://github.com/Grafcube", "followers_url": "https://api.github.com/users/Grafcube/followers", "following_url": "https://api.github.com/users/Grafcube/following{/other_user}", "gists_url": "https://api.github.com/users/Grafcube/gists{/gist_id}", "starred_url": "https://api.github.com/users/Grafcube/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Grafcube/subscriptions", "organizations_url": "https://api.github.com/users/Grafcube/orgs", "repos_url": "https://api.github.com/users/Grafcube/repos", "events_url": "https://api.github.com/users/Grafcube/events{/privacy}", "received_events_url": "https://api.github.com/users/Grafcube/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-20T11:01:05Z", "updated_at": "2023-05-22T10:33:33Z", "closed_at": "2023-05-22T08:53:40Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/37", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/37", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/37.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/37.patch", "merged_at": "2023-05-22T08:53:40Z"}, "body": "`ObjectId.dereference` panics if the URL's domain is an IP address. This PR fixes that.\r\n\r\n```rust\r\nlet user1 = ObjectId::<User>::parse(\"http://127.0.0.1/user/grafcube\")?;\r\nlet user2 = ObjectId::<User>::parse(\"http://fosstodon.org/@grafcube\")?;\r\nuser1.dereference(&data).await // panics\r\nuser2.dereference(&data).await // doesn't panic\r\n```", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/37/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/37/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/34", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/34/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/34/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/34/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/34", "id": 1650412953, "node_id": "PR_kwDOHb-6iM5NZ_hm", "number": 34, "title": "Change username regex in webfinger", "user": {"login": "Grafcube", "id": 34889224, "node_id": "MDQ6VXNlcjM0ODg5MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/34889224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Grafcube", "html_url": "https://github.com/Grafcube", "followers_url": "https://api.github.com/users/Grafcube/followers", "following_url": "https://api.github.com/users/Grafcube/following{/other_user}", "gists_url": "https://api.github.com/users/Grafcube/gists{/gist_id}", "starred_url": "https://api.github.com/users/Grafcube/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Grafcube/subscriptions", "organizations_url": "https://api.github.com/users/Grafcube/orgs", "repos_url": "https://api.github.com/users/Grafcube/repos", "events_url": "https://api.github.com/users/Grafcube/events{/privacy}", "received_events_url": "https://api.github.com/users/Grafcube/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-01T10:41:53Z", "updated_at": "2023-04-05T08:08:23Z", "closed_at": "2023-04-02T19:32:54Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/34", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/34", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/34.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/34.patch", "merged_at": "2023-04-02T19:32:54Z"}, "body": "This PR changes the regex used for username in `extract_webfinger_name` to include additional characters like '.' and '-'. This is the same regex used in Mastodon.\r\n\r\nSome usernames may contain hyphens. The old regex made it impossible to get webfinger information for those usernames since it would always return an error.\r\n\r\nThere might be a better way to handle this though because as far as I can tell, the spec says nothing about what values are acceptable for `preferredUsername` so there may be some usernames with '+' or '%' or something else.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/34/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/34/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/33", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/33/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/33/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/33", "id": 1649645808, "node_id": "PR_kwDOHb-6iM5NXhiN", "number": 33, "title": "Multi webfinger response", "user": {"login": "Grafcube", "id": 34889224, "node_id": "MDQ6VXNlcjM0ODg5MjI0", "avatar_url": "https://avatars.githubusercontent.com/u/34889224?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Grafcube", "html_url": "https://github.com/Grafcube", "followers_url": "https://api.github.com/users/Grafcube/followers", "following_url": "https://api.github.com/users/Grafcube/following{/other_user}", "gists_url": "https://api.github.com/users/Grafcube/gists{/gist_id}", "starred_url": "https://api.github.com/users/Grafcube/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Grafcube/subscriptions", "organizations_url": "https://api.github.com/users/Grafcube/orgs", "repos_url": "https://api.github.com/users/Grafcube/repos", "events_url": "https://api.github.com/users/Grafcube/events{/privacy}", "received_events_url": "https://api.github.com/users/Grafcube/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-31T16:07:35Z", "updated_at": "2023-04-05T08:08:29Z", "closed_at": "2023-04-04T19:56:34Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/33", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/33", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/33.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/33.patch", "merged_at": "2023-04-04T19:56:34Z"}, "body": "This PR adds support for multiple items in the webfinger response as well as being able to specify the type of the object. Corresponding docs and tests have also been updated.\r\n\r\nThe only mention of being able to specify a type is in the function's documentation. All the docs and tests only use `None` for kind.", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/33/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/33/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/30", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/30/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/30/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/30", "id": 1638379935, "node_id": "PR_kwDOHb-6iM5Mx8Qz", "number": 30, "title": "Adding woodpecker 1", "user": {"login": "dessalines", "id": 930215, "node_id": "MDQ6VXNlcjkzMDIxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/930215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dessalines", "html_url": "https://github.com/dessalines", "followers_url": "https://api.github.com/users/dessalines/followers", "following_url": "https://api.github.com/users/dessalines/following{/other_user}", "gists_url": "https://api.github.com/users/dessalines/gists{/gist_id}", "starred_url": "https://api.github.com/users/dessalines/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dessalines/subscriptions", "organizations_url": "https://api.github.com/users/dessalines/orgs", "repos_url": "https://api.github.com/users/dessalines/repos", "events_url": "https://api.github.com/users/dessalines/events{/privacy}", "received_events_url": "https://api.github.com/users/dessalines/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-23T21:44:59Z", "updated_at": "2023-03-24T20:48:52Z", "closed_at": "2023-03-24T20:48:52Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/30", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/30", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/30.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/30.patch", "merged_at": "2023-03-24T20:48:52Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/30/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/30/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/29", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/29/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/29/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/29/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/29", "id": 1624333409, "node_id": "PR_kwDOHb-6iM5MCzBF", "number": 29, "title": "Changes to make Lemmy work with 0.4", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-14T21:34:16Z", "updated_at": "2023-03-16T01:11:49Z", "closed_at": "2023-03-16T01:11:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/29", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/29", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/29.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/29.patch", "merged_at": "2023-03-16T01:11:49Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/29/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/29/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/28", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/28/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/28/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/28", "id": 1617970681, "node_id": "PR_kwDOHb-6iM5Ltwpl", "number": 28, "title": "Add verify methods back in, some more fixes", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-09T20:45:07Z", "updated_at": "2023-03-09T21:09:44Z", "closed_at": "2023-03-09T21:09:44Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/28", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/28", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/28.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/28.patch", "merged_at": "2023-03-09T21:09:44Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/28/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/28/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/26", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/26/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/26/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/26", "id": 1590669644, "node_id": "PR_kwDOHb-6iM5KSLoQ", "number": 26, "title": "Major improvements for usability, examples and docs", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-19T12:26:39Z", "updated_at": "2023-03-08T21:23:09Z", "closed_at": "2023-03-08T21:23:09Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/26", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/26", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/26.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/26.patch", "merged_at": "2023-03-08T21:23:08Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/26/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/26/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/25", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/25/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/25/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/25", "id": 1580813688, "node_id": "PR_kwDOHb-6iM5JxaR_", "number": 25, "title": "Merge handler params into single struct", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-11T12:19:00Z", "updated_at": "2023-02-11T12:32:36Z", "closed_at": "2023-02-11T12:32:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/25", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/25", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/25.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/25.patch", "merged_at": "2023-02-11T12:32:35Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/25/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/25/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/24", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/24/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/24/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/24/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/24", "id": 1571000239, "node_id": "PR_kwDOHb-6iM5JQ2y1", "number": 24, "title": "Fix deserialize_skip_error function", "user": {"login": "Nutomic", "id": 1044450, "node_id": "MDQ6VXNlcjEwNDQ0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1044450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nutomic", "html_url": "https://github.com/Nutomic", "followers_url": "https://api.github.com/users/Nutomic/followers", "following_url": "https://api.github.com/users/Nutomic/following{/other_user}", "gists_url": "https://api.github.com/users/Nutomic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nutomic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nutomic/subscriptions", "organizations_url": "https://api.github.com/users/Nutomic/orgs", "repos_url": "https://api.github.com/users/Nutomic/repos", "events_url": "https://api.github.com/users/Nutomic/events{/privacy}", "received_events_url": "https://api.github.com/users/Nutomic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-04T15:50:03Z", "updated_at": "2023-02-04T16:07:14Z", "closed_at": "2023-02-04T16:07:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/24", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/24", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/24.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/24.patch", "merged_at": "2023-02-04T16:07:13Z"}, "body": "https://github.com/serde-rs/serde/issues/1726#issuecomment-577425541", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/24/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/24/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/23", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/23/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/23/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/23", "id": 1555327719, "node_id": "PR_kwDOHb-6iM5IcbUX", "number": 23, "title": "Restrict the body sizes of responses", "user": {"login": "aumetra", "id": 50245791, "node_id": "MDQ6VXNlcjUwMjQ1Nzkx", "avatar_url": "https://avatars.githubusercontent.com/u/50245791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aumetra", "html_url": "https://github.com/aumetra", "followers_url": "https://api.github.com/users/aumetra/followers", "following_url": "https://api.github.com/users/aumetra/following{/other_user}", "gists_url": "https://api.github.com/users/aumetra/gists{/gist_id}", "starred_url": "https://api.github.com/users/aumetra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aumetra/subscriptions", "organizations_url": "https://api.github.com/users/aumetra/orgs", "repos_url": "https://api.github.com/users/aumetra/repos", "events_url": "https://api.github.com/users/aumetra/events{/privacy}", "received_events_url": "https://api.github.com/users/aumetra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-24T16:53:39Z", "updated_at": "2023-01-30T13:31:00Z", "closed_at": "2023-01-28T03:45:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/23", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/23", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/23.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/23.patch", "merged_at": "2023-01-28T03:45:11Z"}, "body": "As discussed via Email, this PR limits the sizes of response bodies read via `reqwest`.  \r\n\r\nThis adds a new configuration option to `InstanceSettingsBuilder` which currently defaults to 2MB.  \r\nIt also introduces a new crate-internal extension trait `ResponseExt` that adds the functions\r\n\r\n- `bytes_limited`\r\n- `json_limited`\r\n- `text_limited`\r\n\r\nThese are all essentially wrappers around the stream returned by `bytes_stream`.  \r\n(Maybe this extension trait could be extracted into an own crate so the code doesn't have to be duplicated for eventual changes to lemmy?)\r\n\r\n---\r\n\r\nI'm not sure if there is an MSRV policy, if there is one: This PR introduces usage of GATs and would bump the MSRV to 1.65", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/23/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/23/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/22", "repository_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust", "labels_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/22/comments", "events_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/22/events", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/22", "id": 1554883802, "node_id": "PR_kwDOHb-6iM5Ia7gM", "number": 22, "title": "feat: expose activity pub json wrapped value", "user": {"login": "oknozor", "id": 24563836, "node_id": "MDQ6VXNlcjI0NTYzODM2", "avatar_url": "https://avatars.githubusercontent.com/u/24563836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oknozor", "html_url": "https://github.com/oknozor", "followers_url": "https://api.github.com/users/oknozor/followers", "following_url": "https://api.github.com/users/oknozor/following{/other_user}", "gists_url": "https://api.github.com/users/oknozor/gists{/gist_id}", "starred_url": "https://api.github.com/users/oknozor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oknozor/subscriptions", "organizations_url": "https://api.github.com/users/oknozor/orgs", "repos_url": "https://api.github.com/users/oknozor/repos", "events_url": "https://api.github.com/users/oknozor/events{/privacy}", "received_events_url": "https://api.github.com/users/oknozor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-24T12:20:44Z", "updated_at": "2023-01-25T00:51:42Z", "closed_at": "2023-01-25T00:51:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/pulls/22", "html_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/22", "diff_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/22.diff", "patch_url": "https://github.com/LemmyNet/activitypub-federation-rust/pull/22.patch", "merged_at": "2023-01-25T00:51:41Z"}, "body": "This is sometime needed when the same actor inbox receive activities from different actor types.\r\nHere is an example from my project: \r\n```rust\r\nasync fn user_inbox(\r\n    headers: HeaderMap,\r\n    method: Method,\r\n    OriginalUri(uri): OriginalUri,\r\n    State(data): State<InstanceHandle>,\r\n    Extension(digest_verified): Extension<DigestVerified>,\r\n    Json(activity): Json<WithContext<PersonAcceptedActivities>>,\r\n) -> impl IntoResponse {\r\n    match activity.inner() {\r\n        // Activities sent by `User` actors\r\n        PersonAcceptedActivities::Follow(_) | PersonAcceptedActivities::CreateIssueComment(_) => {\r\n            receive_activity::<WithContext<PersonAcceptedActivities>, User, InstanceHandle>(\r\n                digest_verified,\r\n                activity,\r\n                &data.clone().local_instance,\r\n                &Data::new(data),\r\n                headers,\r\n                method,\r\n                uri,\r\n            )\r\n            .await\r\n        }\r\n        // Activities sent by `Repository` actors\r\n        PersonAcceptedActivities::AcceptTicket(_) => {\r\n            receive_activity::<WithContext<PersonAcceptedActivities>, Repository, InstanceHandle>(\r\n                digest_verified,\r\n                activity,\r\n                &data.clone().local_instance,\r\n                &Data::new(data),\r\n                headers,\r\n                method,\r\n                uri,\r\n            )\r\n            .await\r\n        }\r\n    }\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/22/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/LemmyNet/activitypub-federation-rust/issues/22/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]