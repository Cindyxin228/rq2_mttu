[{"url": "https://api.github.com/repos/weihanglo/sfz/issues/100", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/100/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/100/events", "html_url": "https://github.com/weihanglo/sfz/pull/100", "id": 1379047445, "node_id": "PR_kwDOBxu0ws4_QZDq", "number": 100, "title": "Release 0.7.1", "user": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-20T08:47:31Z", "updated_at": "2022-09-20T08:47:47Z", "closed_at": "2022-09-20T08:47:44Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/100", "html_url": "https://github.com/weihanglo/sfz/pull/100", "diff_url": "https://github.com/weihanglo/sfz/pull/100.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/100.patch", "merged_at": "2022-09-20T08:47:44Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/100/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/99", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/99/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/99/events", "html_url": "https://github.com/weihanglo/sfz/pull/99", "id": 1374787660, "node_id": "PR_kwDOBxu0ws4_Chmm", "number": 99, "title": "Fix severe compression bug introduced by #97", "user": {"login": "henry40408", "id": 2316687, "node_id": "MDQ6VXNlcjIzMTY2ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2316687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henry40408", "html_url": "https://github.com/henry40408", "followers_url": "https://api.github.com/users/henry40408/followers", "following_url": "https://api.github.com/users/henry40408/following{/other_user}", "gists_url": "https://api.github.com/users/henry40408/gists{/gist_id}", "starred_url": "https://api.github.com/users/henry40408/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henry40408/subscriptions", "organizations_url": "https://api.github.com/users/henry40408/orgs", "repos_url": "https://api.github.com/users/henry40408/repos", "events_url": "https://api.github.com/users/henry40408/events{/privacy}", "received_events_url": "https://api.github.com/users/henry40408/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-15T16:21:32Z", "updated_at": "2022-09-17T12:13:24Z", "closed_at": "2022-09-17T11:13:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/99", "html_url": "https://github.com/weihanglo/sfz/pull/99", "diff_url": "https://github.com/weihanglo/sfz/pull/99.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/99.patch", "merged_at": "2022-09-17T11:13:54Z"}, "body": "closes #98 \r\n\r\n# How to reproduce\r\n\r\n- Prepare a large file, e.g. [Frankenstein; Or, The Modern Prometheus by Mary Wollstonecraft Shelley](https://www.gutenberg.org/ebooks/84), whose size should be greater than 4KB. Save it as `x.txt`.\r\n- Check out master 70b431a.\r\n- `cargo run`\r\n- `curl --compressed http://localhost:5000/x.txt`\r\n\r\nA error like `curl: (23) Failed reading the chunked-encoded stream` will occur and only first 4KB content of file will be returned.\r\n\r\n# Root cause\r\n\r\nhttps://github.com/weihanglo/sfz/blob/70b431ac3c272b2d0e060c34eb9593577bc14703/src/server/serve.rs#L416-L419\r\n\r\nMaybe the body stream isn't split like how I expected, so only the first item of stream get compressed and returned then the rest are dropped. Since the buffer of file stream is 4KB, it might explain why only the first 4KB will be returned:\r\n\r\nhttps://github.com/weihanglo/sfz/blob/70b431ac3c272b2d0e060c34eb9593577bc14703/src/server/send.rs#L160\r\n\r\n# Solution\r\n\r\n- I replace `compress` with `async-compression`.\r\n- Compared to https://github.com/weihanglo/sfz/pull/97#issuecomment-1245448766 , there is no significant performance improvement or loss when client enables deflate or gzip.\r\n- When it comes to brotli, compression level and response time are highly relevant, so this pull request also resolves #98 .\r\n\r\n| brotli        | level = 6                                                                                                                                                                                                                                                                                                                                                    | level = 0, fastest                                                                                                                                                                                                                                                                                                                                           |\r\n|---------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| benchmark     | Running 10s test @ http://localhost:5000/Cargo.toml<br>  2 threads and 10 connections<br>  Thread Stats   Avg      Stdev     Max   +/- Stdev<br>    Latency     5.45ms    2.20ms  23.10ms   72.66%<br>    Req/Sec     0.93k    79.59     1.06k    70.00%<br>  18434 requests in 10.01s, 18.09MB read<br>Requests/sec:   1841.70<br>Transfer/sec:      1.81MB | Running 10s test @ http://localhost:5000/Cargo.toml<br>  2 threads and 10 connections<br>  Thread Stats   Avg      Stdev     Max   +/- Stdev<br>    Latency     2.97ms    1.09ms  19.27ms   69.77%<br>    Req/Sec     1.70k   110.24     3.07k    96.52%<br>  33932 requests in 10.10s, 38.96MB read<br>Requests/sec:   3359.58<br>Transfer/sec:      3.86MB |\r\n| response size (1561) | 700 (44%)                                                                                                                                                                                                                                                                                                                                                    | 875 (56%)                                                                                                                                                                                                                                                                                                                                                    |\r\n\r\n- Another example: [Pride and Prejudice by Jane Austen](https://www.gutenberg.org/ebooks/1342)\r\n\r\n| brotli        | level = 6                                                                                                                                                                                                                                                                                                                                                                                                           | level = 0, fastest                                                                                                                                                                                                                                                                                                                                             |\r\n|---------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| benchmark     | Running 10s test @ http://localhost:5000/1342-0.txt<br>  2 threads and 10 connections<br>  Thread Stats   Avg      Stdev     Max   +/- Stdev<br>    Latency     1.30s   432.24ms   1.79s    76.92%<br>    Req/Sec     4.71      3.89    20.00     78.57%<br>  68 requests in 10.01s, 16.04MB read<br>  Socket errors: connect 0, read 0, write 0, timeout 3<br>Requests/sec:      6.79<br>Transfer/sec:      1.60MB | Running 10s test @ http://localhost:5000/1342-0.txt<br>  2 threads and 10 connections<br>  Thread Stats   Avg      Stdev     Max   +/- Stdev<br>    Latency   880.53ms  337.25ms   1.51s    68.52%<br>    Req/Sec     6.25      4.69    30.00     89.47%<br>  108 requests in 10.01s, 42.28MB read<br>Requests/sec:     **10.78**<br>Transfer/sec:      4.22MB |\r\n| response size (798774) | 246517 (30%)                                                                                                                                                                                                                                                                                                                                                                                                        | 405123 (50%)                                                                                                                                                                                                                                                                                                                                                   |", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/99/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/99/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/97", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/97/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/97/events", "html_url": "https://github.com/weihanglo/sfz/pull/97", "id": 1358950014, "node_id": "PR_kwDOBxu0ws4-N34I", "number": 97, "title": "Stream response body", "user": {"login": "henry40408", "id": 2316687, "node_id": "MDQ6VXNlcjIzMTY2ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2316687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henry40408", "html_url": "https://github.com/henry40408", "followers_url": "https://api.github.com/users/henry40408/followers", "following_url": "https://api.github.com/users/henry40408/following{/other_user}", "gists_url": "https://api.github.com/users/henry40408/gists{/gist_id}", "starred_url": "https://api.github.com/users/henry40408/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henry40408/subscriptions", "organizations_url": "https://api.github.com/users/henry40408/orgs", "repos_url": "https://api.github.com/users/henry40408/repos", "events_url": "https://api.github.com/users/henry40408/events{/privacy}", "received_events_url": "https://api.github.com/users/henry40408/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-01T14:33:35Z", "updated_at": "2022-09-14T14:01:15Z", "closed_at": "2022-09-13T21:10:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/97", "html_url": "https://github.com/weihanglo/sfz/pull/97", "diff_url": "https://github.com/weihanglo/sfz/pull/97.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/97.patch", "merged_at": "2022-09-13T21:10:18Z"}, "body": "closes #33 \r\n\r\nfollows #94 , this pull request will try to stream response body and make sure performance loss as minimum as possible", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/97/reactions", "total_count": 3, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 2, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/97/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/88", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/88/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/88/events", "html_url": "https://github.com/weihanglo/sfz/pull/88", "id": 1169756166, "node_id": "PR_kwDOBxu0ws40d5pw", "number": 88, "title": "cargo update", "user": {"login": "henry40408", "id": 2316687, "node_id": "MDQ6VXNlcjIzMTY2ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2316687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henry40408", "html_url": "https://github.com/henry40408", "followers_url": "https://api.github.com/users/henry40408/followers", "following_url": "https://api.github.com/users/henry40408/following{/other_user}", "gists_url": "https://api.github.com/users/henry40408/gists{/gist_id}", "starred_url": "https://api.github.com/users/henry40408/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henry40408/subscriptions", "organizations_url": "https://api.github.com/users/henry40408/orgs", "repos_url": "https://api.github.com/users/henry40408/repos", "events_url": "https://api.github.com/users/henry40408/events{/privacy}", "received_events_url": "https://api.github.com/users/henry40408/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-15T14:32:32Z", "updated_at": "2022-09-14T14:10:46Z", "closed_at": "2022-03-19T23:43:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/88", "html_url": "https://github.com/weihanglo/sfz/pull/88", "diff_url": "https://github.com/weihanglo/sfz/pull/88.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/88.patch", "merged_at": "2022-03-19T23:43:40Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/88/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/88/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/86", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/86/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/86/events", "html_url": "https://github.com/weihanglo/sfz/pull/86", "id": 1146935845, "node_id": "PR_kwDOBxu0ws4zSW4Y", "number": 86, "title": "cargo update, fix clap deprecations, and clippy warnings", "user": {"login": "henry40408", "id": 2316687, "node_id": "MDQ6VXNlcjIzMTY2ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2316687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henry40408", "html_url": "https://github.com/henry40408", "followers_url": "https://api.github.com/users/henry40408/followers", "following_url": "https://api.github.com/users/henry40408/following{/other_user}", "gists_url": "https://api.github.com/users/henry40408/gists{/gist_id}", "starred_url": "https://api.github.com/users/henry40408/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henry40408/subscriptions", "organizations_url": "https://api.github.com/users/henry40408/orgs", "repos_url": "https://api.github.com/users/henry40408/repos", "events_url": "https://api.github.com/users/henry40408/events{/privacy}", "received_events_url": "https://api.github.com/users/henry40408/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-02-22T13:49:28Z", "updated_at": "2022-02-22T17:20:02Z", "closed_at": "2022-02-22T17:20:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/86", "html_url": "https://github.com/weihanglo/sfz/pull/86", "diff_url": "https://github.com/weihanglo/sfz/pull/86.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/86.patch", "merged_at": "2022-02-22T17:20:02Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/86/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/85", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/85/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/85/events", "html_url": "https://github.com/weihanglo/sfz/pull/85", "id": 1109499804, "node_id": "PR_kwDOBxu0ws4xVbTd", "number": 85, "title": "Release v0.7.0", "user": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-20T16:17:09Z", "updated_at": "2022-01-20T16:28:40Z", "closed_at": "2022-01-20T16:24:46Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/85", "html_url": "https://github.com/weihanglo/sfz/pull/85", "diff_url": "https://github.com/weihanglo/sfz/pull/85.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/85.patch", "merged_at": "2022-01-20T16:24:46Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/85/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/85/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/84", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/84/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/84/events", "html_url": "https://github.com/weihanglo/sfz/pull/84", "id": 1109421214, "node_id": "PR_kwDOBxu0ws4xVK8u", "number": 84, "title": "feat: add arg `coi` for cross-origin isolation", "user": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-01-20T15:11:30Z", "updated_at": "2022-01-20T15:59:41Z", "closed_at": "2022-01-20T15:59:29Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/84", "html_url": "https://github.com/weihanglo/sfz/pull/84", "diff_url": "https://github.com/weihanglo/sfz/pull/84.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/84.patch", "merged_at": "2022-01-20T15:59:29Z"}, "body": "Resolves #83 \r\n\r\nFollow this site and implement COOP and COEP headers https://web.dev/coop-coep/\r\n\r\n```console\r\n$ cargo run -- --coi\r\n```\r\n\r\nOpen the site and check the headers:\r\n\r\n<img width=\"225\" alt=\"image\" src=\"https://user-images.githubusercontent.com/14314532/150365867-0f79843a-09aa-4bbe-80f9-f05888c678cc.png\">\r\n", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/84/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/84/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/82", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/82/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/82/events", "html_url": "https://github.com/weihanglo/sfz/pull/82", "id": 1101184921, "node_id": "PR_kwDOBxu0ws4w5uFw", "number": 82, "title": "chore: bump to clap v3", "user": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-13T04:27:59Z", "updated_at": "2022-01-13T06:25:16Z", "closed_at": "2022-01-13T06:25:14Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/82", "html_url": "https://github.com/weihanglo/sfz/pull/82", "diff_url": "https://github.com/weihanglo/sfz/pull/82.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/82.patch", "merged_at": "2022-01-13T06:25:14Z"}, "body": "- Update deprecate methods\r\n- allow invalid utf8 on path related args\r\n  (disallow by default since v3)", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/82/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/82/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/81", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/81/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/81/events", "html_url": "https://github.com/weihanglo/sfz/pull/81", "id": 1066856358, "node_id": "PR_kwDOBxu0ws4vK0wF", "number": 81, "title": "cargo update", "user": {"login": "henry40408", "id": 2316687, "node_id": "MDQ6VXNlcjIzMTY2ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2316687?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henry40408", "html_url": "https://github.com/henry40408", "followers_url": "https://api.github.com/users/henry40408/followers", "following_url": "https://api.github.com/users/henry40408/following{/other_user}", "gists_url": "https://api.github.com/users/henry40408/gists{/gist_id}", "starred_url": "https://api.github.com/users/henry40408/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henry40408/subscriptions", "organizations_url": "https://api.github.com/users/henry40408/orgs", "repos_url": "https://api.github.com/users/henry40408/repos", "events_url": "https://api.github.com/users/henry40408/events{/privacy}", "received_events_url": "https://api.github.com/users/henry40408/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-30T06:45:17Z", "updated_at": "2022-02-22T13:40:45Z", "closed_at": "2021-11-30T07:32:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/81", "html_url": "https://github.com/weihanglo/sfz/pull/81", "diff_url": "https://github.com/weihanglo/sfz/pull/81.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/81.patch", "merged_at": "2021-11-30T07:32:56Z"}, "body": "just a regular cargo update\r\nrun on rust 1.56.1", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/81/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/81/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/78", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/78/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/78/events", "html_url": "https://github.com/weihanglo/sfz/pull/78", "id": 1055113229, "node_id": "PR_kwDOBxu0ws4umqP9", "number": 78, "title": "Add title attribute to provide a full length file name tooltip", "user": {"login": "mu-arch", "id": 6717350, "node_id": "MDQ6VXNlcjY3MTczNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6717350?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mu-arch", "html_url": "https://github.com/mu-arch", "followers_url": "https://api.github.com/users/mu-arch/followers", "following_url": "https://api.github.com/users/mu-arch/following{/other_user}", "gists_url": "https://api.github.com/users/mu-arch/gists{/gist_id}", "starred_url": "https://api.github.com/users/mu-arch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mu-arch/subscriptions", "organizations_url": "https://api.github.com/users/mu-arch/orgs", "repos_url": "https://api.github.com/users/mu-arch/repos", "events_url": "https://api.github.com/users/mu-arch/events{/privacy}", "received_events_url": "https://api.github.com/users/mu-arch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-11-16T17:02:12Z", "updated_at": "2021-11-16T17:26:01Z", "closed_at": "2021-11-16T17:26:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/78", "html_url": "https://github.com/weihanglo/sfz/pull/78", "diff_url": "https://github.com/weihanglo/sfz/pull/78.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/78.patch", "merged_at": "2021-11-16T17:26:01Z"}, "body": "This could potentially be moved into it's own element in future to provide a prettier popup possibly with previews.", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/78/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/78/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/77", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/77/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/77/events", "html_url": "https://github.com/weihanglo/sfz/pull/77", "id": 1014258067, "node_id": "PR_kwDOBxu0ws4smUfB", "number": 77, "title": "fix: guess charset naively", "user": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-10-03T04:33:32Z", "updated_at": "2021-10-03T16:04:58Z", "closed_at": "2021-10-03T16:04:54Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/77", "html_url": "https://github.com/weihanglo/sfz/pull/77", "diff_url": "https://github.com/weihanglo/sfz/pull/77.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/77.patch", "merged_at": "2021-10-03T16:04:54Z"}, "body": "Fixes #76.\r\n\r\nThis bug was introduced by #69. In order not to perform any additional I/O, we guess charset naively from MIME. Mainly\r\n\r\n- `text/*`, `*/xml`, `*/javascript`, `*/json` -> UTF-8\r\n- `*/*+xml`, `*/*+json` -> UTF-8\r\n- others -> leave it as is\r\n", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/77/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/77/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/weihanglo/sfz/issues/75", "repository_url": "https://api.github.com/repos/weihanglo/sfz", "labels_url": "https://api.github.com/repos/weihanglo/sfz/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/weihanglo/sfz/issues/75/comments", "events_url": "https://api.github.com/repos/weihanglo/sfz/issues/75/events", "html_url": "https://github.com/weihanglo/sfz/pull/75", "id": 1000319089, "node_id": "PR_kwDOBxu0ws4r7u3X", "number": 75, "title": "Remove trailing semicolon in bail macro", "user": {"login": "SY573M404", "id": 40136012, "node_id": "MDQ6VXNlcjQwMTM2MDEy", "avatar_url": "https://avatars.githubusercontent.com/u/40136012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SY573M404", "html_url": "https://github.com/SY573M404", "followers_url": "https://api.github.com/users/SY573M404/followers", "following_url": "https://api.github.com/users/SY573M404/following{/other_user}", "gists_url": "https://api.github.com/users/SY573M404/gists{/gist_id}", "starred_url": "https://api.github.com/users/SY573M404/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SY573M404/subscriptions", "organizations_url": "https://api.github.com/users/SY573M404/orgs", "repos_url": "https://api.github.com/users/SY573M404/repos", "events_url": "https://api.github.com/users/SY573M404/events{/privacy}", "received_events_url": "https://api.github.com/users/SY573M404/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-19T13:50:44Z", "updated_at": "2021-09-19T14:02:27Z", "closed_at": "2021-09-19T14:02:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/weihanglo/sfz/pulls/75", "html_url": "https://github.com/weihanglo/sfz/pull/75", "diff_url": "https://github.com/weihanglo/sfz/pull/75.diff", "patch_url": "https://github.com/weihanglo/sfz/pull/75.patch", "merged_at": "2021-09-19T14:02:26Z"}, "body": "Trailing semicolon in bail macro leads to a compiler warning:\r\n```\r\nwarning: trailing semicolon in macro used in expression position\r\n  --> src\\main.rs:11:49\r\n   |\r\n11 |           return Err(From::from(format!($($tt)*)));\r\n   |                                                   ^\r\n   |\r\n  ::: src\\cli\\args.rs:86:17\r\n   |\r\n86 | /                 bail!(\r\n87 | |                     \"error: failed to access path \\\"{}\\\": {}\",\r\n88 | |                     path.display(),\r\n89 | |                     err,\r\n90 | |                 )\r\n   | |_________________- in this macro invocation\r\n   |\r\n   = note: `#[warn(semicolon_in_expressions_from_macros)]` on by default\r\n   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\r\n   = note: for more information, see issue #79813 <https://github.com/rust-lang/rust/issues/79813>\r\n   = note: macro invocations at the end of a block are treated as expressions\r\n   = note: to ignore the value produced by the macro, add a semicolon after the invocation of `bail`\r\n   = note: this warning originates in the macro `bail` (in Nightly builds, run with -Z macro-backtrace for more info)\r\n```\r\nBy removing it, we will make the world a little better", "reactions": {"url": "https://api.github.com/repos/weihanglo/sfz/issues/75/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/weihanglo/sfz/issues/75/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]