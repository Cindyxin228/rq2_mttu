[{"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14192", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14192/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14192/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14192/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14192", "id": 1336099337, "node_id": "PR_kwDOCkIcu849CMnL", "number": 14192, "title": "Update Rust to 1.63.", "user": {"login": "antiguru", "id": 582946, "node_id": "MDQ6VXNlcjU4Mjk0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/582946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antiguru", "html_url": "https://github.com/antiguru", "followers_url": "https://api.github.com/users/antiguru/followers", "following_url": "https://api.github.com/users/antiguru/following{/other_user}", "gists_url": "https://api.github.com/users/antiguru/gists{/gist_id}", "starred_url": "https://api.github.com/users/antiguru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antiguru/subscriptions", "organizations_url": "https://api.github.com/users/antiguru/orgs", "repos_url": "https://api.github.com/users/antiguru/repos", "events_url": "https://api.github.com/users/antiguru/events{/privacy}", "received_events_url": "https://api.github.com/users/antiguru/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-11T15:06:25Z", "updated_at": "2022-08-11T16:48:51Z", "closed_at": "2022-08-11T16:23:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14192", "html_url": "https://github.com/MaterializeInc/materialize/pull/14192", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14192.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14192.patch", "merged_at": "2022-08-11T16:23:23Z"}, "body": "Upgrade Rust to 1.63.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14192/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14191", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14191/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14191/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14191/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14191", "id": 1335908589, "node_id": "PR_kwDOCkIcu849BjZM", "number": 14191, "title": "[persist]: Modify `downgrade_since` to take a ref Antichain", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-11T12:44:14Z", "updated_at": "2022-08-11T15:12:25Z", "closed_at": "2022-08-11T15:12:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14191", "html_url": "https://github.com/MaterializeInc/materialize/pull/14191", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14191.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14191.patch", "merged_at": "2022-08-11T15:12:25Z"}, "body": "Some of the `downgrade_since` methods take a `new_since: Antichain` and others `new_since: &Antichain`. It seems all can take the reference, as those that take ownership use it in assignment and can use `clone_from` on the reference instead.\r\n\r\nNo strong feels about the urgency of doing this, but @antiguru noticed a bunch of `Antichain::clone` churn in a recent memory profile, and we were tracking down places to tidy that might be contributors!\r\n\r\n### Motivation\r\n\r\n  * This PR replaces calls to `Antichain::clone` with calls to `Antichain::clone_from`, which may avoid allocations.\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14191/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14191/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14190", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14190/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14190/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14190/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14190", "id": 1335867588, "node_id": "PR_kwDOCkIcu849Bap0", "number": 14190, "title": "persist-client: Avoid cloning upper frontier", "user": {"login": "antiguru", "id": 582946, "node_id": "MDQ6VXNlcjU4Mjk0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/582946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antiguru", "html_url": "https://github.com/antiguru", "followers_url": "https://api.github.com/users/antiguru/followers", "following_url": "https://api.github.com/users/antiguru/following{/other_user}", "gists_url": "https://api.github.com/users/antiguru/gists{/gist_id}", "starred_url": "https://api.github.com/users/antiguru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antiguru/subscriptions", "organizations_url": "https://api.github.com/users/antiguru/orgs", "repos_url": "https://api.github.com/users/antiguru/repos", "events_url": "https://api.github.com/users/antiguru/events{/privacy}", "received_events_url": "https://api.github.com/users/antiguru/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-11T12:07:36Z", "updated_at": "2022-08-11T14:12:22Z", "closed_at": "2022-08-11T14:01:21Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14190", "html_url": "https://github.com/MaterializeInc/materialize/pull/14190", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14190.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14190.patch", "merged_at": "2022-08-11T14:01:20Z"}, "body": "This avoids several allocations by returning a reference instead of owned\r\ndata.\r\n\r\nSigned-off-by: Moritz Hoffmann <mh@materialize.com>\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14190/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14190/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14185", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14185/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14185/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14185/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14185", "id": 1335637677, "node_id": "PR_kwDOCkIcu849AppS", "number": 14185, "title": "cloudtest: Tests for antiaffinity and availability zones", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-11T08:30:15Z", "updated_at": "2022-08-11T08:46:25Z", "closed_at": "2022-08-11T08:46:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14185", "html_url": "https://github.com/MaterializeInc/materialize/pull/14185", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14185.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14185.patch", "merged_at": "2022-08-11T08:46:25Z"}, "body": "- expand the KinD cluster to 3 worker nodes\r\n- tag each worker with its name as the availability zone\r\n- add various tests that create clusters and replicas and\r\n  confirm that they are properly spread out across availability\r\n  zones\r\n\r\nRelates to MaterializeInc/database-issues#3878\r\n### Motivation\r\n\r\n  * This PR adds a known-desirable feature.\r\n- MaterializeInc/database-issues#3878\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14185/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14183", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14183/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14183/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14183/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14183", "id": 1335447896, "node_id": "PR_kwDOCkIcu849AByL", "number": 14183, "title": "pgtest: increase default timeout", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-11T04:13:05Z", "updated_at": "2022-08-11T13:02:07Z", "closed_at": "2022-08-11T13:02:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14183", "html_url": "https://github.com/MaterializeInc/materialize/pull/14183", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14183.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14183.patch", "merged_at": "2022-08-11T13:02:06Z"}, "body": "Testing locally yielded unexplained, rare pgtest failures. There were\r\nno crashes, just the timeout message. I think this just means sometimes\r\nthings take longer than 5 seconds? I'm not sure why that is happening,\r\nbut we can bump the timeout to see if it fixes the flakes.\r\n\r\nFixes MaterializeInc/database-issues#4048\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug. MaterializeInc/database-issues#4048\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14183/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14181", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14181/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14181/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14181/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14181", "id": 1335197035, "node_id": "PR_kwDOCkIcu848_NbZ", "number": 14181, "title": "ore: teach tracing about NO_COLOR", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T21:01:22Z", "updated_at": "2022-08-11T02:30:34Z", "closed_at": "2022-08-11T02:30:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14181", "html_url": "https://github.com/MaterializeInc/materialize/pull/14181", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14181.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14181.patch", "merged_at": "2022-08-11T02:30:33Z"}, "body": "For those of us who prefer no colors or don't have terminals with support, teach tracing how to correctly disable ansi codes.\r\n\r\n### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14181/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14179", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14179/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14179/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14179/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14179", "id": 1335108755, "node_id": "PR_kwDOCkIcu848-6pB", "number": 14179, "title": "[testdrive] [kafka-verify] Debug option to print topic contents", "user": {"login": "cjubb39", "id": 3459231, "node_id": "MDQ6VXNlcjM0NTkyMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3459231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjubb39", "html_url": "https://github.com/cjubb39", "followers_url": "https://api.github.com/users/cjubb39/followers", "following_url": "https://api.github.com/users/cjubb39/following{/other_user}", "gists_url": "https://api.github.com/users/cjubb39/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjubb39/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjubb39/subscriptions", "organizations_url": "https://api.github.com/users/cjubb39/orgs", "repos_url": "https://api.github.com/users/cjubb39/repos", "events_url": "https://api.github.com/users/cjubb39/events{/privacy}", "received_events_url": "https://api.github.com/users/cjubb39/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T19:35:59Z", "updated_at": "2022-08-10T20:48:48Z", "closed_at": "2022-08-10T20:48:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14179", "html_url": "https://github.com/MaterializeInc/materialize/pull/14179", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14179.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14179.patch", "merged_at": "2022-08-10T20:48:48Z"}, "body": "This has often been useful when debugging and having to recompile is annoying so seems like a useful tool to have around -- especially since it doesn't make the code much more complicated\r\n\r\n### Motivation\r\ntests\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note): n/a\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14179/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14178", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14178/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14178/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14178/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14178", "id": 1335051836, "node_id": "PR_kwDOCkIcu848-uqn", "number": 14178, "title": "coord: Add system configurations", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T18:56:26Z", "updated_at": "2022-08-10T22:26:26Z", "closed_at": "2022-08-10T22:26:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14178", "html_url": "https://github.com/MaterializeInc/materialize/pull/14178", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14178.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14178.patch", "merged_at": "2022-08-10T22:26:20Z"}, "body": "This commit adds system configuration parameters and their default\r\nvalues. Additionally, this commit finishes the ALTER SYSTEM\r\nimplementation which allows us to modify system configuration\r\nparameters.\r\n\r\nMaterializeInc/cloud#3292\r\n\r\n### Motivation\r\nThis PR adds a known-desirable feature.\r\n\r\n### Tips for reviewer\r\n * Much of this PR is inspired by the existing session variables implementation.\r\n * Currently the system variables (on disk persisted configuration) and the session variables (session specific configuration) are disjoint sets. I played around with combining them into a single set with different hierarchies, but ultimately decided against it due to unnecessary complexity. If you think that they should be implemented as combined sets, then let me know. To implement it you'd need to roughly do the following steps:\r\n   * Change the `parent` of `SessionVar` to `SystemVar`.\r\n   * Merge `SessionVars` and `SystemVars` into a single struct.\r\n   * When calling `SET ...` update only the `SessionVar` in the single session's struct.\r\n   * When calling `ALTER SYSTEM ...` update only the `SystemVar` in the catalog's struct.\r\n   * Periodically re-hydrate the `SystemVar`s in every session (maybe every query a session executes).\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [X] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [X] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14178/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14176", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14176/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14176/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14176/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14176", "id": 1334962562, "node_id": "PR_kwDOCkIcu848-bV-", "number": 14176, "title": "[environmentd] add curl to the envd container", "user": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T17:39:53Z", "updated_at": "2022-08-10T18:34:10Z", "closed_at": "2022-08-10T18:27:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14176", "html_url": "https://github.com/MaterializeInc/materialize/pull/14176", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14176.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14176.patch", "merged_at": "2022-08-10T18:27:22Z"}, "body": "### Motivation\r\n\r\nIts nice to have curl access in each pod, to be able to hit the internal http port, without setting up port forwards! This now match computed and storaged.\r\n\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14176/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14176/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14174", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14174/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14174/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14174/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14174", "id": 1334951202, "node_id": "PR_kwDOCkIcu848-Y6e", "number": 14174, "title": "Make `ComputeCommandHistory` self-compacting", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-10T17:28:21Z", "updated_at": "2022-08-11T07:29:53Z", "closed_at": "2022-08-11T07:29:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14174", "html_url": "https://github.com/MaterializeInc/materialize/pull/14174", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14174.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14174.patch", "merged_at": "2022-08-11T07:29:53Z"}, "body": "This PR makes `ComputeCommandHistory` self-compacting, so that insertions into it (via `push(command)`) will compact the representation as it grows in length. The intended behavior is that compaction is only triggered if the effective length of the command history doubles, complicated slightly by the fact that many commands are *composite* commands containing multiple instructions. This should have the property that it maintains a bounded footprint, as a function of the number of live dataflow, and performs idk bounded-ish total work.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\nCompute instances left running indefinitely would have memory increase without bound, due to a new use of `ComputeCommandHistory` that did not apply the optional compaction. The compaction is no longer optional.\r\n\r\n### Tips for reviewer\r\n\r\nThis has not been tested, and I think we do not have a test that would exercise whether compaction is happening effectively. Ideally, we turn this on for a day or so and see what happens, potentially concurrent with merging if we otherwise like the work.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14174/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14174/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14172", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14172/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14172/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14172/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14172", "id": 1334889676, "node_id": "PR_kwDOCkIcu848-Llo", "number": 14172, "title": "[storage] re-enable pg resumption tests that require reconciliation", "user": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-08-10T16:35:20Z", "updated_at": "2024-09-23T20:57:10Z", "closed_at": "2022-08-10T16:44:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14172", "html_url": "https://github.com/MaterializeInc/materialize/pull/14172", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14172.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14172.patch", "merged_at": "2022-08-10T16:44:47Z"}, "body": "These tests now work because storage reconciliation is working!\r\n\r\ncc https://github.com/MaterializeInc/database-issues/issues/3690\r\n\r\n### Motivation\r\n\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14172/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14172/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14171", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14171/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14171/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14171/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14171", "id": 1334769289, "node_id": "PR_kwDOCkIcu8489y0m", "number": 14171, "title": "pgtest: make a test re-runnable", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T15:02:39Z", "updated_at": "2022-08-10T15:31:50Z", "closed_at": "2022-08-10T15:31:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14171", "html_url": "https://github.com/MaterializeInc/materialize/pull/14171", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14171.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14171.patch", "merged_at": "2022-08-10T15:31:49Z"}, "body": "Helpful when running this in a loop.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14171/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14168", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14168/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14168/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14168/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14168", "id": 1334539846, "node_id": "PR_kwDOCkIcu8489Chi", "number": 14168, "title": "cloudtest: Tests around computed and storaged startup/shutdown", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T12:19:23Z", "updated_at": "2022-08-10T12:40:07Z", "closed_at": "2022-08-10T12:40:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14168", "html_url": "https://github.com/MaterializeInc/materialize/pull/14168", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14168.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14168.patch", "merged_at": "2022-08-10T12:40:07Z"}, "body": "Tests that confirm that storageds and computeds are spawned in\r\nresponse to CREATE commands and removed in response to DROP commands.\r\n\r\nRelates to MaterializeInc/database-issues#3878\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\nWe were missing tests if the K8s orchestrator properly spawns, and more importantly, cleans up, storageds and computeds.\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14168/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14168/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14162", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14162/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14162/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14162/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14162", "id": 1334171352, "node_id": "PR_kwDOCkIcu84870Bc", "number": 14162, "title": "compute: remove linkerd workarounds from networking", "user": {"login": "benesch", "id": 882976, "node_id": "MDQ6VXNlcjg4Mjk3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/882976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benesch", "html_url": "https://github.com/benesch", "followers_url": "https://api.github.com/users/benesch/followers", "following_url": "https://api.github.com/users/benesch/following{/other_user}", "gists_url": "https://api.github.com/users/benesch/gists{/gist_id}", "starred_url": "https://api.github.com/users/benesch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benesch/subscriptions", "organizations_url": "https://api.github.com/users/benesch/orgs", "repos_url": "https://api.github.com/users/benesch/repos", "events_url": "https://api.github.com/users/benesch/events{/privacy}", "received_events_url": "https://api.github.com/users/benesch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-10T07:01:42Z", "updated_at": "2022-08-10T15:20:49Z", "closed_at": "2022-08-10T15:20:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14162", "html_url": "https://github.com/MaterializeInc/materialize/pull/14162", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14162.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14162.patch", "merged_at": "2022-08-10T15:20:46Z"}, "body": "This essentially reverts #12832, which I suspect is no longer necessary\r\nnow that we no longer use linkerd in Materialize Cloud. The easiest way\r\nto find out is to try it while we're still in alpha. We can always\r\nrevert this PR if we rediscover the networking issue.\r\n\r\nFor good measure, this commit also removes the handshake magic, which is\r\nnot necessary now that timely communication is not multiplexed on the\r\nsame port as HTTP and SQL traffic.\r\n\r\n<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\n### Motivation\r\n\r\n  * This PR removes a now-unnecessary workaround.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14162/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14161", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14161/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14161/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14161/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14161", "id": 1334138749, "node_id": "PR_kwDOCkIcu8487tIH", "number": 14161, "title": "pgtest: test invalid param binding", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-10T06:25:45Z", "updated_at": "2022-08-10T15:36:11Z", "closed_at": "2022-08-10T15:36:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14161", "html_url": "https://github.com/MaterializeInc/materialize/pull/14161", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14161.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14161.patch", "merged_at": "2022-08-10T15:36:10Z"}, "body": "This fixes the test_bind_params flake.\r\n\r\nTesting this with tokio_postgres as the driver causes the *driver*\r\nto return the WrongType error message. Wireshark showed that the bind\r\nrequest was never issued to the server. The test flake must be happening\r\nbecause the driver's type cache either is or isn't yet populated, and\r\nso it does end up issuing the bind request to the server which returns\r\nthe no overload error.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14161/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14158", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14158/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14158/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14158/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14158", "id": 1333873821, "node_id": "PR_kwDOCkIcu84861bi", "number": 14158, "title": "[storage] add some comments explaining upsert restarts", "user": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-09T23:05:17Z", "updated_at": "2022-08-11T16:44:13Z", "closed_at": "2022-08-11T00:26:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14158", "html_url": "https://github.com/MaterializeInc/materialize/pull/14158", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14158.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14158.patch", "merged_at": "2022-08-11T00:26:45Z"}, "body": "\r\n\r\n### Motivation\r\n\r\nimprove some code clarity\r\n\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14158/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14156", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14156/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14156/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14156/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14156", "id": 1333804682, "node_id": "PR_kwDOCkIcu8486maa", "number": 14156, "title": "persist: check if state is from the future when decoding it", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-09T21:26:10Z", "updated_at": "2022-08-11T17:28:48Z", "closed_at": "2022-08-11T17:28:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14156", "html_url": "https://github.com/MaterializeInc/materialize/pull/14156", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14156.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14156.patch", "merged_at": "2022-08-11T17:28:47Z"}, "body": "If persist gets some encoded ProtoState from the future (e.g. two\r\nversions of code are running simultaneously against the same shard), it\r\nmight have a field that the current code doesn't know about. This would\r\nbe silently discarded at proto decode time. Unknown Fields [1] are a\r\ntool we can use in the future to help deal with this, but in the\r\nshort-term, it's best to keep the persist read-modify-CaS loop simple\r\nfor as long as we can get away with it (i.e. until we have to offer the\r\nability to do rollbacks).\r\n\r\n[1] https://developers.google.com/protocol-buffers/docs/proto3#unknowns\r\n\r\nTo detect the bad situation and disallow it, we tag every version of\r\nstate written to consensus with the version of code used to encode it.\r\nThen at decode time, we're able to compare the current version against\r\nany we receive and assert as necessary. Initially we reject any version\r\nfrom the future (most conservative but easiest to reason about). If/when\r\nwe support deploy rollbacks and rolling upgrades, we can adjust this\r\nassert as necessary to reflect the policy.\r\n\r\nWe could do the same for blob data, but it shouldn't be necessary. Any\r\nblob data we read is going to be because we fetched it using a pointer\r\nstored in some persist state. If we can handle the state, we can handle\r\nthe blobs it references, too.\r\n\r\n<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\n### Motivation\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14156/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14153", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14153/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14153/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14153/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14153", "id": 1333768935, "node_id": "PR_kwDOCkIcu8486evh", "number": 14153, "title": "stash: optimize consolidate and redundant queries", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-09T20:44:12Z", "updated_at": "2022-08-10T14:57:46Z", "closed_at": "2022-08-10T14:57:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14153", "html_url": "https://github.com/MaterializeInc/materialize/pull/14153", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14153.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14153.patch", "merged_at": "2022-08-10T14:57:45Z"}, "body": "Make consolidate as pipelined as safely possible. Teach many methods\r\nto accept a since or upper instead of fetching it. This remove lots of\r\nredundant queries.\r\n\r\n```\r\nBenchmarking transact\r\nBenchmarking transact: Analyzing\r\ntransact                time:   [74.219 ms 75.907 ms 77.762 ms]\r\n                        change: [-21.248% -17.165% -13.488%] (p = 0.00 < 0.05)\r\n                        Performance has improved.\r\nFound 3 outliers among 25 measurements (12.00%)\r\n  3 (12.00%) high mild\r\n```\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug. MaterializeInc/database-issues#4005\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14153/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14153/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14151", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14151/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14151/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14151/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14151", "id": 1333740714, "node_id": "PR_kwDOCkIcu8486Yti", "number": 14151, "title": "Remove redundant remote struct field", "user": {"login": "bkirwi", "id": 1596339, "node_id": "MDQ6VXNlcjE1OTYzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1596339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkirwi", "html_url": "https://github.com/bkirwi", "followers_url": "https://api.github.com/users/bkirwi/followers", "following_url": "https://api.github.com/users/bkirwi/following{/other_user}", "gists_url": "https://api.github.com/users/bkirwi/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkirwi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkirwi/subscriptions", "organizations_url": "https://api.github.com/users/bkirwi/orgs", "repos_url": "https://api.github.com/users/bkirwi/repos", "events_url": "https://api.github.com/users/bkirwi/events{/privacy}", "received_events_url": "https://api.github.com/users/bkirwi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-08-09T20:17:36Z", "updated_at": "2022-08-11T21:02:52Z", "closed_at": "2022-08-11T21:02:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14151", "html_url": "https://github.com/MaterializeInc/materialize/pull/14151", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14151.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14151.patch", "merged_at": "2022-08-11T21:02:48Z"}, "body": "The `remote` address is now redundant with our host config, which stores this info and more. Let's remove it.\r\n\r\n### Motivation\r\n\r\nThis is a refactor; just tidying up a small redundancy.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - None.\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14151/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14151/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14149", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14149/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14149/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14149/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14149", "id": 1333685791, "node_id": "PR_kwDOCkIcu8486M0E", "number": 14149, "title": "persist: properly return Since errors from ReadHandle::snapshot", "user": {"login": "sploiselle", "id": 19260003, "node_id": "MDQ6VXNlcjE5MjYwMDAz", "avatar_url": "https://avatars.githubusercontent.com/u/19260003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sploiselle", "html_url": "https://github.com/sploiselle", "followers_url": "https://api.github.com/users/sploiselle/followers", "following_url": "https://api.github.com/users/sploiselle/following{/other_user}", "gists_url": "https://api.github.com/users/sploiselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/sploiselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sploiselle/subscriptions", "organizations_url": "https://api.github.com/users/sploiselle/orgs", "repos_url": "https://api.github.com/users/sploiselle/repos", "events_url": "https://api.github.com/users/sploiselle/events{/privacy}", "received_events_url": "https://api.github.com/users/sploiselle/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-09T19:19:48Z", "updated_at": "2022-08-09T19:58:43Z", "closed_at": "2022-08-09T19:58:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14149", "html_url": "https://github.com/MaterializeInc/materialize/pull/14149", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14149.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14149.patch", "merged_at": "2022-08-09T19:58:43Z"}, "body": "Bad copy/paste job lead to placing an expect in a spot that should have returned an error instead.\r\n\r\n### Motivation\r\n\r\nThis PR fixes a recognized bug.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - there are no user-facing behavior changes\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14149/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14147", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14147/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14147/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14147/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14147", "id": 1333589034, "node_id": "PR_kwDOCkIcu84854eR", "number": 14147, "title": "doc/user: minor updates to CDC guides", "user": {"login": "morsapaes", "id": 23521087, "node_id": "MDQ6VXNlcjIzNTIxMDg3", "avatar_url": "https://avatars.githubusercontent.com/u/23521087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morsapaes", "html_url": "https://github.com/morsapaes", "followers_url": "https://api.github.com/users/morsapaes/followers", "following_url": "https://api.github.com/users/morsapaes/following{/other_user}", "gists_url": "https://api.github.com/users/morsapaes/gists{/gist_id}", "starred_url": "https://api.github.com/users/morsapaes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morsapaes/subscriptions", "organizations_url": "https://api.github.com/users/morsapaes/orgs", "repos_url": "https://api.github.com/users/morsapaes/repos", "events_url": "https://api.github.com/users/morsapaes/events{/privacy}", "received_events_url": "https://api.github.com/users/morsapaes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-09T17:47:26Z", "updated_at": "2023-02-24T04:20:17Z", "closed_at": "2022-08-09T17:53:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14147", "html_url": "https://github.com/MaterializeInc/materialize/pull/14147", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14147.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14147.patch", "merged_at": "2022-08-09T17:53:01Z"}, "body": "Part of [DevEx #156](https://github.com/MaterializeInc/developer-experience/issues/156).", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14147/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14144", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14144/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14144/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14144/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14144", "id": 1333452223, "node_id": "PR_kwDOCkIcu8485cLr", "number": 14144, "title": "environmentd: change test assertion to print the error", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-09T15:45:24Z", "updated_at": "2022-08-09T16:39:46Z", "closed_at": "2022-08-09T16:39:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14144", "html_url": "https://github.com/MaterializeInc/materialize/pull/14144", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14144.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14144.patch", "merged_at": "2022-08-09T16:39:45Z"}, "body": "Should help track down test_bind_params flake.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14144/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14144/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14140", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14140/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14140/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14140/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14140", "id": 1333054394, "node_id": "PR_kwDOCkIcu8484GYy", "number": 14140, "title": "Minor changes to run TPC-H queries with tables in Materialize", "user": {"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-08-09T10:34:37Z", "updated_at": "2022-10-07T11:38:23Z", "closed_at": "2022-08-09T14:35:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14140", "html_url": "https://github.com/MaterializeInc/materialize/pull/14140", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14140.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14140.patch", "merged_at": "2022-08-09T14:35:51Z"}, "body": "This PR fixes two minor issues to enable us to run TPC-H queries with tables in Materialize by following the playbook: https://www.notion.so/materialize/Running-TPC-H-with-Tables-in-Materialize-205028a7d4fa45a2ba8e2823913b93d3\r\n\r\nThe changes included are:\r\n\r\n- Enabling of `autocommit` in `optbench` to avoid transaction errors to be raised from `environmentd`\r\n- Including interval subtraction in the filter of TPC-H query 1, since it is part of the standard query. \r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\nWithout autocommit enabled in the connection created by `optbench`, an error is returned when running the initialization command as in the following:\r\n\r\n````\r\n$ bin/optbench init tpch\r\nInitializing \"tpch\" as the DB under test\r\nError: init command failed: {'S': 'ERROR', 'C': '25001', 'M': 'DROP DATABASE IF EXISTS tpch cannot be run inside a transaction block'}\r\n````\r\n\r\nAdditionally, Q1 in TPC-H has an interval subtraction in its filter, which had been previously commented out. \r\n\r\n### Tips for reviewer\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note): N/A\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14140/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14138", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14138/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14138/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14138/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14138", "id": 1333028426, "node_id": "PR_kwDOCkIcu8484Axj", "number": 14138, "title": ".github: drop qa template", "user": {"login": "uce", "id": 1756620, "node_id": "MDQ6VXNlcjE3NTY2MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1756620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uce", "html_url": "https://github.com/uce", "followers_url": "https://api.github.com/users/uce/followers", "following_url": "https://api.github.com/users/uce/following{/other_user}", "gists_url": "https://api.github.com/users/uce/gists{/gist_id}", "starred_url": "https://api.github.com/users/uce/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uce/subscriptions", "organizations_url": "https://api.github.com/users/uce/orgs", "repos_url": "https://api.github.com/users/uce/repos", "events_url": "https://api.github.com/users/uce/events{/privacy}", "received_events_url": "https://api.github.com/users/uce/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-09T10:12:18Z", "updated_at": "2022-08-09T13:31:24Z", "closed_at": "2022-08-09T13:31:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14138", "html_url": "https://github.com/MaterializeInc/materialize/pull/14138", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14138.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14138.patch", "merged_at": "2022-08-09T13:31:19Z"}, "body": "The QA template has been superseded by our epic framework. QA work is either a separate epic or attached to existing epics (e.g. the QA signoff section).\r\n\r\n### Checklist\r\n\r\n  - No user-facing behavior changes\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14138/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14138/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14137", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14137/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14137/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14137/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14137", "id": 1332778432, "node_id": "PR_kwDOCkIcu8483LEB", "number": 14137, "title": "stash: more optimizations", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-09T06:31:10Z", "updated_at": "2022-08-09T16:33:55Z", "closed_at": "2022-08-09T15:51:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14137", "html_url": "https://github.com/MaterializeInc/materialize/pull/14137", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14137.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14137.patch", "merged_at": "2022-08-09T15:51:33Z"}, "body": "Pipeline a bunch of stuff in the append path. All of the pipelining here should be able to execute in any order, so we should not need to worry about async await scheduling details.\r\n\r\n```\r\nBenchmarking transact\r\nBenchmarking transact: Analyzing\r\ntransact                time:   [94.874 ms 98.415 ms 103.23 ms]\r\n                        change: [-19.380% -15.594% -11.413%] (p = 0.00 < 0.05)\r\n                        Performance has improved.\r\nFound 1 outliers among 25 measurements (4.00%)\r\n  1 (4.00%) high severe\r\n```\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug. https://github.com/MaterializeInc/database-issues/issues/4005\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14137/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14137/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14135", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14135/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14135/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14135/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14135", "id": 1332491315, "node_id": "PR_kwDOCkIcu8482NrZ", "number": 14135, "title": "Fix reference to nonexistent \"dataflow\" crate", "user": {"login": "umanwizard", "id": 1893159, "node_id": "MDQ6VXNlcjE4OTMxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umanwizard", "html_url": "https://github.com/umanwizard", "followers_url": "https://api.github.com/users/umanwizard/followers", "following_url": "https://api.github.com/users/umanwizard/following{/other_user}", "gists_url": "https://api.github.com/users/umanwizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/umanwizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umanwizard/subscriptions", "organizations_url": "https://api.github.com/users/umanwizard/orgs", "repos_url": "https://api.github.com/users/umanwizard/repos", "events_url": "https://api.github.com/users/umanwizard/events{/privacy}", "received_events_url": "https://api.github.com/users/umanwizard/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-08T22:55:04Z", "updated_at": "2022-08-08T23:12:03Z", "closed_at": "2022-08-08T23:11:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14135", "html_url": "https://github.com/MaterializeInc/materialize/pull/14135", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14135.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14135.patch", "merged_at": "2022-08-08T23:11:59Z"}, "body": "Fixes https://github.com/MaterializeInc/database-issues/issues/4034", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14135/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14131", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14131/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14131/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14131/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14131", "id": 1332361543, "node_id": "PR_kwDOCkIcu8481xKx", "number": 14131, "title": "persist: add datadriven test for gc", "user": {"login": "pH14", "id": 785446, "node_id": "MDQ6VXNlcjc4NTQ0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/785446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pH14", "html_url": "https://github.com/pH14", "followers_url": "https://api.github.com/users/pH14/followers", "following_url": "https://api.github.com/users/pH14/following{/other_user}", "gists_url": "https://api.github.com/users/pH14/gists{/gist_id}", "starred_url": "https://api.github.com/users/pH14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pH14/subscriptions", "organizations_url": "https://api.github.com/users/pH14/orgs", "repos_url": "https://api.github.com/users/pH14/repos", "events_url": "https://api.github.com/users/pH14/events{/privacy}", "received_events_url": "https://api.github.com/users/pH14/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-08T20:27:24Z", "updated_at": "2022-08-12T14:03:45Z", "closed_at": "2022-08-11T16:38:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14131", "html_url": "https://github.com/MaterializeInc/materialize/pull/14131", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14131.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14131.patch", "merged_at": "2022-08-11T16:38:30Z"}, "body": "<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\nThis PR adds in a datadriven test for verifying basic GC behavior. Having this will make me feel more comfortable about iterating on https://github.com/MaterializeInc/materialize/pull/13961 and https://github.com/MaterializeInc/materialize/pull/14064 to fully bound our gc work.\r\n\r\n### Motivation\r\n\r\n* This PR adds a known-desirable feature.\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\nI had to do something a little hacky, whcih \r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14131/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14129", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14129/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14129/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14129/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14129", "id": 1332301027, "node_id": "PR_kwDOCkIcu8481j-r", "number": 14129, "title": "Un-unsafify `CREATE SOURCE ... SIZE`", "user": {"login": "umanwizard", "id": 1893159, "node_id": "MDQ6VXNlcjE4OTMxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umanwizard", "html_url": "https://github.com/umanwizard", "followers_url": "https://api.github.com/users/umanwizard/followers", "following_url": "https://api.github.com/users/umanwizard/following{/other_user}", "gists_url": "https://api.github.com/users/umanwizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/umanwizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umanwizard/subscriptions", "organizations_url": "https://api.github.com/users/umanwizard/orgs", "repos_url": "https://api.github.com/users/umanwizard/repos", "events_url": "https://api.github.com/users/umanwizard/events{/privacy}", "received_events_url": "https://api.github.com/users/umanwizard/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-08T19:27:56Z", "updated_at": "2022-08-09T19:43:12Z", "closed_at": "2022-08-09T19:43:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14129", "html_url": "https://github.com/MaterializeInc/materialize/pull/14129", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14129.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14129.patch", "merged_at": "2022-08-09T19:43:12Z"}, "body": "Fully explained by title. (Assuming you accept \"un-unsafify\" as an English word)\r\n\r\n### Motivation\r\n\r\nWe want people to be able to use this!\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - The `SIZE` parameter can now be specified when creating a source.\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14129/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14128", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14128/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14128/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14128/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14128", "id": 1332291187, "node_id": "PR_kwDOCkIcu8481h1Z", "number": 14128, "title": "catalog: Allow for more builtin roles", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4327827592, "node_id": "LA_kwDOCkIcu88AAAABAfVoiA", "url": "https://api.github.com/repos/MaterializeInc/materialize/labels/T-proto", "name": "T-proto", "color": "695bd3", "default": false, "description": "Theme: `$T \u21d4 Proto$T` conversions and `*.proto` files"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-08T19:18:33Z", "updated_at": "2022-08-10T23:06:55Z", "closed_at": "2022-08-10T23:05:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14128", "html_url": "https://github.com/MaterializeInc/materialize/pull/14128", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14128.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14128.patch", "merged_at": "2022-08-10T23:05:43Z"}, "body": "This commit updates role ids to have two separate namespaces. One for\r\nbuiltin roles and one for user roles. This will allow us to more easily\r\nadd builtin roles in the future.\r\n\r\nThis is a breaking change.\r\n\r\n\r\n### Motivation\r\nThis PR refactors existing code.\r\n\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [X] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - Changes role ids to be a string, which changes the `id` column of `mz_roles`.\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14128/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14128/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14127", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14127/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14127/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14127/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14127", "id": 1332273709, "node_id": "PR_kwDOCkIcu8481d7T", "number": 14127, "title": "stash: fix postgres comment", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-08T19:04:27Z", "updated_at": "2022-08-08T20:12:00Z", "closed_at": "2022-08-08T20:11:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14127", "html_url": "https://github.com/MaterializeInc/materialize/pull/14127", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14127.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14127.patch", "merged_at": "2022-08-08T20:11:59Z"}, "body": "### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14127/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14127/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14123", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14123/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14123/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14123/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14123", "id": 1331747173, "node_id": "PR_kwDOCkIcu848zr2-", "number": 14123, "title": "opentelemetry: increase largest trace we can collect into jaeger", "user": {"login": "pH14", "id": 785446, "node_id": "MDQ6VXNlcjc4NTQ0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/785446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pH14", "html_url": "https://github.com/pH14", "followers_url": "https://api.github.com/users/pH14/followers", "following_url": "https://api.github.com/users/pH14/following{/other_user}", "gists_url": "https://api.github.com/users/pH14/gists{/gist_id}", "starred_url": "https://api.github.com/users/pH14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pH14/subscriptions", "organizations_url": "https://api.github.com/users/pH14/orgs", "repos_url": "https://api.github.com/users/pH14/repos", "events_url": "https://api.github.com/users/pH14/events{/privacy}", "received_events_url": "https://api.github.com/users/pH14/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-08T11:41:48Z", "updated_at": "2022-08-08T18:50:46Z", "closed_at": "2022-08-08T18:50:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14123", "html_url": "https://github.com/MaterializeInc/materialize/pull/14123", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14123.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14123.patch", "merged_at": "2022-08-08T18:50:46Z"}, "body": "<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\nWhen running Jaeger locally, we're limited to traces that total to 4MB, the default grpc max message size. I found it easy to hit this limit when running various modules with `trace` level logging, so let's try increasing it.\r\n\r\n### Motivation\r\n\r\n* This PR refactors existing code.\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14123/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14123/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14121", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14121/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14121/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14121/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14121", "id": 1331517226, "node_id": "PR_kwDOCkIcu848y56o", "number": 14121, "title": "Update guide.md", "user": {"login": "lluki", "id": 2659045, "node_id": "MDQ6VXNlcjI2NTkwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2659045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lluki", "html_url": "https://github.com/lluki", "followers_url": "https://api.github.com/users/lluki/followers", "following_url": "https://api.github.com/users/lluki/following{/other_user}", "gists_url": "https://api.github.com/users/lluki/gists{/gist_id}", "starred_url": "https://api.github.com/users/lluki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lluki/subscriptions", "organizations_url": "https://api.github.com/users/lluki/orgs", "repos_url": "https://api.github.com/users/lluki/repos", "events_url": "https://api.github.com/users/lluki/events{/privacy}", "received_events_url": "https://api.github.com/users/lluki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-08T08:27:50Z", "updated_at": "2022-08-09T17:54:51Z", "closed_at": "2022-08-09T17:54:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14121", "html_url": "https://github.com/MaterializeInc/materialize/pull/14121", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14121.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14121.patch", "merged_at": "2022-08-09T17:54:51Z"}, "body": "Explain\r\n * how to find the postgres config file\r\nand \r\n * how to install confluent from the tarball\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14121/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14121/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14120", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14120/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14120/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14120/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14120", "id": 1331359336, "node_id": "PR_kwDOCkIcu848yYEh", "number": 14120, "title": "stash: optimize postgres stash a bit", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-08T05:42:16Z", "updated_at": "2022-08-08T19:59:41Z", "closed_at": "2022-08-08T19:59:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14120", "html_url": "https://github.com/MaterializeInc/materialize/pull/14120", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14120.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14120.patch", "merged_at": "2022-08-08T19:59:40Z"}, "body": "Benchmarked against a local cockroach. Hopefully results are better in production, because locally I didn't see much improvement.\r\n\r\n### Motivation\r\n  * This PR fixes a recognized bug. https://github.com/MaterializeInc/database-issues/issues/4005\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14120/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14119", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14119/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14119/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14119/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14119", "id": 1331231113, "node_id": "PR_kwDOCkIcu848x8o9", "number": 14119, "title": "Refresh read leases in storage controller", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-08T02:18:17Z", "updated_at": "2022-08-08T11:49:48Z", "closed_at": "2022-08-08T11:49:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14119", "html_url": "https://github.com/MaterializeInc/materialize/pull/14119", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14119.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14119.patch", "merged_at": "2022-08-08T11:49:48Z"}, "body": "The `ReadHandle`s held by the storage controller would lose their leases if they did not experience changes for 15 minutes. That can happen, because loading data is slow. For example, loading TPCH can take 30+ minutes, and if in that time one creates a MV based on the source, and then drops the MV later on, this will \"unblock\" compaction of the source, but in fact just causes a crash.\r\n\r\nIt seems plausible that there are other issues related to read handles that do not experience a change in `since` frontier, and so do not communicate with `persist`.\r\n\r\nThis PR adds a periodic wake up to the task managing the collections, in which it performs a no-op `maybe_downgrade_since` operation to refresh its leases on all read handles. \r\n\r\ntyvm to @pH14 for pointing out the lease expiration issue!\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n### Tips for reviewer\r\n\r\nThis code is not well written, and should be cleaned up! In particular, there is an example of better code we might use to perform the lease refresh concurrently, but the lifetimes were annoying and I wanted to head to bed. Someone else should pick this up! :D\r\n\r\nIgnore whitespace to simplify the diff.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14119/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14104", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14104/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14104/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14104/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14104", "id": 1330331440, "node_id": "PR_kwDOCkIcu848vUAJ", "number": 14104, "title": "fix incorrectly merged code in #14103", "user": {"login": "umanwizard", "id": 1893159, "node_id": "MDQ6VXNlcjE4OTMxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umanwizard", "html_url": "https://github.com/umanwizard", "followers_url": "https://api.github.com/users/umanwizard/followers", "following_url": "https://api.github.com/users/umanwizard/following{/other_user}", "gists_url": "https://api.github.com/users/umanwizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/umanwizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umanwizard/subscriptions", "organizations_url": "https://api.github.com/users/umanwizard/orgs", "repos_url": "https://api.github.com/users/umanwizard/repos", "events_url": "https://api.github.com/users/umanwizard/events{/privacy}", "received_events_url": "https://api.github.com/users/umanwizard/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-05T19:45:23Z", "updated_at": "2022-08-05T19:53:11Z", "closed_at": "2022-08-05T19:53:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14104", "html_url": "https://github.com/MaterializeInc/materialize/pull/14104", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14104.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14104.patch", "merged_at": "2022-08-05T19:53:11Z"}, "body": "this is what actually works and what I actually wanted to merge; not sure how I submitted the wrong thing", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14104/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14104/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14103", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14103/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14103/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14103/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14103", "id": 1330280907, "node_id": "PR_kwDOCkIcu848vIvh", "number": 14103, "title": "Add pyright settings to pyproject.toml", "user": {"login": "umanwizard", "id": 1893159, "node_id": "MDQ6VXNlcjE4OTMxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umanwizard", "html_url": "https://github.com/umanwizard", "followers_url": "https://api.github.com/users/umanwizard/followers", "following_url": "https://api.github.com/users/umanwizard/following{/other_user}", "gists_url": "https://api.github.com/users/umanwizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/umanwizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umanwizard/subscriptions", "organizations_url": "https://api.github.com/users/umanwizard/orgs", "repos_url": "https://api.github.com/users/umanwizard/repos", "events_url": "https://api.github.com/users/umanwizard/events{/privacy}", "received_events_url": "https://api.github.com/users/umanwizard/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-05T18:54:44Z", "updated_at": "2022-08-05T19:51:41Z", "closed_at": "2022-08-05T19:33:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14103", "html_url": "https://github.com/MaterializeInc/materialize/pull/14103", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14103.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14103.patch", "merged_at": "2022-08-05T19:33:29Z"}, "body": "### Motivation\r\n\r\nThis is useful for people who use pyright with lsp.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n - None", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14103/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14101", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14101/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14101/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14101/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14101", "id": 1330132586, "node_id": "PR_kwDOCkIcu848uoLY", "number": 14101, "title": "persist: fix \"unexpected missing blob\" bug", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-05T16:22:31Z", "updated_at": "2022-08-09T19:26:10Z", "closed_at": "2022-08-09T19:26:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14101", "html_url": "https://github.com/MaterializeInc/materialize/pull/14101", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14101.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14101.patch", "merged_at": "2022-08-09T19:26:09Z"}, "body": "SUBTLE! If Machine::merge_res returns false, the blobs referenced in\r\ncompaction output are deleted so we don't leak them. Naively passing\r\nback the value returned by State::apply_merge_res might give a false\r\nnegative in the presence of retries and Indeterminate errors.\r\nSpecifically, something like the following:\r\n\r\n- We try to apply_merge_res, it matches.\r\n- When apply_unbatched_cmd goes to commit the new state, the\r\n  Consensus::compare_and_set returns an Indeterminate error (but\r\n  actually succeeds). The committed State now contains references to\r\n  the compaction output blobs.\r\n- Machine::apply_unbatched_idempotent_cmd retries the Indeterminate\r\n  error. For whatever reason, this time though it doesn't match\r\n  (maybe the batches simply get grouped difference when deserialized\r\n  from state, or more unavoidably perhaps another compaction\r\n  happens).\r\n- This now bubbles up applied=false to the caller, which uses it as a\r\n  signal that the blobs in the compaction output should be deleted so\r\n  that we don't leak them.\r\n- We now contain references in committed State to blobs that don't\r\n  exist.\r\n\r\nThe fix is to keep track of whether applied ever was true, even for a\r\ncompare_and_set that returned an Indeterminate error. This has the\r\nchance of false positive (leaking a blob) but that's better than a\r\nfalse negative (a blob we can never recover referenced by state). We\r\nanyway need a mechanism to clean up leaked blobs because of process\r\ncrashes.\r\n\r\nCloses MaterializeInc/database-issues#4011\r\n\r\n<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n### Tips for reviewer\r\n\r\nDidn't have time to type up a regression test before my long weekend. Putting this up as a draft in case we end up needing to merge it before we have that.\r\n\r\nMaelstrom seems to be happy with it.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14101/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14100", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14100/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14100/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14100/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14100", "id": 1330074363, "node_id": "PR_kwDOCkIcu848ubuf", "number": 14100, "title": "Update CONNECTION docs to specify PEM format for SSL query options", "user": {"login": "chaas", "id": 4186354, "node_id": "MDQ6VXNlcjQxODYzNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4186354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chaas", "html_url": "https://github.com/chaas", "followers_url": "https://api.github.com/users/chaas/followers", "following_url": "https://api.github.com/users/chaas/following{/other_user}", "gists_url": "https://api.github.com/users/chaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/chaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chaas/subscriptions", "organizations_url": "https://api.github.com/users/chaas/orgs", "repos_url": "https://api.github.com/users/chaas/repos", "events_url": "https://api.github.com/users/chaas/events{/privacy}", "received_events_url": "https://api.github.com/users/chaas/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-05T15:22:42Z", "updated_at": "2022-08-05T18:16:57Z", "closed_at": "2022-08-05T18:16:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14100", "html_url": "https://github.com/MaterializeInc/materialize/pull/14100", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14100.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14100.patch", "merged_at": "2022-08-05T18:16:53Z"}, "body": "Addressing issue https://github.com/MaterializeInc/database-issues/issues/3870. This change updates docs to make required format more clear for all `SSL` query options in `CONNECTION`. \r\n\r\n### Motivation\r\n\r\nThis PR adds a known-desirable feature.\r\n\r\n### Tips for reviewer\r\n\r\nThis is a purely docs change.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\nNo user-facing behavior changes, only user-facing docs changes.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14100/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14099", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14099/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14099/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14099/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14099", "id": 1329876535, "node_id": "PR_kwDOCkIcu848twzw", "number": 14099, "title": "Simplify and generalize `MirRelationExpr` visitor logic", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-05T12:30:37Z", "updated_at": "2022-08-05T21:49:39Z", "closed_at": "2022-08-05T13:07:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14099", "html_url": "https://github.com/MaterializeInc/materialize/pull/14099", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14099.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14099.patch", "merged_at": "2022-08-05T13:07:22Z"}, "body": "This PR adds enumeration methods `MirRelationExpr::{children, children_mut}` capable of enumerating references and mutable references to child expressions. These are more expressive than `visit_children` in that the lifetime bounds are the same as the argument references. Also, the four implementations for `VisitChildren` are simplified into two methods.\r\n\r\n### Motivation\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14099/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14099/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14096", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14096/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14096/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14096/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14096", "id": 1329735584, "node_id": "PR_kwDOCkIcu848tR76", "number": 14096, "title": "platform checks: Add a check for Debezium+Postgres", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-05T10:12:29Z", "updated_at": "2022-08-05T10:51:17Z", "closed_at": "2022-08-05T10:51:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14096", "html_url": "https://github.com/MaterializeInc/materialize/pull/14096", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14096.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14096.patch", "merged_at": "2022-08-05T10:51:17Z"}, "body": "### Motivation\r\n\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\nWe were missing a test for the Debezium envelope in the presence of upgrades and restarts.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14096/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14096/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14089", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14089/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14089/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14089/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14089", "id": 1329223118, "node_id": "PR_kwDOCkIcu848rld6", "number": 14089, "title": "adapter: Add tracing to read and write frontiers", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-04T22:10:52Z", "updated_at": "2022-08-04T22:59:39Z", "closed_at": "2022-08-04T22:59:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14089", "html_url": "https://github.com/MaterializeInc/materialize/pull/14089", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14089.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14089.patch", "merged_at": "2022-08-04T22:59:36Z"}, "body": "\r\n\r\n### Motivation\r\nThis PR refactors existing code.\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [X] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14089/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14087", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14087/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14087/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14087/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14087", "id": 1329138009, "node_id": "PR_kwDOCkIcu848rTTU", "number": 14087, "title": "Prepare for mz-avro bump on crates.io", "user": {"login": "umanwizard", "id": 1893159, "node_id": "MDQ6VXNlcjE4OTMxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umanwizard", "html_url": "https://github.com/umanwizard", "followers_url": "https://api.github.com/users/umanwizard/followers", "following_url": "https://api.github.com/users/umanwizard/following{/other_user}", "gists_url": "https://api.github.com/users/umanwizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/umanwizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umanwizard/subscriptions", "organizations_url": "https://api.github.com/users/umanwizard/orgs", "repos_url": "https://api.github.com/users/umanwizard/repos", "events_url": "https://api.github.com/users/umanwizard/events{/privacy}", "received_events_url": "https://api.github.com/users/umanwizard/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-04T20:22:58Z", "updated_at": "2022-08-12T07:42:32Z", "closed_at": "2022-08-04T21:45:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14087", "html_url": "https://github.com/MaterializeInc/materialize/pull/14087", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14087.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14087.patch", "merged_at": "2022-08-04T21:45:16Z"}, "body": "Bump the version number so we can put something on crates.io to replace the ancient 0.6.5\r\n\r\n### Motivation\r\n\r\nThe old version of the published crate can technically cause UB: https://github.com/MaterializeInc/database-issues/issues/2651\r\n\r\nThus, I have yanked it. I'm not sure if anyone out there is actually using the published version of the crate, but just in case, we might as well publish a new one with a new version number.\r\n\r\nI have also removed @JLDLaughlin from the list of maintainers as she has no longer been working on the Avro decoder for some years, and probably doesn't want more jobs than she already has :) \r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14087/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14087/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14085", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14085/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14085/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14085/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14085", "id": 1329116630, "node_id": "PR_kwDOCkIcu848rOu3", "number": 14085, "title": "Remove some Threshold operators that have no effect", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1244583498, "node_id": "MDU6TGFiZWwxMjQ0NTgzNDk4", "url": "https://api.github.com/repos/MaterializeInc/materialize/labels/C-feature", "name": "C-feature", "color": "7842aa", "default": false, "description": "Category: new feature or request"}, {"id": 3020087139, "node_id": "MDU6TGFiZWwzMDIwMDg3MTM5", "url": "https://api.github.com/repos/MaterializeInc/materialize/labels/A-optimization", "name": "A-optimization", "color": "5fefa7", "default": false, "description": "Area: query optimization and transformation"}, {"id": 4002049137, "node_id": "LA_kwDOCkIcu87uimxx", "url": "https://api.github.com/repos/MaterializeInc/materialize/labels/A-compute", "name": "A-compute", "color": "5fefa7", "default": false, "description": "Area: compute"}], "state": "closed", "locked": false, "assignee": {"login": "aalexandrov", "id": 1071946, "node_id": "MDQ6VXNlcjEwNzE5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1071946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aalexandrov", "html_url": "https://github.com/aalexandrov", "followers_url": "https://api.github.com/users/aalexandrov/followers", "following_url": "https://api.github.com/users/aalexandrov/following{/other_user}", "gists_url": "https://api.github.com/users/aalexandrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/aalexandrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aalexandrov/subscriptions", "organizations_url": "https://api.github.com/users/aalexandrov/orgs", "repos_url": "https://api.github.com/users/aalexandrov/repos", "events_url": "https://api.github.com/users/aalexandrov/events{/privacy}", "received_events_url": "https://api.github.com/users/aalexandrov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "aalexandrov", "id": 1071946, "node_id": "MDQ6VXNlcjEwNzE5NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1071946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aalexandrov", "html_url": "https://github.com/aalexandrov", "followers_url": "https://api.github.com/users/aalexandrov/followers", "following_url": "https://api.github.com/users/aalexandrov/following{/other_user}", "gists_url": "https://api.github.com/users/aalexandrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/aalexandrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aalexandrov/subscriptions", "organizations_url": "https://api.github.com/users/aalexandrov/orgs", "repos_url": "https://api.github.com/users/aalexandrov/repos", "events_url": "https://api.github.com/users/aalexandrov/events{/privacy}", "received_events_url": "https://api.github.com/users/aalexandrov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 27, "created_at": "2022-08-04T19:58:56Z", "updated_at": "2024-09-23T21:40:32Z", "closed_at": "2022-08-10T08:27:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14085", "html_url": "https://github.com/MaterializeInc/materialize/pull/14085", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14085.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14085.patch", "merged_at": "2022-08-10T08:27:47Z"}, "body": "This is preliminary work, up for handing off to the optimization team, to remove `Threshold` operators that can be seen to not have any effect. Essentially, in situations like\r\n```\r\nThreshold( A - Subset(A) )\r\n```\r\nwhere `A` contains no negative multiplicities, we can remove the `Threshold`, because we are certain that its argument will have no negative multiplicities.\r\n\r\nThis PR is a first cut at that, with some crude supporting methods and no tests yet. It has been tested by inspection to correctly remove the `Threshold` from cases such as\r\n```sql\r\nSELECT * FROM input EXCEPT ALL (SELECT * FROM input WHERE field = 7);\r\n```\r\nand \r\n```sql\r\nSELECT * FROM input\r\nEXCEPT ALL\r\nSELECT * FROM\r\n    (SELECT DISTINCT field1 FROM input) grp,\r\n    LATERAL (\r\n        SELECT field2 FROM bar\r\n        WHERE field1 = grp.field1\r\n        LIMIT 1\r\n    )\r\n```\r\nIn both cases, the outermost operator is a `Union` with the expected `Threshold` removed.\r\n\r\nI had some surprising moments along the way, and there may well be some bugs and some opportunities for further optimization (e.g. `Distinct` could also be accepted, and there are broader strokes to use for determination if `A` contains no negative multiplicities).\r\n\r\nFixes MaterializeInc/database-issues#4018\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14085/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14085/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14083", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14083/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14083/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14083/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14083", "id": 1329105071, "node_id": "PR_kwDOCkIcu848rMR-", "number": 14083, "title": "persist: fix bug where Listen wasn't always advancing since", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-04T19:45:40Z", "updated_at": "2022-08-04T20:54:28Z", "closed_at": "2022-08-04T20:54:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14083", "html_url": "https://github.com/MaterializeInc/materialize/pull/14083", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14083.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14083.patch", "merged_at": "2022-08-04T20:54:27Z"}, "body": "Listen used the batch lower in a sort of hack to try to come up with\r\nsome frontier strictly less than the batch upper (so that it would be\r\nsafe to use in a downgrade_since call). This interacted poorly with a\r\nperformance optimization we have that squashes empty batches together.\r\nThe result is that in a shard that is getting no updates (just frontier\r\nprogress), the Listen would see a series of batches with the same lower\r\nand increasing uppers. The idea is still seemingly sound (though remains\r\nquite hacky), we just wanted to use the previous call to next's\r\nfrontier, not the batch lower.\r\n\r\n<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Tips for reviewer\r\n\r\nManually tested this. Not quite sure how to regression test it.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14083/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14082", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14082/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14082/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14082/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14082", "id": 1329102005, "node_id": "PR_kwDOCkIcu848rLoR", "number": 14082, "title": "SQL-PARSER: Move REMOTE parameter to WITH block in CREATE SOURCE", "user": {"login": "bkirwi", "id": 1596339, "node_id": "MDQ6VXNlcjE1OTYzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1596339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkirwi", "html_url": "https://github.com/bkirwi", "followers_url": "https://api.github.com/users/bkirwi/followers", "following_url": "https://api.github.com/users/bkirwi/following{/other_user}", "gists_url": "https://api.github.com/users/bkirwi/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkirwi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkirwi/subscriptions", "organizations_url": "https://api.github.com/users/bkirwi/orgs", "repos_url": "https://api.github.com/users/bkirwi/repos", "events_url": "https://api.github.com/users/bkirwi/events{/privacy}", "received_events_url": "https://api.github.com/users/bkirwi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-04T19:42:02Z", "updated_at": "2022-08-10T05:35:51Z", "closed_at": "2022-08-08T14:53:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14082", "html_url": "https://github.com/MaterializeInc/materialize/pull/14082", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14082.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14082.patch", "merged_at": "2022-08-08T14:53:33Z"}, "body": "This moves the `REMOTE` parameter out of a specific place in the DDL and into a `WITH` block.\r\n\r\n### Motivation\r\n\r\nMaterializeInc/database-issues#3987! In particular, a `WITH` block gives us more flexibility as to ordering, and the code tightens up somewhat.\r\n\r\n### Tips for reviewer\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n(I believe this does not count as a user-facing behaviour change because REMOTE is not considered an external-facing feature, but please correct me if that's not the case!)", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14082/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14080", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14080/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14080/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14080/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14080", "id": 1328990309, "node_id": "PR_kwDOCkIcu848q0eT", "number": 14080, "title": "doc/user: adapt Metabase integration guide", "user": {"login": "morsapaes", "id": 23521087, "node_id": "MDQ6VXNlcjIzNTIxMDg3", "avatar_url": "https://avatars.githubusercontent.com/u/23521087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morsapaes", "html_url": "https://github.com/morsapaes", "followers_url": "https://api.github.com/users/morsapaes/followers", "following_url": "https://api.github.com/users/morsapaes/following{/other_user}", "gists_url": "https://api.github.com/users/morsapaes/gists{/gist_id}", "starred_url": "https://api.github.com/users/morsapaes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morsapaes/subscriptions", "organizations_url": "https://api.github.com/users/morsapaes/orgs", "repos_url": "https://api.github.com/users/morsapaes/repos", "events_url": "https://api.github.com/users/morsapaes/events{/privacy}", "received_events_url": "https://api.github.com/users/morsapaes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-04T17:47:35Z", "updated_at": "2022-08-05T14:44:56Z", "closed_at": "2022-08-05T14:44:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14080", "html_url": "https://github.com/MaterializeInc/materialize/pull/14080", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14080.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14080.patch", "merged_at": "2022-08-05T14:44:55Z"}, "body": "Part of [DevEx #156](https://github.com/MaterializeInc/developer-experience/issues/156).", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14080/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14080/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14079", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14079/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14079/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14079/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14079", "id": 1328914841, "node_id": "PR_kwDOCkIcu848qkSc", "number": 14079, "title": "persist: track per-shard metrics actually per-shard", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-04T16:43:19Z", "updated_at": "2022-08-04T18:01:36Z", "closed_at": "2022-08-04T18:01:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14079", "html_url": "https://github.com/MaterializeInc/materialize/pull/14079", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14079.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14079.patch", "merged_at": "2022-08-04T18:01:36Z"}, "body": "Paul did the BOE math on our prometheus usage and it seems that we\r\nshould be able to store our per-shard metrics actually tagged with\r\nper-shard labels. This might have help tracked down an issue being\r\ninvestigated today where some shard in Frank's environmentd seemed to\r\nhave gotten \"stuck\".\r\n\r\n### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14079/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14077", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14077/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14077/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14077/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14077", "id": 1328881965, "node_id": "PR_kwDOCkIcu848qdy4", "number": 14077, "title": "[process orchestrator] harden local file deletes", "user": {"login": "cjubb39", "id": 3459231, "node_id": "MDQ6VXNlcjM0NTkyMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3459231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjubb39", "html_url": "https://github.com/cjubb39", "followers_url": "https://api.github.com/users/cjubb39/followers", "following_url": "https://api.github.com/users/cjubb39/following{/other_user}", "gists_url": "https://api.github.com/users/cjubb39/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjubb39/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjubb39/subscriptions", "organizations_url": "https://api.github.com/users/cjubb39/orgs", "repos_url": "https://api.github.com/users/cjubb39/repos", "events_url": "https://api.github.com/users/cjubb39/events{/privacy}", "received_events_url": "https://api.github.com/users/cjubb39/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-04T16:17:50Z", "updated_at": "2022-08-04T18:14:23Z", "closed_at": "2022-08-04T18:14:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14077", "html_url": "https://github.com/MaterializeInc/materialize/pull/14077", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14077.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14077.patch", "merged_at": "2022-08-04T18:14:22Z"}, "body": "Make a couple changes to harden the use of the temporary files for the ProcessOrchestrator:\r\n- `fsync` the parent directory after deleting the port metadata file.  This will ensure that we will not be able to read it again in the future.  (the std lib finally uses `F_FULLFSYNC` on osx!)\r\n- Remove the ability for a race between checking for file existence and opening them\r\n- Explicitly drop the process handles in `drop_service` to make it clear that we need this to remove the temp files before the service is fully dropped\r\n\r\nI'm pretty sure the `fsync` fix is the one that actually acutely fixes my issue but I threw the other ones in just for thoroughness sake\r\n\r\n### Motivation\r\nI ran into this while writing up #14009 where we stop a storaged process and immediately turn it back on again\r\n\r\n### Checklist\r\nexisting tests should be fine.  testing fsync is basically impossible", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14077/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14077/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14076", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14076/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14076/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14076/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14076", "id": 1328861664, "node_id": "PR_kwDOCkIcu848qZdv", "number": 14076, "title": "COORD: Add a new unexpected-type error to improve messages", "user": {"login": "bkirwi", "id": 1596339, "node_id": "MDQ6VXNlcjE1OTYzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1596339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkirwi", "html_url": "https://github.com/bkirwi", "followers_url": "https://api.github.com/users/bkirwi/followers", "following_url": "https://api.github.com/users/bkirwi/following{/other_user}", "gists_url": "https://api.github.com/users/bkirwi/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkirwi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkirwi/subscriptions", "organizations_url": "https://api.github.com/users/bkirwi/orgs", "repos_url": "https://api.github.com/users/bkirwi/repos", "events_url": "https://api.github.com/users/bkirwi/events{/privacy}", "received_events_url": "https://api.github.com/users/bkirwi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2022-08-04T16:00:48Z", "updated_at": "2022-08-08T15:47:51Z", "closed_at": "2022-08-08T15:47:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14076", "html_url": "https://github.com/MaterializeInc/materialize/pull/14076", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14076.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14076.patch", "merged_at": "2022-08-08T15:47:44Z"}, "body": "In MaterializeInc/database-issues#3911, we spotted an incorrect error message -- the error said a\r\nparticular name did not exist, where in fact it did but just had an\r\nunexpected type. Add a new error type to represent this, convert\r\na couple methods that ought to be using it, and remove the old type.\r\n\r\n### Motivation\r\n\r\nThis doesn't fix the core issue in MaterializeInc/database-issues#3911, but ought to improve the user's experience in general and make similar things easier to diagnose.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n(This is technically user-visible, but I suspect does not require a release note. Happy to add one on request!)", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14076/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14075", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14075/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14075/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14075/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14075", "id": 1328751313, "node_id": "PR_kwDOCkIcu848qBVi", "number": 14075, "title": "persist: also update WriteHandle upper in fetch_recent_upper", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-04T14:47:41Z", "updated_at": "2022-08-04T15:48:41Z", "closed_at": "2022-08-04T15:48:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14075", "html_url": "https://github.com/MaterializeInc/materialize/pull/14075", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14075.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14075.patch", "merged_at": "2022-08-04T15:48:40Z"}, "body": "This fixes a bug where calling fetch_recent_upper didn't also advance\r\nthe self.upper field that powers `WriteHandle::upper`.\r\n\r\nAlso added a note that we might not even need to cache upper on\r\nWriteHandle, since it should be redundant with info that's already in\r\nmachine+state. Didn't make that change here because I wanted to get this\r\nfix out without having to think through the implications of making a\r\nlarger change.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14075/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14072", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14072/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14072/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14072/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14072", "id": 1328674590, "node_id": "PR_kwDOCkIcu848pw1J", "number": 14072, "title": "Create introspection views over introspection sources for each replica", "user": {"login": "lluki", "id": 2659045, "node_id": "MDQ6VXNlcjI2NTkwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2659045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lluki", "html_url": "https://github.com/lluki", "followers_url": "https://api.github.com/users/lluki/followers", "following_url": "https://api.github.com/users/lluki/following{/other_user}", "gists_url": "https://api.github.com/users/lluki/gists{/gist_id}", "starred_url": "https://api.github.com/users/lluki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lluki/subscriptions", "organizations_url": "https://api.github.com/users/lluki/orgs", "repos_url": "https://api.github.com/users/lluki/repos", "events_url": "https://api.github.com/users/lluki/events{/privacy}", "received_events_url": "https://api.github.com/users/lluki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-08-04T13:52:14Z", "updated_at": "2022-08-10T07:41:11Z", "closed_at": "2022-08-10T07:41:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14072", "html_url": "https://github.com/MaterializeInc/materialize/pull/14072", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14072.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14072.patch", "merged_at": "2022-08-10T07:41:11Z"}, "body": "Add per replica views over introspection sources.\r\n\r\nFixes MaterializeInc/database-issues#4015\r\n\r\n### Motivation\r\n  * This PR fixes a recognized bug.\r\n\r\n### Migration\r\n\r\nTo verify the migration, I used 79defb39496207b1d201d62e38e324325c9d7cd2 to run the following commands \r\n```\r\nCREATE CLUSTER c1 REPLICAS (r (SIZE '1'));\r\nCREATE CLUSTER c2 REPLICAS (SIZE '1'), INTROSPECTION GRANULARITY 0\r\n```\r\n\r\nthen run the PR, and observe the expected views to be present (they are present for c1, but\r\nnot for c2)\r\n\r\n### Tips for reviewer\r\n\r\nThe 3 commits are roughly: \r\n * Add the basic infrastructure for creating and tearing down views on replica create/drop.\r\n * Add all the introspection views we currently use\r\n * Ensure that migration works correctly\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - Make views over introspection sources (such as `mz_materialization_frontiers`) available in a per-replica postfixed variant (like `mz_materialization_frontiers_1`) \r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14072/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14065", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14065/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14065/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14065/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14065", "id": 1328560366, "node_id": "PR_kwDOCkIcu848pXwT", "number": 14065, "title": "doc: Add developer documentation for the \"Platform Checks\" framework", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-04T12:40:20Z", "updated_at": "2022-08-04T12:43:16Z", "closed_at": "2022-08-04T12:43:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14065", "html_url": "https://github.com/MaterializeInc/materialize/pull/14065", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14065.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14065.patch", "merged_at": "2022-08-04T12:43:15Z"}, "body": "### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\nThe checks framework was underdocumented.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14065/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14058", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14058/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14058/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14058/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14058", "id": 1328283273, "node_id": "PR_kwDOCkIcu848ocGy", "number": 14058, "title": "github: add assignee to notify workflow", "user": {"login": "uce", "id": 1756620, "node_id": "MDQ6VXNlcjE3NTY2MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1756620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uce", "html_url": "https://github.com/uce", "followers_url": "https://api.github.com/users/uce/followers", "following_url": "https://api.github.com/users/uce/following{/other_user}", "gists_url": "https://api.github.com/users/uce/gists{/gist_id}", "starred_url": "https://api.github.com/users/uce/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uce/subscriptions", "organizations_url": "https://api.github.com/users/uce/orgs", "repos_url": "https://api.github.com/users/uce/repos", "events_url": "https://api.github.com/users/uce/events{/privacy}", "received_events_url": "https://api.github.com/users/uce/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-04T08:48:45Z", "updated_at": "2022-08-04T12:02:39Z", "closed_at": "2022-08-04T12:02:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14058", "html_url": "https://github.com/MaterializeInc/materialize/pull/14058", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14058.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14058.patch", "merged_at": "2022-08-04T12:02:36Z"}, "body": "### Motivation\r\n\r\nPer request of the product team, add the assignee to the Slack message.\r\n\r\n### Checklist\r\n\r\n  - No user-facing behavior changes\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14058/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14055", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14055/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14055/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14055/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14055", "id": 1327964404, "node_id": "PR_kwDOCkIcu848nYxi", "number": 14055, "title": "Enable upsert sources", "user": {"login": "umanwizard", "id": 1893159, "node_id": "MDQ6VXNlcjE4OTMxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1893159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umanwizard", "html_url": "https://github.com/umanwizard", "followers_url": "https://api.github.com/users/umanwizard/followers", "following_url": "https://api.github.com/users/umanwizard/following{/other_user}", "gists_url": "https://api.github.com/users/umanwizard/gists{/gist_id}", "starred_url": "https://api.github.com/users/umanwizard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umanwizard/subscriptions", "organizations_url": "https://api.github.com/users/umanwizard/orgs", "repos_url": "https://api.github.com/users/umanwizard/repos", "events_url": "https://api.github.com/users/umanwizard/events{/privacy}", "received_events_url": "https://api.github.com/users/umanwizard/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-04T01:51:14Z", "updated_at": "2022-08-08T23:28:46Z", "closed_at": "2022-08-08T17:53:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14055", "html_url": "https://github.com/MaterializeInc/materialize/pull/14055", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14055.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14055.patch", "merged_at": "2022-08-08T17:53:31Z"}, "body": "Enable upsert sources by re-ingesting the upsert hashmap on restart.\r\n\r\nAlso move `resume_upper` computation into a function, and call it from rehydration.\r\n\r\nManual inspection of logs is necessary to see that the test is actually resuming from somewhere other than zero. I will try to follow up with another PR once I figure out a way to test this more precisely.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - Upsert sources are enabled", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14055/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14055/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14051", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14051/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14051/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14051/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14051", "id": 1327834131, "node_id": "PR_kwDOCkIcu848m-Pt", "number": 14051, "title": "adapter,stash: add various tracing", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T22:00:46Z", "updated_at": "2022-08-04T01:21:54Z", "closed_at": "2022-08-04T01:21:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14051", "html_url": "https://github.com/MaterializeInc/materialize/pull/14051", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14051.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14051.patch", "merged_at": "2022-08-04T01:21:53Z"}, "body": "Adds some useful stash tracing.\r\n\r\n### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14051/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14050", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14050/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14050/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14050/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14050", "id": 1327832636, "node_id": "PR_kwDOCkIcu848m97Q", "number": 14050, "title": "test: fix and enable stash tests to restart", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-08-03T21:58:25Z", "updated_at": "2022-08-05T03:46:43Z", "closed_at": "2022-08-05T03:46:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14050", "html_url": "https://github.com/MaterializeInc/materialize/pull/14050", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14050.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14050.patch", "merged_at": "2022-08-05T03:46:43Z"}, "body": "The stash directory was not actually being tested. Move these to restart\r\nwhich are.\r\n\r\nFix the broken cli argument name.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14050/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14048", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14048/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14048/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14048/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14048", "id": 1327828954, "node_id": "PR_kwDOCkIcu848m9JU", "number": 14048, "title": "catalog: Move migration comment", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T21:53:03Z", "updated_at": "2022-08-03T22:35:11Z", "closed_at": "2022-08-03T22:27:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14048", "html_url": "https://github.com/MaterializeInc/materialize/pull/14048", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14048.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14048.patch", "merged_at": "2022-08-03T22:27:20Z"}, "body": "### Motivation\r\nThis PR refactors existing code.\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14048/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14047", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14047/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14047/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14047/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14047", "id": 1327822558, "node_id": "PR_kwDOCkIcu848m7xn", "number": 14047, "title": "adapter: Add initial support for account limits", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T21:44:46Z", "updated_at": "2022-08-09T22:40:56Z", "closed_at": "2022-08-09T22:18:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14047", "html_url": "https://github.com/MaterializeInc/materialize/pull/14047", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14047.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14047.patch", "merged_at": "2022-08-09T22:18:53Z"}, "body": "This commit adds the initial infrastructure needed to support SQL\r\naccount limits. This includes the following:\r\n- System configuration stash collection.\r\n- System configuration system table.\r\n- System configuration in-memory catalog map.\r\n- ALTER SYSTEM SET parsing, statement, plan, and sequencing.\r\n\r\nThis commit has some items missing needed to fully support account\r\nlimits, which will be added in a future commit.\r\n\r\nWorks towards resolving: https://github.com/MaterializeInc/cloud/issues/3292\r\n\r\n### Motivation\r\nThis PR adds a known-desirable feature.\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14047/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14047/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14041", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14041/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14041/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14041/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14041", "id": 1327642613, "node_id": "PR_kwDOCkIcu848mWL4", "number": 14041, "title": "persist: use prepared statements cache in postgres access", "user": {"login": "pH14", "id": 785446, "node_id": "MDQ6VXNlcjc4NTQ0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/785446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pH14", "html_url": "https://github.com/pH14", "followers_url": "https://api.github.com/users/pH14/followers", "following_url": "https://api.github.com/users/pH14/following{/other_user}", "gists_url": "https://api.github.com/users/pH14/gists{/gist_id}", "starred_url": "https://api.github.com/users/pH14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pH14/subscriptions", "organizations_url": "https://api.github.com/users/pH14/orgs", "repos_url": "https://api.github.com/users/pH14/repos", "events_url": "https://api.github.com/users/pH14/events{/privacy}", "received_events_url": "https://api.github.com/users/pH14/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T18:42:39Z", "updated_at": "2022-08-03T20:05:27Z", "closed_at": "2022-08-03T20:05:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14041", "html_url": "https://github.com/MaterializeInc/materialize/pull/14041", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14041.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14041.patch", "merged_at": "2022-08-03T20:05:27Z"}, "body": "<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\n@mjibson found that `tokio_postgres` creates a new prepared statement for every execution. Turns out the `deadpool-postgres` library already has a statement cache built in, so we can use it to prepare each statement only once per connection.\r\n\r\n### Motivation\r\n\r\n* This PR fixes a recognized bug.\r\nhttps://materializeinc.slack.com/archives/CM7ATT65S/p1659475861438349\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14041/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14040", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14040/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14040/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14040/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14040", "id": 1327606443, "node_id": "PR_kwDOCkIcu848mOm8", "number": 14040, "title": "test/pg-cdc: disable pg-cdc-ssl.td until we invent a long term fix", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-03T18:05:17Z", "updated_at": "2022-08-03T18:17:33Z", "closed_at": "2022-08-03T18:17:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14040", "html_url": "https://github.com/MaterializeInc/materialize/pull/14040", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14040.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14040.patch", "merged_at": "2022-08-03T18:17:32Z"}, "body": "This test was fixed as recently as 5 days ago (#13956) but it's flaking\r\nagain (often several times before a PR gets a green and can merge).\r\nDisable it until we come up with a strategy for a longer term fix, which\r\nis being tracked in MaterializeInc/database-issues#4009\r\n\r\n### Motivation\r\n\r\n  * This PR temporarily disables a chronically flaky test.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14040/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14039", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14039/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14039/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14039/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14039", "id": 1327580943, "node_id": "PR_kwDOCkIcu848mJbz", "number": 14039, "title": "persist: always log determinate error retries at debug", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-03T17:39:50Z", "updated_at": "2022-08-03T21:56:56Z", "closed_at": "2022-08-03T21:56:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14039", "html_url": "https://github.com/MaterializeInc/materialize/pull/14039", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14039.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14039.patch", "merged_at": "2022-08-03T21:56:55Z"}, "body": "The determinate \"could not serialize access\" errors happen often enough\r\nin dev (which uses Postgres) that it's impeding people's work. At the\r\nsame time, it's been a source of confusion for eng. The situation is\r\nmuch better on CRDB and we have metrics coverage in prod, so this is\r\nredundant enough that it's more hurtful than helpful. As a result,\r\nintentionally ignore INFO_MIN_ATTEMPTS and always logs at debug.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [N/A] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [N/A] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14039/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14036", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14036/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14036/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14036/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14036", "id": 1327502696, "node_id": "PR_kwDOCkIcu848l5J4", "number": 14036, "title": "dbt-materialize: audit mz_generate_name, api relations, make database aware", "user": {"login": "ahelium", "id": 8192401, "node_id": "MDQ6VXNlcjgxOTI0MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8192401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahelium", "html_url": "https://github.com/ahelium", "followers_url": "https://api.github.com/users/ahelium/followers", "following_url": "https://api.github.com/users/ahelium/following{/other_user}", "gists_url": "https://api.github.com/users/ahelium/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahelium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahelium/subscriptions", "organizations_url": "https://api.github.com/users/ahelium/orgs", "repos_url": "https://api.github.com/users/ahelium/repos", "events_url": "https://api.github.com/users/ahelium/events{/privacy}", "received_events_url": "https://api.github.com/users/ahelium/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-03T16:25:22Z", "updated_at": "2022-08-04T18:00:12Z", "closed_at": "2022-08-04T18:00:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14036", "html_url": "https://github.com/MaterializeInc/materialize/pull/14036", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14036.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14036.patch", "merged_at": "2022-08-04T18:00:08Z"}, "body": "- Deprecate mz_generate_name function in favor of internal dbt functionality \r\n- Make dbt-materialize database aware\r\n- Audit the way relations are dropped pre create\r\n- Adjust catalog query to include materialize specific attributes\r\n\r\n### Motivation\r\n\r\nThis PR fixes previously unreported bugs.\r\n\r\n- This [PR](https://github.com/MaterializeInc/materialize/pull/13706/files) introduced cloud specific code into the adapter. Specifically in the `list_relations_without_caching` and `catalog` macros. I adjusted those macros to work with both the binary and cloud. This _might_ prolong the need for us to check the version of materialize we are running against.   \r\n\r\n  A question: I diverged from using pg_catalog here because mz_catalog has a better representation of the resources (sources, sinks, indexes, (in the case of cloud) materialized views). Is this ok? Is there a better/different query we should be using? \r\n\r\n- Old Relations had different types than New Relations, and so were not getting correctly dropped in the custom materialization macros: for example, adding the below to the source custom [materialization](https://github.com/MaterializeInc/materialize/pull/14036/files#diff-bde408dfb29db5e4f97c46f1d4342c864168143043d78cc826d61dfc55611aa6) \r\n  ```\r\n  {{ log(\"OLD Relation: \" ~ old_relation.type, info=true) }}\r\n  {{ log(\"NEW Relation: \" ~ target_relation.type, info=true) }}\r\n  ```\r\n  And running a source model: \r\n  ```\r\n  18:40:04  1 of 3 START source model public.market_orders_raw ............................. [RUN]\r\n  CLASS TYPE <class 'dbt.adapters.materialize.relation.MaterializeRelation'>\r\n  18:40:04  OLD Relation: table\r\n  18:40:04  NEW Relation: source\r\n  ```\r\n  The [get_relation](https://github.com/dbt-labs/dbt-core/blob/main/core/dbt/adapters/base/impl.py#L745) function runs the `list_relations_without_caching` on first run, and caches the results for dbt to more quickly grab next time. The cached relations were getting stored with BaseRelation type value, not MaterializeRelationType specific values we need to correctly drop sources, sinks, etc.  Seeds were also not getting dropped correctly, but now should be. \r\n\r\n### Tips for reviewer\r\n\r\nI've included @morsapaes work to use Redpanda instead of Kafka for testing. \r\nPR for removing mz_generate_name macro from demos/docs is next, should this get approved. \r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14036/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14035", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14035/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14035/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14035/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14035", "id": 1327381307, "node_id": "PR_kwDOCkIcu848leht", "number": 14035, "title": "slt: increase timeout to 600m", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T15:13:12Z", "updated_at": "2022-08-04T05:48:04Z", "closed_at": "2022-08-04T05:48:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14035", "html_url": "https://github.com/MaterializeInc/materialize/pull/14035", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14035.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14035.patch", "merged_at": "2022-08-04T05:48:03Z"}, "body": "Due to recent performance regressions, the full SLT does not complete\r\nwithin the previous 5-hour timeout.\r\n\r\nAt the same time, the tests were previously passing, so they provide\r\nvalue that we should try to preserve instead of disabling them.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\nNightly SLT is timing out even after `CREATE INDEX` was added to all the tests.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14035/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14035/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14032", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14032/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14032/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14032/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14032", "id": 1327156245, "node_id": "PR_kwDOCkIcu848kts3", "number": 14032, "title": "checks framework: Move the jobs from Nightly to regular CI", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T12:37:33Z", "updated_at": "2022-08-03T15:22:13Z", "closed_at": "2022-08-03T15:22:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14032", "html_url": "https://github.com/MaterializeInc/materialize/pull/14032", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14032.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14032.patch", "merged_at": "2022-08-03T15:22:13Z"}, "body": "Move the platform checks jobs to the regular CI so that testing of\r\nreconciliation happens on a per-push basis.\r\n### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\nThe \"platform checks\" jobs have been green now for quite a while and provide important testing of reconciliation.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14032/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14031", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14031/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14031/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14031/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14031", "id": 1327013891, "node_id": "PR_kwDOCkIcu848kOmx", "number": 14031, "title": "New introspection source and view to show frontiers for storage source instantiations at the dataflow layer", "user": {"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4327827592, "node_id": "LA_kwDOCkIcu88AAAABAfVoiA", "url": "https://api.github.com/repos/MaterializeInc/materialize/labels/T-proto", "name": "T-proto", "color": "695bd3", "default": false, "description": "Theme: `$T \u21d4 Proto$T` conversions and `*.proto` files"}], "state": "closed", "locked": false, "assignee": {"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-08-03T10:35:23Z", "updated_at": "2022-10-07T11:38:15Z", "closed_at": "2022-08-05T16:41:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14031", "html_url": "https://github.com/MaterializeInc/materialize/pull/14031", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14031.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14031.patch", "merged_at": "2022-08-05T16:41:19Z"}, "body": "This PR create an introspection source and corresponding view that allow us to observe, with the information available at the COMPUTE layer, the instantaneous (in wall-clock time) frontier of a `persist` source instantiation within the context of a dataflow. The new introspection source is called `mz_worker_materialization_source_frontiers` and its corresponding view aggregating across workers is called `mz_materialization_source_frontiers`.\r\n\r\nFixes MaterializeInc/database-issues#3977 \r\n\r\nThe following changes were carried out:\r\n\r\n- Changed source frontier compute logging events to carry a delta field so that they can be exposed through a downstream arrangement backing the new introspection source.\r\n- Changed `inspect_container` operator that captures storage source frontiers in the context of a dataflow in COMPUTE to report addition and removal of source instantiation frontiers.\r\n- Changed demux operator and relevant compute logging code to include forwarding of source frontier events to downstream arrangement.\r\n- Added new introspection source and view to built-ins.\r\n- Updated tests to consider the addition of the new introspection source and view.\r\n- Updated system catalog documentation to include new introspection source and view.\r\n- Updated system catalog documentation related to materializations to include materialized views and not only indexes as structures that are exported by dataflows and to include tables and materialized views as part of possible input sources for dataflows. \r\n\r\n### Motivation\r\n\r\n  * This PR adds a known-desirable feature. https://github.com/MaterializeInc/database-issues/issues/3977\r\n\r\n### Tips for reviewer\r\n\r\nThe core point to be validated in this PR is the soundness of capturing and forwarding +1 and -1 deltas from the `inspect_container` operator for processing by compute logging. The expectation in the current code is that the `inspect_container` operators will be cleaned up properly when a dataflow is dropped to end up removing their last frontier update for each source instantiation in the dataflow. In more detail, this cleanup should be executed by Timely after the compute layer drops its references to the dataflow, so it is expected that source operators have a chance to shut down by reporting an empty frontier.  \r\n\r\nAnd as always, Rust style suggestions are welcome. \r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - Added `mz_worker_materialization_source_frontiers` introspection source and `mz_materialization_source_frontiers` introspection view to expose frontiers for storage source instantiations as observed by the dataflow layer.\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14031/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14030", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14030/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14030/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14030/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14030", "id": 1326933297, "node_id": "PR_kwDOCkIcu848j9LC", "number": 14030, "title": "github: add notify triage workflow", "user": {"login": "uce", "id": 1756620, "node_id": "MDQ6VXNlcjE3NTY2MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1756620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uce", "html_url": "https://github.com/uce", "followers_url": "https://api.github.com/users/uce/followers", "following_url": "https://api.github.com/users/uce/following{/other_user}", "gists_url": "https://api.github.com/users/uce/gists{/gist_id}", "starred_url": "https://api.github.com/users/uce/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uce/subscriptions", "organizations_url": "https://api.github.com/users/uce/orgs", "repos_url": "https://api.github.com/users/uce/repos", "events_url": "https://api.github.com/users/uce/events{/privacy}", "received_events_url": "https://api.github.com/users/uce/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-03T09:26:53Z", "updated_at": "2022-08-03T11:14:16Z", "closed_at": "2022-08-03T11:14:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14030", "html_url": "https://github.com/MaterializeInc/materialize/pull/14030", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14030.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14030.patch", "merged_at": "2022-08-03T11:14:12Z"}, "body": "Adds a GitHub Actions workflow that posts new issues with label\r\nC-triage to the Materialize #github-triage Slack channel.\r\n\r\n@morsapaes Is there a way to test this without merging? Thanks for the pointer to the existing workflow.\r\n\r\n### Motivation\r\n\r\nThis should help implement the new [bug triage process](https://www.notion.so/materialize/Bug-Triage-Process-848417b94da64a7cbe59d1c73dc4e403).\r\n\r\n### Tips for reviewer\r\n\r\nThis has been mostly copy-pasted from the existing [slack_notify_p1.yml](https://github.com/MaterializeInc/materialize/blob/cb8bb30/.github/workflows/slack_notify_p1.yml) workflow.\r\n\r\n### Checklist\r\n\r\n  - No user-facing behavior changes\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14030/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14029", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14029/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14029/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14029/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14029", "id": 1326879573, "node_id": "PR_kwDOCkIcu848jxlY", "number": 14029, "title": "dbt-materialize: migrate to new testing framework", "user": {"login": "morsapaes", "id": 23521087, "node_id": "MDQ6VXNlcjIzNTIxMDg3", "avatar_url": "https://avatars.githubusercontent.com/u/23521087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morsapaes", "html_url": "https://github.com/morsapaes", "followers_url": "https://api.github.com/users/morsapaes/followers", "following_url": "https://api.github.com/users/morsapaes/following{/other_user}", "gists_url": "https://api.github.com/users/morsapaes/gists{/gist_id}", "starred_url": "https://api.github.com/users/morsapaes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morsapaes/subscriptions", "organizations_url": "https://api.github.com/users/morsapaes/orgs", "repos_url": "https://api.github.com/users/morsapaes/repos", "events_url": "https://api.github.com/users/morsapaes/events{/privacy}", "received_events_url": "https://api.github.com/users/morsapaes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-03T08:41:56Z", "updated_at": "2022-10-12T18:22:51Z", "closed_at": "2022-08-04T21:55:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14029", "html_url": "https://github.com/MaterializeInc/materialize/pull/14029", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14029.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14029.patch", "merged_at": "2022-08-04T21:55:31Z"}, "body": "Fixes MaterializeInc/database-issues#3600. Counting on this to unblock MaterializeInc/materialize#13661 and set us on track to upgrade to `dbt-core v1.2.0` without carrying this technical debt any further.\r\n\r\n### Tips for reviewer\r\n\r\n- It feels a bit verbose to use entirely new models to test indexes on custom materializations, since these are now defined as configs. Is there a strong reason to keep dedicated `_index.sql` models instead of configuring indexes in the materialization model we're testing?\r\n- dbt Labs are phase-migrating the tests to the new framework, and IIUC `schema_test` didn't make the cut yet; this is the only test that wasn't ported from the old `materialize.dbtspec` test file.\r\n- `TestIncremental`, `TestSnapshotCheckCols` and `TestSnapshotTimestamp` are now explicitly marked to be skipped instead of commented out.\r\n\r\n  ```\r\n  ========================================================== test session starts ==========================================================\r\n  platform linux -- Python 3.8.6, pytest-7.1.2, pluggy-1.0.0\r\n  rootdir: /dbt-materialize, configfile: pytest.ini\r\n  collected 12 items\r\n  \r\n  dbt-materialize/tests/adapter/test_basic.py .....s.ss.                                                                            [ 83%]\r\n  dbt-materialize/tests/adapter/test_custom_materializations.py .                                                                   [ 91%]\r\n  dbt-materialize/tests/adapter/test_data_tests.py .                                                                                [100%]\r\n  \r\n  =============================================== 9 passed, 3 skipped in 204.18s (0:03:24) ================================================\r\n  ```", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14029/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14028", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14028/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14028/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14028/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14028", "id": 1326876677, "node_id": "PR_kwDOCkIcu848jw83", "number": 14028, "title": "feature-benchmark: Allow Redpanda to be used in place of Confluent stack", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-03T08:39:28Z", "updated_at": "2022-08-04T05:41:11Z", "closed_at": "2022-08-04T05:41:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14028", "html_url": "https://github.com/MaterializeInc/materialize/pull/14028", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14028.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14028.patch", "merged_at": "2022-08-04T05:41:11Z"}, "body": "Provide a --redpanda option to the default workflow that starts Redpanda\r\ninstead of the Confluent stack.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\nThe feature benchmark was not usable on M macs due to very slow Confluent stack.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14028/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14028/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14025", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14025/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14025/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14025/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14025", "id": 1326423013, "node_id": "PR_kwDOCkIcu848iR2J", "number": 14025, "title": "coord: initialize read policy for log indexes", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T21:35:30Z", "updated_at": "2022-08-02T22:19:48Z", "closed_at": "2022-08-02T22:17:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14025", "html_url": "https://github.com/MaterializeInc/materialize/pull/14025", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14025.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14025.patch", "merged_at": "2022-08-02T22:17:32Z"}, "body": "Fixes MaterializeInc/database-issues#4007\r\n\r\n### Motivation\r\nThis PR fixes a recognized bug.\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14025/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14023", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14023/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14023/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14023/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14023", "id": 1326395666, "node_id": "PR_kwDOCkIcu848iL6h", "number": 14023, "title": "persist: only modify cockroach table after creating it", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T21:00:52Z", "updated_at": "2022-08-03T15:42:01Z", "closed_at": "2022-08-03T15:42:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14023", "html_url": "https://github.com/MaterializeInc/materialize/pull/14023", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14023.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14023.patch", "merged_at": "2022-08-03T15:42:00Z"}, "body": "Could not startup on cockroach because the table didn't exist yet. This would have been caught by a test if we tested with cockroach, but we don't. See https://github.com/MaterializeInc/materialize/pull/13954.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14023/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14021", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14021/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14021/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14021/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14021", "id": 1326333672, "node_id": "PR_kwDOCkIcu848h-gm", "number": 14021, "title": "persist: assign gc work preferentially to writers", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4327827592, "node_id": "LA_kwDOCkIcu88AAAABAfVoiA", "url": "https://api.github.com/repos/MaterializeInc/materialize/labels/T-proto", "name": "T-proto", "color": "695bd3", "default": false, "description": "Theme: `$T \u21d4 Proto$T` conversions and `*.proto` files"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T19:52:50Z", "updated_at": "2022-08-03T17:46:08Z", "closed_at": "2022-08-03T17:46:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14021", "html_url": "https://github.com/MaterializeInc/materialize/pull/14021", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14021.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14021.patch", "merged_at": "2022-08-03T17:46:08Z"}, "body": "I originally thought it made sense to assign gc work proportionally to\r\nwhoever caused the seqno_since to move forward (either the last readers\r\nto stop using a given seqno, or if there are no readers, any writer).\r\nThis has turned out to be wrong for at least two reasons:\r\n\r\n- I was imagining that it would usually be some computed persist_source\r\n  that would be selected. This might be the case for a big snapshot at\r\n  computed startup, but in practice the steady-state case has turned out\r\n  to be that this is some controller (enforcing our since compaction\r\n  policy) and so _all_ gc runs in environmentd. The GC traffic for an\r\n  env scales with the total persist traffic, so this is a pretty bad\r\n  scaling bottleneck. Plus, environmentd is the most latency sensitive\r\n  of any mz process. Fixing this is the immediate motivation for this\r\n  PR.\r\n- Even if the above hadn't been the case, we'd have continually selected\r\n  whichever persist_source was most behind, potentially keeping it\r\n  behind by adding additional (background) work.\r\n\r\nInstead, Aljoscha suggested making GC, like compaction, the\r\nresponsibility of writers. Paul points out that we still want GC to\r\nhappen even if some storaged is down for a source while a potentially\r\nlarge number of computed processes are calling downgrade_since, so this\r\nprobably means \"preferentially writers\". He also points out that we\r\nhappen to know in state whether there are any writers. It takes a\r\nvillage to raise a GC policy.\r\n\r\nSo, now GC works as follows:\r\n\r\n - A new last_seq_req is maintained in State.\r\n - Whenever `apply_unbatched_cmd` computes a new_state for some cmd, it\r\n   after checks if this should result in a GC req. If so, this is noted\r\n   in new_state before we CaS (this allows us to sneak last_seq_req\r\n   maintenance in without adding any new state versions).\r\n - This logic compares the current seqno_since of State to the last\r\n   request against some threshold (to rate-limit GC a bit). It also only\r\n   generates a request if the current cmd is a writer or if there are no\r\n   writers registered.\r\n\r\nIn practice, this means in the common case user table GC still falls on\r\nenvironmentd, but source GC happens in storaged and materialized view GC\r\nhappens in computed. If the uncommon case, someone still picks it up.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Tips for reviewer\r\n\r\nWe probably want a test for this, but I was curious to get a CI run while I type that up.\r\n\r\nWe add a proto field for last_gc_req, but the decode interprets missing as \"0\", which is backward_compatible and does the right thing.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14021/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14021/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14020", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14020/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14020/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14020/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14020", "id": 1326221082, "node_id": "PR_kwDOCkIcu848hmBv", "number": 14020, "title": "persist: bigger connection pool", "user": {"login": "pH14", "id": 785446, "node_id": "MDQ6VXNlcjc4NTQ0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/785446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pH14", "html_url": "https://github.com/pH14", "followers_url": "https://api.github.com/users/pH14/followers", "following_url": "https://api.github.com/users/pH14/following{/other_user}", "gists_url": "https://api.github.com/users/pH14/gists{/gist_id}", "starred_url": "https://api.github.com/users/pH14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pH14/subscriptions", "organizations_url": "https://api.github.com/users/pH14/orgs", "repos_url": "https://api.github.com/users/pH14/repos", "events_url": "https://api.github.com/users/pH14/events{/privacy}", "received_events_url": "https://api.github.com/users/pH14/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-02T18:09:27Z", "updated_at": "2022-08-03T20:49:32Z", "closed_at": "2022-08-03T20:49:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14020", "html_url": "https://github.com/MaterializeInc/materialize/pull/14020", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14020.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14020.patch", "merged_at": "2022-08-03T20:49:32Z"}, "body": "<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\nWe had been seeing unexpectedly high latency performing `compare_and_set`, in a way that seemed too high to just be time spent querying CRDB. Pulling a connection from the pool is the other major contributor to `compare_and_set`'s end-to-end timing, so this PR raises the limit substantially. In practice, a process will only create `n` connections if it ever needed `n` concurrent calls, so this will only affect (positively!) processes that need more connections than they're currently given.\r\n\r\nI tried running this change on my personal environment, and saw an immediate and substantial improvement in `compare_and_set` timings (the red line), previously spending 20-45s in `compare_and_set` per reporting interval down to 4-4.5s (!) \r\n\r\n<img width=\"1193\" alt=\"Screen Shot 2022-08-02 at 4 54 38 PM\" src=\"https://user-images.githubusercontent.com/785446/182471791-22a37abc-51be-4a57-94ae-d3c209961925.png\">\r\n\r\nTODO:\r\n- [x] Gauge metric for connection pool size\r\n- [x] Counter metrics for time spent acquiring connections\r\n\r\n### Motivation\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14020/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14017", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14017/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14017/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14017/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14017", "id": 1326160256, "node_id": "PR_kwDOCkIcu848hYcl", "number": 14017, "title": "adapter: trace CREATE SOURCE through the task", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T17:26:32Z", "updated_at": "2022-08-02T20:15:08Z", "closed_at": "2022-08-02T20:15:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14017", "html_url": "https://github.com/MaterializeInc/materialize/pull/14017", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14017.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14017.patch", "merged_at": "2022-08-02T20:15:07Z"}, "body": "### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14017/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14014", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14014/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14014/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14014/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14014", "id": 1325799815, "node_id": "PR_kwDOCkIcu848gK2c", "number": 14014, "title": "cloudtest: Add documentation", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T12:43:53Z", "updated_at": "2022-08-02T12:48:24Z", "closed_at": "2022-08-02T12:48:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14014", "html_url": "https://github.com/MaterializeInc/materialize/pull/14014", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14014.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14014.patch", "merged_at": "2022-08-02T12:48:24Z"}, "body": "Document the features that are available to use inside tests.\r\n\r\n### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\ncloudtest's documentation was incomplete.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14014/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14013", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14013/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14013/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14013/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14013", "id": 1325784212, "node_id": "PR_kwDOCkIcu848gHeg", "number": 14013, "title": "add CASCDE to DROP CLUSTER REPLICA", "user": {"login": "lluki", "id": 2659045, "node_id": "MDQ6VXNlcjI2NTkwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2659045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lluki", "html_url": "https://github.com/lluki", "followers_url": "https://api.github.com/users/lluki/followers", "following_url": "https://api.github.com/users/lluki/following{/other_user}", "gists_url": "https://api.github.com/users/lluki/gists{/gist_id}", "starred_url": "https://api.github.com/users/lluki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lluki/subscriptions", "organizations_url": "https://api.github.com/users/lluki/orgs", "repos_url": "https://api.github.com/users/lluki/repos", "events_url": "https://api.github.com/users/lluki/events{/privacy}", "received_events_url": "https://api.github.com/users/lluki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T12:30:46Z", "updated_at": "2022-08-04T14:35:39Z", "closed_at": "2022-08-04T14:35:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14013", "html_url": "https://github.com/MaterializeInc/materialize/pull/14013", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14013.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14013.patch", "merged_at": "2022-08-04T14:35:39Z"}, "body": "If we create a replica, we create introspection sources with them. Thus for removing a replica, we check if there are dependencies on that view. To enable the user to remove the replica, including dependencies on the introspection sources, this commit adds a `CASCADE` option to `DROP CLUSTER REPLICA`\r\n\r\n### Motivation\r\n  * This PR fixes a recognized bug.\r\n    Fixes MaterializeInc/database-issues#3994 \r\n\r\n### Tips for reviewer\r\n\r\nIt's fairly straight forward. The cascade logic was already present as `DROP CLUSTER CASCADE` was correctly implemented before.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - `DROP CLUSTER REPLICA` accepts a `CASCADE` option that removes dependencies on introspection sources.\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14013/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14012", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14012/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14012/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14012/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14012", "id": 1325764436, "node_id": "PR_kwDOCkIcu848gDP3", "number": 14012, "title": "cloudtest: A new batch of tests", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-02T12:13:52Z", "updated_at": "2022-08-10T07:53:23Z", "closed_at": "2022-08-10T07:53:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14012", "html_url": "https://github.com/MaterializeInc/materialize/pull/14012", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14012.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14012.patch", "merged_at": "2022-08-10T07:53:23Z"}, "body": "- tests that crash environmentd, computed and storaged and confirm\r\n  that they are restarted properly\r\n\r\n- a test for CREATE SECRET in a K8s environment\r\n\r\n- testdrive has been fixed to allow minio to be used an S3 endpoint\r\n  in preparation for future S3 tests\r\n\r\n### Motivation\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\nRelates to MaterializeInc/database-issues#3878\r\n\r\n### Tips for reviewer\r\n\r\n@benesch I made a change to testdrive (not currently used) to make it compatible with minio in K8s, which requires authentication (as opposed to minio on localstack, which does not).", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14012/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14012/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14011", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14011/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14011/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14011/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14011", "id": 1325610996, "node_id": "PR_kwDOCkIcu848fiPs", "number": 14011, "title": "Incorrect debug assertion in compute logging for source frontiers", "user": {"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "vmarcos", "id": 1850983, "node_id": "MDQ6VXNlcjE4NTA5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1850983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmarcos", "html_url": "https://github.com/vmarcos", "followers_url": "https://api.github.com/users/vmarcos/followers", "following_url": "https://api.github.com/users/vmarcos/following{/other_user}", "gists_url": "https://api.github.com/users/vmarcos/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmarcos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmarcos/subscriptions", "organizations_url": "https://api.github.com/users/vmarcos/orgs", "repos_url": "https://api.github.com/users/vmarcos/repos", "events_url": "https://api.github.com/users/vmarcos/events{/privacy}", "received_events_url": "https://api.github.com/users/vmarcos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-08-02T10:01:17Z", "updated_at": "2022-10-07T11:38:28Z", "closed_at": "2022-08-02T12:13:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14011", "html_url": "https://github.com/MaterializeInc/materialize/pull/14011", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14011.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14011.patch", "merged_at": "2022-08-02T12:13:44Z"}, "body": "This PR fixes a debug assertion based on an incorrect assumption in the compute logging code related to tracking source instantiation frontier events. These events differ from other compute logging events in that they are captured by a Timely operator (`inspect_container`); thus, their lifecycle is managed by Timely (i.e., by way of managing the operator lifecycle) and not necessarily aligned with the lifecycle of other  compute logging events, importantly the dropping of the corresponding dataflow of which the source instantiation is a part. \r\n\r\nFixes MaterializeInc/database-issues#4002 \r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug. https://github.com/MaterializeInc/database-issues/issues/4002\r\n \r\n### Tips for reviewer\r\n\r\nIt should be the case in `compute.rs` now that at the end of processing a compute log event, an entry can only exist in `storage_sources` if a corresponding entry exists in `active_dataflows`. \r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note): N/A\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14011/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14008", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14008/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14008/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14008/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14008", "id": 1325013916, "node_id": "PR_kwDOCkIcu848djZQ", "number": 14008, "title": "Establish that read holds are valid as acquired", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-01T21:41:56Z", "updated_at": "2022-08-04T15:04:58Z", "closed_at": "2022-08-04T15:04:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14008", "html_url": "https://github.com/MaterializeInc/materialize/pull/14008", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14008.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14008.patch", "merged_at": "2022-08-04T15:04:58Z"}, "body": "Light diagnostic assert that should tell us if we initialize read holds that are not valid at the moment we establish them.\r\n\r\n### Motivation\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14008/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14008/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14007", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14007/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14007/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14007/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14007", "id": 1324974011, "node_id": "PR_kwDOCkIcu848dans", "number": 14007, "title": "Improve the information reported by read hold asserts", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-01T20:59:26Z", "updated_at": "2022-08-01T21:38:28Z", "closed_at": "2022-08-01T21:38:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14007", "html_url": "https://github.com/MaterializeInc/materialize/pull/14007", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14007.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14007.patch", "merged_at": "2022-08-01T21:38:27Z"}, "body": "Asserts seen in the wild lack sufficient information to diagnose where the problem may lie.\r\n\r\n### Motivation\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14007/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14006", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14006/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14006/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14006/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14006", "id": 1324950731, "node_id": "PR_kwDOCkIcu848dVir", "number": 14006, "title": "coord: optimize read hold updates", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-01T20:34:30Z", "updated_at": "2022-08-01T21:04:43Z", "closed_at": "2022-08-01T21:04:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14006", "html_url": "https://github.com/MaterializeInc/materialize/pull/14006", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14006.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14006.patch", "merged_at": "2022-08-01T21:04:39Z"}, "body": "### Motivation\r\nThis PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14006/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14005", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14005/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14005/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14005/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14005", "id": 1324829752, "node_id": "PR_kwDOCkIcu848c8GU", "number": 14005, "title": "persist: collect some shard level metrics", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-01T18:50:46Z", "updated_at": "2022-08-01T21:38:59Z", "closed_at": "2022-08-01T21:38:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14005", "html_url": "https://github.com/MaterializeInc/materialize/pull/14005", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14005.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14005.patch", "merged_at": "2022-08-01T21:38:59Z"}, "body": "Ideally, we'd break these down per-shard, but that might be too\r\nexpensive for prometheus. Instead, start with the plumbing and aggregate\r\nthe interesting per-shard metrics across a process (min of since, max of\r\nupper, sum of state size bytes). It's not ideal, but it's definitely\r\nsafe to ship.\r\n\r\nThe structure of the code makes it pretty trivial to do this swap\r\n(actually tracking them per-shard) later: replace the ComputedFooGauge\r\nin ShardsMetrics with a FooCounterVec and the AtomicFoo in ShardMetrics\r\nwith a FooCounter.\r\n\r\nWe hand out `Arc<ShardMetrics>` to read and write handles, but store it\r\nhere as `Weak`. This allows us to discover if it's no longer in use and\r\nso we can remove it from the map.\r\n\r\n<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\n### Motivation\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14005/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14005/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14004", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14004/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14004/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14004/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14004", "id": 1324799558, "node_id": "PR_kwDOCkIcu848c2Ez", "number": 14004, "title": "persist: set consensus table gc ttl for CRDB", "user": {"login": "pH14", "id": 785446, "node_id": "MDQ6VXNlcjc4NTQ0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/785446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pH14", "html_url": "https://github.com/pH14", "followers_url": "https://api.github.com/users/pH14/followers", "following_url": "https://api.github.com/users/pH14/following{/other_user}", "gists_url": "https://api.github.com/users/pH14/gists{/gist_id}", "starred_url": "https://api.github.com/users/pH14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pH14/subscriptions", "organizations_url": "https://api.github.com/users/pH14/orgs", "repos_url": "https://api.github.com/users/pH14/repos", "events_url": "https://api.github.com/users/pH14/events{/privacy}", "received_events_url": "https://api.github.com/users/pH14/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-01T18:21:21Z", "updated_at": "2022-08-02T20:09:40Z", "closed_at": "2022-08-02T20:09:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14004", "html_url": "https://github.com/MaterializeInc/materialize/pull/14004", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14004.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14004.patch", "merged_at": "2022-08-02T20:09:37Z"}, "body": "<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\nEnsures CRDB runs the `consensus` table with a low gc interval, so scans aren't stuck trawling through gigs of tombstoned rows. On Nikhil's environment, we went from >4GB of cruft to <100MB with this enabled.\r\n\r\nBefore merging, we'll want to sync with the cloud team about how this affects our backup strategy with CRDB, as it will break incremental backups which run every hour. We additionally may want to lower the GC interval even further, as there should be no long-running queries involving this table.\r\n\r\n---\r\n\r\nI tried enabling this on two environments in prod, and in both cases saw massive drop offs in time spent in gc / consensus::scan / consensus::truncate\r\n\r\n<img width=\"1596\" alt=\"Screen Shot 2022-08-01 at 4 51 57 PM\" src=\"https://user-images.githubusercontent.com/785446/182247267-13f247a4-dfe3-47c7-9df7-726af2fe65b1.png\">\r\n\r\n### Motivation\r\n\r\nHopefully fixes https://github.com/MaterializeInc/database-issues/issues/4001\r\n\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14004/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14003", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14003/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14003/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14003/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14003", "id": 1324697204, "node_id": "PR_kwDOCkIcu848cgf6", "number": 14003, "title": "storage: Retry indeterminate table writes", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-01T16:46:46Z", "updated_at": "2022-08-02T07:41:51Z", "closed_at": "2022-08-01T17:23:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14003", "html_url": "https://github.com/MaterializeInc/materialize/pull/14003", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14003.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14003.patch", "merged_at": "2022-08-01T17:23:04Z"}, "body": "Table writes through `persist`'s `compare_and_append` may error as `Indeterminate` when something funny has happened under the hood and it is not clear whether the transaction succeeded or failed. More information here: https://github.com/MaterializeInc/database-issues/issues/3680\r\n\r\nIn the case of table writes in the controller, we can rely on the mutual exclusion of written timestamps to \"know\" that there should only be a few valid states for `write.upper` after a transaction:\r\n1. The `old_upper` from which we hoped to append,\r\n2. The `new_upper` to which we hoped to append,\r\n3. Something greater or equal to the timestamp allocation our `environmentd` has been given.\r\n\r\nAlthough there is some ambiguity between (2.) and (3.) (@jkosh44: to discuss!) we can treat (1.) as \"failed to commit; retry\", (2.) as \"commit succeeded; hooray\" and (3.) as \"you are no longer leader; please crash\".\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\nIndeterminate errors in shutdown have been somewhat annoying for CI, but we also believe they may occur more generally as connections flake. They are not reason to crash `environmentd`, though, at least if the reasoning above is correct.\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14003/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14003/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14002", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14002/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14002/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14002/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14002", "id": 1324511661, "node_id": "PR_kwDOCkIcu848b54N", "number": 14002, "title": "doc: Add Redpanda Cloud guide", "user": {"login": "bobbyiliev", "id": 21223421, "node_id": "MDQ6VXNlcjIxMjIzNDIx", "avatar_url": "https://avatars.githubusercontent.com/u/21223421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobbyiliev", "html_url": "https://github.com/bobbyiliev", "followers_url": "https://api.github.com/users/bobbyiliev/followers", "following_url": "https://api.github.com/users/bobbyiliev/following{/other_user}", "gists_url": "https://api.github.com/users/bobbyiliev/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobbyiliev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobbyiliev/subscriptions", "organizations_url": "https://api.github.com/users/bobbyiliev/orgs", "repos_url": "https://api.github.com/users/bobbyiliev/repos", "events_url": "https://api.github.com/users/bobbyiliev/events{/privacy}", "received_events_url": "https://api.github.com/users/bobbyiliev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-01T14:23:05Z", "updated_at": "2022-08-03T10:45:56Z", "closed_at": "2022-08-03T10:45:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14002", "html_url": "https://github.com/MaterializeInc/materialize/pull/14002", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14002.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14002.patch", "merged_at": "2022-08-03T10:45:56Z"}, "body": "<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\nThis PR adds a guide that goes through the required steps of adding a Redpanda Cloud connection and source. \r\n\r\n### Motivation\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14002/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14000", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14000/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14000/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14000/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/14000", "id": 1324490069, "node_id": "PR_kwDOCkIcu848b1UR", "number": 14000, "title": "storage: don't drop append futures when there's an error", "user": {"login": "andrioni", "id": 159177, "node_id": "MDQ6VXNlcjE1OTE3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/159177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrioni", "html_url": "https://github.com/andrioni", "followers_url": "https://api.github.com/users/andrioni/followers", "following_url": "https://api.github.com/users/andrioni/following{/other_user}", "gists_url": "https://api.github.com/users/andrioni/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrioni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrioni/subscriptions", "organizations_url": "https://api.github.com/users/andrioni/orgs", "repos_url": "https://api.github.com/users/andrioni/repos", "events_url": "https://api.github.com/users/andrioni/events{/privacy}", "received_events_url": "https://api.github.com/users/andrioni/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-01T14:09:00Z", "updated_at": "2022-08-01T16:05:31Z", "closed_at": "2022-08-01T16:00:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/14000", "html_url": "https://github.com/MaterializeInc/materialize/pull/14000", "diff_url": "https://github.com/MaterializeInc/materialize/pull/14000.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/14000.patch", "merged_at": "2022-08-01T16:00:18Z"}, "body": "Change how errors are handled while appending multiple updates at once: instead of eagerly failing and cancelling all pending futures in case one fails, wait until all of them are finished, handle successes and then failures separately.\r\n\r\nAlso return the IDs of all failed appends, instead of just selecting the first.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug: appends that failed would cause other appends to be cancelled, which in some corner cases could lead to panics due to uppers being in unexpected places.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/14000/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13999", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13999/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13999/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13999/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13999", "id": 1324126913, "node_id": "PR_kwDOCkIcu848amJ3", "number": 13999, "title": "ci: Add KinD, kubectl to the ci-builder image", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-01T09:38:21Z", "updated_at": "2022-08-10T09:03:14Z", "closed_at": "2022-08-10T09:03:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13999", "html_url": "https://github.com/MaterializeInc/materialize/pull/13999", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13999.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13999.patch", "merged_at": "2022-08-10T09:03:14Z"}, "body": "### Motivation\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\nRelates to MaterializeInc/database-issues#3932\r\n### Tips for reviewer\r\n\r\n@benesch it seems to me that apparently this needs to be merged first to \"main\" before I can use `kubectl` and `kind` in buildkite plugins (and maybe all the existing buildkite agents need to shut down?). If I just have the plugin and the Dockerfile changes sitting in a branch, the plugin reports that \"kubectl\" can not be found, which I assume is because an old ci-builder image is in effect.\r\n\r\nI am a bit unclear as to how this chicken-and-egg situation is handled by Buildkite -- how does Buildkite decide which ci-builder image to use before it knows the checksum of the thing that it will be building?", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13999/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13998", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13998/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13998/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13998/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13998", "id": 1324026429, "node_id": "PR_kwDOCkIcu848aQfI", "number": 13998, "title": "    cloudtest: Enable Buildkite integration", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-01T08:22:04Z", "updated_at": "2022-08-12T07:13:28Z", "closed_at": "2022-08-12T07:13:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13998", "html_url": "https://github.com/MaterializeInc/materialize/pull/13998", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13998.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13998.patch", "merged_at": "2022-08-12T07:13:28Z"}, "body": "    - create a dedicated Buildkite plugin that initializes a KinD cluster\r\n      and runs pytest\r\n    - make sure kubeconfig is shared between invocations of 'mzcompose run'\r\n      by placing it in the working directory rather than ~/.kube/\r\n    - add a Nightly CI job that runs the existing cloudtests\r\n\r\nFixes MaterializeInc/database-issues#3932\r\n\r\n### Motivation\r\n\r\n  * This PR adds a known-desirable feature.\r\n- MaterializeInc/database-issues#3932", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13998/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13997", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13997/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13997/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13997/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13997", "id": 1323904470, "node_id": "PR_kwDOCkIcu848Z2Zv", "number": 13997, "title": "limits test: fortify the Partitions scenario", "user": {"login": "philip-stoev", "id": 1279722, "node_id": "MDQ6VXNlcjEyNzk3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1279722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philip-stoev", "html_url": "https://github.com/philip-stoev", "followers_url": "https://api.github.com/users/philip-stoev/followers", "following_url": "https://api.github.com/users/philip-stoev/following{/other_user}", "gists_url": "https://api.github.com/users/philip-stoev/gists{/gist_id}", "starred_url": "https://api.github.com/users/philip-stoev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philip-stoev/subscriptions", "organizations_url": "https://api.github.com/users/philip-stoev/orgs", "repos_url": "https://api.github.com/users/philip-stoev/repos", "events_url": "https://api.github.com/users/philip-stoev/events{/privacy}", "received_events_url": "https://api.github.com/users/philip-stoev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-01T06:36:58Z", "updated_at": "2022-08-01T07:26:41Z", "closed_at": "2022-08-01T07:26:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13997", "html_url": "https://github.com/MaterializeInc/materialize/pull/13997", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13997.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13997.patch", "merged_at": "2022-08-01T07:26:36Z"}, "body": "Apparently 360 seconds are not enough for Mz to pick the\r\nextra partitions, so try with 600 seconds instead.\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\nNightly limits is failing.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13997/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13996", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13996/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13996/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13996/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13996", "id": 1323765205, "node_id": "PR_kwDOCkIcu848ZXxB", "number": 13996, "title": "adapter: don't optimize read transactions for single statements", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-08-01T03:43:53Z", "updated_at": "2024-09-23T21:08:29Z", "closed_at": "2022-08-03T21:13:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13996", "html_url": "https://github.com/MaterializeInc/materialize/pull/13996", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13996.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13996.patch", "merged_at": "2022-08-03T21:13:31Z"}, "body": "This fixes the csharp test flakes. See parse-started.pt for the full explanation.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [X] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - When `mz_logical_timestamp()` is called within a view, it will ALWAYS return the current timestamp of it's timedomain. The old behavior was to return `Timestamp::MAX` outside of a transaction if no other views depended on it.\r\n  - Queries in the `Serializable` isolation level outside of a transaction may not return the freshest possible data for the object being queried. Instead it will use a timestamp that is immediately query-able over all objects in the same time domain.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13996/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13977", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13977/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13977/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13977/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13977", "id": 1323568762, "node_id": "PR_kwDOCkIcu848Yt6n", "number": 13977, "title": "feat(mz) Improve regions in CLI", "user": {"login": "joacoc", "id": 11491779, "node_id": "MDQ6VXNlcjExNDkxNzc5", "avatar_url": "https://avatars.githubusercontent.com/u/11491779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joacoc", "html_url": "https://github.com/joacoc", "followers_url": "https://api.github.com/users/joacoc/followers", "following_url": "https://api.github.com/users/joacoc/following{/other_user}", "gists_url": "https://api.github.com/users/joacoc/gists{/gist_id}", "starred_url": "https://api.github.com/users/joacoc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joacoc/subscriptions", "organizations_url": "https://api.github.com/users/joacoc/orgs", "repos_url": "https://api.github.com/users/joacoc/repos", "events_url": "https://api.github.com/users/joacoc/events{/privacy}", "received_events_url": "https://api.github.com/users/joacoc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-31T20:32:09Z", "updated_at": "2022-08-10T20:44:09Z", "closed_at": "2022-08-10T20:44:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13977", "html_url": "https://github.com/MaterializeInc/materialize/pull/13977", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13977.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13977.patch", "merged_at": "2022-08-10T20:44:09Z"}, "body": "\r\n\r\n<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\n### Motivation\r\n\r\n- [x] Add `regions status` command\r\n- [x] Format `regions list` command\r\n- [x] Add loading to the `regions enable` command (Using `indicatif` crate)\r\n- [x] Disable `regions delete` command\r\n- [x] Refactor: `.clones` -> reference borrowing  \r\n- [x] Refactor: Panics -> error message + `process.exit()`\r\n- [x] Improved + commented code  \r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13977/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13973", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13973/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13973/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13973/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13973", "id": 1322909769, "node_id": "PR_kwDOCkIcu848WllE", "number": 13973, "title": "compute,storage: avoid lost wakeups when stepping timely", "user": {"login": "benesch", "id": 882976, "node_id": "MDQ6VXNlcjg4Mjk3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/882976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benesch", "html_url": "https://github.com/benesch", "followers_url": "https://api.github.com/users/benesch/followers", "following_url": "https://api.github.com/users/benesch/following{/other_user}", "gists_url": "https://api.github.com/users/benesch/gists{/gist_id}", "starred_url": "https://api.github.com/users/benesch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benesch/subscriptions", "organizations_url": "https://api.github.com/users/benesch/orgs", "repos_url": "https://api.github.com/users/benesch/repos", "events_url": "https://api.github.com/users/benesch/events{/privacy}", "received_events_url": "https://api.github.com/users/benesch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-07-30T05:53:31Z", "updated_at": "2022-07-31T00:03:10Z", "closed_at": "2022-07-31T00:03:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13973", "html_url": "https://github.com/MaterializeInc/materialize/pull/13973", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13973.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13973.patch", "merged_at": "2022-07-31T00:03:09Z"}, "body": "This is an alternative to https://github.com/MaterializeInc/materialize/pull/13972 that avoids hardcoding the 1s timeout.\r\nAs described there:\r\n\r\n> This addresses a race that appears in storaged where the LocalClient\r\n will wake worker threads that have inbound messages to read, but the\r\nwake-ups are (or appear to be) eaten by various non-Timely sleepy\r\nmoments in the code. If these wake-ups are quietly eaten, and then\r\nTimely is entered with a None timeout and nothing to do, it will\r\nsleep forever.\r\n\r\nWould close https://github.com/MaterializeInc/materialize/pull/13972 if merged.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13973/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13969", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13969/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13969/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13969/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13969", "id": 1322688208, "node_id": "PR_kwDOCkIcu848V2FP", "number": 13969, "title": "persist: storage client fn to get total usage in one go", "user": {"login": "pH14", "id": 785446, "node_id": "MDQ6VXNlcjc4NTQ0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/785446?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pH14", "html_url": "https://github.com/pH14", "followers_url": "https://api.github.com/users/pH14/followers", "following_url": "https://api.github.com/users/pH14/following{/other_user}", "gists_url": "https://api.github.com/users/pH14/gists{/gist_id}", "starred_url": "https://api.github.com/users/pH14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pH14/subscriptions", "organizations_url": "https://api.github.com/users/pH14/orgs", "repos_url": "https://api.github.com/users/pH14/repos", "events_url": "https://api.github.com/users/pH14/events{/privacy}", "received_events_url": "https://api.github.com/users/pH14/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-29T21:23:38Z", "updated_at": "2022-08-01T13:03:03Z", "closed_at": "2022-07-31T01:27:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13969", "html_url": "https://github.com/MaterializeInc/materialize/pull/13969", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13969.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13969.patch", "merged_at": "2022-07-31T01:27:17Z"}, "body": "<!--\r\nDescribe the contents of the PR briefly but completely.\r\n\r\nIf you write detailed commit messages, it is acceptable to copy/paste them\r\nhere, or write \"see commit messages for details.\" If there is only one commit\r\nin the PR, GitHub will have already added its commit message above.\r\n-->\r\n\r\nI think this should make @jpepin's PR easier -- we can total size for all blobs by shard id in one go (and unattributable storage usage, if any, hopefully not), and then the caller can correlate those shard ids to their sources/tables afterwards.\r\n\r\n### Motivation\r\n\r\n * This PR refactors existing code.\r\n\r\nhttps://materializeinc.slack.com/archives/C03NYM894GP/p1659042453673699\r\n\r\n<!--\r\nWhich of the following best describes the motivation behind this PR?\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR adds a known-desirable feature.\r\n\r\n    [Ensure issue is linked somewhere.]\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n    [Describe the bug in detail, as if you were filing a bug report.]\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n    [Write a brief specification for the feature, including justification\r\n     for its inclusion in Materialize, as if you were writing the original\r\n     feature specification.]\r\n\r\n   * This PR refactors existing code.\r\n\r\n    [Describe what was wrong with the existing code, if it is not obvious.]\r\n-->\r\n\r\n### Tips for reviewer\r\n\r\n<!--\r\nLeave some tips for your reviewer, like:\r\n\r\n    * The diff is much smaller if viewed with whitespace hidden.\r\n    * [Some function/module/file] deserves extra attention.\r\n    * [Some function/module/file] is pure code movement and only needs a skim.\r\n\r\nDelete this section if no tips.\r\n-->\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [x] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [x] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13969/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13968", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13968/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13968/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13968/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13968", "id": 1322653947, "node_id": "PR_kwDOCkIcu848VuuM", "number": 13968, "title": "coord: optimize drop_temp_items", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-29T20:31:54Z", "updated_at": "2022-08-01T18:39:32Z", "closed_at": "2022-08-01T18:39:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13968", "html_url": "https://github.com/MaterializeInc/materialize/pull/13968", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13968.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13968.patch", "merged_at": "2022-08-01T18:39:31Z"}, "body": "Don't execute catalog_transact with an empty ops. Putting this check\r\nright in catalog_transact is a bit questionable because it has other\r\nguarantees. Drop temp items is run on each session termination, so it\r\nmakes sense to optimize specifically that code path instead of changing\r\nthe semantics of catalog_transact.\r\n\r\n### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13968/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13967", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13967/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13967/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13967/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13967", "id": 1322629870, "node_id": "PR_kwDOCkIcu848Vpg1", "number": 13967, "title": "coord: Prioritize read latency over write latency", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-29T20:00:45Z", "updated_at": "2022-08-11T12:33:20Z", "closed_at": "2022-08-11T12:33:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13967", "html_url": "https://github.com/MaterializeInc/materialize/pull/13967", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13967.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13967.patch", "merged_at": "2022-08-11T12:33:17Z"}, "body": "The goal of this commit is to make sure that the global timestamp never\r\nadvances past the upper of any table. Doing this will make sure that a\r\ntable read will never have to block and wait for an upper to advance,\r\nwhich should improve the performance of many table reads. This\r\nperformance improvement comes at the cost of performance for table\r\nwrites and DDL.\r\n\r\nThis is accomplished by combining table advancements into group commit.\r\nAll writes will advance every other table to the same timestamp of the\r\nwrite. Periodically empty group commits are triggered which include no\r\nwrites, but advances every table. The global timestamp is only advanced\r\nafter these table advancements to the timestamp of the advancement.\r\n\r\n\r\n### Motivation\r\nThis PR improves read performance.\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13967/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13967/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13966", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13966/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13966/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13966/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13966", "id": 1322616587, "node_id": "PR_kwDOCkIcu848Vmt2", "number": 13966, "title": "persist: be more lenient about sinces when applying compaction results", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-29T19:42:20Z", "updated_at": "2022-07-29T20:28:27Z", "closed_at": "2022-07-29T20:28:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13966", "html_url": "https://github.com/MaterializeInc/materialize/pull/13966", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13966.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13966.patch", "merged_at": "2022-07-29T20:28:26Z"}, "body": "It is perfectly safe, if the sinces don't match, as long as Spine\r\nmetadata's since is in advance of the one in the compaction result. This\r\nmismatch can happen when the Spine has to be reloaded from state\r\n(because of a compare_and_set mismatch).\r\n\r\nThis might also help an issue we're seeing in prod where compaction is\r\ntaking far longer than my mental model says it should.\r\n\r\nTouches MaterializeInc/database-issues#3966\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a recognized bug.\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [N/A] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [N/A] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13966/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13964", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13964/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13964/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13964/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13964", "id": 1322561726, "node_id": "PR_kwDOCkIcu848VbMz", "number": 13964, "title": "persist: track how many blob deletes are no-ops", "user": {"login": "danhhz", "id": 52528, "node_id": "MDQ6VXNlcjUyNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/52528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danhhz", "html_url": "https://github.com/danhhz", "followers_url": "https://api.github.com/users/danhhz/followers", "following_url": "https://api.github.com/users/danhhz/following{/other_user}", "gists_url": "https://api.github.com/users/danhhz/gists{/gist_id}", "starred_url": "https://api.github.com/users/danhhz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danhhz/subscriptions", "organizations_url": "https://api.github.com/users/danhhz/orgs", "repos_url": "https://api.github.com/users/danhhz/repos", "events_url": "https://api.github.com/users/danhhz/events{/privacy}", "received_events_url": "https://api.github.com/users/danhhz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-29T18:29:33Z", "updated_at": "2022-08-01T15:44:32Z", "closed_at": "2022-08-01T15:44:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13964", "html_url": "https://github.com/MaterializeInc/materialize/pull/13964", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13964.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13964.patch", "merged_at": "2022-08-01T15:44:31Z"}, "body": "Manually verified that this makes the bug fixed in #13953 immediately\r\nobvious.\r\n\r\n    # HELP mz_persist_external_blob_delete_noop_count count of blob delete calls that deleted a non-existent key\r\n    # TYPE mz_persist_external_blob_delete_noop_count counter\r\n    mz_persist_external_blob_delete_noop_count 53\r\n    # HELP mz_persist_external_started_count count of external service calls started\r\n    # TYPE mz_persist_external_started_count counter\r\n    mz_persist_external_started_count{op=\"blob_delete\"} 53\r\n\r\n### Motivation\r\n\r\n  * This PR adds a feature that has not yet been specified.\r\n\r\n### Tips for reviewer\r\n\r\nAs promised in #13953\r\n\r\n### Checklist\r\n\r\n- [x] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [N/A] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [N/A] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - <!-- Add release notes here or explicitly state that there are no user-facing behavior changes. -->\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13964/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13964/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13963", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13963/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13963/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13963/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13963", "id": 1322501902, "node_id": "PR_kwDOCkIcu848VOud", "number": 13963, "title": "Revert \"storage: factor out initialization of storage hosts (#13924)\"", "user": {"login": "madelynnblue", "id": 41181, "node_id": "MDQ6VXNlcjQxMTgx", "avatar_url": "https://avatars.githubusercontent.com/u/41181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madelynnblue", "html_url": "https://github.com/madelynnblue", "followers_url": "https://api.github.com/users/madelynnblue/followers", "following_url": "https://api.github.com/users/madelynnblue/following{/other_user}", "gists_url": "https://api.github.com/users/madelynnblue/gists{/gist_id}", "starred_url": "https://api.github.com/users/madelynnblue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madelynnblue/subscriptions", "organizations_url": "https://api.github.com/users/madelynnblue/orgs", "repos_url": "https://api.github.com/users/madelynnblue/repos", "events_url": "https://api.github.com/users/madelynnblue/events{/privacy}", "received_events_url": "https://api.github.com/users/madelynnblue/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-29T17:18:35Z", "updated_at": "2022-07-29T18:13:42Z", "closed_at": "2022-07-29T18:13:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13963", "html_url": "https://github.com/MaterializeInc/materialize/pull/13963", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13963.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13963.patch", "merged_at": "2022-07-29T18:13:41Z"}, "body": "This reverts commit 9b2eb6d70df8924df3b590727c6726ccfdb0a20e.\r\n\r\nThis commit is the first reported to have had the `deadline elapsed` errors we've been seeing frequently. Try reverting to see if it fixes those.\r\n\r\n### Motivation\r\n\r\n  * This PR fixes a previously unreported bug.\r\n\r\n### Checklist\r\n\r\n- [ ] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [ ] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - n/a", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13963/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13962", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13962/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13962/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13962/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13962", "id": 1322417278, "node_id": "PR_kwDOCkIcu848U9DN", "number": 13962, "title": "doc/user: document secrets", "user": {"login": "morsapaes", "id": 23521087, "node_id": "MDQ6VXNlcjIzNTIxMDg3", "avatar_url": "https://avatars.githubusercontent.com/u/23521087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morsapaes", "html_url": "https://github.com/morsapaes", "followers_url": "https://api.github.com/users/morsapaes/followers", "following_url": "https://api.github.com/users/morsapaes/following{/other_user}", "gists_url": "https://api.github.com/users/morsapaes/gists{/gist_id}", "starred_url": "https://api.github.com/users/morsapaes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morsapaes/subscriptions", "organizations_url": "https://api.github.com/users/morsapaes/orgs", "repos_url": "https://api.github.com/users/morsapaes/repos", "events_url": "https://api.github.com/users/morsapaes/events{/privacy}", "received_events_url": "https://api.github.com/users/morsapaes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1467624450, "node_id": "MDU6TGFiZWwxNDY3NjI0NDUw", "url": "https://api.github.com/repos/MaterializeInc/materialize/labels/A-docs", "name": "A-docs", "color": "5fefa7", "default": false, "description": "Area: documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-29T15:44:09Z", "updated_at": "2023-02-24T04:20:18Z", "closed_at": "2022-08-03T05:52:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13962", "html_url": "https://github.com/MaterializeInc/materialize/pull/13962", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13962.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13962.patch", "merged_at": "2022-08-03T05:52:04Z"}, "body": "Fixes MaterializeInc/database-issues#3904.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13962/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13962/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13960", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13960/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13960/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13960/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13960", "id": 1322364178, "node_id": "PR_kwDOCkIcu848Uxg5", "number": 13960, "title": "coord: Add system table writes to group commit", "user": {"login": "jkosh44", "id": 10800303, "node_id": "MDQ6VXNlcjEwODAwMzAz", "avatar_url": "https://avatars.githubusercontent.com/u/10800303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkosh44", "html_url": "https://github.com/jkosh44", "followers_url": "https://api.github.com/users/jkosh44/followers", "following_url": "https://api.github.com/users/jkosh44/following{/other_user}", "gists_url": "https://api.github.com/users/jkosh44/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkosh44/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkosh44/subscriptions", "organizations_url": "https://api.github.com/users/jkosh44/orgs", "repos_url": "https://api.github.com/users/jkosh44/repos", "events_url": "https://api.github.com/users/jkosh44/events{/privacy}", "received_events_url": "https://api.github.com/users/jkosh44/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-07-29T15:05:15Z", "updated_at": "2022-08-01T18:41:09Z", "closed_at": "2022-08-01T18:38:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13960", "html_url": "https://github.com/MaterializeInc/materialize/pull/13960", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13960.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13960.patch", "merged_at": "2022-08-01T18:38:46Z"}, "body": "This commit updates system table writes so that they automatically\r\ntrigger a group commit and the system table writes are included in the\r\ngroup commit. This simplifies the Coordinator slightly because all\r\nnon-empty writes are now processed in group commit, instead of two\r\nseparate places. Additionally, it allows any pending writes to user\r\ntables to piggyback off of a write to a system table and be include\r\nin a single timestamp and append call.\r\n\r\n### Motivation\r\nThis PR refactors existing code.\r\n\r\n### Checklist\r\n\r\n- [X] This PR has adequate test coverage / QA involvement has been duly considered.\r\n- [ ] This PR evolves [an existing `$T \u21d4 Proto$T` mapping](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/command-and-response-binary-encoding.md) (possibly in a backwards-incompatible way) and therefore is tagged with a `T-protobuf` label.\r\n- [X] This PR includes the following [user-facing behavior changes](https://github.com/MaterializeInc/materialize/blob/main/doc/developer/guide-changes.md#what-changes-require-a-release-note):\r\n\r\n  - N/A\r\n", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13960/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13957", "repository_url": "https://api.github.com/repos/MaterializeInc/materialize", "labels_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13957/labels{/name}", "comments_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13957/comments", "events_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13957/events", "html_url": "https://github.com/MaterializeInc/materialize/pull/13957", "id": 1322231436, "node_id": "PR_kwDOCkIcu848UVv5", "number": 13957, "title": "Update internal docs around Postgres and Kafka", "user": {"login": "ggevay", "id": 11377925, "node_id": "MDQ6VXNlcjExMzc3OTI1", "avatar_url": "https://avatars.githubusercontent.com/u/11377925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ggevay", "html_url": "https://github.com/ggevay", "followers_url": "https://api.github.com/users/ggevay/followers", "following_url": "https://api.github.com/users/ggevay/following{/other_user}", "gists_url": "https://api.github.com/users/ggevay/gists{/gist_id}", "starred_url": "https://api.github.com/users/ggevay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ggevay/subscriptions", "organizations_url": "https://api.github.com/users/ggevay/orgs", "repos_url": "https://api.github.com/users/ggevay/repos", "events_url": "https://api.github.com/users/ggevay/events{/privacy}", "received_events_url": "https://api.github.com/users/ggevay/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-29T13:07:10Z", "updated_at": "2022-07-29T13:50:36Z", "closed_at": "2022-07-29T13:50:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/MaterializeInc/materialize/pulls/13957", "html_url": "https://github.com/MaterializeInc/materialize/pull/13957", "diff_url": "https://github.com/MaterializeInc/materialize/pull/13957.diff", "patch_url": "https://github.com/MaterializeInc/materialize/pull/13957.patch", "merged_at": "2022-07-29T13:50:36Z"}, "body": "Add my experiences with setting up Postgres and Kafka on Arch Linux.\r\n\r\n@wangandi: This fixes the WAL issue when running `bin/cargo-test`.", "reactions": {"url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/MaterializeInc/materialize/issues/13957/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]