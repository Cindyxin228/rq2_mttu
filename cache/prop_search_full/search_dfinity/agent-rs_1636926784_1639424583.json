[{"url": "https://api.github.com/repos/dfinity/agent-rs/issues/289", "repository_url": "https://api.github.com/repos/dfinity/agent-rs", "labels_url": "https://api.github.com/repos/dfinity/agent-rs/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/dfinity/agent-rs/issues/289/comments", "events_url": "https://api.github.com/repos/dfinity/agent-rs/issues/289/events", "html_url": "https://github.com/dfinity/agent-rs/pull/289", "id": 1077317774, "node_id": "PR_kwDOEM-hd84vs-Mx", "number": 289, "title": "chore: release rust agent 0.10.1", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-10T23:47:54Z", "updated_at": "2021-12-13T18:37:31Z", "closed_at": "2021-12-13T18:37:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/dfinity/agent-rs/pulls/289", "html_url": "https://github.com/dfinity/agent-rs/pull/289", "diff_url": "https://github.com/dfinity/agent-rs/pull/289.diff", "patch_url": "https://github.com/dfinity/agent-rs/pull/289.patch", "merged_at": "2021-12-13T18:37:30Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dfinity/agent-rs/issues/289/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/288", "repository_url": "https://api.github.com/repos/dfinity/agent-rs", "labels_url": "https://api.github.com/repos/dfinity/agent-rs/issues/288/labels{/name}", "comments_url": "https://api.github.com/repos/dfinity/agent-rs/issues/288/comments", "events_url": "https://api.github.com/repos/dfinity/agent-rs/issues/288/events", "html_url": "https://github.com/dfinity/agent-rs/pull/288", "id": 1076179965, "node_id": "PR_kwDOEM-hd84vpTI7", "number": 288, "title": "fix: retry failures when uploading assets", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-09T23:29:29Z", "updated_at": "2021-12-10T20:59:00Z", "closed_at": "2021-12-10T20:58:59Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/dfinity/agent-rs/pulls/288", "html_url": "https://github.com/dfinity/agent-rs/pull/288", "diff_url": "https://github.com/dfinity/agent-rs/pull/288.diff", "patch_url": "https://github.com/dfinity/agent-rs/pull/288.patch", "merged_at": "2021-12-10T20:58:59Z"}, "body": "There are a few things going on here.\r\n\r\nThe main fix here is in `create_chunk`: using a `count_timeout` rather than a `timeout`.  This is because a semaphore is acquired after starting the waiter but before each attempt to send the update request.  The result was that all retries would fail after the first 30 seconds, because the timeout for every chunk was started at the same time.\r\n\r\nOther changes:\r\n- Use exponential backoff for the retry delay.\r\n- Call Waiter.async_wait rather than Waiter.wait, since we are in an async fn, in order to not prevent the runtime from swapping the current task.\r\n- Check for failure due to being out of cycles, or 403/unauthorized in general, and don't retry.\r\n- Added a new `create_chunk` semaphore, which limits how many chunks can be in the process of being uploaded/retried.  This is because otherwise, every chunk will get its first attempt before any chunk gets its second.  This limit focuses retries on a smaller number of chunks, and gives their exponential-backoff a chance to work.\r\n- Increased the allowed concurrency for chunk uploads.  When we were proxying these requests through the actix http server in dfx, the http client would sometimes get irrecoverably stuck.  This does not appear to be happening now that we are using icx-proxy.\r\n- Retry failures in `create_batch` and `commit_batch`.\r\n- Refactored the semaphores into a struct, since there are now 4 of them.\r\n- icx-asset now accepts secp256k1 pem files.\r\n\r\nThis fixes https://dfinity.atlassian.net/browse/SDK-84\r\n", "reactions": {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dfinity/agent-rs/issues/288/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/287", "repository_url": "https://api.github.com/repos/dfinity/agent-rs", "labels_url": "https://api.github.com/repos/dfinity/agent-rs/issues/287/labels{/name}", "comments_url": "https://api.github.com/repos/dfinity/agent-rs/issues/287/comments", "events_url": "https://api.github.com/repos/dfinity/agent-rs/issues/287/events", "html_url": "https://github.com/dfinity/agent-rs/pull/287", "id": 1073648637, "node_id": "PR_kwDOEM-hd84vhAFy", "number": 287, "title": "chore: fix darwin provisioning due to macos-latest upgrade", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-07T18:35:25Z", "updated_at": "2021-12-07T19:15:06Z", "closed_at": "2021-12-07T19:15:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/dfinity/agent-rs/pulls/287", "html_url": "https://github.com/dfinity/agent-rs/pull/287", "diff_url": "https://github.com/dfinity/agent-rs/pull/287.diff", "patch_url": "https://github.com/dfinity/agent-rs/pull/287.patch", "merged_at": "2021-12-07T19:15:05Z"}, "body": "macos-latest is being rolled out, scheduled to be completed Dec 13.  https://github.com/actions/virtual-environments/issues/4060\r\n\r\nThis change will handle macos-latest being either macos-10.15 or macos-11.", "reactions": {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/287/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dfinity/agent-rs/issues/287/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/286", "repository_url": "https://api.github.com/repos/dfinity/agent-rs", "labels_url": "https://api.github.com/repos/dfinity/agent-rs/issues/286/labels{/name}", "comments_url": "https://api.github.com/repos/dfinity/agent-rs/issues/286/comments", "events_url": "https://api.github.com/repos/dfinity/agent-rs/issues/286/events", "html_url": "https://github.com/dfinity/agent-rs/pull/286", "id": 1073618056, "node_id": "PR_kwDOEM-hd84vg5vp", "number": 286, "title": "feat: expose certificate verification", "user": {"login": "Daniel-Bloom-dfinity", "id": 82895745, "node_id": "MDQ6VXNlcjgyODk1NzQ1", "avatar_url": "https://avatars.githubusercontent.com/u/82895745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Daniel-Bloom-dfinity", "html_url": "https://github.com/Daniel-Bloom-dfinity", "followers_url": "https://api.github.com/users/Daniel-Bloom-dfinity/followers", "following_url": "https://api.github.com/users/Daniel-Bloom-dfinity/following{/other_user}", "gists_url": "https://api.github.com/users/Daniel-Bloom-dfinity/gists{/gist_id}", "starred_url": "https://api.github.com/users/Daniel-Bloom-dfinity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Daniel-Bloom-dfinity/subscriptions", "organizations_url": "https://api.github.com/users/Daniel-Bloom-dfinity/orgs", "repos_url": "https://api.github.com/users/Daniel-Bloom-dfinity/repos", "events_url": "https://api.github.com/users/Daniel-Bloom-dfinity/events{/privacy}", "received_events_url": "https://api.github.com/users/Daniel-Bloom-dfinity/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-07T17:52:31Z", "updated_at": "2021-12-31T20:13:45Z", "closed_at": "2021-12-10T23:40:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/dfinity/agent-rs/pulls/286", "html_url": "https://github.com/dfinity/agent-rs/pull/286", "diff_url": "https://github.com/dfinity/agent-rs/pull/286.diff", "patch_url": "https://github.com/dfinity/agent-rs/pull/286.patch", "merged_at": "2021-12-10T23:40:33Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/286/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dfinity/agent-rs/issues/286/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/285", "repository_url": "https://api.github.com/repos/dfinity/agent-rs", "labels_url": "https://api.github.com/repos/dfinity/agent-rs/issues/285/labels{/name}", "comments_url": "https://api.github.com/repos/dfinity/agent-rs/issues/285/comments", "events_url": "https://api.github.com/repos/dfinity/agent-rs/issues/285/events", "html_url": "https://github.com/dfinity/agent-rs/pull/285", "id": 1070065706, "node_id": "PR_kwDOEM-hd84vVa1u", "number": 285, "title": "chore: update cargo dependencies", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-02T23:17:15Z", "updated_at": "2021-12-03T19:40:40Z", "closed_at": "2021-12-03T19:40:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/dfinity/agent-rs/pulls/285", "html_url": "https://github.com/dfinity/agent-rs/pull/285", "diff_url": "https://github.com/dfinity/agent-rs/pull/285.diff", "patch_url": "https://github.com/dfinity/agent-rs/pull/285.patch", "merged_at": "2021-12-03T19:40:39Z"}, "body": "Update crate dependencies reported by `cargo outdated -R`, with the exception of clap, which remains pinned at **3.0.0-beta.2**\r\n\r\nThis fixes an issue seen by users of the crate that updated to reqwest 0.11.7, where connections would fail with the following error:\r\n```\r\nCould not create HTTP client.: reqwest::Error { kind: Builder, source: \"Unknown TLS backend passed to `use_preconfigured_tls`\" }\r\n```\r\n\r\nThis also fixes https://dfinity.atlassian.net/browse/SDK-115 by removing the direct dependency on webpki-roots altogether.\r\n", "reactions": {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dfinity/agent-rs/issues/285/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/283", "repository_url": "https://api.github.com/repos/dfinity/agent-rs", "labels_url": "https://api.github.com/repos/dfinity/agent-rs/issues/283/labels{/name}", "comments_url": "https://api.github.com/repos/dfinity/agent-rs/issues/283/comments", "events_url": "https://api.github.com/repos/dfinity/agent-rs/issues/283/events", "html_url": "https://github.com/dfinity/agent-rs/pull/283", "id": 1055715398, "node_id": "PR_kwDOEM-hd84uofvk", "number": 283, "title": "feat: fetch canister metadata from state tree", "user": {"login": "chenyan-dfinity", "id": 48968912, "node_id": "MDQ6VXNlcjQ4OTY4OTEy", "avatar_url": "https://avatars.githubusercontent.com/u/48968912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenyan-dfinity", "html_url": "https://github.com/chenyan-dfinity", "followers_url": "https://api.github.com/users/chenyan-dfinity/followers", "following_url": "https://api.github.com/users/chenyan-dfinity/following{/other_user}", "gists_url": "https://api.github.com/users/chenyan-dfinity/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenyan-dfinity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenyan-dfinity/subscriptions", "organizations_url": "https://api.github.com/users/chenyan-dfinity/orgs", "repos_url": "https://api.github.com/users/chenyan-dfinity/repos", "events_url": "https://api.github.com/users/chenyan-dfinity/events{/privacy}", "received_events_url": "https://api.github.com/users/chenyan-dfinity/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-17T05:16:14Z", "updated_at": "2021-12-03T19:03:45Z", "closed_at": "2021-12-03T19:03:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/dfinity/agent-rs/pulls/283", "html_url": "https://github.com/dfinity/agent-rs/pull/283", "diff_url": "https://github.com/dfinity/agent-rs/pull/283.diff", "patch_url": "https://github.com/dfinity/agent-rs/pull/283.patch", "merged_at": "2021-12-03T19:03:44Z"}, "body": "Implements https://github.com/dfinity-lab/ic-ref/pull/371.\r\n\r\nTested in https://github.com/dfinity/sdk/pull/1926 with `ic-ref` from the latest master.", "reactions": {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dfinity/agent-rs/issues/283/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/282", "repository_url": "https://api.github.com/repos/dfinity/agent-rs", "labels_url": "https://api.github.com/repos/dfinity/agent-rs/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/dfinity/agent-rs/issues/282/comments", "events_url": "https://api.github.com/repos/dfinity/agent-rs/issues/282/events", "html_url": "https://github.com/dfinity/agent-rs/pull/282", "id": 1054030069, "node_id": "PR_kwDOEM-hd84ujR-C", "number": 282, "title": "chore: release 0.10.0", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-15T19:36:23Z", "updated_at": "2021-11-15T23:29:20Z", "closed_at": "2021-11-15T23:29:19Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/dfinity/agent-rs/pulls/282", "html_url": "https://github.com/dfinity/agent-rs/pull/282", "diff_url": "https://github.com/dfinity/agent-rs/pull/282.diff", "patch_url": "https://github.com/dfinity/agent-rs/pull/282.patch", "merged_at": "2021-11-15T23:29:19Z"}, "body": "This release unifies all of the version numbers to 0.10.0.  This is the same procedure that we use for the js agent, and had been working well there.\r\n\r\nAlso removed the zzz-release tool.  It's an interesting and worthwhile tool, but not at all specific to the rust agent.\r\n\r\nMoved the CHANGELOG.md from the ic-agent directory to the root, where we can track changes to all of the components.", "reactions": {"url": "https://api.github.com/repos/dfinity/agent-rs/issues/282/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/dfinity/agent-rs/issues/282/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]