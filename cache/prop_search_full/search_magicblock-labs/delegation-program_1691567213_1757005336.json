[{"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/84", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/84/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/84/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/84/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/84", "id": 3384404188, "node_id": "PR_kwDOLs5B3c6m5Mqq", "number": 84, "title": "release: 1.1.0", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-09-04T16:01:08Z", "updated_at": "2025-09-04T16:14:45Z", "closed_at": "2025-09-04T16:08:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/84", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/84", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/84.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/84.patch", "merged_at": "2025-09-04T16:08:47Z"}, "body": "## Release: 1.1.0\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/84/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/84/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/83", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/83/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/83/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/83", "id": 3384304978, "node_id": "PR_kwDOLs5B3c6m42-Z", "number": 83, "title": "feat: set default identity on delegation", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-09-04T15:37:34Z", "updated_at": "2025-09-04T15:58:39Z", "closed_at": "2025-09-04T15:58:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/83", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/83", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/83.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/83.patch", "merged_at": "2025-09-04T15:58:36Z"}, "body": "## [Description](feat: set default identity on delegation)\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nUpdated On: 2025-09-04 15:42:38 UTC\n\nThis PR introduces a default validator identity mechanism for the delegation system. The change adds a new constant `DEFAULT_VALIDATOR_IDENTITY` in `src/consts.rs` that specifies a hardcoded validator pubkey (`MAS1Dt9qreoRMQ14YQuhg8UTZMMzDdKhmkZMECCzk57`) to serve as a fallback when no validator is explicitly provided during delegation operations.\n\nThe implementation modifies the delegation processor in `src/processor/delegate.rs` to use this default validator identity via `args.validator.unwrap_or(DEFAULT_VALIDATOR_IDENTITY)` instead of potentially allowing undefined behavior when `args.validator` is None. This ensures every delegation record has a valid authority field, which is essential for the delegation system's operation.\n\nThe change integrates well with the existing codebase architecture by following the established pattern of defining program constants in `consts.rs` alongside other important values like `RENT_FEES_PERCENTAGE` and `PROTOCOL_FEES_PERCENTAGE`. The use of the `pubkey!` macro creates a compile-time constant from the base58-encoded address, maintaining type safety and efficiency consistent with Solana program development best practices.\n\n## Confidence score: 4/5\n\n- This PR is safe to merge with low risk as it provides a sensible fallback mechanism\n- Score reflects simple, well-structured changes that follow established patterns in the codebase\n- Pay close attention to verifying the hardcoded validator pubkey is intentional and correct\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/83/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/83/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/78", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/78/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/78/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/78", "id": 3049250929, "node_id": "PR_kwDOLs5B3c6Vctwn", "number": 78, "title": "Simplify escrow undelegation fix", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-05-08T14:52:14Z", "updated_at": "2025-05-12T11:43:13Z", "closed_at": "2025-05-12T11:43:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/78", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/78", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/78.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/78.patch", "merged_at": "2025-05-12T11:43:10Z"}, "body": "## Description\r\n\r\nSimplify the undelegation fix by:\r\n\r\n- Removing the discriminator (since anyways we cannot set it when the account is undelegated, i.e. owned by the system program)\r\n- Setting data to 0, this avoids the custom callback within the delegation program\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR simplifies the undelegation process in the delegation program by removing discriminator-based account validation and switching to a zero-data approach when accounts are owned by the system program.\n\n- Removed `external_undelegate.rs` and `ephemeral_balance.rs` files, eliminating custom undelegation callback logic\n- Removed `EphemeralBalance = 104` discriminator from `AccountDiscriminator` enum and its associated handling\n- Modified `delegate_ephemeral_balance.rs` to no longer initialize account data after program ownership assignment\n- Updated tests in `test_top_up.rs` to verify correct account ownership transitions and balance transfers\n- Changed PDA data size from 8 bytes to 0 bytes in `top_up_ephemeral_balance.rs` for simpler account management\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/78/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/78/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/77", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/77/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/77/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/77", "id": 3048432200, "node_id": "PR_kwDOLs5B3c6VZ6IK", "number": 77, "title": "Fix/ephemeral balance undelegation 2.0", "user": {"login": "taco-paco", "id": 102215563, "node_id": "U_kgDOBheviw", "avatar_url": "https://avatars.githubusercontent.com/u/102215563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taco-paco", "html_url": "https://github.com/taco-paco", "followers_url": "https://api.github.com/users/taco-paco/followers", "following_url": "https://api.github.com/users/taco-paco/following{/other_user}", "gists_url": "https://api.github.com/users/taco-paco/gists{/gist_id}", "starred_url": "https://api.github.com/users/taco-paco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taco-paco/subscriptions", "organizations_url": "https://api.github.com/users/taco-paco/orgs", "repos_url": "https://api.github.com/users/taco-paco/repos", "events_url": "https://api.github.com/users/taco-paco/events{/privacy}", "received_events_url": "https://api.github.com/users/taco-paco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-05-08T09:46:13Z", "updated_at": "2025-05-13T00:49:49Z", "closed_at": "2025-05-13T00:49:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/77", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/77", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/77.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/77.patch", "merged_at": "2025-05-13T00:49:47Z"}, "body": "> \u26a0\ufe0f NOTE: Use notes like this to emphasize something important about the PR.\r\n>\r\n>  This could include other PRs this PR is built on top of; API breaking changes; reasons for why the PR is on hold; or anything else you would like to draw attention to.\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready/Hold | Feature/Bug/Tooling/Refactor/Hotfix | Yes/No | [Link](<Issue link here>) |\r\n\r\n## Problem\r\n\r\n_What problem are you trying to solve?_\r\n\r\n\r\n## Solution\r\n\r\n_How did you solve the problem?_\r\n\r\n\r\n## Before & After Screenshots\r\n\r\n_Insert screenshots of example code output_\r\n\r\n**BEFORE**:\r\n[insert screenshot here]\r\n\r\n**AFTER**:\r\n[insert screenshot here]\r\n\r\n\r\n## Other changes (e.g. bug fixes, small refactors)\r\n\r\n\r\n## Deploy Notes\r\n\r\n_Notes regarding deployment of the contained body of work. These should note any\r\nnew dependencies, new scripts, etc._\r\n\r\n**New scripts**:\r\n\r\n- `script` : script details\r\n\r\n**New dependencies**:\r\n\r\n- `dependency` : dependency details\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nHere's my concise review of the ephemeral balance undelegation changes:\n\nAdds external undelegation functionality and improves ephemeral balance account management in the delegation program.\n\n- Added new `ExternalUndelegate` instruction (discriminator 15) in `src/discriminator.rs` to handle external undelegation of accounts owned by DLP\n- Modified `close_ephemeral_balance.rs` to use direct system program transfers instead of `close_pda` helper, with proper ownership verification\n- Added `EphemeralBalance` struct (discriminator 104) in `src/state/ephemeral_balance.rs` as a marker type for temporary balance accounts\n- Added comprehensive tests in `test_top_up.rs` verifying ownership transfers and account closure during undelegation\n- Improved account discriminator handling by making `to_bytes` a const function and adding proper initialization checks\n\nThe changes appear well-structured and properly integrated with existing functionality, with good test coverage for the new features.\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/77/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/77/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/75", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/75/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/75/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/75", "id": 3027706785, "node_id": "PR_kwDOLs5B3c6UUJVg", "number": 75, "title": "Base layer actions", "user": {"login": "taco-paco", "id": 102215563, "node_id": "U_kgDOBheviw", "avatar_url": "https://avatars.githubusercontent.com/u/102215563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/taco-paco", "html_url": "https://github.com/taco-paco", "followers_url": "https://api.github.com/users/taco-paco/followers", "following_url": "https://api.github.com/users/taco-paco/following{/other_user}", "gists_url": "https://api.github.com/users/taco-paco/gists{/gist_id}", "starred_url": "https://api.github.com/users/taco-paco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/taco-paco/subscriptions", "organizations_url": "https://api.github.com/users/taco-paco/orgs", "repos_url": "https://api.github.com/users/taco-paco/repos", "events_url": "https://api.github.com/users/taco-paco/events{/privacy}", "received_events_url": "https://api.github.com/users/taco-paco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-29T09:42:30Z", "updated_at": "2025-09-03T11:37:45Z", "closed_at": "2025-09-03T11:37:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/75", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/75", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/75.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/75.patch", "merged_at": "2025-09-03T11:37:41Z"}, "body": "## Problem\r\n\r\n_What problem are you trying to solve?_\r\nSupport of baselayer actions via added CallHandler endpoint. Validator would be able to call it after finalize/undelegate or just execute standalone action\r\n\r\n## Solution\r\n\r\n_How did you solve the problem?_\r\nIntroduced `process_call_handler` entrypoint that calls a hook in destination program.\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR introduces a CallHandler feature that enables validators to execute cross-program invocations (CPIs) to external programs after finalization/undelegate operations or as standalone actions. The implementation adds a new instruction type `CallHandler` (discriminator 0xf) that allows the delegation program to act as a middleware for triggering custom logic in destination programs.\n\nKey changes include:\n\n- **New CallHandler instruction**: Added `process_call_handler` function in `src/processor/call_handler.rs` that validates validators through fees vault verification, checks escrow account PDA derivation, and performs signed CPIs using the escrow account as signer\n- **Arguments and builders**: Created `CallHandlerArgs` struct with context enum (Commit, Undelegate, Standalone), escrow index, and arbitrary data payload for flexible program interactions\n- **Sequential slot validation**: Modified commit state processor to enforce strict sequential ordering (`slot = last_update_external_slot + 1`) instead of silently skipping out-of-order commits, changing the behavior from warning to hard error\n- **Test infrastructure**: Added comprehensive tests for CallHandler functionality and updated existing tests to use slot value 1 instead of 100 to align with new sequential validation\n- **Documentation updates**: Marked slot-related fields as deprecated in favor of \"nonce\" terminology while maintaining backward compatibility\n\nThe CallHandler uses an escrow account pattern where the delegation program can sign for operations in external programs through deterministic PDA derivation. This enables composable DeFi workflows where delegation state changes can atomically trigger downstream actions in other programs while maintaining security boundaries through validator authentication.\n\n## Confidence score: 2/5\n\n- This PR introduces significant breaking changes with potential security implications that require careful review\n- Score lowered due to incomplete semantic changes (slot vs nonce), breaking behavioral changes in commit validation, and potential security issues in the CallHandler CPI mechanism\n- Pay close attention to `src/processor/call_handler.rs`, `src/processor/commit_state.rs`, `src/state/delegation_metadata.rs`, and `tests/integration/programs/test-delegation/src/lib.rs`\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/75/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/75/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/74", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/74/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/74/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/74", "id": 3020263590, "node_id": "PR_kwDOLs5B3c6T7N_S", "number": 74, "title": "feat(audit): add report", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-25T14:42:20Z", "updated_at": "2025-04-25T14:59:51Z", "closed_at": "2025-04-25T14:59:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/74", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/74", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/74.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/74.patch", "merged_at": "2025-04-25T14:59:47Z"}, "body": "## Description\r\n\r\nAdd Halborn audit report\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nUpdates dependencies across the project and adds a Halborn audit report, including significant version upgrades for Solana, Anchor, and the ephemeral-rollups SDK.\n\n- Updated Solana version from v2.1.11 to v2.1.21 in `.github/workflows/run-tests.yml`\n- Changed `ephemeral-rollups-sdk` from git dependency to published crate v0.2.5 in `tests/integration/programs/test-delegation/Cargo.toml`\n- Upgraded Anchor from 0.30.1 to 0.31.1 across package.json and Cargo.toml files\n- Updated import paths from `ephemeral_rollups_sdk_v2` to `ephemeral_rollups_sdk` in `tests/integration/programs/test-delegation/src/lib.rs`\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/74/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/74/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/72", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/72/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/72/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/72", "id": 2966976719, "node_id": "PR_kwDOLs5B3c6RHxN7", "number": 72, "title": "feat: Improvements from audit feedback", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-02T16:35:11Z", "updated_at": "2025-04-02T17:32:31Z", "closed_at": "2025-04-02T17:32:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/72", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/72", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/72.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/72.patch", "merged_at": "2025-04-02T17:32:28Z"}, "body": "## Description\r\n\r\nThis PR includes changes based on suggestions that arose from the delegation program audit.\r\n\r\n- Use upgrade authority instead of a hardcoded admin key\r\n- Add a comment specifying that process_init_protocol_fees_vault is a permissionless instruction\r\n- Remove the mocked `verify_state`; added a comment noting that state validation is currently based on whitelisting in the program", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/72/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/72/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/71", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/71/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/71/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/71/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/71", "id": 2904932199, "node_id": "PR_kwDOLs5B3c6N4ITQ", "number": 71, "title": "feat: Add close validator vault", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-08T17:52:38Z", "updated_at": "2025-03-08T19:32:34Z", "closed_at": "2025-03-08T19:32:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/71", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/71", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/71.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/71.patch", "merged_at": "2025-03-08T19:32:28Z"}, "body": "## Description\r\n\r\n- Add close validator vault\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready| Feature | No | - |\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nAdds functionality to close validator fees vaults in the delegation program, including instruction handlers, discriminators, and comprehensive test coverage.\n\n- Added `CloseValidatorFeesVault` discriminator (0xe) in `src/discriminator.rs` for identifying close vault instructions\n- Added `process_close_validator_fees_vault` in `src/processor/close_validator_fees_vault.rs` with proper admin authorization and PDA validation\n- Added instruction builder `close_validator_fees_vault` in `src/instruction_builder/close_validator_fees_vault.rs` for constructing close vault instructions\n- Added integration test `test_close_validator_fees_vault.rs` verifying vault closure functionality\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/71/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/71/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/70", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/70/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/70/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/70", "id": 2904917301, "node_id": "PR_kwDOLs5B3c6N4FtC", "number": 70, "title": "chore: upgrade solana to 2.2", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-08T17:20:22Z", "updated_at": "2025-03-08T17:57:22Z", "closed_at": "2025-03-08T17:57:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/70", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/70", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/70.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/70.patch", "merged_at": "2025-03-08T17:57:19Z"}, "body": "## Description\r\n\r\nchore: upgrade solana to 2.2\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Tooling | No | - |\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nUpdates Solana dependencies from version 2.1.11 to 2.2 across the delegation program, affecting core packages like solana-program and solana-sdk.\n\n- Changed version constraints in `Cargo.toml` from `=2.1.11` to `2.2` for solana-program and solana-curve25519\n- Updated solana-program-test and solana-sdk test dependencies to version 2.2\n- Removed strict version pinning in favor of more flexible versioning\n- No functional code changes required, purely dependency maintenance\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/70/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/70/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/69", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/69/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/69/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/69", "id": 2902708065, "node_id": "PR_kwDOLs5B3c6Nwslo", "number": 69, "title": "chore: improved error logs + docs and naming", "user": {"login": "thlorenz", "id": 192891, "node_id": "MDQ6VXNlcjE5Mjg5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/192891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thlorenz", "html_url": "https://github.com/thlorenz", "followers_url": "https://api.github.com/users/thlorenz/followers", "following_url": "https://api.github.com/users/thlorenz/following{/other_user}", "gists_url": "https://api.github.com/users/thlorenz/gists{/gist_id}", "starred_url": "https://api.github.com/users/thlorenz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thlorenz/subscriptions", "organizations_url": "https://api.github.com/users/thlorenz/orgs", "repos_url": "https://api.github.com/users/thlorenz/repos", "events_url": "https://api.github.com/users/thlorenz/events{/privacy}", "received_events_url": "https://api.github.com/users/thlorenz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-07T11:06:55Z", "updated_at": "2025-03-08T17:21:23Z", "closed_at": "2025-03-08T17:21:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/69", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/69", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/69.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/69.patch", "merged_at": "2025-03-08T17:21:20Z"}, "body": "## Summary\n\nImproving error logs, documenting each instruction in more detail and normalizing the protocol\nfees vault related instruction name.\n\n## Details\n\n### Error Logs\n\nWhen an error occurred we would end up with just an error code and it was hard to understand\nwhat went wrong. We now log error messages to include more information about the error\nand the context in which it occurred, mainly a label and pubkey of the account in violation.\n\n### Documentation\n\nEach instruction now has the following sections in the documentation:\n\n- accounts: a list of accounts that are used by the instruction and if they need to be\nwritable/signers\n- requirements: a list of requirements that need to be met for the instruction to succeed,\nmainly relating to how the input accounts were setup previously\n- steps: outlining what the instruction does (those were already there for most instructions,\nand were added to all remaining ones)\n\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR enhances documentation and error logging across the delegation program, focusing on improved clarity and maintainability.\n\n- Added comprehensive documentation sections for accounts, requirements, and execution steps across all processor functions\n- Renamed `InitFeesVault` to `InitProtocolFeesVault` and related functions for better clarity\n- Added descriptive labels to account validation functions for more informative error messages\n- Fixed error enum name from `Undelegatable` to `NotUndelegatable` for clearer error messaging\n- Added TODO comments flagging potential issues like obsolete fields and validation requirements\n\nThe changes are well-structured and improve code maintainability without introducing functional changes. However, the TODO comments should be addressed before merging.\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/69/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/69/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/67", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/67/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/67/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/67", "id": 2891989112, "node_id": "PR_kwDOLs5B3c6NMTSz", "number": 67, "title": "feat: add commit state from buffer", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-03T18:30:01Z", "updated_at": "2025-03-05T13:15:03Z", "closed_at": "2025-03-05T13:15:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/67", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/67", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/67.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/67.patch", "merged_at": "2025-03-05T13:15:00Z"}, "body": "## Description\r\n\r\n- Add commit state from buffer\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR adds functionality to commit state changes from a buffer account in the delegation program, providing an alternative to passing state directly in instruction data.\n\n- Added `CommitStateFromBuffer` instruction (discriminator 13) with corresponding builder and processor implementations\n- New `CommitStateFromBufferArgs` struct mirrors `CommitStateArgs` but reads data from buffer instead of including it directly\n- Refactored core commit state logic into `process_commit_state_internal` for code reuse between direct and buffer-based commits\n- Added comprehensive test validating buffer commits, state verification, and proper metadata updates\n- Maintains existing security checks including validator whitelisting and delegation status validation\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/67/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/67/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/66", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/66/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/66/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/66", "id": 2855690177, "node_id": "PR_kwDOLs5B3c6LWXu7", "number": 66, "title": "chore: simplify fees charging structure", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-02-15T20:03:43Z", "updated_at": "2025-02-15T21:37:26Z", "closed_at": "2025-02-15T21:37:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/66", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/66", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/66.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/66.patch", "merged_at": "2025-02-15T21:37:22Z"}, "body": "## Description\r\n\r\n- Simplify fees charging structure\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Refactor | No | - |\r\n\r\n## Description\r\n\r\n- Simplify fees charging structure\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR modifies the fee charging structure in the delegation program, focusing on improving the robustness and clarity of fee calculations and distributions.\n\n- Added critical input validation in `close_pda_with_fees` to check for empty fee addresses and invalid percentages\n- Implemented vector-based fee calculation in `src/processor/utils/pda.rs` for more efficient cascading fee distribution\n- Enhanced error handling with checked arithmetic operations to prevent overflows\n- Improved fee distribution logic to properly handle sequential percentage-based fee calculations\n- Simplified the overall fee charging structure while maintaining functionality\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/66/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/66/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/65", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/65/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/65/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/65", "id": 2855005954, "node_id": "PR_kwDOLs5B3c6LUL6p", "number": 65, "title": "feat: add claim protocol fees ix", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-02-15T01:19:17Z", "updated_at": "2025-02-15T15:11:29Z", "closed_at": "2025-02-15T15:11:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/65", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/65", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/65.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/65.patch", "merged_at": "2025-02-15T15:11:25Z"}, "body": "# Description\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n\r\n## Description\r\n\r\n- Add instruction to claim protocol fees\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR adds a new instruction for claiming protocol fees from the fees vault, allowing authorized admins to withdraw accumulated fees while maintaining rent-exempt balance.\n\n- Added `protocol_claim_fees.rs` with secure lamport transfer logic and admin authorization checks\n- Added `ProtocolClaimFees = 12` discriminator in `src/discriminator.rs` for instruction identification\n- Test in `test_protocol_claim_fees.rs` needs renaming and better validation of admin authorization\n- Integration test `test-delegation.ts` includes new helper function `createClaimProtocolFeesVaultInstruction`\n- Ensure proper rent-exempt balance handling in fees vault after withdrawal\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/65/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/65/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/64", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/64/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/64/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/64", "id": 2851518829, "node_id": "PR_kwDOLs5B3c6LIWiQ", "number": 64, "title": "fix: claim fees rent exception", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-02-13T16:19:09Z", "updated_at": "2025-02-13T18:15:57Z", "closed_at": "2025-02-13T18:15:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/64", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/64", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/64.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/64.patch", "merged_at": "2025-02-13T18:15:54Z"}, "body": "## \r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Bug | - |  |\r\n\r\n## Problem\r\n\r\nIncorrect rent exception calculation\r\n\r\n## Solution\r\n\r\nCorrectly calculate rent exception including discriminator 8 bytes\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR fixes a critical rent exemption calculation bug in the validator fee claiming process by properly accounting for the 8-byte discriminator.\n\n- Fixed rent exemption calculation in `src/processor/validator_claim_fees.rs` by changing from `minimum_balance(0)` to `minimum_balance(8)`\n- Added potential vulnerability to rounding errors in protocol fee calculations that could leave dust amounts\n- Introduced possible edge case with operation ordering where partial transfers could leave system inconsistent if later operations fail\n- Added integration test in `tests/integration/tests/test-delegation.ts` to verify fee claiming functionality\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/64/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/64/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/63", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/63/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/63/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/63/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/63", "id": 2824217903, "node_id": "PR_kwDOLs5B3c6Jrcdu", "number": 63, "title": "fix: allow commit at slot = prev slot", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-01-31T19:17:18Z", "updated_at": "2025-02-01T08:31:36Z", "closed_at": "2025-02-01T08:31:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/63", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/63", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/63.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/63.patch", "merged_at": "2025-02-01T08:31:33Z"}, "body": "## fix: allow commit at slot = prev slot\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Hotfix | No | - |\r\n\r\n## Problem\r\n\r\nAn account can have commits for the same slot, where the state is equale, but one can allow for undelegation\r\n\r\n## Solution\r\n\r\nAllow to commit if slot is more or equal to the last committed slot\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR modifies the commit slot validation logic in the delegation program to allow multiple commits at the same slot number, specifically to support cases where equal state needs different undelegation settings.\n\n- Modified commit validation in `src/processor/commit_state.rs` to accept commits where slot >= previous slot (instead of strictly >)\n- Change enables multiple commits with identical state but different undelegation flags at same slot\n- Test coverage in `test_commit_state.rs` verifies the new commit slot validation behavior\n- Important for scenarios where undelegation settings need to be modified without waiting for next slot\n- Consider adding documentation to clarify intended usage and potential race conditions\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/63/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/63/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/62", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/62/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/62/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/62", "id": 2770809722, "node_id": "PR_kwDOLs5B3c6G1LA9", "number": 62, "title": "chore: updrade solana dependencies to 2.1.11", "user": {"login": "bmuddha", "id": 31780624, "node_id": "MDQ6VXNlcjMxNzgwNjI0", "avatar_url": "https://avatars.githubusercontent.com/u/31780624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmuddha", "html_url": "https://github.com/bmuddha", "followers_url": "https://api.github.com/users/bmuddha/followers", "following_url": "https://api.github.com/users/bmuddha/following{/other_user}", "gists_url": "https://api.github.com/users/bmuddha/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmuddha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmuddha/subscriptions", "organizations_url": "https://api.github.com/users/bmuddha/orgs", "repos_url": "https://api.github.com/users/bmuddha/repos", "events_url": "https://api.github.com/users/bmuddha/events{/privacy}", "received_events_url": "https://api.github.com/users/bmuddha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2025-01-06T14:43:13Z", "updated_at": "2025-02-12T08:30:03Z", "closed_at": "2025-02-12T08:29:50Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/62", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/62", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/62.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/62.patch", "merged_at": "2025-02-12T08:29:50Z"}, "body": "| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| Ready | Refactor | No | gh-277 |\r\n\r\n\r\n## Problem\r\n\r\nOutdated solana dependencies\r\n\r\n\r\n## Solution\r\n\r\nUpgraded all solana deps to 2.1.7\r\n\r\n\r\n\r\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR upgrades Solana dependencies to version 2.1.11 and implements necessary compatibility changes across the codebase, though there's a discrepancy in the PR description which mentions version 2.1.7.\n\n- Updated Solana dependencies to v2.1.11 in `Cargo.toml` and GitHub workflow configuration\n- Changed Solana CLI installation URL from release.solana.com to release.anza.xyz in `.github/workflows/run-tests.yml`\n- Upgraded Rust toolchain to 1.84.1 in `rust-toolchain.toml`\n- Added length checks in `src/state/utils/to_bytes.rs` and `try_from_bytes.rs` for improved buffer overflow protection\n- Added clippy allow attribute in `src/lib.rs` for Solana-specific cfg attributes\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/62/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/62/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/61", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/61/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/61/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/61/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/61", "id": 2767205921, "node_id": "PR_kwDOLs5B3c6GpGxH", "number": 61, "title": "feat: return Ok() on valid commit/finalize without failing", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-01-03T08:56:56Z", "updated_at": "2025-01-03T09:26:16Z", "closed_at": "2025-01-03T09:26:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/61", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/61", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/61.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/61.patch", "merged_at": "2025-01-03T09:26:13Z"}, "body": "## Description\r\n\r\nReturn Ok() on valid commit/finalize without failing\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature/Refactor | No | - |\r\n\r\n## Problem\r\n\r\nCommit and Finalize instructions are typically bundled together. There are cases where the commit or finalize is discharged, e.g a most recent commitment landed or there is nothing to commit. These cases make the transaction fails, preventing all the other commits/finalizes to succeed.    \r\n\r\n## Solution\r\n\r\nWe instead return Ok() without any modification in such cases, so that the other correct instructions can be processed.\r\n\r\n## Other changes (e.g. bug fixes, small refactors)\r\n\r\n- Small refactoring in the code and added `magicblock-` prefix to the crate\r\n- Bump version to 1.0.0\r\n\r\n## Issues\r\n\r\nCloses #56 \r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR improves transaction handling by allowing bundled commit/finalize instructions to continue when individual operations are validly skipped, rather than failing the entire transaction.\r\n\r\n- Changed commit_state.rs to return Ok() with a log message for outdated slots instead of failing\r\n- Reduced RENT_FEES_PERCENTAGE from 30% to 10% in consts.rs while maintaining PROTOCOL_FEES_PERCENTAGE at 10%\r\n- Added `is_uninitialized_account` helper in loaders.rs to better handle skipped operations\r\n- Modified finalize.rs to check for uninitialized accounts before proceeding with finalization\r\n- Reordered fee distribution in undelegate.rs to prioritize validator fees over protocol fees\r\n\r\n\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/61/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/61/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/60", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/60/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/60/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/60/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/60", "id": 2763793437, "node_id": "PR_kwDOLs5B3c6GdwAX", "number": 60, "title": "chore: check for state slot at commit time", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-30T23:18:00Z", "updated_at": "2025-01-03T09:28:52Z", "closed_at": "2025-01-02T18:08:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/60", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/60", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/60.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/60.patch", "merged_at": "2025-01-02T18:08:21Z"}, "body": "<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR introduces state slot validation and improves error handling in the delegation program, with significant changes to PDA derivation and lamports settlement.\n\n- Added new error variants in `src/error.rs` for handling outdated slots, undelegation states, and arithmetic overflow\n- Replaced manual buffer PDA derivation with dedicated functions `delegate_buffer_pda_from_delegated_account_and_owner_program` and `undelegate_buffer_pda_from_delegated_account` in `src/pda.rs`\n- Removed `lamports.rs` module and refactored lamports settlement logic directly into processor functions\n- Added slot validation in `commit_state.rs` to prevent outdated commits and improved error handling\n- Renamed fee-related constants for clarity (FEES_SESSION -> RENT_FEES_PERCENTAGE, FEES_VOLUME -> PROTOCOL_FEES_PERCENTAGE)\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/60/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/60/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/58", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/58/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/58/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/58/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/58", "id": 2750406638, "node_id": "PR_kwDOLs5B3c6FybPz", "number": 58, "title": "chore: undelegate/finalize simplification", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-19T13:52:58Z", "updated_at": "2025-01-03T09:28:52Z", "closed_at": "2025-01-02T10:22:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/58", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/58", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/58.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/58.patch", "merged_at": "2025-01-02T10:22:56Z"}, "body": "## Summary\r\n\r\nThis PR attempts to simplify and de-risk the flow of the `undelegate` and `finalize` IXs.\r\n\r\n## Details\r\n\r\nBefore this PR, the `undelegate` IX effectively was a superset of the `finalize` IX.\r\nNow we expect the `finalize` IX to be called right before the `undelegate` (in order for it to succeed)\r\n\r\nAdditionally this PR simplifies the lamport settling code, while also clarifying the difference between the \"undelegation_buffer\" used only during the `undelegate` IX and the regular \"buffer\" used during the `delegate` IX.\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR simplifies the delegation program's state management by removing commit-related functionality and consolidating lamports handling logic.\r\n\r\n- Removed commit state/record PDAs from undelegate instruction and processing, streamlining the undelegation flow\r\n- Added new `undelegation_buffer_seeds_from_delegated_account` macro and PDA function in `src/pda.rs` for clearer buffer management\r\n- Moved `settle_lamports_balance` function from utils into `finalize.rs` where it's primarily used\r\n- Removed `lamports.rs` utility module as part of consolidating lamports handling logic\r\n- Simplified CPI process for external program calls in undelegation\r\n\r\n\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/58/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/58/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/55", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/55/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/55/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/55/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/55", "id": 2731639413, "node_id": "PR_kwDOLs5B3c6Eyaem", "number": 55, "title": "fix: remove allow undelegate attack vectors", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-12-11T02:10:45Z", "updated_at": "2025-01-03T09:28:51Z", "closed_at": "2024-12-19T09:19:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/55", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/55", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/55.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/55.patch", "merged_at": "2024-12-19T09:19:30Z"}, "body": "## Summary\r\n\r\nAs discussed, we found that valid_until and the IX \"allow_undelegation\" could allow a malicious program to steal state and lamports from the validators.\r\n\r\n## Details\r\n\r\nThis PR removes all those capabilities from the delegation program. We keep the ABI intact however to make this a non-breaking change (only changing the program code, not the program's ABI)\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR removes time-based delegation controls and the 'AllowUndelegate' functionality to address potential security vulnerabilities in the delegation program's undelegation process.\r\n\r\n- Removes `valid_until` field from `DelegateArgs` and `DelegationMetadata` structs, eliminating time-based delegation expiry\r\n- Removes `AllowUndelegate` discriminator (value 4) and related functionality from instruction processing\r\n- Replaces time-based undelegation checks with direct `is_undelegatable` flag validation in `src/processor/undelegate.rs`\r\n- Updates error messages and tests to reflect removal of time-based validation\r\n- Removes `src/instruction_builder/allow_undelegate.rs` and `tests/test_allow_undelegate.rs` completely\r\n\r\n\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/55/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/55/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/53", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/53/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/53/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/53/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/53", "id": 2726076566, "node_id": "PR_kwDOLs5B3c6EfFyG", "number": 53, "title": "chore: pda seeds and pubkeys cleanups", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-09T06:00:36Z", "updated_at": "2025-01-03T09:28:50Z", "closed_at": "2024-12-10T05:16:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/53", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/53", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/53.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/53.patch", "merged_at": "2024-12-10T05:16:28Z"}, "body": "## Summary\r\n\r\nThere's a lot of copy/pasting for seed generation and the `pda.rs` file generates a ton of different variants functions that are not used but just increased the API surface area.\r\nAdditionally since all those functions are auto-generated, we lost the capability to improve the naming.\r\n\r\n## Details\r\n\r\nThis PR hides all seeds code behind macros, and expose a single function to generate the `Pubkey` for each type of PDA. Additionally we improve the naming by specifying information about the PDA's seeds parameter in the function name.\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR refactors PDA (Program Derived Address) handling across the delegation program to improve code organization and naming clarity.\r\n\r\n- Renamed PDA derivation functions from generic `*_from_pubkey` to more descriptive names like `*_from_delegated_account` and `*_from_validator`\r\n- Moved PDA seed constants from `consts.rs` to `pda.rs` and replaced with macro-based seed generation\r\n- Updated loader functions to explicitly indicate initialization state (e.g. `load_initialized_fees_vault`)\r\n- Standardized PDA creation by separating bump seeds from main seeds array\r\n- Maintained existing security checks and validation logic while improving code organization\r\n\r\n\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/53/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/53/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/52", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/52/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/52/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/52", "id": 2722306648, "node_id": "PR_kwDOLs5B3c6ESUCJ", "number": 52, "title": "chore: serialization and discriminants", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2024-12-06T07:46:47Z", "updated_at": "2025-01-03T09:28:50Z", "closed_at": "2024-12-10T04:18:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/52", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/52", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/52.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/52.patch", "merged_at": "2024-12-10T04:18:03Z"}, "body": "## Summary\r\n\r\nThe idea of this PR is to standardize the use of discriminators in the delegation program.\r\n\r\n## Details\r\n\r\nTo achieve this we provide standardized serialization/deserialization functions that we use in the program's implementation.\r\n\r\nThe standard functions for account data is now:\r\n- `try_from_bytes_with_discriminator` (for deserializing both borsh and zero-copy)\r\n- `to_bytes_with_discriminator` (for serializing both borsh and zero-copy)\r\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/52/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/52/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/51", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/51/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/51/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/51/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/51", "id": 2722036375, "node_id": "PR_kwDOLs5B3c6ERYQm", "number": 51, "title": "chore: resolve naming discrepencies", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-06T04:39:05Z", "updated_at": "2025-01-03T09:28:50Z", "closed_at": "2024-12-06T07:49:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/51", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/51", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/51.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/51.patch", "merged_at": "2024-12-06T07:49:11Z"}, "body": "## Summary\r\n\r\nWhile spending time on the delegation code, I found out that the naming was inconsistent for some accounts accross the codebase, making it difficult to understand what is going on.\r\n\r\n> This does not touch the hand-made IDL to not break any user's compatibility.\r\n> This only focuses on the RUST program binary code (and its unit tests)\r\n\r\n## Details\r\n\r\nNaming changes uniformization done in this PR:\r\n- `committed_state` -> `commit_state`\r\n- `new_state_account` -> `commit_state`\r\n- `committed_state_account` -> `commit_state_account`\r\n- `committed_state_record` -> `commit_record`\r\n- `commit_state_record` -> `commit_record`\r\n- `delegate_account_metadata` -> `delegation_metadata`\r\n- `delegate_accounts_metadata` -> `delegation_metadata`\r\n- `metadata` -> `delegation_metadata`\r\n- `delegation` -> `delegation_record`\r\n- `buffer` sometimes incorrectly refers to `commit_state`\r\n- `seeds` sometimes incorrectly refers to `delegation_metadata`\r\n\r\n## Notes\r\n\r\nInside the implementation of some IX, there is a lot of name conflict. In order to achieve better clarity I used a standardized naming convention of:\r\n\r\n- `delegation_record_account` // for AccountInfo\r\n- `delegation_record_data` // for AccountInfo.data's [u8]\r\n- `delegation_record` // for deserialized DelegationRecord rust struct\r\n\r\nThis can be applied to all types of accounts in the same way:\r\n\r\n- `delegation_metadata_account` // AccountInfo\r\n- `delegation_metadata_data` // [u8]\r\n- `delegation_metadata` // DelegationMetadata\r\n- `commit_record_account` // AccountInfo\r\n- `commit_record_data` // [u8]\r\n- `commit_record` // CommitRecord\r\n- `commit_state_account` // AccountInfo\r\n- `commit_state_data` // [u8]\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR standardizes naming conventions across the delegation program codebase, focusing on consistent terminology and clearer variable names.\r\n\r\n- Renamed `committed_state` to `commit_state` and `committed_state_record` to `commit_record` across all files for consistency\r\n- Updated account variable names to include `_account` suffix for clarity (e.g. `buffer` -> `buffer_account`)\r\n- Changed trait implementation from `Discriminator` to `AccountWithDiscriminator` in state files\r\n- Renamed variables in test files to match new naming conventions (e.g. `commitStateRecordPda` -> `commitRecordPda`)\r\n- Updated IDL file account names to align with implementation changes\r\n\r\nThe changes are purely cosmetic and improve code maintainability without modifying any core functionality.\r\n\r\n\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/51/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/51/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/50", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/50/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/50/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/50", "id": 2721205150, "node_id": "PR_kwDOLs5B3c6EOe4U", "number": 50, "title": "feat: Allow to create ephemeral balance PDAs and delegate with payer", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-05T19:13:39Z", "updated_at": "2024-12-05T20:59:36Z", "closed_at": "2024-12-05T20:59:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/50", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/50", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/50.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/50.patch", "merged_at": "2024-12-05T20:59:33Z"}, "body": "## feat: Allow to create ephemeral balance PDAs and delegate with a different payer\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n\r\n## Description\r\n\r\n- Allow to have a payer different from the Ephemeral Balance PDAs reference pubkey\r\n- This can allow to top up for a session keys or sponsor an initial balance for a user\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR adds functionality to allow different payers for ephemeral balance PDAs, enabling use cases like session keys and sponsored balances by separating the payer from the reference pubkey.\n\n- Modified `src/instruction_builder/top_up_ephemeral_balance.rs` to accept separate payer and pubkey parameters for PDA derivation\n- Updated `src/processor/delegate_ephemeral_balance.rs` to require both payer and pubkey as signers for security\n- Added test cases in `tests/test_top_up.rs` demonstrating sponsored balance functionality\n- Changed PDA seed derivation to use pubkey instead of payer across all affected files\n- Reduced space allocation from 8 to 0 bytes in ephemeral balance accounts since no data storage is needed\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/50/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/50/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/49", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/49/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/49/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/49", "id": 2721019173, "node_id": "PR_kwDOLs5B3c6EN1n7", "number": 49, "title": "chore: Add ephemeral balance pda utils", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-05T17:33:34Z", "updated_at": "2024-12-05T17:55:28Z", "closed_at": "2024-12-05T17:55:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/49", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/49", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/49.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/49.patch", "merged_at": "2024-12-05T17:55:25Z"}, "body": "## Add ephemeral balance pda utils\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n\r\n\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR adds utility functions for ephemeral balance PDA derivation in the delegation program, centralizing the logic and improving code maintainability.\n\n- Added `ephemeral_balance_from_payer` and `ephemeral_balance_and_bump_from_payer` functions in `src/pda.rs` for consistent PDA derivation\n- Refactored `top_up_ephemeral_balance.rs`, `close_ephemeral_balance.rs`, and `delegate_ephemeral_balance.rs` to use new utility functions\n- Updated tests to verify PDA derivation works correctly with new utilities\n- Maintained existing functionality while improving code organization\n\n\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/49/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/49/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/48", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/48/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/48/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/48/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/48", "id": 2719460801, "node_id": "PR_kwDOLs5B3c6EIeDP", "number": 48, "title": "chore: rename whitelist account to program_config", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-05T06:26:03Z", "updated_at": "2025-01-03T09:28:49Z", "closed_at": "2024-12-05T07:55:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/48", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/48", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/48.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/48.patch", "merged_at": "2024-12-05T07:55:45Z"}, "body": "## Summary\r\n\r\nThere was some naming mix-ups between Whitelist and ProgramConfig, this PR does a re-read of those aspects.\r\n\r\n## Details\r\n\r\nThis PR simply hunts down all the related code and separate appropriately between ProgramConfig state and WhitelistProgram IX", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/48/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/48/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/47", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/47/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/47/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/47", "id": 2714131660, "node_id": "PR_kwDOLs5B3c6D2F9j", "number": 47, "title": "refactor: separating api/processor code to different folders", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-12-03T06:37:39Z", "updated_at": "2025-01-03T09:28:49Z", "closed_at": "2024-12-05T03:14:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/47", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/47", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/47.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/47.patch", "merged_at": "2024-12-05T03:14:18Z"}, "body": "## Summary\r\n\r\nThis PR attemps to do a first cleanup to separate program code from API code in the delegation program.\r\nAlso doing small clarification change to uniformize naming when needed.\r\n\r\nImportant: There is NO behaviour/code change other than naming and folder structure\r\n\r\n## Details\r\n\r\n- Make sure all naming of \"init_fees_vault\" and \"init_validator_fees_vault\" match (instead of naming those \"initialize_blah_blah\"\r\n- Putting all instruction generating function in their own folder\r\n- Putting all args structures in their own folders\r\n- Putting all utils in either process or state folder depending on where they are used from\r\n- Putting each instruction in its own file for clarity\r\n- Making sure Args structure match the name of the IX they are used in\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR implements a significant reorganization of the codebase to improve structure and maintainability. Here's a concise summary of the key changes:\r\n\r\n- Separates API and processor code into dedicated folders, moving instruction building logic into src/instruction/ and processing logic into src/processor/\r\n- Introduces new args/ folder containing argument structs previously scattered across instruction files\r\n- Moves utility functions into more logical locations (processor/utils/, state/utils/)\r\n- Renames some types for clarity (e.g., CommitAccountArgs -> CommitStateArgs)\r\n- Removes verify_commitment.rs wrapper in favor of direct verify_state usage\r\n\r\nKey points to review:\r\n- Verify_state() function now returns Ok(()) with TODO comment, potentially skipping important verification\r\n- WhitelistForProgram serialized_len() may incorrectly calculate BTreeSet size\r\n- Some instruction builders use unwrap() on serialization which could panic\r\n- Ensure all functionality from removed top_up_and_delegate.rs is properly preserved in new locations\r\n- Consider adding actual verification logic in verify_state() rather than relying on validator fees vault existence\r\n\r\n\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/47/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/47/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/46", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/46/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/46/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/46", "id": 2710388532, "node_id": "PR_kwDOLs5B3c6DsNko", "number": 46, "title": "fix: Add system_program checks", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-02T04:01:58Z", "updated_at": "2025-01-03T09:28:48Z", "closed_at": "2024-12-05T05:17:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/46", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/46", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/46.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/46.patch", "merged_at": "2024-12-05T05:17:14Z"}, "body": "## Problem\r\n\r\nThis is a followup to the internal audit:\r\nhttps://docs.google.com/document/d/1A-LPShMpH7gft7Y_zGBrV23Qx5BOpxBVdaVA8Q5TXKg/edit?tab=t.0\r\n\r\nThis particular PR aims to address the following item:\r\n- High 2: The system_program is unchecked in some IXs\r\n\r\n## Solution\r\n\r\nAdd a `load_program` in all instructions where it's missing\r\n\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR implements security improvements by adding system program validation checks across processor files and fixes admin public key configuration for test/production environments.\r\n\r\n- Added `load_program(system_program, system_program::id())?` validation in all processor files to ensure system program authenticity before PDA/lamport operations\r\n- Fixed admin pubkey configuration in `src/consts.rs` to use correct keys: `tEsT3eV6RFCWs1BZ7AXTzasHqTtMnMLCB2tjQ42TDXD` for tests, `3FwNxjbCqdD7G6MkrAdwTd5Zf6R3tHoapam4Pv1X2KBB` for production\r\n- Reordered system program validation in `src/processor/finalize.rs` to occur before dependent operations\r\n- Missing system program validation in `process_close_ephemeral_balance()` function needs to be addressed\r\n\r\n\r\n\r\n<sub>\ud83d\udca1 (5/5) You can turn off certain types of comments like style [here](https://app.greptile.com/review/github)!</sub>\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/46/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/46/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/45", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/45/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/45/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/45", "id": 2702923134, "node_id": "PR_kwDOLs5B3c6DgCAd", "number": 45, "title": "feat: Add validator identity to delegation args", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-11-28T18:17:21Z", "updated_at": "2024-11-28T18:39:02Z", "closed_at": "2024-11-28T18:38:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/45", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/45", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/45.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/45.patch", "merged_at": "2024-11-28T18:38:59Z"}, "body": "# Add validator identity to delegation args\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | #43  |\r\n\r\n## Problem\r\n\r\nSee #43 \r\n\r\n## Other changes (e.g. bug fixes, small refactors)\r\n\r\n- Use the ephemeral_sdk_v2 for the integration tests which simplify the API, see https://github.com/magicblock-labs/ephemeral-rollups-sdk/pull/7 for details\r\n\r\n## Issues\r\n\r\nCloses #43 \r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nAdded validator identity parameter to delegation arguments, enabling specification of validator through CPI (Cross-Program Invocation) while maintaining backward compatibility.\r\n\r\n- Added optional `validator` field of type `Pubkey` to `src/instruction.rs:DelegateAccountArgs` struct\r\n- Updated `src/processor/delegate.rs` to initialize delegation record authority from validator argument with Pubkey::default() fallback\r\n- Replaced delegation-program-sdk with ephemeral-rollups-sdk-v2 in tests for simplified API\r\n- Added integration tests in `tests/test_delegate_on_curve.rs` to verify validator identity functionality\r\n\r\n\r\n\r\n<sub>\ud83d\udca1 (4/5) You can add custom instructions or style guidelines for the bot [here](https://app.greptile.com/review/github)!</sub>\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/45/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/45/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/44", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/44/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/44/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/44", "id": 2691585921, "node_id": "PR_kwDOLs5B3c6DEost", "number": 44, "title": "feat: Add a canonical way to bring lamports into the validator", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-11-25T17:33:59Z", "updated_at": "2024-11-26T07:52:01Z", "closed_at": "2024-11-26T07:51:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/44", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/44", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/44.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/44.patch", "merged_at": "2024-11-26T07:51:58Z"}, "body": "## Add a canonical way to bring lamports into the validator\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready| Feature | No | #41  |\r\n\r\n## Problem\r\n\r\nSee #41 \r\n\r\n## Issues\r\n\r\nCloses #41 \n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR adds functionality for managing ephemeral lamports in the validator through PDAs, introducing a canonical way to handle temporary balances with top-up, delegation, and closure operations.\n\n- Added new `EPHEMERAL_BALANCE` PDA seed in `src/consts.rs` for escrow lamports management\n- Implemented three core operations in `src/processor/top_up_and_delegate.rs`: top-up (fund PDA), delegate (to program), and close (PDA)\n- Modified buffer PDA validation in `src/processor/delegate.rs` to support uninitialized buffers for lamport-only delegations\n- Added comprehensive test coverage in `tests/test_top_up.rs` for the full lifecycle of ephemeral balance operations\n- Introduced new instruction types (`TopUp`, `DelegateEphemeralBalance`, `CloseEphemeralBalance`) in `src/instruction.rs`\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/44/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/44/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/42", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/42/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/42/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/42/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/42", "id": 2654567064, "node_id": "PR_kwDOLs5B3c6BvTsa", "number": 42, "title": "feat: whitelist validator for program", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-11-13T07:50:17Z", "updated_at": "2024-11-18T15:43:30Z", "closed_at": "2024-11-18T15:43:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/42", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/42", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/42.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/42.patch", "merged_at": "2024-11-18T15:43:27Z"}, "body": "## feat: whitelist validator for program\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | #39  |\r\n\r\n## Problem\r\n\r\nSee #39\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis PR adds validator whitelisting functionality to the delegation program, allowing only approved validators to perform commitment, finalization, and undelegation operations.\r\n\r\n- Added new `WhitelistForProgram` state struct and PDA to store approved validator pubkeys per program\r\n- Added `WhitelistValidatorForProgram` instruction that allows admin/program authority to manage validator whitelist\r\n- Added `resize_pda` utility function to handle dynamic whitelist storage resizing\r\n- Added integration tests verifying whitelist add/remove functionality\r\n- Updated Rust toolchain to 1.79.0 and pinned Solana dependencies to 1.18.26\r\n\r\n## Issues \r\n\r\nCloses #39", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/42/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/42/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/39", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/39/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/39/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/39", "id": 2609340456, "node_id": "PR_kwDOLs5B3c5_pyjP", "number": 39, "title": "feat: add validator whitelisting", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-10-23T17:32:01Z", "updated_at": "2024-10-24T07:38:31Z", "closed_at": "2024-10-24T07:38:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/39", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/39", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/39.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/39.patch", "merged_at": "2024-10-24T07:38:29Z"}, "body": "# Add validator whitelisting\r\n\r\nAdd validator whitelisting which allows commitmentment/finalization/undelegation only from know identities\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature/Hotfix | No | - |\r\n\r\n## Description\r\n\r\n- This solution is temporary and allow for testing on mainnet, it will be supersided by the dyanmic whitelisting with https://github.com/magicblock-labs/delegation-program/tree/feat/add-identity-whitelisting\r\n\n\n<!-- greptile_comment -->\n\n## Greptile Summary\n\nThis PR introduces validator whitelisting to the delegation program, allowing commitment, finalization, and undelegation only from known identities as a temporary solution for mainnet testing.\n\n- Added `src/consts_whitelist.rs` with hardcoded whitelists for mainnet and non-mainnet environments\n- Modified `src/verify_state.rs` to implement whitelist checks in the `verify_state` function\n- Updated `src/processor/commit_state.rs`, `src/processor/finalize.rs`, and `src/processor/undelegate.rs` to integrate whitelist verification\n- Added new error types in `src/error.rs` for invalid authorities and mismatched accounts\n- Updated `README.md` with instructions for building the program for mainnet\n\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/39/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/39/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/38", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/38/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/38/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/38", "id": 2572460121, "node_id": "PR_kwDOLs5B3c596gDG", "number": 38, "title": "feat: Support delegation of on-curve accounts", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6811014853, "node_id": "LA_kwDOLs5B3c8AAAABlffWxQ", "url": "https://api.github.com/repos/magicblock-labs/delegation-program/labels/documentation", "name": "documentation", "color": "0075ca", "default": true, "description": "Improvements or additions to documentation"}, {"id": 7263024986, "node_id": "LA_kwDOLs5B3c8AAAABsOj3Wg", "url": "https://api.github.com/repos/magicblock-labs/delegation-program/labels/feature", "name": "feature", "color": "C2E0C6", "default": false, "description": null}], "state": "closed", "locked": false, "assignee": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2024-10-08T08:21:27Z", "updated_at": "2024-10-14T09:33:29Z", "closed_at": "2024-10-14T09:33:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/38", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/38", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/38.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/38.patch", "merged_at": "2024-10-14T09:33:26Z"}, "body": "# feat: Support delegation/undelegation of on-curve accounts\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature  | Yes | #37  |\r\n\r\n## Problem\r\n\r\nSupport delegation of on-curve accounts. See #37 \r\n\r\n## Issues\r\n\r\nCloses #37\r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis pull request introduces support for delegating on-curve accounts in the delegation program, addressing issue #37. The changes enhance the flexibility of the delegation system by allowing direct delegation of on-curve accounts without requiring a wrapper program.\r\n\r\nKey changes include:\r\n- Added `delegate_on_curve` function in `src/instruction.rs` for on-curve account delegation\r\n- Modified `process_delegate` in `src/processor/delegate.rs` to handle both on-curve and off-curve accounts\r\n- Introduced `DelegationMetadata` struct to store additional delegation information\r\n- Added new test file `tests/test_delegate_on_curve.rs` to verify on-curve account delegation\r\n- Updated existing tests to reflect the new delegation process\r\n\r\nThese changes significantly expand the program's capabilities, allowing for more versatile account delegation scenarios.\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/38/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/38/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/36", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/36/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/36/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/36", "id": 2528220749, "node_id": "PR_kwDOLs5B3c57m7x5", "number": 36, "title": "fix: undelegation should write the owner program", "user": {"login": "crypto-vincent", "id": 106254129, "node_id": "U_kgDOBlVPMQ", "avatar_url": "https://avatars.githubusercontent.com/u/106254129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crypto-vincent", "html_url": "https://github.com/crypto-vincent", "followers_url": "https://api.github.com/users/crypto-vincent/followers", "following_url": "https://api.github.com/users/crypto-vincent/following{/other_user}", "gists_url": "https://api.github.com/users/crypto-vincent/gists{/gist_id}", "starred_url": "https://api.github.com/users/crypto-vincent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crypto-vincent/subscriptions", "organizations_url": "https://api.github.com/users/crypto-vincent/orgs", "repos_url": "https://api.github.com/users/crypto-vincent/repos", "events_url": "https://api.github.com/users/crypto-vincent/events{/privacy}", "received_events_url": "https://api.github.com/users/crypto-vincent/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-09-16T11:38:26Z", "updated_at": "2025-01-03T09:28:38Z", "closed_at": "2024-09-16T12:05:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/36", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/36", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/36.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/36.patch", "merged_at": "2024-09-16T12:05:29Z"}, "body": "## Problem\r\n\r\nThe undelegation instruction gets generated with the owner program as writable.\r\nThis is an issue because it triggers the owner program to be re-cloned due to it being updated (even if its state doesnt change)\r\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/36/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/36/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/35", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/35/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/35/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/35/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/35", "id": 2526739831, "node_id": "PR_kwDOLs5B3c57iNa1", "number": 35, "title": "bug: ensure delegated account contains the correct data after undelegation", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-09-15T04:57:50Z", "updated_at": "2024-09-15T06:27:25Z", "closed_at": "2024-09-15T06:27:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/35", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/35", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/35.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/35.patch", "merged_at": "2024-09-15T06:27:20Z"}, "body": "## Description\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready| Feature/Bug | No | #34 |\r\n\r\nEnsure delegated account contains the correct data after undelegation\r\n\r\n## Issues\r\n\r\nCloses #34 \r\n\r\n<!-- greptile_comment -->\r\n\r\n## Greptile Summary\r\n\r\nThis pull request addresses a critical security issue in the undelegation process, ensuring that the delegated account's state is correctly restored after undelegation.\r\n\r\n- Added verification step in `src/processor/undelegate.rs` to compare delegated account data with expected data after CPI\r\n- Updated function documentation in `src/processor/undelegate.rs` to reflect the new verification process\r\n- Improved error handling by returning `ProgramError::InvalidAccountData` if verification fails\r\n- Ensured proper cleanup of accounts by closing PDAs after successful undelegation\r\n- Maintained compatibility with existing tests while addressing the security vulnerability\r\n\r\n<!-- /greptile_comment -->", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/35/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/35/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/33", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/33/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/33/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/33/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/33", "id": 2501388943, "node_id": "PR_kwDOLs5B3c56L4fa", "number": 33, "title": "feat: Move delegation_slot from delegation_metadata to delegation_record", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-09-02T17:43:00Z", "updated_at": "2024-09-02T19:45:51Z", "closed_at": "2024-09-02T19:45:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/33", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/33", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/33.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/33.patch", "merged_at": "2024-09-02T19:45:47Z"}, "body": "## Move `delegation_slot` from  the `delegation_metadata` to `delegation_record`\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Refactor | Yes | - |\r\n\r\n## Problem\r\n\r\n`delegation_slot` is as useful information at cloning time, e.g. it allows to detect if accounts was redelegated\r\n\r\n## Solution\r\n\r\nMove `delegation_slot` from the `delegation_metadata` (delegation informations not needed at cloning time) to the `delegation_record`", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/33/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/33/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/30", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/30/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/30/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/30/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/30", "id": 2476587684, "node_id": "PR_kwDOLs5B3c546Ius", "number": 30, "title": "Settling lamports", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-08-20T21:44:51Z", "updated_at": "2024-11-08T09:41:13Z", "closed_at": "2024-11-08T09:41:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/30", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/30", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/30.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/30.patch", "merged_at": "2024-11-08T09:41:10Z"}, "body": "# Settling lamports\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | Yes | - |\r\n\r\n## Problem\r\n\r\n- Allows lamports to be committed and settled on finalization/undelegation\r\n- Allows whitelisting of validators\r\n- Several bug fixes, refactoring and increased unit tests coverage \r\n\r\n## Issues\r\n\r\nCloses #29 \r\nCloses #32 \r\nCloses #31 ", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/30/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/30/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/28", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/28/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/28/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/28/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/28", "id": 2471734892, "node_id": "PR_kwDOLs5B3c54pqnT", "number": 28, "title": "Add commit slot index and allow undelegation flag", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-08-18T01:20:34Z", "updated_at": "2024-08-18T02:50:03Z", "closed_at": "2024-08-18T02:50:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/28", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/28", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/28.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/28.patch", "merged_at": "2024-08-18T02:50:00Z"}, "body": "# Add commit slot index and allow undelegation flag\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature/Bug | Yes | #24 #27  |\r\n\r\n## Problem\r\n\r\nSee #24 and #27 \r\n\r\n## Issues\r\n\r\nCloses #24\r\nCloses #27 ", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/28/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/28/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/26", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/26/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/26/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/26/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/26", "id": 2457926220, "node_id": "PR_kwDOLs5B3c538vqr", "number": 26, "title": "chore: Remove client integration sdk, moved to an independent repo", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-08-09T13:29:50Z", "updated_at": "2024-08-10T12:37:25Z", "closed_at": "2024-08-10T12:37:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/26", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/26", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/26.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/26.patch", "merged_at": "2024-08-10T12:37:22Z"}, "body": "# Remove client integration sdk, moved to an independent repo\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Refactor | No | - |\r\n\r\n## Description\r\n\r\n- Move the client integrations SDK to: https://github.com/magicblock-labs/ephemeral-rollups-sdk\r\n- SDK to include CPI to `delegate`, `undelegate` and `commit` are now maintained in the new repo\r\n- Helpers client SDK (utils to derive PDAs) are also moved to the new repo (js, rust) ", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/26/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/26/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/25", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/25/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/25/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/25/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/25", "id": 2433438341, "node_id": "PR_kwDOLs5B3c52pKND", "number": 25, "title": "feat: minimal rust delegate SDK", "user": {"login": "thlorenz", "id": 192891, "node_id": "MDQ6VXNlcjE5Mjg5MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/192891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thlorenz", "html_url": "https://github.com/thlorenz", "followers_url": "https://api.github.com/users/thlorenz/followers", "following_url": "https://api.github.com/users/thlorenz/following{/other_user}", "gists_url": "https://api.github.com/users/thlorenz/gists{/gist_id}", "starred_url": "https://api.github.com/users/thlorenz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thlorenz/subscriptions", "organizations_url": "https://api.github.com/users/thlorenz/orgs", "repos_url": "https://api.github.com/users/thlorenz/repos", "events_url": "https://api.github.com/users/thlorenz/events{/privacy}", "received_events_url": "https://api.github.com/users/thlorenz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-07-27T11:31:19Z", "updated_at": "2024-07-29T09:20:56Z", "closed_at": "2024-07-29T09:20:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/25", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/25", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/25.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/25.patch", "merged_at": "2024-07-29T09:20:55Z"}, "body": "## Summary\n\nInitial minimal Rust SDK for account delegation.\n\n## Details\n\nWe don't have a Rust SDK at all at this point so here I added the minimum to make this somewhat\nergonomic to use.\n\nWith the added methods I can do the following to get the correctly initialized account metas\nto include in the accounts sent to the wrapper instruction.\n\n```rs\nlet (pda, _) = pda_and_bump(&player);\n\nlet delegate_accounts = DelegateAccounts::new(pda, program_id);\nlet delegate_metas = DelegateAccountMetas::from(delegate_accounts);\nlet account_metas = vec![\n    AccountMeta::new(player, true),\n    delegate_metas.delegate_account,\n    delegate_metas.owner_program,\n    delegate_metas.buffer,\n    delegate_metas.delegation_record,\n    delegate_metas.delegation_metadata,\n    delegate_metas.delegation_program,\n    delegate_metas.system_program,\n];\n```\n\n## Remaining\n\nThe PDA derivation and `consts` have been copied for now with a note that we need to either\nmove those into a core module or have the program use them via the sdk.\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/25/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/25/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/23", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/23/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/23/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/23/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/23", "id": 2378583796, "node_id": "PR_kwDOLs5B3c5zy7AY", "number": 23, "title": ":recycle: Add instruction to manual commit trough CPI ", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-06-27T16:16:26Z", "updated_at": "2024-06-27T16:52:19Z", "closed_at": "2024-06-27T16:52:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/23", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/23", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/23.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/23.patch", "merged_at": "2024-06-27T16:52:17Z"}, "body": "# :recycle: Add instruction to manual commit trough CPI \r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n\r\n## Description\r\n\r\nAdd the instruction to trigger a manual commit trough CPI.\r\n\r\n## Notes\r\n\r\nIntegration tests using the MagicBlock validator need to be added in order to properly test this instruction. ", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/23/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/23/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/22", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/22/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/22/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/22/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/22", "id": 2374484400, "node_id": "PR_kwDOLs5B3c5zlqza", "number": 22, "title": "Feat/add allow undelegation through cpi", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-06-26T06:41:17Z", "updated_at": "2024-06-26T07:24:06Z", "closed_at": "2024-06-26T07:24:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/22", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/22", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/22.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/22.patch", "merged_at": "2024-06-26T07:24:03Z"}, "body": "# Add allow undelegation through cpi\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | Yes | - |\r\n\r\n## Problem\r\n\r\n- Previously it was impossible to control trough the delegating program when undelegation is allowed. \r\n\r\n## Solution\r\n\r\n- Added an `is_undelegatable` that needs to be set trough CPI by the owner program\r\n\r\n\r\n## Other changes (e.g. bug fixes, small refactors)\r\n\r\n- Restructured delegation record PDA to hold less data and created a delegation metadata PDA borsh serialized to store delegation validity & is_undelegatable flag", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/22/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/22/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/21", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/21/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/21/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/21/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/21", "id": 2364879971, "node_id": "PR_kwDOLs5B3c5zGN3A", "number": 21, "title": ":sparkles: Add manual commit to ts SDK", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-06-20T16:58:31Z", "updated_at": "2024-06-20T18:05:15Z", "closed_at": "2024-06-20T18:05:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/21", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/21", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/21.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/21.patch", "merged_at": "2024-06-20T18:05:10Z"}, "body": "# Add manual commit instruction to the typescript SDK\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/21/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/21/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/20", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/20/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/20/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/20/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/20", "id": 2353028338, "node_id": "PR_kwDOLs5B3c5ydroX", "number": 20, "title": ":sparkles: Allow undelegation if no commitment exists", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-06-14T10:09:40Z", "updated_at": "2024-06-14T10:40:20Z", "closed_at": "2024-06-14T10:40:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/20", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/20", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/20.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/20.patch", "merged_at": "2024-06-14T10:40:15Z"}, "body": "# :sparkles: Allow undelegation if no commitment exists\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature/Hotfix | Yes | - |\r\n\r\n## Problem\r\n\r\nThe current implementation of the Ephemeral Rollups commits and finalizes in a single atomic transaction. The undelegation was only allowing the change of owner upon finalizing a committed state. This made it impossible to undelegate with the current implementation.\r\n\r\n## Solution\r\n\r\nAllow undelegation if there is no committed state.\r\n\r\n## Notes\r\n\r\nTo be revised once the commit/finalize process is split for implementing the fraud proof mechanism.", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/20/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/20/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/19", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/19/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/19/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/19/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/19", "id": 2350396462, "node_id": "PR_kwDOLs5B3c5yUuup", "number": 19, "title": ":sparkles: Add Rust and Typescript SDKs", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-06-13T07:39:41Z", "updated_at": "2024-06-13T15:14:25Z", "closed_at": "2024-06-13T15:14:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/19", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/19", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/19.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/19.patch", "merged_at": "2024-06-13T15:14:21Z"}, "body": "# Add Rust and Typescript SDKs\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n\r\n## Description\r\n\r\nAdd Rust and Typescript SDK to interact with the delegation program", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/19/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/19/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/18", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/18/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/18/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/18/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/18", "id": 2335312405, "node_id": "PR_kwDOLs5B3c5xhcr-", "number": 18, "title": ":sparkles: Update Integration Tests", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-06-05T09:02:29Z", "updated_at": "2024-06-05T09:21:29Z", "closed_at": "2024-06-05T09:21:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/18", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/18", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/18.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/18.patch", "merged_at": "2024-06-05T09:21:26Z"}, "body": "# Update Integration Tests\r\n\r\n- Update integration tests to use the latest sdk library", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/18/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/18/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/17", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/17/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/17/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/17/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/17", "id": 2321880341, "node_id": "PR_kwDOLs5B3c5wzxWk", "number": 17, "title": ":sparkles: Add configurable delegate", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-28T20:36:22Z", "updated_at": "2024-05-29T07:35:09Z", "closed_at": "2024-05-29T07:35:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/17", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/17", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/17.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/17.patch", "merged_at": "2024-05-29T07:35:05Z"}, "body": "# Add configurable delegate\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n\r\n## Description\r\n\r\nAdd configuration to the sdk delegation helper ", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/17/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/17/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/16", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/16/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/16/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/16/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/16", "id": 2317589091, "node_id": "PR_kwDOLs5B3c5wlQsD", "number": 16, "title": ":bug: Fix seeds account space allocation", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-26T08:47:36Z", "updated_at": "2024-05-26T17:27:40Z", "closed_at": "2024-05-26T17:27:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/16", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/16", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/16.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/16.patch", "merged_at": "2024-05-26T17:27:37Z"}, "body": "# :bug: Fix seeds account space allocation\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready| Bug | No | - |\r\n\r\n## Problem\r\n\r\nIncorrect allocated space for the seeds pda", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/16/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/16/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/15", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/15/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/15/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/15/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/15", "id": 2317277226, "node_id": "PR_kwDOLs5B3c5wkNVZ", "number": 15, "title": ":recycle: Simplify transaction builder", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-25T22:26:26Z", "updated_at": "2024-05-25T22:55:59Z", "closed_at": "2024-05-25T22:55:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/15", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/15", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/15.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/15.patch", "merged_at": "2024-05-25T22:55:57Z"}, "body": "# :recycle: Simplify transaction builder\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Refactor | No | - |\r\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/15/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/15/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/14", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/14/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/14/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/14/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/14", "id": 2316905488, "node_id": "PR_kwDOLs5B3c5wi-zP", "number": 14, "title": ":recycle: Refactor integration to use an external create", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-25T10:22:54Z", "updated_at": "2024-05-25T15:46:36Z", "closed_at": "2024-05-25T15:46:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/14", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/14", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/14.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/14.patch", "merged_at": "2024-05-25T15:46:32Z"}, "body": "# :recycle: Refactor integration to use an external create", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/14/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/14/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/13", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/13/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/13/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/13/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/13", "id": 2314959089, "node_id": "PR_kwDOLs5B3c5wcOyP", "number": 13, "title": ":sparkles: Store delegated account seeds", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-24T09:50:45Z", "updated_at": "2024-05-24T13:03:51Z", "closed_at": "2024-05-24T13:03:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/13", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/13", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/13.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/13.patch", "merged_at": "2024-05-24T13:03:47Z"}, "body": "# :sparkles: Store delegated account seeds\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | Yes | - |\r\n\r\n## Description\r\n\r\n- This allow to undelegate without the need to explicitly hardcode the seeds \r\n- Seeds are stored in a pda at delegation time, so that the account can be closed and reopened with the original data\r\n\r\n## Other changes\r\n- Refactoring & removed Shank dependency", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/13/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/13/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/12", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/12/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/12/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/12", "id": 2308722875, "node_id": "PR_kwDOLs5B3c5wGzpW", "number": 12, "title": ":sparkles: Refactor integration test", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-21T16:56:06Z", "updated_at": "2024-05-21T19:32:50Z", "closed_at": "2024-05-21T19:32:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/12", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/12", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/12.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/12.patch", "merged_at": "2024-05-21T19:32:47Z"}, "body": "# :sparkles: Refactor integration test\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/12/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/12/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/11", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/11/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/11/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/11/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/11", "id": 2307968568, "node_id": "PR_kwDOLs5B3c5wENoT", "number": 11, "title": ":sparkles: Refactor naming & optional dependencies", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-21T10:39:06Z", "updated_at": "2024-05-21T15:58:04Z", "closed_at": "2024-05-21T15:58:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/11", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/11", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/11.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/11.patch", "merged_at": "2024-05-21T15:58:01Z"}, "body": "# Refactoring naming & set shank and solana-security as optional\r\n\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature  | No | - |", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/11/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/11/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/9", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/9/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/9/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/9", "id": 2304744406, "node_id": "PR_kwDOLs5B3c5v5MxJ", "number": 9, "title": ":sparkles: Rename origin to owner", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-19T19:16:25Z", "updated_at": "2024-05-19T21:16:21Z", "closed_at": "2024-05-19T21:16:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/9", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/9", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/9.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/9.patch", "merged_at": "2024-05-19T21:16:18Z"}, "body": "# :sparkles: Rename origin to owner\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | No | - |\r\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/9/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/9/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/8", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/8/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/8/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/8/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/8", "id": 2304709894, "node_id": "PR_kwDOLs5B3c5v5GLV", "number": 8, "title": ":sparkles: Update external undelegate discriminator", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-19T17:36:28Z", "updated_at": "2024-05-19T18:15:50Z", "closed_at": "2024-05-19T18:15:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/8", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/8", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/8.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/8.patch", "merged_at": "2024-05-19T18:15:47Z"}, "body": "# :sparkles: Update external undelegate discriminator\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature  | No | - |", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/8/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/8/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/7", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/7/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/7/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/7", "id": 2296447312, "node_id": "PR_kwDOLs5B3c5vdFah", "number": 7, "title": ":sparkles: Add finalize state instruction", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-14T21:32:06Z", "updated_at": "2024-05-14T22:14:03Z", "closed_at": "2024-05-14T22:14:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/7", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/7", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/7.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/7.patch", "merged_at": "2024-05-14T22:14:00Z"}, "body": "# Add finalize state instruction\r\n\r\n-  Add instruction to finalize the state without undelegating the account\r\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/7/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/7/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/6", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/6/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/6/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/6/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/6", "id": 2292744877, "node_id": "PR_kwDOLs5B3c5vQT2A", "number": 6, "title": ":sparkles: Delegate in a single instruction & Refactor", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-13T12:55:19Z", "updated_at": "2024-05-14T16:10:46Z", "closed_at": "2024-05-14T16:10:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/6", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/6", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/6.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/6.patch", "merged_at": "2024-05-14T16:10:41Z"}, "body": "# Delegate in a single instruction & Refactor\r\n\r\n- Update delegate instruction to be executed in a single transaction\r\n- We no longer need a separate buffer account, the \"original\" data is now hold in the same PDA (with owner set to the delegation program), until it's undelegated and some proposed state_diff finalized\r\n- Add integration tests, with an external Bolt program using the delegation program\r\n- Add update_frequency_ms in the delegation record pda", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/6/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/6/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/5", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/5/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/5/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/5", "id": 2275209782, "node_id": "PR_kwDOLs5B3c5uV33A", "number": 5, "title": ":recycle: Add Undelegate", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2024-05-02T10:46:50Z", "updated_at": "2024-05-09T13:32:12Z", "closed_at": "2024-05-09T13:32:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/5", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/5", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/5.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/5.patch", "merged_at": "2024-05-09T13:32:08Z"}, "body": "# Add Undelegate\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | Yes | - |\r\n\r\n## Description\r\n\r\nImplement account undelegation\r\n\r\n## Issues\r\n\r\ncloses #4", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/5/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/5/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/2", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/2/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/2/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/2", "id": 2273702003, "node_id": "PR_kwDOLs5B3c5uQvg7", "number": 2, "title": ":sparkles: Commit state", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-01T15:30:02Z", "updated_at": "2024-05-02T10:40:37Z", "closed_at": "2024-05-02T10:40:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/2", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/2", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/2.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/2.patch", "merged_at": "2024-05-02T10:40:34Z"}, "body": "# :sparkles: Commit state\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Ready | Feature | Yes | - |\r\n\r\n## Description\r\n\r\nImplement commit state instruction in the delation program\r\n\r\n## Issues\r\n\r\nCloses #3\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/2/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/2/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/1", "repository_url": "https://api.github.com/repos/magicblock-labs/delegation-program", "labels_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/1/comments", "events_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/1/events", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/1", "id": 2252816692, "node_id": "PR_kwDOLs5B3c5tKcRQ", "number": 1, "title": "Pda delegation", "user": {"login": "GabrielePicco", "id": 12031208, "node_id": "MDQ6VXNlcjEyMDMxMjA4", "avatar_url": "https://avatars.githubusercontent.com/u/12031208?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GabrielePicco", "html_url": "https://github.com/GabrielePicco", "followers_url": "https://api.github.com/users/GabrielePicco/followers", "following_url": "https://api.github.com/users/GabrielePicco/following{/other_user}", "gists_url": "https://api.github.com/users/GabrielePicco/gists{/gist_id}", "starred_url": "https://api.github.com/users/GabrielePicco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GabrielePicco/subscriptions", "organizations_url": "https://api.github.com/users/GabrielePicco/orgs", "repos_url": "https://api.github.com/users/GabrielePicco/repos", "events_url": "https://api.github.com/users/GabrielePicco/events{/privacy}", "received_events_url": "https://api.github.com/users/GabrielePicco/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-04-19T12:09:06Z", "updated_at": "2024-05-01T14:10:39Z", "closed_at": "2024-05-01T14:10:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/pulls/1", "html_url": "https://github.com/magicblock-labs/delegation-program/pull/1", "diff_url": "https://github.com/magicblock-labs/delegation-program/pull/1.diff", "patch_url": "https://github.com/magicblock-labs/delegation-program/pull/1.patch", "merged_at": "2024-05-01T14:10:35Z"}, "body": "# Feat/pda delegation\r\n\r\n| Status  | Type  | \u26a0\ufe0f Core Change | Issue |\r\n| :---: | :---: | :---: | :--: |\r\n| Hold | Feature | Yes | - |\r\n\r\n## Implement Pda delegation", "reactions": {"url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/1/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/magicblock-labs/delegation-program/issues/1/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]