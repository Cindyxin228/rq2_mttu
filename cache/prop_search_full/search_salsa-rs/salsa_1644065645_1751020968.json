[{"url": "https://api.github.com/repos/salsa-rs/salsa/issues/927", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/927/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/927/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/927/events", "html_url": "https://github.com/salsa-rs/salsa/pull/927", "id": 3178582827, "node_id": "PR_kwDOCPxbTc6cNVJ-", "number": 927, "title": "Emit self ty for query debug name of assoc function queries", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-06-26T10:08:23Z", "updated_at": "2025-06-28T20:25:11Z", "closed_at": "2025-06-27T09:33:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/927", "html_url": "https://github.com/salsa-rs/salsa/pull/927", "diff_url": "https://github.com/salsa-rs/salsa/pull/927.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/927.patch", "merged_at": "2025-06-27T09:33:47Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/927/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/927/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/925", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/925/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/925/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/925/events", "html_url": "https://github.com/salsa-rs/salsa/pull/925", "id": 3169889297, "node_id": "PR_kwDOCPxbTc6bwc0m", "number": 925, "title": "Add option to track heap memory usage of memos", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-24T01:02:31Z", "updated_at": "2025-06-25T20:36:26Z", "closed_at": "2025-06-25T20:36:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/925", "html_url": "https://github.com/salsa-rs/salsa/pull/925", "diff_url": "https://github.com/salsa-rs/salsa/pull/925.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/925.patch", "merged_at": "2025-06-25T20:36:26Z"}, "body": "`#[salsa::tracked(heap_size)]` will require the return type of a tracked function to implement the [`get_size2::GetSize`](https://docs.rs/get-size2/latest/get_size2/trait.GetSize.html) trait, and include the heap size in the new memory usage APIs. I'm not sure `get-size2` is the best crate to use, but it seems relatively comprehensive, and integrating it into ty was relatively simple with its derive macros. Note that it's not actually a dependency of salsa, it's just called by the generated proc-macro code.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/925/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/921", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/921/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/921/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/921/events", "html_url": "https://github.com/salsa-rs/salsa/pull/921", "id": 3161797797, "node_id": "PR_kwDOCPxbTc6bVhP1", "number": 921, "title": "Replace ingredient cache with faster ingredient map", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2025-06-20T03:18:55Z", "updated_at": "2025-06-27T07:31:27Z", "closed_at": "2025-06-27T07:31:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/921", "html_url": "https://github.com/salsa-rs/salsa/pull/921", "diff_url": "https://github.com/salsa-rs/salsa/pull/921.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/921.patch", "merged_at": "2025-06-27T07:31:27Z"}, "body": "An alternative to https://github.com/salsa-rs/salsa/pull/919, this uses a lock-free map for ingredient access instead of `DashMap`. It looks like this isn't fast enough to get rid of the `IngredientCache` entirely, but it's pretty close. I also added a fast-path that avoids checking for the view downcaster if the ingredient has already been registered. This will make the slow-path slower, but that only matters the first time the query is called on a given database.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/921/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/917", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/917/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/917/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/917/events", "html_url": "https://github.com/salsa-rs/salsa/pull/917", "id": 3153962076, "node_id": "PR_kwDOCPxbTc6a7Saa", "number": 917, "title": "Hide generated structs of tracked functions from docs via `#[doc(hidden)]`", "user": {"login": "regexident", "id": 138017, "node_id": "MDQ6VXNlcjEzODAxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/138017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/regexident", "html_url": "https://github.com/regexident", "followers_url": "https://api.github.com/users/regexident/followers", "following_url": "https://api.github.com/users/regexident/following{/other_user}", "gists_url": "https://api.github.com/users/regexident/gists{/gist_id}", "starred_url": "https://api.github.com/users/regexident/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/regexident/subscriptions", "organizations_url": "https://api.github.com/users/regexident/orgs", "repos_url": "https://api.github.com/users/regexident/repos", "events_url": "https://api.github.com/users/regexident/events{/privacy}", "received_events_url": "https://api.github.com/users/regexident/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-17T15:43:12Z", "updated_at": "2025-06-25T15:10:27Z", "closed_at": "2025-06-25T11:30:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/917", "html_url": "https://github.com/salsa-rs/salsa/pull/917", "diff_url": "https://github.com/salsa-rs/salsa/pull/917.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/917.patch", "merged_at": "2025-06-25T11:30:44Z"}, "body": "Salsa also supports tracked methods and tracked associated methods, neither of which produce equivalent user-observable structs, so arguably neither should track functions, and the generated structs don't really provide a usable API anyway.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/917/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/916", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/916/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/916/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/916/events", "html_url": "https://github.com/salsa-rs/salsa/pull/916", "id": 3150790691, "node_id": "PR_kwDOCPxbTc6awmxu", "number": 916, "title": "Add API to dump memory usage", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2025-06-16T17:47:30Z", "updated_at": "2025-06-20T17:26:31Z", "closed_at": "2025-06-20T17:26:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/916", "html_url": "https://github.com/salsa-rs/salsa/pull/916", "diff_url": "https://github.com/salsa-rs/salsa/pull/916.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/916.patch", "merged_at": "2025-06-20T17:26:30Z"}, "body": "This PR adds the methods `<dyn Database>::{structs_info, queries_info}`, which allow accessing memory usage information about salsa structs and memos. In ty, this lets us generate a report that looks like this:\r\n\r\n```\r\n=======SALSA DUMP=======\r\n`Definition`                                       metadata=7.21MB   fields=14.41MB  count=180134\r\n`Expression`                                       metadata=4.42MB   fields=4.42MB   count=92086\r\n`member_lookup_with_policy_::interned_arguments`   metadata=1.94MB   fields=2.21MB   count=34566\r\n`class_member_with_policy_::interned_arguments`    metadata=1.56MB   fields=1.78MB   count=27820\r\n`IntersectionType`                                 metadata=0.75MB   fields=1.50MB   count=13350\r\n`OverloadLiteral`                                  metadata=1.19MB   fields=0.85MB   count=21181\r\n...\r\n`Definition -> ty_python_semantic::types::infer::TypeInference`\r\n    metadata=24.41MB  fields=32.41MB  count=144690\r\n`Expression -> ty_python_semantic::types::infer::TypeInference`\r\n    metadata=28.34MB  fields=17.95MB  count=80115\r\n`ScopeId -> ty_python_semantic::types::infer::TypeInference`\r\n    metadata=14.34MB  fields=6.31MB   count=28170\r\n`member_lookup_with_policy_::interned_arguments -> ty_python_semantic::place::PlaceAndQualifiers`\r\n    metadata=4.92MB   fields=1.66MB   count=34566\r\n...\r\n```\r\n\r\nOne current limitation is that we cannot provide the name of the query function, only it's input and output types. The other is that this only reports the stack size of any struct fields, which makes this a lot less useful for anything even wrapped trivially in a `Box` or `Arc`. Ideally we would have some way of asking a type for it's heap allocation size (maybe using something like the [`get-size`](https://docs.rs/get-size/latest/get_size/) crate), but it would likely have to be opt-in to avoid breakage, and I'm not sure exactly how that would look (maybe a macro attribute, or feature flag?).\r\n\r\nI'm not sure how others have been profiling salsa-related memory usage, but the above report has been extremely useful for us. Also unsure if this should be under the `salsa_unstable` feature.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/916/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/915", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/915/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/915/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/915/events", "html_url": "https://github.com/salsa-rs/salsa/pull/915", "id": 3145449200, "node_id": "PR_kwDOCPxbTc6afeuD", "number": 915, "title": "Revert \"Assert size for interned Value\" & Mark `Slot` trait as unsafe", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-06-14T05:27:51Z", "updated_at": "2025-06-15T04:58:12Z", "closed_at": "2025-06-15T04:58:12Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/915", "html_url": "https://github.com/salsa-rs/salsa/pull/915", "diff_url": "https://github.com/salsa-rs/salsa/pull/915.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/915.patch", "merged_at": "2025-06-15T04:58:12Z"}, "body": "This reverts commit 793dc41.\r\ncc https://github.com/salsa-rs/salsa/pull/901/files#r2146090617", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/915/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/915/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/913", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/913/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/913/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/913/events", "html_url": "https://github.com/salsa-rs/salsa/pull/913", "id": 3139019798, "node_id": "PR_kwDOCPxbTc6aJoWV", "number": 913, "title": "Use explicit discriminants for `QueryOriginKind` for better comparisons", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-12T06:34:50Z", "updated_at": "2025-06-12T18:41:54Z", "closed_at": "2025-06-12T18:41:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/913", "html_url": "https://github.com/salsa-rs/salsa/pull/913", "diff_url": "https://github.com/salsa-rs/salsa/pull/913.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/913.patch", "merged_at": "2025-06-12T18:41:54Z"}, "body": "This won't really have an observable effect as its really micro-optimizing the tiniest thing ever, but given we already have a very specialized layout here we might as well push it to the limits.\r\n\r\nThis means if comparing for either `Derived` and `DerivedUntracked` in the same branch, instead of getting\r\n```asm\r\n        cmp     dil, 3\r\n        sete    cl\r\n        test    dil, dil\r\n        sete    al\r\n        or      al, cl\r\n```\r\nwe get\r\n```asm\r\n        cmp     dil, 2\r\n        setae   al\r\n```\r\nas we now only need to check a single bit", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/913/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/913/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/912", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/912/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/912/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/912/events", "html_url": "https://github.com/salsa-rs/salsa/pull/912", "id": 3138221759, "node_id": "PR_kwDOCPxbTc6aG8v7", "number": 912, "title": "Fix race in `MemoTableTypes`", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-11T22:03:17Z", "updated_at": "2025-06-12T04:34:17Z", "closed_at": "2025-06-12T04:34:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/912", "html_url": "https://github.com/salsa-rs/salsa/pull/912", "diff_url": "https://github.com/salsa-rs/salsa/pull/912.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/912.patch", "merged_at": "2025-06-12T04:34:17Z"}, "body": "Noticed this while reading the code. `boxcar::Vec::count` does not guarantee that there are `N` contiguous entries initialized, which the current code is assuming. It seems fine to just spin here because, from what I understand, `MemoTableTypes` is only setup the first time a query is called? I also don't think we've ever seen this bug in practice.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/912/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/911", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/911/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/911/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/911/events", "html_url": "https://github.com/salsa-rs/salsa/pull/911", "id": 3138157520, "node_id": "PR_kwDOCPxbTc6aGukl", "number": 911, "title": "Add an option to tune interned garbage collection", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-06-11T21:26:31Z", "updated_at": "2025-06-13T06:28:32Z", "closed_at": "2025-06-13T06:28:32Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/911", "html_url": "https://github.com/salsa-rs/salsa/pull/911", "diff_url": "https://github.com/salsa-rs/salsa/pull/911.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/911.patch", "merged_at": "2025-06-13T06:28:32Z"}, "body": "Adds the ability to tune and disable interned value garbage collection via an attribute:\r\n\r\n```rust\r\n#[salsa::interned(revisions = <1 | 2 | ... | usize::MAX>)]\r\nstruct Interned<'db>;\r\n```\r\n\r\n`revisions` is the minimum number of active revisions that must pass before a stale value is considered for garbage collection. Note that an *active revision* is one in which an instance of the interned struct has been read, so consecutive writes that create new revisions in sequence do not invalidate all interned values. Currently this constant is hard-coded to 3 internally for no good reason. Setting it to `usize::MAX` will disable garbage collection altogether (cc @Veykril).\r\n\r\nI'm torn on whether to hard-code `usize::MAX` as the immortal value or to make that more explicit, e.g. `salsa::interned(durability = \"immortal\")` or `salsa::interned(immortal)`.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/911/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/910", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/910/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/910/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/910/events", "html_url": "https://github.com/salsa-rs/salsa/pull/910", "id": 3137899129, "node_id": "PR_kwDOCPxbTc6aF1N7", "number": 910, "title": "Update boxcar", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-11T19:32:05Z", "updated_at": "2025-06-11T20:50:34Z", "closed_at": "2025-06-11T20:50:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/910", "html_url": "https://github.com/salsa-rs/salsa/pull/910", "diff_url": "https://github.com/salsa-rs/salsa/pull/910.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/910.patch", "merged_at": "2025-06-11T20:50:33Z"}, "body": "Pulls in a bugfix that I believe is causing https://github.com/astral-sh/ty/issues/115.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/910/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/908", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/908/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/908/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/908/events", "html_url": "https://github.com/salsa-rs/salsa/pull/908", "id": 3134961712, "node_id": "PR_kwDOCPxbTc6Z7z8i", "number": 908, "title": "Use latest revision for dependencies on interned values", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-10T22:14:16Z", "updated_at": "2025-06-11T09:50:37Z", "closed_at": "2025-06-11T06:12:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/908", "html_url": "https://github.com/salsa-rs/salsa/pull/908", "diff_url": "https://github.com/salsa-rs/salsa/pull/908.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/908.patch", "merged_at": "2025-06-11T06:12:50Z"}, "body": "Resolved https://github.com/salsa-rs/salsa/issues/904.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/908/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/907", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/907/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/907/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/907/events", "html_url": "https://github.com/salsa-rs/salsa/pull/907", "id": 3134630394, "node_id": "PR_kwDOCPxbTc6Z6r6r", "number": 907, "title": "Remove high-durability values from interned LRU", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-06-10T19:23:46Z", "updated_at": "2025-06-11T05:38:33Z", "closed_at": "2025-06-11T05:38:33Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/907", "html_url": "https://github.com/salsa-rs/salsa/pull/907", "diff_url": "https://github.com/salsa-rs/salsa/pull/907.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/907.patch", "merged_at": "2025-06-11T05:38:33Z"}, "body": "As pointed out in https://github.com/salsa-rs/salsa/issues/904#issuecomment-2957128163, we have to remove values from the LRU if their durability increases.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/907/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/905", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/905/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/905/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/905/events", "html_url": "https://github.com/salsa-rs/salsa/pull/905", "id": 3128668273, "node_id": "PR_kwDOCPxbTc6ZmSsA", "number": 905, "title": "Preserve attributes on interned/tracked struct fields", "user": {"login": "puuuuh", "id": 54703480, "node_id": "MDQ6VXNlcjU0NzAzNDgw", "avatar_url": "https://avatars.githubusercontent.com/u/54703480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/puuuuh", "html_url": "https://github.com/puuuuh", "followers_url": "https://api.github.com/users/puuuuh/followers", "following_url": "https://api.github.com/users/puuuuh/following{/other_user}", "gists_url": "https://api.github.com/users/puuuuh/gists{/gist_id}", "starred_url": "https://api.github.com/users/puuuuh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/puuuuh/subscriptions", "organizations_url": "https://api.github.com/users/puuuuh/orgs", "repos_url": "https://api.github.com/users/puuuuh/repos", "events_url": "https://api.github.com/users/puuuuh/events{/privacy}", "received_events_url": "https://api.github.com/users/puuuuh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-06-08T20:15:21Z", "updated_at": "2025-06-10T06:45:03Z", "closed_at": "2025-06-10T06:45:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/905", "html_url": "https://github.com/salsa-rs/salsa/pull/905", "diff_url": "https://github.com/salsa-rs/salsa/pull/905.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/905.patch", "merged_at": "2025-06-10T06:45:02Z"}, "body": "Fixes https://github.com/salsa-rs/salsa/issues/728 and https://github.com/salsa-rs/salsa/issues/895", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/905/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/903", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/903/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/903/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/903/events", "html_url": "https://github.com/salsa-rs/salsa/pull/903", "id": 3117865249, "node_id": "PR_kwDOCPxbTc6ZBskm", "number": 903, "title": "reduce size of interned value metadata", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-04T13:32:54Z", "updated_at": "2025-06-05T05:36:45Z", "closed_at": "2025-06-05T05:36:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/903", "html_url": "https://github.com/salsa-rs/salsa/pull/903", "diff_url": "https://github.com/salsa-rs/salsa/pull/903.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/903.patch", "merged_at": "2025-06-05T05:36:45Z"}, "body": "Pointed out in https://github.com/salsa-rs/salsa/pull/839#discussion_r2126459621, this reduces the size of interned values by one word (unless the fields happen to be exactly 48 bytes). I don't really like using `repr(packed)` but it seems fine in this case, the alternative makes the code a lot messier.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/903/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/903/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/902", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/902/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/902/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/902/events", "html_url": "https://github.com/salsa-rs/salsa/pull/902", "id": 3117679749, "node_id": "PR_kwDOCPxbTc6ZBDzy", "number": 902, "title": "Use `Revision` and `Durability` directly in input `Value`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-04T12:34:43Z", "updated_at": "2025-06-04T14:35:58Z", "closed_at": "2025-06-04T14:35:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/902", "html_url": "https://github.com/salsa-rs/salsa/pull/902", "diff_url": "https://github.com/salsa-rs/salsa/pull/902.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/902.patch", "merged_at": "2025-06-04T14:35:57Z"}, "body": "`Stamp` contains a lot of padding bytes, wasting 7 bytes per field for inputs due to the array packing. By packing each field into a separate array we regain that space", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/902/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/901", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/901/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/901/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/901/events", "html_url": "https://github.com/salsa-rs/salsa/pull/901", "id": 3117632544, "node_id": "PR_kwDOCPxbTc6ZA5c5", "number": 901, "title": "Assert size for interned `Value`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-06-04T12:17:50Z", "updated_at": "2025-06-14T05:10:51Z", "closed_at": "2025-06-06T04:03:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/901", "html_url": "https://github.com/salsa-rs/salsa/pull/901", "diff_url": "https://github.com/salsa-rs/salsa/pull/901.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/901.patch", "merged_at": "2025-06-06T04:03:55Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/901/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/901/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/900", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/900/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/900/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/900/events", "html_url": "https://github.com/salsa-rs/salsa/pull/900", "id": 3117370883, "node_id": "PR_kwDOCPxbTc6Y__sj", "number": 900, "title": "Fix flaky `parallel_join` test", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-04T10:45:51Z", "updated_at": "2025-06-04T12:33:12Z", "closed_at": "2025-06-04T12:33:12Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/900", "html_url": "https://github.com/salsa-rs/salsa/pull/900", "diff_url": "https://github.com/salsa-rs/salsa/pull/900.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/900.patch", "merged_at": "2025-06-04T12:33:12Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/900/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/899", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/899/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/899/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/899/events", "html_url": "https://github.com/salsa-rs/salsa/pull/899", "id": 3117344197, "node_id": "PR_kwDOCPxbTc6Y_512", "number": 899, "title": "Bump MSRV to 1.85", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-04T10:35:23Z", "updated_at": "2025-06-04T10:53:35Z", "closed_at": "2025-06-04T10:53:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/899", "html_url": "https://github.com/salsa-rs/salsa/pull/899", "diff_url": "https://github.com/salsa-rs/salsa/pull/899.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/899.patch", "merged_at": "2025-06-04T10:53:34Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/899/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/898", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/898/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/898/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/898/events", "html_url": "https://github.com/salsa-rs/salsa/pull/898", "id": 3115879552, "node_id": "PR_kwDOCPxbTc6Y7MIU", "number": 898, "title": "panic with string message again for cycle panics", "user": {"login": "carljm", "id": 61586, "node_id": "MDQ6VXNlcjYxNTg2", "avatar_url": "https://avatars.githubusercontent.com/u/61586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carljm", "html_url": "https://github.com/carljm", "followers_url": "https://api.github.com/users/carljm/followers", "following_url": "https://api.github.com/users/carljm/following{/other_user}", "gists_url": "https://api.github.com/users/carljm/gists{/gist_id}", "starred_url": "https://api.github.com/users/carljm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carljm/subscriptions", "organizations_url": "https://api.github.com/users/carljm/orgs", "repos_url": "https://api.github.com/users/carljm/repos", "events_url": "https://api.github.com/users/carljm/events{/privacy}", "received_events_url": "https://api.github.com/users/carljm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2025-06-04T00:50:54Z", "updated_at": "2025-06-04T15:24:24Z", "closed_at": "2025-06-04T15:24:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/898", "html_url": "https://github.com/salsa-rs/salsa/pull/898", "diff_url": "https://github.com/salsa-rs/salsa/pull/898.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/898.patch", "merged_at": "2025-06-04T15:24:22Z"}, "body": "Switch back to regular panic with string message, instead of `resume_unwind` with custom payload, for cycle panics.\r\n\r\nThis avoids having the default behavior be silent panic with no information, and allows the use of a panic hook to collect additional information, if needed.\r\n\r\nIt's not clear what the use case is for catching cycle panics specifically and treating them differently from other panics; they are not more recoverable.\r\n\r\nFixes https://github.com/salsa-rs/salsa/issues/891", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/898/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/898/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/894", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/894/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/894/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/894/events", "html_url": "https://github.com/salsa-rs/salsa/pull/894", "id": 3109395246, "node_id": "PR_kwDOCPxbTc6Yle3x", "number": 894, "title": "Update dependencies, remove unused `heck` dependency", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-02T09:40:28Z", "updated_at": "2025-06-02T10:11:00Z", "closed_at": "2025-06-02T10:10:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/894", "html_url": "https://github.com/salsa-rs/salsa/pull/894", "diff_url": "https://github.com/salsa-rs/salsa/pull/894.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/894.patch", "merged_at": "2025-06-02T10:10:59Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/894/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/892", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/892/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/892/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/892/events", "html_url": "https://github.com/salsa-rs/salsa/pull/892", "id": 3105538990, "node_id": "PR_kwDOCPxbTc6YZV7U", "number": 892, "title": "Store tracked struct ids as ThinVec on Revisions", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-05-31T14:18:09Z", "updated_at": "2025-06-03T08:19:09Z", "closed_at": "2025-06-03T08:19:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/892", "html_url": "https://github.com/salsa-rs/salsa/pull/892", "diff_url": "https://github.com/salsa-rs/salsa/pull/892.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/892.patch", "merged_at": "2025-06-03T08:19:08Z"}, "body": "We don't need a map. All we use it for is to seed new ids. This helps to reduce the `QueryRevisionsExtra` size (which will make up for the regression that I introduce in https://github.com/salsa-rs/salsa/pull/882)", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/892/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/890", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/890/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/890/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/890/events", "html_url": "https://github.com/salsa-rs/salsa/pull/890", "id": 3102619965, "node_id": "PR_kwDOCPxbTc6YPjJM", "number": 890, "title": "Set `validate_final` in `execute` after removing the last cycle head", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-30T09:21:30Z", "updated_at": "2025-05-31T13:16:29Z", "closed_at": "2025-05-31T13:16:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/890", "html_url": "https://github.com/salsa-rs/salsa/pull/890", "diff_url": "https://github.com/salsa-rs/salsa/pull/890.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/890.patch", "merged_at": "2025-05-31T13:16:28Z"}, "body": "We can set `validate_final` eagerly here instead of waiting for the next `maybe_validate_provisional`\r\n\r\nI think this will help to mitigate some of the perf regression in my other PR\r\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/890/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/888", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/888/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/888/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/888/events", "html_url": "https://github.com/salsa-rs/salsa/pull/888", "id": 3101592592, "node_id": "PR_kwDOCPxbTc6YMKVM", "number": 888, "title": "Lazily allocate extra memo state", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-05-29T22:09:17Z", "updated_at": "2025-05-30T13:38:23Z", "closed_at": "2025-05-30T13:38:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/888", "html_url": "https://github.com/salsa-rs/salsa/pull/888", "diff_url": "https://github.com/salsa-rs/salsa/pull/888.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/888.patch", "merged_at": "2025-05-30T13:38:23Z"}, "body": "Similar to https://github.com/salsa-rs/salsa/pull/768, except also lazily allocating the `CycleHeads`. I did some profiling in ty, and on a cold run ~1% of memos have non-empty `CycleHeads` and ~0.5% create tracked structs, out of >2M memos on large projects. Lazily allocating saves a meaningful amount of memory for us (4 words on memos without extras) and doesn't affect performance for ty (if anything it seems to improve performance very slightly, but that may just be noise).", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/888/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/888/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/886", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/886/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/886/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/886/events", "html_url": "https://github.com/salsa-rs/salsa/pull/886", "id": 3100647266, "node_id": "PR_kwDOCPxbTc6YI6lw", "number": 886, "title": "Pack `QueryEdge` memory layout", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-29T15:12:42Z", "updated_at": "2025-05-30T13:40:13Z", "closed_at": "2025-05-30T13:40:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/886", "html_url": "https://github.com/salsa-rs/salsa/pull/886", "diff_url": "https://github.com/salsa-rs/salsa/pull/886.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/886.patch", "merged_at": "2025-05-30T13:40:13Z"}, "body": "If we reserve a bit in `IngredientIndex` we can avoid an extra discriminator byte for each `QueryEdge` in the `input_outputs` list, which is quite meaningful.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/886/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/886/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/885", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/885/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/885/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/885/events", "html_url": "https://github.com/salsa-rs/salsa/pull/885", "id": 3100448060, "node_id": "PR_kwDOCPxbTc6YIPJv", "number": 885, "title": "Pack `QueryOrigin` memory layout", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-29T13:57:47Z", "updated_at": "2025-05-29T20:09:43Z", "closed_at": "2025-05-29T20:09:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/885", "html_url": "https://github.com/salsa-rs/salsa/pull/885", "diff_url": "https://github.com/salsa-rs/salsa/pull/885.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/885.patch", "merged_at": "2025-05-29T20:09:42Z"}, "body": "Packs `QueryOrigin` into a `(u64, u32, u8)` union layout to take advantage of the padding bytes in `QueryRevisions`. This cuts down the size of memos by two words.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/885/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/884", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/884/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/884/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/884/events", "html_url": "https://github.com/salsa-rs/salsa/pull/884", "id": 3099614838, "node_id": "PR_kwDOCPxbTc6YFXSg", "number": 884, "title": "Restrict memo size assertion to targets with 64bit pointer size", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1072718939, "node_id": "MDU6TGFiZWwxMDcyNzE4OTM5", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-29T08:38:00Z", "updated_at": "2025-05-29T08:56:52Z", "closed_at": "2025-05-29T08:56:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/884", "html_url": "https://github.com/salsa-rs/salsa/pull/884", "diff_url": "https://github.com/salsa-rs/salsa/pull/884.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/884.patch", "merged_at": "2025-05-29T08:56:52Z"}, "body": "This assertion failed when building for wasm\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/884/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/883", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/883/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/883/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/883/events", "html_url": "https://github.com/salsa-rs/salsa/pull/883", "id": 3099454150, "node_id": "PR_kwDOCPxbTc6YE0Jx", "number": 883, "title": "Capture execution backtrace when throwing `UnexpectedCycle`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-05-29T07:26:56Z", "updated_at": "2025-06-03T20:14:56Z", "closed_at": "2025-06-03T19:03:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/883", "html_url": "https://github.com/salsa-rs/salsa/pull/883", "diff_url": "https://github.com/salsa-rs/salsa/pull/883.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/883.patch", "merged_at": "2025-06-03T19:03:42Z"}, "body": "cc https://github.com/salsa-rs/salsa/pull/856", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/883/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/882", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/882/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/882/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/882/events", "html_url": "https://github.com/salsa-rs/salsa/pull/882", "id": 3094542384, "node_id": "PR_kwDOCPxbTc6X0LLK", "number": 882, "title": "fix: multithreaded nested fixpoint iteration", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2025-05-27T16:38:40Z", "updated_at": "2025-06-02T09:56:07Z", "closed_at": "2025-06-01T08:55:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/882", "html_url": "https://github.com/salsa-rs/salsa/pull/882", "diff_url": "https://github.com/salsa-rs/salsa/pull/882.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/882.patch", "merged_at": "2025-06-01T08:55:31Z"}, "body": "This PR fixes two bugs related to nested fixpoint iteration that can lead threads to see incorrect results or panics due to https://github.com/salsa-rs/salsa/issues/831\r\n\r\nThe main issue with our fixpoint iteration was that it assumed that a cycle would always be entered from the same query. This is given in single-threaded environments but cycles (especially if they have nested cyles) are likely entered from different queries.\r\n\r\nThe scenario is:\r\n\r\n* thread a: has a nested loop, it iterates the outermost loop\r\n* thread b: shares an inner cycle with thread a, but uses a different entry query than thread a.\r\n\r\nThe tests push this to the extreme with 4 threads and multiple queries. Shuttle revealed multiple bugs in this scenario.\r\n\r\nCloses https://github.com/salsa-rs/salsa/issues/831\r\nCloses https://github.com/salsa-rs/salsa/issues/893\r\n\r\nHuge shoutout to @ibraheemdev for adding shuttle support. Narrowing this down without a shuttle would have been extremely hard, if not impossible. Shuttle also gives me a lot of confidence that the fixes from this PR cover most if not all cases.\r\n\r\n## Issue 1:\r\n\r\n`cycle_head_kind` only returned `Provisional` if the memo's cycle heads contained itself (it's a provisional in its own cycle). The problem with this is that (even in non multi-threaded cases) we don't re-run queries that participate in an outer cycle: Specifically, in the added test:\r\n\r\n* `query_d` depends on `query_c`'s initial value\r\n* `query_e` depends on `query_c`'s initial value\r\n* `query_c` is an inner cycle\r\n\r\nBoth queries need to be re-run if `query_c` finished (as an inner cycle) and the outer cycle starts a second iteration, which includes starting a fresh round on `query_c`. Previously, `cycle_head_kind` returned `NotProvisional` because the provisional value for `query_c` no longer contained itself in `cycle_heads`; it only contains the cycle head of the outer query. Because of that, `validate_provisional` considered `query_d` and `query_e` as final after `query_c` completed the first time (it set `verified_final` to `true`). \r\n\r\nThe fix is that any memo where `verified_final` is false should be considered provisional, and `provisional_retry` should retry (which might finalize the memos), and `validate_provisional` should return `false` (and fallback to `validate_same_iteration` or re-execute). \r\n\r\nI suspect that this is from before we had `validate_same_iteration`. This obviously leads to a significant performance regression (about 10%) because we now (correctly) run inner cycle queries more often.\r\n\r\n## Issue 2\r\n\r\nThe second issue is due to a similar problem. Thread 'a' releases the lock on the inner cycle once it reaches a final value. It then iterates the outer cycle. Thread `b` can now acquire the lock on the inner cycle. The result is that we iterate different cyles of the same outer cycle at the same time. This is problematic because the different threads can override each other's provisional values with fixpoint initial values whenever they hit a cycle. Thread b re-executes the query because the cycle heads aren't finalized (the outer cycle is still iterating), and `validate_same_iteration` will fail because thread b has a different query stack. This can lead to https://github.com/salsa-rs/salsa/issues/831. \r\n\r\nThe fix in this PR is that salsa blocks on all cycle heads before re-executing a provisional memo from the same revision.\r\n\r\n\r\n## Issue 3\r\n\r\n`validate_same_iteration` didn't work if a cycle runs on multiple threads because it only ever looked at the current query stack. This can result in hangs if the same query is re-executed repeatedly. The fix here is to look up the current memo and compare against its current iteration if requiring that memo results in a cycle with another thread, because this indicates that the two threads work on the same cycle.\r\n\r\n## Test plan\r\n\r\n* Added unit tests. I ran the tests with 10k iteration and a depth of 100 without seeing any panics or incorrect results\r\n* I verified that the r-a example form https://github.com/salsa-rs/salsa/issues/831 now passes\r\n* I verified that this fixes all known multithreaded mypy primer hangs", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/882/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/881", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/881/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/881/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/881/events", "html_url": "https://github.com/salsa-rs/salsa/pull/881", "id": 3092649116, "node_id": "PR_kwDOCPxbTc6XtuJm", "number": 881, "title": "Add debug spans for `new_revision` and `evict_lru`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-27T05:41:43Z", "updated_at": "2025-05-27T06:12:05Z", "closed_at": "2025-05-27T06:12:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/881", "html_url": "https://github.com/salsa-rs/salsa/pull/881", "diff_url": "https://github.com/salsa-rs/salsa/pull/881.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/881.patch", "merged_at": "2025-05-27T06:12:04Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/881/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/880", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/880/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/880/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/880/events", "html_url": "https://github.com/salsa-rs/salsa/pull/880", "id": 3089595689, "node_id": "PR_kwDOCPxbTc6XjfVJ", "number": 880, "title": "Allow lifetimes in arguments in tracked fns with >1 parameters", "user": {"login": "ChayimFriedman2", "id": 24700207, "node_id": "MDQ6VXNlcjI0NzAwMjA3", "avatar_url": "https://avatars.githubusercontent.com/u/24700207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChayimFriedman2", "html_url": "https://github.com/ChayimFriedman2", "followers_url": "https://api.github.com/users/ChayimFriedman2/followers", "following_url": "https://api.github.com/users/ChayimFriedman2/following{/other_user}", "gists_url": "https://api.github.com/users/ChayimFriedman2/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChayimFriedman2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChayimFriedman2/subscriptions", "organizations_url": "https://api.github.com/users/ChayimFriedman2/orgs", "repos_url": "https://api.github.com/users/ChayimFriedman2/repos", "events_url": "https://api.github.com/users/ChayimFriedman2/events{/privacy}", "received_events_url": "https://api.github.com/users/ChayimFriedman2/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-25T21:47:30Z", "updated_at": "2025-05-26T21:29:56Z", "closed_at": "2025-05-26T05:02:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/880", "html_url": "https://github.com/salsa-rs/salsa/pull/880", "diff_url": "https://github.com/salsa-rs/salsa/pull/880.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/880.patch", "merged_at": "2025-05-26T05:02:18Z"}, "body": "This is needed for @jackh726's work on the new trait solver for rust-analyzer.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/880/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/880/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/879", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/879/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/879/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/879/events", "html_url": "https://github.com/salsa-rs/salsa/pull/879", "id": 3089158639, "node_id": "PR_kwDOCPxbTc6XiJvt", "number": 879, "title": "Don't report stale outputs if there is newer generation in new_outputs", "user": {"login": "puuuuh", "id": 54703480, "node_id": "MDQ6VXNlcjU0NzAzNDgw", "avatar_url": "https://avatars.githubusercontent.com/u/54703480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/puuuuh", "html_url": "https://github.com/puuuuh", "followers_url": "https://api.github.com/users/puuuuh/followers", "following_url": "https://api.github.com/users/puuuuh/following{/other_user}", "gists_url": "https://api.github.com/users/puuuuh/gists{/gist_id}", "starred_url": "https://api.github.com/users/puuuuh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/puuuuh/subscriptions", "organizations_url": "https://api.github.com/users/puuuuh/orgs", "repos_url": "https://api.github.com/users/puuuuh/repos", "events_url": "https://api.github.com/users/puuuuh/events{/privacy}", "received_events_url": "https://api.github.com/users/puuuuh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-25T09:07:14Z", "updated_at": "2025-05-27T17:53:11Z", "closed_at": "2025-05-27T17:53:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/879", "html_url": "https://github.com/salsa-rs/salsa/pull/879", "diff_url": "https://github.com/salsa-rs/salsa/pull/879.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/879.patch", "merged_at": "2025-05-27T17:53:11Z"}, "body": "Fixes #878", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/879/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/877", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/877/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/877/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/877/events", "html_url": "https://github.com/salsa-rs/salsa/pull/877", "id": 3086574549, "node_id": "PR_kwDOCPxbTc6XZfbY", "number": 877, "title": "chore: release v0.23.0", "user": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-05-23T14:29:41Z", "updated_at": "2025-06-27T09:40:56Z", "closed_at": "2025-06-27T09:40:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/877", "html_url": "https://github.com/salsa-rs/salsa/pull/877", "diff_url": "https://github.com/salsa-rs/salsa/pull/877.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/877.patch", "merged_at": "2025-06-27T09:40:54Z"}, "body": "\n\n\n## \ud83e\udd16 New release\n\n* `salsa-macro-rules`: 0.22.0 -> 0.23.0 (\u2713 API compatible changes)\n* `salsa-macros`: 0.22.0 -> 0.23.0\n* `salsa`: 0.22.0 -> 0.23.0 (\u26a0 API breaking changes)\n\n### \u26a0 `salsa` breaking changes\n\n```text\n--- failure enum_variant_added: enum variant added on exhaustive enum ---\n\nDescription:\nA publicly-visible enum without #[non_exhaustive] has a new variant.\n        ref: https://doc.rust-lang.org/cargo/reference/semver.html#enum-variant-new\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/enum_variant_added.ron\n\nFailed in:\n  variant EventKind:DidReuseInternedValue in /tmp/.tmpObWICA/salsa/src/event.rs:112\n  variant EventKind:DidValidateInternedValue in /tmp/.tmpObWICA/salsa/src/event.rs:121\n\n--- failure enum_variant_missing: pub enum variant removed or renamed ---\n\nDescription:\nA publicly-visible enum has at least one variant that is no longer available under its prior name. It may have been renamed or removed entirely.\n        ref: https://doc.rust-lang.org/cargo/reference/semver.html#item-remove\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/enum_variant_missing.ron\n\nFailed in:\n  variant EventKind::DidReinternValue, previously in file /tmp/.tmpe3mRoo/salsa/src/event.rs:111\n\n--- failure feature_missing: package feature removed or renamed ---\n\nDescription:\nA feature has been removed from this package's Cargo.toml. This will break downstream crates which enable that feature.\n        ref: https://doc.rust-lang.org/cargo/reference/semver.html#cargo-feature-remove\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/feature_missing.ron\n\nFailed in:\n  feature loom in the package's Cargo.toml\n\n--- failure inherent_method_missing: pub method removed or renamed ---\n\nDescription:\nA publicly-visible method or associated fn is no longer available under its prior name. It may have been renamed or removed entirely.\n        ref: https://doc.rust-lang.org/cargo/reference/semver.html#item-remove\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/inherent_method_missing.ron\n\nFailed in:\n  Id::as_u32, previously in file /tmp/.tmpe3mRoo/salsa/src/id.rs:50\n\n--- failure struct_missing: pub struct removed or renamed ---\n\nDescription:\nA publicly-visible struct cannot be imported by its prior path. A `pub use` may have been removed, or the struct itself may have been renamed or removed entirely.\n        ref: https://doc.rust-lang.org/cargo/reference/semver.html#item-remove\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/struct_missing.ron\n\nFailed in:\n  struct salsa::UnexpectedCycle, previously in file /tmp/.tmpe3mRoo/salsa/src/cycle.rs:64\n\n--- failure trait_newly_sealed: pub trait became sealed ---\n\nDescription:\nA publicly-visible trait became sealed, so downstream crates are no longer able to implement it\n        ref: https://rust-lang.github.io/api-guidelines/future-proofing.html#sealed-traits-protect-against-downstream-implementations-c-sealed\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/trait_newly_sealed.ron\n\nFailed in:\n  trait salsa::prelude::Setter in file /tmp/.tmpObWICA/salsa/src/input/setter.rs:7\n  trait salsa::Setter in file /tmp/.tmpObWICA/salsa/src/input/setter.rs:7\n```\n\n<details><summary><i><b>Changelog</b></i></summary><p>\n\n## `salsa-macro-rules`\n\n<blockquote>\n\n## [0.23.0](https://github.com/salsa-rs/salsa/compare/salsa-macro-rules-v0.22.0...salsa-macro-rules-v0.23.0) - 2025-06-27\n\n### Added\n\n- `Update` derive field overwrite support ([#747](https://github.com/salsa-rs/salsa/pull/747))\n\n### Other\n\n- Emit self ty for query debug name of assoc function queries ([#927](https://github.com/salsa-rs/salsa/pull/927))\n- Replace ingredient cache with faster ingredient map ([#921](https://github.com/salsa-rs/salsa/pull/921))\n- add option to track heap memory usage of memos ([#925](https://github.com/salsa-rs/salsa/pull/925))\n- Hide generated structs of tracked functions from docs via `#[doc(hidden)]` ([#917](https://github.com/salsa-rs/salsa/pull/917))\n- add an option to tune interned garbage collection ([#911](https://github.com/salsa-rs/salsa/pull/911))\n- Use explicit discriminants for `QueryOriginKind` for better comparisons ([#913](https://github.com/salsa-rs/salsa/pull/913))\n- Preserve attributes on interned/tracked struct fields ([#905](https://github.com/salsa-rs/salsa/pull/905))\n- Use `Revision` and `Durability` directly in input `Value` ([#902](https://github.com/salsa-rs/salsa/pull/902))\n- Allow lifetimes in arguments in tracked fns with >1 parameters ([#880](https://github.com/salsa-rs/salsa/pull/880))\n- Replace loom with shuttle ([#876](https://github.com/salsa-rs/salsa/pull/876))\n</blockquote>\n\n## `salsa-macros`\n\n<blockquote>\n\n## [0.23.0](https://github.com/salsa-rs/salsa/compare/salsa-macros-v0.22.0...salsa-macros-v0.23.0) - 2025-06-27\n\n### Added\n\n- `Update` derive field overwrite support ([#747](https://github.com/salsa-rs/salsa/pull/747))\n\n### Other\n\n- Emit self ty for query debug name of assoc function queries ([#927](https://github.com/salsa-rs/salsa/pull/927))\n- add option to track heap memory usage of memos ([#925](https://github.com/salsa-rs/salsa/pull/925))\n- add an option to tune interned garbage collection ([#911](https://github.com/salsa-rs/salsa/pull/911))\n- Preserve attributes on interned/tracked struct fields ([#905](https://github.com/salsa-rs/salsa/pull/905))\n- Update dependencies, remove unused `heck` dependency ([#894](https://github.com/salsa-rs/salsa/pull/894))\n- Allow lifetimes in arguments in tracked fns with >1 parameters ([#880](https://github.com/salsa-rs/salsa/pull/880))\n</blockquote>\n\n## `salsa`\n\n<blockquote>\n\n## [0.23.0](https://github.com/salsa-rs/salsa/compare/salsa-v0.22.0...salsa-v0.23.0) - 2025-06-27\n\n### Added\n\n- `Update` derive field overwrite support ([#747](https://github.com/salsa-rs/salsa/pull/747))\n\n### Fixed\n\n- fix race in `MemoTableTypes` ([#912](https://github.com/salsa-rs/salsa/pull/912))\n- multithreaded nested fixpoint iteration ([#882](https://github.com/salsa-rs/salsa/pull/882))\n\n### Other\n\n- Emit self ty for query debug name of assoc function queries ([#927](https://github.com/salsa-rs/salsa/pull/927))\n- Replace ingredient cache with faster ingredient map ([#921](https://github.com/salsa-rs/salsa/pull/921))\n- add option to track heap memory usage of memos ([#925](https://github.com/salsa-rs/salsa/pull/925))\n- Hide generated structs of tracked functions from docs via `#[doc(hidden)]` ([#917](https://github.com/salsa-rs/salsa/pull/917))\n- Add API to dump memory usage ([#916](https://github.com/salsa-rs/salsa/pull/916))\n- Revert \"Assert size for interned Value\" & Mark `Slot` trait as unsafe ([#915](https://github.com/salsa-rs/salsa/pull/915))\n- add an option to tune interned garbage collection ([#911](https://github.com/salsa-rs/salsa/pull/911))\n- Use explicit discriminants for `QueryOriginKind` for better comparisons ([#913](https://github.com/salsa-rs/salsa/pull/913))\n- update boxcar ([#910](https://github.com/salsa-rs/salsa/pull/910))\n- use latest revision for dependencies on interned values ([#908](https://github.com/salsa-rs/salsa/pull/908))\n- remove high-durability values from interned LRU ([#907](https://github.com/salsa-rs/salsa/pull/907))\n- Preserve attributes on interned/tracked struct fields ([#905](https://github.com/salsa-rs/salsa/pull/905))\n- Assert size for interned `Value` ([#901](https://github.com/salsa-rs/salsa/pull/901))\n- reduce size of interned value metadata ([#903](https://github.com/salsa-rs/salsa/pull/903))\n- panic with string message again for cycle panics ([#898](https://github.com/salsa-rs/salsa/pull/898))\n- Use `Revision` and `Durability` directly in input `Value` ([#902](https://github.com/salsa-rs/salsa/pull/902))\n- Fix flaky parallel_join test ([#900](https://github.com/salsa-rs/salsa/pull/900))\n- Bump MSRV to 1.85 ([#899](https://github.com/salsa-rs/salsa/pull/899))\n- Simple LRU garbage collection for interned values ([#839](https://github.com/salsa-rs/salsa/pull/839))\n- Capture execution backtrace when throwing `UnexpectedCycle` ([#883](https://github.com/salsa-rs/salsa/pull/883))\n- Store tracked struct ids as ThinVec on Revisions ([#892](https://github.com/salsa-rs/salsa/pull/892))\n- Update dependencies, remove unused `heck` dependency ([#894](https://github.com/salsa-rs/salsa/pull/894))\n- Set `validate_final` in `execute` after removing the last cycle head ([#890](https://github.com/salsa-rs/salsa/pull/890))\n- Pack `QueryEdge` memory layout ([#886](https://github.com/salsa-rs/salsa/pull/886))\n- Lazily allocate extra memo state ([#888](https://github.com/salsa-rs/salsa/pull/888))\n- Pack `QueryOrigin` memory layout ([#885](https://github.com/salsa-rs/salsa/pull/885))\n- Restrict memo size assertion to 64bit platforms ([#884](https://github.com/salsa-rs/salsa/pull/884))\n- Don't report stale outputs if there is newer generation in new_outputs ([#879](https://github.com/salsa-rs/salsa/pull/879))\n- Fix hang in nested fixpoint iteration ([#871](https://github.com/salsa-rs/salsa/pull/871))\n- Add debug spans for `new_revision` and `evict_lru` ([#881](https://github.com/salsa-rs/salsa/pull/881))\n- Add fetch span ([#875](https://github.com/salsa-rs/salsa/pull/875))\n- shrink_to_fit `IdentityMap` before storing it ([#816](https://github.com/salsa-rs/salsa/pull/816))\n- Allow lifetimes in arguments in tracked fns with >1 parameters ([#880](https://github.com/salsa-rs/salsa/pull/880))\n- Replace loom with shuttle ([#876](https://github.com/salsa-rs/salsa/pull/876))\n- Use generational identifiers for tracked structs ([#864](https://github.com/salsa-rs/salsa/pull/864))\n\n### Fixed\n\n- `#[doc(hidden)]` auto-generated tracked-fn structs ([#917](https://github.com/salsa-rs/salsa/pull/917))\n</blockquote>\n\n\n</p></details>\n\n---\nThis PR was generated with [release-plz](https://github.com/release-plz/release-plz/).", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/877/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/877/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/876", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/876/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/876/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/876/events", "html_url": "https://github.com/salsa-rs/salsa/pull/876", "id": 3086391065, "node_id": "PR_kwDOCPxbTc6XY34j", "number": 876, "title": "Replace loom with shuttle", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2025-05-23T13:30:35Z", "updated_at": "2025-05-25T07:34:27Z", "closed_at": "2025-05-23T15:39:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/876", "html_url": "https://github.com/salsa-rs/salsa/pull/876", "diff_url": "https://github.com/salsa-rs/salsa/pull/876.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/876.patch", "merged_at": "2025-05-23T15:39:30Z"}, "body": "Loom is too slow to run even basic tests (https://github.com/salsa-rs/salsa/pull/845), so shuttle should be a lot more useful for us. I added a CI check to run our parallel tests under shuttle. This also undoes some of the changes from https://github.com/salsa-rs/salsa/pull/842, mainly shuttle does not require an `UnsafeCell` wrapper.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/876/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/875", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/875/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/875/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/875/events", "html_url": "https://github.com/salsa-rs/salsa/pull/875", "id": 3082709018, "node_id": "PR_kwDOCPxbTc6XMX_S", "number": 875, "title": "Add fetch span", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-05-22T09:32:44Z", "updated_at": "2025-05-26T17:01:30Z", "closed_at": "2025-05-26T17:01:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/875", "html_url": "https://github.com/salsa-rs/salsa/pull/875", "diff_url": "https://github.com/salsa-rs/salsa/pull/875.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/875.patch", "merged_at": "2025-05-26T17:01:29Z"}, "body": "I often find it hard to understand the query stack when debugging salsa. \r\n\r\nThis PR adds a `fetch` span, including the ingredient. This gives a better sense for how salsa recurses and (when enter and exit logging is enabled), when a query completes.\r\n\r\nThis is a separate PR to see how it affects perf:\r\n\r\nExample from a recent debugging sesison of mine (the thread id part is custom)\r\n\r\n```\r\n2025-05-21T13:37:38.146709Z DEBUG t2{thread_id=ThreadId(4)}:fetch{query=query_c(Id(0))}:fetch{query=query_b(Id(800))}: salsa::runtime: Block ThreadId(4) on ThreadId(3) because it depends on query_a(Id(400)) (currently running on that thread).\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/875/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/875/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/873", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/873/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/873/events", "html_url": "https://github.com/salsa-rs/salsa/pull/873", "id": 3082442085, "node_id": "PR_kwDOCPxbTc6XLd3_", "number": 873, "title": "Skip release-plz jobs on forks", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-22T08:02:28Z", "updated_at": "2025-05-22T08:22:11Z", "closed_at": "2025-05-22T08:22:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/873", "html_url": "https://github.com/salsa-rs/salsa/pull/873", "diff_url": "https://github.com/salsa-rs/salsa/pull/873.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/873.patch", "merged_at": "2025-05-22T08:22:11Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/873/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/871", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/871/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/871/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/871/events", "html_url": "https://github.com/salsa-rs/salsa/pull/871", "id": 3079600892, "node_id": "PR_kwDOCPxbTc6XB0R8", "number": 871, "title": "Fix hang in nested fixpoint iteration", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-05-21T09:40:00Z", "updated_at": "2025-05-27T17:15:33Z", "closed_at": "2025-05-27T17:15:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/871", "html_url": "https://github.com/salsa-rs/salsa/pull/871", "diff_url": "https://github.com/salsa-rs/salsa/pull/871.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/871.patch", "merged_at": "2025-05-27T17:15:31Z"}, "body": "This fixes a hang in multithreaded fixpoint iteration where the `Memo::provisional_retry` retried over and over again because all its cycle heads other than itself were finalized at this point. \r\n\r\nThis also fixes the panic from the `kopf` repro listed in https://github.com/salsa-rs/salsa/issues/831", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/871/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/871/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/869", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/869/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/869/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/869/events", "html_url": "https://github.com/salsa-rs/salsa/pull/869", "id": 3075864816, "node_id": "PR_kwDOCPxbTc6W1L66", "number": 869, "title": "Only enable `boxcar/loom` when `loom` feature is enabled", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-20T06:43:40Z", "updated_at": "2025-05-20T07:05:25Z", "closed_at": "2025-05-20T07:05:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/869", "html_url": "https://github.com/salsa-rs/salsa/pull/869", "diff_url": "https://github.com/salsa-rs/salsa/pull/869.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/869.patch", "merged_at": "2025-05-20T07:05:24Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/869/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/869/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/868", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/868/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/868/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/868/events", "html_url": "https://github.com/salsa-rs/salsa/pull/868", "id": 3073554305, "node_id": "PR_kwDOCPxbTc6WtYyk", "number": 868, "title": "Remove default `PartialOrd` and `Ord` derives for salsa structs", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-19T11:46:12Z", "updated_at": "2025-05-19T12:08:44Z", "closed_at": "2025-05-19T12:08:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/868", "html_url": "https://github.com/salsa-rs/salsa/pull/868", "diff_url": "https://github.com/salsa-rs/salsa/pull/868.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/868.patch", "merged_at": "2025-05-19T12:08:44Z"}, "body": "Salsa IDs have no semantical ordering and ordering two salsa-structs may result in different ordering when the program is run multiple times. Whether this matter or not depends on the specific use case. \r\n\r\nBecause of this, it feels safer to let users explicitly opt in to an ID-based `Ord` implementation by adding a `derive(PartialOrd, Ord)` to their structs. This also allows users to not provide an `Ord` implementation for types where ordering isn't semantically meaningful.\r\n\r\nAs discussed in https://salsa.zulipchat.com/#narrow/channel/333573-Contributing-to-Salsa/topic/Remove.20.60PartialOrd.60.20and.20.60Ord.60.20derives/with/519068002", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/868/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/868/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/867", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/867/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/867/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/867/events", "html_url": "https://github.com/salsa-rs/salsa/pull/867", "id": 3073361207, "node_id": "PR_kwDOCPxbTc6Wsujf", "number": 867, "title": "Implement an `!Update` bound escape hatch for tracked fn", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-19T10:33:40Z", "updated_at": "2025-05-20T15:46:42Z", "closed_at": "2025-05-20T15:46:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/867", "html_url": "https://github.com/salsa-rs/salsa/pull/867", "diff_url": "https://github.com/salsa-rs/salsa/pull/867.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/867.patch", "merged_at": "2025-05-20T15:46:41Z"}, "body": "Closes https://github.com/salsa-rs/salsa/issues/866", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/867/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/865", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/865/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/865/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/865/events", "html_url": "https://github.com/salsa-rs/salsa/pull/865", "id": 3069937499, "node_id": "PR_kwDOCPxbTc6WheM8", "number": 865, "title": "Update boxcar", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-16T21:41:24Z", "updated_at": "2025-05-17T06:49:42Z", "closed_at": "2025-05-17T06:49:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/865", "html_url": "https://github.com/salsa-rs/salsa/pull/865", "diff_url": "https://github.com/salsa-rs/salsa/pull/865.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/865.patch", "merged_at": "2025-05-17T06:49:41Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/865/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/864", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/864/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/864/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/864/events", "html_url": "https://github.com/salsa-rs/salsa/pull/864", "id": 3069926830, "node_id": "PR_kwDOCPxbTc6Whb9h", "number": 864, "title": "Use generational identifiers for tracked structs", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2025-05-16T21:32:08Z", "updated_at": "2025-05-23T14:28:55Z", "closed_at": "2025-05-23T14:28:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/864", "html_url": "https://github.com/salsa-rs/salsa/pull/864", "diff_url": "https://github.com/salsa-rs/salsa/pull/864.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/864.patch", "merged_at": "2025-05-23T14:28:54Z"}, "body": "Pack a generation into input IDs.\r\n\r\nThe generation of a tracked struct is incremented after it is reused, allowing us to avoid read dependencies. Generational IDs were originally meant for https://github.com/salsa-rs/salsa/pull/839, as adding the necessary read dependency on interned structs that may be reused introduced a large (~50%) regression to ty's incremental performance.\r\n\r\nThis increases the size of `Id` from a `u32` to a `u64`. However, if the generation is restricted to `u16`, and ingredient indices are restricted to `u16`, this does not increase the size of `DatabaseKeyIndex`, so the memory usage effect is limited (~5% increase to ty's peak memory usage). However, this should allow us to implement garbage collection for interned values without significant performance concerns, so memory usage over time should benefit.\r\n\r\nIf the generation exceeds `u16::MAX`, we can fallback to adding read dependencies on tracked structs. An alternative would be to leak the slot, which would also allow us to remove the `created_at` field on tracked structs and may alleviate the memory usage concerns. This might be more feasible if the generation stole a few more bits from ingredient indices (as the number of ingredients is effectively static for a given salsa program).\r\n\r\nThis has a small (~4%) performance improvement on ty's benchmarks.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/864/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/864/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/862", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/862/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/862/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/862/events", "html_url": "https://github.com/salsa-rs/salsa/pull/862", "id": 3066019416, "node_id": "PR_kwDOCPxbTc6WUTRF", "number": 862, "title": "Short-circuit `block-on` if same thread", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1075394980, "node_id": "MDU6TGFiZWwxMDc1Mzk0OTgw", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/refactoring", "name": "refactoring", "color": "d547e5", "default": false, "description": "Code works but is messy"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-15T12:06:09Z", "updated_at": "2025-05-22T09:36:33Z", "closed_at": "2025-05-22T09:36:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/862", "html_url": "https://github.com/salsa-rs/salsa/pull/862", "diff_url": "https://github.com/salsa-rs/salsa/pull/862.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/862.patch", "merged_at": "2025-05-22T09:36:33Z"}, "body": "Early return from `block_on` if both the current and other thread are the same to skip the need to traverse the dependency tree (which requires a lock)", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/862/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/862/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/861", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/861/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/861/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/861/events", "html_url": "https://github.com/salsa-rs/salsa/pull/861", "id": 3063352724, "node_id": "PR_kwDOCPxbTc6WLR0f", "number": 861, "title": "perf: speed-up cycle-retry logic", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-14T14:36:35Z", "updated_at": "2025-05-15T06:29:22Z", "closed_at": "2025-05-15T06:29:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/861", "html_url": "https://github.com/salsa-rs/salsa/pull/861", "diff_url": "https://github.com/salsa-rs/salsa/pull/861.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/861.patch", "merged_at": "2025-05-15T06:29:21Z"}, "body": "* Avoid an atomic load in the most common case where the query isn't participating in a \r\ncycle.\r\n* Only perform the test in `fetch_cold` (with_retry) because memos returned by `fetch_hot` are always finalized.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/861/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/859", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/859/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/859/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/859/events", "html_url": "https://github.com/salsa-rs/salsa/pull/859", "id": 3054197453, "node_id": "PR_kwDOCPxbTc6VsdUG", "number": 859, "title": "Allow creation of tracked associated functions (without `self`)", "user": {"login": "regexident", "id": 138017, "node_id": "MDQ6VXNlcjEzODAxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/138017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/regexident", "html_url": "https://github.com/regexident", "followers_url": "https://api.github.com/users/regexident/followers", "following_url": "https://api.github.com/users/regexident/following{/other_user}", "gists_url": "https://api.github.com/users/regexident/gists{/gist_id}", "starred_url": "https://api.github.com/users/regexident/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/regexident/subscriptions", "organizations_url": "https://api.github.com/users/regexident/orgs", "repos_url": "https://api.github.com/users/regexident/repos", "events_url": "https://api.github.com/users/regexident/events{/privacy}", "received_events_url": "https://api.github.com/users/regexident/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-05-10T14:31:54Z", "updated_at": "2025-05-23T10:41:52Z", "closed_at": "2025-05-23T10:30:00Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/859", "html_url": "https://github.com/salsa-rs/salsa/pull/859", "diff_url": "https://github.com/salsa-rs/salsa/pull/859.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/859.patch", "merged_at": "2025-05-23T10:30:00Z"}, "body": "Fixes #858 & #585.\r\n\r\nThis allows users to annotate impl blocks with `#[salsa::tracked]` and then create tracked associated type-level functions by marking individual functions with `#[salsa::tracked]`.\r\n\r\nNote this requires your code that looks like:\r\n\r\n```rust\r\n#[salsa::tracked]\r\nimpl MyOutput {\r\n    #[salsa::tracked]\r\n    fn tracked_fn(db: &dyn Db, input: MyInput) -> MyOutput {\r\n        MyOutput::new(db, input.field(db) * 2)\r\n    }\r\n}\r\n```\r\n\r\nYou get an error if you annotate an associated function with `#[salsa::tracked]` but forget to mark the impl block.\r\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/859/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/859/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/857", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/857/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/857/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/857/events", "html_url": "https://github.com/salsa-rs/salsa/pull/857", "id": 3051488589, "node_id": "PR_kwDOCPxbTc6VjQ9e", "number": 857, "title": "Fix returns(deref | as_ref | as_deref) in tracked methods", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-09T08:51:19Z", "updated_at": "2025-05-09T09:19:25Z", "closed_at": "2025-05-09T09:19:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/857", "html_url": "https://github.com/salsa-rs/salsa/pull/857", "diff_url": "https://github.com/salsa-rs/salsa/pull/857.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/857.patch", "merged_at": "2025-05-09T09:19:24Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/857/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/857/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/856", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/856/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/856/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/856/events", "html_url": "https://github.com/salsa-rs/salsa/pull/856", "id": 3051325741, "node_id": "PR_kwDOCPxbTc6VitXK", "number": 856, "title": "feat: Unwind with specific type when encountering an unexpected cycle", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2025-05-09T07:50:04Z", "updated_at": "2025-05-29T07:21:58Z", "closed_at": "2025-05-22T07:52:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/856", "html_url": "https://github.com/salsa-rs/salsa/pull/856", "diff_url": "https://github.com/salsa-rs/salsa/pull/856.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/856.patch", "merged_at": "2025-05-22T07:52:13Z"}, "body": "Closes https://github.com/salsa-rs/salsa/issues/704", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/856/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/855", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/855/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/855/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/855/events", "html_url": "https://github.com/salsa-rs/salsa/pull/855", "id": 3051187583, "node_id": "PR_kwDOCPxbTc6ViUty", "number": 855, "title": "Work around a rust-analyzer bug", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-09T07:00:16Z", "updated_at": "2025-05-09T07:34:17Z", "closed_at": "2025-05-09T07:34:16Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/855", "html_url": "https://github.com/salsa-rs/salsa/pull/855", "diff_url": "https://github.com/salsa-rs/salsa/pull/855.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/855.patch", "merged_at": "2025-05-09T07:34:16Z"}, "body": "r-a still does not like some glob shadowing setups and fixing those is incredibly difficult with our current setup (nameres in rust is so much fun...) -> https://github.com/rust-lang/rust-analyzer/issues/19755\r\n\r\nWithout this change a big part of the code base turns red unfortunately", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/855/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/854", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/854/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/854/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/854/events", "html_url": "https://github.com/salsa-rs/salsa/pull/854", "id": 3049953202, "node_id": "PR_kwDOCPxbTc6VfG6M", "number": 854, "title": "Lazy finalization of cycle participants in `maybe_changed_after`", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1075394980, "node_id": "MDU6TGFiZWwxMDc1Mzk0OTgw", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/refactoring", "name": "refactoring", "color": "d547e5", "default": false, "description": "Code works but is messy"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-05-08T19:53:28Z", "updated_at": "2025-05-09T07:14:41Z", "closed_at": "2025-05-09T07:14:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/854", "html_url": "https://github.com/salsa-rs/salsa/pull/854", "diff_url": "https://github.com/salsa-rs/salsa/pull/854.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/854.patch", "merged_at": "2025-05-09T07:14:40Z"}, "body": "I'm not entirely sure if we should make this change but it does feel closer to how cycles work in `execute`. On the other hand, `deep_verify_memo` now works fairly different for cycles than it does for other queries. \r\n\r\nThis PR removes the loop from `deep_verify_memo`. We used the loop to iterate a second time if all dependencies in a cycle remain unchanged. I don't think this is strictly necessary because we can rely on Salsa lazily verifying the inner queries when they're pulled as part of another query (they won't run into a cycle again because it's already verified). \r\n\r\nWe may want to introduce a new event, e..g `DidProvisionallyValidateMemoizedValue` (open to suggestions) to make it more apparent that the dependencies were verified, they simply were never \"finalized\"\r\n\r\nI still need to update the comment but I'm interested in what people think first.\r\n\r\n\r\n## Performance\r\n\r\nThe performance on ty is about the same as the old version", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/854/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/852", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/852/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/852/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/852/events", "html_url": "https://github.com/salsa-rs/salsa/pull/852", "id": 3048205364, "node_id": "PR_kwDOCPxbTc6VZI0W", "number": 852, "title": "Pass cycle heads as out parameter for `maybe_changed_after`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-08T08:20:46Z", "updated_at": "2025-05-08T08:42:31Z", "closed_at": "2025-05-08T08:42:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/852", "html_url": "https://github.com/salsa-rs/salsa/pull/852", "diff_url": "https://github.com/salsa-rs/salsa/pull/852.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/852.patch", "merged_at": "2025-05-08T08:42:30Z"}, "body": "Started off as investigating whether an out parameter for this would be more performant but I also believe this change makes it more easy to reason about where and how we are changing the cycle heads in verification. There is now one area where we remove from them, and 2 areas where we extend them where as before it was semi hidden due to us constructing empty cycle heads.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/852/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/851", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/851/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/851/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/851/events", "html_url": "https://github.com/salsa-rs/salsa/pull/851", "id": 3048053768, "node_id": "PR_kwDOCPxbTc6VYnmB", "number": 851, "title": "Do not re-verify already verified memoized value in cycle verification ", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-05-08T07:17:08Z", "updated_at": "2025-05-09T05:14:57Z", "closed_at": "2025-05-08T16:44:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/851", "html_url": "https://github.com/salsa-rs/salsa/pull/851", "diff_url": "https://github.com/salsa-rs/salsa/pull/851.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/851.patch", "merged_at": "2025-05-08T16:44:11Z"}, "body": "Stacked on top of https://github.com/salsa-rs/salsa/pull/852", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/851/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/851/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/850", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/850/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/850/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/850/events", "html_url": "https://github.com/salsa-rs/salsa/pull/850", "id": 3047271973, "node_id": "PR_kwDOCPxbTc6VV-n7", "number": 850, "title": "Fix memo table growth condition", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-07T22:08:26Z", "updated_at": "2025-05-08T04:34:27Z", "closed_at": "2025-05-08T04:34:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/850", "html_url": "https://github.com/salsa-rs/salsa/pull/850", "diff_url": "https://github.com/salsa-rs/salsa/pull/850.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/850.patch", "merged_at": "2025-05-08T04:34:27Z"}, "body": "The `additional_len` calculation assumes that `memos.len() <= memo_ingredient_index`, which is not true in light of concurrent inserts. We're seeing spurious overflow panics because of this. It looks like this was changed in https://github.com/salsa-rs/salsa/pull/803.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/850/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/849", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/849/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/849/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/849/events", "html_url": "https://github.com/salsa-rs/salsa/pull/849", "id": 3045486181, "node_id": "PR_kwDOCPxbTc6VP3KO", "number": 849, "title": "Move salsa event system into `Zalsa`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-05-07T10:22:05Z", "updated_at": "2025-05-07T12:07:01Z", "closed_at": "2025-05-07T11:55:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/849", "html_url": "https://github.com/salsa-rs/salsa/pull/849", "diff_url": "https://github.com/salsa-rs/salsa/pull/849.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/849.patch", "merged_at": "2025-05-07T11:55:50Z"}, "body": "The existence of `Database::salsa_event` is incredibly annoying as a lot of internal code takes a `&dyn Database` solely to do event reporting where as usually a `&Zalsa` handle would otherwise suffice. This becomes even more annoying when mutable handles are involved as it requires some odd code structuring to avoid mutability xor shared errors, it also makes optimizations more difficult for the compiler due to dynamic dispatches it can't look through.\r\n\r\nSo this moves the trait method away to a separate callback that can be registered, and if not registered, can be skipped entirely.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/849/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/849/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/844", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/844/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/844/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/844/events", "html_url": "https://github.com/salsa-rs/salsa/pull/844", "id": 3043715893, "node_id": "PR_kwDOCPxbTc6VJ7Nt", "number": 844, "title": "Gate loom dependency under feature flag", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-06T18:49:18Z", "updated_at": "2025-05-06T19:14:20Z", "closed_at": "2025-05-06T19:14:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/844", "html_url": "https://github.com/salsa-rs/salsa/pull/844", "diff_url": "https://github.com/salsa-rs/salsa/pull/844.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/844.patch", "merged_at": "2025-05-06T19:14:19Z"}, "body": "This makes sure the dependency is not included on unsupported platforms (https://github.com/astral-sh/ruff/pull/17895). `cfg(loom)` is still required to enable loom to ensure it is not accidentally enabled when testing with `--all-features`.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/844/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/844/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/843", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/843/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/843/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/843/events", "html_url": "https://github.com/salsa-rs/salsa/pull/843", "id": 3043563444, "node_id": "PR_kwDOCPxbTc6VJaBB", "number": 843, "title": "fix: incorrect caching for queries participating in fixpoint", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1072718939, "node_id": "MDU6TGFiZWwxMDcyNzE4OTM5", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2025-05-06T17:42:45Z", "updated_at": "2025-05-07T07:11:06Z", "closed_at": "2025-05-07T07:11:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/843", "html_url": "https://github.com/salsa-rs/salsa/pull/843", "diff_url": "https://github.com/salsa-rs/salsa/pull/843.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/843.patch", "merged_at": "2025-05-07T07:11:05Z"}, "body": "This is a follow up to https://github.com/salsa-rs/salsa/pull/836 and may fix the hang in https://github.com/salsa-rs/salsa/issues/831\n\nI'm very sorry for not adding any tests but I'm very short on time right now. I'll create an issue if we go ahead with\nmerging this change to follow up with tests\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/843/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/842", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/842/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/842/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/842/events", "html_url": "https://github.com/salsa-rs/salsa/pull/842", "id": 3043015189, "node_id": "PR_kwDOCPxbTc6VHheW", "number": 842, "title": "Add loom support", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-05-06T14:19:55Z", "updated_at": "2025-05-06T15:46:49Z", "closed_at": "2025-05-06T15:46:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/842", "html_url": "https://github.com/salsa-rs/salsa/pull/842", "diff_url": "https://github.com/salsa-rs/salsa/pull/842.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/842.patch", "merged_at": "2025-05-06T15:46:49Z"}, "body": "Doesn't add any tests yet, but should still be good to merge to avoid having to rebase. I think the one thing missing here is a polyfill for crossbeam-queue. I also added a workflow to make sure everything compiles under cfg(loom).\r\n\r\ncc @davidbarsky ", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/842/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/842/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/840", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/840/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/840/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/840/events", "html_url": "https://github.com/salsa-rs/salsa/pull/840", "id": 3035912852, "node_id": "PR_kwDOCPxbTc6Uv4bd", "number": 840, "title": "chore: release v0.22.0", "user": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-02T12:27:58Z", "updated_at": "2025-05-23T10:38:36Z", "closed_at": "2025-05-23T10:38:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/840", "html_url": "https://github.com/salsa-rs/salsa/pull/840", "diff_url": "https://github.com/salsa-rs/salsa/pull/840.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/840.patch", "merged_at": "2025-05-23T10:38:34Z"}, "body": "\n\n\n## \ud83e\udd16 New release\n\n* `salsa-macro-rules`: 0.21.1 -> 0.22.0 (\u26a0 API breaking changes)\n* `salsa-macros`: 0.21.1 -> 0.22.0\n* `salsa`: 0.21.1 -> 0.22.0 (\u26a0 API breaking changes)\n\n### \u26a0 `salsa-macro-rules` breaking changes\n\n```text\n--- failure declarative_macro_missing: macro_rules declaration removed or renamed ---\n\nDescription:\nA `macro_rules!` declarative macro cannot be invoked by its prior name. The macro may have been renamed or removed entirely.\n        ref: https://doc.rust-lang.org/reference/macros-by-example.html#path-based-scope\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/declarative_macro_missing.ron\n\nFailed in:\n  macro maybe_cloned_ty, previously in file /tmp/.tmpTrDX5y/salsa-macro-rules/src/maybe_clone.rs:24\n  macro setup_method_body, previously in file /tmp/.tmpTrDX5y/salsa-macro-rules/src/setup_method_body.rs:2\n  macro maybe_clone, previously in file /tmp/.tmpTrDX5y/salsa-macro-rules/src/maybe_clone.rs:5\n```\n\n### \u26a0 `salsa` breaking changes\n\n```text\n--- failure trait_method_missing: pub trait method removed or renamed ---\n\nDescription:\nA trait method is no longer callable, and may have been renamed or removed entirely.\n        ref: https://doc.rust-lang.org/cargo/reference/semver.html#major-any-change-to-trait-item-signatures\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.41.0/src/lints/trait_method_missing.ron\n\nFailed in:\n  method salsa_event of trait Database, previously in file /tmp/.tmpTrDX5y/salsa/src/database.rs:17\n  method salsa_event of trait Database, previously in file /tmp/.tmpTrDX5y/salsa/src/database.rs:17\n```\n\n<details><summary><i><b>Changelog</b></i></summary><p>\n\n## `salsa-macro-rules`\n\n<blockquote>\n\n## [0.22.0](https://github.com/salsa-rs/salsa/compare/salsa-macro-rules-v0.21.1...salsa-macro-rules-v0.22.0) - 2025-05-23\n\n### Other\n\n- Allow creation of tracked associated functions (without `self`) ([#859](https://github.com/salsa-rs/salsa/pull/859))\n- Remove default `PartialOrd` and `Ord` derives for salsa-structs ([#868](https://github.com/salsa-rs/salsa/pull/868))\n- Fix returns(deref | as_ref | as_deref) in tracked methods ([#857](https://github.com/salsa-rs/salsa/pull/857))\n- Changed `return_ref` syntax to `returns(as_ref)` and `returns(cloned)` ([#772](https://github.com/salsa-rs/salsa/pull/772))\n- Move salsa event system into `Zalsa` ([#849](https://github.com/salsa-rs/salsa/pull/849))\n- Add loom support ([#842](https://github.com/salsa-rs/salsa/pull/842))\n- Clean up some unsafety ([#830](https://github.com/salsa-rs/salsa/pull/830))\n</blockquote>\n\n## `salsa-macros`\n\n<blockquote>\n\n## [0.22.0](https://github.com/salsa-rs/salsa/compare/salsa-macros-v0.21.1...salsa-macros-v0.22.0) - 2025-05-23\n\n### Other\n\n- Allow creation of tracked associated functions (without `self`) ([#859](https://github.com/salsa-rs/salsa/pull/859))\n- Implement an `!Update` bound escape hatch for tracked fn ([#867](https://github.com/salsa-rs/salsa/pull/867))\n- Fix returns(deref | as_ref | as_deref) in tracked methods ([#857](https://github.com/salsa-rs/salsa/pull/857))\n- Changed `return_ref` syntax to `returns(as_ref)` and `returns(cloned)` ([#772](https://github.com/salsa-rs/salsa/pull/772))\n- Move salsa event system into `Zalsa` ([#849](https://github.com/salsa-rs/salsa/pull/849))\n</blockquote>\n\n## `salsa`\n\n<blockquote>\n\n## [0.22.0](https://github.com/salsa-rs/salsa/compare/salsa-v0.21.1...salsa-v0.22.0) - 2025-05-23\n\n### Fixed\n\n- fix memo table growth condition ([#850](https://github.com/salsa-rs/salsa/pull/850))\n- incorrect caching for queries participating in fixpoint ([#843](https://github.com/salsa-rs/salsa/pull/843))\n- change detection for fixpoint queries ([#836](https://github.com/salsa-rs/salsa/pull/836))\n\n### Other\n\n- Allow creation of tracked associated functions (without `self`) ([#859](https://github.com/salsa-rs/salsa/pull/859))\n- Short-circuit `block-on` if same thread ([#862](https://github.com/salsa-rs/salsa/pull/862))\n- Skip release-plz jobs on forks ([#873](https://github.com/salsa-rs/salsa/pull/873))\n- Unwind with specific type when encountering an unexpected cycle ([#856](https://github.com/salsa-rs/salsa/pull/856))\n- Remove jar mentions from book ([#775](https://github.com/salsa-rs/salsa/pull/775))\n- Implement an `!Update` bound escape hatch for tracked fn ([#867](https://github.com/salsa-rs/salsa/pull/867))\n- Only enable `boxcar/loom` when `loom` feature is enabled ([#869](https://github.com/salsa-rs/salsa/pull/869))\n- Remove default `PartialOrd` and `Ord` derives for salsa-structs ([#868](https://github.com/salsa-rs/salsa/pull/868))\n- update boxcar ([#865](https://github.com/salsa-rs/salsa/pull/865))\n- speed-up cycle-retry logic ([#861](https://github.com/salsa-rs/salsa/pull/861))\n- Fix returns(deref | as_ref | as_deref) in tracked methods ([#857](https://github.com/salsa-rs/salsa/pull/857))\n- Changed `return_ref` syntax to `returns(as_ref)` and `returns(cloned)` ([#772](https://github.com/salsa-rs/salsa/pull/772))\n- Work around a rust-analyzer bug ([#855](https://github.com/salsa-rs/salsa/pull/855))\n- Lazy finalization of cycle participants in `maybe_changed_after` ([#854](https://github.com/salsa-rs/salsa/pull/854))\n- Do not re-verify already verified memoized value in cycle verification ([#851](https://github.com/salsa-rs/salsa/pull/851))\n- Pass cycle heads as out parameter for `maybe_changed_after` ([#852](https://github.com/salsa-rs/salsa/pull/852))\n- Move salsa event system into `Zalsa` ([#849](https://github.com/salsa-rs/salsa/pull/849))\n- gate loom dependency under feature flag ([#844](https://github.com/salsa-rs/salsa/pull/844))\n- Add loom support ([#842](https://github.com/salsa-rs/salsa/pull/842))\n- Clean up some unsafety ([#830](https://github.com/salsa-rs/salsa/pull/830))\n</blockquote>\n\n\n</p></details>\n\n---\nThis PR was generated with [release-plz](https://github.com/release-plz/release-plz/).", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/840/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/840/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/839", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/839/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/839/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/839/events", "html_url": "https://github.com/salsa-rs/salsa/pull/839", "id": 3032668668, "node_id": "PR_kwDOCPxbTc6UlC0V", "number": 839, "title": "Simple LRU garbage collection for interned values", "user": {"login": "ibraheemdev", "id": 34988408, "node_id": "MDQ6VXNlcjM0OTg4NDA4", "avatar_url": "https://avatars.githubusercontent.com/u/34988408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibraheemdev", "html_url": "https://github.com/ibraheemdev", "followers_url": "https://api.github.com/users/ibraheemdev/followers", "following_url": "https://api.github.com/users/ibraheemdev/following{/other_user}", "gists_url": "https://api.github.com/users/ibraheemdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibraheemdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibraheemdev/subscriptions", "organizations_url": "https://api.github.com/users/ibraheemdev/orgs", "repos_url": "https://api.github.com/users/ibraheemdev/repos", "events_url": "https://api.github.com/users/ibraheemdev/events{/privacy}", "received_events_url": "https://api.github.com/users/ibraheemdev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2025-04-30T22:12:57Z", "updated_at": "2025-06-04T12:18:31Z", "closed_at": "2025-06-04T08:19:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/839", "html_url": "https://github.com/salsa-rs/salsa/pull/839", "diff_url": "https://github.com/salsa-rs/salsa/pull/839.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/839.patch", "merged_at": "2025-06-04T08:19:08Z"}, "body": "Basic implementation of https://github.com/salsa-rs/salsa/issues/597.\r\n\r\nThe garbage collection strategy used here is very simple.\r\n- Slots that have not been accessed in the last 3 *active revisions* are always reused, and nothing else. Active revisions are those in which interned values were actually read to avoid counting empty revisions.\r\n- Slots are never swept proactively, though this would be simple to add as an option.\r\n- We also cannot collect low durability values, which would require `&mut db`. This could be supported with the above.\r\n\r\nThis is by no means a perfect strategy, but we can always tune it as needed once the infrastructure is in place. We may also want to expose the `N` active revisions constant as a configuration option in the `#[interned]` macro (it seems somewhat related to durability).\r\n\r\nThe LRU list is sharded by hash, very similar to dashmap. There seems to be no performance difference from the previous implementation in multi-threaded `ty` benchmarks (though there was a significant regression without sharding). There is also no significant performance difference in single-threaded benchmarks thanks to https://github.com/salsa-rs/salsa/pull/864, which lets us avoid additional read dependencies.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/839/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/837", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/837/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/837/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/837/events", "html_url": "https://github.com/salsa-rs/salsa/pull/837", "id": 3031727331, "node_id": "PR_kwDOCPxbTc6Uhy-W", "number": 837, "title": "better debug name for interned query arguments", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-30T15:52:54Z", "updated_at": "2025-04-30T17:30:25Z", "closed_at": "2025-04-30T17:30:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/837", "html_url": "https://github.com/salsa-rs/salsa/pull/837", "diff_url": "https://github.com/salsa-rs/salsa/pull/837.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/837.patch", "merged_at": "2025-04-30T17:30:24Z"}, "body": "The debug name `Configuration` isn't very helpful when debugging salsa. Use a name constructed from the query name.\r\n\r\nI'm open to suggestions on how to avoid collisions with actual query names. e.g. we could prefix the name with two underscores or similar.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/837/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/837/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/836", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/836/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/836/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/836/events", "html_url": "https://github.com/salsa-rs/salsa/pull/836", "id": 3031552765, "node_id": "PR_kwDOCPxbTc6UhM4R", "number": 836, "title": "fix: change detection for fixpoint queries", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1072718939, "node_id": "MDU6TGFiZWwxMDcyNzE4OTM5", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-30T14:55:06Z", "updated_at": "2025-05-06T08:22:20Z", "closed_at": "2025-05-06T08:22:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/836", "html_url": "https://github.com/salsa-rs/salsa/pull/836", "diff_url": "https://github.com/salsa-rs/salsa/pull/836.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/836.patch", "merged_at": "2025-05-06T08:22:19Z"}, "body": "This PR fixes two bugs in `maybe_changed_after` for cyclic queries\r\n\r\n## Fix number 1\r\n\r\nSalsa doesn't invalidate a cycle of `query_a` -> `query_b` if `query_b` only depends on the input in the first iteration. \r\n\r\nFixing this requires that we carry over inputs to later iterations. This is a very similar fix to what I did for tracked structs. \r\n\r\nThis fixes https://github.com/salsa-rs/salsa/issues/834.\r\n\r\n## Fix number 2\r\n\r\nWe saw many *access to interned struct that wasn't interned in this revision* panics. This was caused by `maybe_changed_after` re-running a query in the attempt to backdate it even when the query participates in a cycle (in which case salsa returned *Fixpoint initial* on which the query that Salsa tries to backdate now depends on). This is problematic the assumption before calling `execute` is that all its inputs are *valid* but this isn't the case when returning *fixpoint initial*, Salsa then intentionally defers validating all the input/outputs. \r\n\r\nThe fix here is to only perform the backdating if not in a cycle. If incide a cycle, then the backdating must happen for the cycle head (which then calls `maybe_changed_after` of inner queries again)\r\n\r\n\r\n## Performance\r\n\r\n[The performance results on ty](https://codspeed.io/astral-sh/ruff/branches/micha%2Fperf-fixpoint-fix) (former Red Knot) are neutral. The performance should mainly regress if cycles have many different inputs/outputs between iterations because they're now carried over", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/836/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/836/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/835", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/835/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/835/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/835/events", "html_url": "https://github.com/salsa-rs/salsa/pull/835", "id": 3030921859, "node_id": "PR_kwDOCPxbTc6UfC_w", "number": 835, "title": "bug: Avoid panic in `Backtrace::catpure` if `query_stack` is already mutably borrowed", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1072718939, "node_id": "MDU6TGFiZWwxMDcyNzE4OTM5", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-30T10:56:42Z", "updated_at": "2025-05-01T05:18:41Z", "closed_at": "2025-04-30T11:25:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/835", "html_url": "https://github.com/salsa-rs/salsa/pull/835", "diff_url": "https://github.com/salsa-rs/salsa/pull/835.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/835.patch", "merged_at": "2025-04-30T11:25:04Z"}, "body": "This PR fixes a panic in `Backtrace::catpure` if `local_state.query_stack` is already mutably borrowed by\nreturning `None`. \n\nThis was possible because some of our cycle queries used `with_query_stack` when panicking to include the query stack\nand `with_query_stack` always aquired a mutable borrow. I split `with_query_stack` into a reference, mutable reference, and `try` variant\nwhich should avoid this from triggering in most places\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/835/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/835/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/833", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/833/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/833/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/833/events", "html_url": "https://github.com/salsa-rs/salsa/pull/833", "id": 3030497813, "node_id": "PR_kwDOCPxbTc6Udl9T", "number": 833, "title": "refactor: Clean up `function::execute`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-30T08:12:29Z", "updated_at": "2025-04-30T08:52:12Z", "closed_at": "2025-04-30T08:52:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/833", "html_url": "https://github.com/salsa-rs/salsa/pull/833", "diff_url": "https://github.com/salsa-rs/salsa/pull/833.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/833.patch", "merged_at": "2025-04-30T08:52:11Z"}, "body": "it's gotten a bit tough to reason about imo due to the different execution modes we have now", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/833/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/832", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/832/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/832/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/832/events", "html_url": "https://github.com/salsa-rs/salsa/pull/832", "id": 3030369793, "node_id": "PR_kwDOCPxbTc6UdKQK", "number": 832, "title": "feat: Make `attach` pub", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-30T07:14:52Z", "updated_at": "2025-04-30T07:34:19Z", "closed_at": "2025-04-30T07:34:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/832", "html_url": "https://github.com/salsa-rs/salsa/pull/832", "diff_url": "https://github.com/salsa-rs/salsa/pull/832.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/832.patch", "merged_at": "2025-04-30T07:34:19Z"}, "body": "It's sometimes necessary to print salsa data outside a query. However, the output isn't very useful without a db attached\nand salsa currently doesn't expose an API to attach the db. \n\nThis PR makes `attach::attach` pub, so that user-code can attach a database when necessary. \n\nMy specific use case is that I want to print a `salsa::Backtrace` that was captured earlier but the handler\nisn't part of any salsa query. \n\nAlternatives: We could add a `Backtrace::display` method that accepts a specific `db`. \n\nDownsides: This exposes that each db is associated with a single thread. I think this\nis something that's already observable to users anyway. \n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/832/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/832/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/830", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/830/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/830/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/830/events", "html_url": "https://github.com/salsa-rs/salsa/pull/830", "id": 3030356277, "node_id": "PR_kwDOCPxbTc6UdHQq", "number": 830, "title": "refactor: Clean up some unsafety", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-30T07:09:28Z", "updated_at": "2025-05-02T12:27:23Z", "closed_at": "2025-05-02T12:27:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/830", "html_url": "https://github.com/salsa-rs/salsa/pull/830", "diff_url": "https://github.com/salsa-rs/salsa/pull/830.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/830.patch", "merged_at": "2025-05-02T12:27:22Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/830/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/830/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/829", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/829/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/829/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/829/events", "html_url": "https://github.com/salsa-rs/salsa/pull/829", "id": 3030220966, "node_id": "PR_kwDOCPxbTc6UcqEe", "number": 829, "title": "chore: release v0.21.1", "user": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-04-30T05:59:49Z", "updated_at": "2025-05-01T05:22:51Z", "closed_at": "2025-05-01T05:22:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/829", "html_url": "https://github.com/salsa-rs/salsa/pull/829", "diff_url": "https://github.com/salsa-rs/salsa/pull/829.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/829.patch", "merged_at": "2025-05-01T05:22:49Z"}, "body": "\n\n\n## \ud83e\udd16 New release\n\n* `salsa-macro-rules`: 0.21.0 -> 0.21.1 (\u2713 API compatible changes)\n* `salsa-macros`: 0.21.0 -> 0.21.1\n* `salsa`: 0.21.0 -> 0.21.1 (\u2713 API compatible changes)\n\n<details><summary><i><b>Changelog</b></i></summary><p>\n\n## `salsa-macro-rules`\n\n<blockquote>\n\n## [0.21.1](https://github.com/salsa-rs/salsa/compare/salsa-macro-rules-v0.21.0...salsa-macro-rules-v0.21.1) - 2025-04-30\n\n### Other\n\n- better debug name for interned query arguments ([#837](https://github.com/salsa-rs/salsa/pull/837))\n</blockquote>\n\n## `salsa-macros`\n\n<blockquote>\n\n## [0.21.0](https://github.com/salsa-rs/salsa/compare/salsa-macros-v0.20.0...salsa-macros-v0.21.0) - 2025-04-29\n\n### Fixed\n\n- allow unused lifetimes in tracked_struct expansion ([#824](https://github.com/salsa-rs/salsa/pull/824))\n\n### Other\n\n- Add a compile-fail test for a `'static` `!Update` struct ([#820](https://github.com/salsa-rs/salsa/pull/820))\n- squelch most clippy warnings in generated code ([#809](https://github.com/salsa-rs/salsa/pull/809))\n- Use `DatabaseKey` for interned events ([#813](https://github.com/salsa-rs/salsa/pull/813))\n</blockquote>\n\n## `salsa`\n\n<blockquote>\n\n## [0.21.1](https://github.com/salsa-rs/salsa/compare/salsa-v0.21.0...salsa-v0.21.1) - 2025-04-30\n\n### Added\n\n- Make `attach` pub ([#832](https://github.com/salsa-rs/salsa/pull/832))\n\n### Other\n\n- better debug name for interned query arguments ([#837](https://github.com/salsa-rs/salsa/pull/837))\n- Avoid panic in `Backtrace::capture` if `query_stack` is already borrowed ([#835](https://github.com/salsa-rs/salsa/pull/835))\n- Clean up `function::execute` ([#833](https://github.com/salsa-rs/salsa/pull/833))\n- Change an `assert!` to `assert_eq!` ([#828](https://github.com/salsa-rs/salsa/pull/828))\n</blockquote>\n\n\n</p></details>\n\n---\nThis PR was generated with [release-plz](https://github.com/release-plz/release-plz/).", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/829/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/828", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/828/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/828/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/828/events", "html_url": "https://github.com/salsa-rs/salsa/pull/828", "id": 3030189865, "node_id": "PR_kwDOCPxbTc6UcjeM", "number": 828, "title": "chore: Change an `assert!` to `assert_eq!`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-30T05:38:34Z", "updated_at": "2025-04-30T05:59:15Z", "closed_at": "2025-04-30T05:59:15Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/828", "html_url": "https://github.com/salsa-rs/salsa/pull/828", "diff_url": "https://github.com/salsa-rs/salsa/pull/828.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/828.patch", "merged_at": "2025-04-30T05:59:15Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/828/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/828/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/827", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/827/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/827/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/827/events", "html_url": "https://github.com/salsa-rs/salsa/pull/827", "id": 3028860309, "node_id": "PR_kwDOCPxbTc6UYFFk", "number": 827, "title": "feat: Implement a query stack `Backtrace` analog", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-29T16:03:28Z", "updated_at": "2025-04-29T17:11:08Z", "closed_at": "2025-04-29T17:11:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/827", "html_url": "https://github.com/salsa-rs/salsa/pull/827", "diff_url": "https://github.com/salsa-rs/salsa/pull/827.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/827.patch", "merged_at": "2025-04-29T17:11:07Z"}, "body": "Example output:\r\n```\r\nquery stacktrace:\r\n   0: query_e(Id(3)) -> (R1, Durability::LOW)\r\n             at tests/backtrace.rs:30\r\n   1: query_cycle(Id(3)) -> (R1, Durability::HIGH, iteration = 0)\r\n             at tests/backtrace.rs:43\r\n             cycle heads: query_cycle(Id(3)) -> 0\r\n   2: query_f(Id(3)) -> (R1, Durability::HIGH)\r\n             at tests/backtrace.rs:38\r\n```                     ", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/827/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/827/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/826", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/826/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/826/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/826/events", "html_url": "https://github.com/salsa-rs/salsa/pull/826", "id": 3024911757, "node_id": "PR_kwDOCPxbTc6UKphS", "number": 826, "title": "fix: correct debug output for tracked fields", "user": {"login": "gvozdvmozgu", "id": 131762131, "node_id": "U_kgDOB9qH0w", "avatar_url": "https://avatars.githubusercontent.com/u/131762131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gvozdvmozgu", "html_url": "https://github.com/gvozdvmozgu", "followers_url": "https://api.github.com/users/gvozdvmozgu/followers", "following_url": "https://api.github.com/users/gvozdvmozgu/following{/other_user}", "gists_url": "https://api.github.com/users/gvozdvmozgu/gists{/gist_id}", "starred_url": "https://api.github.com/users/gvozdvmozgu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gvozdvmozgu/subscriptions", "organizations_url": "https://api.github.com/users/gvozdvmozgu/orgs", "repos_url": "https://api.github.com/users/gvozdvmozgu/repos", "events_url": "https://api.github.com/users/gvozdvmozgu/events{/privacy}", "received_events_url": "https://api.github.com/users/gvozdvmozgu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-28T13:18:11Z", "updated_at": "2025-04-28T13:36:28Z", "closed_at": "2025-04-28T13:36:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/826", "html_url": "https://github.com/salsa-rs/salsa/pull/826", "diff_url": "https://github.com/salsa-rs/salsa/pull/826.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/826.patch", "merged_at": "2025-04-28T13:36:28Z"}, "body": "close #814", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/826/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/826/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/825", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/825/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/825/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/825/events", "html_url": "https://github.com/salsa-rs/salsa/pull/825", "id": 3024768941, "node_id": "PR_kwDOCPxbTc6UKKgZ", "number": 825, "title": "fix: Fix incorrect `values_equal` signature", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-28T12:24:58Z", "updated_at": "2025-04-28T12:52:09Z", "closed_at": "2025-04-28T12:52:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/825", "html_url": "https://github.com/salsa-rs/salsa/pull/825", "diff_url": "https://github.com/salsa-rs/salsa/pull/825.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/825.patch", "merged_at": "2025-04-28T12:52:08Z"}, "body": "cc https://github.com/salsa-rs/salsa/pull/820\r\nunsure why this didn't fail CI anywhere. Rust is weird when it comes to lifetimes and trait functions", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/825/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/825/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/824", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/824/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/824/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/824/events", "html_url": "https://github.com/salsa-rs/salsa/pull/824", "id": 3024659266, "node_id": "PR_kwDOCPxbTc6UJy2T", "number": 824, "title": "fix: allow unused lifetimes in tracked_struct expansion", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-28T11:40:07Z", "updated_at": "2025-04-28T12:04:39Z", "closed_at": "2025-04-28T12:01:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/824", "html_url": "https://github.com/salsa-rs/salsa/pull/824", "diff_url": "https://github.com/salsa-rs/salsa/pull/824.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/824.patch", "merged_at": "2025-04-28T12:01:06Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/824/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/824/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/823", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/823/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/823/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/823/events", "html_url": "https://github.com/salsa-rs/salsa/pull/823", "id": 3024043745, "node_id": "PR_kwDOCPxbTc6UHrhN", "number": 823, "title": "Attempt to fix codspeed", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-28T07:54:45Z", "updated_at": "2025-04-28T08:15:06Z", "closed_at": "2025-04-28T08:15:05Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/823", "html_url": "https://github.com/salsa-rs/salsa/pull/823", "diff_url": "https://github.com/salsa-rs/salsa/pull/823.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/823.patch", "merged_at": "2025-04-28T08:15:05Z"}, "body": "I removed this last week but I think that made codspeed no longer update its baseline", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/823/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/822", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/822/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/822/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/822/events", "html_url": "https://github.com/salsa-rs/salsa/pull/822", "id": 3024029196, "node_id": "PR_kwDOCPxbTc6UHocM", "number": 822, "title": "refactor: Simplify ID conversions", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-28T07:48:46Z", "updated_at": "2025-04-28T12:10:58Z", "closed_at": "2025-04-28T12:10:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/822", "html_url": "https://github.com/salsa-rs/salsa/pull/822", "diff_url": "https://github.com/salsa-rs/salsa/pull/822.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/822.patch", "merged_at": "2025-04-28T12:10:57Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/822/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/821", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/821/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/821/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/821/events", "html_url": "https://github.com/salsa-rs/salsa/pull/821", "id": 3023969145, "node_id": "PR_kwDOCPxbTc6UHblB", "number": 821, "title": "cleanup: Remove unnecessary `Array` abstraction", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-28T07:23:31Z", "updated_at": "2025-04-28T07:44:03Z", "closed_at": "2025-04-28T07:44:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/821", "html_url": "https://github.com/salsa-rs/salsa/pull/821", "diff_url": "https://github.com/salsa-rs/salsa/pull/821.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/821.patch", "merged_at": "2025-04-28T07:44:02Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/821/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/821/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/820", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/820/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/820/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/820/events", "html_url": "https://github.com/salsa-rs/salsa/pull/820", "id": 3023823277, "node_id": "PR_kwDOCPxbTc6UG74c", "number": 820, "title": "Add a compile-fail test for a `'static` `!Update` struct", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-04-28T06:16:27Z", "updated_at": "2025-04-28T12:11:08Z", "closed_at": "2025-04-28T07:19:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/820", "html_url": "https://github.com/salsa-rs/salsa/pull/820", "diff_url": "https://github.com/salsa-rs/salsa/pull/820.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/820.patch", "merged_at": "2025-04-28T07:19:41Z"}, "body": "Closes https://github.com/salsa-rs/salsa/issues/683", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/820/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/820/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/819", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/819/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/819/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/819/events", "html_url": "https://github.com/salsa-rs/salsa/pull/819", "id": 3019301144, "node_id": "PR_kwDOCPxbTc6T38dR", "number": 819, "title": "chore: Include struct name in formatted input-field index", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-25T08:01:07Z", "updated_at": "2025-04-25T09:56:27Z", "closed_at": "2025-04-25T09:56:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/819", "html_url": "https://github.com/salsa-rs/salsa/pull/819", "diff_url": "https://github.com/salsa-rs/salsa/pull/819.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/819.patch", "merged_at": "2025-04-25T09:56:26Z"}, "body": "Similar to tracked struct fields, include the struct name in the formatted index of input-fields. \n\nIt's not clear to me how to write a test for this because the formatted index is only used in tracing logs. \n\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/819/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/818", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/818/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/818/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/818/events", "html_url": "https://github.com/salsa-rs/salsa/pull/818", "id": 3018045080, "node_id": "PR_kwDOCPxbTc6TzwGz", "number": 818, "title": "minor: Force inline `fetch_hot`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-24T17:57:29Z", "updated_at": "2025-04-24T18:17:45Z", "closed_at": "2025-04-24T18:17:45Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/818", "html_url": "https://github.com/salsa-rs/salsa/pull/818", "diff_url": "https://github.com/salsa-rs/salsa/pull/818.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/818.patch", "merged_at": "2025-04-24T18:17:45Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/818/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/818/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/817", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/817/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/817/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/817/events", "html_url": "https://github.com/salsa-rs/salsa/pull/817", "id": 3018020412, "node_id": "PR_kwDOCPxbTc6TzrQC", "number": 817, "title": "fix: Access to tracked-struct that was freed during fixpoint", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1072718939, "node_id": "MDU6TGFiZWwxMDcyNzE4OTM5", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2025-04-24T17:48:37Z", "updated_at": "2025-04-28T14:34:12Z", "closed_at": "2025-04-28T14:34:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/817", "html_url": "https://github.com/salsa-rs/salsa/pull/817", "diff_url": "https://github.com/salsa-rs/salsa/pull/817.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/817.patch", "merged_at": "2025-04-28T14:34:11Z"}, "body": "Fixes a bug in fixpoint iteration where salsa freed a tracked struct created in the cycle's first iteration but not in later iterations and was part of the final result of the cycle. Reading any field from that tracked struct resulted in a panic. \r\n\r\nTracked structs are owned by the query that created them and are freed when they aren't recreated when the query is re-executed. Fixpoint complicates things because a tracked struct might be created in the first iteration of a query but not in its second iteration. However, freeing the tracked struct from the first iteration isn't safe because it might now be used as part of the result from other queries participating in the same cycle. Therefore, the query (memo) in the final iteration must own all tracked structs that it created in previous iterations. \r\n\r\nThe way this is implemented in this PR is that salsa now copies over the outputs from previous provisional memos that were created in the same revision. There's an inline comment explaining why the logic is limited to the same revision. It would be great if we could lift that constraint but I believe it introduces a memory leak if we do. \r\n\r\n\r\nI'm not sure what the source is for the tests failing on GitHub runners. They pass locally (x86 vs arm). I'll open this for review to get some initial feedback. I'll try to identify the cause of the failing tests if we think this is a direction worth pursuing.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/817/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/817/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/816", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/816/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/816/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/816/events", "html_url": "https://github.com/salsa-rs/salsa/pull/816", "id": 3017134388, "node_id": "PR_kwDOCPxbTc6Twp24", "number": 816, "title": "shrink_to_fit `IdentityMap` before storing it", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1075394980, "node_id": "MDU6TGFiZWwxMDc1Mzk0OTgw", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/refactoring", "name": "refactoring", "color": "d547e5", "default": false, "description": "Code works but is messy"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-24T12:37:48Z", "updated_at": "2025-05-26T13:12:47Z", "closed_at": "2025-05-26T13:12:46Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/816", "html_url": "https://github.com/salsa-rs/salsa/pull/816", "diff_url": "https://github.com/salsa-rs/salsa/pull/816.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/816.patch", "merged_at": "2025-05-26T13:12:46Z"}, "body": "Notable we do not do this for cycles, given there the memo is likely temporary anyways", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/816/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/813", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/813/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/813/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/813/events", "html_url": "https://github.com/salsa-rs/salsa/pull/813", "id": 3016703095, "node_id": "PR_kwDOCPxbTc6TvLdd", "number": 813, "title": "Use `DatabaseKey` for interned events", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-04-24T09:59:26Z", "updated_at": "2025-04-24T10:49:32Z", "closed_at": "2025-04-24T10:49:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/813", "html_url": "https://github.com/salsa-rs/salsa/pull/813", "diff_url": "https://github.com/salsa-rs/salsa/pull/813.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/813.patch", "merged_at": "2025-04-24T10:49:31Z"}, "body": "Similar to other events, use `DatabaseKey` for interned events.\nThis has the advantage that logging the event reveals the id *and the struct name*\n\n## Test plan\n\nSee updated snapshot tests\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/813/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/813/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/812", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/812/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/812/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/812/events", "html_url": "https://github.com/salsa-rs/salsa/pull/812", "id": 3011445744, "node_id": "PR_kwDOCPxbTc6TdWif", "number": 812, "title": "perf: Don't store the fields in the interned map", "user": {"login": "ChayimFriedman2", "id": 24700207, "node_id": "MDQ6VXNlcjI0NzAwMjA3", "avatar_url": "https://avatars.githubusercontent.com/u/24700207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChayimFriedman2", "html_url": "https://github.com/ChayimFriedman2", "followers_url": "https://api.github.com/users/ChayimFriedman2/followers", "following_url": "https://api.github.com/users/ChayimFriedman2/following{/other_user}", "gists_url": "https://api.github.com/users/ChayimFriedman2/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChayimFriedman2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChayimFriedman2/subscriptions", "organizations_url": "https://api.github.com/users/ChayimFriedman2/orgs", "repos_url": "https://api.github.com/users/ChayimFriedman2/repos", "events_url": "https://api.github.com/users/ChayimFriedman2/events{/privacy}", "received_events_url": "https://api.github.com/users/ChayimFriedman2/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-22T15:35:03Z", "updated_at": "2025-04-22T16:40:01Z", "closed_at": "2025-04-22T16:37:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/812", "html_url": "https://github.com/salsa-rs/salsa/pull/812", "diff_url": "https://github.com/salsa-rs/salsa/pull/812.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/812.patch", "merged_at": "2025-04-22T16:37:07Z"}, "body": "Instead, store only an `Id`, to save memory.\r\n\r\nThis saves 65mb on rust-analyzer. Wants to see the speed impact.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/812/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/811", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/811/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/811/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/811/events", "html_url": "https://github.com/salsa-rs/salsa/pull/811", "id": 3010917673, "node_id": "PR_kwDOCPxbTc6Tbjz8", "number": 811, "title": "chore: release v0.21.0", "user": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-04-22T12:20:30Z", "updated_at": "2025-04-29T17:13:08Z", "closed_at": "2025-04-29T17:13:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/811", "html_url": "https://github.com/salsa-rs/salsa/pull/811", "diff_url": "https://github.com/salsa-rs/salsa/pull/811.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/811.patch", "merged_at": "2025-04-29T17:13:06Z"}, "body": "\n\n\n## \ud83e\udd16 New release\n\n* `salsa-macro-rules`: 0.20.0 -> 0.21.0 (\u2713 API compatible changes)\n* `salsa-macros`: 0.20.0 -> 0.21.0\n* `salsa`: 0.20.0 -> 0.21.0 (\u26a0 API breaking changes)\n\n### \u26a0 `salsa` breaking changes\n\n```text\n--- failure enum_struct_variant_field_added: pub enum struct variant field added ---\n\nDescription:\nAn enum's exhaustive struct variant has a new field, which has to be included when constructing or matching on this variant.\n        ref: https://doc.rust-lang.org/reference/attributes/type_system.html#the-non_exhaustive-attribute\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.40.0/src/lints/enum_struct_variant_field_added.ron\n\nFailed in:\n  field key of variant EventKind::DidInternValue in /tmp/.tmpwVS0h2/salsa/src/event.rs:105\n  field key of variant EventKind::DidReinternValue in /tmp/.tmpwVS0h2/salsa/src/event.rs:114\n\n--- failure enum_struct_variant_field_missing: pub enum struct variant's field removed or renamed ---\n\nDescription:\nA publicly-visible enum has a struct variant whose field is no longer available under its prior name. It may have been renamed or removed entirely.\n        ref: https://doc.rust-lang.org/cargo/reference/semver.html#item-remove\n       impl: https://github.com/obi1kenobi/cargo-semver-checks/tree/v0.40.0/src/lints/enum_struct_variant_field_missing.ron\n\nFailed in:\n  field id of variant EventKind::DidInternValue, previously in file /tmp/.tmpwQkGAX/salsa/src/event.rs:105\n  field id of variant EventKind::DidReinternValue, previously in file /tmp/.tmpwQkGAX/salsa/src/event.rs:114\n```\n\n<details><summary><i><b>Changelog</b></i></summary><p>\n\n## `salsa-macro-rules`\n\n<blockquote>\n\n## [0.21.0](https://github.com/salsa-rs/salsa/compare/salsa-macro-rules-v0.20.0...salsa-macro-rules-v0.21.0) - 2025-04-29\n\n### Fixed\n\n- correct debug output for tracked fields ([#826](https://github.com/salsa-rs/salsa/pull/826))\n- allow unused lifetimes in tracked_struct expansion ([#824](https://github.com/salsa-rs/salsa/pull/824))\n\n### Other\n\n- Implement a query stack `Backtrace` analog ([#827](https://github.com/salsa-rs/salsa/pull/827))\n- Simplify ID conversions ([#822](https://github.com/salsa-rs/salsa/pull/822))\n- Remove unnecessary `Array` abstraction ([#821](https://github.com/salsa-rs/salsa/pull/821))\n- Add a compile-fail test for a `'static` `!Update` struct ([#820](https://github.com/salsa-rs/salsa/pull/820))\n- squelch most clippy warnings in generated code ([#809](https://github.com/salsa-rs/salsa/pull/809))\n</blockquote>\n\n## `salsa-macros`\n\n<blockquote>\n\n## [0.21.0](https://github.com/salsa-rs/salsa/compare/salsa-macros-v0.20.0...salsa-macros-v0.21.0) - 2025-04-29\n\n### Fixed\n\n- allow unused lifetimes in tracked_struct expansion ([#824](https://github.com/salsa-rs/salsa/pull/824))\n\n### Other\n\n- Add a compile-fail test for a `'static` `!Update` struct ([#820](https://github.com/salsa-rs/salsa/pull/820))\n- squelch most clippy warnings in generated code ([#809](https://github.com/salsa-rs/salsa/pull/809))\n- Use `DatabaseKey` for interned events ([#813](https://github.com/salsa-rs/salsa/pull/813))\n</blockquote>\n\n## `salsa`\n\n<blockquote>\n\n## [0.21.0](https://github.com/salsa-rs/salsa/compare/salsa-v0.20.0...salsa-v0.21.0) - 2025-04-29\n\n### Fixed\n\n- Access to tracked-struct that was freed during fixpoint ([#817](https://github.com/salsa-rs/salsa/pull/817))\n- correct debug output for tracked fields ([#826](https://github.com/salsa-rs/salsa/pull/826))\n- Fix incorrect `values_equal` signature ([#825](https://github.com/salsa-rs/salsa/pull/825))\n- allow unused lifetimes in tracked_struct expansion ([#824](https://github.com/salsa-rs/salsa/pull/824))\n\n### Other\n\n- Implement a query stack `Backtrace` analog ([#827](https://github.com/salsa-rs/salsa/pull/827))\n- Simplify ID conversions ([#822](https://github.com/salsa-rs/salsa/pull/822))\n- Attempt to fix codspeed ([#823](https://github.com/salsa-rs/salsa/pull/823))\n- Remove unnecessary `Array` abstraction ([#821](https://github.com/salsa-rs/salsa/pull/821))\n- Add a compile-fail test for a `'static` `!Update` struct ([#820](https://github.com/salsa-rs/salsa/pull/820))\n- squelch most clippy warnings in generated code ([#809](https://github.com/salsa-rs/salsa/pull/809))\n- Include struct name in formatted input-field index ([#819](https://github.com/salsa-rs/salsa/pull/819))\n- Force inline `fetch_hot` ([#818](https://github.com/salsa-rs/salsa/pull/818))\n- Per ingredient sync table ([#650](https://github.com/salsa-rs/salsa/pull/650))\n- Use `DatabaseKey` for interned events ([#813](https://github.com/salsa-rs/salsa/pull/813))\n- [refactor] More `fetch_hot` simplification ([#793](https://github.com/salsa-rs/salsa/pull/793))\n- Don't store the fields in the interned map ([#812](https://github.com/salsa-rs/salsa/pull/812))\n- Fix ci not always running ([#810](https://github.com/salsa-rs/salsa/pull/810))\n</blockquote>\n\n\n</p></details>\n\n---\nThis PR was generated with [release-plz](https://github.com/release-plz/release-plz/).", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/811/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/810", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/810/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/810/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/810/events", "html_url": "https://github.com/salsa-rs/salsa/pull/810", "id": 3010868225, "node_id": "PR_kwDOCPxbTc6TbZKh", "number": 810, "title": "chore: Fix ci not always running", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-22T12:00:23Z", "updated_at": "2025-04-22T12:19:37Z", "closed_at": "2025-04-22T12:19:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/810", "html_url": "https://github.com/salsa-rs/salsa/pull/810", "diff_url": "https://github.com/salsa-rs/salsa/pull/810.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/810.patch", "merged_at": "2025-04-22T12:19:36Z"}, "body": "The paths filter is incompatible with our merge group setup", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/810/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/809", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/809/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/809/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/809/events", "html_url": "https://github.com/salsa-rs/salsa/pull/809", "id": 3010530005, "node_id": "PR_kwDOCPxbTc6TaPeq", "number": 809, "title": "squelch most clippy warnings in generated code", "user": {"login": "gvozdvmozgu", "id": 131762131, "node_id": "U_kgDOB9qH0w", "avatar_url": "https://avatars.githubusercontent.com/u/131762131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gvozdvmozgu", "html_url": "https://github.com/gvozdvmozgu", "followers_url": "https://api.github.com/users/gvozdvmozgu/followers", "following_url": "https://api.github.com/users/gvozdvmozgu/following{/other_user}", "gists_url": "https://api.github.com/users/gvozdvmozgu/gists{/gist_id}", "starred_url": "https://api.github.com/users/gvozdvmozgu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gvozdvmozgu/subscriptions", "organizations_url": "https://api.github.com/users/gvozdvmozgu/orgs", "repos_url": "https://api.github.com/users/gvozdvmozgu/repos", "events_url": "https://api.github.com/users/gvozdvmozgu/events{/privacy}", "received_events_url": "https://api.github.com/users/gvozdvmozgu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-22T09:38:53Z", "updated_at": "2025-04-27T10:08:11Z", "closed_at": "2025-04-27T10:08:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/809", "html_url": "https://github.com/salsa-rs/salsa/pull/809", "diff_url": "https://github.com/salsa-rs/salsa/pull/809.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/809.patch", "merged_at": "2025-04-27T10:08:10Z"}, "body": "close #808", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/809/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/809/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/807", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/807/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/807/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/807/events", "html_url": "https://github.com/salsa-rs/salsa/pull/807", "id": 3009931240, "node_id": "PR_kwDOCPxbTc6TYOHS", "number": 807, "title": "chore: Implement `Update` for `ThinVec`", "user": {"login": "sbillig", "id": 50669, "node_id": "MDQ6VXNlcjUwNjY5", "avatar_url": "https://avatars.githubusercontent.com/u/50669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbillig", "html_url": "https://github.com/sbillig", "followers_url": "https://api.github.com/users/sbillig/followers", "following_url": "https://api.github.com/users/sbillig/following{/other_user}", "gists_url": "https://api.github.com/users/sbillig/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbillig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbillig/subscriptions", "organizations_url": "https://api.github.com/users/sbillig/orgs", "repos_url": "https://api.github.com/users/sbillig/repos", "events_url": "https://api.github.com/users/sbillig/events{/privacy}", "received_events_url": "https://api.github.com/users/sbillig/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-22T05:37:41Z", "updated_at": "2025-04-22T06:05:09Z", "closed_at": "2025-04-22T06:05:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/807", "html_url": "https://github.com/salsa-rs/salsa/pull/807", "diff_url": "https://github.com/salsa-rs/salsa/pull/807.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/807.patch", "merged_at": "2025-04-22T06:05:09Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/807/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/807/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/806", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/806/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/806/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/806/events", "html_url": "https://github.com/salsa-rs/salsa/pull/806", "id": 3008231965, "node_id": "PR_kwDOCPxbTc6TSf_t", "number": 806, "title": "perf: Don't push an unnecessary active query for `deep_verify_memo`", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-21T11:37:30Z", "updated_at": "2025-04-21T14:18:45Z", "closed_at": "2025-04-21T14:18:44Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/806", "html_url": "https://github.com/salsa-rs/salsa/pull/806", "diff_url": "https://github.com/salsa-rs/salsa/pull/806.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/806.patch", "merged_at": "2025-04-21T14:18:44Z"}, "body": "Turns out the only thing that makes use of the pushed query within the scope of the push and drop of the guard in `deep_verify_memo` is `function::Ingredient::maybe_changed_after` which itself already pushes the query if it needs to. So all of this is actually unnecessary.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/806/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/805", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/805/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/805/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/805/events", "html_url": "https://github.com/salsa-rs/salsa/pull/805", "id": 3008066199, "node_id": "PR_kwDOCPxbTc6TR7hB", "number": 805, "title": "perf: Inline/Outline more cold and slow paths", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-21T10:04:03Z", "updated_at": "2025-04-21T10:50:36Z", "closed_at": "2025-04-21T10:50:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/805", "html_url": "https://github.com/salsa-rs/salsa/pull/805", "diff_url": "https://github.com/salsa-rs/salsa/pull/805.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/805.patch", "merged_at": "2025-04-21T10:50:35Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/805/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/804", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/804/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/804/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/804/events", "html_url": "https://github.com/salsa-rs/salsa/pull/804", "id": 3007225403, "node_id": "PR_kwDOCPxbTc6TPJbr", "number": 804, "title": "Make interned's last_interned_at equal Revision::MAX if they are interned outside a quer", "user": {"login": "ChayimFriedman2", "id": 24700207, "node_id": "MDQ6VXNlcjI0NzAwMjA3", "avatar_url": "https://avatars.githubusercontent.com/u/24700207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChayimFriedman2", "html_url": "https://github.com/ChayimFriedman2", "followers_url": "https://api.github.com/users/ChayimFriedman2/followers", "following_url": "https://api.github.com/users/ChayimFriedman2/following{/other_user}", "gists_url": "https://api.github.com/users/ChayimFriedman2/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChayimFriedman2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChayimFriedman2/subscriptions", "organizations_url": "https://api.github.com/users/ChayimFriedman2/orgs", "repos_url": "https://api.github.com/users/ChayimFriedman2/repos", "events_url": "https://api.github.com/users/ChayimFriedman2/events{/privacy}", "received_events_url": "https://api.github.com/users/ChayimFriedman2/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2025-04-20T20:59:14Z", "updated_at": "2025-04-28T16:40:33Z", "closed_at": "2025-04-22T10:51:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/804", "html_url": "https://github.com/salsa-rs/salsa/pull/804", "diff_url": "https://github.com/salsa-rs/salsa/pull/804.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/804.patch", "merged_at": "2025-04-22T10:51:39Z"}, "body": "There is an assert that `last_interned_at >= last_changed_revision`, and it can fail without this, see the added test.\r\n\r\nCC @ibraheemdev, you introduced this assert in #602.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/804/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/803", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/803/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/803/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/803/events", "html_url": "https://github.com/salsa-rs/salsa/pull/803", "id": 3007095310, "node_id": "PR_kwDOCPxbTc6TOwIo", "number": 803, "title": "perf: Reduce memory usage by deduplicating type information", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2025-04-20T16:01:59Z", "updated_at": "2025-04-22T11:34:09Z", "closed_at": "2025-04-22T11:34:09Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/803", "html_url": "https://github.com/salsa-rs/salsa/pull/803", "diff_url": "https://github.com/salsa-rs/salsa/pull/803.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/803.patch", "merged_at": "2025-04-22T11:34:09Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/803/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/801", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/801/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/801/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/801/events", "html_url": "https://github.com/salsa-rs/salsa/pull/801", "id": 3003729255, "node_id": "PR_kwDOCPxbTc6TDk9g", "number": 801, "title": "Add a third cycle mode, equivalent to old Salsa cycle behavior", "user": {"login": "ChayimFriedman2", "id": 24700207, "node_id": "MDQ6VXNlcjI0NzAwMjA3", "avatar_url": "https://avatars.githubusercontent.com/u/24700207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChayimFriedman2", "html_url": "https://github.com/ChayimFriedman2", "followers_url": "https://api.github.com/users/ChayimFriedman2/followers", "following_url": "https://api.github.com/users/ChayimFriedman2/following{/other_user}", "gists_url": "https://api.github.com/users/ChayimFriedman2/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChayimFriedman2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChayimFriedman2/subscriptions", "organizations_url": "https://api.github.com/users/ChayimFriedman2/orgs", "repos_url": "https://api.github.com/users/ChayimFriedman2/repos", "events_url": "https://api.github.com/users/ChayimFriedman2/events{/privacy}", "received_events_url": "https://api.github.com/users/ChayimFriedman2/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2025-04-18T01:38:25Z", "updated_at": "2025-09-19T11:21:43Z", "closed_at": "2025-04-22T10:45:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/801", "html_url": "https://github.com/salsa-rs/salsa/pull/801", "diff_url": "https://github.com/salsa-rs/salsa/pull/801.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/801.patch", "merged_at": "2025-04-22T10:45:22Z"}, "body": "That is, directly set a value for all queries that have fallbacks, and ignore all other queries in the cycle.\r\n\r\nUnlike old Salsa, we still need all cycle heads to be marked, and we still execute the queries to completion, but we throw their result.\r\n\r\nThis is an alternative to @Veykril's #798 PR, that doesn't suffer from non-determinism.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/801/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/801/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/799", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/799/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/799/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/799/events", "html_url": "https://github.com/salsa-rs/salsa/pull/799", "id": 3002785828, "node_id": "PR_kwDOCPxbTc6TAY6W", "number": 799, "title": "chore: Adjust `#[inline]` annotations", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-17T15:11:24Z", "updated_at": "2025-04-17T16:39:40Z", "closed_at": "2025-04-17T16:39:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/799", "html_url": "https://github.com/salsa-rs/salsa/pull/799", "diff_url": "https://github.com/salsa-rs/salsa/pull/799.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/799.patch", "merged_at": "2025-04-17T16:39:39Z"}, "body": "A lot of attached calls/definitions seem to hover around the default inlining limit making the codspeed reports difficult to interpret at times, generally these should benefit from being inlined either way as the \"attached\" code paths are quite hot.\r\n\r\nAside from those, this PR touches up on a lot of other call sites for instructing inlining behavior, as just changing the attached calls has a negative impact overall on the remainder of the inlining behaviors. These additional explicit annotations bring things back in line.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/799/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/799/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/797", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/797/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/797/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/797/events", "html_url": "https://github.com/salsa-rs/salsa/pull/797", "id": 2999507361, "node_id": "PR_kwDOCPxbTc6S1T4E", "number": 797, "title": "Remove incorrect `parallel_scope` API", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-16T12:33:11Z", "updated_at": "2025-04-16T14:19:56Z", "closed_at": "2025-04-16T14:19:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/797", "html_url": "https://github.com/salsa-rs/salsa/pull/797", "diff_url": "https://github.com/salsa-rs/salsa/pull/797.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/797.patch", "merged_at": "2025-04-16T14:19:55Z"}, "body": "Rayon does not allow joining on the spawns, meaning we might end up with results in the tests before reading out the panics\r\n\r\nThis API is generally brittle so lets remove it\r\n\r\nFixes https://github.com/salsa-rs/salsa/issues/795", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/797/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/796", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/796/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/796/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/796/events", "html_url": "https://github.com/salsa-rs/salsa/pull/796", "id": 2999483977, "node_id": "PR_kwDOCPxbTc6S1OwT", "number": 796, "title": "Print query stack when encountering unexpected cycle", "user": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-16T12:24:37Z", "updated_at": "2025-04-17T10:35:04Z", "closed_at": "2025-04-17T10:35:03Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/796", "html_url": "https://github.com/salsa-rs/salsa/pull/796", "diff_url": "https://github.com/salsa-rs/salsa/pull/796.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/796.patch", "merged_at": "2025-04-17T10:35:03Z"}, "body": "Example output\r\n```\r\ndependency graph cycle when validating impl_self_ty_shim(Id(4000)), set cycle_fn/cycle_initial to fixpoint iterate.\r\nQuery stack:\r\n[\r\n    infer_shim(Id(4400)),\r\n    trait_solve_shim(Id(6800)),\r\n    trait_impls_in_deps_shim(Id(1c00)),\r\n    trait_impls_in_crate_shim(Id(1c00)),\r\n    impl_trait_shim(Id(4000)),\r\n    impl_trait_with_diagnostics_shim(Id(4000)),\r\n    impl_self_ty_shim(Id(4000)),\r\n    impl_self_ty_with_diagnostics_shim(Id(4000)),\r\n]\r\n```", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/796/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/794", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/794/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/794/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/794/events", "html_url": "https://github.com/salsa-rs/salsa/pull/794", "id": 2990785553, "node_id": "PR_kwDOCPxbTc6SXpfj", "number": 794, "title": "Update compact_str from 0.8 to 0.9", "user": {"login": "musicinmybrain", "id": 6898909, "node_id": "MDQ6VXNlcjY4OTg5MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/6898909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/musicinmybrain", "html_url": "https://github.com/musicinmybrain", "followers_url": "https://api.github.com/users/musicinmybrain/followers", "following_url": "https://api.github.com/users/musicinmybrain/following{/other_user}", "gists_url": "https://api.github.com/users/musicinmybrain/gists{/gist_id}", "starred_url": "https://api.github.com/users/musicinmybrain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/musicinmybrain/subscriptions", "organizations_url": "https://api.github.com/users/musicinmybrain/orgs", "repos_url": "https://api.github.com/users/musicinmybrain/repos", "events_url": "https://api.github.com/users/musicinmybrain/events{/privacy}", "received_events_url": "https://api.github.com/users/musicinmybrain/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-12T23:34:20Z", "updated_at": "2025-04-22T06:17:43Z", "closed_at": "2025-04-22T06:17:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/794", "html_url": "https://github.com/salsa-rs/salsa/pull/794", "diff_url": "https://github.com/salsa-rs/salsa/pull/794.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/794.patch", "merged_at": "2025-04-22T06:17:43Z"}, "body": "https://github.com/ParkMyCar/compact_str/blob/v0.9.0/CHANGELOG.md#090\r\n\r\nI verified that `cargo test --workspace --all-features` still passes.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/794/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/794/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/793", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/793/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/793/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/793/events", "html_url": "https://github.com/salsa-rs/salsa/pull/793", "id": 2987673391, "node_id": "PR_kwDOCPxbTc6SNPNa", "number": 793, "title": "[refactor] More `fetch_hot` simplification", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1075394980, "node_id": "MDU6TGFiZWwxMDc1Mzk0OTgw", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/refactoring", "name": "refactoring", "color": "d547e5", "default": false, "description": "Code works but is messy"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-11T06:24:45Z", "updated_at": "2025-04-23T13:34:39Z", "closed_at": "2025-04-23T13:34:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/793", "html_url": "https://github.com/salsa-rs/salsa/pull/793", "diff_url": "https://github.com/salsa-rs/salsa/pull/793.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/793.patch", "merged_at": "2025-04-23T13:34:38Z"}, "body": "Move the `validate_maybe_provisional` out of `fetch_hot` and only test if the memo is provisional (in which case we shouldn't mark the memo as updated). \r\nRely on `fetch_cold` to lazily validate the memo. \r\n\r\n\r\nCodspeed thinks this is slightly better in some benchmarks (but the results change between runs). There's no meaningful change in Red Knot's benchmarks. I think it simplifies the logic a tiny bit. But I'm also okay not landing this change.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/793/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/793/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/792", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/792/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/792/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/792/events", "html_url": "https://github.com/salsa-rs/salsa/pull/792", "id": 2984767919, "node_id": "PR_kwDOCPxbTc6SDTnn", "number": 792, "title": "[refactor] Simplify `fetch_hot`", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1075394980, "node_id": "MDU6TGFiZWwxMDc1Mzk0OTgw", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/refactoring", "name": "refactoring", "color": "d547e5", "default": false, "description": "Code works but is messy"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-10T07:41:56Z", "updated_at": "2025-04-10T16:51:36Z", "closed_at": "2025-04-10T16:51:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/792", "html_url": "https://github.com/salsa-rs/salsa/pull/792", "diff_url": "https://github.com/salsa-rs/salsa/pull/792.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/792.patch", "merged_at": "2025-04-10T16:51:35Z"}, "body": "The basic promise of `fetch_hot` is to do the minimal amount of work for the common case and fall back to `fetch_cold` \r\nwhich repeats some of the checks for the rare cases where `fetch_hot` wasn't successful (because we failed to claim a guard, or a deep update is required).\r\n\r\nThis PR simplifies `fetch_hot` by moving the `same_iteration` check for cycle handling into `fetch_cold` (which has the advantage that `maybe_changed_after` also uses it). \r\nMoving the check wasn't as trivial as I hoped because it's important that we don't push the new query until after verifying if the memo is a provisional value from the same iteration. \r\n\r\n## Performance \r\nCodspeed reports a 2-3% perf improvement for most benchmarks.\r\n\r\nThere's a 1% perf improvement on Red Knot's incremental benchmarks https://codspeed.io/astral-sh/ruff/branches/micha%2Ftest-salsa-perf\r\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/792/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/792/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/791", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/791/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/791/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/791/events", "html_url": "https://github.com/salsa-rs/salsa/pull/791", "id": 2984651457, "node_id": "PR_kwDOCPxbTc6SC6Kf", "number": 791, "title": "[refactor] Reuse the same stack for all cycles heads in `validate_same_iteration`", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1075394980, "node_id": "MDU6TGFiZWwxMDc1Mzk0OTgw", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/refactoring", "name": "refactoring", "color": "d547e5", "default": false, "description": "Code works but is messy"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-04-10T06:52:43Z", "updated_at": "2025-04-11T14:01:12Z", "closed_at": "2025-04-10T15:00:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/791", "html_url": "https://github.com/salsa-rs/salsa/pull/791", "diff_url": "https://github.com/salsa-rs/salsa/pull/791.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/791.patch", "merged_at": "2025-04-10T15:00:54Z"}, "body": "Retrieve the `QueryStack` once (including `zalsa_local`) instead of once for each cycle head\n\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/791/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/791/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/790", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/790/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/790/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/790/events", "html_url": "https://github.com/salsa-rs/salsa/pull/790", "id": 2984348505, "node_id": "PR_kwDOCPxbTc6SB4T6", "number": 790, "title": "add WillIterateCycle event", "user": {"login": "carljm", "id": 61586, "node_id": "MDQ6VXNlcjYxNTg2", "avatar_url": "https://avatars.githubusercontent.com/u/61586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carljm", "html_url": "https://github.com/carljm", "followers_url": "https://api.github.com/users/carljm/followers", "following_url": "https://api.github.com/users/carljm/following{/other_user}", "gists_url": "https://api.github.com/users/carljm/gists{/gist_id}", "starred_url": "https://api.github.com/users/carljm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carljm/subscriptions", "organizations_url": "https://api.github.com/users/carljm/orgs", "repos_url": "https://api.github.com/users/carljm/repos", "events_url": "https://api.github.com/users/carljm/events{/privacy}", "received_events_url": "https://api.github.com/users/carljm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-04-10T03:28:30Z", "updated_at": "2025-04-10T13:24:06Z", "closed_at": "2025-04-10T13:24:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/790", "html_url": "https://github.com/salsa-rs/salsa/pull/790", "diff_url": "https://github.com/salsa-rs/salsa/pull/790.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/790.patch", "merged_at": "2025-04-10T13:24:05Z"}, "body": "I would like to write tests asserting about cycles iterated and log cycles iterated as a metric. Add a `WillIterateCycle` event and fire it whenever a cycle head is about to iterate the cycle again. Update some cycle tests accordingly.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/790/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/790/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/789", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/789/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/789/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/789/events", "html_url": "https://github.com/salsa-rs/salsa/pull/789", "id": 2983524736, "node_id": "PR_kwDOCPxbTc6R_GY2", "number": 789, "title": "[fix] Use `validate_maybe_provisional` instead of `validate_provisional`", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-09T18:06:01Z", "updated_at": "2025-04-09T18:26:05Z", "closed_at": "2025-04-09T18:26:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/789", "html_url": "https://github.com/salsa-rs/salsa/pull/789", "diff_url": "https://github.com/salsa-rs/salsa/pull/789.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/789.patch", "merged_at": "2025-04-09T18:26:04Z"}, "body": "I accidentally changed the `validate_maybe_provisional` calls to `validate_provisional` in https://github.com/salsa-rs/salsa/pull/788. This is bad for performance because it prevents Salsa from short-circuiting if the memo is already finalized. ", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/789/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/788", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/788/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/788/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/788/events", "html_url": "https://github.com/salsa-rs/salsa/pull/788", "id": 2982618088, "node_id": "PR_kwDOCPxbTc6R7_6i", "number": 788, "title": "fix: Dereferencing freed memos when verifying provisional memos", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1072718939, "node_id": "MDU6TGFiZWwxMDcyNzE4OTM5", "url": "https://api.github.com/repos/salsa-rs/salsa/labels/bug", "name": "bug", "color": "d73a4a", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-09T12:07:47Z", "updated_at": "2025-04-09T16:50:06Z", "closed_at": "2025-04-09T16:50:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/788", "html_url": "https://github.com/salsa-rs/salsa/pull/788", "diff_url": "https://github.com/salsa-rs/salsa/pull/788.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/788.patch", "merged_at": "2025-04-09T16:50:05Z"}, "body": "Fixes https://github.com/salsa-rs/salsa/issues/785\r\n\r\nThe root cause of #785 is that Salsa tries to load the memo of a cycle head that is stored on a tracked struct that has been freed. \r\n\r\nThe main problem is that we tried to verify `validate_provisional` even in cases where the query is from a past revision, in which case we can't trust any inputs to still exist (and be valid). \r\n\r\nThe fix in this PR is to change the order in which `shallow_verify` and `validate_provisional` are called. This requires extracting the *mutating* bits out of `shallow_verify` because we only want to call those if the struct isn't provisional (at least, that's what we did before and I tried to preserve this behavior). \r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/788/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/787", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/787/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/787/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/787/events", "html_url": "https://github.com/salsa-rs/salsa/pull/787", "id": 2974274476, "node_id": "PR_kwDOCPxbTc6Rgb_j", "number": 787, "title": "[refactor] Use `ThinVec` for `CycleHeads`", "user": {"login": "MichaReiser", "id": 1203881, "node_id": "MDQ6VXNlcjEyMDM4ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1203881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaReiser", "html_url": "https://github.com/MichaReiser", "followers_url": "https://api.github.com/users/MichaReiser/followers", "following_url": "https://api.github.com/users/MichaReiser/following{/other_user}", "gists_url": "https://api.github.com/users/MichaReiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaReiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaReiser/subscriptions", "organizations_url": "https://api.github.com/users/MichaReiser/orgs", "repos_url": "https://api.github.com/users/MichaReiser/repos", "events_url": "https://api.github.com/users/MichaReiser/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaReiser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-05T15:12:27Z", "updated_at": "2025-04-05T19:03:08Z", "closed_at": "2025-04-05T19:03:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/787", "html_url": "https://github.com/salsa-rs/salsa/pull/787", "diff_url": "https://github.com/salsa-rs/salsa/pull/787.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/787.patch", "merged_at": "2025-04-05T19:03:07Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/787/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/787/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/786", "repository_url": "https://api.github.com/repos/salsa-rs/salsa", "labels_url": "https://api.github.com/repos/salsa-rs/salsa/issues/786/labels{/name}", "comments_url": "https://api.github.com/repos/salsa-rs/salsa/issues/786/comments", "events_url": "https://api.github.com/repos/salsa-rs/salsa/issues/786/events", "html_url": "https://github.com/salsa-rs/salsa/pull/786", "id": 2967437584, "node_id": "PR_kwDOCPxbTc6RJUjs", "number": 786, "title": "allow reuse of cached provisional memos within the same cycle iteration", "user": {"login": "carljm", "id": 61586, "node_id": "MDQ6VXNlcjYxNTg2", "avatar_url": "https://avatars.githubusercontent.com/u/61586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carljm", "html_url": "https://github.com/carljm", "followers_url": "https://api.github.com/users/carljm/followers", "following_url": "https://api.github.com/users/carljm/following{/other_user}", "gists_url": "https://api.github.com/users/carljm/gists{/gist_id}", "starred_url": "https://api.github.com/users/carljm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carljm/subscriptions", "organizations_url": "https://api.github.com/users/carljm/orgs", "repos_url": "https://api.github.com/users/carljm/repos", "events_url": "https://api.github.com/users/carljm/events{/privacy}", "received_events_url": "https://api.github.com/users/carljm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2025-04-02T20:11:38Z", "updated_at": "2025-04-03T15:20:22Z", "closed_at": "2025-04-03T15:20:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/salsa-rs/salsa/pulls/786", "html_url": "https://github.com/salsa-rs/salsa/pull/786", "diff_url": "https://github.com/salsa-rs/salsa/pull/786.diff", "patch_url": "https://github.com/salsa-rs/salsa/pull/786.patch", "merged_at": "2025-04-03T15:20:21Z"}, "body": "Currently, we don't allow provisional memos from cycle iteration to be reused as a memoized result. This is important in case another thread \"peeks\" in while we are still iterating a cycle (it shouldn't see a provisional result), and also so that iteration N+1 of a cycle doesn't reuse results from iteration N; it needs to recompute instead.\r\n\r\nBut this also means that if the same query is called many times within a single iteration of a cycle, we will re-execute it many times. For example, if query A calls query B, and query B calls query C 1000 times, and query C calls query A, each time we iterate this cycle we will execute query C 1000 times. This can lead to massive blow-up in execution times.\r\n\r\nTo fix this, we need to record in `cycle_heads` of a provisional memo the iteration-count for each cycle in which this memo was recorded. When validating whether a provisional memo can be used by the caller, we must allow it to be used only if we are still within the same iteration of those cycles, and not otherwise.\r\n\r\nThis PR fixes an execution-time blow-up on red-knot that was bad enough that it looked like a hang.", "reactions": {"url": "https://api.github.com/repos/salsa-rs/salsa/issues/786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/salsa-rs/salsa/issues/786/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]