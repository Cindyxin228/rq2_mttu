[{"url": "https://api.github.com/repos/zaeleus/noodles/issues/36", "repository_url": "https://api.github.com/repos/zaeleus/noodles", "labels_url": "https://api.github.com/repos/zaeleus/noodles/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/zaeleus/noodles/issues/36/comments", "events_url": "https://api.github.com/repos/zaeleus/noodles/issues/36/events", "html_url": "https://github.com/zaeleus/noodles/pull/36", "id": 970791180, "node_id": "MDExOlB1bGxSZXF1ZXN0NzEyNjkyOTAz", "number": 36, "title": "builder methods should take ownership", "user": {"login": "jamestwebber", "id": 963647, "node_id": "MDQ6VXNlcjk2MzY0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/963647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamestwebber", "html_url": "https://github.com/jamestwebber", "followers_url": "https://api.github.com/users/jamestwebber/followers", "following_url": "https://api.github.com/users/jamestwebber/following{/other_user}", "gists_url": "https://api.github.com/users/jamestwebber/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamestwebber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamestwebber/subscriptions", "organizations_url": "https://api.github.com/users/jamestwebber/orgs", "repos_url": "https://api.github.com/users/jamestwebber/repos", "events_url": "https://api.github.com/users/jamestwebber/events{/privacy}", "received_events_url": "https://api.github.com/users/jamestwebber/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2663168144, "node_id": "MDU6TGFiZWwyNjYzMTY4MTQ0", "url": "https://api.github.com/repos/zaeleus/noodles/labels/bam", "name": "bam", "color": "000000", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "zaeleus", "id": 191331, "node_id": "MDQ6VXNlcjE5MTMzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/191331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaeleus", "html_url": "https://github.com/zaeleus", "followers_url": "https://api.github.com/users/zaeleus/followers", "following_url": "https://api.github.com/users/zaeleus/following{/other_user}", "gists_url": "https://api.github.com/users/zaeleus/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaeleus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaeleus/subscriptions", "organizations_url": "https://api.github.com/users/zaeleus/orgs", "repos_url": "https://api.github.com/users/zaeleus/repos", "events_url": "https://api.github.com/users/zaeleus/events{/privacy}", "received_events_url": "https://api.github.com/users/zaeleus/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "zaeleus", "id": 191331, "node_id": "MDQ6VXNlcjE5MTMzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/191331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaeleus", "html_url": "https://github.com/zaeleus", "followers_url": "https://api.github.com/users/zaeleus/followers", "following_url": "https://api.github.com/users/zaeleus/following{/other_user}", "gists_url": "https://api.github.com/users/zaeleus/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaeleus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaeleus/subscriptions", "organizations_url": "https://api.github.com/users/zaeleus/orgs", "repos_url": "https://api.github.com/users/zaeleus/repos", "events_url": "https://api.github.com/users/zaeleus/events{/privacy}", "received_events_url": "https://api.github.com/users/zaeleus/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-08-14T01:35:11Z", "updated_at": "2021-08-15T21:40:15Z", "closed_at": "2021-08-14T19:09:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/zaeleus/noodles/pulls/36", "html_url": "https://github.com/zaeleus/noodles/pull/36", "diff_url": "https://github.com/zaeleus/noodles/pull/36.diff", "patch_url": "https://github.com/zaeleus/noodles/pull/36.patch", "merged_at": "2021-08-14T19:09:52Z"}, "body": "I was excited to try out the new multi-threaded async functions, but I ran into what I think is a bug. If I try to build an AsyncWriter using the Builder and `set_worker_count`, it will fail to compile with\r\n\r\n```\r\nerror[E0507]: cannot move out of a mutable reference\r\n  --> src/retag_bam.rs:54:22\r\n   |\r\n54 |       let mut writer = bam::AsyncWriter::builder(file)\r\n   |  ______________________^\r\n55 | |         .set_worker_count(8)\r\n56 | |         .set_compression_level(Compression::fast())\r\n   | |___________________________________________________^ move occurs because value has type `bam::r#async::writer::builder::Builder<tokio::fs::File>`, which does not implement the `Copy` trait\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\nI believe this is because the builder methods were by reference, and they need to take ownership to return the modified object.\r\n\r\nI only modified the bam::AsyncWriter::Builder object here but if you think this is the right change I am happy to make the same tweak for other Builders.", "reactions": {"url": "https://api.github.com/repos/zaeleus/noodles/issues/36/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/zaeleus/noodles/issues/36/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]