[{"url": "https://api.github.com/repos/zhboner/realm/issues/52", "repository_url": "https://api.github.com/repos/zhboner/realm", "labels_url": "https://api.github.com/repos/zhboner/realm/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/zhboner/realm/issues/52/comments", "events_url": "https://api.github.com/repos/zhboner/realm/issues/52/events", "html_url": "https://github.com/zhboner/realm/pull/52", "id": 1145116336, "node_id": "PR_kwDOD6Nam84zMbG4", "number": 52, "title": "Refactor Realm and Upgrade to Realm2", "user": {"login": "zephyrchien", "id": 51367850, "node_id": "MDQ6VXNlcjUxMzY3ODUw", "avatar_url": "https://avatars.githubusercontent.com/u/51367850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zephyrchien", "html_url": "https://github.com/zephyrchien", "followers_url": "https://api.github.com/users/zephyrchien/followers", "following_url": "https://api.github.com/users/zephyrchien/following{/other_user}", "gists_url": "https://api.github.com/users/zephyrchien/gists{/gist_id}", "starred_url": "https://api.github.com/users/zephyrchien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zephyrchien/subscriptions", "organizations_url": "https://api.github.com/users/zephyrchien/orgs", "repos_url": "https://api.github.com/users/zephyrchien/repos", "events_url": "https://api.github.com/users/zephyrchien/events{/privacy}", "received_events_url": "https://api.github.com/users/zephyrchien/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-20T19:47:54Z", "updated_at": "2022-04-15T14:24:48Z", "closed_at": "2022-04-15T08:35:09Z", "author_association": "COLLABORATOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/zhboner/realm/pulls/52", "html_url": "https://github.com/zhboner/realm/pull/52", "diff_url": "https://github.com/zhboner/realm/pull/52.diff", "patch_url": "https://github.com/zhboner/realm/pull/52.patch", "merged_at": "2022-04-15T08:35:09Z"}, "body": "This was initially motivated by #36, about half a year ago. At that time I had submitted a patch,  unfortunately it did not solve the issue. \r\n\r\nAlthough I had found the reason after looking into the stdlib, it was still hard to solve the issue with Realm's architecture. I supposed that even if we had that issue solved, the code would become more complicated and harder to maintain. As a result, I decided to refactor the whole project, to simplify the code and make it easier to bring in new features.\r\n\r\nI have been working on this for a few months([here is the todo-list](https://github.com/zephyrchien/realm/issues/3)), testing new features and solving bugs. Now I think it is stable enough and it is time that I could contribute it to the upstream.\r\n\r\nHere is the feature list:\r\n\r\nNetwork(Core):\r\n\r\n - zero-copy, reimplement with `try_io`(requires `tokio>=1.9`), which is more efficient.\r\n - tcp-fast-open, related feature requests: #13 #40\r\n - proxy-protocol, with this feature realm could replace haproxy/nginx as a more lightweight solution under some use cases\r\n - bind address, or network interface, make it easier to choose ipv4/ipv6 as outbound for a dual-stack VPS, also VPS with multiple IPs will benefit from this feature\r\n - configurable dns resolver: this may meet some users'  special needs\r\n\r\nConfiguration:\r\n\r\n- use a concise format, which is easy to understand even without document. Here is the discussion: #41\r\n- support both toml and json, remaining compatible with the legacy format(there is also a converter subcommand)\r\n- support reading from file, command line, and environment variables(may become useful when building a docker image)\r\n- support different priorities: local/global/override\r\n\r\nLogger:\r\n\r\n- support different log level\r\n- log connection info & error message, making it easier to identify problems\r\n\r\nUtilities:\r\n\r\n- set nofile limit(with `-n` option) when and also print current soft/hard fd limit when starting. The most frequent mentioned issue is runing out of fd(because by default the limit is only 1024 on linux :(\r\n- run as unix daemon(with `-d` option), users don't need to bother to configure systemd any more\r\n\r\nCode Coverage:\r\n\r\n- currently tests of core facilities have been covered, including `tcp`, `udp`, `zero-copy`, `proxy-protocol`\r\n\r\nDocument:\r\n\r\n- there is a detailed document about how to build, use, and configure realm\r\n\r\nCi:\r\n\r\n- make use of github workflow for linting, nightly build, and automatic release", "reactions": {"url": "https://api.github.com/repos/zhboner/realm/issues/52/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/zhboner/realm/issues/52/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/zhboner/realm/issues/50", "repository_url": "https://api.github.com/repos/zhboner/realm", "labels_url": "https://api.github.com/repos/zhboner/realm/issues/50/labels{/name}", "comments_url": "https://api.github.com/repos/zhboner/realm/issues/50/comments", "events_url": "https://api.github.com/repos/zhboner/realm/issues/50/events", "html_url": "https://github.com/zhboner/realm/pull/50", "id": 1093369288, "node_id": "PR_kwDOD6Nam84wgrFd", "number": 50, "title": "add oci image (docker) support", "user": {"login": "noahziheng", "id": 2758317, "node_id": "MDQ6VXNlcjI3NTgzMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2758317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noahziheng", "html_url": "https://github.com/noahziheng", "followers_url": "https://api.github.com/users/noahziheng/followers", "following_url": "https://api.github.com/users/noahziheng/following{/other_user}", "gists_url": "https://api.github.com/users/noahziheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/noahziheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noahziheng/subscriptions", "organizations_url": "https://api.github.com/users/noahziheng/orgs", "repos_url": "https://api.github.com/users/noahziheng/repos", "events_url": "https://api.github.com/users/noahziheng/events{/privacy}", "received_events_url": "https://api.github.com/users/noahziheng/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-04T13:43:43Z", "updated_at": "2022-04-17T11:53:06Z", "closed_at": "2022-04-17T11:53:06Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/zhboner/realm/pulls/50", "html_url": "https://github.com/zhboner/realm/pull/50", "diff_url": "https://github.com/zhboner/realm/pull/50.diff", "patch_url": "https://github.com/zhboner/realm/pull/50.patch", "merged_at": "2022-04-17T11:53:06Z"}, "body": "- feat: Add Dockerfile for container image.\r\n- feat: Add Dockerfile based on alpine for container image.\r\n- ci: New Github Actions workflow for push container image to [`ghcr.io`](https://ghcr.io) when new tags is created or dispatch in workflow UI.\r\n- chore: Add & Update README for container image.", "reactions": {"url": "https://api.github.com/repos/zhboner/realm/issues/50/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/zhboner/realm/issues/50/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]