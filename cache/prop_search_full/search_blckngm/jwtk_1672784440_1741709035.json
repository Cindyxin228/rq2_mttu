[{"url": "https://api.github.com/repos/blckngm/jwtk/issues/12", "repository_url": "https://api.github.com/repos/blckngm/jwtk", "labels_url": "https://api.github.com/repos/blckngm/jwtk/issues/12/labels{/name}", "comments_url": "https://api.github.com/repos/blckngm/jwtk/issues/12/comments", "events_url": "https://api.github.com/repos/blckngm/jwtk/issues/12/events", "html_url": "https://github.com/blckngm/jwtk/pull/12", "id": 2323278353, "node_id": "PR_kwDOF5YvnM5w4hd4", "number": 12, "title": "feat: implement Clone for HeaderAndClaims", "user": {"login": "bittrance", "id": 1666535, "node_id": "MDQ6VXNlcjE2NjY1MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1666535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bittrance", "html_url": "https://github.com/bittrance", "followers_url": "https://api.github.com/users/bittrance/followers", "following_url": "https://api.github.com/users/bittrance/following{/other_user}", "gists_url": "https://api.github.com/users/bittrance/gists{/gist_id}", "starred_url": "https://api.github.com/users/bittrance/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bittrance/subscriptions", "organizations_url": "https://api.github.com/users/bittrance/orgs", "repos_url": "https://api.github.com/users/bittrance/repos", "events_url": "https://api.github.com/users/bittrance/events{/privacy}", "received_events_url": "https://api.github.com/users/bittrance/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-29T13:03:20Z", "updated_at": "2024-05-30T06:49:16Z", "closed_at": "2024-05-30T06:49:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/blckngm/jwtk/pulls/12", "html_url": "https://github.com/blckngm/jwtk/pull/12", "diff_url": "https://github.com/blckngm/jwtk/pull/12.diff", "patch_url": "https://github.com/blckngm/jwtk/pull/12.patch", "merged_at": "2024-05-30T06:49:15Z"}, "body": "In my Axum JWT verification middleware, I want to pass the validated JWT on to successive middlewares and handlers. This is done by adding it to the `request.extensions()` type map. However, it requires `T: Clone` and `HeaderAndClaims<_>` currently does not implement `Clone` so this is not directly possible.\r\n\r\nThis PR implements the relevant `Clone` which spares the minor inconvenience of having to put the JWT in an `Arc`. A quick test indicates that this will grow the release rlib by 4 kbytes (current rlib is c:a 1.1 Mbytes). Not sure if this is a reasonable trade-off, but since I wrote and tested the code, I thought I'd put it up for consideration.", "reactions": {"url": "https://api.github.com/repos/blckngm/jwtk/issues/12/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/blckngm/jwtk/issues/12/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/blckngm/jwtk/issues/9", "repository_url": "https://api.github.com/repos/blckngm/jwtk", "labels_url": "https://api.github.com/repos/blckngm/jwtk/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/blckngm/jwtk/issues/9/comments", "events_url": "https://api.github.com/repos/blckngm/jwtk/issues/9/events", "html_url": "https://github.com/blckngm/jwtk/pull/9", "id": 2317706605, "node_id": "PR_kwDOF5YvnM5wloSR", "number": 9, "title": "Allow iterating over audiences", "user": {"login": "bittrance", "id": 1666535, "node_id": "MDQ6VXNlcjE2NjY1MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1666535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bittrance", "html_url": "https://github.com/bittrance", "followers_url": "https://api.github.com/users/bittrance/followers", "following_url": "https://api.github.com/users/bittrance/following{/other_user}", "gists_url": "https://api.github.com/users/bittrance/gists{/gist_id}", "starred_url": "https://api.github.com/users/bittrance/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bittrance/subscriptions", "organizations_url": "https://api.github.com/users/bittrance/orgs", "repos_url": "https://api.github.com/users/bittrance/repos", "events_url": "https://api.github.com/users/bittrance/events{/privacy}", "received_events_url": "https://api.github.com/users/bittrance/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-26T13:12:06Z", "updated_at": "2024-05-27T03:05:44Z", "closed_at": "2024-05-27T03:05:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/blckngm/jwtk/pulls/9", "html_url": "https://github.com/blckngm/jwtk/pull/9", "diff_url": "https://github.com/blckngm/jwtk/pull/9.diff", "patch_url": "https://github.com/blckngm/jwtk/pull/9.patch", "merged_at": "2024-05-27T03:05:44Z"}, "body": "I suspect that like me, the most common operator on `OneOrMany` is to check whether it contains a particular audience value. That currently is more verbose than it needs to be.\r\n\r\nThis PR allows getting an \"read-only\" iterator from a `OneOrMany`. This means that:\r\n```rust\r\nlet valid = match jwt.claims().aud {\r\n    jwtk::OneOrMany::One(ref aud) if aud == \"my-aud\" => true,\r\n    jwtk::OneOrMany::Vec(ref auds) if auds.iter().any(|a| a == \"my-aud\") => true,\r\n    _ => false,\r\n};\r\n```\r\nbecomes:\r\n```rust\r\nlet valid = jwt.claims().aud.iter().any(|a| a == \"my-aud\");\r\n```\r\nWhich I think is a small but significant improvement.", "reactions": {"url": "https://api.github.com/repos/blckngm/jwtk/issues/9/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/blckngm/jwtk/issues/9/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/blckngm/jwtk/issues/7", "repository_url": "https://api.github.com/repos/blckngm/jwtk", "labels_url": "https://api.github.com/repos/blckngm/jwtk/issues/7/labels{/name}", "comments_url": "https://api.github.com/repos/blckngm/jwtk/issues/7/comments", "events_url": "https://api.github.com/repos/blckngm/jwtk/issues/7/events", "html_url": "https://github.com/blckngm/jwtk/pull/7", "id": 2280525629, "node_id": "PR_kwDOF5YvnM5unlB0", "number": 7, "title": "Updated dependencies", "user": {"login": "mibes404", "id": 28631608, "node_id": "MDQ6VXNlcjI4NjMxNjA4", "avatar_url": "https://avatars.githubusercontent.com/u/28631608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mibes404", "html_url": "https://github.com/mibes404", "followers_url": "https://api.github.com/users/mibes404/followers", "following_url": "https://api.github.com/users/mibes404/following{/other_user}", "gists_url": "https://api.github.com/users/mibes404/gists{/gist_id}", "starred_url": "https://api.github.com/users/mibes404/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mibes404/subscriptions", "organizations_url": "https://api.github.com/users/mibes404/orgs", "repos_url": "https://api.github.com/users/mibes404/repos", "events_url": "https://api.github.com/users/mibes404/events{/privacy}", "received_events_url": "https://api.github.com/users/mibes404/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-06T10:17:37Z", "updated_at": "2024-05-27T02:27:45Z", "closed_at": "2024-05-27T02:27:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/blckngm/jwtk/pulls/7", "html_url": "https://github.com/blckngm/jwtk/pull/7", "diff_url": "https://github.com/blckngm/jwtk/pull/7.diff", "patch_url": "https://github.com/blckngm/jwtk/pull/7.patch", "merged_at": "2024-05-27T02:27:45Z"}, "body": "Updated cargo.toml to use the latest available versions.\r\n\r\nThe newer base64 crate required some code changes that should be backward compatible; all tests pass.\r\nThe benchmark shows no significant changes.\r\n\r\nThe main reason for this PR is to avoid duplicate packages in downstream projects that depend on jwtk.\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/blckngm/jwtk/issues/7/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/blckngm/jwtk/issues/7/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/blckngm/jwtk/issues/5", "repository_url": "https://api.github.com/repos/blckngm/jwtk", "labels_url": "https://api.github.com/repos/blckngm/jwtk/issues/5/labels{/name}", "comments_url": "https://api.github.com/repos/blckngm/jwtk/issues/5/comments", "events_url": "https://api.github.com/repos/blckngm/jwtk/issues/5/events", "html_url": "https://github.com/blckngm/jwtk/pull/5", "id": 1858452359, "node_id": "PR_kwDOF5YvnM5YVoN6", "number": 5, "title": "chore: cargo fmt and fix CI", "user": {"login": "blckngm", "id": 6764397, "node_id": "MDQ6VXNlcjY3NjQzOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/6764397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blckngm", "html_url": "https://github.com/blckngm", "followers_url": "https://api.github.com/users/blckngm/followers", "following_url": "https://api.github.com/users/blckngm/following{/other_user}", "gists_url": "https://api.github.com/users/blckngm/gists{/gist_id}", "starred_url": "https://api.github.com/users/blckngm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blckngm/subscriptions", "organizations_url": "https://api.github.com/users/blckngm/orgs", "repos_url": "https://api.github.com/users/blckngm/repos", "events_url": "https://api.github.com/users/blckngm/events{/privacy}", "received_events_url": "https://api.github.com/users/blckngm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-21T02:45:19Z", "updated_at": "2023-08-21T03:18:40Z", "closed_at": "2023-08-21T03:05:50Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/blckngm/jwtk/pulls/5", "html_url": "https://github.com/blckngm/jwtk/pull/5", "diff_url": "https://github.com/blckngm/jwtk/pull/5.diff", "patch_url": "https://github.com/blckngm/jwtk/pull/5.patch", "merged_at": "2023-08-21T03:05:50Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/blckngm/jwtk/issues/5/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/blckngm/jwtk/issues/5/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/blckngm/jwtk/issues/4", "repository_url": "https://api.github.com/repos/blckngm/jwtk", "labels_url": "https://api.github.com/repos/blckngm/jwtk/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/blckngm/jwtk/issues/4/comments", "events_url": "https://api.github.com/repos/blckngm/jwtk/issues/4/events", "html_url": "https://github.com/blckngm/jwtk/pull/4", "id": 1855226176, "node_id": "PR_kwDOF5YvnM5YK4mo", "number": 4, "title": "fix: durations", "user": {"login": "Tomsons", "id": 4367199, "node_id": "MDQ6VXNlcjQzNjcxOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/4367199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tomsons", "html_url": "https://github.com/Tomsons", "followers_url": "https://api.github.com/users/Tomsons/followers", "following_url": "https://api.github.com/users/Tomsons/following{/other_user}", "gists_url": "https://api.github.com/users/Tomsons/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tomsons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tomsons/subscriptions", "organizations_url": "https://api.github.com/users/Tomsons/orgs", "repos_url": "https://api.github.com/users/Tomsons/repos", "events_url": "https://api.github.com/users/Tomsons/events{/privacy}", "received_events_url": "https://api.github.com/users/Tomsons/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-17T15:24:20Z", "updated_at": "2023-08-21T02:42:30Z", "closed_at": "2023-08-21T02:42:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/blckngm/jwtk/pulls/4", "html_url": "https://github.com/blckngm/jwtk/pull/4", "diff_url": "https://github.com/blckngm/jwtk/pull/4.diff", "patch_url": "https://github.com/blckngm/jwtk/pull/4.patch", "merged_at": "2023-08-21T02:42:30Z"}, "body": "The current claim deserialization uses a base64 decoder to decode the jwt string part. By default, the base64 library decodes timestamps aka u64 into f64 which causes Errors when deserializing a token that `iat`, `exp` etc with timestamps.\r\n\r\nWhat has been done:\r\n- Introduced serde_with library\r\n- Deserialized directly into Duration\r\n- Added extra unit test to check", "reactions": {"url": "https://api.github.com/repos/blckngm/jwtk/issues/4/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/blckngm/jwtk/issues/4/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]