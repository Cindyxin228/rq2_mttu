{"window": ["2021-08-24T23:25:44.040063+00:00", "2024-03-11T19:29:44.140229+00:00"], "repo_slug": "lune-org/lune", "candidates": [{"url": "https://api.github.com/repos/lune-org/lune/issues/165", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/165/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/165/events", "html_url": "https://github.com/lune-org/lune/pull/165", "id": 2179836479, "node_id": "PR_kwDOIzOJXs5pSB25", "number": 165, "title": "Rewrite scheduler and make it smol", "user": {"login": "filiptibell", "id": 9497781, "node_id": "MDQ6VXNlcjk0OTc3ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/9497781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/filiptibell", "html_url": "https://github.com/filiptibell", "followers_url": "https://api.github.com/users/filiptibell/followers", "following_url": "https://api.github.com/users/filiptibell/following{/other_user}", "gists_url": "https://api.github.com/users/filiptibell/gists{/gist_id}", "starred_url": "https://api.github.com/users/filiptibell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/filiptibell/subscriptions", "organizations_url": "https://api.github.com/users/filiptibell/orgs", "repos_url": "https://api.github.com/users/filiptibell/repos", "events_url": "https://api.github.com/users/filiptibell/events{/privacy}", "received_events_url": "https://api.github.com/users/filiptibell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-11T18:00:39Z", "updated_at": "2024-03-11T18:11:21Z", "closed_at": "2024-03-11T18:11:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/165", "html_url": "https://github.com/lune-org/lune/pull/165", "diff_url": "https://github.com/lune-org/lune/pull/165.diff", "patch_url": "https://github.com/lune-org/lune/pull/165.patch", "merged_at": "2024-03-11T18:11:14Z"}, "body": "This PR implements the new [mlua-luau-scheduler](https://github.com/lune-org/mlua-luau-scheduler) in Lune. This required some pretty substantial changes in the `net` builtin but in other places most of the changes are migrating to new APIs and replacing `'static` lifetime bounds with plain `'lua` ones. Here are the main benefits for any curious reader:\r\n\r\n- Minimal overhead for lua threads, rust futures, and their interop. Now lock-free and up to 4x or better performance in very lua-thread-heavy workloads\r\n- Rewritten `net.serve` implementation out of necessity, now also lock-free. Some performance improvements for `net.socket` and for `NetWebSocket` objects in general\r\n- Many bug fixes (see below)\r\n- Improved incremental compile times since the scheduler is now a separate crate. This may also help Lune break out builtins into smaller, separate crates in the future.\r\n- We no longer leak memory of the `Lua` struct to get rid of lifetime issues\r\n\r\n---\r\n\r\nFixes https://github.com/lune-org/lune/issues/130\r\nFixes https://github.com/lune-org/lune/issues/114\r\nFixes https://github.com/lune-org/lune/issues/112\r\n\r\nPartially sets up for https://github.com/lune-org/lune/issues/92 and https://github.com/lune-org/lune/issues/75", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/165/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lune-org/lune/issues/140", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/140/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/140/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/140/events", "html_url": "https://github.com/lune-org/lune/pull/140", "id": 2062648605, "node_id": "PR_kwDOIzOJXs5jEJFW", "number": 140, "title": "Standalone Compiler", "user": {"login": "CompeyDev", "id": 74418041, "node_id": "MDQ6VXNlcjc0NDE4MDQx", "avatar_url": "https://avatars.githubusercontent.com/u/74418041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CompeyDev", "html_url": "https://github.com/CompeyDev", "followers_url": "https://api.github.com/users/CompeyDev/followers", "following_url": "https://api.github.com/users/CompeyDev/following{/other_user}", "gists_url": "https://api.github.com/users/CompeyDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/CompeyDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CompeyDev/subscriptions", "organizations_url": "https://api.github.com/users/CompeyDev/orgs", "repos_url": "https://api.github.com/users/CompeyDev/repos", "events_url": "https://api.github.com/users/CompeyDev/events{/privacy}", "received_events_url": "https://api.github.com/users/CompeyDev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-01-02T16:22:52Z", "updated_at": "2024-01-13T20:29:35Z", "closed_at": "2024-01-13T20:19:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/140", "html_url": "https://github.com/lune-org/lune/pull/140", "diff_url": "https://github.com/lune-org/lune/pull/140.diff", "patch_url": "https://github.com/lune-org/lune/pull/140.patch", "merged_at": "2024-01-13T20:19:59Z"}, "body": "This PR aims to enable the long-awaited standalone compilation feature, which allows for building luau source files to OS-native executables. It should be noted, however, that this PR only implements an initial interface for the above, and future PRs much implement more advanced features such as requires in such standalone environments.\r\n\r\n## TODO:\r\n- [x] Binary compilation\r\n   - [x] Maintain a standard binary format\r\n   - [x] Parse binary format and execute at runtime\r\n       - [x] Create a documented struct for META Chunk (de)serialization\r\n   - [x] Make system highly performant\r\n      - [x] Swap out GLOBAL alloc for Jemalloc^\r\n      - [x] Multithread building & bytecode discovery process\r\n         - [x] Parallel Iterators \r\n - [x] Tests & QA? (How do I exactly add tests for standalone compilation?)\r\n\r\n^ **Jemalloc is performant in multithreaded scenarios with multiple simultaneous reads across threads.**\r\n\r\nCloses #8.", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/140/reactions", "total_count": 11, "+1": 0, "-1": 0, "laugh": 0, "hooray": 3, "confused": 0, "heart": 2, "rocket": 6, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/140/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lune-org/lune/issues/94", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/94/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/94/events", "html_url": "https://github.com/lune-org/lune/pull/94", "id": 1865385355, "node_id": "PR_kwDOIzOJXs5YtNyG", "number": 94, "title": "DateTime Library Implementation", "user": {"login": "CompeyDev", "id": 74418041, "node_id": "MDQ6VXNlcjc0NDE4MDQx", "avatar_url": "https://avatars.githubusercontent.com/u/74418041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CompeyDev", "html_url": "https://github.com/CompeyDev", "followers_url": "https://api.github.com/users/CompeyDev/followers", "following_url": "https://api.github.com/users/CompeyDev/following{/other_user}", "gists_url": "https://api.github.com/users/CompeyDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/CompeyDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CompeyDev/subscriptions", "organizations_url": "https://api.github.com/users/CompeyDev/orgs", "repos_url": "https://api.github.com/users/CompeyDev/repos", "events_url": "https://api.github.com/users/CompeyDev/events{/privacy}", "received_events_url": "https://api.github.com/users/CompeyDev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2023-08-24T15:17:10Z", "updated_at": "2023-09-11T18:12:33Z", "closed_at": "2023-09-11T17:52:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/94", "html_url": "https://github.com/lune-org/lune/pull/94", "diff_url": "https://github.com/lune-org/lune/pull/94.diff", "patch_url": "https://github.com/lune-org/lune/pull/94.patch", "merged_at": "2023-09-11T17:52:07Z"}, "body": "This PR aims to implement a DateTime builtin library, inspired by the Roblox DateTime with some changes. \r\n\r\nThings to implement before merge:\r\n- [x] Implementing the `create` function and adding the builtin to `mod.rs`\r\n- [x] LuaUserData trait implementations\r\n- [x] Casting some rust types to lua and vice versa\r\n    - [x] Casting `&str` to `Month` is problematic, chrono maps \"march\" to `Month::January`\r\n- [x] Creating the requireable table\r\n- [x] Proper error handling\r\n- [x] Documentation \r\n- [x] Luau typing\r\n- [x] QoL and Localization expansion\r\n- [x] Tests & QA\r\n    - [x] Fix failing tests\r\n        - [x] `DateTime::from_iso_date`\r\n        - [x] `DateTime::from_unix_timestamp`\r\n        - [x] `DateTime.toIsoDate()`\r\n        - [x] `DateTime.toUniversalTime()`\r\n    - [x] Implement remaining tests\r\n    - [x] Fix failing LocalTime tests\r\n    - [x] Implement localization tests for LocalTime\r\n- [x] Fix completely broken `fromUniversalTime` & `fromLocalTime`\r\n\r\n![image](https://github.com/filiptibell/lune/assets/74418041/62ed7805-9824-4ac7-8f95-f43cf1f41baa)\r\n\r\n- [x] Fix broken `formatTime` for conversion to local timezone\r\n\r\nCloses #52.", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/94/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/94/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lune-org/lune/issues/88", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/88/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/88/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/88/events", "html_url": "https://github.com/lune-org/lune/pull/88", "id": 1860475607, "node_id": "PR_kwDOIzOJXs5YchhW", "number": 88, "title": "Rewrite of the task scheduler and `require`", "user": {"login": "filiptibell", "id": 9497781, "node_id": "MDQ6VXNlcjk0OTc3ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/9497781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/filiptibell", "html_url": "https://github.com/filiptibell", "followers_url": "https://api.github.com/users/filiptibell/followers", "following_url": "https://api.github.com/users/filiptibell/following{/other_user}", "gists_url": "https://api.github.com/users/filiptibell/gists{/gist_id}", "starred_url": "https://api.github.com/users/filiptibell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/filiptibell/subscriptions", "organizations_url": "https://api.github.com/users/filiptibell/orgs", "repos_url": "https://api.github.com/users/filiptibell/repos", "events_url": "https://api.github.com/users/filiptibell/events{/privacy}", "received_events_url": "https://api.github.com/users/filiptibell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T03:21:28Z", "updated_at": "2023-08-26T13:57:51Z", "closed_at": "2023-08-23T01:00:59Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/88", "html_url": "https://github.com/lune-org/lune/pull/88", "diff_url": "https://github.com/lune-org/lune/pull/88.diff", "patch_url": "https://github.com/lune-org/lune/pull/88.patch", "merged_at": "2023-08-23T01:00:59Z"}, "body": "Lune's internal task scheduler and `require` functionality has been completely rewritten.\r\n\r\nThe new scheduler is much more stable, conforms to a larger test suite, and has a few additional benefits:\r\n\r\n  - Spawned processes using `process.spawn` now run on different thread(s), freeing up resources for the main thread where luau runs.\r\n  - Serving requests using `net.serve` now processes requests on background threads, also freeing up resources. In the future, this will also allow us to offload heavy tasks such as compression/decompression to background threads.\r\n  - Groundwork for custom / user-defined require aliases has been implemented, as well as absolute / cwd-relative requires. These will both be exposed as options and be made available to use some time in the future.\r\n  - The new task scheduler and `Lune` struct now preserve globals / context between calls to `Lune::run`, meaning the newly implemented REPL now has context preservation as well.\r\n\r\nCloses https://github.com/filiptibell/lune/issues/38\r\n\r\nFixes https://github.com/filiptibell/lune/issues/22\r\nFixes https://github.com/filiptibell/lune/issues/23\r\nFixes https://github.com/filiptibell/lune/issues/29\r\n\r\nAlso fixes spurious panics and error messages such as `Tried to resume next queued future but none are queued`.", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/88/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/88/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lune-org/lune/issues/83", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/83/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/83/events", "html_url": "https://github.com/lune-org/lune/pull/83", "id": 1846272676, "node_id": "PR_kwDOIzOJXs5XsnKc", "number": 83, "title": "Feature: Implement a REPL", "user": {"login": "CompeyDev", "id": 74418041, "node_id": "MDQ6VXNlcjc0NDE4MDQx", "avatar_url": "https://avatars.githubusercontent.com/u/74418041?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CompeyDev", "html_url": "https://github.com/CompeyDev", "followers_url": "https://api.github.com/users/CompeyDev/followers", "following_url": "https://api.github.com/users/CompeyDev/following{/other_user}", "gists_url": "https://api.github.com/users/CompeyDev/gists{/gist_id}", "starred_url": "https://api.github.com/users/CompeyDev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CompeyDev/subscriptions", "organizations_url": "https://api.github.com/users/CompeyDev/orgs", "repos_url": "https://api.github.com/users/CompeyDev/repos", "events_url": "https://api.github.com/users/CompeyDev/events{/privacy}", "received_events_url": "https://api.github.com/users/CompeyDev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2023-08-11T06:34:55Z", "updated_at": "2023-08-16T15:05:54Z", "closed_at": "2023-08-16T15:05:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/83", "html_url": "https://github.com/lune-org/lune/pull/83", "diff_url": "https://github.com/lune-org/lune/pull/83.diff", "patch_url": "https://github.com/lune-org/lune/pull/83.patch", "merged_at": "2023-08-16T15:05:53Z"}, "body": "As requested by users before, this PR includes a REPL functionality which is invoked when Lune is run with no positional arguments. The REPL currently supports\r\n- Evaluation\r\n- Clean exits (^C & ^D)\r\n- Execution history \r\n- ~~Preservation of code \"context\" (variables declared in previous steps)~~\r\n   - This has proven to be tough and should have a separate PR entirely dedicated to it. There are simply too many moving parts and is therefore out of scope for now.\r\n\r\nWhat needs to be implemented/fixed:\r\n- [x] ~~Context preservation for other declaratives (such as functions, or globals)~~\r\n- [x] ~~Global variable detections for pretty printing~~\r\n- [x] Allow user to enter additional code if the statement is incomplete\r\n\r\nCloses #38.", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/83/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/83/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lune-org/lune/issues/62", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/62/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/62/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/62/events", "html_url": "https://github.com/lune-org/lune/pull/62", "id": 1794851449, "node_id": "PR_kwDOIzOJXs5U_QnF", "number": 62, "title": "Start using new rbx_dom_weak instance cloning methods", "user": {"login": "kennethloeffler", "id": 13822714, "node_id": "MDQ6VXNlcjEzODIyNzE0", "avatar_url": "https://avatars.githubusercontent.com/u/13822714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennethloeffler", "html_url": "https://github.com/kennethloeffler", "followers_url": "https://api.github.com/users/kennethloeffler/followers", "following_url": "https://api.github.com/users/kennethloeffler/following{/other_user}", "gists_url": "https://api.github.com/users/kennethloeffler/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennethloeffler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennethloeffler/subscriptions", "organizations_url": "https://api.github.com/users/kennethloeffler/orgs", "repos_url": "https://api.github.com/users/kennethloeffler/repos", "events_url": "https://api.github.com/users/kennethloeffler/events{/privacy}", "received_events_url": "https://api.github.com/users/kennethloeffler/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-08T08:57:12Z", "updated_at": "2023-07-08T09:20:41Z", "closed_at": "2023-07-08T09:14:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/62", "html_url": "https://github.com/lune-org/lune/pull/62", "diff_url": "https://github.com/lune-org/lune/pull/62.diff", "patch_url": "https://github.com/lune-org/lune/pull/62.patch", "merged_at": "2023-07-08T09:14:05Z"}, "body": "This PR changes `Instance::clone_into_external_dom` and `Instance::clone_instance` to start using the new cloning methods introduced in rojo-rbx/rbx-dom#312. The aim is to reduce complexity in Lune's implementation, and give the responsibility to rbx-dom instead. ", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/62/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/62/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lune-org/lune/issues/57", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/57/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/57/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/57/events", "html_url": "https://github.com/lune-org/lune/pull/57", "id": 1757560882, "node_id": "PR_kwDOIzOJXs5TB4Rp", "number": 57, "title": "Add TLS support for `net.socket()`, fix `WebSocket.closeCode` behavior", "user": {"login": "chadhyatt", "id": 56618074, "node_id": "MDQ6VXNlcjU2NjE4MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/56618074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chadhyatt", "html_url": "https://github.com/chadhyatt", "followers_url": "https://api.github.com/users/chadhyatt/followers", "following_url": "https://api.github.com/users/chadhyatt/following{/other_user}", "gists_url": "https://api.github.com/users/chadhyatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/chadhyatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chadhyatt/subscriptions", "organizations_url": "https://api.github.com/users/chadhyatt/orgs", "repos_url": "https://api.github.com/users/chadhyatt/repos", "events_url": "https://api.github.com/users/chadhyatt/events{/privacy}", "received_events_url": "https://api.github.com/users/chadhyatt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-06-14T20:06:06Z", "updated_at": "2023-06-15T20:36:06Z", "closed_at": "2023-06-15T20:36:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/57", "html_url": "https://github.com/lune-org/lune/pull/57", "diff_url": "https://github.com/lune-org/lune/pull/57.diff", "patch_url": "https://github.com/lune-org/lune/pull/57.patch", "merged_at": "2023-06-15T20:36:05Z"}, "body": "*Example new Lune usage of `wss://` (TLS) WebSocket [here](https://github.com/regginator/lune/blob/add-wss-support/tests/net/socket/wss.luau)*\r\n\r\n* Using the `rustls-tls-native-roots` in `tokio-tungstenite` solves Lune's case of [this issue](https://github.com/snapview/tokio-tungstenite/issues/93), except for the fact that we're using `rustls` for general compatibility- as @filiptibell said in R-OSS:\r\n  > would have to be the rustls-something one otherwise we will depend on openssl and linux users flood in complaining that we dont use their one specific version\r\n  > i think for wss we would also need to find some public server that supports it that we can use in unit tests\r\n\r\n* While testing functionality for wss, we found a small bug with [`WebSocket.closeCode`](https://lune.gitbook.io/lune/api-reference/net#websocket) upon `__index` with the [hacky little wrapper impl](https://github.com/filiptibell/lune/blob/2169acb3d27735b84dc2c3ad537a4306dd0ccbbe/packages/lib/src/lua/net/websocket.rs#L24). Turns out, it was just forgotten to pass through an internal object ref lol.\r\n\r\n<sub>Additionally, `Cargo.lock` <b>needed</b> to be updated for compilation, as utilizing `rustls` w/ tokio-tungstenite added those few deps afaik. Can revert if needed!</sub>", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/57/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/57/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}], "chosen_pr": {"url": "https://api.github.com/repos/lune-org/lune/issues/165", "repository_url": "https://api.github.com/repos/lune-org/lune", "labels_url": "https://api.github.com/repos/lune-org/lune/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/165/comments", "events_url": "https://api.github.com/repos/lune-org/lune/issues/165/events", "html_url": "https://github.com/lune-org/lune/pull/165", "id": 2179836479, "node_id": "PR_kwDOIzOJXs5pSB25", "number": 165, "title": "Rewrite scheduler and make it smol", "user": {"login": "filiptibell", "id": 9497781, "node_id": "MDQ6VXNlcjk0OTc3ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/9497781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/filiptibell", "html_url": "https://github.com/filiptibell", "followers_url": "https://api.github.com/users/filiptibell/followers", "following_url": "https://api.github.com/users/filiptibell/following{/other_user}", "gists_url": "https://api.github.com/users/filiptibell/gists{/gist_id}", "starred_url": "https://api.github.com/users/filiptibell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/filiptibell/subscriptions", "organizations_url": "https://api.github.com/users/filiptibell/orgs", "repos_url": "https://api.github.com/users/filiptibell/repos", "events_url": "https://api.github.com/users/filiptibell/events{/privacy}", "received_events_url": "https://api.github.com/users/filiptibell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-11T18:00:39Z", "updated_at": "2024-03-11T18:11:21Z", "closed_at": "2024-03-11T18:11:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lune-org/lune/pulls/165", "html_url": "https://github.com/lune-org/lune/pull/165", "diff_url": "https://github.com/lune-org/lune/pull/165.diff", "patch_url": "https://github.com/lune-org/lune/pull/165.patch", "merged_at": "2024-03-11T18:11:14Z"}, "body": "This PR implements the new [mlua-luau-scheduler](https://github.com/lune-org/mlua-luau-scheduler) in Lune. This required some pretty substantial changes in the `net` builtin but in other places most of the changes are migrating to new APIs and replacing `'static` lifetime bounds with plain `'lua` ones. Here are the main benefits for any curious reader:\r\n\r\n- Minimal overhead for lua threads, rust futures, and their interop. Now lock-free and up to 4x or better performance in very lua-thread-heavy workloads\r\n- Rewritten `net.serve` implementation out of necessity, now also lock-free. Some performance improvements for `net.socket` and for `NetWebSocket` objects in general\r\n- Many bug fixes (see below)\r\n- Improved incremental compile times since the scheduler is now a separate crate. This may also help Lune break out builtins into smaller, separate crates in the future.\r\n- We no longer leak memory of the `Lua` struct to get rid of lifetime issues\r\n\r\n---\r\n\r\nFixes https://github.com/lune-org/lune/issues/130\r\nFixes https://github.com/lune-org/lune/issues/114\r\nFixes https://github.com/lune-org/lune/issues/112\r\n\r\nPartially sets up for https://github.com/lune-org/lune/issues/92 and https://github.com/lune-org/lune/issues/75", "reactions": {"url": "https://api.github.com/repos/lune-org/lune/issues/165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lune-org/lune/issues/165/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, "chosen_detail": {"url": "https://api.github.com/repos/lune-org/lune/pulls/165", "id": 1766333881, "node_id": "PR_kwDOIzOJXs5pSB25", "html_url": "https://github.com/lune-org/lune/pull/165", "diff_url": "https://github.com/lune-org/lune/pull/165.diff", "patch_url": "https://github.com/lune-org/lune/pull/165.patch", "issue_url": "https://api.github.com/repos/lune-org/lune/issues/165", "number": 165, "state": "closed", "locked": false, "title": "Rewrite scheduler and make it smol", "user": {"login": "filiptibell", "id": 9497781, "node_id": "MDQ6VXNlcjk0OTc3ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/9497781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/filiptibell", "html_url": "https://github.com/filiptibell", "followers_url": "https://api.github.com/users/filiptibell/followers", "following_url": "https://api.github.com/users/filiptibell/following{/other_user}", "gists_url": "https://api.github.com/users/filiptibell/gists{/gist_id}", "starred_url": "https://api.github.com/users/filiptibell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/filiptibell/subscriptions", "organizations_url": "https://api.github.com/users/filiptibell/orgs", "repos_url": "https://api.github.com/users/filiptibell/repos", "events_url": "https://api.github.com/users/filiptibell/events{/privacy}", "received_events_url": "https://api.github.com/users/filiptibell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "This PR implements the new [mlua-luau-scheduler](https://github.com/lune-org/mlua-luau-scheduler) in Lune. This required some pretty substantial changes in the `net` builtin but in other places most of the changes are migrating to new APIs and replacing `'static` lifetime bounds with plain `'lua` ones. Here are the main benefits for any curious reader:\r\n\r\n- Minimal overhead for lua threads, rust futures, and their interop. Now lock-free and up to 4x or better performance in very lua-thread-heavy workloads\r\n- Rewritten `net.serve` implementation out of necessity, now also lock-free. Some performance improvements for `net.socket` and for `NetWebSocket` objects in general\r\n- Many bug fixes (see below)\r\n- Improved incremental compile times since the scheduler is now a separate crate. This may also help Lune break out builtins into smaller, separate crates in the future.\r\n- We no longer leak memory of the `Lua` struct to get rid of lifetime issues\r\n\r\n---\r\n\r\nFixes https://github.com/lune-org/lune/issues/130\r\nFixes https://github.com/lune-org/lune/issues/114\r\nFixes https://github.com/lune-org/lune/issues/112\r\n\r\nPartially sets up for https://github.com/lune-org/lune/issues/92 and https://github.com/lune-org/lune/issues/75", "created_at": "2024-03-11T18:00:39Z", "updated_at": "2024-03-11T18:11:21Z", "closed_at": "2024-03-11T18:11:14Z", "merged_at": "2024-03-11T18:11:14Z", "merge_commit_sha": "cd34dcb0dd1b123b27461748bc5eb898e174a651", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/lune-org/lune/pulls/165/commits", "review_comments_url": "https://api.github.com/repos/lune-org/lune/pulls/165/comments", "review_comment_url": "https://api.github.com/repos/lune-org/lune/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/lune-org/lune/issues/165/comments", "statuses_url": "https://api.github.com/repos/lune-org/lune/statuses/ce086e4941ae10bde50777a80ff9ad7f1742ab81", "head": {"label": "lune-org:smol-scheduler", "ref": "smol-scheduler", "sha": "ce086e4941ae10bde50777a80ff9ad7f1742ab81", "user": {"login": "lune-org", "id": 126094173, "node_id": "O_kgDOB4QLXQ", "avatar_url": "https://avatars.githubusercontent.com/u/126094173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lune-org", "html_url": "https://github.com/lune-org", "followers_url": "https://api.github.com/users/lune-org/followers", "following_url": "https://api.github.com/users/lune-org/following{/other_user}", "gists_url": "https://api.github.com/users/lune-org/gists{/gist_id}", "starred_url": "https://api.github.com/users/lune-org/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lune-org/subscriptions", "organizations_url": "https://api.github.com/users/lune-org/orgs", "repos_url": "https://api.github.com/users/lune-org/repos", "events_url": "https://api.github.com/users/lune-org/events{/privacy}", "received_events_url": "https://api.github.com/users/lune-org/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 590580062, "node_id": "R_kgDOIzOJXg", "name": "lune", "full_name": "lune-org/lune", "private": false, "owner": {"login": "lune-org", "id": 126094173, "node_id": "O_kgDOB4QLXQ", "avatar_url": "https://avatars.githubusercontent.com/u/126094173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lune-org", "html_url": "https://github.com/lune-org", "followers_url": "https://api.github.com/users/lune-org/followers", "following_url": "https://api.github.com/users/lune-org/following{/other_user}", "gists_url": "https://api.github.com/users/lune-org/gists{/gist_id}", "starred_url": "https://api.github.com/users/lune-org/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lune-org/subscriptions", "organizations_url": "https://api.github.com/users/lune-org/orgs", "repos_url": "https://api.github.com/users/lune-org/repos", "events_url": "https://api.github.com/users/lune-org/events{/privacy}", "received_events_url": "https://api.github.com/users/lune-org/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/lune-org/lune", "description": "A standalone Luau runtime", "fork": false, "url": "https://api.github.com/repos/lune-org/lune", "forks_url": "https://api.github.com/repos/lune-org/lune/forks", "keys_url": "https://api.github.com/repos/lune-org/lune/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/lune-org/lune/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/lune-org/lune/teams", "hooks_url": "https://api.github.com/repos/lune-org/lune/hooks", "issue_events_url": "https://api.github.com/repos/lune-org/lune/issues/events{/number}", "events_url": "https://api.github.com/repos/lune-org/lune/events", "assignees_url": "https://api.github.com/repos/lune-org/lune/assignees{/user}", "branches_url": "https://api.github.com/repos/lune-org/lune/branches{/branch}", "tags_url": "https://api.github.com/repos/lune-org/lune/tags", "blobs_url": "https://api.github.com/repos/lune-org/lune/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/lune-org/lune/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/lune-org/lune/git/refs{/sha}", "trees_url": "https://api.github.com/repos/lune-org/lune/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/lune-org/lune/statuses/{sha}", "languages_url": "https://api.github.com/repos/lune-org/lune/languages", "stargazers_url": "https://api.github.com/repos/lune-org/lune/stargazers", "contributors_url": "https://api.github.com/repos/lune-org/lune/contributors", "subscribers_url": "https://api.github.com/repos/lune-org/lune/subscribers", "subscription_url": "https://api.github.com/repos/lune-org/lune/subscription", "commits_url": "https://api.github.com/repos/lune-org/lune/commits{/sha}", "git_commits_url": "https://api.github.com/repos/lune-org/lune/git/commits{/sha}", "comments_url": "https://api.github.com/repos/lune-org/lune/comments{/number}", "issue_comment_url": "https://api.github.com/repos/lune-org/lune/issues/comments{/number}", "contents_url": "https://api.github.com/repos/lune-org/lune/contents/{+path}", "compare_url": "https://api.github.com/repos/lune-org/lune/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/lune-org/lune/merges", "archive_url": "https://api.github.com/repos/lune-org/lune/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/lune-org/lune/downloads", "issues_url": "https://api.github.com/repos/lune-org/lune/issues{/number}", "pulls_url": "https://api.github.com/repos/lune-org/lune/pulls{/number}", "milestones_url": "https://api.github.com/repos/lune-org/lune/milestones{/number}", "notifications_url": "https://api.github.com/repos/lune-org/lune/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/lune-org/lune/labels{/name}", "releases_url": "https://api.github.com/repos/lune-org/lune/releases{/id}", "deployments_url": "https://api.github.com/repos/lune-org/lune/deployments", "created_at": "2023-01-18T18:30:45Z", "updated_at": "2026-01-21T00:18:25Z", "pushed_at": "2025-10-14T07:17:14Z", "git_url": "git://github.com/lune-org/lune.git", "ssh_url": "git@github.com:lune-org/lune.git", "clone_url": "https://github.com/lune-org/lune.git", "svn_url": "https://github.com/lune-org/lune", "homepage": "https://lune-org.github.io/docs", "size": 3541, "stargazers_count": 810, "watchers_count": 810, "language": "Rust", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 119, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 79, "license": {"key": "mpl-2.0", "name": "Mozilla Public License 2.0", "spdx_id": "MPL-2.0", "url": "https://api.github.com/licenses/mpl-2.0", "node_id": "MDc6TGljZW5zZTE0"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["cli", "luau", "scripting"], "visibility": "public", "forks": 119, "open_issues": 79, "watchers": 810, "default_branch": "main"}}, "base": {"label": "lune-org:main", "ref": "main", "sha": "1f211ca0ab5a2591a3d8a6204e6da2ea34ddb9ff", "user": {"login": "lune-org", "id": 126094173, "node_id": "O_kgDOB4QLXQ", "avatar_url": "https://avatars.githubusercontent.com/u/126094173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lune-org", "html_url": "https://github.com/lune-org", "followers_url": "https://api.github.com/users/lune-org/followers", "following_url": "https://api.github.com/users/lune-org/following{/other_user}", "gists_url": "https://api.github.com/users/lune-org/gists{/gist_id}", "starred_url": "https://api.github.com/users/lune-org/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lune-org/subscriptions", "organizations_url": "https://api.github.com/users/lune-org/orgs", "repos_url": "https://api.github.com/users/lune-org/repos", "events_url": "https://api.github.com/users/lune-org/events{/privacy}", "received_events_url": "https://api.github.com/users/lune-org/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 590580062, "node_id": "R_kgDOIzOJXg", "name": "lune", "full_name": "lune-org/lune", "private": false, "owner": {"login": "lune-org", "id": 126094173, "node_id": "O_kgDOB4QLXQ", "avatar_url": "https://avatars.githubusercontent.com/u/126094173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lune-org", "html_url": "https://github.com/lune-org", "followers_url": "https://api.github.com/users/lune-org/followers", "following_url": "https://api.github.com/users/lune-org/following{/other_user}", "gists_url": "https://api.github.com/users/lune-org/gists{/gist_id}", "starred_url": "https://api.github.com/users/lune-org/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lune-org/subscriptions", "organizations_url": "https://api.github.com/users/lune-org/orgs", "repos_url": "https://api.github.com/users/lune-org/repos", "events_url": "https://api.github.com/users/lune-org/events{/privacy}", "received_events_url": "https://api.github.com/users/lune-org/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/lune-org/lune", "description": "A standalone Luau runtime", "fork": false, "url": "https://api.github.com/repos/lune-org/lune", "forks_url": "https://api.github.com/repos/lune-org/lune/forks", "keys_url": "https://api.github.com/repos/lune-org/lune/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/lune-org/lune/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/lune-org/lune/teams", "hooks_url": "https://api.github.com/repos/lune-org/lune/hooks", "issue_events_url": "https://api.github.com/repos/lune-org/lune/issues/events{/number}", "events_url": "https://api.github.com/repos/lune-org/lune/events", "assignees_url": "https://api.github.com/repos/lune-org/lune/assignees{/user}", "branches_url": "https://api.github.com/repos/lune-org/lune/branches{/branch}", "tags_url": "https://api.github.com/repos/lune-org/lune/tags", "blobs_url": "https://api.github.com/repos/lune-org/lune/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/lune-org/lune/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/lune-org/lune/git/refs{/sha}", "trees_url": "https://api.github.com/repos/lune-org/lune/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/lune-org/lune/statuses/{sha}", "languages_url": "https://api.github.com/repos/lune-org/lune/languages", "stargazers_url": "https://api.github.com/repos/lune-org/lune/stargazers", "contributors_url": "https://api.github.com/repos/lune-org/lune/contributors", "subscribers_url": "https://api.github.com/repos/lune-org/lune/subscribers", "subscription_url": "https://api.github.com/repos/lune-org/lune/subscription", "commits_url": "https://api.github.com/repos/lune-org/lune/commits{/sha}", "git_commits_url": "https://api.github.com/repos/lune-org/lune/git/commits{/sha}", "comments_url": "https://api.github.com/repos/lune-org/lune/comments{/number}", "issue_comment_url": "https://api.github.com/repos/lune-org/lune/issues/comments{/number}", "contents_url": "https://api.github.com/repos/lune-org/lune/contents/{+path}", "compare_url": "https://api.github.com/repos/lune-org/lune/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/lune-org/lune/merges", "archive_url": "https://api.github.com/repos/lune-org/lune/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/lune-org/lune/downloads", "issues_url": "https://api.github.com/repos/lune-org/lune/issues{/number}", "pulls_url": "https://api.github.com/repos/lune-org/lune/pulls{/number}", "milestones_url": "https://api.github.com/repos/lune-org/lune/milestones{/number}", "notifications_url": "https://api.github.com/repos/lune-org/lune/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/lune-org/lune/labels{/name}", "releases_url": "https://api.github.com/repos/lune-org/lune/releases{/id}", "deployments_url": "https://api.github.com/repos/lune-org/lune/deployments", "created_at": "2023-01-18T18:30:45Z", "updated_at": "2026-01-21T00:18:25Z", "pushed_at": "2025-10-14T07:17:14Z", "git_url": "git://github.com/lune-org/lune.git", "ssh_url": "git@github.com:lune-org/lune.git", "clone_url": "https://github.com/lune-org/lune.git", "svn_url": "https://github.com/lune-org/lune", "homepage": "https://lune-org.github.io/docs", "size": 3541, "stargazers_count": 810, "watchers_count": 810, "language": "Rust", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 119, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 79, "license": {"key": "mpl-2.0", "name": "Mozilla Public License 2.0", "spdx_id": "MPL-2.0", "url": "https://api.github.com/licenses/mpl-2.0", "node_id": "MDc6TGljZW5zZTE0"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["cli", "luau", "scripting"], "visibility": "public", "forks": 119, "open_issues": 79, "watchers": 810, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/lune-org/lune/pulls/165"}, "html": {"href": "https://github.com/lune-org/lune/pull/165"}, "issue": {"href": "https://api.github.com/repos/lune-org/lune/issues/165"}, "comments": {"href": "https://api.github.com/repos/lune-org/lune/issues/165/comments"}, "review_comments": {"href": "https://api.github.com/repos/lune-org/lune/pulls/165/comments"}, "review_comment": {"href": "https://api.github.com/repos/lune-org/lune/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/lune-org/lune/pulls/165/commits"}, "statuses": {"href": "https://api.github.com/repos/lune-org/lune/statuses/ce086e4941ae10bde50777a80ff9ad7f1742ab81"}}, "author_association": "COLLABORATOR", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "filiptibell", "id": 9497781, "node_id": "MDQ6VXNlcjk0OTc3ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/9497781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/filiptibell", "html_url": "https://github.com/filiptibell", "followers_url": "https://api.github.com/users/filiptibell/followers", "following_url": "https://api.github.com/users/filiptibell/following{/other_user}", "gists_url": "https://api.github.com/users/filiptibell/gists{/gist_id}", "starred_url": "https://api.github.com/users/filiptibell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/filiptibell/subscriptions", "organizations_url": "https://api.github.com/users/filiptibell/orgs", "repos_url": "https://api.github.com/users/filiptibell/repos", "events_url": "https://api.github.com/users/filiptibell/events{/privacy}", "received_events_url": "https://api.github.com/users/filiptibell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 0, "review_comments": 0, "maintainer_can_modify": false, "commits": 17, "additions": 1476, "deletions": 2512, "changed_files": 44}}