{"window": ["2021-07-06T20:42:03.780515+00:00", "2021-11-19T11:36:23.413371+00:00"], "repo_slug": "scylladb/scylla-rust-driver", "candidates": [{"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/339", "id": 1055136240, "node_id": "PR_kwDOEj0F684umvGQ", "number": 339, "title": "Improve I/O performance via buffering", "user": {"login": "psarna", "id": 10433047, "node_id": "MDQ6VXNlcjEwNDMzMDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10433047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psarna", "html_url": "https://github.com/psarna", "followers_url": "https://api.github.com/users/psarna/followers", "following_url": "https://api.github.com/users/psarna/following{/other_user}", "gists_url": "https://api.github.com/users/psarna/gists{/gist_id}", "starred_url": "https://api.github.com/users/psarna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psarna/subscriptions", "organizations_url": "https://api.github.com/users/psarna/orgs", "repos_url": "https://api.github.com/users/psarna/repos", "events_url": "https://api.github.com/users/psarna/events{/privacy}", "received_events_url": "https://api.github.com/users/psarna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-11-16T17:25:28Z", "updated_at": "2023-10-12T13:34:29Z", "closed_at": "2021-11-17T15:24:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/339", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/339.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/339.patch", "merged_at": "2021-11-17T15:24:09Z"}, "body": "This pull request combines a couple of changes made in order to measure their impact on overall performance in various environments. The changes include:\r\n\r\n* increasing the internal channel size in the connection router\r\n* adding a buffering layer to reads\r\n* adding a buffering layer to writes\r\n    \r\nNOTICE: write buffering is done via `BufWriter`\r\ndue to the fact that Tokio does not yet expose write_all_vectored,\r\nand its implementation of write_vectored does not fit our needs,\r\nbecause it basically just sends one buffer at a time anyway.\r\nOnce write_all_vectored is solved, write buffering can be\r\nsimplified, and memory copying can be elided.\r\n\r\nExperiments show the following improvements:\r\n * local write workload to Apache Cassandra 4.0 is able to achieve 200kops for a single connection, compared to 70kops before the change\r\n * remote, shard-aware write workload to Scylla is able to achieve 200kops compared to 160k before the change\r\n * read workloads showed similar boosts, both locally and remotely\r\n\r\nFixes #338", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/328", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/328/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/328/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/328/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/328", "id": 1044151982, "node_id": "PR_kwDOEj0F684uELd8", "number": 328, "title": "topology: drop the serde_json dependency", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-03T21:57:26Z", "updated_at": "2021-11-04T07:59:14Z", "closed_at": "2021-11-04T07:59:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/328", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/328", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/328.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/328.patch", "merged_at": "2021-11-04T07:59:14Z"}, "body": "At the time when the logic responsible for querying keyspace metadata\r\nwas implemented, there was no support for map datatypes, which was\r\nneeded to parse the `replication` parameters of a keyspace. To work\r\naround that, the `toJson` function was used so that Scylla returns the\r\nparameters encoded as a JSON string. The serde_json library was added to\r\ndependencies solely for the purpose of parsing the encoded json map.\r\n\r\nSupport for direct deserialization of map types has been merged some\r\ntime ago, so there is no need to involve JSON as an intermediate step.\r\n\r\nThis commit removes the logic responsible for parsing the `replication`\r\nmap from JSON representation and now the map is parsed directly from its\r\nCQL representation. Additionally, the serde_json crate is removed from\r\ndependencies.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/328/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/328/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/294", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/294/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/294/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/294/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/294", "id": 1000760253, "node_id": "PR_kwDOEj0F684r8-nZ", "number": 294, "title": "Add ValueList derive macro", "user": {"login": "psarna", "id": 10433047, "node_id": "MDQ6VXNlcjEwNDMzMDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10433047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psarna", "html_url": "https://github.com/psarna", "followers_url": "https://api.github.com/users/psarna/followers", "following_url": "https://api.github.com/users/psarna/following{/other_user}", "gists_url": "https://api.github.com/users/psarna/gists{/gist_id}", "starred_url": "https://api.github.com/users/psarna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psarna/subscriptions", "organizations_url": "https://api.github.com/users/psarna/orgs", "repos_url": "https://api.github.com/users/psarna/repos", "events_url": "https://api.github.com/users/psarna/events{/privacy}", "received_events_url": "https://api.github.com/users/psarna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-09-20T09:35:55Z", "updated_at": "2023-10-12T13:33:51Z", "closed_at": "2021-10-12T10:45:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/294", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/294", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/294.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/294.patch", "merged_at": "2021-10-12T10:45:33Z"}, "body": "This commit adds a `ValueList` derive macro, which allows passing structs as value lists for queries. Each field in the struct will be used as a value, in the same order as the struct's definition. Example usage:\r\n\r\n```rust\r\n    #[derive(scylla::ValueList)]\r\n    struct MyType {\r\n        k: i32,\r\n        my: Option<String>,\r\n    }\r\n\r\n    let to_insert = MyType {\r\n        k: 17,\r\n        my: Some(\"Some string\".to_string()),\r\n    };\r\n\r\n    session\r\n        .query(\"INSERT INTO ks.my_type (k, my) VALUES (?, ?)\", to_insert)\r\n        .await\r\n        .unwrap();\r\n```\r\n\r\nFixes https://github.com/scylladb/scylla-rust-driver/issues/231\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/294/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/294/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/276", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/276/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/276/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/276/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/276", "id": 951603739, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk1OTYxOTQ2", "number": 276, "title": "Add getting column specification by name", "user": {"login": "psarna", "id": 10433047, "node_id": "MDQ6VXNlcjEwNDMzMDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10433047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psarna", "html_url": "https://github.com/psarna", "followers_url": "https://api.github.com/users/psarna/followers", "following_url": "https://api.github.com/users/psarna/following{/other_user}", "gists_url": "https://api.github.com/users/psarna/gists{/gist_id}", "starred_url": "https://api.github.com/users/psarna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psarna/subscriptions", "organizations_url": "https://api.github.com/users/psarna/orgs", "repos_url": "https://api.github.com/users/psarna/repos", "events_url": "https://api.github.com/users/psarna/events{/privacy}", "received_events_url": "https://api.github.com/users/psarna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-07-23T13:56:18Z", "updated_at": "2023-10-12T13:33:51Z", "closed_at": "2021-08-12T09:29:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/276", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/276", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/276.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/276.patch", "merged_at": "2021-08-12T09:29:19Z"}, "body": "This series is a first baby step towards solving #271 - which is about enabling users to get column values from result rows by name instead of by index.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/276/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/276/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/273", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/273/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/273/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/273/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/273", "id": 950033973, "node_id": "MDExOlB1bGxSZXF1ZXN0Njk0NjQzOTU4", "number": 273, "title": "Fix authentication for Cassandra", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-21T19:16:34Z", "updated_at": "2021-07-22T05:56:04Z", "closed_at": "2021-07-22T05:56:04Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/273", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/273", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/273.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/273.patch", "merged_at": "2021-07-22T05:56:04Z"}, "body": "This PR fixes a small number of bugs in password authentication logic, mostly related to frame (de)serialization. Despite those bugs, authentication in Scylla worked - however, Cassandra behaves a little differently and incorrectly read/written frames prevent the authentication flow from working.\r\n\r\nRefs: #272\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/273/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}], "chosen_pr": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/339", "id": 1055136240, "node_id": "PR_kwDOEj0F684umvGQ", "number": 339, "title": "Improve I/O performance via buffering", "user": {"login": "psarna", "id": 10433047, "node_id": "MDQ6VXNlcjEwNDMzMDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10433047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psarna", "html_url": "https://github.com/psarna", "followers_url": "https://api.github.com/users/psarna/followers", "following_url": "https://api.github.com/users/psarna/following{/other_user}", "gists_url": "https://api.github.com/users/psarna/gists{/gist_id}", "starred_url": "https://api.github.com/users/psarna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psarna/subscriptions", "organizations_url": "https://api.github.com/users/psarna/orgs", "repos_url": "https://api.github.com/users/psarna/repos", "events_url": "https://api.github.com/users/psarna/events{/privacy}", "received_events_url": "https://api.github.com/users/psarna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-11-16T17:25:28Z", "updated_at": "2023-10-12T13:34:29Z", "closed_at": "2021-11-17T15:24:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/339", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/339.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/339.patch", "merged_at": "2021-11-17T15:24:09Z"}, "body": "This pull request combines a couple of changes made in order to measure their impact on overall performance in various environments. The changes include:\r\n\r\n* increasing the internal channel size in the connection router\r\n* adding a buffering layer to reads\r\n* adding a buffering layer to writes\r\n    \r\nNOTICE: write buffering is done via `BufWriter`\r\ndue to the fact that Tokio does not yet expose write_all_vectored,\r\nand its implementation of write_vectored does not fit our needs,\r\nbecause it basically just sends one buffer at a time anyway.\r\nOnce write_all_vectored is solved, write buffering can be\r\nsimplified, and memory copying can be elided.\r\n\r\nExperiments show the following improvements:\r\n * local write workload to Apache Cassandra 4.0 is able to achieve 200kops for a single connection, compared to 70kops before the change\r\n * remote, shard-aware write workload to Scylla is able to achieve 200kops compared to 160k before the change\r\n * read workloads showed similar boosts, both locally and remotely\r\n\r\nFixes #338", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, "chosen_detail": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339", "id": 781906320, "node_id": "PR_kwDOEj0F684umvGQ", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/339", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/339.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/339.patch", "issue_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339", "number": 339, "state": "closed", "locked": false, "title": "Improve I/O performance via buffering", "user": {"login": "psarna", "id": 10433047, "node_id": "MDQ6VXNlcjEwNDMzMDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/10433047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psarna", "html_url": "https://github.com/psarna", "followers_url": "https://api.github.com/users/psarna/followers", "following_url": "https://api.github.com/users/psarna/following{/other_user}", "gists_url": "https://api.github.com/users/psarna/gists{/gist_id}", "starred_url": "https://api.github.com/users/psarna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psarna/subscriptions", "organizations_url": "https://api.github.com/users/psarna/orgs", "repos_url": "https://api.github.com/users/psarna/repos", "events_url": "https://api.github.com/users/psarna/events{/privacy}", "received_events_url": "https://api.github.com/users/psarna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "This pull request combines a couple of changes made in order to measure their impact on overall performance in various environments. The changes include:\r\n\r\n* increasing the internal channel size in the connection router\r\n* adding a buffering layer to reads\r\n* adding a buffering layer to writes\r\n    \r\nNOTICE: write buffering is done via `BufWriter`\r\ndue to the fact that Tokio does not yet expose write_all_vectored,\r\nand its implementation of write_vectored does not fit our needs,\r\nbecause it basically just sends one buffer at a time anyway.\r\nOnce write_all_vectored is solved, write buffering can be\r\nsimplified, and memory copying can be elided.\r\n\r\nExperiments show the following improvements:\r\n * local write workload to Apache Cassandra 4.0 is able to achieve 200kops for a single connection, compared to 70kops before the change\r\n * remote, shard-aware write workload to Scylla is able to achieve 200kops compared to 160k before the change\r\n * read workloads showed similar boosts, both locally and remotely\r\n\r\nFixes #338", "created_at": "2021-11-16T17:25:28Z", "updated_at": "2023-10-12T13:34:29Z", "closed_at": "2021-11-17T15:24:09Z", "merged_at": "2021-11-17T15:24:09Z", "merge_commit_sha": "83199faac35accfd18910d9b5fa7cf5f08384248", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339/commits", "review_comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339/comments", "review_comment_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/comments", "statuses_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/statuses/8758e28712258b5f5d5a4f3764f6257b7b369779", "head": {"label": "scylladb:improve_io_performance", "ref": "improve_io_performance", "sha": "8758e28712258b5f5d5a4f3764f6257b7b369779", "user": {"login": "scylladb", "id": 14364730, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0MzY0NzMw", "avatar_url": "https://avatars.githubusercontent.com/u/14364730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scylladb", "html_url": "https://github.com/scylladb", "followers_url": "https://api.github.com/users/scylladb/followers", "following_url": "https://api.github.com/users/scylladb/following{/other_user}", "gists_url": "https://api.github.com/users/scylladb/gists{/gist_id}", "starred_url": "https://api.github.com/users/scylladb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scylladb/subscriptions", "organizations_url": "https://api.github.com/users/scylladb/orgs", "repos_url": "https://api.github.com/users/scylladb/repos", "events_url": "https://api.github.com/users/scylladb/events{/privacy}", "received_events_url": "https://api.github.com/users/scylladb/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 305989099, "node_id": "MDEwOlJlcG9zaXRvcnkzMDU5ODkwOTk=", "name": "scylla-rust-driver", "full_name": "scylladb/scylla-rust-driver", "private": false, "owner": {"login": "scylladb", "id": 14364730, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0MzY0NzMw", "avatar_url": "https://avatars.githubusercontent.com/u/14364730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scylladb", "html_url": "https://github.com/scylladb", "followers_url": "https://api.github.com/users/scylladb/followers", "following_url": "https://api.github.com/users/scylladb/following{/other_user}", "gists_url": "https://api.github.com/users/scylladb/gists{/gist_id}", "starred_url": "https://api.github.com/users/scylladb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scylladb/subscriptions", "organizations_url": "https://api.github.com/users/scylladb/orgs", "repos_url": "https://api.github.com/users/scylladb/repos", "events_url": "https://api.github.com/users/scylladb/events{/privacy}", "received_events_url": "https://api.github.com/users/scylladb/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/scylladb/scylla-rust-driver", "description": "Async CQL driver for Rust, optimized for ScyllaDB!", "fork": false, "url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "forks_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/forks", "keys_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/teams", "hooks_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/hooks", "issue_events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/events{/number}", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/events", "assignees_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/assignees{/user}", "branches_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/branches{/branch}", "tags_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/tags", "blobs_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/refs{/sha}", "trees_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/statuses/{sha}", "languages_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/languages", "stargazers_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/stargazers", "contributors_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/contributors", "subscribers_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/subscribers", "subscription_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/subscription", "commits_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/commits{/sha}", "git_commits_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/commits{/sha}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/comments{/number}", "issue_comment_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/comments{/number}", "contents_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/contents/{+path}", "compare_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/merges", "archive_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/downloads", "issues_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues{/number}", "pulls_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls{/number}", "milestones_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones{/number}", "notifications_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels{/name}", "releases_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/releases{/id}", "deployments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/deployments", "created_at": "2020-10-21T10:31:55Z", "updated_at": "2026-01-20T21:33:51Z", "pushed_at": "2026-01-20T21:34:22Z", "git_url": "git://github.com/scylladb/scylla-rust-driver.git", "ssh_url": "git@github.com:scylladb/scylla-rust-driver.git", "clone_url": "https://github.com/scylladb/scylla-rust-driver.git", "svn_url": "https://github.com/scylladb/scylla-rust-driver", "homepage": "", "size": 8964, "stargazers_count": 663, "watchers_count": 663, "language": "Rust", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": true, "has_discussions": false, "forks_count": 146, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 136, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["cql", "driver", "rust", "scylladb"], "visibility": "public", "forks": 146, "open_issues": 136, "watchers": 663, "default_branch": "main"}}, "base": {"label": "scylladb:main", "ref": "main", "sha": "75345fcf7dc6de601f8dfcfa2adb1bbd425b591a", "user": {"login": "scylladb", "id": 14364730, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0MzY0NzMw", "avatar_url": "https://avatars.githubusercontent.com/u/14364730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scylladb", "html_url": "https://github.com/scylladb", "followers_url": "https://api.github.com/users/scylladb/followers", "following_url": "https://api.github.com/users/scylladb/following{/other_user}", "gists_url": "https://api.github.com/users/scylladb/gists{/gist_id}", "starred_url": "https://api.github.com/users/scylladb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scylladb/subscriptions", "organizations_url": "https://api.github.com/users/scylladb/orgs", "repos_url": "https://api.github.com/users/scylladb/repos", "events_url": "https://api.github.com/users/scylladb/events{/privacy}", "received_events_url": "https://api.github.com/users/scylladb/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 305989099, "node_id": "MDEwOlJlcG9zaXRvcnkzMDU5ODkwOTk=", "name": "scylla-rust-driver", "full_name": "scylladb/scylla-rust-driver", "private": false, "owner": {"login": "scylladb", "id": 14364730, "node_id": "MDEyOk9yZ2FuaXphdGlvbjE0MzY0NzMw", "avatar_url": "https://avatars.githubusercontent.com/u/14364730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scylladb", "html_url": "https://github.com/scylladb", "followers_url": "https://api.github.com/users/scylladb/followers", "following_url": "https://api.github.com/users/scylladb/following{/other_user}", "gists_url": "https://api.github.com/users/scylladb/gists{/gist_id}", "starred_url": "https://api.github.com/users/scylladb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scylladb/subscriptions", "organizations_url": "https://api.github.com/users/scylladb/orgs", "repos_url": "https://api.github.com/users/scylladb/repos", "events_url": "https://api.github.com/users/scylladb/events{/privacy}", "received_events_url": "https://api.github.com/users/scylladb/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/scylladb/scylla-rust-driver", "description": "Async CQL driver for Rust, optimized for ScyllaDB!", "fork": false, "url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "forks_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/forks", "keys_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/teams", "hooks_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/hooks", "issue_events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/events{/number}", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/events", "assignees_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/assignees{/user}", "branches_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/branches{/branch}", "tags_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/tags", "blobs_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/refs{/sha}", "trees_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/statuses/{sha}", "languages_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/languages", "stargazers_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/stargazers", "contributors_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/contributors", "subscribers_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/subscribers", "subscription_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/subscription", "commits_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/commits{/sha}", "git_commits_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/git/commits{/sha}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/comments{/number}", "issue_comment_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/comments{/number}", "contents_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/contents/{+path}", "compare_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/merges", "archive_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/downloads", "issues_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues{/number}", "pulls_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls{/number}", "milestones_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones{/number}", "notifications_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels{/name}", "releases_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/releases{/id}", "deployments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/deployments", "created_at": "2020-10-21T10:31:55Z", "updated_at": "2026-01-20T21:33:51Z", "pushed_at": "2026-01-20T21:34:22Z", "git_url": "git://github.com/scylladb/scylla-rust-driver.git", "ssh_url": "git@github.com:scylladb/scylla-rust-driver.git", "clone_url": "https://github.com/scylladb/scylla-rust-driver.git", "svn_url": "https://github.com/scylladb/scylla-rust-driver", "homepage": "", "size": 8964, "stargazers_count": 663, "watchers_count": 663, "language": "Rust", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": true, "has_discussions": false, "forks_count": 146, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 136, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["cql", "driver", "rust", "scylladb"], "visibility": "public", "forks": 146, "open_issues": 136, "watchers": 663, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339"}, "html": {"href": "https://github.com/scylladb/scylla-rust-driver/pull/339"}, "issue": {"href": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339"}, "comments": {"href": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/339/comments"}, "review_comments": {"href": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339/comments"}, "review_comment": {"href": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/339/commits"}, "statuses": {"href": "https://api.github.com/repos/scylladb/scylla-rust-driver/statuses/8758e28712258b5f5d5a4f3764f6257b7b369779"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 9, "review_comments": 7, "maintainer_can_modify": false, "commits": 4, "additions": 47, "deletions": 24, "changed_files": 2}}