{"window": ["2022-03-08T13:59:00.709389+00:00", "2023-05-03T20:30:05.418006+00:00"], "repo_slug": "lunatic-solutions/lunatic", "candidates": [{"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/200", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/200/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/200/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/200/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/200", "id": 1624804581, "node_id": "PR_kwDOEVCc0c5MEXJq", "number": 200, "title": "Conventional commits changelog", "user": {"login": "tqwewe", "id": 16362377, "node_id": "MDQ6VXNlcjE2MzYyMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/16362377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tqwewe", "html_url": "https://github.com/tqwewe", "followers_url": "https://api.github.com/users/tqwewe/followers", "following_url": "https://api.github.com/users/tqwewe/following{/other_user}", "gists_url": "https://api.github.com/users/tqwewe/gists{/gist_id}", "starred_url": "https://api.github.com/users/tqwewe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tqwewe/subscriptions", "organizations_url": "https://api.github.com/users/tqwewe/orgs", "repos_url": "https://api.github.com/users/tqwewe/repos", "events_url": "https://api.github.com/users/tqwewe/events{/privacy}", "received_events_url": "https://api.github.com/users/tqwewe/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-15T05:53:58Z", "updated_at": "2023-05-03T11:45:49Z", "closed_at": "2023-05-03T09:07:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/200", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/200", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/200.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/200.patch", "merged_at": "2023-05-03T09:07:47Z"}, "body": "## Changelog generation\r\n\r\nThe changelog is updated using the [git-cliff](https://git-cliff.org/) cli, which generates the changelog file from the [Git](https://git-scm.com/) history by utilizing [conventional commits](https://git-cliff.org/#conventional_commits).\r\n\r\nThe changelog template is defined in [Cargo.toml](/Cargo.toml) under `[workspace.metadata.git-cliff.*]`.\r\n\r\nUpdating the CHANGELOG.md file can be achieved with the following command:\r\n\r\n```bash\r\ngit cliff --config ./Cargo.toml --latest --prepend ./CHANGELOG.md\r\n```\r\n\r\nThe commit types are as follows:\r\n\r\n* **feat**: A new feature\r\n* **fix**: A bug fix\r\n* **docs**: Documentation only changes\r\n* **style**: Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)\r\n* **refactor**: A code change that neither fixes a bug nor adds a feature\r\n* **perf**: A code change that improves performance\r\n* **test**: Adding missing or correcting existing tests\r\n* **chore**: Changes to the build process or auxiliary tools and libraries such as documentation generation\r\n\r\nFor more information, see the [git-cliff usage documentation](https://git-cliff.org/#usage).\r\n\r\n---\r\n\r\nNote, the current commits don't follow the conventional commits spec, so the next changelog will likely have to be done manually still. But after the next tag is released, if we stick to conventional commit messages, future changelogs can be generated and prepended to the `CHANGELOG.md` file as described in the command above.\r\n\r\nContributors are not required to adhere to the conventional commit spec, but if we merge any PRs, we should consolidate the commits into a single conventional commit message.\r\n\r\nI could add CI integration for generating the changelog, though I'm not sure if its preferred we run the command manually upon creating a new release.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/200/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/187", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/187/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/187/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/187/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/187", "id": 1567587449, "node_id": "PR_kwDOEVCc0c5JFe0m", "number": 187, "title": "Show registered process name in trap warning messages", "user": {"login": "tqwewe", "id": 16362377, "node_id": "MDQ6VXNlcjE2MzYyMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/16362377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tqwewe", "html_url": "https://github.com/tqwewe", "followers_url": "https://api.github.com/users/tqwewe/followers", "following_url": "https://api.github.com/users/tqwewe/following{/other_user}", "gists_url": "https://api.github.com/users/tqwewe/gists{/gist_id}", "starred_url": "https://api.github.com/users/tqwewe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tqwewe/subscriptions", "organizations_url": "https://api.github.com/users/tqwewe/orgs", "repos_url": "https://api.github.com/users/tqwewe/repos", "events_url": "https://api.github.com/users/tqwewe/events{/privacy}", "received_events_url": "https://api.github.com/users/tqwewe/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-02T08:46:08Z", "updated_at": "2023-02-07T09:25:11Z", "closed_at": "2023-02-07T09:23:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/187", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/187", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/187.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/187.patch", "merged_at": "2023-02-07T09:23:42Z"}, "body": "Fixes https://github.com/lunatic-solutions/lunatic/issues/124\r\nDepends on https://github.com/lunatic-solutions/lunatic-rs/pull/100\r\n\r\nLooks up the process name in the registry to provide better logging when a process fails.\r\nIt uses the process naming conventioned mentioned in https://github.com/lunatic-solutions/lunatic-rs/pull/100.\r\n\r\n**This does not check for node_id when looking for registered process name, only process_id.** Is this a problem? I wasn't sure how to get the node of the process.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/187/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/185", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/185/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/185/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/185/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/185", "id": 1563670346, "node_id": "PR_kwDOEVCc0c5I4V8X", "number": 185, "title": "Submillisecond control server", "user": {"login": "tqwewe", "id": 16362377, "node_id": "MDQ6VXNlcjE2MzYyMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/16362377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tqwewe", "html_url": "https://github.com/tqwewe", "followers_url": "https://api.github.com/users/tqwewe/followers", "following_url": "https://api.github.com/users/tqwewe/following{/other_user}", "gists_url": "https://api.github.com/users/tqwewe/gists{/gist_id}", "starred_url": "https://api.github.com/users/tqwewe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tqwewe/subscriptions", "organizations_url": "https://api.github.com/users/tqwewe/orgs", "repos_url": "https://api.github.com/users/tqwewe/repos", "events_url": "https://api.github.com/users/tqwewe/events{/privacy}", "received_events_url": "https://api.github.com/users/tqwewe/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-31T05:14:41Z", "updated_at": "2023-03-14T10:04:19Z", "closed_at": "2023-03-14T08:39:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/185", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/185", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/185.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/185.patch", "merged_at": "2023-03-14T08:39:47Z"}, "body": "Implements the control server using submillisecond.\r\n\r\nThis requires building to wasm, and uses git dependencies for now until lunatic 0.13 is released.\r\n\r\nhttps://github.com/lunatic-solutions/lunatic/blob/31b7b5d476cf5ef64d58bc161f4e530c02573ebd/crates/lunatic-control-submillisecond/README.md?plain=1#L1-L26", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/185/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/178", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/178/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/178/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/178/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/178", "id": 1533694010, "node_id": "PR_kwDOEVCc0c5HZvXn", "number": 178, "title": "Run wasm default option", "user": {"login": "pinkforest", "id": 36498018, "node_id": "MDQ6VXNlcjM2NDk4MDE4", "avatar_url": "https://avatars.githubusercontent.com/u/36498018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinkforest", "html_url": "https://github.com/pinkforest", "followers_url": "https://api.github.com/users/pinkforest/followers", "following_url": "https://api.github.com/users/pinkforest/following{/other_user}", "gists_url": "https://api.github.com/users/pinkforest/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinkforest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinkforest/subscriptions", "organizations_url": "https://api.github.com/users/pinkforest/orgs", "repos_url": "https://api.github.com/users/pinkforest/repos", "events_url": "https://api.github.com/users/pinkforest/events{/privacy}", "received_events_url": "https://api.github.com/users/pinkforest/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-15T07:10:24Z", "updated_at": "2023-01-16T09:42:58Z", "closed_at": "2023-01-16T09:39:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/178", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/178", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/178.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/178.patch", "merged_at": "2023-01-16T09:39:26Z"}, "body": "- If subcommand is not found it is assumed it is `lunatic run <wasm>` without having to say `run`\r\n- Allows backwards compatibility to 0.12\r\n- Ergonomics: Less pain migrating to 0.13", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/178/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/173", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/173/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/173/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/173/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/173", "id": 1531905544, "node_id": "PR_kwDOEVCc0c5HTyNT", "number": 173, "title": "chore: Security automation", "user": {"login": "pinkforest", "id": 36498018, "node_id": "MDQ6VXNlcjM2NDk4MDE4", "avatar_url": "https://avatars.githubusercontent.com/u/36498018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinkforest", "html_url": "https://github.com/pinkforest", "followers_url": "https://api.github.com/users/pinkforest/followers", "following_url": "https://api.github.com/users/pinkforest/following{/other_user}", "gists_url": "https://api.github.com/users/pinkforest/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinkforest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinkforest/subscriptions", "organizations_url": "https://api.github.com/users/pinkforest/orgs", "repos_url": "https://api.github.com/users/pinkforest/repos", "events_url": "https://api.github.com/users/pinkforest/events{/privacy}", "received_events_url": "https://api.github.com/users/pinkforest/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-13T08:29:36Z", "updated_at": "2023-01-13T09:33:22Z", "closed_at": "2023-01-13T09:33:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/173", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/173", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/173.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/173.patch", "merged_at": "2023-01-13T09:33:22Z"}, "body": "Same description / motivation as: https://github.com/lunatic-solutions/lunatic-rs/pull/96\r\n\r\nOutstanding advisories:\r\n- The tokio has no impact for lunatic as it's pipeserver thing and just esoteric configuration one\r\n- let me see the others\r\n", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/173/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/171", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/171/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/171/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/171/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/171", "id": 1506387282, "node_id": "PR_kwDOEVCc0c5F9k2t", "number": 171, "title": "Distributed QUIC mTLS", "user": {"login": "kosticmarin", "id": 28999182, "node_id": "MDQ6VXNlcjI4OTk5MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/28999182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kosticmarin", "html_url": "https://github.com/kosticmarin", "followers_url": "https://api.github.com/users/kosticmarin/followers", "following_url": "https://api.github.com/users/kosticmarin/following{/other_user}", "gists_url": "https://api.github.com/users/kosticmarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kosticmarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kosticmarin/subscriptions", "organizations_url": "https://api.github.com/users/kosticmarin/orgs", "repos_url": "https://api.github.com/users/kosticmarin/repos", "events_url": "https://api.github.com/users/kosticmarin/events{/privacy}", "received_events_url": "https://api.github.com/users/kosticmarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-21T14:25:38Z", "updated_at": "2022-12-21T14:55:04Z", "closed_at": "2022-12-21T14:55:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/171", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/171", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/171.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/171.patch", "merged_at": "2022-12-21T14:55:01Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/171/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/171/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/170", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/170/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/170/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/170/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/170", "id": 1505986490, "node_id": "PR_kwDOEVCc0c5F8NCN", "number": 170, "title": "Feature/new ctrl", "user": {"login": "withtypes", "id": 2822606, "node_id": "MDQ6VXNlcjI4MjI2MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/2822606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/withtypes", "html_url": "https://github.com/withtypes", "followers_url": "https://api.github.com/users/withtypes/followers", "following_url": "https://api.github.com/users/withtypes/following{/other_user}", "gists_url": "https://api.github.com/users/withtypes/gists{/gist_id}", "starred_url": "https://api.github.com/users/withtypes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/withtypes/subscriptions", "organizations_url": "https://api.github.com/users/withtypes/orgs", "repos_url": "https://api.github.com/users/withtypes/repos", "events_url": "https://api.github.com/users/withtypes/events{/privacy}", "received_events_url": "https://api.github.com/users/withtypes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-21T09:29:24Z", "updated_at": "2022-12-22T04:53:05Z", "closed_at": "2022-12-22T04:52:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/170", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/170", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/170.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/170.patch", "merged_at": "2022-12-22T04:52:47Z"}, "body": "The biggest change in this PR is using HTTP for the control server, moving from our custom request/response protocol based on QUIC. Because nodes use QUIC to communicate, originally the idea was to use the same protocol for node-control messages. The main advantage is that HTTP is well supported and understood by devs so it's easier to implement custom control servers using different languages (lunatic sms?). @kosticmarin and @teskeras contributed greatly to this PR. \ud83d\udc4d \r\n\r\n# New Control\r\n\r\nBesides moving to HTTP, we have separated start into two parts:\r\n\r\n1. on the first run, node will register itself using a provided URL (possibly with a short-lived authentication token). It will generate a cert signing request and later use mTLS for authentication (between nodes and for other control API endpoints)\r\n2. whenever a node starts, it will notify the control server and receive a new node id\r\n\r\nOther API endpoints mirror the previous messages: node list, get and add module. The current control server is implemented using Axum and stores everything in-memory.\r\n\r\n# New CLI Arguments\r\n\r\nI have changed the CLI arguments to be based on commands:\r\n\r\n- `lunatic run some.wasm` will run a wasm module as before without distributed lunatic\r\n- `lunatic control` will start only a control server (see `lunatic help control` for other arguments). By default it starts it on localhost:3000 with test certificates to simplify testing\r\n- `lunatic node` will start a node. To simplify testing we can provide a wasm module that will be run on this node with `lunatic node --wasm some.wasm`\r\n\r\n# Other Changes\r\n\r\n- mutual TLS\r\n- ctrl-c handler for graceful stopping of nodes\r\n- MessagePack instead of Bincode for communication (this might be temp as it was the simplest format which stays ", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/170/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/167", "id": 1479385782, "node_id": "PR_kwDOEVCc0c5Ef2_b", "number": 167, "title": "upgrade wasmtime to 3.0", "user": {"login": "jtenner", "id": 3761339, "node_id": "MDQ6VXNlcjM3NjEzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3761339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtenner", "html_url": "https://github.com/jtenner", "followers_url": "https://api.github.com/users/jtenner/followers", "following_url": "https://api.github.com/users/jtenner/following{/other_user}", "gists_url": "https://api.github.com/users/jtenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtenner/subscriptions", "organizations_url": "https://api.github.com/users/jtenner/orgs", "repos_url": "https://api.github.com/users/jtenner/repos", "events_url": "https://api.github.com/users/jtenner/events{/privacy}", "received_events_url": "https://api.github.com/users/jtenner/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-06T15:28:52Z", "updated_at": "2022-12-06T17:04:06Z", "closed_at": "2022-12-06T17:04:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/167", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/167.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/167.patch", "merged_at": "2022-12-06T17:04:06Z"}, "body": "Tests pass locally, everything seems to work. Ready for review!", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/166", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/166/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/166/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/166/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/166", "id": 1476374018, "node_id": "PR_kwDOEVCc0c5EVSbq", "number": 166, "title": "Implement local control server", "user": {"login": "teskeras", "id": 37419530, "node_id": "MDQ6VXNlcjM3NDE5NTMw", "avatar_url": "https://avatars.githubusercontent.com/u/37419530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teskeras", "html_url": "https://github.com/teskeras", "followers_url": "https://api.github.com/users/teskeras/followers", "following_url": "https://api.github.com/users/teskeras/following{/other_user}", "gists_url": "https://api.github.com/users/teskeras/gists{/gist_id}", "starred_url": "https://api.github.com/users/teskeras/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teskeras/subscriptions", "organizations_url": "https://api.github.com/users/teskeras/orgs", "repos_url": "https://api.github.com/users/teskeras/repos", "events_url": "https://api.github.com/users/teskeras/events{/privacy}", "received_events_url": "https://api.github.com/users/teskeras/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-05T11:50:00Z", "updated_at": "2022-12-09T05:00:57Z", "closed_at": "2022-12-09T05:00:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/166", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/166", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/166.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/166.patch", "merged_at": "2022-12-09T05:00:54Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/166/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/165", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/165/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/165/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/165/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/165", "id": 1473531238, "node_id": "PR_kwDOEVCc0c5ELWpJ", "number": 165, "title": "add cargo-lunatic wrapper", "user": {"login": "Gentle", "id": 80344, "node_id": "MDQ6VXNlcjgwMzQ0", "avatar_url": "https://avatars.githubusercontent.com/u/80344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gentle", "html_url": "https://github.com/Gentle", "followers_url": "https://api.github.com/users/Gentle/followers", "following_url": "https://api.github.com/users/Gentle/following{/other_user}", "gists_url": "https://api.github.com/users/Gentle/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gentle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gentle/subscriptions", "organizations_url": "https://api.github.com/users/Gentle/orgs", "repos_url": "https://api.github.com/users/Gentle/repos", "events_url": "https://api.github.com/users/Gentle/events{/privacy}", "received_events_url": "https://api.github.com/users/Gentle/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-02T22:25:05Z", "updated_at": "2022-12-02T23:26:56Z", "closed_at": "2022-12-02T23:26:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/165", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/165", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/165.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/165.patch", "merged_at": "2022-12-02T23:26:55Z"}, "body": "as discussed on Discord, I propose this command `cargo-lunatic` as an addition to lunatic_runtime\r\n\r\nit is a thin wrapper that sets environment variables and then calls cargo with the rest of the parameters, effectively replacing `.cargo/config.toml`. It is useful when you have mixed workspaces where you don't necessarily want to globally set the runner for wasm32-wasi or the target to wasm32-wasi\r\n\r\nyou generally run it with `cargo lunatic ...` where anything following lunatic is then forwarded to cargo, so for example you can now use `cargo lunatic test` or `cargo lunatic run -p web` or `cargo lunatic build --release` and cargo will automatically set target to wasm32-wasi and run the binary with lunatic", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/165/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/164", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/164/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/164/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/164/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/164", "id": 1470411775, "node_id": "PR_kwDOEVCc0c5EAvxa", "number": 164, "title": "add metrics API", "user": {"login": "Roger", "id": 9746, "node_id": "MDQ6VXNlcjk3NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/9746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Roger", "html_url": "https://github.com/Roger", "followers_url": "https://api.github.com/users/Roger/followers", "following_url": "https://api.github.com/users/Roger/following{/other_user}", "gists_url": "https://api.github.com/users/Roger/gists{/gist_id}", "starred_url": "https://api.github.com/users/Roger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Roger/subscriptions", "organizations_url": "https://api.github.com/users/Roger/orgs", "repos_url": "https://api.github.com/users/Roger/repos", "events_url": "https://api.github.com/users/Roger/events{/privacy}", "received_events_url": "https://api.github.com/users/Roger/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-01T00:28:47Z", "updated_at": "2022-12-01T08:48:59Z", "closed_at": "2022-12-01T08:48:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/164", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/164", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/164.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/164.patch", "merged_at": "2022-12-01T08:48:59Z"}, "body": "Expose metrics-rs APIs to wasm modules\r\n\r\nWould be nice to have also https://github.com/lunatic-solutions/lunatic/pull/159 merged, so metrics can be shown in prometheus", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/164/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/164/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/160", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/160/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/160/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/160", "id": 1462424255, "node_id": "PR_kwDOEVCc0c5DmRBB", "number": 160, "title": "Sqlite support", "user": {"login": "SquattingSocrates", "id": 71330860, "node_id": "MDQ6VXNlcjcxMzMwODYw", "avatar_url": "https://avatars.githubusercontent.com/u/71330860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SquattingSocrates", "html_url": "https://github.com/SquattingSocrates", "followers_url": "https://api.github.com/users/SquattingSocrates/followers", "following_url": "https://api.github.com/users/SquattingSocrates/following{/other_user}", "gists_url": "https://api.github.com/users/SquattingSocrates/gists{/gist_id}", "starred_url": "https://api.github.com/users/SquattingSocrates/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SquattingSocrates/subscriptions", "organizations_url": "https://api.github.com/users/SquattingSocrates/orgs", "repos_url": "https://api.github.com/users/SquattingSocrates/repos", "events_url": "https://api.github.com/users/SquattingSocrates/events{/privacy}", "received_events_url": "https://api.github.com/users/SquattingSocrates/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-11-23T21:24:59Z", "updated_at": "2023-05-15T12:39:45Z", "closed_at": "2023-01-31T14:07:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/160", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/160", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/160.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/160.patch", "merged_at": "2023-01-31T14:07:27Z"}, "body": "Extended the excellent work of @jtenner and built rust guest bindings against this branch. I'd keep this open for now because I want to build a larger interface for better integration with ORMs etc.\r\n\r\nIt's usable for testing though. If you add this FFI in the lunatic-rs lib:\r\n```rust\r\npub mod sqlite {\r\n    #[link(wasm_import_module = \"lunatic::sqlite\")]\r\n    extern \"C\" {\r\n        pub fn open(path: *const u8, path_len: usize, conn_id: *mut u32) -> u64;\r\n        pub fn query_prepare(\r\n            conn_id: u64,\r\n            query_str: *const u8,\r\n            query_str_len: u32,\r\n            len_ptr: *mut u32,\r\n            resource_id: *mut u32,\r\n        ) -> ();\r\n        pub fn query_result_get(resource_id: u64, write_buf: *const u8, write_buf_len: u32) -> ();\r\n        pub fn drop_query_result(resource_id: u64) -> ();\r\n        pub fn execute(conn_id: u64, exec_str: *const u8, exec_str_len: u32) -> u32;\r\n    }\r\n}\r\n\r\n```\r\n\r\nThen add a couple of convenience wrapper methods for the host functions:\r\n```rust\r\nuse crate::host::api;\r\nuse std::path::Path;\r\n\r\npub fn open(path: &Path) -> u64 {\r\n    let conn_id = 0u64;\r\n    let path_str = path.to_str().unwrap();\r\n    unsafe {\r\n        api::sqlite::open(path_str.as_ptr(), path_str.len(), &mut (conn_id as u32));\r\n    }\r\n    conn_id\r\n}\r\n/// returns a tuple consisting of the length of data written to the buf\r\n/// as well as the resource id\r\npub fn query_prepare(conn_id: u64, query: &str) -> (u32, u64) {\r\n    let mut len = 0u32;\r\n    let resource_id = 0u64;\r\n    unsafe {\r\n        api::sqlite::query_prepare(\r\n            conn_id,\r\n            query.as_ptr(),\r\n            query.len() as u32,\r\n            &mut len,\r\n            &mut (resource_id as u32),\r\n        );\r\n        (len, resource_id)\r\n    }\r\n}\r\npub fn query_result_get(resource_id: u64, buf: &mut [u8]) -> () {\r\n    unsafe {\r\n        api::sqlite::query_result_get(resource_id, buf.as_ptr(), buf.len() as u32);\r\n    }\r\n}\r\npub fn drop_query_result(resource_id: u64) -> () {\r\n    unsafe {\r\n        api::sqlite::drop_query_result(resource_id);\r\n    }\r\n}\r\npub fn execute(conn_id: u64, exec_str: &str) -> u32 {\r\n    unsafe { api::sqlite::execute(conn_id, exec_str.as_ptr(), exec_str.len() as u32) }\r\n}\r\n```\r\n\r\nYou'll be able to run this example:\r\n```rust\r\nuse lunatic::sqlite;\r\nuse std::path::Path;\r\n\r\nfn main() {\r\n    println!(\"Opening connection to sqlite...\");\r\n    let db = sqlite::open(Path::new(\"./test_db\"));\r\n    println!(\"Connected to sqlite\");\r\n    let x = sqlite::execute(db, \"CREATE TABLE IF NOT EXISTS movie(title, year, score)\");\r\n    println!(\"RESULT OF EXEC {:?}\", x);\r\n\r\n    sqlite::execute(\r\n        db,\r\n        r\"\r\n    INSERT INTO movie VALUES\r\n        ('Monty Python and the Holy Grail', 1975, 8.2),\r\n        ('And Now for Something Completely Different', 1971, 7.5)\",\r\n    );\r\n\r\n    let (len, result_id) = sqlite::query_prepare(db, \"SELECT title, score FROM movie\");\r\n    let mut buf = vec![0u8; len as usize];\r\n    sqlite::query_result_get(result_id.into(), &mut buf);\r\n    println!(\"RECEIVED DATA FROM SQLITE {:?}\", String::from_utf8(buf));\r\n}\r\n```", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/160/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/160/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/157", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/157/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/157/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/157/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/157", "id": 1451939241, "node_id": "PR_kwDOEVCc0c5DCuCN", "number": 157, "title": "Remove and refactor Cargo.toml content", "user": {"login": "tqwewe", "id": 16362377, "node_id": "MDQ6VXNlcjE2MzYyMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/16362377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tqwewe", "html_url": "https://github.com/tqwewe", "followers_url": "https://api.github.com/users/tqwewe/followers", "following_url": "https://api.github.com/users/tqwewe/following{/other_user}", "gists_url": "https://api.github.com/users/tqwewe/gists{/gist_id}", "starred_url": "https://api.github.com/users/tqwewe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tqwewe/subscriptions", "organizations_url": "https://api.github.com/users/tqwewe/orgs", "repos_url": "https://api.github.com/users/tqwewe/repos", "events_url": "https://api.github.com/users/tqwewe/events{/privacy}", "received_events_url": "https://api.github.com/users/tqwewe/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-16T16:49:04Z", "updated_at": "2022-11-16T17:08:52Z", "closed_at": "2022-11-16T17:02:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/157", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/157", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/157.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/157.patch", "merged_at": "2022-11-16T17:02:57Z"}, "body": "- Removes `wasmparser` dependency from workspace\r\n- Moves `wasi-common` from workspace dependencies to crate\r\n- Sorts fields in `lunatic-networking-api` crate", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/157/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/156", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/156/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/156/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/156", "id": 1450975076, "node_id": "PR_kwDOEVCc0c5C_bzY", "number": 156, "title": "Format Cargo.toml files", "user": {"login": "tqwewe", "id": 16362377, "node_id": "MDQ6VXNlcjE2MzYyMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/16362377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tqwewe", "html_url": "https://github.com/tqwewe", "followers_url": "https://api.github.com/users/tqwewe/followers", "following_url": "https://api.github.com/users/tqwewe/following{/other_user}", "gists_url": "https://api.github.com/users/tqwewe/gists{/gist_id}", "starred_url": "https://api.github.com/users/tqwewe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tqwewe/subscriptions", "organizations_url": "https://api.github.com/users/tqwewe/orgs", "repos_url": "https://api.github.com/users/tqwewe/repos", "events_url": "https://api.github.com/users/tqwewe/events{/privacy}", "received_events_url": "https://api.github.com/users/tqwewe/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-11-16T06:41:46Z", "updated_at": "2022-11-16T12:26:29Z", "closed_at": "2022-11-16T12:22:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/156", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/156", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/156.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/156.patch", "merged_at": "2022-11-16T12:22:06Z"}, "body": "Sorts dependencies alphabetically, and places local crates at the top, and external crates below. Blesses project with some OCD.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/156/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/155", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/155/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/155/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/155/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/155", "id": 1449652563, "node_id": "PR_kwDOEVCc0c5C7CTH", "number": 155, "title": "Remove alternative distributed transport modes", "user": {"login": "kosticmarin", "id": 28999182, "node_id": "MDQ6VXNlcjI4OTk5MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/28999182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kosticmarin", "html_url": "https://github.com/kosticmarin", "followers_url": "https://api.github.com/users/kosticmarin/followers", "following_url": "https://api.github.com/users/kosticmarin/following{/other_user}", "gists_url": "https://api.github.com/users/kosticmarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kosticmarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kosticmarin/subscriptions", "organizations_url": "https://api.github.com/users/kosticmarin/orgs", "repos_url": "https://api.github.com/users/kosticmarin/repos", "events_url": "https://api.github.com/users/kosticmarin/events{/privacy}", "received_events_url": "https://api.github.com/users/kosticmarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-15T11:48:30Z", "updated_at": "2022-11-16T07:17:02Z", "closed_at": "2022-11-16T07:16:59Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/155", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/155", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/155.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/155.patch", "merged_at": "2022-11-16T07:16:59Z"}, "body": "Drop support for tcp and s2n-quic feature flags.\r\n\r\nWe already discussed that it just tiresome to maintain all three different implementations.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/155/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/155/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/153", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/153/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/153/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/153/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/153", "id": 1448184123, "node_id": "PR_kwDOEVCc0c5C2GMb", "number": 153, "title": "Update wasmtime, clap, and other dependencies", "user": {"login": "tqwewe", "id": 16362377, "node_id": "MDQ6VXNlcjE2MzYyMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/16362377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tqwewe", "html_url": "https://github.com/tqwewe", "followers_url": "https://api.github.com/users/tqwewe/followers", "following_url": "https://api.github.com/users/tqwewe/following{/other_user}", "gists_url": "https://api.github.com/users/tqwewe/gists{/gist_id}", "starred_url": "https://api.github.com/users/tqwewe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tqwewe/subscriptions", "organizations_url": "https://api.github.com/users/tqwewe/orgs", "repos_url": "https://api.github.com/users/tqwewe/repos", "events_url": "https://api.github.com/users/tqwewe/events{/privacy}", "received_events_url": "https://api.github.com/users/tqwewe/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-14T14:34:40Z", "updated_at": "2022-11-15T03:32:39Z", "closed_at": "2022-11-14T15:54:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/153", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/153", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/153.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/153.patch", "merged_at": "2022-11-14T15:54:34Z"}, "body": "Updates all dependencies to the latest version, including wasmtime, clap, and quinn.\r\nClap has also been updated to use the derive macro for argument parsing.\r\n\r\nI haven't familiarized myself a lot with lunatic-distributed, and I had to update a few things with quinn due to the update. It should be all correct, but it would be good to have someone verify everything is correct.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/153/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/153/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/141", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/141/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/141/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/141", "id": 1397791867, "node_id": "PR_kwDOEVCc0c5ANuXP", "number": 141, "title": "Tls issue", "user": {"login": "SquattingSocrates", "id": 71330860, "node_id": "MDQ6VXNlcjcxMzMwODYw", "avatar_url": "https://avatars.githubusercontent.com/u/71330860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SquattingSocrates", "html_url": "https://github.com/SquattingSocrates", "followers_url": "https://api.github.com/users/SquattingSocrates/followers", "following_url": "https://api.github.com/users/SquattingSocrates/following{/other_user}", "gists_url": "https://api.github.com/users/SquattingSocrates/gists{/gist_id}", "starred_url": "https://api.github.com/users/SquattingSocrates/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SquattingSocrates/subscriptions", "organizations_url": "https://api.github.com/users/SquattingSocrates/orgs", "repos_url": "https://api.github.com/users/SquattingSocrates/repos", "events_url": "https://api.github.com/users/SquattingSocrates/events{/privacy}", "received_events_url": "https://api.github.com/users/SquattingSocrates/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-10-05T13:25:24Z", "updated_at": "2022-10-17T09:03:40Z", "closed_at": "2022-10-17T09:03:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/141", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/141", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/141.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/141.patch", "merged_at": "2022-10-17T09:03:40Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/141/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/139", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/139/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/139/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/139/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/139", "id": 1385135814, "node_id": "PR_kwDOEVCc0c4_j4nz", "number": 139, "title": "Bump to wasmtime one oh oh oh !", "user": {"login": "pinkforest", "id": 36498018, "node_id": "MDQ6VXNlcjM2NDk4MDE4", "avatar_url": "https://avatars.githubusercontent.com/u/36498018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinkforest", "html_url": "https://github.com/pinkforest", "followers_url": "https://api.github.com/users/pinkforest/followers", "following_url": "https://api.github.com/users/pinkforest/following{/other_user}", "gists_url": "https://api.github.com/users/pinkforest/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinkforest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinkforest/subscriptions", "organizations_url": "https://api.github.com/users/pinkforest/orgs", "repos_url": "https://api.github.com/users/pinkforest/repos", "events_url": "https://api.github.com/users/pinkforest/events{/privacy}", "received_events_url": "https://api.github.com/users/pinkforest/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-25T19:22:53Z", "updated_at": "2022-09-26T09:55:30Z", "closed_at": "2022-09-26T09:55:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/139", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/139", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/139.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/139.patch", "merged_at": "2022-09-26T09:55:30Z"}, "body": ":partying_face: https://bytecodealliance.org/articles/wasmtime-1-0-fast-safe-and-production-ready\r\n\r\nAnyways - please merge https://github.com/lunatic-solutions/lunatic/pull/138 into v0.10 before and release point-release there\r\n\r\nAnd then this can be for v0.11 release but ideally wait until wasmtime v1.0.1 has appeared so it contains the fix for the above as well\r\n\r\n0.40 wasmtime ended up having patched 0.25 cap-primitives (and two other crates) via crates.io patching\r\n1.0 wasmtime will have proper release 1.0.1 that contains the fixes discussed in #138 \r\n\r\n_I could always patch the branches on 1.0 too but I'll wait and see what happens re: point releases_\r\n\r\nLet me know when you are back and we can talk this through.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/139/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/138", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/138/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/138/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/138/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/138", "id": 1385054327, "node_id": "PR_kwDOEVCc0c4_jqlU", "number": 138, "title": "Fix windows builds on 1.64 stable and nightlies", "user": {"login": "pinkforest", "id": 36498018, "node_id": "MDQ6VXNlcjM2NDk4MDE4", "avatar_url": "https://avatars.githubusercontent.com/u/36498018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinkforest", "html_url": "https://github.com/pinkforest", "followers_url": "https://api.github.com/users/pinkforest/followers", "following_url": "https://api.github.com/users/pinkforest/following{/other_user}", "gists_url": "https://api.github.com/users/pinkforest/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinkforest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinkforest/subscriptions", "organizations_url": "https://api.github.com/users/pinkforest/orgs", "repos_url": "https://api.github.com/users/pinkforest/repos", "events_url": "https://api.github.com/users/pinkforest/events{/privacy}", "received_events_url": "https://api.github.com/users/pinkforest/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-25T14:46:15Z", "updated_at": "2022-09-26T09:14:57Z", "closed_at": "2022-09-26T09:14:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/138", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/138", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/138.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/138.patch", "merged_at": "2022-09-26T09:14:56Z"}, "body": "Fixes #136 \r\n\r\nWe need to bump wasmtime to ^1 but in the meantime this is a patch-fix which will use overrides to three crates that broke from associated std changes that changed a trait to sealed as I've documented in https://github.com/rust-lang/rust/issues/102260\r\n\r\nSomehow it was not replicated on 1.64 stable on Windows - nightly did repro this - but I have to test more.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/138/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/138/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/137", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/137/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/137/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/137", "id": 1385018020, "node_id": "PR_kwDOEVCc0c4_jlTE", "number": 137, "title": "Add Metrics to VM", "user": {"login": "HurricanKai", "id": 22711887, "node_id": "MDQ6VXNlcjIyNzExODg3", "avatar_url": "https://avatars.githubusercontent.com/u/22711887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HurricanKai", "html_url": "https://github.com/HurricanKai", "followers_url": "https://api.github.com/users/HurricanKai/followers", "following_url": "https://api.github.com/users/HurricanKai/following{/other_user}", "gists_url": "https://api.github.com/users/HurricanKai/gists{/gist_id}", "starred_url": "https://api.github.com/users/HurricanKai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HurricanKai/subscriptions", "organizations_url": "https://api.github.com/users/HurricanKai/orgs", "repos_url": "https://api.github.com/users/HurricanKai/repos", "events_url": "https://api.github.com/users/HurricanKai/events{/privacy}", "received_events_url": "https://api.github.com/users/HurricanKai/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-25T13:07:56Z", "updated_at": "2022-09-30T11:18:00Z", "closed_at": "2022-09-30T11:17:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/137", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/137", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/137.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/137.patch", "merged_at": "2022-09-30T11:17:59Z"}, "body": "This adds a variety of metrics to a bunch of methods, using the [metrics-rs](https://github.com/metrics-rs/metrics) crate.\r\nAccording to the crate, as long as no recorder is installed, this has little performance impact.\r\n\r\nAll code is behind the \"metrics\" feature flag, but I have enabled it by default.\r\nNo recorder is included by default, but the \"prometheus\" feature flag adds the prometheus exporter, with appropriate CLI arguments.\r\n\r\nI've tested this with [frenezulo](https://github.com/HurricanKai/frenezulo) and found the results to be quite useful already.\r\nI plan to expose tokio metrics in the future & potentially allow WASM clients to expose their own metrics too, not sure yet.\r\n\r\n[example prometheus output](https://github.com/lunatic-solutions/lunatic/files/9640804/sample.txt)\r\n\r\nIn my opinion the prometheus exporter could be included by default, but it should not be enabled (using `--prometheus` currently) if the user doesn't use it, as histograms appear to be tracked indefinitely, so if no one ever scrapes the prometheus output, it's memory usage will grow until the process is killed.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/137/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/137/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/135", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/135/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/135/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/135/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/135", "id": 1382360533, "node_id": "PR_kwDOEVCc0c4_bMrF", "number": 135, "title": "Distributed client server message passing refactor", "user": {"login": "kosticmarin", "id": 28999182, "node_id": "MDQ6VXNlcjI4OTk5MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/28999182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kosticmarin", "html_url": "https://github.com/kosticmarin", "followers_url": "https://api.github.com/users/kosticmarin/followers", "following_url": "https://api.github.com/users/kosticmarin/following{/other_user}", "gists_url": "https://api.github.com/users/kosticmarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kosticmarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kosticmarin/subscriptions", "organizations_url": "https://api.github.com/users/kosticmarin/orgs", "repos_url": "https://api.github.com/users/kosticmarin/repos", "events_url": "https://api.github.com/users/kosticmarin/events{/privacy}", "received_events_url": "https://api.github.com/users/kosticmarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-22T12:22:01Z", "updated_at": "2023-05-15T12:39:37Z", "closed_at": "2022-11-11T14:55:43Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/135", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/135", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/135.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/135.patch", "merged_at": "2022-11-11T14:55:43Z"}, "body": "This PR refactors how the QUIC connections are handled between node clients and servers (same applies for control node).\r\n\r\nBefore each `Connection` would be stored in a `DashMap`, now each `Connection` is in its own task where we can easily\r\nmanage failures and reconnect. The message API now just forwards `Requests` to each task with `unbounded_channel`.\r\nFurther additional error handling between client and server is added in order to properly return error code in host functions.\r\n\r\nThere are still some open questions with the new architecture:\r\n* connecting or reconnecting to the node will forever wait if the node does not exist or is down\r\n* when node fails what happens to all pending requests\r\n* three modules for transport (quinn, s2n-quic and tcp) exist, @bkolobara mentioned maintaining all three is unnecessary\r\n\r\nNext steps:\r\n* Implement message chunking to control congestion\r\n\r\nI've also run [benchmark](https://github.com/kosticmarin/lunatic-benchmark) against this branch, no significant changes in performance. In fact the results across multiple runs seem more consistant.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/135/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/131", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/131/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/131/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/131/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/131", "id": 1364367960, "node_id": "PR_kwDOEVCc0c4-ft1L", "number": 131, "title": "Feature/distributed metadata", "user": {"login": "kosticmarin", "id": 28999182, "node_id": "MDQ6VXNlcjI4OTk5MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/28999182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kosticmarin", "html_url": "https://github.com/kosticmarin", "followers_url": "https://api.github.com/users/kosticmarin/followers", "following_url": "https://api.github.com/users/kosticmarin/following{/other_user}", "gists_url": "https://api.github.com/users/kosticmarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kosticmarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kosticmarin/subscriptions", "organizations_url": "https://api.github.com/users/kosticmarin/orgs", "repos_url": "https://api.github.com/users/kosticmarin/repos", "events_url": "https://api.github.com/users/kosticmarin/events{/privacy}", "received_events_url": "https://api.github.com/users/kosticmarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-09-07T09:27:41Z", "updated_at": "2023-05-15T12:39:39Z", "closed_at": "2022-11-11T16:10:36Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/131", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/131", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/131.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/131.patch", "merged_at": "2022-11-11T16:10:36Z"}, "body": "Resolves #121 \r\n\r\nThis PR adds a new argument when starting nodes called `tag` which can repeat. The `tag` argument is used\r\nto store additional user defined metadata about the node in a form of a `key=value`, e.g. `--tag name=node01`.\r\n\r\nFurther we add a two new functions for looking up nodes via a query. The query syntax is like [URL query string](https://en.wikipedia.org/wiki/Query_string).\r\nThe first function `exec_lookup_nodes` executes the query on the control node and stores the results in the \r\ncontrol client, returning a query id and query results size.\r\nThe second function `copy_lookup_nodes_results` copies the query results to the guest memory based on the query id.\r\n\r\nFinally on the control server we add a parser for the query string.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/131/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/131/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/118", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/118/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/118/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/118/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/118", "id": 1318705315, "node_id": "PR_kwDOEVCc0c48IvLe", "number": 118, "title": "Migrate lunatic-timer-api from async-std to tokio", "user": {"login": "MarkintoshZ", "id": 46978338, "node_id": "MDQ6VXNlcjQ2OTc4MzM4", "avatar_url": "https://avatars.githubusercontent.com/u/46978338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkintoshZ", "html_url": "https://github.com/MarkintoshZ", "followers_url": "https://api.github.com/users/MarkintoshZ/followers", "following_url": "https://api.github.com/users/MarkintoshZ/following{/other_user}", "gists_url": "https://api.github.com/users/MarkintoshZ/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkintoshZ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkintoshZ/subscriptions", "organizations_url": "https://api.github.com/users/MarkintoshZ/orgs", "repos_url": "https://api.github.com/users/MarkintoshZ/repos", "events_url": "https://api.github.com/users/MarkintoshZ/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkintoshZ/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-07-26T20:13:55Z", "updated_at": "2022-07-26T20:25:04Z", "closed_at": "2022-07-26T20:25:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/118", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/118", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/118.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/118.patch", "merged_at": "2022-07-26T20:25:03Z"}, "body": "Migrating the last part of the code base that still uses async-std to tokio.\r\n\r\n- [x] Build passed all tests in lunatic-rs.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/118/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/114", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/114/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/114/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/114/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/114", "id": 1291360256, "node_id": "PR_kwDOEVCc0c46tLnt", "number": 114, "title": "Replace tcp with quic for distributed nodes", "user": {"login": "kosticmarin", "id": 28999182, "node_id": "MDQ6VXNlcjI4OTk5MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/28999182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kosticmarin", "html_url": "https://github.com/kosticmarin", "followers_url": "https://api.github.com/users/kosticmarin/followers", "following_url": "https://api.github.com/users/kosticmarin/following{/other_user}", "gists_url": "https://api.github.com/users/kosticmarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kosticmarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kosticmarin/subscriptions", "organizations_url": "https://api.github.com/users/kosticmarin/orgs", "repos_url": "https://api.github.com/users/kosticmarin/repos", "events_url": "https://api.github.com/users/kosticmarin/events{/privacy}", "received_events_url": "https://api.github.com/users/kosticmarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2022-07-01T12:42:05Z", "updated_at": "2023-05-15T12:39:07Z", "closed_at": "2022-08-03T11:51:32Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/114", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/114", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/114.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/114.patch", "merged_at": "2022-08-03T11:51:32Z"}, "body": "Use QUIC for node-to-node and node-to-control connections. On older Linux kernel, the `s2n-quic` crate didn't work (it wouldn't send more that ~2000 bytes) so now default is `quinn`. During registration, nodes generate a certificate signing request which is signed by a control node. To simplify testing, you can use the `--test-ca` command line flag which will simply use built-in certificate and keys (so this is only for testing!).\r\n\r\nFor example:\r\n```bash\r\nlunatic --control 127.0.0.1:10410 --control-server --no-entry --test-ca & # run the control server and node\r\nsleep 1\r\nlunatic --control 127.0.0.1:10410  --node 127.0.0.1:10002 --no-entry --test-ca & # run some additional nodes\r\nlunatic --control 127.0.0.1:10410  --node 127.0.0.1:10003 --no-entry --test-ca &\r\nlunatic --control 127.0.0.1:10410  --node 127.0.0.1:10004 --no-entry --test-ca &\r\nsleep 1\r\nlunatic --control 127.0.0.1:10410  --node 127.0.0.1:10005 --test-ca \\\r\n   \"lunatic-rs/target/wasm32-wasi/release/examples/distributed.wasm\" # run example from lunatic Rust binding repo\r\n```\r\n\r\nThe next step is to implement multiple streams and chunking of messages to enable bandwidth control.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/114/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/114/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/111", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/111/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/111/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/111", "id": 1285392697, "node_id": "PR_kwDOEVCc0c46ZRKp", "number": 111, "title": "Distributed v2", "user": {"login": "withtypes", "id": 2822606, "node_id": "MDQ6VXNlcjI4MjI2MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/2822606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/withtypes", "html_url": "https://github.com/withtypes", "followers_url": "https://api.github.com/users/withtypes/followers", "following_url": "https://api.github.com/users/withtypes/following{/other_user}", "gists_url": "https://api.github.com/users/withtypes/gists{/gist_id}", "starred_url": "https://api.github.com/users/withtypes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/withtypes/subscriptions", "organizations_url": "https://api.github.com/users/withtypes/orgs", "repos_url": "https://api.github.com/users/withtypes/repos", "events_url": "https://api.github.com/users/withtypes/events{/privacy}", "received_events_url": "https://api.github.com/users/withtypes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-27T07:48:37Z", "updated_at": "2023-05-15T12:39:00Z", "closed_at": "2022-07-14T13:43:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/111", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/111", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/111.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/111.patch", "merged_at": "2022-07-14T13:43:38Z"}, "body": "New distributed implementation introduces the idea of control nodes. Control nodes keep information about lunatic nodes, Wasm modules, environments, and perform authentication. Lunatic nodes communicate directly after they register via control nodes.\r\nWe provide a simple implementation of a control node for now, but the idea is to have a distributed and persistent control nodes (backed by a distributed key-value database).\r\n\r\n## Architecture\r\n\r\nCode is kept in two crates: `lunatic-distributed` and `lunatic-distributed-api` (host functions for Wasm).\r\n\r\n<img src=\"https://user-images.githubusercontent.com/2822606/177097271-f23385ce-1233-4bea-972e-c482dafe7941.svg\" alt=\"\" width=\"300\" />\r\n\r\nThere are two changes in non-distributed lunatic:\r\n - addition of environments: they act as a sandbox for a group of processes. Newly spawned processes inherit the parent's environment.  Processes can only communicate inside the environment, and process ids are unique only inside the environment (and node).\r\n - processes are not resources anymore (kept in process state resources) and guests don't use a resource handle (opaque reference), but the actual process id (`u64`). Processes are identified by both node id (`u64`) and process id.\r\nWhen a lunatic node starts, it registers to a control node by sending the listen address, and authentication data. On successful registration, it receives a node id. Connections between nodes are lazy and established only when one node needs to communicate with another.\r\n\r\nDistributed API introduces new host functions:\r\n - `nodes_count` and `get_nodes` which currently return only a list of other node ids\r\n - `node_id` returns the current node id\r\n - `module_id` returns the global id assigned to a currently running Wasm module. This id is used when spawning on other nodes (they fetch modules from a control node). \r\n - `spawn` is similar to local spawn but also accepts a node id. It doesn't support linking currently\r\n - `send` and `send_receive_skip_search` also receive \r\nadditional node id parameter.\r\n  \r\nLunatic can also run in a non-distributed way as it does now.\r\n\r\nThe diagram below shows how process state depends on other distributed lunatic structures.\r\n\r\n<img src=\"https://user-images.githubusercontent.com/2822606/177097658-43c1c9ac-ca79-4740-8417-8f571c5424ed.svg\" alt=\"\" width=\"600\" />\r\n\r\n## Command Line Arguments\r\n\r\nCommand lines arguments were kept as in a previous version of the distributed:\r\n - `--node` sets the address and port for the node-to-node communication\r\n - `--control` sets the address of the control node\r\n - `--control-server` runs the control server bound to `--control` address\r\n - `--no-entry` run the node without a Wasm module\r\n\r\nHere is a small script that runs 4 nodes. The script assumes this repository is located in the `lunatic` directory and `lunatic-rs` contains the lunatic Rust library repository.\r\n\r\n```bash\r\n#!/bin/bash\r\nset -e\r\nSCRIPT=$(readlink -f \"$0\")\r\nBASEDIR=$(dirname \"$SCRIPT\")\r\n\r\nexport RUST_LOG=\"info\"\r\n\r\ncd $BASEDIR/lunatic\r\ncargo build --release\r\n\r\ncd $BASEDIR/lunatic-rs\r\ncargo build --release --examples\r\n\r\nprefix() {\r\n    # A helper to add prefix to each stdout/stderr line. It's useful to tell nodes apart\r\n    local prefix=\"$1\"\r\n    shift\r\n    \"$@\" > >(sed \"s/^/$prefix: /\") 2> >(sed \"s/^/$prefix: /\" >&2)\r\n}\r\n\r\nlunatic=$BASEDIR/lunatic/target/release/lunatic\r\n\r\nprefix \"A\" $lunatic --control 127.0.0.1:10410 --node 127.0.0.1:10001 --control-server --no-entry &\r\nprefix \"B\" $luantic --control 127.0.0.1:10410 --node 127.0.0.1:10002 --no-entry &\r\nprefix \"C\" $lunatic --control 127.0.0.1:10410 --node 127.0.0.1:10003 --no-entry &\r\nprefix \"D\" $lunatic --control 127.0.0.1:10410 --node 127.0.0.1:10004 \"$BASEDIR/lunatic-rs/target/wasm32-wasi/release/examples/distributed.wasm\"\r\n\r\nsleep 2\r\nkillall lunatic\r\n```\r\n\r\n## Other Updates\r\n\r\nThanks @kosticmarin we have also replaced `async-std` with `tokio` which resolves #94.\r\nHe has also worked on replacing plain TCP with QUIC. This should also be implemented soon.\r\n\r\n## Future Work\r\n\r\nHere are some things for the future: \r\n - currently distributed linking is not implemented and linking in general needs some refactoring\r\n - we are replacing plain TCP with QUIC which will give us streams and encryption\r\n - better errors in node-to-node communication\r\n - authentication\r\n - bandwith control with chunking and QUIC streams\r\n - node attributes (region, provider, etc.)\r\n - trusted, untrusted, and privelaged nodes\r\n - WASI for distributed, virtual FS", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/111/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/107", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/107/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/107/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/107/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/107", "id": 1267324309, "node_id": "PR_kwDOEVCc0c45dH3n", "number": 107, "title": "Switch to tokio from async-std", "user": {"login": "kosticmarin", "id": 28999182, "node_id": "MDQ6VXNlcjI4OTk5MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/28999182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kosticmarin", "html_url": "https://github.com/kosticmarin", "followers_url": "https://api.github.com/users/kosticmarin/followers", "following_url": "https://api.github.com/users/kosticmarin/following{/other_user}", "gists_url": "https://api.github.com/users/kosticmarin/gists{/gist_id}", "starred_url": "https://api.github.com/users/kosticmarin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kosticmarin/subscriptions", "organizations_url": "https://api.github.com/users/kosticmarin/orgs", "repos_url": "https://api.github.com/users/kosticmarin/repos", "events_url": "https://api.github.com/users/kosticmarin/events{/privacy}", "received_events_url": "https://api.github.com/users/kosticmarin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-10T09:55:14Z", "updated_at": "2022-06-20T10:54:41Z", "closed_at": "2022-06-20T10:54:38Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/107", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/107", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/107.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/107.patch", "merged_at": "2022-06-20T10:54:38Z"}, "body": "Migrate to tokio from async-std as proposed in #94.\r\n\r\nAs discussed in the issue above, `TcpStream` can be wrapped into an `Arc` but this is not enough since we use `tokio::select!` to handle timeouts which requires async api. To overcome this, we can simply wrap the `TcpStream` into `Arc` with a `Mutex`, this brings some locking overhead.\r\n\r\nAlso two tests in rust-lib fail against this build of the runtime, could use some help here to understand better what is happening.\r\n\r\n```\r\ntest lunatic::mailbox::tests::mailbox_link - should panic ... FAILED\r\ntest lunatic::process::tests::spawn_link_test - should panic ... FAILED\r\n```\r\n\r\nTraces can be produced with `WASMTIME_BACKTRACE_DETAILS=1 RUST_LOG=lunatic=trace cargo test`\r\n\r\n```\r\n[2022-06-10T09:24:40Z WARN  lunatic_process] Process 2 failed, notifying: 1 links\r\n[2022-06-10T09:24:40Z DEBUG lunatic_process] wasm trap: wasm `unreachable` instruction executed\r\n    wasm backtrace:\r\n        0: 0x82c2d - panic_abort::__rust_start_panic::abort::hca696c21df4c435e\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/panic_abort/src/lib.rs:84:17\r\n                  - __rust_start_panic\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/panic_abort/src/lib.rs:38:5\r\n        1: 0x82844 - rust_panic\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/std/src/panicking.rs:746:9\r\n        2: 0x827c1 - std::panicking::rust_panic_with_hook::h7811fbe84dbe0b81\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/std/src/panicking.rs:716:5\r\n        3: 0x2dd2d - std::panicking::begin_panic::{{closure}}::h2ae1f2e0bc0d2948\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/std/src/panicking.rs:617:9\r\n        4: 0x2dc70 - std::sys_common::backtrace::__rust_end_short_backtrace::h148ca43cd1d584f3\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/std/src/sys_common/backtrace.rs:138:18\r\n        5: 0x2dddc - std::panicking::begin_panic::hfbb35725cbd3b0a6\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/std/src/panicking.rs:616:12\r\n        6: 0x2cc23 - lunatic::mailbox::tests::mailbox_link::{{closure}}::he61bd5cfcbf9a086\r\n                        at /home/marin/github/lunatic-solutions/rust-lib/src/mailbox.rs:295:13\r\n        7: 0x12f34 - core::ops::function::FnOnce::call_once::hcecd41f517596a32\r\n                        at /rustc/fe5b13d681f25ee6474be29d748c65adcd91f69e/library/core/src/ops/function.rs:227:5\r\n        8: 0x11690 - lunatic::mailbox::type_helper_wrapper::h67f4a5cb34e065da\r\n                        at /home/marin/github/lunatic-solutions/rust-lib/src/mailbox.rs:269:5\r\n        9: 0x1af1 - _lunatic_spawn_by_index\r\n                        at /home/marin/github/lunatic-solutions/rust-lib/src/host/mod.rs:57:5\r\n       10: 0x95550 - <unknown>!_lunatic_spawn_by_index.command_export\r\n```\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/107/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/107/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/106", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/106/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/106/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/106", "id": 1260927915, "node_id": "PR_kwDOEVCc0c45HtNY", "number": 106, "title": "add send_after and cancel_timer host functions", "user": {"login": "zhamlin", "id": 1034743, "node_id": "MDQ6VXNlcjEwMzQ3NDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1034743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhamlin", "html_url": "https://github.com/zhamlin", "followers_url": "https://api.github.com/users/zhamlin/followers", "following_url": "https://api.github.com/users/zhamlin/following{/other_user}", "gists_url": "https://api.github.com/users/zhamlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhamlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhamlin/subscriptions", "organizations_url": "https://api.github.com/users/zhamlin/orgs", "repos_url": "https://api.github.com/users/zhamlin/repos", "events_url": "https://api.github.com/users/zhamlin/events{/privacy}", "received_events_url": "https://api.github.com/users/zhamlin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-05T00:53:58Z", "updated_at": "2022-06-06T11:56:10Z", "closed_at": "2022-06-06T11:56:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/106", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/106", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/106.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/106.patch", "merged_at": "2022-06-06T11:56:09Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/106/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/101", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/101/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/101/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/101/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/101", "id": 1186479021, "node_id": "PR_kwDOEVCc0c41UF4_", "number": 101, "title": "Rust testing support", "user": {"login": "bkolobara", "id": 593393, "node_id": "MDQ6VXNlcjU5MzM5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/593393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkolobara", "html_url": "https://github.com/bkolobara", "followers_url": "https://api.github.com/users/bkolobara/followers", "following_url": "https://api.github.com/users/bkolobara/following{/other_user}", "gists_url": "https://api.github.com/users/bkolobara/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkolobara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkolobara/subscriptions", "organizations_url": "https://api.github.com/users/bkolobara/orgs", "repos_url": "https://api.github.com/users/bkolobara/repos", "events_url": "https://api.github.com/users/bkolobara/events{/privacy}", "received_events_url": "https://api.github.com/users/bkolobara/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-30T13:38:53Z", "updated_at": "2023-05-15T12:38:59Z", "closed_at": "2022-04-07T17:50:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/101", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/101", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/101.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/101.patch", "merged_at": "2022-04-07T17:50:19Z"}, "body": "Closes #91\r\n\r\nThis PR adds the ability to the VM to behave the same way as rust would in case `lunatic` is used as a runner when running `cargo test`. This requires also that the `#[lunatic_test::test]` macro from the [lunatic-test crate](https://github.com/lunatic-solutions/rust-lib/tree/high-level-processes/lunatic-test) is used instead of rust's stdlib `#[test]`.\r\n\r\nDifferent from the #92 and #93 PRs, this one doesn't add an additional `lunatic test` command and is not meant to be a general purpose WebAssembly testing system. It's specifically made as a drop in replacement to provide a nice experience to developers that are already familiar with `cargo test`.\r\n\r\nThe idea is the following, if `lunatic` is set as the runner for wasm32 targets in `.cargo/config.toml` it will be used by `cargo` to prefix all the generated .wasm files. E.g. `cargo run` is going to generate a .wasm file from the main.rs entry point and run the app with `lunatic generated-file.wasm`. `cargo test` is going to generated a test .wasm file and invoke it with `lunatic generated-test-file.wasm`.\r\n\r\nBecause the `wasm32` target doesn't support panic catching and the default rust testing logic (`#[test]` macro) heavily depends on it, we can't use it. And [we can't use a different runner for `cargo test`](https://internals.rust-lang.org/t/cargo-config-toml-different-runner-for-tests/16342). So we are forced during runtime to detect when `cargo test` was invoked and load specifically annotated export functions. In practice this works ok, except some corner cases like `cargo test --example <example-name>`.\r\n\r\n### New `#[lunatic_test::test]` macro\r\n\r\nThe new macro is meant to be used as a drop-in replacement for `#[test]`. It should work together with existing test annotations, like `#[should_panic]` and `#[ignore]`. In case the build target is not `wasm32`, it will fall back to the stdlib `#[test]`. This allows us to easily switch between lunatic's and rust's testing engines by setting the `--target=\"\"` flag on `cargo test`. Here are some examples of it:\r\n\r\n* https://github.com/lunatic-solutions/rust-lib/blob/high-level-processes/lunatic-test/tests/panic.rs\r\n* https://github.com/lunatic-solutions/rust-lib/blob/high-level-processes/lunatic-test/tests/failing.rs\r\n\r\n### Supported `cargo test` features\r\n\r\n#### Flags:\r\n\r\n* [x] `--nocapture`\r\n* [x] `--show-output`\r\n* [x] `--ignored`\r\n* [ ] `--include-ignored`\r\n\r\n#### Output:\r\n\r\nRunning `cargo test` with `lunatic` as the runner should produce identical output as the standalone executable. There are some small differences in the color of the output and test function module prefixes. However, most of the info should be preserved, including the ability to show/hide output and automatically displaying output of failed tests.\r\n\r\n**~NOTE: Capturing output of spawned sub-processes is not supported at the moment.~** (now it is)\r\n\r\n#### Filters\r\n\r\nFiltering out tests with `cargo test <filter>` should work as expected. Filtering out integration tests with `cargo test --test <integration_test>` should work as expected.\r\n\r\n**NOTE: Running tests in examples with `cargo test --example <example_name>` is not supported**.\r\n\r\n#### Doc tests\r\n\r\nDocumentation tests can't be enabled for the `wasm32` target and are not supported.\r\n\r\n#### Multi-threaded execution\r\n\r\nAll tests are executed in parallel and there is currently no way of limiting the number of concurrent executions.\r\n\r\n### Next steps\r\n\r\nI'm satisfied with the result and think that the needs of most unite and integration tests should be cowered with this PR. I think that we should try to iron out all small differences between the test outputs in the future. Then set up a test-suite that will automatically run all combinations of flags and tests to compare lunatic's output to rust's. This would give us confidence that new releases of rust don't break the expected output format.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/101/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/101/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/100", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/100/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/100/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/100/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/100", "id": 1171256860, "node_id": "PR_kwDOEVCc0c40i49h", "number": 100, "title": "Make `ProcessState` generic & split the remaining APIs into crates", "user": {"login": "bkolobara", "id": 593393, "node_id": "MDQ6VXNlcjU5MzM5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/593393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkolobara", "html_url": "https://github.com/bkolobara", "followers_url": "https://api.github.com/users/bkolobara/followers", "following_url": "https://api.github.com/users/bkolobara/following{/other_user}", "gists_url": "https://api.github.com/users/bkolobara/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkolobara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkolobara/subscriptions", "organizations_url": "https://api.github.com/users/bkolobara/orgs", "repos_url": "https://api.github.com/users/bkolobara/repos", "events_url": "https://api.github.com/users/bkolobara/events{/privacy}", "received_events_url": "https://api.github.com/users/bkolobara/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-03-16T16:25:19Z", "updated_at": "2023-05-15T12:38:57Z", "closed_at": "2022-03-18T08:52:51Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/100", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/100", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/100.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/100.patch", "merged_at": "2022-03-18T08:52:50Z"}, "body": "Closes #73\r\nCloses #87\r\nCloses #97\r\nCloses #98\r\n\r\nThis PR is addressing a few issues that depend on each other and could only be solved as one big change. It is also incompatible with the current releases of guest libraries and will require a PR for both, Rust and AssemblyScript, to make them compatible.\r\n\r\n## Crate split\r\n\r\nThis PR continues the work started in #96 and splits the remaining host functions into separate crates.\r\n\r\n## `ProcessState`\r\n\r\nIt also pulls most of the process related functionality into the `lunatic-process` crate. The main crate (`lunatic-runtime`) now just contains a definition of a \"default\" process with all the host functions enabled, but doesn't contain any functionality by itself.\r\n\r\n`ProcessState` is now a trait and embedders can provide their own state as long as they implement the necessary traits for all the host functions they intend to use. Host functions don't depend anymore on a concrete state, but instead require traits on a generic state type.\r\n\r\n## Wasm runtime abstraction\r\n\r\nThe Wasm runtime is also \"completely\" separated out and should be replaceable in the future. At the moment the `WasmtimeRuntime` is used everywhere, but if there is ever another Rust Wasm runtime that supports async host function it will be fairly easy to switch wasmtime out.\r\n\r\n## Environment removed\r\n\r\nThe `Environment` abstraction was removed in favour of a `Config` one. Instead of spawning processes into an environment with certain properties, they are spawned **with** a configuration. The `ProcessConfig` trait is bound to the `ProcessState` now. This allows host APIs to provide host functions that perform operations, but also some that can modify the process configuration. For example, the `lunatic-wasi-api` crate provides WASI host functions, but also functions to create specific configurations for child processes with custom environment variables, command line arguments and file access permissions.\r\n\r\nSimilar to the `ProcessState`, `ProcessConfig` is not a struct, but a trait and allows embedders to use the right config type for their needs.\r\n\r\n## Distributed lunatic\r\n\r\nTODO (@withtypes): I just commented out the implementation of distributed lunatic and the registry for now. It requires some rethinking. I think it makes sense just to rewrite a big part of it instead of trying to fit the old approach into the new architecture.\r\n\r\nHere are some of my ideas around it:\r\n- The `Node` should have a unique ID.\r\n- Resources, like processes, should switch from a `u64` ID to a tuple (node_id: u32, resource_id: u32). This will allow host functions that work with messages to right away know if they need to forward the message to another node or a local process.\r\n- The biggest issue currently is that the nodes can get out of sync because no consensus algorithm is used between them. I would for now just have a special coordinator node, that can be started for example with `lunatic --coordinator-node`. All other nodes connect to it and there is only one source of truth. Later we can just run multiple coordinator nodes that use a consensus algorithm between each other. The nodes would still connect to each other to avoid proxying messages through the coordinator. The coordinator would just be there to assign unique IDs, etc.", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/100/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}], "chosen_pr": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167", "repository_url": "https://api.github.com/repos/lunatic-solutions/lunatic", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/labels{/name}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/comments", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/events", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/167", "id": 1479385782, "node_id": "PR_kwDOEVCc0c5Ef2_b", "number": 167, "title": "upgrade wasmtime to 3.0", "user": {"login": "jtenner", "id": 3761339, "node_id": "MDQ6VXNlcjM3NjEzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3761339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtenner", "html_url": "https://github.com/jtenner", "followers_url": "https://api.github.com/users/jtenner/followers", "following_url": "https://api.github.com/users/jtenner/following{/other_user}", "gists_url": "https://api.github.com/users/jtenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtenner/subscriptions", "organizations_url": "https://api.github.com/users/jtenner/orgs", "repos_url": "https://api.github.com/users/jtenner/repos", "events_url": "https://api.github.com/users/jtenner/events{/privacy}", "received_events_url": "https://api.github.com/users/jtenner/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-06T15:28:52Z", "updated_at": "2022-12-06T17:04:06Z", "closed_at": "2022-12-06T17:04:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/167", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/167.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/167.patch", "merged_at": "2022-12-06T17:04:06Z"}, "body": "Tests pass locally, everything seems to work. Ready for review!", "reactions": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, "chosen_detail": {"url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167", "id": 1149202395, "node_id": "PR_kwDOEVCc0c5Ef2_b", "html_url": "https://github.com/lunatic-solutions/lunatic/pull/167", "diff_url": "https://github.com/lunatic-solutions/lunatic/pull/167.diff", "patch_url": "https://github.com/lunatic-solutions/lunatic/pull/167.patch", "issue_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167", "number": 167, "state": "closed", "locked": false, "title": "upgrade wasmtime to 3.0", "user": {"login": "jtenner", "id": 3761339, "node_id": "MDQ6VXNlcjM3NjEzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3761339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtenner", "html_url": "https://github.com/jtenner", "followers_url": "https://api.github.com/users/jtenner/followers", "following_url": "https://api.github.com/users/jtenner/following{/other_user}", "gists_url": "https://api.github.com/users/jtenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtenner/subscriptions", "organizations_url": "https://api.github.com/users/jtenner/orgs", "repos_url": "https://api.github.com/users/jtenner/repos", "events_url": "https://api.github.com/users/jtenner/events{/privacy}", "received_events_url": "https://api.github.com/users/jtenner/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "Tests pass locally, everything seems to work. Ready for review!", "created_at": "2022-12-06T15:28:52Z", "updated_at": "2022-12-06T17:04:06Z", "closed_at": "2022-12-06T17:04:06Z", "merged_at": "2022-12-06T17:04:06Z", "merge_commit_sha": "8578346b38593e35a3c223c0f0de0b2a8874dbc2", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167/commits", "review_comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167/comments", "review_comment_url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/comments", "statuses_url": "https://api.github.com/repos/lunatic-solutions/lunatic/statuses/46ff64ad476a2cf4a1b4723acdcc37ce062fcc6e", "head": {"label": "jtenner:stack-traces", "ref": "stack-traces", "sha": "46ff64ad476a2cf4a1b4723acdcc37ce062fcc6e", "user": {"login": "jtenner", "id": 3761339, "node_id": "MDQ6VXNlcjM3NjEzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3761339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtenner", "html_url": "https://github.com/jtenner", "followers_url": "https://api.github.com/users/jtenner/followers", "following_url": "https://api.github.com/users/jtenner/following{/other_user}", "gists_url": "https://api.github.com/users/jtenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtenner/subscriptions", "organizations_url": "https://api.github.com/users/jtenner/orgs", "repos_url": "https://api.github.com/users/jtenner/repos", "events_url": "https://api.github.com/users/jtenner/events{/privacy}", "received_events_url": "https://api.github.com/users/jtenner/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "repo": {"id": 450535908, "node_id": "R_kgDOGtqh5A", "name": "lunatic", "full_name": "jtenner/lunatic", "private": false, "owner": {"login": "jtenner", "id": 3761339, "node_id": "MDQ6VXNlcjM3NjEzMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3761339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtenner", "html_url": "https://github.com/jtenner", "followers_url": "https://api.github.com/users/jtenner/followers", "following_url": "https://api.github.com/users/jtenner/following{/other_user}", "gists_url": "https://api.github.com/users/jtenner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtenner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtenner/subscriptions", "organizations_url": "https://api.github.com/users/jtenner/orgs", "repos_url": "https://api.github.com/users/jtenner/repos", "events_url": "https://api.github.com/users/jtenner/events{/privacy}", "received_events_url": "https://api.github.com/users/jtenner/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/jtenner/lunatic", "description": "Lunatic is an Erlang-inspired runtime for WebAssembly", "fork": true, "url": "https://api.github.com/repos/jtenner/lunatic", "forks_url": "https://api.github.com/repos/jtenner/lunatic/forks", "keys_url": "https://api.github.com/repos/jtenner/lunatic/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/jtenner/lunatic/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/jtenner/lunatic/teams", "hooks_url": "https://api.github.com/repos/jtenner/lunatic/hooks", "issue_events_url": "https://api.github.com/repos/jtenner/lunatic/issues/events{/number}", "events_url": "https://api.github.com/repos/jtenner/lunatic/events", "assignees_url": "https://api.github.com/repos/jtenner/lunatic/assignees{/user}", "branches_url": "https://api.github.com/repos/jtenner/lunatic/branches{/branch}", "tags_url": "https://api.github.com/repos/jtenner/lunatic/tags", "blobs_url": "https://api.github.com/repos/jtenner/lunatic/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/jtenner/lunatic/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/jtenner/lunatic/git/refs{/sha}", "trees_url": "https://api.github.com/repos/jtenner/lunatic/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/jtenner/lunatic/statuses/{sha}", "languages_url": "https://api.github.com/repos/jtenner/lunatic/languages", "stargazers_url": "https://api.github.com/repos/jtenner/lunatic/stargazers", "contributors_url": "https://api.github.com/repos/jtenner/lunatic/contributors", "subscribers_url": "https://api.github.com/repos/jtenner/lunatic/subscribers", "subscription_url": "https://api.github.com/repos/jtenner/lunatic/subscription", "commits_url": "https://api.github.com/repos/jtenner/lunatic/commits{/sha}", "git_commits_url": "https://api.github.com/repos/jtenner/lunatic/git/commits{/sha}", "comments_url": "https://api.github.com/repos/jtenner/lunatic/comments{/number}", "issue_comment_url": "https://api.github.com/repos/jtenner/lunatic/issues/comments{/number}", "contents_url": "https://api.github.com/repos/jtenner/lunatic/contents/{+path}", "compare_url": "https://api.github.com/repos/jtenner/lunatic/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/jtenner/lunatic/merges", "archive_url": "https://api.github.com/repos/jtenner/lunatic/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/jtenner/lunatic/downloads", "issues_url": "https://api.github.com/repos/jtenner/lunatic/issues{/number}", "pulls_url": "https://api.github.com/repos/jtenner/lunatic/pulls{/number}", "milestones_url": "https://api.github.com/repos/jtenner/lunatic/milestones{/number}", "notifications_url": "https://api.github.com/repos/jtenner/lunatic/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/jtenner/lunatic/labels{/name}", "releases_url": "https://api.github.com/repos/jtenner/lunatic/releases{/id}", "deployments_url": "https://api.github.com/repos/jtenner/lunatic/deployments", "created_at": "2022-01-21T15:07:23Z", "updated_at": "2022-01-31T18:20:10Z", "pushed_at": "2022-12-14T15:27:59Z", "git_url": "git://github.com/jtenner/lunatic.git", "ssh_url": "git@github.com:jtenner/lunatic.git", "clone_url": "https://github.com/jtenner/lunatic.git", "svn_url": "https://github.com/jtenner/lunatic", "homepage": "https://lunatic.solutions", "size": 3539, "stargazers_count": 0, "watchers_count": 0, "language": "Rust", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "main"}}, "base": {"label": "lunatic-solutions:main", "ref": "main", "sha": "c64983b7ed4147a1ab1663e77bbc83e5475fc685", "user": {"login": "lunatic-solutions", "id": 21106782, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMTA2Nzgy", "avatar_url": "https://avatars.githubusercontent.com/u/21106782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunatic-solutions", "html_url": "https://github.com/lunatic-solutions", "followers_url": "https://api.github.com/users/lunatic-solutions/followers", "following_url": "https://api.github.com/users/lunatic-solutions/following{/other_user}", "gists_url": "https://api.github.com/users/lunatic-solutions/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunatic-solutions/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunatic-solutions/subscriptions", "organizations_url": "https://api.github.com/users/lunatic-solutions/orgs", "repos_url": "https://api.github.com/users/lunatic-solutions/repos", "events_url": "https://api.github.com/users/lunatic-solutions/events{/privacy}", "received_events_url": "https://api.github.com/users/lunatic-solutions/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 290495697, "node_id": "MDEwOlJlcG9zaXRvcnkyOTA0OTU2OTc=", "name": "lunatic", "full_name": "lunatic-solutions/lunatic", "private": false, "owner": {"login": "lunatic-solutions", "id": 21106782, "node_id": "MDEyOk9yZ2FuaXphdGlvbjIxMTA2Nzgy", "avatar_url": "https://avatars.githubusercontent.com/u/21106782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunatic-solutions", "html_url": "https://github.com/lunatic-solutions", "followers_url": "https://api.github.com/users/lunatic-solutions/followers", "following_url": "https://api.github.com/users/lunatic-solutions/following{/other_user}", "gists_url": "https://api.github.com/users/lunatic-solutions/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunatic-solutions/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunatic-solutions/subscriptions", "organizations_url": "https://api.github.com/users/lunatic-solutions/orgs", "repos_url": "https://api.github.com/users/lunatic-solutions/repos", "events_url": "https://api.github.com/users/lunatic-solutions/events{/privacy}", "received_events_url": "https://api.github.com/users/lunatic-solutions/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/lunatic-solutions/lunatic", "description": "Lunatic is an Erlang-inspired runtime for WebAssembly", "fork": false, "url": "https://api.github.com/repos/lunatic-solutions/lunatic", "forks_url": "https://api.github.com/repos/lunatic-solutions/lunatic/forks", "keys_url": "https://api.github.com/repos/lunatic-solutions/lunatic/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/lunatic-solutions/lunatic/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/lunatic-solutions/lunatic/teams", "hooks_url": "https://api.github.com/repos/lunatic-solutions/lunatic/hooks", "issue_events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/events{/number}", "events_url": "https://api.github.com/repos/lunatic-solutions/lunatic/events", "assignees_url": "https://api.github.com/repos/lunatic-solutions/lunatic/assignees{/user}", "branches_url": "https://api.github.com/repos/lunatic-solutions/lunatic/branches{/branch}", "tags_url": "https://api.github.com/repos/lunatic-solutions/lunatic/tags", "blobs_url": "https://api.github.com/repos/lunatic-solutions/lunatic/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/lunatic-solutions/lunatic/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/lunatic-solutions/lunatic/git/refs{/sha}", "trees_url": "https://api.github.com/repos/lunatic-solutions/lunatic/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/lunatic-solutions/lunatic/statuses/{sha}", "languages_url": "https://api.github.com/repos/lunatic-solutions/lunatic/languages", "stargazers_url": "https://api.github.com/repos/lunatic-solutions/lunatic/stargazers", "contributors_url": "https://api.github.com/repos/lunatic-solutions/lunatic/contributors", "subscribers_url": "https://api.github.com/repos/lunatic-solutions/lunatic/subscribers", "subscription_url": "https://api.github.com/repos/lunatic-solutions/lunatic/subscription", "commits_url": "https://api.github.com/repos/lunatic-solutions/lunatic/commits{/sha}", "git_commits_url": "https://api.github.com/repos/lunatic-solutions/lunatic/git/commits{/sha}", "comments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/comments{/number}", "issue_comment_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/comments{/number}", "contents_url": "https://api.github.com/repos/lunatic-solutions/lunatic/contents/{+path}", "compare_url": "https://api.github.com/repos/lunatic-solutions/lunatic/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/lunatic-solutions/lunatic/merges", "archive_url": "https://api.github.com/repos/lunatic-solutions/lunatic/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/lunatic-solutions/lunatic/downloads", "issues_url": "https://api.github.com/repos/lunatic-solutions/lunatic/issues{/number}", "pulls_url": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls{/number}", "milestones_url": "https://api.github.com/repos/lunatic-solutions/lunatic/milestones{/number}", "notifications_url": "https://api.github.com/repos/lunatic-solutions/lunatic/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/lunatic-solutions/lunatic/labels{/name}", "releases_url": "https://api.github.com/repos/lunatic-solutions/lunatic/releases{/id}", "deployments_url": "https://api.github.com/repos/lunatic-solutions/lunatic/deployments", "created_at": "2020-08-26T12:53:38Z", "updated_at": "2026-01-20T00:43:48Z", "pushed_at": "2025-03-29T18:30:22Z", "git_url": "git://github.com/lunatic-solutions/lunatic.git", "ssh_url": "git@github.com:lunatic-solutions/lunatic.git", "clone_url": "https://github.com/lunatic-solutions/lunatic.git", "svn_url": "https://github.com/lunatic-solutions/lunatic", "homepage": "https://lunatic.solutions", "size": 4091, "stargazers_count": 4839, "watchers_count": 4839, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": true, "forks_count": 141, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 47, "license": {"key": "apache-2.0", "name": "Apache License 2.0", "spdx_id": "Apache-2.0", "url": "https://api.github.com/licenses/apache-2.0", "node_id": "MDc6TGljZW5zZTI="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["actors", "assemblyscript", "erlang", "lunatic", "runtime", "rust", "vm", "wasm", "webassembly"], "visibility": "public", "forks": 141, "open_issues": 47, "watchers": 4839, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167"}, "html": {"href": "https://github.com/lunatic-solutions/lunatic/pull/167"}, "issue": {"href": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167"}, "comments": {"href": "https://api.github.com/repos/lunatic-solutions/lunatic/issues/167/comments"}, "review_comments": {"href": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167/comments"}, "review_comment": {"href": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/lunatic-solutions/lunatic/pulls/167/commits"}, "statuses": {"href": "https://api.github.com/repos/lunatic-solutions/lunatic/statuses/46ff64ad476a2cf4a1b4723acdcc37ce062fcc6e"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "bkolobara", "id": 593393, "node_id": "MDQ6VXNlcjU5MzM5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/593393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkolobara", "html_url": "https://github.com/bkolobara", "followers_url": "https://api.github.com/users/bkolobara/followers", "following_url": "https://api.github.com/users/bkolobara/following{/other_user}", "gists_url": "https://api.github.com/users/bkolobara/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkolobara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkolobara/subscriptions", "organizations_url": "https://api.github.com/users/bkolobara/orgs", "repos_url": "https://api.github.com/users/bkolobara/repos", "events_url": "https://api.github.com/users/bkolobara/events{/privacy}", "received_events_url": "https://api.github.com/users/bkolobara/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 0, "review_comments": 5, "maintainer_can_modify": false, "commits": 7, "additions": 363, "deletions": 381, "changed_files": 19}}