{"window": ["2022-08-04T14:44:48.644811+00:00", "2024-07-25T15:51:13.853823+00:00"], "repo_slug": "shssoichiro/zxcvbn-rs", "candidates": [{"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83", "repository_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs", "labels_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/comments", "events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/events", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83", "id": 2331048963, "node_id": "PR_kwDOBJHx_c5xS3Dm", "number": 83, "title": "Add support for WASM targets running in a custom runtime", "user": {"login": "hculea", "id": 45151601, "node_id": "MDQ6VXNlcjQ1MTUxNjAx", "avatar_url": "https://avatars.githubusercontent.com/u/45151601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hculea", "html_url": "https://github.com/hculea", "followers_url": "https://api.github.com/users/hculea/followers", "following_url": "https://api.github.com/users/hculea/following{/other_user}", "gists_url": "https://api.github.com/users/hculea/gists{/gist_id}", "starred_url": "https://api.github.com/users/hculea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hculea/subscriptions", "organizations_url": "https://api.github.com/users/hculea/orgs", "repos_url": "https://api.github.com/users/hculea/repos", "events_url": "https://api.github.com/users/hculea/events{/privacy}", "received_events_url": "https://api.github.com/users/hculea/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2024-06-03T12:38:12Z", "updated_at": "2024-07-11T09:38:42Z", "closed_at": "2024-07-05T14:54:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83", "diff_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83.diff", "patch_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83.patch", "merged_at": "2024-07-05T14:54:50Z"}, "body": "## Background\r\n\r\nCurrently, on WASM targets, the `zxcvbn` crate can only be used if the host environment is JavaScript, such that functions such as `js_sys::new_0()::get_time()` would be available through bindings generated by e.g. wasm-bindgen.\r\n\r\n## Rationale\r\n\r\nNot all code compiled to WASM is run in a JavaScript runtime. \r\n\r\nOne example is the [1Password Go SDK](https://github.com/1Password/onepassword-sdk-go), which uses [Extism](https://github.com/extism/go-sdk/blob/main/go.mod) to communicate with a [Wazero](https://github.com/tetratelabs/wazero) runtime, which does not have the JS bindings available.\r\n\r\nFor context, this project leverages a Rust core (where`zxcvbn` is used to determine the password's strength, when creating or updating 1Password items) compiled to WASM. Calls to it are made from the Go host env.\r\n\nIn situations where these system functions are not available, placeholders for it have to be injected into the runtime by the host.\n\r\nIn the Go code, injecting such a function would look similar to: \r\nhttps://github.com/1Password/onepassword-sdk-go/blob/main/internal/imported.go#L31-L38\r\n\r\n## Thought process\r\n\r\nThis PR addresses this issue by allowing the host environment to inject its own implementation for the `now` function. It requires the environment to export a `unix_time_milliseconds_imported`, returning the unix timestamp in milliseconds.\r\n\r\nThis change is fully backwards compatible, and it requires that the consumers of the crate explicitly opt in to provide this custom implementation by activating the `custom_wasm_env` feature. In the absence of this feature, calls to zxcvbn would panic.\r\n\r\n## How to test\r\n\r\nCode review, to begin with, would be greatly appreciated. \r\n\r\nFor functional review, I have put together a test repository where the new behaviour can be validated.\r\n\r\nSee testing notes in the README: https://github.com/hculea/zxcvbn-test\r\n\r\n## Additional information\r\n\r\nIn the scope of this PR, I have also:\r\n* removed the `getrandom` dependency from the wasm32 dependency tree, as it was not being used anywhere\r\n* removed the `#![forbid(unsafe_code)]` linter, as injecting a custom function requires the execution of unsafe code\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/82", "repository_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs", "labels_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/82/comments", "events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/82/events", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/82", "id": 2316586693, "node_id": "PR_kwDOBJHx_c5wh4pI", "number": 82, "title": "Version 3.0.1", "user": {"login": "shssoichiro", "id": 5951392, "node_id": "MDQ6VXNlcjU5NTEzOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5951392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shssoichiro", "html_url": "https://github.com/shssoichiro", "followers_url": "https://api.github.com/users/shssoichiro/followers", "following_url": "https://api.github.com/users/shssoichiro/following{/other_user}", "gists_url": "https://api.github.com/users/shssoichiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/shssoichiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shssoichiro/subscriptions", "organizations_url": "https://api.github.com/users/shssoichiro/orgs", "repos_url": "https://api.github.com/users/shssoichiro/repos", "events_url": "https://api.github.com/users/shssoichiro/events{/privacy}", "received_events_url": "https://api.github.com/users/shssoichiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-25T02:16:04Z", "updated_at": "2024-05-25T02:24:53Z", "closed_at": "2024-05-25T02:24:50Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/82", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/82", "diff_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/82.diff", "patch_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/82.patch", "merged_at": "2024-05-25T02:24:49Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/82/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/82/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/81", "repository_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs", "labels_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/81/comments", "events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/81/events", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/81", "id": 2314236485, "node_id": "PR_kwDOBJHx_c5wZu-P", "number": 81, "title": "Expose Score enum", "user": {"login": "tmpfs", "id": 238069, "node_id": "MDQ6VXNlcjIzODA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/238069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmpfs", "html_url": "https://github.com/tmpfs", "followers_url": "https://api.github.com/users/tmpfs/followers", "following_url": "https://api.github.com/users/tmpfs/following{/other_user}", "gists_url": "https://api.github.com/users/tmpfs/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmpfs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmpfs/subscriptions", "organizations_url": "https://api.github.com/users/tmpfs/orgs", "repos_url": "https://api.github.com/users/tmpfs/repos", "events_url": "https://api.github.com/users/tmpfs/events{/privacy}", "received_events_url": "https://api.github.com/users/tmpfs/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-05-24T03:01:24Z", "updated_at": "2024-05-25T02:14:11Z", "closed_at": "2024-05-25T02:14:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/81", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/81", "diff_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/81.diff", "patch_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/81.patch", "merged_at": "2024-05-25T02:14:11Z"}, "body": "I noticed upgrading from 2.2.2 to 3.0 that the `Score` (which used to be `u8`) is private.\r\n\r\nThis breaks my usage of this library so I just exported `Score` to be public.\r\n\r\nI can't see any reason to keep `Score` private as it's exposed in `Entropy`, I guess this is an oversight with the refactor?", "reactions": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/81/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/81/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/80", "repository_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs", "labels_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/80/labels{/name}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/80/comments", "events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/80/events", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/80", "id": 2313227236, "node_id": "PR_kwDOBJHx_c5wWQsg", "number": 80, "title": "Version 3.0.0", "user": {"login": "shssoichiro", "id": 5951392, "node_id": "MDQ6VXNlcjU5NTEzOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5951392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shssoichiro", "html_url": "https://github.com/shssoichiro", "followers_url": "https://api.github.com/users/shssoichiro/followers", "following_url": "https://api.github.com/users/shssoichiro/following{/other_user}", "gists_url": "https://api.github.com/users/shssoichiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/shssoichiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shssoichiro/subscriptions", "organizations_url": "https://api.github.com/users/shssoichiro/orgs", "repos_url": "https://api.github.com/users/shssoichiro/repos", "events_url": "https://api.github.com/users/shssoichiro/events{/privacy}", "received_events_url": "https://api.github.com/users/shssoichiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-05-23T15:32:40Z", "updated_at": "2024-05-23T16:27:38Z", "closed_at": "2024-05-23T16:27:38Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/80", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/80", "diff_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/80.diff", "patch_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/80.patch", "merged_at": "2024-05-23T16:27:38Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/80/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/80/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/78", "repository_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs", "labels_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/78/comments", "events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/78/events", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/78", "id": 2290738050, "node_id": "PR_kwDOBJHx_c5vJuLg", "number": 78, "title": "Make zxcvbn infallible", "user": {"login": "jrandolf", "id": 34705014, "node_id": "MDQ6VXNlcjM0NzA1MDE0", "avatar_url": "https://avatars.githubusercontent.com/u/34705014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrandolf", "html_url": "https://github.com/jrandolf", "followers_url": "https://api.github.com/users/jrandolf/followers", "following_url": "https://api.github.com/users/jrandolf/following{/other_user}", "gists_url": "https://api.github.com/users/jrandolf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrandolf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrandolf/subscriptions", "organizations_url": "https://api.github.com/users/jrandolf/orgs", "repos_url": "https://api.github.com/users/jrandolf/repos", "events_url": "https://api.github.com/users/jrandolf/events{/privacy}", "received_events_url": "https://api.github.com/users/jrandolf/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-05-11T07:20:31Z", "updated_at": "2024-05-11T18:46:27Z", "closed_at": "2024-05-11T18:43:59Z", "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/78", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/78", "diff_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/78.diff", "patch_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/78.patch", "merged_at": "2024-05-11T18:43:59Z"}, "body": "There shouldn't be any reason for zxcvbn to error. An empty password should still be treated as valid input and we can use instant/performance.now to calculate durations accurately without overflow.", "reactions": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/78/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/78/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}], "chosen_pr": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83", "repository_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs", "labels_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/comments", "events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/events", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83", "id": 2331048963, "node_id": "PR_kwDOBJHx_c5xS3Dm", "number": 83, "title": "Add support for WASM targets running in a custom runtime", "user": {"login": "hculea", "id": 45151601, "node_id": "MDQ6VXNlcjQ1MTUxNjAx", "avatar_url": "https://avatars.githubusercontent.com/u/45151601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hculea", "html_url": "https://github.com/hculea", "followers_url": "https://api.github.com/users/hculea/followers", "following_url": "https://api.github.com/users/hculea/following{/other_user}", "gists_url": "https://api.github.com/users/hculea/gists{/gist_id}", "starred_url": "https://api.github.com/users/hculea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hculea/subscriptions", "organizations_url": "https://api.github.com/users/hculea/orgs", "repos_url": "https://api.github.com/users/hculea/repos", "events_url": "https://api.github.com/users/hculea/events{/privacy}", "received_events_url": "https://api.github.com/users/hculea/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2024-06-03T12:38:12Z", "updated_at": "2024-07-11T09:38:42Z", "closed_at": "2024-07-05T14:54:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83", "diff_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83.diff", "patch_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83.patch", "merged_at": "2024-07-05T14:54:50Z"}, "body": "## Background\r\n\r\nCurrently, on WASM targets, the `zxcvbn` crate can only be used if the host environment is JavaScript, such that functions such as `js_sys::new_0()::get_time()` would be available through bindings generated by e.g. wasm-bindgen.\r\n\r\n## Rationale\r\n\r\nNot all code compiled to WASM is run in a JavaScript runtime. \r\n\r\nOne example is the [1Password Go SDK](https://github.com/1Password/onepassword-sdk-go), which uses [Extism](https://github.com/extism/go-sdk/blob/main/go.mod) to communicate with a [Wazero](https://github.com/tetratelabs/wazero) runtime, which does not have the JS bindings available.\r\n\r\nFor context, this project leverages a Rust core (where`zxcvbn` is used to determine the password's strength, when creating or updating 1Password items) compiled to WASM. Calls to it are made from the Go host env.\r\n\nIn situations where these system functions are not available, placeholders for it have to be injected into the runtime by the host.\n\r\nIn the Go code, injecting such a function would look similar to: \r\nhttps://github.com/1Password/onepassword-sdk-go/blob/main/internal/imported.go#L31-L38\r\n\r\n## Thought process\r\n\r\nThis PR addresses this issue by allowing the host environment to inject its own implementation for the `now` function. It requires the environment to export a `unix_time_milliseconds_imported`, returning the unix timestamp in milliseconds.\r\n\r\nThis change is fully backwards compatible, and it requires that the consumers of the crate explicitly opt in to provide this custom implementation by activating the `custom_wasm_env` feature. In the absence of this feature, calls to zxcvbn would panic.\r\n\r\n## How to test\r\n\r\nCode review, to begin with, would be greatly appreciated. \r\n\r\nFor functional review, I have put together a test repository where the new behaviour can be validated.\r\n\r\nSee testing notes in the README: https://github.com/hculea/zxcvbn-test\r\n\r\n## Additional information\r\n\r\nIn the scope of this PR, I have also:\r\n* removed the `getrandom` dependency from the wasm32 dependency tree, as it was not being used anywhere\r\n* removed the `#![forbid(unsafe_code)]` linter, as injecting a custom function requires the execution of unsafe code\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, "chosen_detail": {"url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83", "id": 1900769510, "node_id": "PR_kwDOBJHx_c5xS3Dm", "html_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83", "diff_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83.diff", "patch_url": "https://github.com/shssoichiro/zxcvbn-rs/pull/83.patch", "issue_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83", "number": 83, "state": "closed", "locked": false, "title": "Add support for WASM targets running in a custom runtime", "user": {"login": "hculea", "id": 45151601, "node_id": "MDQ6VXNlcjQ1MTUxNjAx", "avatar_url": "https://avatars.githubusercontent.com/u/45151601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hculea", "html_url": "https://github.com/hculea", "followers_url": "https://api.github.com/users/hculea/followers", "following_url": "https://api.github.com/users/hculea/following{/other_user}", "gists_url": "https://api.github.com/users/hculea/gists{/gist_id}", "starred_url": "https://api.github.com/users/hculea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hculea/subscriptions", "organizations_url": "https://api.github.com/users/hculea/orgs", "repos_url": "https://api.github.com/users/hculea/repos", "events_url": "https://api.github.com/users/hculea/events{/privacy}", "received_events_url": "https://api.github.com/users/hculea/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "## Background\r\n\r\nCurrently, on WASM targets, the `zxcvbn` crate can only be used if the host environment is JavaScript, such that functions such as `js_sys::new_0()::get_time()` would be available through bindings generated by e.g. wasm-bindgen.\r\n\r\n## Rationale\r\n\r\nNot all code compiled to WASM is run in a JavaScript runtime. \r\n\r\nOne example is the [1Password Go SDK](https://github.com/1Password/onepassword-sdk-go), which uses [Extism](https://github.com/extism/go-sdk/blob/main/go.mod) to communicate with a [Wazero](https://github.com/tetratelabs/wazero) runtime, which does not have the JS bindings available.\r\n\r\nFor context, this project leverages a Rust core (where`zxcvbn` is used to determine the password's strength, when creating or updating 1Password items) compiled to WASM. Calls to it are made from the Go host env.\r\n\nIn situations where these system functions are not available, placeholders for it have to be injected into the runtime by the host.\n\r\nIn the Go code, injecting such a function would look similar to: \r\nhttps://github.com/1Password/onepassword-sdk-go/blob/main/internal/imported.go#L31-L38\r\n\r\n## Thought process\r\n\r\nThis PR addresses this issue by allowing the host environment to inject its own implementation for the `now` function. It requires the environment to export a `unix_time_milliseconds_imported`, returning the unix timestamp in milliseconds.\r\n\r\nThis change is fully backwards compatible, and it requires that the consumers of the crate explicitly opt in to provide this custom implementation by activating the `custom_wasm_env` feature. In the absence of this feature, calls to zxcvbn would panic.\r\n\r\n## How to test\r\n\r\nCode review, to begin with, would be greatly appreciated. \r\n\r\nFor functional review, I have put together a test repository where the new behaviour can be validated.\r\n\r\nSee testing notes in the README: https://github.com/hculea/zxcvbn-test\r\n\r\n## Additional information\r\n\r\nIn the scope of this PR, I have also:\r\n* removed the `getrandom` dependency from the wasm32 dependency tree, as it was not being used anywhere\r\n* removed the `#![forbid(unsafe_code)]` linter, as injecting a custom function requires the execution of unsafe code\r\n\r\n", "created_at": "2024-06-03T12:38:12Z", "updated_at": "2024-07-11T09:38:42Z", "closed_at": "2024-07-05T14:54:50Z", "merged_at": "2024-07-05T14:54:50Z", "merge_commit_sha": "635a42f6fb2e59a1138e6c88f63ff861869c2f62", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83/commits", "review_comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83/comments", "review_comment_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/comments", "statuses_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/statuses/d7efabd096944bdc0b5e79f4d62dfb35117c0b3f", "head": {"label": "hculea:add-support-for-non-js-wasm-targets", "ref": "add-support-for-non-js-wasm-targets", "sha": "d7efabd096944bdc0b5e79f4d62dfb35117c0b3f", "user": {"login": "hculea", "id": 45151601, "node_id": "MDQ6VXNlcjQ1MTUxNjAx", "avatar_url": "https://avatars.githubusercontent.com/u/45151601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hculea", "html_url": "https://github.com/hculea", "followers_url": "https://api.github.com/users/hculea/followers", "following_url": "https://api.github.com/users/hculea/following{/other_user}", "gists_url": "https://api.github.com/users/hculea/gists{/gist_id}", "starred_url": "https://api.github.com/users/hculea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hculea/subscriptions", "organizations_url": "https://api.github.com/users/hculea/orgs", "repos_url": "https://api.github.com/users/hculea/repos", "events_url": "https://api.github.com/users/hculea/events{/privacy}", "received_events_url": "https://api.github.com/users/hculea/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "repo": {"id": 809707277, "node_id": "R_kgDOMEMnDQ", "name": "zxcvbn-rs", "full_name": "hculea/zxcvbn-rs", "private": false, "owner": {"login": "hculea", "id": 45151601, "node_id": "MDQ6VXNlcjQ1MTUxNjAx", "avatar_url": "https://avatars.githubusercontent.com/u/45151601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hculea", "html_url": "https://github.com/hculea", "followers_url": "https://api.github.com/users/hculea/followers", "following_url": "https://api.github.com/users/hculea/following{/other_user}", "gists_url": "https://api.github.com/users/hculea/gists{/gist_id}", "starred_url": "https://api.github.com/users/hculea/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hculea/subscriptions", "organizations_url": "https://api.github.com/users/hculea/orgs", "repos_url": "https://api.github.com/users/hculea/repos", "events_url": "https://api.github.com/users/hculea/events{/privacy}", "received_events_url": "https://api.github.com/users/hculea/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/hculea/zxcvbn-rs", "description": "Port of Dropbox's zxcvbn password strength library for Rust", "fork": true, "url": "https://api.github.com/repos/hculea/zxcvbn-rs", "forks_url": "https://api.github.com/repos/hculea/zxcvbn-rs/forks", "keys_url": "https://api.github.com/repos/hculea/zxcvbn-rs/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/hculea/zxcvbn-rs/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/hculea/zxcvbn-rs/teams", "hooks_url": "https://api.github.com/repos/hculea/zxcvbn-rs/hooks", "issue_events_url": "https://api.github.com/repos/hculea/zxcvbn-rs/issues/events{/number}", "events_url": "https://api.github.com/repos/hculea/zxcvbn-rs/events", "assignees_url": "https://api.github.com/repos/hculea/zxcvbn-rs/assignees{/user}", "branches_url": "https://api.github.com/repos/hculea/zxcvbn-rs/branches{/branch}", "tags_url": "https://api.github.com/repos/hculea/zxcvbn-rs/tags", "blobs_url": "https://api.github.com/repos/hculea/zxcvbn-rs/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/hculea/zxcvbn-rs/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/hculea/zxcvbn-rs/git/refs{/sha}", "trees_url": "https://api.github.com/repos/hculea/zxcvbn-rs/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/hculea/zxcvbn-rs/statuses/{sha}", "languages_url": "https://api.github.com/repos/hculea/zxcvbn-rs/languages", "stargazers_url": "https://api.github.com/repos/hculea/zxcvbn-rs/stargazers", "contributors_url": "https://api.github.com/repos/hculea/zxcvbn-rs/contributors", "subscribers_url": "https://api.github.com/repos/hculea/zxcvbn-rs/subscribers", "subscription_url": "https://api.github.com/repos/hculea/zxcvbn-rs/subscription", "commits_url": "https://api.github.com/repos/hculea/zxcvbn-rs/commits{/sha}", "git_commits_url": "https://api.github.com/repos/hculea/zxcvbn-rs/git/commits{/sha}", "comments_url": "https://api.github.com/repos/hculea/zxcvbn-rs/comments{/number}", "issue_comment_url": "https://api.github.com/repos/hculea/zxcvbn-rs/issues/comments{/number}", "contents_url": "https://api.github.com/repos/hculea/zxcvbn-rs/contents/{+path}", "compare_url": "https://api.github.com/repos/hculea/zxcvbn-rs/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/hculea/zxcvbn-rs/merges", "archive_url": "https://api.github.com/repos/hculea/zxcvbn-rs/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/hculea/zxcvbn-rs/downloads", "issues_url": "https://api.github.com/repos/hculea/zxcvbn-rs/issues{/number}", "pulls_url": "https://api.github.com/repos/hculea/zxcvbn-rs/pulls{/number}", "milestones_url": "https://api.github.com/repos/hculea/zxcvbn-rs/milestones{/number}", "notifications_url": "https://api.github.com/repos/hculea/zxcvbn-rs/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/hculea/zxcvbn-rs/labels{/name}", "releases_url": "https://api.github.com/repos/hculea/zxcvbn-rs/releases{/id}", "deployments_url": "https://api.github.com/repos/hculea/zxcvbn-rs/deployments", "created_at": "2024-06-03T09:45:31Z", "updated_at": "2024-06-03T09:45:31Z", "pushed_at": "2024-07-05T14:01:02Z", "git_url": "git://github.com/hculea/zxcvbn-rs.git", "ssh_url": "git@github.com:hculea/zxcvbn-rs.git", "clone_url": "https://github.com/hculea/zxcvbn-rs.git", "svn_url": "https://github.com/hculea/zxcvbn-rs", "homepage": "", "size": 225, "stargazers_count": 0, "watchers_count": 0, "language": null, "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit", "node_id": "MDc6TGljZW5zZTEz"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "shssoichiro:master", "ref": "master", "sha": "20a8548c9dd45cc86e49fded16f0b51278e11bda", "user": {"login": "shssoichiro", "id": 5951392, "node_id": "MDQ6VXNlcjU5NTEzOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5951392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shssoichiro", "html_url": "https://github.com/shssoichiro", "followers_url": "https://api.github.com/users/shssoichiro/followers", "following_url": "https://api.github.com/users/shssoichiro/following{/other_user}", "gists_url": "https://api.github.com/users/shssoichiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/shssoichiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shssoichiro/subscriptions", "organizations_url": "https://api.github.com/users/shssoichiro/orgs", "repos_url": "https://api.github.com/users/shssoichiro/repos", "events_url": "https://api.github.com/users/shssoichiro/events{/privacy}", "received_events_url": "https://api.github.com/users/shssoichiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "repo": {"id": 76673533, "node_id": "MDEwOlJlcG9zaXRvcnk3NjY3MzUzMw==", "name": "zxcvbn-rs", "full_name": "shssoichiro/zxcvbn-rs", "private": false, "owner": {"login": "shssoichiro", "id": 5951392, "node_id": "MDQ6VXNlcjU5NTEzOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5951392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shssoichiro", "html_url": "https://github.com/shssoichiro", "followers_url": "https://api.github.com/users/shssoichiro/followers", "following_url": "https://api.github.com/users/shssoichiro/following{/other_user}", "gists_url": "https://api.github.com/users/shssoichiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/shssoichiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shssoichiro/subscriptions", "organizations_url": "https://api.github.com/users/shssoichiro/orgs", "repos_url": "https://api.github.com/users/shssoichiro/repos", "events_url": "https://api.github.com/users/shssoichiro/events{/privacy}", "received_events_url": "https://api.github.com/users/shssoichiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/shssoichiro/zxcvbn-rs", "description": "Port of Dropbox's zxcvbn password strength library for Rust", "fork": false, "url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs", "forks_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/forks", "keys_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/teams", "hooks_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/hooks", "issue_events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/events{/number}", "events_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/events", "assignees_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/assignees{/user}", "branches_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/branches{/branch}", "tags_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/tags", "blobs_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/git/refs{/sha}", "trees_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/statuses/{sha}", "languages_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/languages", "stargazers_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/stargazers", "contributors_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/contributors", "subscribers_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/subscribers", "subscription_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/subscription", "commits_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/commits{/sha}", "git_commits_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/git/commits{/sha}", "comments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/comments{/number}", "issue_comment_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/comments{/number}", "contents_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/contents/{+path}", "compare_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/merges", "archive_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/downloads", "issues_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues{/number}", "pulls_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls{/number}", "milestones_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/milestones{/number}", "notifications_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/labels{/name}", "releases_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/releases{/id}", "deployments_url": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/deployments", "created_at": "2016-12-16T17:44:22Z", "updated_at": "2025-12-30T15:59:17Z", "pushed_at": "2025-02-12T23:19:24Z", "git_url": "git://github.com/shssoichiro/zxcvbn-rs.git", "ssh_url": "git@github.com:shssoichiro/zxcvbn-rs.git", "clone_url": "https://github.com/shssoichiro/zxcvbn-rs.git", "svn_url": "https://github.com/shssoichiro/zxcvbn-rs", "homepage": "", "size": 646, "stargazers_count": 254, "watchers_count": 254, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 69, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 12, "license": {"key": "mit", "name": "MIT License", "spdx_id": "MIT", "url": "https://api.github.com/licenses/mit", "node_id": "MDc6TGljZW5zZTEz"}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["password-strength", "rust", "security"], "visibility": "public", "forks": 69, "open_issues": 12, "watchers": 254, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83"}, "html": {"href": "https://github.com/shssoichiro/zxcvbn-rs/pull/83"}, "issue": {"href": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83"}, "comments": {"href": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/issues/83/comments"}, "review_comments": {"href": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83/comments"}, "review_comment": {"href": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/pulls/83/commits"}, "statuses": {"href": "https://api.github.com/repos/shssoichiro/zxcvbn-rs/statuses/d7efabd096944bdc0b5e79f4d62dfb35117c0b3f"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "shssoichiro", "id": 5951392, "node_id": "MDQ6VXNlcjU5NTEzOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5951392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shssoichiro", "html_url": "https://github.com/shssoichiro", "followers_url": "https://api.github.com/users/shssoichiro/followers", "following_url": "https://api.github.com/users/shssoichiro/following{/other_user}", "gists_url": "https://api.github.com/users/shssoichiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/shssoichiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shssoichiro/subscriptions", "organizations_url": "https://api.github.com/users/shssoichiro/orgs", "repos_url": "https://api.github.com/users/shssoichiro/repos", "events_url": "https://api.github.com/users/shssoichiro/events{/privacy}", "received_events_url": "https://api.github.com/users/shssoichiro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 9, "review_comments": 0, "maintainer_can_modify": false, "commits": 6, "additions": 43, "deletions": 6, "changed_files": 4}}