{"window": ["2020-10-23T18:04:48.706192+00:00", "2022-01-21T13:47:03.811687+00:00"], "repo_slug": "tower-rs/tower-http", "candidates": [{"url": "https://api.github.com/repos/tower-rs/tower-http/issues/210", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/210/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/210/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/210/events", "html_url": "https://github.com/tower-rs/tower-http/pull/210", "id": 1110425987, "node_id": "PR_kwDOBxBwNc4xYbt-", "number": 210, "title": "Release 0.2.1", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-21T12:38:52Z", "updated_at": "2022-01-21T12:46:20Z", "closed_at": "2022-01-21T12:46:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/210", "html_url": "https://github.com/tower-rs/tower-http/pull/210", "diff_url": "https://github.com/tower-rs/tower-http/pull/210.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/210.patch", "merged_at": "2022-01-21T12:46:19Z"}, "body": "Would be nice to also include https://github.com/tower-rs/tower-http/pull/203 but haven't looked into that yet and wanna get #204 out quickly.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/210/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/206", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/206/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/206/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/206/events", "html_url": "https://github.com/tower-rs/tower-http/pull/206", "id": 1103824775, "node_id": "PR_kwDOBxBwNc4xC4RY", "number": 206, "title": "Fix ci issue and update axum in example", "user": {"login": "Nehliin", "id": 22415885, "node_id": "MDQ6VXNlcjIyNDE1ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/22415885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nehliin", "html_url": "https://github.com/Nehliin", "followers_url": "https://api.github.com/users/Nehliin/followers", "following_url": "https://api.github.com/users/Nehliin/following{/other_user}", "gists_url": "https://api.github.com/users/Nehliin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nehliin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nehliin/subscriptions", "organizations_url": "https://api.github.com/users/Nehliin/orgs", "repos_url": "https://api.github.com/users/Nehliin/repos", "events_url": "https://api.github.com/users/Nehliin/events{/privacy}", "received_events_url": "https://api.github.com/users/Nehliin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-01-14T15:53:24Z", "updated_at": "2022-01-14T16:26:00Z", "closed_at": "2022-01-14T16:25:59Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/206", "html_url": "https://github.com/tower-rs/tower-http/pull/206", "diff_url": "https://github.com/tower-rs/tower-http/pull/206.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/206.patch", "merged_at": "2022-01-14T16:25:59Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/206/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/196", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/events", "html_url": "https://github.com/tower-rs/tower-http/pull/196", "id": 1088034177, "node_id": "PR_kwDOBxBwNc4wPwxm", "number": 196, "title": "Update minimum dependency versions", "user": {"login": "kylewlacy", "id": 1362179, "node_id": "MDQ6VXNlcjEzNjIxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1362179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylewlacy", "html_url": "https://github.com/kylewlacy", "followers_url": "https://api.github.com/users/kylewlacy/followers", "following_url": "https://api.github.com/users/kylewlacy/following{/other_user}", "gists_url": "https://api.github.com/users/kylewlacy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylewlacy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylewlacy/subscriptions", "organizations_url": "https://api.github.com/users/kylewlacy/orgs", "repos_url": "https://api.github.com/users/kylewlacy/repos", "events_url": "https://api.github.com/users/kylewlacy/events{/privacy}", "received_events_url": "https://api.github.com/users/kylewlacy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-23T23:08:11Z", "updated_at": "2021-12-24T09:56:54Z", "closed_at": "2021-12-24T09:56:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/196", "html_url": "https://github.com/tower-rs/tower-http/pull/196", "diff_url": "https://github.com/tower-rs/tower-http/pull/196.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/196.patch", "merged_at": "2021-12-24T09:56:54Z"}, "body": "This PR updates the minimum dependency versions in `Cargo.toml` to prevent compilation failures.\r\n\r\n## Motivation\r\n\r\nOriginally, after trying to update our project to tower-http 0.2.0, we got a compilation error from tower-http itself after updating.\r\n\r\nI did some sleuthing and found that the version of `futures-util` in our lockfile was too old for tower-http. Doing `cargo update -p futures-util` was good enough to solve the immediate problem, but it seems like the kind of thing that should be upstreamed!\r\n\r\n## Solution\r\n\r\nI updated all dependencies listed in `Cargo.toml` to the minimum versions needed to still compile. I basically used the following to verify that I didn't miss any dependencies:\r\n\r\n```\r\n$ git clone 'https://github.com/kylewlacy/tower-http.git'\r\n$ cd tower-http\r\n$ git checkout origin/update-minimum-dependency-versions\r\n$ cargo +nightly check -Z minimal-versions --all-features --lib\r\n(Initial compilation will fail due to an upstream error in crc32)\r\n$ cargo update -p crc32\r\n$ cargo +nightly check -Z minimal-versions --all-features --lib\r\n(This succeeds with the changes from this PR, but would fail on master)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/193", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/193/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/193/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/193/events", "html_url": "https://github.com/tower-rs/tower-http/pull/193", "id": 1068454443, "node_id": "PR_kwDOBxBwNc4vQFmj", "number": 193, "title": "Release 0.2.0", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734115990, "node_id": "MDU6TGFiZWwyNzM0MTE1OTkw", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/T-release", "name": "T-release", "color": "bfd4f2", "default": false, "description": "Topic: releases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-01T14:09:57Z", "updated_at": "2021-12-01T19:52:37Z", "closed_at": "2021-12-01T19:52:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/193", "html_url": "https://github.com/tower-rs/tower-http/pull/193", "diff_url": "https://github.com/tower-rs/tower-http/pull/193.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/193.patch", "merged_at": "2021-12-01T19:52:36Z"}, "body": "So much good stuff in this release \ud83e\udd73 \r\n\r\n---\r\n\r\n## Added\r\n\r\n- **builder**: Add `ServiceBuilderExt` which adds methods to `tower::ServiceBuilder` for\r\n  adding middleware from tower-http ([#106])\r\n- **request_id**: Add `SetRequestId` and `PropagateRequestId` middleware ([#150])\r\n- **trace**: Add `DefaultMakeSpan::level` to make log level of tracing spans easily configurable ([#124])\r\n- **trace**: Add `LatencyUnit::Seconds` for formatting latencies as seconds ([#179])\r\n- **trace**: Support customizing which status codes are considered failures by `GrpcErrorsAsFailures` ([#189])\r\n- **compression**: Support specifying predicates to choose when responses should\r\n  be compressed. This can be used to disable compression of small responses,\r\n  responses with a certain `content-type`, or something user defined ([#172])\r\n- **fs**: Ability to serve precompressed files ([#156])\r\n- **fs**: Support `Range` requests ([#173])\r\n- **fs**: Properly support HEAD requests which return no body and have the `Content-Length` header set ([#169])\r\n\r\n## Changed\r\n\r\n- `AddAuthorization`, `InFlightRequests`, `SetRequestHeader`,\r\n  `SetResponseHeader`, `AddExtension`, `MapRequestBody` and `MapResponseBody`\r\n   now requires underlying service to use `http::Request<ReqBody>` and\r\n   `http::Response<ResBody>` as request and responses ([#182]) (BREAKING)\r\n- **set_header**: Remove unnecessary generic parameter from `SetRequestHeaderLayer`\r\n  and `SetResponseHeaderLayer`. This removes the need (and possibility) to specify a\r\n  body type for these layers ([#148]) (BREAKING)\r\n- **compression, decompression**: Change the response body error type to\r\n  `Box<dyn std::error::Error + Send + Sync>`. This makes them usable if\r\n  the body they're wrapping uses `Box<dyn std::error::Error + Send + Sync>` as\r\n  its error type which they previously weren't ([#166]) (BREAKING)\r\n- **fs**: Changed response body type of `ServeDir` and `ServeFile` to\r\n  `ServeFileSystemResponseBody` and `ServeFileSystemResponseFuture` ([#187]) (BREAKING)\r\n- **auth**: Change `AuthorizeRequest` and `AsyncAuthorizeRequest` traits to be simpler ([#192]) (BREAKING)\r\n\r\n## Removed\r\n\r\n- **compression, decompression**: Remove `BodyOrIoError`. Its been replaced with `Box<dyn\r\n  std::error::Error + Send + Sync>` ([#166]) (BREAKING)\r\n- **compression, decompression**: Remove the `compression` and `decompression` feature. They were unnecessary\r\n  and `compression-full`/`decompression-full` can be used to get full\r\n  compression/decompression support. For more granular control `[compression|decompression]-gzip`,\r\n  `[compression|decompression]-br` and `[compression|decompression]-deflate` may\r\n  be used instead ([#170]) (BREAKING)\r\n\r\n[#106]: https://github.com/tower-rs/tower-http/pull/106\r\n[#124]: https://github.com/tower-rs/tower-http/pull/124\r\n[#148]: https://github.com/tower-rs/tower-http/pull/148\r\n[#150]: https://github.com/tower-rs/tower-http/pull/150\r\n[#156]: https://github.com/tower-rs/tower-http/pull/156\r\n[#166]: https://github.com/tower-rs/tower-http/pull/166\r\n[#169]: https://github.com/tower-rs/tower-http/pull/169\r\n[#170]: https://github.com/tower-rs/tower-http/pull/170\r\n[#172]: https://github.com/tower-rs/tower-http/pull/172\r\n[#173]: https://github.com/tower-rs/tower-http/pull/173\r\n[#179]: https://github.com/tower-rs/tower-http/pull/179\r\n[#182]: https://github.com/tower-rs/tower-http/pull/182\r\n[#187]: https://github.com/tower-rs/tower-http/pull/187\r\n[#189]: https://github.com/tower-rs/tower-http/pull/189\r\n[#192]: https://github.com/tower-rs/tower-http/pull/192", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/193/reactions", "total_count": 5, "+1": 0, "-1": 0, "laugh": 0, "hooray": 4, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/193/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/189", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/189/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/189/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/189/events", "html_url": "https://github.com/tower-rs/tower-http/pull/189", "id": 1063741758, "node_id": "PR_kwDOBxBwNc4vBp4d", "number": 189, "title": "Make `GrpcErrorsAsFailures` more flexible", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734096719, "node_id": "MDU6TGFiZWwyNzM0MDk2NzE5", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: A PR with an enhancement or a proposed on in an issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2", "html_url": "https://github.com/tower-rs/tower-http/milestone/2", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2/labels", "id": 6825913, "node_id": "MDk6TWlsZXN0b25lNjgyNTkxMw==", "number": 2, "title": "0.2.0", "description": "Next batch of breaking changes.", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2021-06-04T19:05:12Z", "updated_at": "2021-12-01T14:11:52Z", "due_on": null, "closed_at": "2021-12-01T14:11:52Z"}, "comments": 8, "created_at": "2021-11-25T15:50:53Z", "updated_at": "2021-11-26T10:53:14Z", "closed_at": "2021-11-26T10:53:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/189", "html_url": "https://github.com/tower-rs/tower-http/pull/189", "diff_url": "https://github.com/tower-rs/tower-http/pull/189.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/189.patch", "merged_at": "2021-11-26T10:53:13Z"}, "body": "Previously `GrpcErrorsAsFailures` would only consider `Ok` as a success. However for servers it might be useful to also consider `Not Found` or `Invalid Arguments` as success (or at least not consider them failures) since they're likely caused by the client.\r\n\r\nThis PR adds `GrcpErrorsAsFailures::success_codes` which takes a bitmask of the codes that are considered successes. \r\n\r\nExample usage:\r\n\r\n```rust\r\n// Response classifier that doesn't consider `Ok`, `Invalid Argument`, or `Not Found` as\r\n// failures\r\nlet classifier = GrpcErrorsAsFailures::new()\r\n    .success_codes(GrpcCodeBitmask::INVALID_ARGUMENT | GrpcCodeBitmask::NOT_FOUND);\r\n\r\nlet service = ServiceBuilder::new()\r\n    .layer(TraceLayer::new(SharedClassifier::new(classifier)))\r\n    .service(service);\r\n```\r\n\r\nI went with the name `GrpcCodeBitmask` because I think it communicates quite somewhat clearly what it does. At least to people who know what a bitmask is. At first I considered just calling it `GrpcCode` but that might be confusing since its used to match multiple codes and doesn't just represent a single code.\r\n\r\nMaybe the name `GrpcErrorsAsFailures` isn't very accurate anymore \ud83e\udd14 Maybe just `GrpcClassifier` would be better. Although its more broad.\r\n\r\nIt does add a new public dependency on [`bitflags`](https://crates.io/crates/bitflags) but I'm okay with that. The crate is maintained by people from the Rust team, doesn't have dependencies, and has been 1.0 for over 4 years. axum also has a [public dependency on it](https://docs.rs/axum/0.3.4/axum/routing/struct.MethodFilter.html).\r\n\r\nFixes https://github.com/tower-rs/tower-http/issues/126", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/189/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/188", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/188/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/188/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/188/events", "html_url": "https://github.com/tower-rs/tower-http/pull/188", "id": 1061109030, "node_id": "PR_kwDOBxBwNc4u5oU8", "number": 188, "title": "Update README and set MSRV", "user": {"login": "Nehliin", "id": 22415885, "node_id": "MDQ6VXNlcjIyNDE1ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/22415885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nehliin", "html_url": "https://github.com/Nehliin", "followers_url": "https://api.github.com/users/Nehliin/followers", "following_url": "https://api.github.com/users/Nehliin/following{/other_user}", "gists_url": "https://api.github.com/users/Nehliin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nehliin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nehliin/subscriptions", "organizations_url": "https://api.github.com/users/Nehliin/orgs", "repos_url": "https://api.github.com/users/Nehliin/repos", "events_url": "https://api.github.com/users/Nehliin/events{/privacy}", "received_events_url": "https://api.github.com/users/Nehliin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-23T11:01:11Z", "updated_at": "2021-11-23T11:10:18Z", "closed_at": "2021-11-23T11:10:17Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/188", "html_url": "https://github.com/tower-rs/tower-http/pull/188", "diff_url": "https://github.com/tower-rs/tower-http/pull/188.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/188.patch", "merged_at": "2021-11-23T11:10:17Z"}, "body": "Adds MSRV fixing:  https://github.com/tower-rs/tower-http/issues/185 (using the recently released: https://doc.rust-lang.org/cargo/reference/manifest.html#the-rust-version-field)\r\nAlso adds the axum example to the readme.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/188/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/186", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/186/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/186/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/186/events", "html_url": "https://github.com/tower-rs/tower-http/pull/186", "id": 1061037786, "node_id": "PR_kwDOBxBwNc4u5ars", "number": 186, "title": "Update tracing-subscriber to 0.3", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-23T09:55:56Z", "updated_at": "2021-11-23T10:05:55Z", "closed_at": "2021-11-23T10:05:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/186", "html_url": "https://github.com/tower-rs/tower-http/pull/186", "diff_url": "https://github.com/tower-rs/tower-http/pull/186.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/186.patch", "merged_at": "2021-11-23T10:05:54Z"}, "body": "Required for https://github.com/tower-rs/tower-http/pull/180", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/186/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/181", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/181/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/181/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/181/events", "html_url": "https://github.com/tower-rs/tower-http/pull/181", "id": 1059366671, "node_id": "PR_kwDOBxBwNc4uz_yc", "number": 181, "title": "Add axum example", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-21T12:24:55Z", "updated_at": "2021-11-22T08:35:00Z", "closed_at": "2021-11-22T08:34:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/181", "html_url": "https://github.com/tower-rs/tower-http/pull/181", "diff_url": "https://github.com/tower-rs/tower-http/pull/181.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/181.patch", "merged_at": "2021-11-22T08:34:59Z"}, "body": "Pretty much just a port of the warp example to axum.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/181/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/173", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/173/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/173/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/173/events", "html_url": "https://github.com/tower-rs/tower-http/pull/173", "id": 1054986500, "node_id": "PR_kwDOBxBwNc4umPg2", "number": 173, "title": "Support `Range` requests for `ServeDir`", "user": {"login": "MarcusGrass", "id": 34198073, "node_id": "MDQ6VXNlcjM0MTk4MDcz", "avatar_url": "https://avatars.githubusercontent.com/u/34198073?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcusGrass", "html_url": "https://github.com/MarcusGrass", "followers_url": "https://api.github.com/users/MarcusGrass/followers", "following_url": "https://api.github.com/users/MarcusGrass/following{/other_user}", "gists_url": "https://api.github.com/users/MarcusGrass/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcusGrass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcusGrass/subscriptions", "organizations_url": "https://api.github.com/users/MarcusGrass/orgs", "repos_url": "https://api.github.com/users/MarcusGrass/repos", "events_url": "https://api.github.com/users/MarcusGrass/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcusGrass/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2", "html_url": "https://github.com/tower-rs/tower-http/milestone/2", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2/labels", "id": 6825913, "node_id": "MDk6TWlsZXN0b25lNjgyNTkxMw==", "number": 2, "title": "0.2.0", "description": "Next batch of breaking changes.", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2021-06-04T19:05:12Z", "updated_at": "2021-12-01T14:11:52Z", "due_on": null, "closed_at": "2021-12-01T14:11:52Z"}, "comments": 7, "created_at": "2021-11-16T15:04:31Z", "updated_at": "2021-12-01T14:02:38Z", "closed_at": "2021-12-01T14:02:38Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/173", "html_url": "https://github.com/tower-rs/tower-http/pull/173", "diff_url": "https://github.com/tower-rs/tower-http/pull/173.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/173.patch", "merged_at": "2021-12-01T14:02:38Z"}, "body": "Adresses Handle Range Requests in ServeDir #128 with some outstanding questionmarks mentioned in that issue", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/173/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 2, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/173/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/170", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/170/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/170/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/170/events", "html_url": "https://github.com/tower-rs/tower-http/pull/170", "id": 1054856232, "node_id": "PR_kwDOBxBwNc4ulz4G", "number": 170, "title": "Remove compression/decompression features", "user": {"login": "Nehliin", "id": 22415885, "node_id": "MDQ6VXNlcjIyNDE1ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/22415885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nehliin", "html_url": "https://github.com/Nehliin", "followers_url": "https://api.github.com/users/Nehliin/followers", "following_url": "https://api.github.com/users/Nehliin/following{/other_user}", "gists_url": "https://api.github.com/users/Nehliin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nehliin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nehliin/subscriptions", "organizations_url": "https://api.github.com/users/Nehliin/orgs", "repos_url": "https://api.github.com/users/Nehliin/repos", "events_url": "https://api.github.com/users/Nehliin/events{/privacy}", "received_events_url": "https://api.github.com/users/Nehliin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-16T13:03:30Z", "updated_at": "2021-11-16T13:16:02Z", "closed_at": "2021-11-16T13:14:29Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/170", "html_url": "https://github.com/tower-rs/tower-http/pull/170", "diff_url": "https://github.com/tower-rs/tower-http/pull/170.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/170.patch", "merged_at": "2021-11-16T13:14:28Z"}, "body": "## Motivation\r\nFixes: https://github.com/tower-rs/tower-http/issues/165\r\n\r\n## Solution\r\nSimply remove the features and replace with:\r\n```\r\n#[cfg(any(\r\n    feature = \"decompression-br\",\r\n    feature = \"decompression-deflate\",\r\n    feature = \"decompression-gzip\"\r\n))]\r\n```\r\nand equivalent for compression\r\n", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/170/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/162", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/162/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/162/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/162/events", "html_url": "https://github.com/tower-rs/tower-http/pull/162", "id": 1052755611, "node_id": "PR_kwDOBxBwNc4ufRzf", "number": 162, "title": "Version 0.1.2", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734115990, "node_id": "MDU6TGFiZWwyNzM0MTE1OTkw", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/T-release", "name": "T-release", "color": "bfd4f2", "default": false, "description": "Topic: releases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-11-13T19:38:14Z", "updated_at": "2021-11-13T19:59:59Z", "closed_at": "2021-11-13T19:59:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/162", "html_url": "https://github.com/tower-rs/tower-http/pull/162", "diff_url": "https://github.com/tower-rs/tower-http/pull/162.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/162.patch", "merged_at": "2021-11-13T19:59:59Z"}, "body": "- New middleware: Add `Cors` for setting [CORS] headers ([#112])\r\n- New middleware: Add `AsyncRequireAuthorization` ([#118])\r\n- `Compression`: Don't recompress HTTP responses ([#140])\r\n- `Compression` and `Decompression`: Pass configuration from layer into middleware ([#132])\r\n- `ServeDir` and `ServeFile`: Improve performance ([#137])\r\n- `Compression`: Remove needless `ResBody::Error: Into<BoxError>` bounds ([#117])\r\n- `ServeDir`: Percent decode path segments ([#129])\r\n- `ServeDir`: Use correct redirection status ([#130])\r\n- `ServeDir`: Return `404 Not Found` on requests to directories if\r\n  `append_index_html_on_directories` is set to `false` ([#122])", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/162/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/161", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/161/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/161/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/161/events", "html_url": "https://github.com/tower-rs/tower-http/pull/161", "id": 1052738284, "node_id": "PR_kwDOBxBwNc4ufOty", "number": 161, "title": "Remove unused optional hyper dependency", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2", "html_url": "https://github.com/tower-rs/tower-http/milestone/2", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2/labels", "id": 6825913, "node_id": "MDk6TWlsZXN0b25lNjgyNTkxMw==", "number": 2, "title": "0.2.0", "description": "Next batch of breaking changes.", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2021-06-04T19:05:12Z", "updated_at": "2021-12-01T14:11:52Z", "due_on": null, "closed_at": "2021-12-01T14:11:52Z"}, "comments": 0, "created_at": "2021-11-13T18:09:54Z", "updated_at": "2021-11-15T10:28:48Z", "closed_at": "2021-11-15T10:28:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/161", "html_url": "https://github.com/tower-rs/tower-http/pull/161", "diff_url": "https://github.com/tower-rs/tower-http/pull/161.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/161.patch", "merged_at": "2021-11-15T10:28:47Z"}, "body": "tower-http had an optional dependency on hyper but it doesn't seem like\r\nit was used anywhere. So can be safely removed.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/161/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/160", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/160/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/160/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/160/events", "html_url": "https://github.com/tower-rs/tower-http/pull/160", "id": 1052654499, "node_id": "PR_kwDOBxBwNc4ue_ze", "number": 160, "title": "Add examples for `ServeDir`", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734114124, "node_id": "MDU6TGFiZWwyNzM0MTE0MTI0", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/3", "html_url": "https://github.com/tower-rs/tower-http/milestone/3", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/3/labels", "id": 7337635, "node_id": "MI_kwDOBxBwNc4Ab_aj", "number": 3, "title": "0.1.2", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2021-11-08T13:41:07Z", "updated_at": "2021-11-13T20:27:50Z", "due_on": null, "closed_at": "2021-11-13T20:27:50Z"}, "comments": 0, "created_at": "2021-11-13T10:56:58Z", "updated_at": "2021-11-13T19:21:59Z", "closed_at": "2021-11-13T19:21:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/160", "html_url": "https://github.com/tower-rs/tower-http/pull/160", "diff_url": "https://github.com/tower-rs/tower-http/pull/160.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/160.patch", "merged_at": "2021-11-13T19:21:58Z"}, "body": "Fixes #149", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/160/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/160/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/156", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/156/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/156/events", "html_url": "https://github.com/tower-rs/tower-http/pull/156", "id": 1050879993, "node_id": "PR_kwDOBxBwNc4uZtc3", "number": 156, "title": "Precompressed files", "user": {"login": "Nehliin", "id": 22415885, "node_id": "MDQ6VXNlcjIyNDE1ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/22415885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nehliin", "html_url": "https://github.com/Nehliin", "followers_url": "https://api.github.com/users/Nehliin/followers", "following_url": "https://api.github.com/users/Nehliin/following{/other_user}", "gists_url": "https://api.github.com/users/Nehliin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nehliin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nehliin/subscriptions", "organizations_url": "https://api.github.com/users/Nehliin/orgs", "repos_url": "https://api.github.com/users/Nehliin/repos", "events_url": "https://api.github.com/users/Nehliin/events{/privacy}", "received_events_url": "https://api.github.com/users/Nehliin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3059414205, "node_id": "MDU6TGFiZWwzMDU5NDE0MjA1", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/breaking%20change", "name": "breaking change", "color": "B60205", "default": false, "description": "A PR that makes a breaking change."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2", "html_url": "https://github.com/tower-rs/tower-http/milestone/2", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2/labels", "id": 6825913, "node_id": "MDk6TWlsZXN0b25lNjgyNTkxMw==", "number": 2, "title": "0.2.0", "description": "Next batch of breaking changes.", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2021-06-04T19:05:12Z", "updated_at": "2021-12-01T14:11:52Z", "due_on": null, "closed_at": "2021-12-01T14:11:52Z"}, "comments": 9, "created_at": "2021-11-11T11:29:44Z", "updated_at": "2021-11-17T09:24:05Z", "closed_at": "2021-11-15T11:04:48Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/156", "html_url": "https://github.com/tower-rs/tower-http/pull/156", "diff_url": "https://github.com/tower-rs/tower-http/pull/156.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/156.patch", "merged_at": "2021-11-15T11:04:48Z"}, "body": "<!--\r\nThank you for your Pull Request. Please provide a description above and review\r\nthe requirements below.\r\n\r\nBug fixes and new features should include tests.\r\n\r\nContributors guide: https://github.com/tower-rs/tower-http/blob/master/CONTRIBUTING.md\r\n-->\r\n\r\n## Motivation\r\nSuggestion for an implementation that should fix https://github.com/tower-rs/tower-http/issues/120. \r\n\r\n## Solution\r\nThe user specifies which types of precompression is available in the same directory as the original file by specifying `precompressed_[gzip|br|deflate]` to the `ServeFile` service. It is not required to have the compression feature enabled since no compression/decompression actually happens on the server. The `ServeFile` service looks for copies of the original file with the extension `.gz`, `.br`or `.zz` depending on the compression used/specified. If a client requests the file and doesn't support any of the precompressed variants the \"normal\" file  will be served instead. This means it's expected that the uncompressed version of the file also exists if all clients should be able to request the file. Otherwise a 404 will be returned if the client doesn't support the compression algorithm. \r\n<!--\r\nSummarize the solution and provide any necessary context needed to understand\r\nthe code change.\r\n-->\r\n", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/156/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/151", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/151/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/151/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/151/events", "html_url": "https://github.com/tower-rs/tower-http/pull/151", "id": 1027678064, "node_id": "PR_kwDOBxBwNc4tQ4Jg", "number": 151, "title": "Switch from pin-project to pin-project-lite", "user": {"login": "jplatte", "id": 951129, "node_id": "MDQ6VXNlcjk1MTEyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/951129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jplatte", "html_url": "https://github.com/jplatte", "followers_url": "https://api.github.com/users/jplatte/followers", "following_url": "https://api.github.com/users/jplatte/following{/other_user}", "gists_url": "https://api.github.com/users/jplatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/jplatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jplatte/subscriptions", "organizations_url": "https://api.github.com/users/jplatte/orgs", "repos_url": "https://api.github.com/users/jplatte/repos", "events_url": "https://api.github.com/users/jplatte/events{/privacy}", "received_events_url": "https://api.github.com/users/jplatte/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2", "html_url": "https://github.com/tower-rs/tower-http/milestone/2", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2/labels", "id": 6825913, "node_id": "MDk6TWlsZXN0b25lNjgyNTkxMw==", "number": 2, "title": "0.2.0", "description": "Next batch of breaking changes.", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2021-06-04T19:05:12Z", "updated_at": "2021-12-01T14:11:52Z", "due_on": null, "closed_at": "2021-12-01T14:11:52Z"}, "comments": 5, "created_at": "2021-10-15T18:06:28Z", "updated_at": "2021-11-16T15:30:41Z", "closed_at": "2021-11-16T15:29:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/151", "html_url": "https://github.com/tower-rs/tower-http/pull/151", "diff_url": "https://github.com/tower-rs/tower-http/pull/151.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/151.patch", "merged_at": "2021-11-16T15:29:18Z"}, "body": "Fixes #115.\r\n\r\nContains a decent amount of duplicated code, most of which can be removed once https://github.com/rust-lang/rust/issues/51085 is stable. It might be possible to reduce this duplication using a macro (but I'm not sure whether macros are allowed to take the place of entire match arms, rather than just patterns / expressions), if you want I'll look into that.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/151/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/151/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/150", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/150/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/150/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/150/events", "html_url": "https://github.com/tower-rs/tower-http/pull/150", "id": 1017713043, "node_id": "PR_kwDOBxBwNc4sxPjZ", "number": 150, "title": "Add `SetRequestId` and `PropagateRequestId` middleware", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2", "html_url": "https://github.com/tower-rs/tower-http/milestone/2", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2/labels", "id": 6825913, "node_id": "MDk6TWlsZXN0b25lNjgyNTkxMw==", "number": 2, "title": "0.2.0", "description": "Next batch of breaking changes.", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2021-06-04T19:05:12Z", "updated_at": "2021-12-01T14:11:52Z", "due_on": null, "closed_at": "2021-12-01T14:11:52Z"}, "comments": 1, "created_at": "2021-10-06T07:49:06Z", "updated_at": "2021-11-22T12:01:28Z", "closed_at": "2021-11-22T12:01:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/150", "html_url": "https://github.com/tower-rs/tower-http/pull/150", "diff_url": "https://github.com/tower-rs/tower-http/pull/150.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/150.patch", "merged_at": "2021-11-22T12:01:27Z"}, "body": "Fixes https://github.com/tower-rs/tower-http/issues/135\r\n\r\nExample usage:\r\n\r\n```rust\r\nuse http::{Request, Response, header::HeaderName};\r\nuse tower::{Service, ServiceExt, ServiceBuilder};\r\nuse tower_http::request_id::{\r\n    SetRequestIdLayer, PropagateRequestIdLayer, MakeRequestId, RequestId,\r\n};\r\nuse hyper::Body;\r\nuse std::sync::{Arc, atomic::{AtomicU64, Ordering}};\r\n\r\n// A `MakeRequestId` that increments an atomic counter\r\n#[derive(Clone, Default)]\r\nstruct MyMakeRequestId {\r\n    counter: Arc<AtomicU64>,\r\n}\r\n\r\nimpl MakeRequestId for MyMakeRequestId {\r\n    fn make_request_id<B>(&mut self, request: &Request<B>) -> Option<RequestId> {\r\n        let request_id = self.counter\r\n            .fetch_add(1, Ordering::SeqCst)\r\n            .to_string()\r\n            .parse()\r\n            .unwrap();\r\n\r\n        Some(RequestId::new(request_id))\r\n    }\r\n}\r\n\r\nlet x_request_id = HeaderName::from_static(\"x-request-id\");\r\n\r\nServiceBuilder::new()\r\n    // set `x-request-id` header on all requests\r\n    .layer(SetRequestIdLayer::new(\r\n        x_request_id.clone(),\r\n        MyMakeRequestId::default(),\r\n    ))\r\n    // propagate `x-request-id` headers from request to response\r\n    .layer(PropagateRequestIdLayer::new(x_request_id))\r\n    .service(handler);\r\n```\r\n\r\nOr slightly shorter using `ServiceBuilderExt`:\r\n\r\n```rust\r\nuse tower_http::ServiceBuilderExt;\r\n\r\nServiceBuilder::new()\r\n    .set_x_request_id(MyMakeRequestId::default())\r\n    .propagate_x_request_id()\r\n    .service(handler);\r\n```\r\n\r\nThese are two different middleware since they need to be applied around any logging you might have. The docs have an example.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/150/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/145", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/145/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/145/events", "html_url": "https://github.com/tower-rs/tower-http/pull/145", "id": 999494874, "node_id": "PR_kwDOBxBwNc4r5fnn", "number": 145, "title": "ServeDir & ServeFile last modified headers handling", "user": {"login": "zenria", "id": 1299045, "node_id": "MDQ6VXNlcjEyOTkwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1299045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zenria", "html_url": "https://github.com/zenria", "followers_url": "https://api.github.com/users/zenria/followers", "following_url": "https://api.github.com/users/zenria/following{/other_user}", "gists_url": "https://api.github.com/users/zenria/gists{/gist_id}", "starred_url": "https://api.github.com/users/zenria/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zenria/subscriptions", "organizations_url": "https://api.github.com/users/zenria/orgs", "repos_url": "https://api.github.com/users/zenria/repos", "events_url": "https://api.github.com/users/zenria/events{/privacy}", "received_events_url": "https://api.github.com/users/zenria/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-09-17T15:45:55Z", "updated_at": "2023-09-23T11:23:51Z", "closed_at": "2022-01-17T08:22:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/145", "html_url": "https://github.com/tower-rs/tower-http/pull/145", "diff_url": "https://github.com/tower-rs/tower-http/pull/145.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/145.patch", "merged_at": "2022-01-17T08:22:09Z"}, "body": "~Note: This PR also includes https://github.com/tower-rs/tower-http/pull/137, I will modify it when it will be merged~\r\n\r\n## Motivation\r\n\r\nServeDir & ServeFile should respect http caching best practice by setting `Last-Modified` response header and handling `If-Modified_since` & `If-Unmodified-Since` requests headers.\r\n\r\n## Solution\r\n\r\nThe `Last-Modified` header is added on responses of ServeFile & ServeDir. \r\n\r\n`If-Modified_since` & `If-Unmodified-Since` requests headers are handled so the service will respond `NOT_MODIFIED` or `PRECONDITION_FAILED` depending on values set into the headers.\r\n", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/145/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/145/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/133", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/133/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/133/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/133/events", "html_url": "https://github.com/tower-rs/tower-http/pull/133", "id": 983063781, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIyNzA2MzM4", "number": 133, "title": "Update tonic and prost in examples", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-30T18:10:49Z", "updated_at": "2021-08-30T18:24:39Z", "closed_at": "2021-08-30T18:24:36Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/133", "html_url": "https://github.com/tower-rs/tower-http/pull/133", "diff_url": "https://github.com/tower-rs/tower-http/pull/133.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/133.patch", "merged_at": "2021-08-30T18:24:36Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/133/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/129", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/129/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/129/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/129/events", "html_url": "https://github.com/tower-rs/tower-http/pull/129", "id": 980493723, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIwNzIwOTkw", "number": 129, "title": "fix: percent decode path segments", "user": {"login": "ttys3", "id": 41882455, "node_id": "MDQ6VXNlcjQxODgyNDU1", "avatar_url": "https://avatars.githubusercontent.com/u/41882455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ttys3", "html_url": "https://github.com/ttys3", "followers_url": "https://api.github.com/users/ttys3/followers", "following_url": "https://api.github.com/users/ttys3/following{/other_user}", "gists_url": "https://api.github.com/users/ttys3/gists{/gist_id}", "starred_url": "https://api.github.com/users/ttys3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ttys3/subscriptions", "organizations_url": "https://api.github.com/users/ttys3/orgs", "repos_url": "https://api.github.com/users/ttys3/repos", "events_url": "https://api.github.com/users/ttys3/events{/privacy}", "received_events_url": "https://api.github.com/users/ttys3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-08-26T17:42:57Z", "updated_at": "2021-08-26T19:49:55Z", "closed_at": "2021-08-26T19:49:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/129", "html_url": "https://github.com/tower-rs/tower-http/pull/129", "diff_url": "https://github.com/tower-rs/tower-http/pull/129.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/129.patch", "merged_at": "2021-08-26T19:49:55Z"}, "body": "## Motivation\r\n\r\n`ServerDir` does not do url decode.\r\n\r\nWhen I try to GET a uri like `/\u4e2d\u6587\u6587\u4ef6.txt`\r\n\r\nthe user agent will send `/%E4%B8%AD%E6%96%87%E6%96%87%E4%BB%B6.txt` , and `ServerDir` just try to open a file named `/%E4%B8%AD%E6%96%87%E6%96%87%E4%BB%B6.txt`, cause a `404` file not found error.\r\n\r\nrelated issue  https://github.com/tower-rs/tower-http/issues/114\r\n\r\n## Solution\r\n\r\ndecode uri path before open it as an file path\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/129/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/112", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/112/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/112/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/112/events", "html_url": "https://github.com/tower-rs/tower-http/pull/112", "id": 946397436, "node_id": "MDExOlB1bGxSZXF1ZXN0NjkxNTc3NDgy", "number": 112, "title": "Add `Cors` for setting CORS headers", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/3", "html_url": "https://github.com/tower-rs/tower-http/milestone/3", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/3/labels", "id": 7337635, "node_id": "MI_kwDOBxBwNc4Ab_aj", "number": 3, "title": "0.1.2", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2021-11-08T13:41:07Z", "updated_at": "2021-11-13T20:27:50Z", "due_on": null, "closed_at": "2021-11-13T20:27:50Z"}, "comments": 14, "created_at": "2021-07-16T15:32:21Z", "updated_at": "2021-11-13T19:36:17Z", "closed_at": "2021-11-13T19:36:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/112", "html_url": "https://github.com/tower-rs/tower-http/pull/112", "diff_url": "https://github.com/tower-rs/tower-http/pull/112.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/112.patch", "merged_at": "2021-11-13T19:36:16Z"}, "body": "Example usage:\r\n\r\n```rust\r\nuse http::{Request, Response, Method, header};\r\nuse hyper::Body;\r\nuse tower::{ServiceBuilder, ServiceExt, Service};\r\nuse tower_http::cors::{CorsLayer, Any};\r\nuse std::convert::Infallible;\r\n\r\nasync fn handle(request: Request<Body>) -> Result<Response<Body>, Infallible> {\r\n    Ok(Response::new(Body::empty()))\r\n}\r\n\r\nlet cors = CorsLayer::new()\r\n    .allow_methods(vec![Method::GET, Method::POST, Method::OPTIONS])\r\n    .allow_origin(Any)\r\n    .allow_credentials(false);\r\n\r\nlet mut service = ServiceBuilder::new()\r\n    .layer(cors)\r\n    .service_fn(handle);\r\n\r\nlet request = Request::builder()\r\n    .header(header::ORIGIN, \"https://example.com\")\r\n    .body(Body::empty())\r\n    .unwrap();\r\n\r\nlet response = service\r\n    .ready()\r\n    .await?\r\n    .call(request)\r\n    .await?;\r\n\r\nassert_eq!(\r\n    response.headers().get(header::ACCESS_CONTROL_ALLOW_ORIGIN).unwrap(),\r\n    \"*\",\r\n);\r\n```\r\n\r\nImplementation is based on [`CorsMiddleware`](https://docs.rs/tide/0.16.0/tide/security/struct.CorsMiddleware.html#method.allow_credentials) from tide.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/112/reactions", "total_count": 20, "+1": 12, "-1": 0, "laugh": 0, "hooray": 2, "confused": 0, "heart": 6, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/112/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/111", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/111/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/111/events", "html_url": "https://github.com/tower-rs/tower-http/pull/111", "id": 935717547, "node_id": "MDExOlB1bGxSZXF1ZXN0NjgyNTgzOTYw", "number": 111, "title": "Release 0.1.1", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734115990, "node_id": "MDU6TGFiZWwyNzM0MTE1OTkw", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/T-release", "name": "T-release", "color": "bfd4f2", "default": false, "description": "Topic: releases"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-02T12:18:19Z", "updated_at": "2021-07-02T12:38:30Z", "closed_at": "2021-07-02T12:38:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/111", "html_url": "https://github.com/tower-rs/tower-http/pull/111", "diff_url": "https://github.com/tower-rs/tower-http/pull/111.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/111.patch", "merged_at": "2021-07-02T12:38:28Z"}, "body": "# 0.1.1 (July 2, 2021)\r\n\r\n- Add example of using `SharedClassifier`.\r\n- Add `StatusInRangeAsFailures` which is a response classifier that considers\r\n  responses with status code in a certain range as failures. Useful for HTTP\r\n  clients where both server errors (5xx) and client errors (4xx) are considered\r\n  failures.\r\n- Implement `Debug` for `NeverClassifyEos`.\r\n- Update iri-string to 0.4.\r\n- Add `ClassifyResponse::map_failure_class` and `ClassifyEos::map_failure_class`\r\n  for transforming the failure classification using a function.\r\n- Clarify exactly when each `Trace` callback is called.\r\n- Add `AddAuthorizationLayer` for setting the `Authorization` header on\r\n  requests.\r\n\r\n## Breaking changes\r\n\r\nNone.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/111/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/110", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/110/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/110/events", "html_url": "https://github.com/tower-rs/tower-http/pull/110", "id": 925185350, "node_id": "MDExOlB1bGxSZXF1ZXN0NjczNzEzMjAw", "number": 110, "title": "Update iri-string", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-18T20:29:08Z", "updated_at": "2021-06-19T14:47:49Z", "closed_at": "2021-06-19T14:47:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/110", "html_url": "https://github.com/tower-rs/tower-http/pull/110", "diff_url": "https://github.com/tower-rs/tower-http/pull/110.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/110.patch", "merged_at": "2021-06-19T14:47:47Z"}, "body": "Updates iri-string to the latest version. Among other things brings in the newest version of nom.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/110/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/110/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/106", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/106/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/106/events", "html_url": "https://github.com/tower-rs/tower-http/pull/106", "id": 911462304, "node_id": "MDExOlB1bGxSZXF1ZXN0NjYxNzM1NjI3", "number": 106, "title": "Add `ServiceBuilderExt`", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734123947, "node_id": "MDU6TGFiZWwyNzM0MTIzOTQ3", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-util", "name": "A-new-util", "color": "f7e101", "default": false, "description": "Area: new utility proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2", "html_url": "https://github.com/tower-rs/tower-http/milestone/2", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/2/labels", "id": 6825913, "node_id": "MDk6TWlsZXN0b25lNjgyNTkxMw==", "number": 2, "title": "0.2.0", "description": "Next batch of breaking changes.", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 34, "state": "closed", "created_at": "2021-06-04T19:05:12Z", "updated_at": "2021-12-01T14:11:52Z", "due_on": null, "closed_at": "2021-12-01T14:11:52Z"}, "comments": 1, "created_at": "2021-06-04T12:37:45Z", "updated_at": "2021-11-18T20:10:15Z", "closed_at": "2021-11-18T20:01:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/106", "html_url": "https://github.com/tower-rs/tower-http/pull/106", "diff_url": "https://github.com/tower-rs/tower-http/pull/106.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/106.patch", "merged_at": "2021-11-18T20:01:02Z"}, "body": "Adds `ServiceBuilderExt` which adds methods to `tower::ServiceBuilder`\r\nfor adding middleware from tower-http. Figured this might be a nice\r\nconvenience to have.\r\n\r\nNot all middleware are available since they require some specific\r\nconfiguration. For those I think adding the layer explicitly is better.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/106/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/99", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/99/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/99/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/99/events", "html_url": "https://github.com/tower-rs/tower-http/pull/99", "id": 905938357, "node_id": "MDExOlB1bGxSZXF1ZXN0NjU2OTgxNjI1", "number": 99, "title": "Remove one crate keyword so we can release", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-28T19:30:49Z", "updated_at": "2021-05-28T19:32:43Z", "closed_at": "2021-05-28T19:32:40Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/99", "html_url": "https://github.com/tower-rs/tower-http/pull/99", "diff_url": "https://github.com/tower-rs/tower-http/pull/99.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/99.patch", "merged_at": "2021-05-28T19:32:40Z"}, "body": "Apparently crates.io allows at most 5 keywords. This removes\r\n\"non-blocking\".", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/99/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/99/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/98", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/98/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/98/events", "html_url": "https://github.com/tower-rs/tower-http/pull/98", "id": 905926783, "node_id": "MDExOlB1bGxSZXF1ZXN0NjU2OTcwODU0", "number": 98, "title": "Fix releasing 0.1.0", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-28T19:21:15Z", "updated_at": "2021-05-28T19:26:44Z", "closed_at": "2021-05-28T19:26:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/98", "html_url": "https://github.com/tower-rs/tower-http/pull/98", "diff_url": "https://github.com/tower-rs/tower-http/pull/98.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/98.patch", "merged_at": "2021-05-28T19:26:41Z"}, "body": "Forgot this, otherwise `cargo publish` complains.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/98/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/98/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/86", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/86/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/86/events", "html_url": "https://github.com/tower-rs/tower-http/pull/86", "id": 875273460, "node_id": "MDExOlB1bGxSZXF1ZXN0NjI5NjQ5MzQy", "number": 86, "title": "Add `InFlightRequests` - The first metrics middleware", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-04T09:22:28Z", "updated_at": "2021-05-21T09:51:08Z", "closed_at": "2021-05-21T09:51:05Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/86", "html_url": "https://github.com/tower-rs/tower-http/pull/86", "diff_url": "https://github.com/tower-rs/tower-http/pull/86.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/86.patch", "merged_at": "2021-05-21T09:51:05Z"}, "body": "Part of https://github.com/tower-rs/tower-http/issues/57\r\n\r\nI think the two killer features of tower-http is going to be easy setup of tracing/logging and metrics. Those are non-trivial pieces of functionality that pretty much everyone needs. Now that the [tracing middleware is in](https://github.com/tower-rs/tower-http/pull/77) I would like to start thinking about metrics.\r\n\r\nMy initial goal is to cover these metrics:\r\n\r\n- Traffic, requests per second/minute\r\n- Number of in flight requests\r\n- Error rate\r\n- Throughput, bytes per second/minute\r\n\r\nEach of those will be a separate middleware, starting with in-flight requests as I think its the simplest.\r\n\r\nThe module structure I'm thinking is:\r\n\r\n- `tower_http::metrics` all middlewares related to metrics are here\r\n- The `metrics` module exposes the most important pieces, so `tower_http::metrics::{InFlightRequests, InFlightRequestsLayer}` and so on when we have more middlewares\r\n- Response futures, bodies and other lower level types are in `tower_http::metrics::in_flight_requests`.\r\n\r\nThis is similar to how `std::collections` do it.\r\n\r\nExample usage of `InFlightRequests`:\r\n\r\n```rust\r\nuse tower::{Service, ServiceExt, ServiceBuilder};\r\nuse tower_http::metrics::InFlightRequestsLayer;\r\nuse http::{Request, Response};\r\nuse hyper::Body;\r\nuse std::{time::Duration, convert::Infallible};\r\n\r\nasync fn handle(req: Request<Body>) -> Result<Response<Body>, Infallible> {\r\n    // ...\r\n}\r\n\r\nasync fn update_in_flight_requests_metric(count: usize) {\r\n    // ...\r\n}\r\n\r\n// Create a `Layer` with an associated counter.\r\nlet (in_flight_requests_layer, counter) = InFlightRequestsLayer::pair();\r\n\r\n// Spawn a task that will receive the number of in-flight requests every 10 seconds.\r\ntokio::spawn(\r\n    counter.run_emitter(Duration::from_secs(10), |count| async move {\r\n        update_in_flight_requests_metric(count).await;\r\n    }),\r\n);\r\n\r\nlet mut service = ServiceBuilder::new()\r\n    // Keep track of the number of in-flight requests. This will increment and decrement\r\n    // `counter` automatically.\r\n    .layer(in_flight_requests_layer)\r\n    .service_fn(handle);\r\n\r\n// Call the service.\r\nlet response = service\r\n    .ready()\r\n    .await?\r\n    .call(Request::new(Body::empty()))\r\n    .await?;\r\n```\r\n\r\nI'm also considering making a `tower-http-metrics` crate that provides integration between `tower-http` and the excellent [`metrics`](https://crates.io/crates/metrics) which we use at Embark.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/86/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/85", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/85/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/85/events", "html_url": "https://github.com/tower-rs/tower-http/pull/85", "id": 852480651, "node_id": "MDExOlB1bGxSZXF1ZXN0NjEwNzI1NzIw", "number": 85, "title": "More easily mark multiple headers as sensitive", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734096719, "node_id": "MDU6TGFiZWwyNzM0MDk2NzE5", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: A PR with an enhancement or a proposed on in an issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 1, "created_at": "2021-04-07T14:38:42Z", "updated_at": "2021-05-27T20:42:51Z", "closed_at": "2021-05-27T20:42:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/85", "html_url": "https://github.com/tower-rs/tower-http/pull/85", "diff_url": "https://github.com/tower-rs/tower-http/pull/85.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/85.patch", "merged_at": "2021-05-27T20:42:48Z"}, "body": "Today I had to mark a list of headers as sensitive. That was quite tedious and required applying the middleware multiple times with different headers. I think this case is quite common so I think it makes more sense to construct these middlewares with an `IntoIterator<Item = HeaderName>`.\r\n\r\nUsers who just want to mark one header can use `std::iter::once(header)`.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/85/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/85/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/82", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/82/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/82/events", "html_url": "https://github.com/tower-rs/tower-http/pull/82", "id": 837179838, "node_id": "MDExOlB1bGxSZXF1ZXN0NTk3NTYwNTM5", "number": 82, "title": "Disable compression for gRPC and add tonic streaming example", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734114124, "node_id": "MDU6TGFiZWwyNzM0MTE0MTI0", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 0, "created_at": "2021-03-21T20:49:07Z", "updated_at": "2021-04-27T18:49:00Z", "closed_at": "2021-04-27T18:48:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/82", "html_url": "https://github.com/tower-rs/tower-http/pull/82", "diff_url": "https://github.com/tower-rs/tower-http/pull/82.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/82.patch", "merged_at": "2021-04-27T18:48:56Z"}, "body": "This adds a server streaming example to the tonic example. Adding that made me aware of https://github.com/tower-rs/tower-http/issues/81.\r\n\r\nAfter much debugging I most admit I don't fully understand why compression breaks gRPC streams. My best idea is that async-compression changes the body chunks in ways that are incompatible with gRPC. This is also hinted at in the [gRPC core document on compression](https://grpc.github.io/grpc/core/md_doc_compression.html) where it says:\r\n\r\n> The compression supported by gRPC acts at the individual message level\r\n\r\nIf you don't compress the whole body stream but instead compress (and decompress) each individual chunk yielded by `poll_data` then everything works.\r\n\r\nThe solution I have implemented is to simply detect gRPC responses and don't compress them, even if the client claims to accept compression. As compression part of the gRPC protocol that is probably a better place to implement it.\r\n\r\nFixes https://github.com/tower-rs/tower-http/issues/81", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/82/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/82/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/79", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/79/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/79/events", "html_url": "https://github.com/tower-rs/tower-http/pull/79", "id": 834765561, "node_id": "MDExOlB1bGxSZXF1ZXN0NTk1NTI1MzQ3", "number": 79, "title": "Add `FollowRedirect` middleware", "user": {"login": "tesaguri", "id": 16436551, "node_id": "MDQ6VXNlcjE2NDM2NTUx", "avatar_url": "https://avatars.githubusercontent.com/u/16436551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesaguri", "html_url": "https://github.com/tesaguri", "followers_url": "https://api.github.com/users/tesaguri/followers", "following_url": "https://api.github.com/users/tesaguri/following{/other_user}", "gists_url": "https://api.github.com/users/tesaguri/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesaguri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesaguri/subscriptions", "organizations_url": "https://api.github.com/users/tesaguri/orgs", "repos_url": "https://api.github.com/users/tesaguri/repos", "events_url": "https://api.github.com/users/tesaguri/events{/privacy}", "received_events_url": "https://api.github.com/users/tesaguri/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-18T12:45:49Z", "updated_at": "2021-04-04T03:45:07Z", "closed_at": "2021-04-03T16:48:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/79", "html_url": "https://github.com/tower-rs/tower-http/pull/79", "diff_url": "https://github.com/tower-rs/tower-http/pull/79.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/79.patch", "merged_at": "2021-04-03T16:48:30Z"}, "body": "This is a middleware that retries requests to follow HTTP redirections.\r\n\r\nThis includes `Policy` trait to customize behavior of the middleware, which is heavily inspired by [`reqwest::redirect::Policy`].\r\n\r\n`Policy` also has an optional method `clone_body` that tries to clone a request body, like [`tower::retry::Policy::clone_request`]. But even if the body cannot be cloned, `FollowRedirect` uses `<ReqBody as Default>::default` when `<ReqBody as http_body::Body>::size_hint` returns zero, so that it can handle common `GET` requests without `clone_body`.\r\n\r\nThe API proposed here is a proof of concept to some extent, and it is fine if this is not fully merged at once (~2fe3fea1e3c2829cbf0474cb2b36194fd289f287...22212ba78c1f6585289abaeaa54b3bbaf43c01bd~ ~3f8deda5638a2e28c2570855e8d1d3db0d65fcb5...22212ba78c1f6585289abaeaa54b3bbaf43c01bd~ 3f8deda5638a2e28c2570855e8d1d3db0d65fcb5...0e6a949f3793c8cfd5ba5b4dafb7dbec508ee3dc is optional in particular).\r\n\r\nFixes #78.\r\n\r\n[`reqwest::redirect::Policy`]: https://docs.rs/reqwest/0.11.2/reqwest/redirect/struct.Policy.html\r\n[`tower::retry::Policy::clone_request`]: https://docs.rs/tower/0.4.6/tower/retry/trait.Policy.html#method.clone_request", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/79/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/79/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/77", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/77/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/77/events", "html_url": "https://github.com/tower-rs/tower-http/pull/77", "id": 827768119, "node_id": "MDExOlB1bGxSZXF1ZXN0NTg5NjQ1ODM4", "number": 77, "title": "`Trace` middleware", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-03-10T13:48:53Z", "updated_at": "2021-04-23T20:38:14Z", "closed_at": "2021-04-23T20:38:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/77", "html_url": "https://github.com/tower-rs/tower-http/pull/77", "diff_url": "https://github.com/tower-rs/tower-http/pull/77.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/77.patch", "merged_at": "2021-04-23T20:38:10Z"}, "body": "This adds a quite comprehensive `Trace` middleware. We have used it for some time at Embark for both servers and clients and its been working well.\r\n\r\nI've spent put a lot of effort into making it easy to get started with while also providing deep customization.\r\n\r\nI'm sorry for the size of this PR but most of it is plumbing like builder methods. The actual service/future/body implementation isn't that big.\r\n\r\nBasic usage:\r\n\r\n```rust\r\nlet service = ServiceBuilder::new()\r\n    .layer(TraceLayer::new_for_http())\r\n    .service_fn(handle);\r\n```\r\n\r\nOutput with default tracing subscriber:\r\n\r\n```\r\nMar 05 20:50:28.523 DEBUG request{method=GET path=\"/foo\"}: tower_http::trace::on_request: started processing request\r\nMar 05 20:50:28.524 DEBUG request{method=GET path=\"/foo\"}: tower_http::trace::on_response: finished processing request latency=1 ms status=200\r\n```\r\n\r\nUsing a gRPC response classifier:\r\n\r\n```rust\r\nlet service = ServiceBuilder::new()\r\n    .layer(TraceLayer::new_for_grpc())\r\n    .service_fn(handle);\r\n```\r\n\r\nCustom classifiers are of course also supported.\r\n\r\nEvery part of the output can be customized:\r\n\r\n```rust\r\nlet service = ServiceBuilder::new()\r\n    .layer(\r\n        TraceLayer::new_for_http()\r\n            .make_span_with(|request: &Request<Body>| {\r\n                tracing::debug_span!(\"http-request\")\r\n            })\r\n            .on_request(|request: &Request<Body>| {\r\n                tracing::debug!(\"started {} {}\", request.method(), request.uri().path())\r\n            })\r\n            .on_response(|response: &Response<Body>, latency: Duration| {\r\n                tracing::debug!(\"response generated in {:?}\", latency)\r\n            })\r\n            .on_body_chunk(|chunk: &Bytes, latency: Duration| {\r\n                tracing::debug!(\"sending {} bytes\", chunk.len())\r\n            })\r\n            .on_eos(|trailers: Option<&HeaderMap>, stream_duration: Duration| {\r\n                tracing::debug!(\"stream closed after {:?}\", stream_duration)\r\n            })\r\n            .on_failure(|error: StatusCode, latency: Duration| {\r\n                tracing::debug!(\"something went wrong\")\r\n            })\r\n    )\r\n    .service_fn(handle);\r\n```\r\n\r\nYou can probably imagine this leads to `Trace` having quite a few generic types \ud83d\ude15\r\n\r\nIf you only want to customize a few things the default behaviours have builder methods:\r\n\r\n```rust\r\nlet service = ServiceBuilder::new()\r\n    .layer(\r\n        TraceLayer::new_for_http()\r\n            .make_span_with(\r\n                DefaultMakeSpan::new().include_headers(true)\r\n            )\r\n            .on_response(\r\n                DefaultOnResponse::new()\r\n                    .level(Level::INFO)\r\n                    .latency_unit(LatencyUnit::Micros)\r\n            )\r\n            // ...\r\n    )\r\n    .service_fn(handle);\r\n```\r\n\r\nFixes https://github.com/tower-rs/tower-http/issues/65", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/77/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/77/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/72", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/72/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/72/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/72/events", "html_url": "https://github.com/tower-rs/tower-http/pull/72", "id": 817302988, "node_id": "MDExOlB1bGxSZXF1ZXN0NTgwODE3NzEx", "number": 72, "title": "Tonic example", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734114124, "node_id": "MDU6TGFiZWwyNzM0MTE0MTI0", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 0, "created_at": "2021-02-26T12:06:21Z", "updated_at": "2021-03-21T16:43:30Z", "closed_at": "2021-03-21T16:43:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/72", "html_url": "https://github.com/tower-rs/tower-http/pull/72", "diff_url": "https://github.com/tower-rs/tower-http/pull/72.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/72.patch", "merged_at": "2021-03-21T16:43:26Z"}, "body": "Fixes #63 ", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/72/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/72/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/70", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/70/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/70/events", "html_url": "https://github.com/tower-rs/tower-http/pull/70", "id": 813914092, "node_id": "MDExOlB1bGxSZXF1ZXN0NTc3OTgyMzUx", "number": 70, "title": "Add `RequireAuthorization` middleware", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-22T22:19:52Z", "updated_at": "2021-05-20T08:14:31Z", "closed_at": "2021-05-20T08:14:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/70", "html_url": "https://github.com/tower-rs/tower-http/pull/70", "diff_url": "https://github.com/tower-rs/tower-http/pull/70.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/70.patch", "merged_at": "2021-05-20T08:14:25Z"}, "body": "Fixes #58 ", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/70/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/70/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/69", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/69/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/69/events", "html_url": "https://github.com/tower-rs/tower-http/pull/69", "id": 811978615, "node_id": "MDExOlB1bGxSZXF1ZXN0NTc2NDIwNjEy", "number": 69, "title": "Warp example", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734114124, "node_id": "MDU6TGFiZWwyNzM0MTE0MTI0", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/T-docs", "name": "T-docs", "color": "bfd4f2", "default": false, "description": "Topic: documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 0, "created_at": "2021-02-19T12:20:53Z", "updated_at": "2021-02-25T21:21:30Z", "closed_at": "2021-02-25T21:21:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/69", "html_url": "https://github.com/tower-rs/tower-http/pull/69", "diff_url": "https://github.com/tower-rs/tower-http/pull/69.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/69.patch", "merged_at": "2021-02-25T21:21:25Z"}, "body": "Adds a little key/value store API built with warp and extended with tower + tower-http.\r\n\r\nFixes https://github.com/tower-rs/tower-http/issues/62", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/69/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/69/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/67", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/67/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/67/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/67/events", "html_url": "https://github.com/tower-rs/tower-http/pull/67", "id": 811876903, "node_id": "MDExOlB1bGxSZXF1ZXN0NTc2MzM1NDky", "number": 67, "title": "Add `SetRequestHeader`", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 0, "created_at": "2021-02-19T09:55:59Z", "updated_at": "2021-02-24T22:52:18Z", "closed_at": "2021-02-24T22:39:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/67", "html_url": "https://github.com/tower-rs/tower-http/pull/67", "diff_url": "https://github.com/tower-rs/tower-http/pull/67.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/67.patch", "merged_at": "2021-02-24T22:39:37Z"}, "body": "Exactly the same as `SetResponseHeader` but modifies the request instead. Useful on clients for example for setting `User-Agent`.\r\n\r\nAs it shares `MakeHeaderValue` and `InsertHeaderMode` with `SetResponseHeader` I moved these two middlewares into a `set_header` module.\r\n\r\nFixes https://github.com/tower-rs/tower-http/issues/66", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/67/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/67/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/64", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/64/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/64/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/64/events", "html_url": "https://github.com/tower-rs/tower-http/pull/64", "id": 807189507, "node_id": "MDExOlB1bGxSZXF1ZXN0NTcyNDc5NTYz", "number": 64, "title": "Add `MapRequestBody` and `MapResponseBody`", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-12T12:16:43Z", "updated_at": "2021-02-12T20:17:32Z", "closed_at": "2021-02-12T20:17:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/64", "html_url": "https://github.com/tower-rs/tower-http/pull/64", "diff_url": "https://github.com/tower-rs/tower-http/pull/64.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/64.patch", "merged_at": "2021-02-12T20:17:26Z"}, "body": "Fixes https://github.com/tower-rs/tower-http/issues/61", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/64/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/64/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/52", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/52/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/52/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/52/events", "html_url": "https://github.com/tower-rs/tower-http/pull/52", "id": 805057928, "node_id": "MDExOlB1bGxSZXF1ZXN0NTcwNzI0ODk5", "number": 52, "title": "Fix specification of algorithm featues of `async-compression`", "user": {"login": "tesaguri", "id": 16436551, "node_id": "MDQ6VXNlcjE2NDM2NTUx", "avatar_url": "https://avatars.githubusercontent.com/u/16436551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesaguri", "html_url": "https://github.com/tesaguri", "followers_url": "https://api.github.com/users/tesaguri/followers", "following_url": "https://api.github.com/users/tesaguri/following{/other_user}", "gists_url": "https://api.github.com/users/tesaguri/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesaguri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesaguri/subscriptions", "organizations_url": "https://api.github.com/users/tesaguri/orgs", "repos_url": "https://api.github.com/users/tesaguri/repos", "events_url": "https://api.github.com/users/tesaguri/events{/privacy}", "received_events_url": "https://api.github.com/users/tesaguri/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-10T01:01:18Z", "updated_at": "2021-02-10T01:12:14Z", "closed_at": "2021-02-10T01:12:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/52", "html_url": "https://github.com/tower-rs/tower-http/pull/52", "diff_url": "https://github.com/tower-rs/tower-http/pull/52.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/52.patch", "merged_at": "2021-02-10T01:12:14Z"}, "body": "The algorithm features are already enabled by `{de,}compression-*` features individually and should not be enabled unconditionally, as doing that spoils the whole point of the feature set.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/52/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/52/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/49", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/49/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/49/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/49/events", "html_url": "https://github.com/tower-rs/tower-http/pull/49", "id": 802748764, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY4ODIyMzcx", "number": 49, "title": "Add response classification", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734123947, "node_id": "MDU6TGFiZWwyNzM0MTIzOTQ3", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-util", "name": "A-new-util", "color": "f7e101", "default": false, "description": "Area: new utility proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 6, "created_at": "2021-02-06T17:30:53Z", "updated_at": "2021-03-08T20:00:49Z", "closed_at": "2021-03-08T19:58:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/49", "html_url": "https://github.com/tower-rs/tower-http/pull/49", "diff_url": "https://github.com/tower-rs/tower-http/pull/49.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/49.patch", "merged_at": "2021-03-08T19:58:54Z"}, "body": "The response classification in https://github.com/tower-rs/tower-http/pull/40 didn't work because it didn't properly support gRPC. I have given it some more thought and now have something that does support gRPC. Its inspired by the implementation in [linkerd-proxy](https://github.com/linkerd/linkerd2-proxy/blob/main/linkerd/http-classify/src/lib.rs).\r\n\r\nThis is still a draft since I haven't implemented all of the `Trace` middleware. At this point its just a proof of concept that shows the classification stuff used in a middleware.\r\n\r\n@hawkw Please have a look and let me know what you think. If you think the classification could work then I'll go ahead and implement the remaining pieces of the middleware.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/49/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/49/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/47", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/47/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/47/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/47/events", "html_url": "https://github.com/tower-rs/tower-http/pull/47", "id": 797687069, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY0NjM2Njgz", "number": 47, "title": "Remove duplication between compression and decompression", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734125608, "node_id": "MDU6TGFiZWwyNzM0MTI1NjA4", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/C-cleanup", "name": "C-cleanup", "color": "f5f1fd", "default": false, "description": "Category: PRs that clean code up or issues documenting cleanup."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 0, "created_at": "2021-01-31T11:16:31Z", "updated_at": "2021-03-08T19:16:02Z", "closed_at": "2021-03-08T19:15:58Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/47", "html_url": "https://github.com/tower-rs/tower-http/pull/47", "diff_url": "https://github.com/tower-rs/tower-http/pull/47.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/47.patch", "merged_at": "2021-03-08T19:15:58Z"}, "body": "While technically this is a net increase in code there are few things that could be upstreamed to http-body which would bring the SLOC down.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/47/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/47/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/45", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/45/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/45/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/45/events", "html_url": "https://github.com/tower-rs/tower-http/pull/45", "id": 797503875, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY0NDkwMzk0", "number": 45, "title": "Add `ServeFile` and `ServeDir`", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 1, "created_at": "2021-01-30T18:51:04Z", "updated_at": "2021-04-27T20:16:43Z", "closed_at": "2021-04-27T20:16:37Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/45", "html_url": "https://github.com/tower-rs/tower-http/pull/45", "diff_url": "https://github.com/tower-rs/tower-http/pull/45.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/45.patch", "merged_at": "2021-04-27T20:16:37Z"}, "body": "Service that serves a file and guesses the mime type with https://crates.io/crates/mime_guess.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/45/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/45/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/44", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/44/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/44/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/44/events", "html_url": "https://github.com/tower-rs/tower-http/pull/44", "id": 797451767, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY0NDQ3NDI3", "number": 44, "title": "Add `Redirect` service", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-30T15:57:14Z", "updated_at": "2021-02-09T23:53:13Z", "closed_at": "2021-02-09T23:22:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/44", "html_url": "https://github.com/tower-rs/tower-http/pull/44", "diff_url": "https://github.com/tower-rs/tower-http/pull/44.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/44.patch", "merged_at": "2021-02-09T23:22:08Z"}, "body": "Little utility service that redirects all requests.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/44/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/44/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/43", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/43/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/43/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/43/events", "html_url": "https://github.com/tower-rs/tower-http/pull/43", "id": 796939752, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY0MDMyODQ2", "number": 43, "title": "Add some docs and tests", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-29T14:46:50Z", "updated_at": "2021-02-09T23:38:13Z", "closed_at": "2021-02-09T23:36:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/43", "html_url": "https://github.com/tower-rs/tower-http/pull/43", "diff_url": "https://github.com/tower-rs/tower-http/pull/43.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/43.patch", "merged_at": "2021-02-09T23:36:25Z"}, "body": "- Initial root module docs.\r\n- Docs and tests for `AddExtension`.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/43/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/43/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/41", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/41/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/41/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/41/events", "html_url": "https://github.com/tower-rs/tower-http/pull/41", "id": 794618468, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYyMTA0OTQy", "number": 41, "title": "Add `Decompression` middleware", "user": {"login": "tesaguri", "id": 16436551, "node_id": "MDQ6VXNlcjE2NDM2NTUx", "avatar_url": "https://avatars.githubusercontent.com/u/16436551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesaguri", "html_url": "https://github.com/tesaguri", "followers_url": "https://api.github.com/users/tesaguri/followers", "following_url": "https://api.github.com/users/tesaguri/following{/other_user}", "gists_url": "https://api.github.com/users/tesaguri/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesaguri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesaguri/subscriptions", "organizations_url": "https://api.github.com/users/tesaguri/orgs", "repos_url": "https://api.github.com/users/tesaguri/repos", "events_url": "https://api.github.com/users/tesaguri/events{/privacy}", "received_events_url": "https://api.github.com/users/tesaguri/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-26T22:50:59Z", "updated_at": "2021-01-29T15:15:43Z", "closed_at": "2021-01-29T15:15:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/41", "html_url": "https://github.com/tower-rs/tower-http/pull/41", "diff_url": "https://github.com/tower-rs/tower-http/pull/41.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/41.patch", "merged_at": "2021-01-29T15:15:28Z"}, "body": "This is an HTTP client middleware that sets the `Accept-Encoding` header to requests and transparently decompresses the response body based on the `Content-Encoding` header.\r\n\r\nOriginally, I was about to release it as a [library][tower-http-compression], but then I realized that #33 was going to add a compression middleware, so I thought that this should live under `tower-http` rather than a separate library.\r\n\r\n[tower-http-compression]: https://github.com/tesaguri/tower-http-compression\r\n\r\nSince this was developed independently of #37, there are slight differences in API design as shown below, but I'd love to resolve the inconsistencies based on feedback.\r\n\r\n- ~This uses `pin-project-lite` because I thought it to be preferable to `pin-project` since `hyper` has recently migrated to it, but I won't insist on that if you are going to add a functionality that requires `pin-project`.~\r\n- ~This uses a custom error type in response body to let users inspect errors from the underlying body type, but the same purpose could be achieved with `Box<dyn Error>` and downcasting as well.~ Edit: #37 has updated to use a custom error.\r\n- No compression algorithm is enabled by default, and users have to pick crate features to make it actually work. This is to reduce compile time in some use cases.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/41/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/41/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/39", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/39/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/39/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/39/events", "html_url": "https://github.com/tower-rs/tower-http/pull/39", "id": 794580562, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYyMDczMTUy", "number": 39, "title": "Add `SetResponseHeader` middleware", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2734094156, "node_id": "MDU6TGFiZWwyNzM0MDk0MTU2", "url": "https://api.github.com/repos/tower-rs/tower-http/labels/A-new-middleware", "name": "A-new-middleware", "color": "f7e101", "default": false, "description": "Area: new middleware proposals"}], "state": "closed", "locked": false, "assignee": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1", "html_url": "https://github.com/tower-rs/tower-http/milestone/1", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/milestones/1/labels", "id": 6425874, "node_id": "MDk6TWlsZXN0b25lNjQyNTg3NA==", "number": 1, "title": "0.1.0", "description": "", "creator": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 25, "state": "closed", "created_at": "2021-02-12T10:18:56Z", "updated_at": "2021-06-04T19:05:04Z", "due_on": null, "closed_at": "2021-06-04T19:05:04Z"}, "comments": 5, "created_at": "2021-01-26T21:40:16Z", "updated_at": "2021-02-19T08:39:23Z", "closed_at": "2021-02-19T08:39:18Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/39", "html_url": "https://github.com/tower-rs/tower-http/pull/39", "diff_url": "https://github.com/tower-rs/tower-http/pull/39.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/39.patch", "merged_at": "2021-02-19T08:39:18Z"}, "body": "We use this to set `X-Request-Id` with something like:\r\n\r\n```rust\r\n.layer(\r\n    SetResponseHeaderLayer::new(\r\n        HeaderName::from_static(\"x-request-id\"),\r\n        |_res: &Response<Body>| HeaderValue::from_str(&Uuid::new_v4().to_string()).unwrap(),\r\n    )\r\n    .override_existing(false),\r\n);\r\n\r\n// or even\r\n\r\n.layer(\r\n    SetResponseHeaderLayer::new(\r\n        HeaderName::from_static(\"content-type\"),\r\n        HeaderValue::from_static(\"text/html\"),\r\n    )\r\n    .override_existing(false),\r\n);\r\n```", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/39/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/39/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/38", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/38/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/38/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/38/events", "html_url": "https://github.com/tower-rs/tower-http/pull/38", "id": 794578681, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYyMDcxNTcw", "number": 38, "title": "Add `PropagateHeader` middleware", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-01-26T21:36:56Z", "updated_at": "2021-02-09T22:36:59Z", "closed_at": "2021-02-09T22:36:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/38", "html_url": "https://github.com/tower-rs/tower-http/pull/38", "diff_url": "https://github.com/tower-rs/tower-http/pull/38.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/38.patch", "merged_at": "2021-02-09T22:36:55Z"}, "body": "Another small one. Propagate a header from the request to the response.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/38/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/38/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/37", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/37/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/37/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/37/events", "html_url": "https://github.com/tower-rs/tower-http/pull/37", "id": 794575747, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYyMDY5MDk0", "number": 37, "title": "Add `Compression` middleware", "user": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-01-26T21:31:53Z", "updated_at": "2021-01-29T19:43:37Z", "closed_at": "2021-01-29T19:43:33Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/37", "html_url": "https://github.com/tower-rs/tower-http/pull/37", "diff_url": "https://github.com/tower-rs/tower-http/pull/37.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/37.patch", "merged_at": "2021-01-29T19:43:32Z"}, "body": "Suggested by @LucioFranco in https://github.com/tower-rs/tower-http/pull/33:\r\n\r\n> I think this is fine for now but I want to consider if we could maybe impl this over impl Body<Buf = Bytes> instead of hyper::Body. This way we could eventually add this into tonic quite easily. That is because in tonic we impl body like so https://docs.rs/tonic/0.4.0/tonic/body/struct.BoxBody.html#impl-Body\r\n\r\nI totally agree but I couldn't quite figure out how to make it work. `Body::wrap_stream` is quite convenient. I could give it another shot.\r\n\r\n## TODO\r\n\r\n- [x] Add feature toggles for each compression algorithm a la https://github.com/tower-rs/tower-http/pull/41/commits/090053ae3056996e29228f8a93739227c16d01ab#r566686758.", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/37/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/37/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}], "chosen_pr": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/196", "repository_url": "https://api.github.com/repos/tower-rs/tower-http", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/labels{/name}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/comments", "events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/events", "html_url": "https://github.com/tower-rs/tower-http/pull/196", "id": 1088034177, "node_id": "PR_kwDOBxBwNc4wPwxm", "number": 196, "title": "Update minimum dependency versions", "user": {"login": "kylewlacy", "id": 1362179, "node_id": "MDQ6VXNlcjEzNjIxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1362179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylewlacy", "html_url": "https://github.com/kylewlacy", "followers_url": "https://api.github.com/users/kylewlacy/followers", "following_url": "https://api.github.com/users/kylewlacy/following{/other_user}", "gists_url": "https://api.github.com/users/kylewlacy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylewlacy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylewlacy/subscriptions", "organizations_url": "https://api.github.com/users/kylewlacy/orgs", "repos_url": "https://api.github.com/users/kylewlacy/repos", "events_url": "https://api.github.com/users/kylewlacy/events{/privacy}", "received_events_url": "https://api.github.com/users/kylewlacy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-23T23:08:11Z", "updated_at": "2021-12-24T09:56:54Z", "closed_at": "2021-12-24T09:56:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/196", "html_url": "https://github.com/tower-rs/tower-http/pull/196", "diff_url": "https://github.com/tower-rs/tower-http/pull/196.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/196.patch", "merged_at": "2021-12-24T09:56:54Z"}, "body": "This PR updates the minimum dependency versions in `Cargo.toml` to prevent compilation failures.\r\n\r\n## Motivation\r\n\r\nOriginally, after trying to update our project to tower-http 0.2.0, we got a compilation error from tower-http itself after updating.\r\n\r\nI did some sleuthing and found that the version of `futures-util` in our lockfile was too old for tower-http. Doing `cargo update -p futures-util` was good enough to solve the immediate problem, but it seems like the kind of thing that should be upstreamed!\r\n\r\n## Solution\r\n\r\nI updated all dependencies listed in `Cargo.toml` to the minimum versions needed to still compile. I basically used the following to verify that I didn't miss any dependencies:\r\n\r\n```\r\n$ git clone 'https://github.com/kylewlacy/tower-http.git'\r\n$ cd tower-http\r\n$ git checkout origin/update-minimum-dependency-versions\r\n$ cargo +nightly check -Z minimal-versions --all-features --lib\r\n(Initial compilation will fail due to an upstream error in crc32)\r\n$ cargo update -p crc32\r\n$ cargo +nightly check -Z minimal-versions --all-features --lib\r\n(This succeeds with the changes from this PR, but would fail on master)\r\n```\r\n", "reactions": {"url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, "chosen_detail": {"url": "https://api.github.com/repos/tower-rs/tower-http/pulls/196", "id": 809438310, "node_id": "PR_kwDOBxBwNc4wPwxm", "html_url": "https://github.com/tower-rs/tower-http/pull/196", "diff_url": "https://github.com/tower-rs/tower-http/pull/196.diff", "patch_url": "https://github.com/tower-rs/tower-http/pull/196.patch", "issue_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196", "number": 196, "state": "closed", "locked": false, "title": "Update minimum dependency versions", "user": {"login": "kylewlacy", "id": 1362179, "node_id": "MDQ6VXNlcjEzNjIxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1362179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylewlacy", "html_url": "https://github.com/kylewlacy", "followers_url": "https://api.github.com/users/kylewlacy/followers", "following_url": "https://api.github.com/users/kylewlacy/following{/other_user}", "gists_url": "https://api.github.com/users/kylewlacy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylewlacy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylewlacy/subscriptions", "organizations_url": "https://api.github.com/users/kylewlacy/orgs", "repos_url": "https://api.github.com/users/kylewlacy/repos", "events_url": "https://api.github.com/users/kylewlacy/events{/privacy}", "received_events_url": "https://api.github.com/users/kylewlacy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "This PR updates the minimum dependency versions in `Cargo.toml` to prevent compilation failures.\r\n\r\n## Motivation\r\n\r\nOriginally, after trying to update our project to tower-http 0.2.0, we got a compilation error from tower-http itself after updating.\r\n\r\nI did some sleuthing and found that the version of `futures-util` in our lockfile was too old for tower-http. Doing `cargo update -p futures-util` was good enough to solve the immediate problem, but it seems like the kind of thing that should be upstreamed!\r\n\r\n## Solution\r\n\r\nI updated all dependencies listed in `Cargo.toml` to the minimum versions needed to still compile. I basically used the following to verify that I didn't miss any dependencies:\r\n\r\n```\r\n$ git clone 'https://github.com/kylewlacy/tower-http.git'\r\n$ cd tower-http\r\n$ git checkout origin/update-minimum-dependency-versions\r\n$ cargo +nightly check -Z minimal-versions --all-features --lib\r\n(Initial compilation will fail due to an upstream error in crc32)\r\n$ cargo update -p crc32\r\n$ cargo +nightly check -Z minimal-versions --all-features --lib\r\n(This succeeds with the changes from this PR, but would fail on master)\r\n```\r\n", "created_at": "2021-12-23T23:08:11Z", "updated_at": "2021-12-24T09:56:54Z", "closed_at": "2021-12-24T09:56:54Z", "merged_at": "2021-12-24T09:56:54Z", "merge_commit_sha": "8c85e6285c317c3005e5d1cce929f261fd4a371b", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/tower-rs/tower-http/pulls/196/commits", "review_comments_url": "https://api.github.com/repos/tower-rs/tower-http/pulls/196/comments", "review_comment_url": "https://api.github.com/repos/tower-rs/tower-http/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/issues/196/comments", "statuses_url": "https://api.github.com/repos/tower-rs/tower-http/statuses/73530af2fe717d070941daca2ac36b116c802f96", "head": {"label": "kylewlacy:update-minimum-dependency-versions", "ref": "update-minimum-dependency-versions", "sha": "73530af2fe717d070941daca2ac36b116c802f96", "user": {"login": "kylewlacy", "id": 1362179, "node_id": "MDQ6VXNlcjEzNjIxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1362179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylewlacy", "html_url": "https://github.com/kylewlacy", "followers_url": "https://api.github.com/users/kylewlacy/followers", "following_url": "https://api.github.com/users/kylewlacy/following{/other_user}", "gists_url": "https://api.github.com/users/kylewlacy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylewlacy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylewlacy/subscriptions", "organizations_url": "https://api.github.com/users/kylewlacy/orgs", "repos_url": "https://api.github.com/users/kylewlacy/repos", "events_url": "https://api.github.com/users/kylewlacy/events{/privacy}", "received_events_url": "https://api.github.com/users/kylewlacy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "repo": {"id": 441310372, "node_id": "R_kgDOGk3cpA", "name": "tower-http", "full_name": "kylewlacy/tower-http", "private": false, "owner": {"login": "kylewlacy", "id": 1362179, "node_id": "MDQ6VXNlcjEzNjIxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1362179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kylewlacy", "html_url": "https://github.com/kylewlacy", "followers_url": "https://api.github.com/users/kylewlacy/followers", "following_url": "https://api.github.com/users/kylewlacy/following{/other_user}", "gists_url": "https://api.github.com/users/kylewlacy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kylewlacy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kylewlacy/subscriptions", "organizations_url": "https://api.github.com/users/kylewlacy/orgs", "repos_url": "https://api.github.com/users/kylewlacy/repos", "events_url": "https://api.github.com/users/kylewlacy/events{/privacy}", "received_events_url": "https://api.github.com/users/kylewlacy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/kylewlacy/tower-http", "description": "HTTP specific Tower utilities.", "fork": true, "url": "https://api.github.com/repos/kylewlacy/tower-http", "forks_url": "https://api.github.com/repos/kylewlacy/tower-http/forks", "keys_url": "https://api.github.com/repos/kylewlacy/tower-http/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/kylewlacy/tower-http/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/kylewlacy/tower-http/teams", "hooks_url": "https://api.github.com/repos/kylewlacy/tower-http/hooks", "issue_events_url": "https://api.github.com/repos/kylewlacy/tower-http/issues/events{/number}", "events_url": "https://api.github.com/repos/kylewlacy/tower-http/events", "assignees_url": "https://api.github.com/repos/kylewlacy/tower-http/assignees{/user}", "branches_url": "https://api.github.com/repos/kylewlacy/tower-http/branches{/branch}", "tags_url": "https://api.github.com/repos/kylewlacy/tower-http/tags", "blobs_url": "https://api.github.com/repos/kylewlacy/tower-http/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/kylewlacy/tower-http/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/kylewlacy/tower-http/git/refs{/sha}", "trees_url": "https://api.github.com/repos/kylewlacy/tower-http/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/kylewlacy/tower-http/statuses/{sha}", "languages_url": "https://api.github.com/repos/kylewlacy/tower-http/languages", "stargazers_url": "https://api.github.com/repos/kylewlacy/tower-http/stargazers", "contributors_url": "https://api.github.com/repos/kylewlacy/tower-http/contributors", "subscribers_url": "https://api.github.com/repos/kylewlacy/tower-http/subscribers", "subscription_url": "https://api.github.com/repos/kylewlacy/tower-http/subscription", "commits_url": "https://api.github.com/repos/kylewlacy/tower-http/commits{/sha}", "git_commits_url": "https://api.github.com/repos/kylewlacy/tower-http/git/commits{/sha}", "comments_url": "https://api.github.com/repos/kylewlacy/tower-http/comments{/number}", "issue_comment_url": "https://api.github.com/repos/kylewlacy/tower-http/issues/comments{/number}", "contents_url": "https://api.github.com/repos/kylewlacy/tower-http/contents/{+path}", "compare_url": "https://api.github.com/repos/kylewlacy/tower-http/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/kylewlacy/tower-http/merges", "archive_url": "https://api.github.com/repos/kylewlacy/tower-http/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/kylewlacy/tower-http/downloads", "issues_url": "https://api.github.com/repos/kylewlacy/tower-http/issues{/number}", "pulls_url": "https://api.github.com/repos/kylewlacy/tower-http/pulls{/number}", "milestones_url": "https://api.github.com/repos/kylewlacy/tower-http/milestones{/number}", "notifications_url": "https://api.github.com/repos/kylewlacy/tower-http/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/kylewlacy/tower-http/labels{/name}", "releases_url": "https://api.github.com/repos/kylewlacy/tower-http/releases{/id}", "deployments_url": "https://api.github.com/repos/kylewlacy/tower-http/deployments", "created_at": "2021-12-23T22:35:13Z", "updated_at": "2021-12-23T22:35:14Z", "pushed_at": "2021-12-23T22:59:24Z", "git_url": "git://github.com/kylewlacy/tower-http.git", "ssh_url": "git@github.com:kylewlacy/tower-http.git", "clone_url": "https://github.com/kylewlacy/tower-http.git", "svn_url": "https://github.com/kylewlacy/tower-http", "homepage": null, "size": 2704, "stargazers_count": 0, "watchers_count": 0, "language": null, "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": null, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "tower-rs:master", "ref": "master", "sha": "b965b25412681bfc0c5637f4faabf3a84bc803de", "user": {"login": "tower-rs", "id": 26263939, "node_id": "MDEyOk9yZ2FuaXphdGlvbjI2MjYzOTM5", "avatar_url": "https://avatars.githubusercontent.com/u/26263939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tower-rs", "html_url": "https://github.com/tower-rs", "followers_url": "https://api.github.com/users/tower-rs/followers", "following_url": "https://api.github.com/users/tower-rs/following{/other_user}", "gists_url": "https://api.github.com/users/tower-rs/gists{/gist_id}", "starred_url": "https://api.github.com/users/tower-rs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tower-rs/subscriptions", "organizations_url": "https://api.github.com/users/tower-rs/orgs", "repos_url": "https://api.github.com/users/tower-rs/repos", "events_url": "https://api.github.com/users/tower-rs/events{/privacy}", "received_events_url": "https://api.github.com/users/tower-rs/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 118517813, "node_id": "MDEwOlJlcG9zaXRvcnkxMTg1MTc4MTM=", "name": "tower-http", "full_name": "tower-rs/tower-http", "private": false, "owner": {"login": "tower-rs", "id": 26263939, "node_id": "MDEyOk9yZ2FuaXphdGlvbjI2MjYzOTM5", "avatar_url": "https://avatars.githubusercontent.com/u/26263939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tower-rs", "html_url": "https://github.com/tower-rs", "followers_url": "https://api.github.com/users/tower-rs/followers", "following_url": "https://api.github.com/users/tower-rs/following{/other_user}", "gists_url": "https://api.github.com/users/tower-rs/gists{/gist_id}", "starred_url": "https://api.github.com/users/tower-rs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tower-rs/subscriptions", "organizations_url": "https://api.github.com/users/tower-rs/orgs", "repos_url": "https://api.github.com/users/tower-rs/repos", "events_url": "https://api.github.com/users/tower-rs/events{/privacy}", "received_events_url": "https://api.github.com/users/tower-rs/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/tower-rs/tower-http", "description": "HTTP specific Tower utilities.", "fork": false, "url": "https://api.github.com/repos/tower-rs/tower-http", "forks_url": "https://api.github.com/repos/tower-rs/tower-http/forks", "keys_url": "https://api.github.com/repos/tower-rs/tower-http/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/tower-rs/tower-http/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/tower-rs/tower-http/teams", "hooks_url": "https://api.github.com/repos/tower-rs/tower-http/hooks", "issue_events_url": "https://api.github.com/repos/tower-rs/tower-http/issues/events{/number}", "events_url": "https://api.github.com/repos/tower-rs/tower-http/events", "assignees_url": "https://api.github.com/repos/tower-rs/tower-http/assignees{/user}", "branches_url": "https://api.github.com/repos/tower-rs/tower-http/branches{/branch}", "tags_url": "https://api.github.com/repos/tower-rs/tower-http/tags", "blobs_url": "https://api.github.com/repos/tower-rs/tower-http/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/tower-rs/tower-http/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/tower-rs/tower-http/git/refs{/sha}", "trees_url": "https://api.github.com/repos/tower-rs/tower-http/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/tower-rs/tower-http/statuses/{sha}", "languages_url": "https://api.github.com/repos/tower-rs/tower-http/languages", "stargazers_url": "https://api.github.com/repos/tower-rs/tower-http/stargazers", "contributors_url": "https://api.github.com/repos/tower-rs/tower-http/contributors", "subscribers_url": "https://api.github.com/repos/tower-rs/tower-http/subscribers", "subscription_url": "https://api.github.com/repos/tower-rs/tower-http/subscription", "commits_url": "https://api.github.com/repos/tower-rs/tower-http/commits{/sha}", "git_commits_url": "https://api.github.com/repos/tower-rs/tower-http/git/commits{/sha}", "comments_url": "https://api.github.com/repos/tower-rs/tower-http/comments{/number}", "issue_comment_url": "https://api.github.com/repos/tower-rs/tower-http/issues/comments{/number}", "contents_url": "https://api.github.com/repos/tower-rs/tower-http/contents/{+path}", "compare_url": "https://api.github.com/repos/tower-rs/tower-http/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/tower-rs/tower-http/merges", "archive_url": "https://api.github.com/repos/tower-rs/tower-http/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/tower-rs/tower-http/downloads", "issues_url": "https://api.github.com/repos/tower-rs/tower-http/issues{/number}", "pulls_url": "https://api.github.com/repos/tower-rs/tower-http/pulls{/number}", "milestones_url": "https://api.github.com/repos/tower-rs/tower-http/milestones{/number}", "notifications_url": "https://api.github.com/repos/tower-rs/tower-http/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/tower-rs/tower-http/labels{/name}", "releases_url": "https://api.github.com/repos/tower-rs/tower-http/releases{/id}", "deployments_url": "https://api.github.com/repos/tower-rs/tower-http/deployments", "created_at": "2018-01-22T21:30:55Z", "updated_at": "2026-01-20T15:14:43Z", "pushed_at": "2026-01-20T15:14:41Z", "git_url": "git://github.com/tower-rs/tower-http.git", "ssh_url": "git@github.com:tower-rs/tower-http.git", "clone_url": "https://github.com/tower-rs/tower-http.git", "svn_url": "https://github.com/tower-rs/tower-http", "homepage": null, "size": 3097, "stargazers_count": 847, "watchers_count": 847, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": true, "forks_count": 219, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 73, "license": null, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 219, "open_issues": 73, "watchers": 847, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/tower-rs/tower-http/pulls/196"}, "html": {"href": "https://github.com/tower-rs/tower-http/pull/196"}, "issue": {"href": "https://api.github.com/repos/tower-rs/tower-http/issues/196"}, "comments": {"href": "https://api.github.com/repos/tower-rs/tower-http/issues/196/comments"}, "review_comments": {"href": "https://api.github.com/repos/tower-rs/tower-http/pulls/196/comments"}, "review_comment": {"href": "https://api.github.com/repos/tower-rs/tower-http/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/tower-rs/tower-http/pulls/196/commits"}, "statuses": {"href": "https://api.github.com/repos/tower-rs/tower-http/statuses/73530af2fe717d070941daca2ac36b116c802f96"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": false, "rebaseable": false, "mergeable_state": "dirty", "merged_by": {"login": "davidpdrsn", "id": 718941, "node_id": "MDQ6VXNlcjcxODk0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidpdrsn", "html_url": "https://github.com/davidpdrsn", "followers_url": "https://api.github.com/users/davidpdrsn/followers", "following_url": "https://api.github.com/users/davidpdrsn/following{/other_user}", "gists_url": "https://api.github.com/users/davidpdrsn/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidpdrsn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidpdrsn/subscriptions", "organizations_url": "https://api.github.com/users/davidpdrsn/orgs", "repos_url": "https://api.github.com/users/davidpdrsn/repos", "events_url": "https://api.github.com/users/davidpdrsn/events{/privacy}", "received_events_url": "https://api.github.com/users/davidpdrsn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 0, "review_comments": 0, "maintainer_can_modify": false, "commits": 1, "additions": 4, "deletions": 4, "changed_files": 1}}