{"window": ["2023-01-17T18:28:06.492647+00:00", "2023-08-31T17:31:34.339445+00:00"], "repo_slug": "p2panda/aquadoggo", "candidates": [{"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/524", "id": 1866055124, "node_id": "PR_kwDOEhY-tc5YvfbB", "number": 524, "title": "Networking: multiple relays, dial known nodes, allow&block-list", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-25T00:19:44Z", "updated_at": "2023-08-25T11:25:25Z", "closed_at": "2023-08-25T11:12:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524", "html_url": "https://github.com/p2panda/aquadoggo/pull/524", "diff_url": "https://github.com/p2panda/aquadoggo/pull/524.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/524.patch", "merged_at": "2023-08-25T11:12:31Z"}, "body": "- [x] client nodes don't need to listen on tcp\r\n- [x] handle connecting to multiple relay nodes (w/ config changes)\r\n- [x] dial known direct nodes at startup\r\n- [x] introduce allow-list of trusted peers\r\n- [x] introduce block-list of un-trusted peers\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/519", "id": 1862195780, "node_id": "PR_kwDOEhY-tc5YicUz", "number": 519, "title": "Improved configuration API with TOML file", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-22T20:55:18Z", "updated_at": "2023-08-25T11:25:16Z", "closed_at": "2023-08-25T10:47:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/519", "html_url": "https://github.com/p2panda/aquadoggo/pull/519", "diff_url": "https://github.com/p2panda/aquadoggo/pull/519.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/519.patch", "merged_at": "2023-08-25T10:47:42Z"}, "body": "Closes #511, #513, #516, #510\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~~Add tests that cover your changes~~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/502", "id": 1855453468, "node_id": "PR_kwDOEhY-tc5YLqw5", "number": 502, "title": "Fix relayed connections, add DCUtR and reduce CLI args", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-08-17T17:51:13Z", "updated_at": "2023-08-25T11:25:17Z", "closed_at": "2023-08-22T19:41:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/502", "html_url": "https://github.com/p2panda/aquadoggo/pull/502", "diff_url": "https://github.com/p2panda/aquadoggo/pull/502.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/502.patch", "merged_at": "2023-08-22T19:41:28Z"}, "body": "I had a few goals with this PR:\r\n\r\n1. Troubleshoot and get relayed connection establishment to be more reliable\r\n2. Reduce the number of network related CLI args \r\n3. Integrate and test if DCUtR now works\r\n4. Choose random QUIC and HTTP ports when they're taken\r\n\r\nThis all came with a general refactor, especially of the event loop, which is hopefully now a little easier to follow. The answer to 1. seems to have been to introduce a kind of handshake phase to the initiation process if a relay address has been given. This waits on identify messages to/from the relay, and successful listening on the circuit address before starting any other processes. Good news is, with this, relayed connections seem to be very quick and reliable :star:\r\n\r\nI introduced the DCUtR behaviour but I haven't been able to observe if it works yet, this could just be my particular NAT setup not allowing holepunching though. There are upgrade requests passing back and forth, but the upgrade itself fails. This doesn't seem to have any adverse effect on the existing relayed connection though.\r\n\r\nLastly, I removed the `dial` behaviour which was responsible for redialing peers if they disconnect unexpectedly. This was partly as I thought it might be effecting the DCUtR processes, and partly because I wanted to in general reduce complicating the connection logic at all. It may come back later, lets see (also connections seem pretty reliable anyway).  \r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/423 and https://github.com/p2panda/aquadoggo/issues/361\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/reactions", "total_count": 3, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/484", "id": 1836816158, "node_id": "PR_kwDOEhY-tc5XM4Sn", "number": 484, "title": "`BlobStore` for retrieving raw blob data from the db", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-04T14:08:16Z", "updated_at": "2023-08-17T12:48:06Z", "closed_at": "2023-08-09T09:32:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/484", "html_url": "https://github.com/p2panda/aquadoggo/pull/484", "diff_url": "https://github.com/p2panda/aquadoggo/pull/484.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/484.patch", "merged_at": "2023-08-09T09:32:29Z"}, "body": "_caveat: I'm still on the fence about whether we want to store blobs like this (all pieces as their own document) but I wanted to try out this approach first as a) it fits so smoothly in with our current documents system b) it's easy to do and the api won't really change if we take a different approach to storing blobs anyway. So, this is the minimal-changes approach, and we can iterate from here :+1:_ \r\n\r\nIntroduces `BlobStore` with one method: `get_blob`.\r\n\r\nUnder the hood this:\r\n- gets the target document by id\r\n- checks it's schema id is `blob_v1`\r\n- fetches all related pieces in it's `pieces` field\r\n- validates that all pieces have been collected\r\n- combines them into one string\r\n- validates that the length matches the claimed length on the blob document\r\n- returns this string\r\n\r\nThis is done without introducing a new `Blob` type into `p2panda-rs` (as was the approach with `Schema`, our other system schema type). I actually think this works ok for now, but interested in any thoughts on this.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/483", "id": 1836733952, "node_id": "PR_kwDOEhY-tc5XMmSk", "number": 483, "title": "Add static file server to `http` service", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-04T13:18:49Z", "updated_at": "2023-08-17T12:48:09Z", "closed_at": "2023-08-09T09:37:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/483", "html_url": "https://github.com/p2panda/aquadoggo/pull/483", "diff_url": "https://github.com/p2panda/aquadoggo/pull/483.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/483.patch", "merged_at": "2023-08-09T09:37:41Z"}, "body": "Use https://docs.rs/tower-http/latest/tower_http/services/struct.ServeDir.html# to add a static file server to the http service which serves content from `$HOME/.local/share/aquadoggo/blobs` by default.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/480", "id": 1833912032, "node_id": "PR_kwDOEhY-tc5XDJOF", "number": 480, "title": "Add static file server to `http` service", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-02T21:13:45Z", "updated_at": "2023-08-04T13:09:47Z", "closed_at": "2023-08-04T13:09:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/480", "html_url": "https://github.com/p2panda/aquadoggo/pull/480", "diff_url": "https://github.com/p2panda/aquadoggo/pull/480.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/480.patch", "merged_at": "2023-08-04T13:09:47Z"}, "body": "Use https://docs.rs/tower-http/latest/tower_http/services/struct.ServeDir.html# to add a static file server to the http service which serves content from `$HOME/.local/share/aquadoggo/blobs` by default.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [ ] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [ ] Link this PR to any issues it closes\r\n- [ ] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/473", "id": 1825249643, "node_id": "PR_kwDOEhY-tc5Wl8K6", "number": 473, "title": "Parse supported schema ids from `config.toml` file", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-27T21:24:07Z", "updated_at": "2023-08-09T09:38:54Z", "closed_at": "2023-07-27T21:42:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/473", "html_url": "https://github.com/p2panda/aquadoggo/pull/473", "diff_url": "https://github.com/p2panda/aquadoggo/pull/473.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/473.patch", "merged_at": "2023-07-27T21:42:13Z"}, "body": "Describe your changes here.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/463", "id": 1822331005, "node_id": "PR_kwDOEhY-tc5WcDLf", "number": 463, "title": "Perform peer sampling before initiating replication requests", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-26T12:38:59Z", "updated_at": "2023-07-27T09:00:08Z", "closed_at": "2023-07-27T09:00:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/463", "html_url": "https://github.com/p2panda/aquadoggo/pull/463", "diff_url": "https://github.com/p2panda/aquadoggo/pull/463.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/463.patch", "merged_at": "2023-07-27T09:00:04Z"}, "body": "Take a random sample of the available peers in the replication service and only initiate replication sessions with them.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/444", "id": 1802365932, "node_id": "PR_kwDOEhY-tc5VYrLZ", "number": 444, "title": "Implement `dialer` behaviour", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-13T07:17:43Z", "updated_at": "2023-07-14T08:02:23Z", "closed_at": "2023-07-14T08:02:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/444", "html_url": "https://github.com/p2panda/aquadoggo/pull/444", "diff_url": "https://github.com/p2panda/aquadoggo/pull/444.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/444.patch", "merged_at": "2023-07-14T08:02:20Z"}, "body": "Introduce a `Dialer` behaviour which:\r\n\r\n- handles new dial attempts for known peers or peers which disconnect unexpectedly\r\n- when a dial attempt fails retries according to a configured backoff schedule and retry limit\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~ I'm struggling to find a meaningful way to test this, open to any ideas, otherwise it can go in without tests..... (I tested locally and expected behaviour occurs)\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/442", "id": 1795271930, "node_id": "PR_kwDOEhY-tc5VAiWx", "number": 442, "title": "Replicate operations in topo order", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-09T07:03:38Z", "updated_at": "2023-07-09T07:17:32Z", "closed_at": "2023-07-09T07:17:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/442", "html_url": "https://github.com/p2panda/aquadoggo/pull/442", "diff_url": "https://github.com/p2panda/aquadoggo/pull/442.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/442.patch", "merged_at": "2023-07-09T07:17:25Z"}, "body": "We want to validate all operations which arrive at a node via replication before persisting them to the node and performing materialization. In order to do this the document they are part of needs to be in it's most recent state before the in-coming operation was published. This can be achieved if entries are ordered appropriately _before_ they are sent to a remote node in replication request responses.\r\n\r\nWhen preparing entries response messages in `LogHeighStrategy` they should be grouped by document id and then ordered by `sorted_index` of their operations. This way a remote can simply use `publish` to ingest all arriving entries as they arrive in their topologically sorted order and can be directly validated and added to the document.\r\n\r\nWhen consuming entries in `Ingest` we should use the `publish` method provided by `p2panda-rs`, this already performs all required validation.\r\n\r\n- [x] Use `publish` to ingest entries arriving on a node via replication\r\n- [x] Order entries correctly before sending them to a node during replication\r\n- [x] Tests\r\n\r\nThese changes mean that we now require that authors don't publish concurrently to the same document with the same key pair, this needs adding to the spec: https://github.com/p2panda/handbook/issues/284\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/440", "id": 1793020509, "node_id": "PR_kwDOEhY-tc5U46j8", "number": 440, "title": "Use fork of `asynchronous-codec` ", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-07T08:05:47Z", "updated_at": "2023-07-07T11:31:07Z", "closed_at": "2023-07-07T11:31:03Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/440", "html_url": "https://github.com/p2panda/aquadoggo/pull/440", "diff_url": "https://github.com/p2panda/aquadoggo/pull/440.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/440.patch", "merged_at": "2023-07-07T11:31:03Z"}, "body": "We forked `asynchronous-codec` in order to introduce a change which fixes a bug we have (being discussed [here](https://github.com/mxinden/asynchronous-codec/issues/6).\r\n\r\nIt would be nice to have a test for this, but I've never seen it occur in tests before and am not sure how we could re-produce it.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/425", "id": 1776137725, "node_id": "PR_kwDOEhY-tc5T_enz", "number": 425, "title": "Use `libp2p` `v0.52.0`", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-27T05:48:32Z", "updated_at": "2023-07-07T12:07:37Z", "closed_at": "2023-07-01T10:47:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/425", "html_url": "https://github.com/p2panda/aquadoggo/pull/425", "diff_url": "https://github.com/p2panda/aquadoggo/pull/425.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/425.patch", "merged_at": "2023-07-01T10:47:07Z"}, "body": "## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/408", "id": 1763719706, "node_id": "PR_kwDOEhY-tc5TWdYI", "number": 408, "title": "Decouple p2panda's authentication data types from libp2p's", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-19T14:59:55Z", "updated_at": "2023-06-20T22:08:31Z", "closed_at": "2023-06-20T22:08:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/408", "html_url": "https://github.com/p2panda/aquadoggo/pull/408", "diff_url": "https://github.com/p2panda/aquadoggo/pull/408.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/408.patch", "merged_at": "2023-06-20T22:08:27Z"}, "body": "## Separation of worlds\r\n\r\nThis separates the worlds of libp2p and p2panda a bit better. Before we would deal with libp2p's `Keypair` inside of our `Configuration` struct to handle and store secrets.\r\n\r\nThe only place where we \"leak\" libp2p into our other parts is the replication service, there we have still a notion of `PeerId`. We could wrap that around our own type to abstract it away, but at this point that seems too much.\r\n\r\n## Making `KeyPair` more visible\r\n\r\nThis PR brings `KeyPair` into the picture by moving it out of `Configuration`, into its own `Context` field and on top into the `Node.start(key_pair, config)` method.\r\n\r\nCloses https://github.com/p2panda/aquadoggo/issues/388\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/387", "id": 1723673476, "node_id": "PR_kwDOEhY-tc5ROypx", "number": 387, "title": "Integrate replication manager with networking stack", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2023-05-24T10:31:04Z", "updated_at": "2023-06-19T07:56:21Z", "closed_at": "2023-06-19T07:41:40Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/387", "html_url": "https://github.com/p2panda/aquadoggo/pull/387", "diff_url": "https://github.com/p2panda/aquadoggo/pull/387.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/387.patch", "merged_at": "2023-06-19T07:41:40Z"}, "body": "This PR introduces a new replication service which represents the replication protocol layer on top of the networking stack. It uses the service bus to communicate with the networking service, gets informed about established and closed connection with peers and new incoming replication messages.\r\n\r\nThe replication service keeps track of all currently available peers, can initiate new replication sessions with a simple scheduler logic and maintains the sync manager which is the state machine dealing with the actual replication protocol logic.\r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/373 and https://github.com/p2panda/aquadoggo/issues/396\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/380", "id": 1714474304, "node_id": "PR_kwDOEhY-tc5Qvt9N", "number": 380, "title": "Implement naive replication protocol", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-17T18:48:45Z", "updated_at": "2023-05-22T23:19:23Z", "closed_at": "2023-05-22T23:19:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/380", "html_url": "https://github.com/p2panda/aquadoggo/pull/380", "diff_url": "https://github.com/p2panda/aquadoggo/pull/380.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/380.patch", "merged_at": "2023-05-22T23:19:20Z"}, "body": "Database methods, log height diffing logic, state and message handling for the naive replication protocol. \r\n\r\nCloses #368 and #376\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/365", "id": 1706045925, "node_id": "PR_kwDOEhY-tc5QTf-3", "number": 365, "title": "libp2p networking layer for replication protocol", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-11T15:23:51Z", "updated_at": "2023-05-16T10:20:07Z", "closed_at": "2023-05-16T10:20:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/365", "html_url": "https://github.com/p2panda/aquadoggo/pull/365", "diff_url": "https://github.com/p2panda/aquadoggo/pull/365.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/365.patch", "merged_at": "2023-05-16T10:20:04Z"}, "body": "Implement a `NetworkBehaviour` and `ConnectionHandler` for the libp2p swarm stack. It handles connection upgrades to our replication protocol, establishes in- and outbound streams, decodes CBOR bytes into our own message format in these streams and has some mechanisms of sending (with queues) and receiving messages.\r\n\r\nAll of this can be glued together with the work from https://github.com/p2panda/aquadoggo/pull/363 which is the actual replication protocol manager. This PR handles the networking layer of it.\r\n\r\nCloses #371 \r\n\r\n## Next Steps\r\n\r\n- #373 \r\n- #370 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/363", "id": 1704125704, "node_id": "PR_kwDOEhY-tc5QNEyf", "number": 363, "title": "Replication protocol session manager", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-10T14:56:35Z", "updated_at": "2023-05-15T10:17:06Z", "closed_at": "2023-05-15T10:06:12Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/363", "html_url": "https://github.com/p2panda/aquadoggo/pull/363", "diff_url": "https://github.com/p2panda/aquadoggo/pull/363.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/363.patch", "merged_at": "2023-05-15T10:06:12Z"}, "body": "Implementation of a manager handling sessions of the p2panda replication protocol as specified in https://p2panda.org/specification/replication/.\r\n\r\nThe manager makes sure that multiple replication sessions can be handled at the same time with different / same peers. It makes sure that no duplicate work is done and no dead locks occur when two peers initiate the same session at the same time.\r\n\r\nOn top it provides a pluggable interface for different replication \"strategies\", which we implement in separate PRs.\r\n\r\nThis implementation is agnostic of the underlying networking layer or async runtime. The glue to the aquadoggo libp2p networking stack is handled here: https://github.com/p2panda/aquadoggo/pull/365\r\n\r\nCloses #372 \r\n\r\n## Next Steps\r\n\r\n- #374 \r\n- #368\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/362", "id": 1700393418, "node_id": "PR_kwDOEhY-tc5QAflm", "number": 362, "title": "Property tests for GraphQL query API", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-08T14:47:07Z", "updated_at": "2023-05-16T16:12:44Z", "closed_at": "2023-05-16T16:12:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/362", "html_url": "https://github.com/p2panda/aquadoggo/pull/362", "diff_url": "https://github.com/p2panda/aquadoggo/pull/362.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/362.patch", "merged_at": "2023-05-16T16:12:41Z"}, "body": "Introduce property tests which run against high-level GraphQL query api. This is done using the `proptest` library which works by defining strategies for generating test data. When failing tests are found the strategies perform \"shrinking\" which reduces the input values to their simplest form which still triggers the failure. The inputs for failed tests are stored in a `.regressions` file and the tests are run against these values first every time.\r\n\r\nThe following strategies are implemented:\r\n- generate an AST representing schema with (nested) relations\r\n  - target depth, fields and number of nodes can be configured\r\n- generate collections of documents from schema AST\r\n- generate query filters based on schema AST\r\n\r\nThe following tests are performed:\r\n- pagination tests where the returned results are validated against expected values and pagination loops until completion\r\n  - this is performed against a query for only meta data, and a query for only application fields\r\n- perform a query which includes filter arguments for meta and application fields on the root query as well as any list fields\r\n  - this does not check the returned collection for correctness, only tests that the queries do not error\r\n\r\nCloses https://github.com/p2panda/aquadoggo/issues/360\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/347", "id": 1685529681, "node_id": "PR_kwDOEhY-tc5POiSh", "number": 347, "title": "Fix SQL ordering to correctly assemble resulting rows to documents", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2023-04-26T18:43:11Z", "updated_at": "2023-04-27T22:05:57Z", "closed_at": "2023-04-27T14:15:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/347", "html_url": "https://github.com/p2panda/aquadoggo/pull/347", "diff_url": "https://github.com/p2panda/aquadoggo/pull/347.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/347.patch", "merged_at": "2023-04-27T14:15:35Z"}, "body": "\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/338", "id": 1682128479, "node_id": "PR_kwDOEhY-tc5PDIhl", "number": 338, "title": "Introduce property tests for the GraphQL query API", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-24T22:24:44Z", "updated_at": "2023-04-25T11:40:30Z", "closed_at": "2023-04-25T11:40:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/338", "html_url": "https://github.com/p2panda/aquadoggo/pull/338", "diff_url": "https://github.com/p2panda/aquadoggo/pull/338.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/338.patch", "merged_at": "2023-04-25T11:40:26Z"}, "body": "We could put all this behind a feature flag, which might be nice.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/336", "id": 1678607390, "node_id": "PR_kwDOEhY-tc5O3evU", "number": 336, "title": "Handle parsing fields containing an empty relation list in and out of storage", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-21T14:19:16Z", "updated_at": "2023-04-24T22:16:04Z", "closed_at": "2023-04-24T19:31:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/336", "html_url": "https://github.com/p2panda/aquadoggo/pull/336", "diff_url": "https://github.com/p2panda/aquadoggo/pull/336.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/336.patch", "merged_at": "2023-04-24T19:31:57Z"}, "body": "https://github.com/p2panda/aquadoggo/issues/334\r\n\r\nIn order to do this we make `value` on operation and document field rows optional and interpret this to mean an empty relation list when parsing values from the store.\r\n\r\nThen this threw up another bug which i believe originates in `p2panda-rs` where we don't handle decoding pinned relation lists if they contain no items. https://github.com/p2panda/p2panda/pull/489\r\n\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/322", "id": 1668094231, "node_id": "PR_kwDOEhY-tc5OUa0I", "number": 322, "title": "Simplify network CLI options and configuration", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-14T11:43:00Z", "updated_at": "2023-04-18T09:02:35Z", "closed_at": "2023-04-18T09:02:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/322", "html_url": "https://github.com/p2panda/aquadoggo/pull/322", "diff_url": "https://github.com/p2panda/aquadoggo/pull/322.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/322.patch", "merged_at": "2023-04-18T09:02:31Z"}, "body": "Addresses https://github.com/p2panda/aquadoggo/issues/319\r\n\r\nReduces the existing set of network-related CLI options:\r\n\r\n```\r\n--rendezvous-address\r\n--rendezvous-peer-id\r\n--rendezvous-server\r\n--rendezvous-client\r\n--relay-address\r\n--relay-peer-id\r\n--relay-server\r\n--relay-client\r\n```\r\n\r\nTo this:\r\n\r\n```\r\n--rendezvous-address\r\n--relay-address\r\n--enable-rendezvous-server\r\n--enable-relay-server\r\n```\r\n\r\nRendezvous client mode is enabled if `--rendezvous-address` is provided. The same is true for `--relay-address`. These two options now include the peer's ID as part of the multiaddress.\r\n\r\n-----\r\n\r\nThis PR also bumps `libp2p` version to `0.51.3` and removes deprecated code:\r\n\r\n- [x] Replace `swarm::ConnectionLimits` with new `connection_limits::Behaviour`\r\n- [x] Remove match on `BannedPeer` `SwarmEvent`\r\n- [x] Change `quic` to use separate crate dependency\r\n\r\nSee https://github.com/libp2p/rust-libp2p/blob/master/libp2p/CHANGELOG.md#0512\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/318", "id": 1644332086, "node_id": "PR_kwDOEhY-tc5NFtR7", "number": 318, "title": "Custom validation for GraphQL `Scalar` types", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-28T16:51:25Z", "updated_at": "2023-03-29T14:00:00Z", "closed_at": "2023-03-29T13:58:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/318", "html_url": "https://github.com/p2panda/aquadoggo/pull/318", "diff_url": "https://github.com/p2panda/aquadoggo/pull/318.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/318.patch", "merged_at": "2023-03-29T13:58:10Z"}, "body": "This PR implements custom validation on GraphQL scalar types. This means that any invalid errors passed into the api as arguments are internally validated and if they fail, errors are returned to the user with context information about which argument in the query failed and what value type was expected.\r\n\r\nHowever, a side effect of this change is that in some cases (well, two i think) the actual validation errors returned from attempting to parse the value into it's expected type are lost. \r\n\r\nSo there is a slight trade off involved here. In some places specific validation failure errors are lost, but in other places we gain useful context about which passed value was invalid.\r\n\r\nSee the changes for examples of the differences.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/314", "id": 1643282642, "node_id": "PR_kwDOEhY-tc5NCKU0", "number": 314, "title": "Introduce `autonat` and `relay` network protocols", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-28T06:26:23Z", "updated_at": "2023-04-13T13:28:36Z", "closed_at": "2023-04-13T12:05:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/314", "html_url": "https://github.com/p2panda/aquadoggo/pull/314", "diff_url": "https://github.com/p2panda/aquadoggo/pull/314.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/314.patch", "merged_at": "2023-04-13T12:05:57Z"}, "body": "Addresses https://github.com/p2panda/aquadoggo/issues/306\r\n\r\n- [x] Add configuration options for `autonat`\r\n- [x] Add configuration options for `relay`\r\n- [x] Expose `autonat` configuration options via CLI\r\n- [x] Expose `relay` configuration options via CLI\r\n- [x] Add the `autonat` network behaviour / protocol\r\n  - [x] Handle `autonat::Event::StatusChanged` events\r\n  - [x] Handle all other `autonat` events with catch-all logging\r\n- [x] Add the `relay` network behaviour / protocol\r\n  - [x] Handle client and server events with catch-all logging\r\n- [x] Refactoring\r\n  - [x] Move transport builder into separate module\r\n  - [x] Move swarm builder into separate module\r\n- [x] Improve log-level stratification\r\n \r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/311", "id": 1637892841, "node_id": "PR_kwDOEhY-tc5MwSbZ", "number": 311, "title": "`query` method for store API", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-23T16:42:36Z", "updated_at": "2023-04-24T22:14:33Z", "closed_at": "2023-04-24T18:17:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/311", "html_url": "https://github.com/p2panda/aquadoggo/pull/311", "diff_url": "https://github.com/p2panda/aquadoggo/pull/311.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/311.patch", "merged_at": "2023-04-24T18:17:29Z"}, "body": "This PR implements the \"backend\" for our new \"Query\" API to paginate, filter and sort collections based off the work in https://github.com/p2panda/aquadoggo/pull/302 and https://github.com/p2panda/aquadoggo/pull/308. Specifically this involves designing the SQL query which gets the data from the database, to then return it back to the GraphQL API consumer.\r\n\r\nThe SQL query is fairly complex as it a) is based on our \"operation-graph-like\" table structure and b) covers a lot of features. The goal is to only make _one_ SQL query per API request. No index optimizations took place yet, this requires some heavy-load testing and benchmarking (just setting arbitrary indexes can worsen performance).\r\n\r\n**Todo**\r\n\r\n- [x] Revisit GraphQL API for pagination info and collection response (https://github.com/p2panda/aquadoggo/pull/323)\r\n- [x] Introduce `endCursor` in pagination info response\r\n- [x] Encode pagination cursor as base64 string or similar to make it opaque\r\n- [x] Handle (pinned) relation lists and relations in nested GraphQL queries. Revisit API here (especially pagination for collection queries)\r\n  - [x] Make cursor contain the id of the parent document, so we can identify _which_ list inside that collection we're paginating\r\n  - [x] Experiment with JOINs to properly paginate over relation list values\r\n- [x] Fix assembling document list after SQL query for relation lists, since documents can occur multiple times in a row there. A solution would be to group the rows by number of selected fields\r\n- [x] Make query compatible with PostgreSQL\r\n- [x] Separate the cursor type `DocumentCursor` from the scalar type `CursorScalar` in the GraphQL API, sticking to the separation of concerns we already have introduced in all other places\r\n- [x] Set filter default to not query deleted documents, improve upsert method of `Filter` struct to overwrite previously set boolean filters to allow users to override that default\r\n\r\n**Next Steps**\r\n\r\n- Add indices to SQL tables connected to heavy-load testing and benchmarking\r\n- Allow ordering over meta fields like document view id, owner, edited and deleted status\r\n- `edited` in GraphQL `meta` API\r\n- `deleted` in GraphQL `meta` API\r\n- Implement backwards pagination as well\r\n- Finish tests from previous PRs\r\n- Check if all arguments are correctly validated (it crashes when entering an unknown field in `orderBy`)\r\n- Define good pagination defaults and limits (for example max page sizes)\r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/310\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/304", "id": 1629215617, "node_id": "PR_kwDOEhY-tc5MTS5T", "number": 304, "title": "Introduce `identify` and `rendezvous` network protocols", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-17T12:15:24Z", "updated_at": "2023-04-18T10:28:46Z", "closed_at": "2023-03-23T16:28:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/304", "html_url": "https://github.com/p2panda/aquadoggo/pull/304", "diff_url": "https://github.com/p2panda/aquadoggo/pull/304.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/304.patch", "merged_at": "2023-03-23T16:28:17Z"}, "body": "Addresses https://github.com/p2panda/aquadoggo/issues/303\r\n\r\n- [x] Move `NetworkBehaviour` into a separate module (`behaviour.rs`)\r\n- [x] Add the `identify` network behaviour / protocol\r\n  - [x] Manually add an external address when reported via remote peer\r\n  - [x] Handle `identify::Event::Received` event\r\n  - [x] Handle `identify::Event::Sent` event\r\n  - [x] Handle `identify::Event::Error` event\r\n- [x] Add the `rendezvous` network behaviour / protocol\r\n  - [x] Handle `rendezvous::client::Event::Registered` event\r\n  - [x] Handle `rendezvous::client::Event::Discovered` event\r\n  - [x] Handle `rendezvous::client::Event::Failed` event\r\n  - [x] Handle `rendezvous::server::Event::PeerRegistered` event\r\n  - [x] Handle `rendezvous::server::Event::DiscoverServed` event\r\n- [x] Add configuration options for rendezvous\r\n- [x] Expose rendezvous configuration options via CLI\r\n- [x] Replace `String` with `Multiaddr` for `--remote-node-addresses` and `--rendezvous-address` (results in validation by parser)\r\n- [x] Replace `String` with `PeerId` for `--rendezvous-peer-id` (results in validation by parser)\r\n- [x] Add `glyph` to list of authors\r\n- [x] Update CLI `README` with latest usage instructions\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/289", "id": 1623173335, "node_id": "PR_kwDOEhY-tc5L-3gx", "number": 289, "title": "Migrate CLI from `structopt` to `clap`", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-14T10:26:11Z", "updated_at": "2023-03-16T15:53:54Z", "closed_at": "2023-03-15T09:17:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/289", "html_url": "https://github.com/p2panda/aquadoggo/pull/289", "diff_url": "https://github.com/p2panda/aquadoggo/pull/289.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/289.patch", "merged_at": "2023-03-15T09:17:28Z"}, "body": "This is a drop-in replacement (more or less) of `structopt` with `clap`. See https://github.com/p2panda/aquadoggo/issues/288 for additional context.\r\n\r\n- [x] Replace `structopt` dependency with `clap`\r\n- [x] Rename `struct` from `Opt` to `Cli`\r\n- [x] Update `README` with latest usage\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/287", "id": 1619346501, "node_id": "PR_kwDOEhY-tc5LyVww", "number": 287, "title": "Use new version of `async-graphql` for dynamic schema generation", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-10T17:34:22Z", "updated_at": "2023-04-29T00:21:37Z", "closed_at": "2023-03-16T11:54:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/287", "html_url": "https://github.com/p2panda/aquadoggo/pull/287", "diff_url": "https://github.com/p2panda/aquadoggo/pull/287.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/287.patch", "merged_at": "2023-03-16T11:54:17Z"}, "body": "Use https://github.com/async-graphql/async-graphql and https://github.com/smmoosavi/dynamic-graphql to implement dynamic schema handling in our graphql api.\r\n\r\nThis took a little bit of time as I had to get to grips with the new `async-graphql` dynamic schema creation patterns, but I'm very happy with the result, it will be much more enjoyable (and quite quick) to expand our query api now with new features. \r\n\r\n## Design decisions\r\n- we use `async-graphql` to build all queries dynamically. It doesn't seem possible to combine \"statically\" defined queries with dynamic ones, so even `nextArgs` is defined using the dynamic API\r\n- all scalar and known types are defined using `dynamic-graphql` which offers macro wrappers for `async-graphql`, these are then registered on the root schema and can be referenced by name in dynamic queries where object types can be defined\r\n- the resolver pattern i adopted (i believe it's the recommended way) is to have each field perform a single db query to retrieve it's own value. The query bubbles up from it's root to tips, only resolving actual values in it's final step. For this to be efficient, we may want to make two changes:\r\n  1) implement a data loader which helps cache results for duplicate queries which occur in the same query tree (avoids N+1).\r\n  2) write a new SQL query for the field resolver which only targets the requested field. \r\n\r\n## Tasks\r\n\r\n- [x] remove old `graphql` module\r\n- [x] remove replication end points (we might want these back later, but for now they're gone)\r\n- [x] re-implement all functionality using above crates\r\n  - [x] scalar types\r\n  - [x] types \r\n    - [x] document meta \r\n    - [x] next args\r\n  - [x] build document fields schema\r\n  - [x] build document schema\r\n  - [x] build document query one\r\n  - [x] relations (single and lists)\r\n  - [x] build document query all \r\n  - [x] build next args\r\n  - [x] mutations: publish\r\n- [x] bring back all tests\r\n  - [x] make them pass.... \r\n- [x] ~add some more tests~ let's do this in next steps :face_in_clouds: we at least shouldn't have fewer tests than we did before!\r\n- [x] ~get `dynamic-schema` published or remove it from this PR~ it already was\r\n\r\n## Next steps\r\n- implement a data loader for efficient query caching\r\n- write field only SQL queries for field resolver (optional)\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/282", "id": 1602887765, "node_id": "PR_kwDOEhY-tc5K68vT", "number": 282, "title": "Add libp2p service and configuration", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2023-02-28T11:46:30Z", "updated_at": "2023-03-14T15:56:47Z", "closed_at": "2023-03-13T10:53:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/282", "html_url": "https://github.com/p2panda/aquadoggo/pull/282", "diff_url": "https://github.com/p2panda/aquadoggo/pull/282.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/282.patch", "merged_at": "2023-03-13T10:53:59Z"}, "body": "Implements a minimal networking layer using the `libp2p` library, including transport establishment, networking configuration and network behaviour composition.\r\n\r\nRelates to https://github.com/p2panda/aquadoggo/issues/278\r\n\r\n## To Do\r\n\r\n- [x] Keypair configuration\r\n  - [x] Generate a new keypair when one doesn't exist\r\n  - [x] Persist the keypair to file using PEM format\r\n  - [x] Load the keypair from file \r\n- [x] Define swarm configuration parameters\r\n  - [x] Set connection-related defaults \r\n  - [x] Decide on default QUIC port\r\n- [x] Define the NetworkBehaviour of the node\r\n  - [x] ping\r\n  - [x] mDNS\r\n- [x] Swarm\r\n  - [x] Configure and create QUIC transport  \r\n  - [x] Listen for incoming connections\r\n  - [x] Dial peer addresses for replication (if provided)\r\n  - [x] Log events\r\n- [x] Install Protocol Buffers compiler for CI workflows\r\n- [x] Add Protocol Buffers compiler installation requirement note to `README`\r\n\r\n## Notes\r\n\r\n`aquadoggo` currently uses `envy` to parse environment variables and overlay them onto the default configuration parameters. However, it does not currently handle nested `struct`s. This means that it is not possible to tune libp2p configuration parameters given the current code structure (the same applies to `ReplicationConfig`). I will need to use the `flatten` attribute from `serde` ([docs](https://serde.rs/attr-flatten.html)) to achieve this.\r\n\r\n## Out of Scope\r\n\r\nI'm noting this down here for future iterations on the networking layer functionality.\r\n\r\n- Dummy replication (self-implemented behaviour for learning purposes)\r\n  - Let's rather do this after the base networking functionality has been merged\r\n- Address book\r\n  - Read from file\r\n  - Add discovered peers (via mDNS, for example)\r\n  - Write to file\r\n- `TOML` configuration file for the application\r\n  - I'll tackle this in another PR\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/279", "id": 1599850057, "node_id": "PR_kwDOEhY-tc5Kw3vl", "number": 279, "title": "Import `publish` and `next_args` from `p2panda-rs`", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-25T21:39:45Z", "updated_at": "2023-03-07T11:45:24Z", "closed_at": "2023-03-07T11:45:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/279", "html_url": "https://github.com/p2panda/aquadoggo/pull/279", "diff_url": "https://github.com/p2panda/aquadoggo/pull/279.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/279.patch", "merged_at": "2023-03-07T11:45:20Z"}, "body": "Use `api` module exposed in `p2panda-rs` here: https://github.com/p2panda/p2panda/pull/483\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/269", "id": 1554681818, "node_id": "PR_kwDOEhY-tc5IaPr7", "number": 269, "title": "Fix test-runner race conditions", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-24T10:10:07Z", "updated_at": "2023-01-25T11:47:47Z", "closed_at": "2023-01-25T11:11:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/269", "html_url": "https://github.com/p2panda/aquadoggo/pull/269", "diff_url": "https://github.com/p2panda/aquadoggo/pull/269.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/269.patch", "merged_at": "2023-01-25T11:11:56Z"}, "body": "Some of our tests use the underlying static schema provider which is a static mutable data store (due to a workaround for `async-graphql`). This mutable store is accessible across all test runner threads in parallel mode as they all run in the same process. To prevent overwriting data across threads (race condition) we have to run these test in serial.\r\n\r\nRead more: https://users.rust-lang.org/t/static-mutables-in-tests/49321\r\n\r\n## Background\r\n\r\nThis PR is blantantly stolen from https://github.com/p2panda/aquadoggo/pull/266 which is the in-depth research of @sandreae to find out where the race-conditions came from.\r\n\r\nThe following changes have been made in comparison to PR #266:\r\n\r\n1. Added comments around the places where we add `[#serial]`. It's fairly special-case and I can see how that same problem will come up in the future when we (and others) add new tests and forget to make them execute in serial. These comments will not necessarily prevent that but it's better than nothing maybe.\r\n2. Removed all code which was somewhat _optional_ around solving these kinds of race conditions. #266 adds a feature to reliably inform about if an async task (like building a new schema) was finished. There is more race conditions to tackle, but they are more unlikely to happen (for now we can naively bump the waiting times).\r\n\r\nI'm wondering if there's another way to tackle the issue in the future. We could have a mocked static schema store only for test environments which puts the data behind a randomized key which is set once per thread. Then all parallelly-running tests would have the schema store behind the same memory address, but access different areas _inside_ of it.\r\n\r\nCloses: #247\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/268", "id": 1526007712, "node_id": "PR_kwDOEhY-tc5G_6_v", "number": 268, "title": "Storage trait API changes", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-09T17:26:10Z", "updated_at": "2023-02-20T16:32:58Z", "closed_at": "2023-02-10T18:13:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/268", "html_url": "https://github.com/p2panda/aquadoggo/pull/268", "diff_url": "https://github.com/p2panda/aquadoggo/pull/268.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/268.patch", "merged_at": "2023-02-10T18:13:07Z"}, "body": "Implement changes from https://github.com/p2panda/p2panda/pull/469, refactoring (especially in `DocumentStore`) and a chance for better docs!\r\n\r\n- [x] make changes required by https://github.com/p2panda/p2panda/pull/469\r\n  - [x] update store APIs\r\n  - [x] remove deprecated `StorageEntry` and `EntryWithOperation`\r\n  - [x] meaningful changes to the methods on `DocumentStore` which now returns `Documents` from all getter methods \r\n- [x] big refactor of document and document view insertion methods (these methods are not defined on `DocumentStore` trait anymore)\r\n- [x] add `document_id` column to `document_views` table\r\n- [x] update tests\r\n- [x] update effected modules\r\n- [x] update and a chance to improve docs for these stores\r\n  - [x] `entry`\r\n  - [x] `log`\r\n  - [x] `operation`\r\n  - [x] `document`\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}], "chosen_pr": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/524", "id": 1866055124, "node_id": "PR_kwDOEhY-tc5YvfbB", "number": 524, "title": "Networking: multiple relays, dial known nodes, allow&block-list", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-25T00:19:44Z", "updated_at": "2023-08-25T11:25:25Z", "closed_at": "2023-08-25T11:12:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524", "html_url": "https://github.com/p2panda/aquadoggo/pull/524", "diff_url": "https://github.com/p2panda/aquadoggo/pull/524.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/524.patch", "merged_at": "2023-08-25T11:12:31Z"}, "body": "- [x] client nodes don't need to listen on tcp\r\n- [x] handle connecting to multiple relay nodes (w/ config changes)\r\n- [x] dial known direct nodes at startup\r\n- [x] introduce allow-list of trusted peers\r\n- [x] introduce block-list of un-trusted peers\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, "chosen_detail": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524", "id": 1488844481, "node_id": "PR_kwDOEhY-tc5YvfbB", "html_url": "https://github.com/p2panda/aquadoggo/pull/524", "diff_url": "https://github.com/p2panda/aquadoggo/pull/524.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/524.patch", "issue_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524", "number": 524, "state": "closed", "locked": true, "title": "Networking: multiple relays, dial known nodes, allow&block-list", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "body": "- [x] client nodes don't need to listen on tcp\r\n- [x] handle connecting to multiple relay nodes (w/ config changes)\r\n- [x] dial known direct nodes at startup\r\n- [x] introduce allow-list of trusted peers\r\n- [x] introduce block-list of un-trusted peers\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "created_at": "2023-08-25T00:19:44Z", "updated_at": "2023-08-25T11:25:25Z", "closed_at": "2023-08-25T11:12:31Z", "merged_at": "2023-08-25T11:12:31Z", "merge_commit_sha": "2f661801fbcd0ab6e2d16e4817b08054d7b32771", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524/commits", "review_comments_url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524/comments", "review_comment_url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/comments", "statuses_url": "https://api.github.com/repos/p2panda/aquadoggo/statuses/59ba41c10fbcf5d17a25b53509288e37f1c0e431", "head": {"label": "p2panda:networking-final-round", "ref": "networking-final-round", "sha": "59ba41c10fbcf5d17a25b53509288e37f1c0e431", "user": {"login": "p2panda", "id": 49107945, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ5MTA3OTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/49107945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/p2panda", "html_url": "https://github.com/p2panda", "followers_url": "https://api.github.com/users/p2panda/followers", "following_url": "https://api.github.com/users/p2panda/following{/other_user}", "gists_url": "https://api.github.com/users/p2panda/gists{/gist_id}", "starred_url": "https://api.github.com/users/p2panda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/p2panda/subscriptions", "organizations_url": "https://api.github.com/users/p2panda/orgs", "repos_url": "https://api.github.com/users/p2panda/repos", "events_url": "https://api.github.com/users/p2panda/events{/privacy}", "received_events_url": "https://api.github.com/users/p2panda/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 303447733, "node_id": "MDEwOlJlcG9zaXRvcnkzMDM0NDc3MzM=", "name": "aquadoggo", "full_name": "p2panda/aquadoggo", "private": false, "owner": {"login": "p2panda", "id": 49107945, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ5MTA3OTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/49107945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/p2panda", "html_url": "https://github.com/p2panda", "followers_url": "https://api.github.com/users/p2panda/followers", "following_url": "https://api.github.com/users/p2panda/following{/other_user}", "gists_url": "https://api.github.com/users/p2panda/gists{/gist_id}", "starred_url": "https://api.github.com/users/p2panda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/p2panda/subscriptions", "organizations_url": "https://api.github.com/users/p2panda/orgs", "repos_url": "https://api.github.com/users/p2panda/repos", "events_url": "https://api.github.com/users/p2panda/events{/privacy}", "received_events_url": "https://api.github.com/users/p2panda/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/p2panda/aquadoggo", "description": "Node for the p2panda network handling validation, storage, aggregation and replication", "fork": false, "url": "https://api.github.com/repos/p2panda/aquadoggo", "forks_url": "https://api.github.com/repos/p2panda/aquadoggo/forks", "keys_url": "https://api.github.com/repos/p2panda/aquadoggo/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/p2panda/aquadoggo/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/p2panda/aquadoggo/teams", "hooks_url": "https://api.github.com/repos/p2panda/aquadoggo/hooks", "issue_events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/events{/number}", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/events", "assignees_url": "https://api.github.com/repos/p2panda/aquadoggo/assignees{/user}", "branches_url": "https://api.github.com/repos/p2panda/aquadoggo/branches{/branch}", "tags_url": "https://api.github.com/repos/p2panda/aquadoggo/tags", "blobs_url": "https://api.github.com/repos/p2panda/aquadoggo/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/p2panda/aquadoggo/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/p2panda/aquadoggo/git/refs{/sha}", "trees_url": "https://api.github.com/repos/p2panda/aquadoggo/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/p2panda/aquadoggo/statuses/{sha}", "languages_url": "https://api.github.com/repos/p2panda/aquadoggo/languages", "stargazers_url": "https://api.github.com/repos/p2panda/aquadoggo/stargazers", "contributors_url": "https://api.github.com/repos/p2panda/aquadoggo/contributors", "subscribers_url": "https://api.github.com/repos/p2panda/aquadoggo/subscribers", "subscription_url": "https://api.github.com/repos/p2panda/aquadoggo/subscription", "commits_url": "https://api.github.com/repos/p2panda/aquadoggo/commits{/sha}", "git_commits_url": "https://api.github.com/repos/p2panda/aquadoggo/git/commits{/sha}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/comments{/number}", "issue_comment_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/comments{/number}", "contents_url": "https://api.github.com/repos/p2panda/aquadoggo/contents/{+path}", "compare_url": "https://api.github.com/repos/p2panda/aquadoggo/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/p2panda/aquadoggo/merges", "archive_url": "https://api.github.com/repos/p2panda/aquadoggo/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/p2panda/aquadoggo/downloads", "issues_url": "https://api.github.com/repos/p2panda/aquadoggo/issues{/number}", "pulls_url": "https://api.github.com/repos/p2panda/aquadoggo/pulls{/number}", "milestones_url": "https://api.github.com/repos/p2panda/aquadoggo/milestones{/number}", "notifications_url": "https://api.github.com/repos/p2panda/aquadoggo/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/labels{/name}", "releases_url": "https://api.github.com/repos/p2panda/aquadoggo/releases{/id}", "deployments_url": "https://api.github.com/repos/p2panda/aquadoggo/deployments", "created_at": "2020-10-12T16:19:07Z", "updated_at": "2025-12-25T20:59:06Z", "pushed_at": "2025-01-08T16:49:36Z", "git_url": "git://github.com/p2panda/aquadoggo.git", "ssh_url": "git@github.com:p2panda/aquadoggo.git", "clone_url": "https://github.com/p2panda/aquadoggo.git", "svn_url": "https://github.com/p2panda/aquadoggo", "homepage": "", "size": 1861, "stargazers_count": 78, "watchers_count": 78, "language": "Rust", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 5, "mirror_url": null, "archived": true, "disabled": false, "open_issues_count": 71, "license": {"key": "agpl-3.0", "name": "GNU Affero General Public License v3.0", "spdx_id": "AGPL-3.0", "url": "https://api.github.com/licenses/agpl-3.0", "node_id": "MDc6TGljZW5zZTE="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["graphql", "libp2p", "local-first", "node", "p2p"], "visibility": "public", "forks": 5, "open_issues": 71, "watchers": 78, "default_branch": "main"}}, "base": {"label": "p2panda:main", "ref": "main", "sha": "1f1121e6b35b09c155ddff132ae6b955d12e73c1", "user": {"login": "p2panda", "id": 49107945, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ5MTA3OTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/49107945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/p2panda", "html_url": "https://github.com/p2panda", "followers_url": "https://api.github.com/users/p2panda/followers", "following_url": "https://api.github.com/users/p2panda/following{/other_user}", "gists_url": "https://api.github.com/users/p2panda/gists{/gist_id}", "starred_url": "https://api.github.com/users/p2panda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/p2panda/subscriptions", "organizations_url": "https://api.github.com/users/p2panda/orgs", "repos_url": "https://api.github.com/users/p2panda/repos", "events_url": "https://api.github.com/users/p2panda/events{/privacy}", "received_events_url": "https://api.github.com/users/p2panda/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "repo": {"id": 303447733, "node_id": "MDEwOlJlcG9zaXRvcnkzMDM0NDc3MzM=", "name": "aquadoggo", "full_name": "p2panda/aquadoggo", "private": false, "owner": {"login": "p2panda", "id": 49107945, "node_id": "MDEyOk9yZ2FuaXphdGlvbjQ5MTA3OTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/49107945?v=4", "gravatar_id": "", "url": "https://api.github.com/users/p2panda", "html_url": "https://github.com/p2panda", "followers_url": "https://api.github.com/users/p2panda/followers", "following_url": "https://api.github.com/users/p2panda/following{/other_user}", "gists_url": "https://api.github.com/users/p2panda/gists{/gist_id}", "starred_url": "https://api.github.com/users/p2panda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/p2panda/subscriptions", "organizations_url": "https://api.github.com/users/p2panda/orgs", "repos_url": "https://api.github.com/users/p2panda/repos", "events_url": "https://api.github.com/users/p2panda/events{/privacy}", "received_events_url": "https://api.github.com/users/p2panda/received_events", "type": "Organization", "user_view_type": "public", "site_admin": false}, "html_url": "https://github.com/p2panda/aquadoggo", "description": "Node for the p2panda network handling validation, storage, aggregation and replication", "fork": false, "url": "https://api.github.com/repos/p2panda/aquadoggo", "forks_url": "https://api.github.com/repos/p2panda/aquadoggo/forks", "keys_url": "https://api.github.com/repos/p2panda/aquadoggo/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/p2panda/aquadoggo/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/p2panda/aquadoggo/teams", "hooks_url": "https://api.github.com/repos/p2panda/aquadoggo/hooks", "issue_events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/events{/number}", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/events", "assignees_url": "https://api.github.com/repos/p2panda/aquadoggo/assignees{/user}", "branches_url": "https://api.github.com/repos/p2panda/aquadoggo/branches{/branch}", "tags_url": "https://api.github.com/repos/p2panda/aquadoggo/tags", "blobs_url": "https://api.github.com/repos/p2panda/aquadoggo/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/p2panda/aquadoggo/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/p2panda/aquadoggo/git/refs{/sha}", "trees_url": "https://api.github.com/repos/p2panda/aquadoggo/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/p2panda/aquadoggo/statuses/{sha}", "languages_url": "https://api.github.com/repos/p2panda/aquadoggo/languages", "stargazers_url": "https://api.github.com/repos/p2panda/aquadoggo/stargazers", "contributors_url": "https://api.github.com/repos/p2panda/aquadoggo/contributors", "subscribers_url": "https://api.github.com/repos/p2panda/aquadoggo/subscribers", "subscription_url": "https://api.github.com/repos/p2panda/aquadoggo/subscription", "commits_url": "https://api.github.com/repos/p2panda/aquadoggo/commits{/sha}", "git_commits_url": "https://api.github.com/repos/p2panda/aquadoggo/git/commits{/sha}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/comments{/number}", "issue_comment_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/comments{/number}", "contents_url": "https://api.github.com/repos/p2panda/aquadoggo/contents/{+path}", "compare_url": "https://api.github.com/repos/p2panda/aquadoggo/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/p2panda/aquadoggo/merges", "archive_url": "https://api.github.com/repos/p2panda/aquadoggo/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/p2panda/aquadoggo/downloads", "issues_url": "https://api.github.com/repos/p2panda/aquadoggo/issues{/number}", "pulls_url": "https://api.github.com/repos/p2panda/aquadoggo/pulls{/number}", "milestones_url": "https://api.github.com/repos/p2panda/aquadoggo/milestones{/number}", "notifications_url": "https://api.github.com/repos/p2panda/aquadoggo/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/labels{/name}", "releases_url": "https://api.github.com/repos/p2panda/aquadoggo/releases{/id}", "deployments_url": "https://api.github.com/repos/p2panda/aquadoggo/deployments", "created_at": "2020-10-12T16:19:07Z", "updated_at": "2025-12-25T20:59:06Z", "pushed_at": "2025-01-08T16:49:36Z", "git_url": "git://github.com/p2panda/aquadoggo.git", "ssh_url": "git@github.com:p2panda/aquadoggo.git", "clone_url": "https://github.com/p2panda/aquadoggo.git", "svn_url": "https://github.com/p2panda/aquadoggo", "homepage": "", "size": 1861, "stargazers_count": 78, "watchers_count": 78, "language": "Rust", "has_issues": true, "has_projects": false, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 5, "mirror_url": null, "archived": true, "disabled": false, "open_issues_count": 71, "license": {"key": "agpl-3.0", "name": "GNU Affero General Public License v3.0", "spdx_id": "AGPL-3.0", "url": "https://api.github.com/licenses/agpl-3.0", "node_id": "MDc6TGljZW5zZTE="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["graphql", "libp2p", "local-first", "node", "p2p"], "visibility": "public", "forks": 5, "open_issues": 71, "watchers": 78, "default_branch": "main"}}, "_links": {"self": {"href": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524"}, "html": {"href": "https://github.com/p2panda/aquadoggo/pull/524"}, "issue": {"href": "https://api.github.com/repos/p2panda/aquadoggo/issues/524"}, "comments": {"href": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/comments"}, "review_comments": {"href": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524/comments"}, "review_comment": {"href": "https://api.github.com/repos/p2panda/aquadoggo/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524/commits"}, "statuses": {"href": "https://api.github.com/repos/p2panda/aquadoggo/statuses/59ba41c10fbcf5d17a25b53509288e37f1c0e431"}}, "author_association": "MEMBER", "auto_merge": null, "active_lock_reason": null, "merged": true, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "comments": 1, "review_comments": 1, "maintainer_can_modify": false, "commits": 10, "additions": 272, "deletions": 94, "changed_files": 9}}