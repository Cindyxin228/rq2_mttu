[{"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/823", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/823/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/823/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/823/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/823", "id": 1929653462, "node_id": "PR_kwDOEj0F685cFTGH", "number": 823, "title": "examples: fix clippy's complaints about redundant_locals", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-10-06T08:08:52Z", "updated_at": "2023-10-06T09:20:24Z", "closed_at": "2023-10-06T09:20:23Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/823", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/823", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/823.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/823.patch", "merged_at": "2023-10-06T09:20:23Z"}, "body": "Rust 1.73 got released very recently and introduced a new version of clippy, with new lints. The `parallel` and `parallel-prepared` examples contain code which redefines a local variable:\r\n\r\n```\r\nfor i in 0..100_000usize {\r\n    // ...\r\n    tokio::task::spawn(async move {\r\n        let i = i;\r\n        // ...\r\n    });\r\n}\r\n```\r\n\r\nThis is completely unnecesary and can be removed, as per clippy's suggestion:\r\n\r\n```\r\nerror: redundant redefinition of a binding\r\n  --> examples/parallel-prepared.rs:36:9\r\n   |\r\n36 |     for i in 0..100_000usize {\r\n   |         ^\r\n...\r\n44 |             let i = i;\r\n   |             ^^^^^^^^^^\r\n   |\r\n   = help: remove the redefinition of `i`\r\n   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#redundant_locals\r\n   = note: `#[deny(clippy::redundant_locals)]` on by default\r\n```\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/823/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/819", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/819/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/819/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/819/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/819", "id": 1917661449, "node_id": "PR_kwDOEj0F685bc7kE", "number": 819, "title": "Add serialization traits", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-28T14:22:45Z", "updated_at": "2023-09-29T11:28:57Z", "closed_at": "2023-09-29T11:28:57Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/819", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/819", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/819.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/819.patch", "merged_at": "2023-09-29T11:28:57Z"}, "body": "This commit adds experimental version of new serialization traits. Blanket implementation are provided to support older traits.\r\nFor now there are no comments / other implementations with real type checking as the purpose of this PR is to unblock the work on macros\r\nand other parts of refactor.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/819/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/819/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/818", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/818/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/818/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/818/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/818", "id": 1917517691, "node_id": "PR_kwDOEj0F685bccFN", "number": 818, "title": "scylla-macros: report errors as compile errors, not panics", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-28T13:07:13Z", "updated_at": "2023-10-05T13:48:25Z", "closed_at": "2023-10-05T13:48:25Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/818", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/818", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/818.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/818.patch", "merged_at": "2023-10-05T13:48:25Z"}, "body": "Our current procedural macros handle errors by panicking. This leads to compilation errors which inform the user about that fact first, and then explain the real issue in the \"help\" part:\r\n\r\n```\r\nerror: proc-macro derive panicked\r\n --> examples/user-defined-type.rs:6:10\r\n  |\r\n6 | #[derive(FromUserType)]\r\n  |          ^^^^^^^^^^^^\r\n  |\r\n  = help: message: derive(FromUserType) works only on structs!\r\n```\r\n\r\nThis commit gets rid of `.expect()` and `panic()` calls. Instead, errors are now propagated via `Result<T, syn::Error>` and properly converted to a compilation error at the end. This approach results in nicer error messages and allows to attach the message to a particular part of the original code that could cause the problem.\r\n\r\nAfter the changes, error messages look like this:\r\n\r\n```\r\nerror: derive(FromUserType) works only for structs with named fields\r\n --> examples/user-defined-type.rs:7:1\r\n  |\r\n7 | enum Foo {\r\n  | ^^^^\r\n```\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/818/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/818/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/812", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/812/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/812/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/812/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/812", "id": 1900666652, "node_id": "PR_kwDOEj0F685ajhSR", "number": 812, "title": "Quietly prepare unprepared queries in batches", "user": {"login": "sylwiaszunejko", "id": 52855732, "node_id": "MDQ6VXNlcjUyODU1NzMy", "avatar_url": "https://avatars.githubusercontent.com/u/52855732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sylwiaszunejko", "html_url": "https://github.com/sylwiaszunejko", "followers_url": "https://api.github.com/users/sylwiaszunejko/followers", "following_url": "https://api.github.com/users/sylwiaszunejko/following{/other_user}", "gists_url": "https://api.github.com/users/sylwiaszunejko/gists{/gist_id}", "starred_url": "https://api.github.com/users/sylwiaszunejko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sylwiaszunejko/subscriptions", "organizations_url": "https://api.github.com/users/sylwiaszunejko/orgs", "repos_url": "https://api.github.com/users/sylwiaszunejko/repos", "events_url": "https://api.github.com/users/sylwiaszunejko/events{/privacy}", "received_events_url": "https://api.github.com/users/sylwiaszunejko/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-09-18T10:48:41Z", "updated_at": "2023-09-27T06:50:29Z", "closed_at": "2023-09-27T06:50:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/812", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/812", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/812.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/812.patch", "merged_at": "2023-09-27T06:50:29Z"}, "body": "## Motivation\r\nSee the referenced issue (#800)\r\n\r\n## What's done\r\nInformation about the types of the bind markers is necessary to make the serialization API safe (i.e. so that the user data won't be misinterpreted when sending it to the database). The problem with unprepared statements in batch is that the driver doesn't have a good way to determine column names and types of the bind markers.\r\n\r\nNow before sending a batch, every unprepared statement is quietly prepared on one connection to obtain the information about the bind markers. If the list of values to be bound to the statement is empty, we just send it as an unprepared query.\r\n\r\nFixes: #800\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/812/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/810", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/810/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/810/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/810/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/810", "id": 1889900105, "node_id": "PR_kwDOEj0F685Z_Z6Y", "number": 810, "title": "MSRV: bump to 1.66.0", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-11T07:56:35Z", "updated_at": "2023-09-11T09:18:14Z", "closed_at": "2023-09-11T09:18:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/810", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/810", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/810.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/810.patch", "merged_at": "2023-09-11T09:18:14Z"}, "body": "One of our indirect dependencies (`toml_edit`) has updated its MSRV. As we do not keep Cargo.lock committed in the repo and cargo does not honor MSRV during crate resolution, we can just bump our current MSRV by one version forward, from 1.65.0 to 1.66.0.\r\n\r\nThe version 1.66.0 is over 8 months old, so it's pretty old by the MSRV-breaking standards of the community.\r\n\r\nAs a bonus, we get rid of `unzip_option` workaround and use the real thing, i.e. `Option::unzip()`.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~[ ] I have provided docstrings for the public items that I want to introduce.~\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- ~[ ] I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/810/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/809", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/809/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/809/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/809/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/809", "id": 1889272618, "node_id": "PR_kwDOEj0F685Z9Tiy", "number": 809, "title": "Improve calculation for `SerializedValues::with_capacity`", "user": {"login": "cstyles", "id": 4869194, "node_id": "MDQ6VXNlcjQ4NjkxOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4869194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cstyles", "html_url": "https://github.com/cstyles", "followers_url": "https://api.github.com/users/cstyles/followers", "following_url": "https://api.github.com/users/cstyles/following{/other_user}", "gists_url": "https://api.github.com/users/cstyles/gists{/gist_id}", "starred_url": "https://api.github.com/users/cstyles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cstyles/subscriptions", "organizations_url": "https://api.github.com/users/cstyles/orgs", "repos_url": "https://api.github.com/users/cstyles/repos", "events_url": "https://api.github.com/users/cstyles/events{/privacy}", "received_events_url": "https://api.github.com/users/cstyles/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-10T18:09:21Z", "updated_at": "2025-03-17T18:23:43Z", "closed_at": "2023-09-20T15:59:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/809", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/809", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/809.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/809.patch", "merged_at": "2023-09-20T15:59:52Z"}, "body": "It seems that currently the argument provided to this function is being treated as the _number_ of items that we expect to serialize. Normally that would make sense because the argument is passed along to `Vec::with_capacity` which provisions space for the inner `serialized_values` field. However, that field is a `Vec<u8>` so really the argument corresponds to the total _size_ of the serialized values in bytes.\r\n\r\nThis commit tries to be smarter about reserving space by taking into account the actual size in memory of the values to be serialized. It's not perfect (e.g., `String`s will always reserve the same amount of space, regardless of how long their actual contents are) but hopefully it will still result in fewer re-allocations.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/809/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/809/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/808", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/808/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/808/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/808/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/808", "id": 1888840283, "node_id": "PR_kwDOEj0F685Z8CAE", "number": 808, "title": "Added custom hashers support for HashSet and HashMap.", "user": {"login": "s3rius", "id": 18153319, "node_id": "MDQ6VXNlcjE4MTUzMzE5", "avatar_url": "https://avatars.githubusercontent.com/u/18153319?v=4", "gravatar_id": "", "url": "https://api.github.com/users/s3rius", "html_url": "https://github.com/s3rius", "followers_url": "https://api.github.com/users/s3rius/followers", "following_url": "https://api.github.com/users/s3rius/following{/other_user}", "gists_url": "https://api.github.com/users/s3rius/gists{/gist_id}", "starred_url": "https://api.github.com/users/s3rius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/s3rius/subscriptions", "organizations_url": "https://api.github.com/users/s3rius/orgs", "repos_url": "https://api.github.com/users/s3rius/repos", "events_url": "https://api.github.com/users/s3rius/events{/privacy}", "received_events_url": "https://api.github.com/users/s3rius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-09-09T18:41:17Z", "updated_at": "2023-09-21T10:10:09Z", "closed_at": "2023-09-20T14:37:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/808", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/808", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/808.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/808.patch", "merged_at": "2023-09-20T14:37:47Z"}, "body": "Hello. The library is super great, but I noticed one problem. Custom hashers are not supported. \r\n\r\nI introduced some new generics that allow you to serialize HashMaps and HashSets with custom hashers.\r\n\r\nI wanted to speedup my code and have chosen [ahash](https://docs.rs/ahash/latest/ahash/) as custom hasher for my hashmaps. But found out that I need to convert hashmap back to default hasher in order to serialize it to valueslist. \r\n\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/808/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/808/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/807", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/807/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/807/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/807/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/807", "id": 1886549791, "node_id": "PR_kwDOEj0F685Z0USP", "number": 807, "title": "Bump verrsion of chrono dependency", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-07T20:52:14Z", "updated_at": "2023-09-08T05:14:09Z", "closed_at": "2023-09-08T05:14:09Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/807", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/807", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/807.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/807.patch", "merged_at": "2023-09-08T05:14:09Z"}, "body": "In scylla-cql/src/frame/response/cql_to_rust.rs we use `DateTime::<Utc>::from_naive_utc_and_offset` but it was introduced in chrono 0.4.27. This PR bumps this dependency to correct version.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/807/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/807/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/806", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/806/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/806/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/806/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/806", "id": 1877024700, "node_id": "PR_kwDOEj0F685ZUW4I", "number": 806, "title": "Quietly prepare unprepared query", "user": {"login": "sylwiaszunejko", "id": 52855732, "node_id": "MDQ6VXNlcjUyODU1NzMy", "avatar_url": "https://avatars.githubusercontent.com/u/52855732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sylwiaszunejko", "html_url": "https://github.com/sylwiaszunejko", "followers_url": "https://api.github.com/users/sylwiaszunejko/followers", "following_url": "https://api.github.com/users/sylwiaszunejko/following{/other_user}", "gists_url": "https://api.github.com/users/sylwiaszunejko/gists{/gist_id}", "starred_url": "https://api.github.com/users/sylwiaszunejko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sylwiaszunejko/subscriptions", "organizations_url": "https://api.github.com/users/sylwiaszunejko/orgs", "repos_url": "https://api.github.com/users/sylwiaszunejko/repos", "events_url": "https://api.github.com/users/sylwiaszunejko/events{/privacy}", "received_events_url": "https://api.github.com/users/sylwiaszunejko/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-01T08:53:36Z", "updated_at": "2023-09-07T08:41:03Z", "closed_at": "2023-09-07T08:41:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/806", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/806", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/806.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/806.patch", "merged_at": "2023-09-07T08:41:02Z"}, "body": "## Motivation\r\nSee the referenced issue (#800)\r\n\r\n## What's done\r\nInformation about the types of the bind markers is necessary to make the serialization API safe (i.e. so that the user data won't be misinterpreted when sending it to the database). The problem with unprepared statements is that the driver doesn't have a good way to determine column names and types of the bind markers.\r\n\r\nNow before sending an unprepared statement, it is quietly prepared on one connection to obtain the information about the bind markers. If the list of values to be bound is empty, we just send it as an unprepared query.\r\n\r\n## Evaluation\r\nIntegration tests are added.\r\n\r\nRefs: #800 \r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/806/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/805", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/805/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/805/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/805/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/805", "id": 1876742581, "node_id": "PR_kwDOEj0F685ZTaA_", "number": 805, "title": "treewide: appease clippy and the deprecation warnings", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-09-01T05:14:28Z", "updated_at": "2023-09-01T09:41:48Z", "closed_at": "2023-09-01T09:41:48Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/805", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/805", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/805.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/805.patch", "merged_at": "2023-09-01T09:41:48Z"}, "body": "This time, we've got a double whammy:\r\n\r\n- `clippy` version has been bumped up in GitHub's CI runner, which introduced new lints that are failing for our codebase,\r\n- New version of `chrono` has been released which deprecates `DateTime::from_utc`.\r\n\r\nThis PR addresses both of the issues, making the CI green again.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/805/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/805/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/803", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/803/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/803/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/803/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/803", "id": 1869883850, "node_id": "PR_kwDOEj0F685Y8Q2t", "number": 803, "title": "query: remove obsolete leftover TODO", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-28T14:30:40Z", "updated_at": "2023-08-28T14:55:55Z", "closed_at": "2023-08-28T14:55:03Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/803", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/803", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/803.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/803.patch", "merged_at": "2023-08-28T14:55:03Z"}, "body": "Even though #701 was fixed with #772, a TODO was left. Now it misleadingly points to `contents`. It is thus removed.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/803/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/799", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/799/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/799/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/799/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/799", "id": 1866754906, "node_id": "PR_kwDOEj0F685Yx4n5", "number": 799, "title": "dev-deps: downgrade criterion to 0.4", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-25T10:04:11Z", "updated_at": "2023-08-28T07:32:14Z", "closed_at": "2023-08-28T07:32:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/799", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/799", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/799.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/799.patch", "merged_at": "2023-08-28T07:32:14Z"}, "body": "The `criterion` library, since version 0.5, depends on `clap` v4 or higher. Recently, `clap` 4.4.0 has been released which has bumped its required MSRV to 1.70.0. Our MSRV is still 1.65.0. Apparently, the cargo resolver isn't smart enough to choose an older version of `clap` which still supports 1.65.0, so this breaks our MSRV build in CI (see rust-lang/cargo#9930).\r\n\r\nIn order to unblock the CI without checking in Cargo.toml - which would be annoying - the `criterion` dependency is downgraded to 0.4. This library is only used for benchmarks and is a dev-dependency, so it's not a big deal. No changes in the code are necessary.\r\n\r\nIn the future, if we decide to bump MSRV to 1.70.0 or further, we can update the dependency.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/799/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/799/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/797", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/797/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/797/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/797/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/797", "id": 1865374910, "node_id": "PR_kwDOEj0F685YtLfQ", "number": 797, "title": "proxy: add an example configurable from cmdline", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-24T15:11:29Z", "updated_at": "2023-08-28T11:54:05Z", "closed_at": "2023-08-28T11:45:04Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/797", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/797", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/797.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/797.patch", "merged_at": "2023-08-28T11:45:04Z"}, "body": "The example is useful for manual testing of drivers with regard to address translation of DNS related functionalities, such as hostname mapping alterations combined with address changes.\r\n\r\n## Pre-review checklist\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/797/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/797/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/796", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/796/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/796/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/796/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/796", "id": 1861154804, "node_id": "PR_kwDOEj0F685Ye3yp", "number": 796, "title": "session: add docstrings for AddressTranslator", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T10:23:40Z", "updated_at": "2023-08-23T07:17:54Z", "closed_at": "2023-08-22T11:04:17Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/796", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/796", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/796.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/796.patch", "merged_at": "2023-08-22T11:04:16Z"}, "body": "Both `AddressTranslator` trait and `address_translator` `pub` field in `SessionConfig` were missing docstrings. They were added. The docstring for the trait is adapted from Java driver 3.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/796/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/796/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/795", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/795/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/795/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/795/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/795", "id": 1860739105, "node_id": "PR_kwDOEj0F685Ydbz2", "number": 795, "title": "prepared_statement: fix deserialization of compound partition keys", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-22T06:59:04Z", "updated_at": "2023-08-22T07:31:40Z", "closed_at": "2023-08-22T07:31:40Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/795", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/795", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/795.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/795.patch", "merged_at": "2023-08-22T07:31:40Z"}, "body": "When PartitionKeyDeserializer wants to deserialize i-th column of the partition key, it needs to know the type of that column. It has access to PreparedMetadata of the prepared query the partition key was constructed from, which has a mapping between bind markers and types. Hence, it needs to learn to which bind marker the i-th pk column corresponds to.\r\n\r\nThe `self.pk_indexes` of type `Vec<PartitionKeyIndex>` is supposed to help with that. The PartitionKeyIndex structure looks like this:\r\n\r\n    pub struct PartitionKeyIndex {\r\n        /// index in the serialized values\r\n        pub index: u16,\r\n        /// sequence number in partition key\r\n        pub sequence: u16,\r\n    }\r\n\r\nSo, we need to find an entry `pki` with `pki.sequence == i` and `pki.index` will be the desired bind marker index.\r\n\r\nCurrently, we naively look at the `self.pk_indexes[i]` entry - which is wrong. The `pk_indexes` vec is actually ordered by `index`, so we might accidentally obtain an index of the wrong partition key column this way. Although there was a test that was supposed to check this scenario, it constructed `PreparedMetadata` manually and didn't sort the `pk_indexes` by `index` field, which resulted in it accidentally passing.\r\n\r\nIn order to fix this, the `PartitionKeyIndex` is now doing a linear lookup in order to find a `pki` with `pki.sequence == i`. This lookup should be fine as partition keys usually have a little number of fields.\r\n\r\nFixes: #793\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/795/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/795/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/792", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/792/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/792/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/792/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/792", "id": 1859098323, "node_id": "PR_kwDOEj0F685YXy61", "number": 792, "title": "codewide: Allow setting Serial,LocalSerial for Consistency", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-21T10:42:21Z", "updated_at": "2023-08-22T11:00:08Z", "closed_at": "2023-08-22T10:54:49Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/792", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/792", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/792.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/792.patch", "merged_at": "2023-08-22T10:54:49Z"}, "body": "# Motivation\r\nSee #736.\r\n\r\n# What's done\r\n- `Consistency` is extended with `Serial` and `LocalSerial` to support reading using Paxos (SELECT statements),\r\n- `LegacyConsistency` is removed altogether,\r\n- a test is added that performs such a Paxos read.\r\n\r\nFixes: #736\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/792/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/792/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/790", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/790/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/790/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/790/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/790", "id": 1857665774, "node_id": "PR_kwDOEj0F685YTKMI", "number": 790, "title": "value: implement serialize for u8 slices", "user": {"login": "koheatel", "id": 16274436, "node_id": "MDQ6VXNlcjE2Mjc0NDM2", "avatar_url": "https://avatars.githubusercontent.com/u/16274436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koheatel", "html_url": "https://github.com/koheatel", "followers_url": "https://api.github.com/users/koheatel/followers", "following_url": "https://api.github.com/users/koheatel/following{/other_user}", "gists_url": "https://api.github.com/users/koheatel/gists{/gist_id}", "starred_url": "https://api.github.com/users/koheatel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koheatel/subscriptions", "organizations_url": "https://api.github.com/users/koheatel/orgs", "repos_url": "https://api.github.com/users/koheatel/repos", "events_url": "https://api.github.com/users/koheatel/events{/privacy}", "received_events_url": "https://api.github.com/users/koheatel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-19T10:28:36Z", "updated_at": "2023-08-22T07:24:44Z", "closed_at": "2023-08-22T07:24:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/790", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/790", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/790.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/790.patch", "merged_at": "2023-08-22T07:24:44Z"}, "body": "Implement `Value` for `u8` slices to allow deriving `ValueList` for structs with `&[u8]` fields.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/790/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/790/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/789", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/789/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/789/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/789/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/789", "id": 1856566292, "node_id": "PR_kwDOEj0F685YPb9h", "number": 789, "title": "book: improve documentation about UDT values", "user": {"login": "cvybhu", "id": 36861778, "node_id": "MDQ6VXNlcjM2ODYxNzc4", "avatar_url": "https://avatars.githubusercontent.com/u/36861778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cvybhu", "html_url": "https://github.com/cvybhu", "followers_url": "https://api.github.com/users/cvybhu/followers", "following_url": "https://api.github.com/users/cvybhu/following{/other_user}", "gists_url": "https://api.github.com/users/cvybhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/cvybhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cvybhu/subscriptions", "organizations_url": "https://api.github.com/users/cvybhu/orgs", "repos_url": "https://api.github.com/users/cvybhu/repos", "events_url": "https://api.github.com/users/cvybhu/events{/privacy}", "received_events_url": "https://api.github.com/users/cvybhu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-18T11:31:27Z", "updated_at": "2023-08-21T07:40:54Z", "closed_at": "2023-08-21T07:40:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/789", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/789", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/789.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/789.patch", "merged_at": "2023-08-21T07:40:54Z"}, "body": "This change aims to improve the documentation about handling user defined types in the Rust driver.\r\n\r\nChanges:\r\n* Mention that fields in UDT and Rust struct must be in the same order\r\n* Add a link to official Scylla docs about UDTs\r\n* Improve grammar, make it clearer\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/789/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/788", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/788/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/788/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/788/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/788", "id": 1842703628, "node_id": "PR_kwDOEj0F685Xggo2", "number": 788, "title": "proxy: send shard number as feedback along with the frame ", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-08-09T08:01:50Z", "updated_at": "2023-08-28T07:31:09Z", "closed_at": "2023-08-25T08:08:40Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/788", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/788", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/788.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/788.patch", "merged_at": "2023-08-25T08:08:39Z"}, "body": "## Motivation\r\nIt appears (e.g. in #738) that our proxy lacks ability to inform which shard was queried. This is because it is represented in a per-node, not per-shard way.\r\n\r\n## What's done\r\n- proxy workers are made aware of the shard they are connected to. This, of course, requires that a shards count is known, either by `ShardAwareness::FixedNum` or by querying a node;\r\n- proxy logs are enriched with info about target shard;\r\n- the optional feedback (triggered by a frame matching the specified criteria) is extended: previously it sent a frame through a channel, now it sends a pair (frame, shard number).\r\n\r\n## Outcome\r\n- while using proxy manually, it is easier to trace what shard is queried;\r\n- it is possible now to write automated tests asserting that a particular shard is queried. \r\n\r\n## Pre-review checklist\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/788/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/788/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/785", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/785/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/785/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/785/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/785", "id": 1834928054, "node_id": "PR_kwDOEj0F685XGmcm", "number": 785, "title": "doc: document releasing Rust Driver documentation", "user": {"login": "annastuchlik", "id": 37244380, "node_id": "MDQ6VXNlcjM3MjQ0Mzgw", "avatar_url": "https://avatars.githubusercontent.com/u/37244380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annastuchlik", "html_url": "https://github.com/annastuchlik", "followers_url": "https://api.github.com/users/annastuchlik/followers", "following_url": "https://api.github.com/users/annastuchlik/following{/other_user}", "gists_url": "https://api.github.com/users/annastuchlik/gists{/gist_id}", "starred_url": "https://api.github.com/users/annastuchlik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annastuchlik/subscriptions", "organizations_url": "https://api.github.com/users/annastuchlik/orgs", "repos_url": "https://api.github.com/users/annastuchlik/repos", "events_url": "https://api.github.com/users/annastuchlik/events{/privacy}", "received_events_url": "https://api.github.com/users/annastuchlik/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-03T12:04:45Z", "updated_at": "2023-09-05T11:46:28Z", "closed_at": "2023-09-05T11:46:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/785", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/785", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/785.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/785.patch", "merged_at": "2023-09-05T11:46:27Z"}, "body": "This commit updates the release procedure to include a step to publish the docs for the new driver version.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/785/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/785/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/784", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/784/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/784/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/784/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/784", "id": 1833433014, "node_id": "PR_kwDOEj0F685XBful", "number": 784, "title": "doc: enable publishing docs for tag v0.9.0", "user": {"login": "annastuchlik", "id": 37244380, "node_id": "MDQ6VXNlcjM3MjQ0Mzgw", "avatar_url": "https://avatars.githubusercontent.com/u/37244380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annastuchlik", "html_url": "https://github.com/annastuchlik", "followers_url": "https://api.github.com/users/annastuchlik/followers", "following_url": "https://api.github.com/users/annastuchlik/following{/other_user}", "gists_url": "https://api.github.com/users/annastuchlik/gists{/gist_id}", "starred_url": "https://api.github.com/users/annastuchlik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annastuchlik/subscriptions", "organizations_url": "https://api.github.com/users/annastuchlik/orgs", "repos_url": "https://api.github.com/users/annastuchlik/repos", "events_url": "https://api.github.com/users/annastuchlik/events{/privacy}", "received_events_url": "https://api.github.com/users/annastuchlik/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-02T15:40:05Z", "updated_at": "2023-08-10T10:49:12Z", "closed_at": "2023-08-08T14:04:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/784", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/784", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/784.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/784.patch", "merged_at": "2023-08-08T14:04:35Z"}, "body": "Currently, the Rust Driver documentation shows the docs for the branch \"main\".\r\nThis commit enables publishing the docs for the latest Rust Driver version and sets it as the latest STABLE version.\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/784/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/784/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/783", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/783/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/783/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/783/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/783", "id": 1833380684, "node_id": "PR_kwDOEj0F685XBUUe", "number": 783, "title": "doc: replace python3 with python in Makefile", "user": {"login": "annastuchlik", "id": 37244380, "node_id": "MDQ6VXNlcjM3MjQ0Mzgw", "avatar_url": "https://avatars.githubusercontent.com/u/37244380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annastuchlik", "html_url": "https://github.com/annastuchlik", "followers_url": "https://api.github.com/users/annastuchlik/followers", "following_url": "https://api.github.com/users/annastuchlik/following{/other_user}", "gists_url": "https://api.github.com/users/annastuchlik/gists{/gist_id}", "starred_url": "https://api.github.com/users/annastuchlik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annastuchlik/subscriptions", "organizations_url": "https://api.github.com/users/annastuchlik/orgs", "repos_url": "https://api.github.com/users/annastuchlik/repos", "events_url": "https://api.github.com/users/annastuchlik/events{/privacy}", "received_events_url": "https://api.github.com/users/annastuchlik/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-02T15:11:58Z", "updated_at": "2023-08-08T14:05:18Z", "closed_at": "2023-08-08T14:05:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/783", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/783", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/783.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/783.patch", "merged_at": "2023-08-08T14:05:17Z"}, "body": "In some setups, documentation won't build if python3 is used in the \"python3 _utils/prepare_sphinx_source.py _source\" command.\r\nThis commit replaces python3 with python to make it work.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/783/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/782", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/782/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/782/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/782/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/782", "id": 1832642501, "node_id": "PR_kwDOEj0F685W-zpm", "number": 782, "title": "Update syn to 2.0", "user": {"login": "rukai", "id": 5120858, "node_id": "MDQ6VXNlcjUxMjA4NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5120858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rukai", "html_url": "https://github.com/rukai", "followers_url": "https://api.github.com/users/rukai/followers", "following_url": "https://api.github.com/users/rukai/following{/other_user}", "gists_url": "https://api.github.com/users/rukai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rukai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rukai/subscriptions", "organizations_url": "https://api.github.com/users/rukai/orgs", "repos_url": "https://api.github.com/users/rukai/repos", "events_url": "https://api.github.com/users/rukai/events{/privacy}", "received_events_url": "https://api.github.com/users/rukai/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-08-02T07:54:09Z", "updated_at": "2023-08-03T12:46:54Z", "closed_at": "2023-08-03T12:46:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/782", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/782", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/782.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/782.patch", "merged_at": "2023-08-03T12:46:54Z"}, "body": "The way attributes are handled was changed a lot in syn `2.0`.\r\nFor our usage here the changes arent too complex though:\r\n* Attribute now has `path` as a method instead of a field\r\n* Attribute now has `meta` as a field instead of a method\r\n* NameValue now has the value as an expression from which we must extract the literal instead of just holding a literal directly.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/782/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/781", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/781/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/781/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/781/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/781", "id": 1829224040, "node_id": "PR_kwDOEj0F685WzRqX", "number": 781, "title": "session_builder: Stress that new options should go to proper mode", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-31T13:42:28Z", "updated_at": "2023-08-02T06:54:43Z", "closed_at": "2023-08-02T06:34:06Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/781", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/781", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/781.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/781.patch", "merged_at": "2023-08-02T06:34:06Z"}, "body": "It has happened several times that a configuration option (a method) for `GenericSessionBuilder` was implemented on `SessionBuilder` only, even though it suited `CloudSessionBuilder` as well. To protect against such mistakes:\r\n- all three `impl` blocks (both specific ones and the generic one) are guarded with comments,\r\n- `impl SessionBuilder` block is renamed to `impl GenericSessionBuilder<DefaultMode>` to highlight that this is a specific implementation only.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/781/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/781/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/780", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/780/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/780/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/780/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/780", "id": 1829179985, "node_id": "PR_kwDOEj0F685WzH8A", "number": 780, "title": "cluster: small performance optimisations", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4712022841, "node_id": "LA_kwDOEj0F688AAAABGNvDOQ", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/performance", "name": "performance", "color": "1D76DB", "default": false, "description": "Improves performance of existing features"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-07-31T13:21:13Z", "updated_at": "2023-08-22T09:40:33Z", "closed_at": "2023-08-22T09:37:26Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/780", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/780", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/780.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/780.patch", "merged_at": "2023-08-22T09:37:26Z"}, "body": "This is a bunch of performance-related small optimisation of the `cluster` module, mainly focused on avoiding cloning where possible.\r\n\r\n## Pre-review checklist\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/780/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/780/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/779", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/779/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/779/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/779/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/779", "id": 1828726789, "node_id": "PR_kwDOEj0F685WxkYd", "number": 779, "title": "Slim down schema agreement API", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-07-31T09:01:43Z", "updated_at": "2023-08-22T10:38:31Z", "closed_at": "2023-08-22T10:37:17Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/779", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/779", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/779.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/779.patch", "merged_at": "2023-08-22T10:37:17Z"}, "body": "Schema agreement API is another place in the driver's code that can be polished towards API stability.\r\n\r\n## What's done\r\n\r\n1. `fetch_schema_version() ` is removed. \r\nIt can be a nasty source of race bugs when schema version is fetched without awaiting for schema agreement. It is especially risky when one awaits schema agreement and subsequently fetches schema version, because the schema version can change in the meantime and schema may no longer be in agreement. To cope with the problem, `await_schema_agreement()` now returns the agreed schema version, and  `fetch_schema_version()` is removed alltogether.\r\n2. `await_schema_agreement()` gets implicit timeout.\r\n    Similarly to\r\n    - what Java driver 3 does in regard to awaiting schema agreement's API,\r\n    - what was recently done in Rust driver in regard to tracing info's API,\r\n    \r\n    the API of awaiting schema agreement is altered so that:\r\n    - `await_timed_schema_agreement()`, which takes explicit timeout, is\r\n      removed,\r\n    - `await_schema_agreement()` is now bound with a timeout that is set\r\n      globally per-`Session` in `SessionConfig`.\r\n\r\n    The motivation is that it could lead to application's deadlock when `await_schema_agreement()` was called with no timeout given and the cluster stoped synchronising (so schema agreement would be never reached), It is rarely desirable to block the calling application for arbitrarily long time, especially that some extreme situations are possible, such as a network partition between nodes.\r\n    \r\n3. `SessionBuilder`s API is accomodated to the changes. Docs are updated as well.\r\n\r\n\r\n\r\n### Bonus\r\n- missing docstrings were added for `AddressTranslator`.\r\n\r\nRefs: #660 \r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/779/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/778", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/778/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/778/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/778/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/778", "id": 1828548229, "node_id": "PR_kwDOEj0F685Ww9rp", "number": 778, "title": "session_builder: move `write_coalescing()` to generic builder", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-31T07:08:51Z", "updated_at": "2024-04-08T09:04:16Z", "closed_at": "2023-07-31T08:20:21Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/778", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/778", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/778.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/778.patch", "merged_at": "2023-07-31T08:20:21Z"}, "body": "When added, `write_coalescing()` method was mistakenly put on `SessionBuilder` instead of `GenericSessionBuilder`. It is moved there, as there is nothing against using it in Cloud.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/778/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/777", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/777/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/777/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/777/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/777", "id": 1828031506, "node_id": "PR_kwDOEj0F685WvOGA", "number": 777, "title": "default policy: Rack awareness without token awareness", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2495049049, "node_id": "MDU6TGFiZWwyNDk1MDQ5MDQ5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/load-balancing", "name": "area/load-balancing", "color": "a221d1", "default": false, "description": ""}, {"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-30T18:43:15Z", "updated_at": "2023-08-03T17:25:42Z", "closed_at": "2023-08-03T17:25:02Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/777", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/777", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/777.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/777.patch", "merged_at": "2023-08-03T17:25:02Z"}, "body": "Until now, the default policy respected rack preference only when it came to replicas.\r\nConsidering non-token-aware queries (e.g. unprepared statements), they would never prioritize the preferred rack.\r\n\r\nNow, local rack nodes are always preferred before other nodes, both in `pick()` and in `fallback()`.\r\nExisting tests adjusted for new behaviour.\r\n\r\nThe PR contains breaking changes, as it slightly changes signature of `ReplicaSet::choose_filtered()` (note the reference added).\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/777/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/776", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/776/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/776/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/776/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/776", "id": 1827994705, "node_id": "PR_kwDOEj0F685WvG8j", "number": 776, "title": "configurable topology refresh duration", "user": {"login": "rishabharyal", "id": 26625693, "node_id": "MDQ6VXNlcjI2NjI1Njkz", "avatar_url": "https://avatars.githubusercontent.com/u/26625693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabharyal", "html_url": "https://github.com/rishabharyal", "followers_url": "https://api.github.com/users/rishabharyal/followers", "following_url": "https://api.github.com/users/rishabharyal/following{/other_user}", "gists_url": "https://api.github.com/users/rishabharyal/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabharyal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabharyal/subscriptions", "organizations_url": "https://api.github.com/users/rishabharyal/orgs", "repos_url": "https://api.github.com/users/rishabharyal/repos", "events_url": "https://api.github.com/users/rishabharyal/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabharyal/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-07-30T16:32:10Z", "updated_at": "2023-08-22T12:34:47Z", "closed_at": "2023-08-22T12:34:47Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/776", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/776", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/776.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/776.patch", "merged_at": "2023-08-22T12:34:47Z"}, "body": "This pull requests a configurable way to topology refresh duration. Two files session.rs and cluster.rs have been modified to set the session configuration and consume the duration configuration respectively.\r\n\r\nNote: I am not sure if we need any test cases in this case as the duration is still provided from where its called. \r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n\r\n\r\nFixes: #232 \r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/776/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/776/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/775", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/775/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/775/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/775/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/775", "id": 1827970607, "node_id": "PR_kwDOEj0F685WvCIn", "number": 775, "title": "default_policy: Builder: forbid preferring rack without specifing datacenter", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/8", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8/labels", "id": 9710159, "node_id": "MI_kwDOEj0F684AlCpP", "number": 8, "title": "0.11.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2023-07-28T10:08:06Z", "updated_at": "2024-01-03T12:35:24Z", "due_on": "2023-11-30T00:00:00Z", "closed_at": "2024-01-03T12:35:24Z"}, "comments": 1, "created_at": "2023-07-30T15:15:41Z", "updated_at": "2023-08-01T08:42:10Z", "closed_at": "2023-08-01T07:45:51Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/775", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/775", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/775.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/775.patch", "merged_at": "2023-08-01T07:45:51Z"}, "body": "This is an API restriction continuing of what has already been done in bb09756a1d97da4a870f87f00c5b2c081e8079b2: as the case of providing preferred rack without specifying the preferred datacenter is invalid, in spirit of the principle _\u201cMake illegal states unrepresentable\u201d_, `DefaultBuilder`'s API is changed accordingly to disallow creating such configuration.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/775/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/774", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/774/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/774/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/774/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/774", "id": 1827864108, "node_id": "PR_kwDOEj0F685WutJf", "number": 774, "title": "codewide: Decrease excessive visibility from `pub` - breaking changes", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-30T09:14:12Z", "updated_at": "2023-08-18T15:26:33Z", "closed_at": "2023-08-18T15:26:27Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/774", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/774", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/774.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/774.patch", "merged_at": "2023-08-18T15:26:27Z"}, "body": "In spirit of the referenced issue, `scylla` crate is saved from the hazardous siege of `pub` qualifiers. This PR collects the changes that I believe to be API-breaking. These changes, however, seem to be relatively benign.\r\n\r\nRefs: #660 \r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/774/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/774/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/773", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/773/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/773/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/773/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/773", "id": 1827863581, "node_id": "PR_kwDOEj0F685WutDH", "number": 773, "title": "codewide: Decrease excessive visibility from `pub` - nonbreaking changes", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-07-30T09:12:18Z", "updated_at": "2023-08-02T06:56:40Z", "closed_at": "2023-08-02T06:32:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/773", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/773", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/773.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/773.patch", "merged_at": "2023-08-02T06:32:58Z"}, "body": "In spirit of the referenced issue, `scylla` crate is saved from the hazardous siege of `pub` qualifiers. This PR collects the changes that I believe to be non-breaking, so that they can be merged immediately.\r\n\r\nRefs: #660 \r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/773/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/772", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/772/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/772/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/772/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/772", "id": 1826727647, "node_id": "PR_kwDOEj0F685Wq8YI", "number": 772, "title": "statement: unpub StatementConfig", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/8", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8/labels", "id": 9710159, "node_id": "MI_kwDOEj0F684AlCpP", "number": 8, "title": "0.11.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2023-07-28T10:08:06Z", "updated_at": "2024-01-03T12:35:24Z", "due_on": "2023-11-30T00:00:00Z", "closed_at": "2024-01-03T12:35:24Z"}, "comments": 0, "created_at": "2023-07-28T16:34:33Z", "updated_at": "2023-07-31T09:25:36Z", "closed_at": "2023-07-31T09:23:44Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/772", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/772", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/772.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/772.patch", "merged_at": "2023-07-31T09:23:44Z"}, "body": "`StatementConfig` is only used internally and does not appear in any public API.\r\n\r\n- It is made `pub(crate)` together with its fields so that we have more flexibility in changing it without introducing a breaking change.\r\n- After that, `retry_policy` field is moved from `Query`, `PreparedStatement` and `Batch` into `StatementConfig`, as it suits there best.\r\n\r\nRefs: #660\r\nFixes: #701 \r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~[ ] I have provided docstrings for the public items that I want to introduce.~\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/772/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/772/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/770", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/770/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/770/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/770/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/770", "id": 1822400053, "node_id": "PR_kwDOEj0F685WcSMO", "number": 770, "title": "Re-resolve hostnames as fallback when control connection is broken", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/8", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8/labels", "id": 9710159, "node_id": "MI_kwDOEj0F684AlCpP", "number": 8, "title": "0.11.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2023-07-28T10:08:06Z", "updated_at": "2024-01-03T12:35:24Z", "due_on": "2023-11-30T00:00:00Z", "closed_at": "2024-01-03T12:35:24Z"}, "comments": 3, "created_at": "2023-07-26T13:16:33Z", "updated_at": "2023-08-28T08:36:25Z", "closed_at": "2023-08-28T08:33:35Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/770", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/770", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/770.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/770.patch", "merged_at": "2023-08-28T08:33:35Z"}, "body": "## Motivation\r\n\r\nSee the referenced issue (#756).\r\n\r\n## What's done\r\n\r\n### Main matter\r\n- **fallback logic is introduced** to `read_metadata()`.\r\nThis is the crucial step in boosting the driver's robustness in case of sudden IP changes in the cluster. In case that the control connection fails to fetch metadata, after all known peers fail to be queried, the fallback phase is entered: addresses of all initially known nodes are resolved again and fetching metadata from them is attempted.\r\nUntil now, if all nodes in the cluster changed their IPs at once (which is particularly easy in a single-node cluster), the driver was unable to contact the cluster ever more. Now, the driver reconnects the control connection with the next metadata fetch attempt (after at most 60 seconds, as configured in `ClusterWorker`), fetches new topology, discovers all nodes' addresses and finally connects to them.\r\n- **control connection reconnect attempts are more frequent.**\r\nIf the control connection is faulty and hence metadata fetch fails, it is advisable that further attempts to reconnect and fetch take place more frequently. The motivation is: if the control connection fails, it is possible that the node has changed its IP and hence we need to fetch new metadata ASAP to discover its new address. Therefore, the `ClusterWorker`'s sleep time is changed from 60 seconds to 1 second once a metadata fetch fails, and is only reverted back to 60 seconds after a fetch succeeds.\r\n- **control connection reconnect attempt begins immediately after it breaks.**\r\nUntil now, if the control connection node changed it IP, we would discover that node only after the next metadata fetch is issued, which would possibly happen only after 60 seconds (if previous fetch succeeded). To make the rediscovery faster, **immediate signalling** that the control connection got broken **is introduced**, so that `ClusterWorker` begins instantly its every-1-second-attempt phase.\r\n\r\n### Bonus\r\n- `ContactPoint` is **renamed** to `ResolvedContactPoint`, to stress its difference from `KnownNode` (which is an unresolved contact point, essentially).\r\n- various node-related structs (`ResolvedContactPoint`, `KnownNode`, `CloudEndpoint`) and hostname resolution-related routines are **moved** from `cluster` and `session` modules to the `node` module. This contributes to making the `session` module cleaner, as well as keeps those entities in the most conceptually related module.\r\n\r\n## Evaluation\r\nManual tests were conducted. They were identical to ones performed before merging the analogous enhancement to gocql. Both single- and multi-node clusters were tested. \r\nThe tests involved random connection breaks between arbitrary nodes and the driver, as well as changes of IPs of all the nodes in the cluster at once.\r\nThe implemented solution showed to be very robust in the tests: immediately after losing control connection, the reconnect-attempt-phase begins. As soon as any node (either one known initially or one known from recently fetched metadata) becomes reachable, a control connection is opened and metadata is fetched successfully, so the whole cluster is discoverable. The driver performed stable, with no fluctuations in behaviour over time.\r\n\r\nFixes: #756 \r\nRefs: #386\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/770/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/769", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/769/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/769/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/769/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/769", "id": 1819379604, "node_id": "PR_kwDOEj0F685WSGaK", "number": 769, "title": "Update deps", "user": {"login": "rukai", "id": 5120858, "node_id": "MDQ6VXNlcjUxMjA4NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5120858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rukai", "html_url": "https://github.com/rukai", "followers_url": "https://api.github.com/users/rukai/followers", "following_url": "https://api.github.com/users/rukai/following{/other_user}", "gists_url": "https://api.github.com/users/rukai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rukai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rukai/subscriptions", "organizations_url": "https://api.github.com/users/rukai/orgs", "repos_url": "https://api.github.com/users/rukai/repos", "events_url": "https://api.github.com/users/rukai/events{/privacy}", "received_events_url": "https://api.github.com/users/rukai/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-07-25T01:19:55Z", "updated_at": "2023-07-28T11:55:36Z", "closed_at": "2023-07-26T06:36:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/769", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/769", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/769.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/769.patch", "merged_at": "2023-07-26T06:36:37Z"}, "body": "## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n\r\nI used https://deps.rs/repo/github/scylladb/scylla-rust-driver to tell which deps are out of date.\r\n\r\nThis PR updates all the out of date dependencies except for the following which are part of the public interface and updating them would be a breaking change:\r\n```\r\nsecrecy\r\nnum_enum\r\nnum-bigint\r\nbigdecimal\r\nstrum\r\n```\r\n\r\nI can include those changes in this PR or a follow up PR if desired. (I dont know if main currently contains breaking changes or not)\r\n\r\nI also left out the histogram crate because upgrading it seems tricky.\r\n\r\nThe only update that required code changes was base64", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/769/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/769/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/768", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/768/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/768/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/768/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/768", "id": 1815930776, "node_id": "PR_kwDOEj0F685WGt9a", "number": 768, "title": "session: remove estimate_replicas_for_query, get_tracing_info_custom", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-21T14:43:06Z", "updated_at": "2023-07-27T15:55:09Z", "closed_at": "2023-07-27T15:55:09Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/768", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/768", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/768.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/768.patch", "merged_at": "2023-07-27T15:55:09Z"}, "body": "This PR removes two public functions from `Session`: `estimate_replicas_for_query` and `get_tracing_info_custom`.\r\n\r\nThose changes are a part of our effort to stabilize the API and reduce the number of pub functions.\r\n\r\nRefs https://github.com/scylladb/scylla-rust-driver/issues/660\r\n\r\n#### `estimate_replicas_for_query`\r\nRemove `estimate_replicas_for_query` from Session. A user of this function can switch to using `get_token_endpoints()` from `ClusterData` directly.\r\n\r\nIt did not make sense for `estimate_replicas_for_query()` to be in `Session`, as this is too much low-level function for `Session` and doesn't fit the abstraction of `Session`.\r\n\r\n#### `get_tracing_info_custom`\r\nRemove `Session::get_tracing_info_custom` - a variant of `Session::get_tracing_info` that allows for additional customization of the fetch process (number of attempts, interval between attempts, consistency level of fetching tracing info). This customization is now moved to `SessionConfig` (as new parameters) and new helper functions were introduced to `SessionBuilder`.\r\n\r\nSince now this customization is on `SessionConfig`, `create_new_session_builder()` in `test_utils.rs` returns a `SessionBuilder` with pre-configured large number of `TracingInfo` fetch attempts, longer delays (to account for a slow CI). Previously each tracing test had to configure it on its own by using `get_tracing_info_custom`.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [X] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/768/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/767", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/767/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/767/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/767/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/767", "id": 1815911331, "node_id": "PR_kwDOEj0F685WGpxo", "number": 767, "title": "batch: remove re-export of consistency enums", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-21T14:30:17Z", "updated_at": "2023-07-21T14:46:46Z", "closed_at": "2023-07-21T14:46:45Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/767", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/767", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/767.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/767.patch", "merged_at": "2023-07-21T14:46:45Z"}, "body": "Remove re-export of consistency enums in batch.rs:\r\n- `scylla:statement::batch::Consistency`\r\n- `scylla:statement::batch::SerialConsistency`\r\n\r\nA user of the driver should instead use:\r\n- `scylla:statement::Consistency`\r\n- `scylla:statement::SerialConsistency`\r\n\r\nThis change is a part of our effort to stabilize the API and reduce the number of pub exports.\r\n\r\nRefs #660\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/767/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/767/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/766", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/766/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/766/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/766/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/766", "id": 1815849372, "node_id": "PR_kwDOEj0F685WGcVA", "number": 766, "title": "session: include partition key in RequestSpan in human readable form", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-21T13:51:15Z", "updated_at": "2023-07-26T11:11:13Z", "closed_at": "2023-07-26T11:11:12Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/766", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/766", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/766.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/766.patch", "merged_at": "2023-07-26T11:11:12Z"}, "body": "This PR changes the format used by `RequestSpan` to represent the partition key for a given query. Previously, it was the same representation that the driver creates before applying MurmurHash3 to it, encoded in base64 - the format is documented so technically users can decode it themselves, but it's quite inconvenient. Now, the driver decodes the contents of the partition key and represents it in a human-readable form, similar to the CQL syntax.\r\n\r\nFor example, given the schema\r\n\r\n```cql\r\ncreate table ks.t (pk1 int, pk2 time, pk3 frozen<set<text>>, primary key(pk1, pk2, pk3));\r\n```\r\n\r\nand the request\r\n\r\n```rust\r\nsession\r\n    .execute(\r\n        &prepared,\r\n        (\r\n            6622i32,\r\n            Time(chrono::Duration::seconds(12323)),\r\n            vec![\"quick\", \"brown\", \"fox\"],\r\n        ),\r\n    )\r\n    .await\r\n    .unwrap();\r\n```\r\n\r\npreviously, the encoded key would look like this:\r\n\r\n```\r\npartition_key=0004000019de00000800000b352c099e0000001d0000000300000005717569636b0000000562726f776e00000003666f7800\r\n```\r\n\r\nbut now it looks like this:\r\n\r\n```\r\npartition_key=6622,'03:25:23.000000000',{'quick','brown','fox'}\r\n```\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/720\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/766/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/766/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/764", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/764/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/764/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/764/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/764", "id": 1812238205, "node_id": "PR_kwDOEj0F685V6Gwf", "number": 764, "title": "frame: reduce visibility of several funcs/consts", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/3", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3/labels", "id": 9196161, "node_id": "MI_kwDOEj0F684AjFKB", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2023-03-23T10:47:53Z", "updated_at": "2025-03-25T13:55:49Z", "due_on": "2025-02-15T00:00:00Z", "closed_at": "2025-03-06T10:28:21Z"}, "comments": 0, "created_at": "2023-07-19T15:50:17Z", "updated_at": "2023-07-20T07:11:17Z", "closed_at": "2023-07-20T07:11:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/764", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/764", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/764.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/764.patch", "merged_at": "2023-07-20T07:11:17Z"}, "body": "Reduce visibility of several functions and constants which are only used internally within `frame` and don't have to be exposed publicly. In this patch only the most obvious ones are tackled (ones that require a change solely in `scylla-cql`). This change is a part of our effort to stabilize the API.\r\n\r\nRefs #660\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/764/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/764/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/763", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/763/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/763/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/763/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/763", "id": 1812177785, "node_id": "PR_kwDOEj0F685V55Zs", "number": 763, "title": "connection: remove re-export of QueryResult", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/3", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3/labels", "id": 9196161, "node_id": "MI_kwDOEj0F684AjFKB", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2023-03-23T10:47:53Z", "updated_at": "2025-03-25T13:55:49Z", "due_on": "2025-02-15T00:00:00Z", "closed_at": "2025-03-06T10:28:21Z"}, "comments": 3, "created_at": "2023-07-19T15:17:05Z", "updated_at": "2023-07-20T07:34:31Z", "closed_at": "2023-07-20T07:34:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/763", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/763", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/763.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/763.patch", "merged_at": "2023-07-20T07:34:30Z"}, "body": "Remove re-export of `QueryResult` (from `scylla::transport::query_result::QueryResult` to `scylla::transport::connection::QueryResult`). The motivation for this change is to reduce the number of re-exports in the codebase (some of them don't make sense and are there for legacy reasons), as a part of our effort of stabilizing the API.\r\n\r\nIt probably makes sense to follow this up with moving `QueryResult` from `transport/` module to a more appropriate module (`query/` module?).\r\n\r\nRefs #660\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/763/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/762", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/762/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/762/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/762/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/762", "id": 1812073343, "node_id": "PR_kwDOEj0F685V5isu", "number": 762, "title": "routing: remove Node struct", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/3", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3/labels", "id": 9196161, "node_id": "MI_kwDOEj0F684AjFKB", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2023-03-23T10:47:53Z", "updated_at": "2025-03-25T13:55:49Z", "due_on": "2025-02-15T00:00:00Z", "closed_at": "2025-03-06T10:28:21Z"}, "comments": 0, "created_at": "2023-07-19T14:23:58Z", "updated_at": "2023-07-20T09:13:54Z", "closed_at": "2023-07-20T09:13:54Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/762", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/762", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/762.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/762.patch", "merged_at": "2023-07-20T09:13:54Z"}, "body": "Remove struct `scylla::routing::Node` from `routing.rs`. This structure was introduced in 2020 in 1c8df890d6419e4612fbdbb4aef1fb68c35ffb88 and it is unused in our current code (and it looks like the original commit didn't even use it at all). \r\n\r\nMoreover, this struct clashes with `scylla::transport::Node` making it error-prone to find the wrong `Node` struct for a user of the driver. The deleted `Node` structure also relied solely on `SocketAddr`, while we  want to identify the nodes by `host_id` (as in `scylla::transport::Node`).\r\n\r\nRefs #660\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/762/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/762/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/761", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/761/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/761/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/761/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/761", "id": 1803180696, "node_id": "PR_kwDOEj0F685VbeTX", "number": 761, "title": "Switch from Docker Compose V1 to V2, use \"--wait\" flag", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-13T14:42:37Z", "updated_at": "2023-07-17T09:31:18Z", "closed_at": "2023-07-17T09:31:18Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/761", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/761", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/761.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/761.patch", "merged_at": "2023-07-17T09:31:18Z"}, "body": "As per Docker documentation: \r\n> From July 2023 Docker Compose V1 stopped receiving updates. It\u2019s also no longer available in new releases of Docker Desktop.\r\n\r\nTherefore, the first patch replaces all uses of Docker Compose V1 (`docker-compose` command) with Docker Compose V2 (`docker compose` command).\r\n\r\nThat change allows for using the `--wait` flag, which makes Docker wait for all healthchecks to be in \"healthy\" state. Since `docker-compose.yml` files in this repository use `cqlsh` to determine the health of a container, this means that Docker will wait for all nodes of the cluster to be fully bootstrapped and their CQL port ready.\r\n\r\nBy using this flag, this fixes a potential problem in CI - previously the code would not wait for the last node to be fully started. \r\nAdditionally, `wait.sh` script can be deleted (this logic now handled by Docker Compose V2).\r\n\r\n## Pre-review checklist\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/761/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/761/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/760", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/760/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/760/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/760/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/760", "id": 1803127535, "node_id": "PR_kwDOEj0F685VbSxT", "number": 760, "title": "Fix GitHub Actions warnings in CI", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-13T14:14:58Z", "updated_at": "2023-07-17T09:30:50Z", "closed_at": "2023-07-17T09:30:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/760", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/760", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/760.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/760.patch", "merged_at": "2023-07-17T09:30:50Z"}, "body": "Before this PR, GitHub Actions would warn that `actions/checkout@v2` and `actions-rs/toolchain@v1` use deprecated functionality:\r\n\r\n> The following actions uses node12 which is deprecated and will be forced to run on node16: actions/checkout@v2, actions-rs/toolchain@v1. For more info: https://github.blog/changelog/2023-06-13-github-actions-all-actions-will-run-on-node16-instead-of-node12-by-default/\r\n\r\n> The `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/\r\n\r\nThose warnings are fixed in this PR by:\r\n- Updating the version of `actions/checkout` action (from `@v2` to `@v3`)\r\n- Removing use of `actions-rs/toolchain@v1` action: This action is no longer maintaned and there isn't a new version that fixes the problems. It can be easily replaced by executing two `rustup` commands.\r\n\r\n## Pre-review checklist\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/760/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/758", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/758/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/758/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/758/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/758", "id": 1793785629, "node_id": "PR_kwDOEj0F685U7hjS", "number": 758, "title": "Stateful partitioners", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4712022841, "node_id": "LA_kwDOEj0F688AAAABGNvDOQ", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/performance", "name": "performance", "color": "1D76DB", "default": false, "description": "Improves performance of existing features"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/8", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/8/labels", "id": 9710159, "node_id": "MI_kwDOEj0F684AlCpP", "number": 8, "title": "0.11.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 12, "state": "closed", "created_at": "2023-07-28T10:08:06Z", "updated_at": "2024-01-03T12:35:24Z", "due_on": "2023-11-30T00:00:00Z", "closed_at": "2024-01-03T12:35:24Z"}, "comments": 10, "created_at": "2023-07-07T15:58:36Z", "updated_at": "2024-03-05T13:05:20Z", "closed_at": "2023-08-22T09:06:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/758", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/758", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/758.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/758.patch", "merged_at": "2023-08-22T09:06:58Z"}, "body": "\r\n## Motivation\r\nCurrently, partitioners require the whole input to be passed in a single contiguous slice, which often forces an allocation that could else be avoided.\r\n\r\n## What's done\r\n1. **Partitioners' API is refactored** so it resembles `std::hash` API:\r\n    - `Partitioner` corresponds to `BuildHasher` as it becomes kind of a factory,\r\n    - `PartitionerHasher` is introduced and corresponds to `Hasher`. It contains the hashing state, which enables feeding it with multiple chunks of data separately.\r\nA **test** is added that **ensures consistent hashing result** no matter how the partition key is partitioned into chunks.\r\n2. After the partitioners gain ability to partition by chunks, the codebase is modified so that **all needless allocations of partition key are avoided**, i.e., allocations that only served the purpose of calculating token.\r\nTo this end, `PartitionKey` struct is introduced, whose motivation is as follows: the algorithm for computing partition key for a given prepared statement and bound values can be divided into steps. The first of them involves extracting values that consistute the partition key and putting them in proper partition key order. `PartitionKey` performs this step on construction, and serves as an entry point for further steps, with token calculation among others. For those further steps to be done, an iterator over partition key values is accessible, which yields pairs _(value, spec)_ for each column that constitutes partition key, in partition key order.\r\n3. As **there was one more place** where materialised partition key was used - by decoding it into the produced trace - an adaptor is introduced that operates on `PartitionKey`'s iterator provides values to be deserialised by the mechanism added recently in #766. **Allocation is then saved there**, too.\r\n4. **An API cleanup is done** regarding partition key and token computation. `calculate_token_from_partition_key()` is moved to `partitioner.rs`, `calculate_token()` to `prepared_statement.rs`, and a number of helper functions are deleted as no longer needed.\r\n\r\n## Pre-review checklist\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/758/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/757", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/757/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/757/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/757/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/757", "id": 1789068816, "node_id": "PR_kwDOEj0F685Urap8", "number": 757, "title": "Calculate token without preparing", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/7", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7/labels", "id": 9597943, "node_id": "MI_kwDOEj0F684AknP3", "number": 7, "title": "0.9.0", "description": "", "creator": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-06-29T09:04:46Z", "updated_at": "2023-07-28T10:08:37Z", "due_on": null, "closed_at": "2023-07-28T10:08:37Z"}, "comments": 1, "created_at": "2023-07-05T08:39:40Z", "updated_at": "2023-07-20T11:37:42Z", "closed_at": "2023-07-06T10:28:51Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/757", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/757", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/757.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/757.patch", "merged_at": "2023-07-06T10:28:51Z"}, "body": "The function `Session::calculate_token_for_partition_key()` is added and tested. It enables computing the token without prior preparing, straight from a given partitioner and a serialized partition key.\r\n\r\nFixes: #746\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/757/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/755", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/755/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/755/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/755/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/755", "id": 1784024074, "node_id": "PR_kwDOEj0F685UaWeJ", "number": 755, "title": "scylla/Cargo.toml: bump the tracing dependency to 0.1.36", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-01T15:37:13Z", "updated_at": "2023-07-04T06:51:02Z", "closed_at": "2023-07-04T06:51:02Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/755", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/755", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/755.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/755.patch", "merged_at": "2023-07-04T06:51:02Z"}, "body": "The #668 PR introduced changes that require new features from the `tracing` crate. Bump the depdendency to `0.1.36` which supports all required features.\r\n\r\nAdditionally, the dependency is also updated in the quickstart guide.\r\n\r\nFixes: #754\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/755/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/755/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/753", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/753/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/753/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/753/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/753", "id": 1783745232, "node_id": "PR_kwDOEj0F685UZYjd", "number": 753, "title": "Proceed on unresolvable hostname", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/7", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7/labels", "id": 9597943, "node_id": "MI_kwDOEj0F684AknP3", "number": 7, "title": "0.9.0", "description": "", "creator": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-06-29T09:04:46Z", "updated_at": "2023-07-28T10:08:37Z", "due_on": null, "closed_at": "2023-07-28T10:08:37Z"}, "comments": 2, "created_at": "2023-07-01T09:42:31Z", "updated_at": "2023-07-06T13:48:32Z", "closed_at": "2023-07-06T13:37:56Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/753", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/753", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/753.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/753.patch", "merged_at": "2023-07-06T13:37:56Z"}, "body": "A user encountered a following problem:\r\n> Rust Driver wasn't able to start if one of the configured nodes was not available\r\n\r\nThis was found to be caused by the hostname resolution logic, which considered failure in resolving any hostname to be a critical error.\r\nAs it makes more sense to fail only when we end up with no contact points with known resolved addresses, in that case, a new variant is returned: `NewSessionError::FailedToResolveAnyHostname`, else initialisation continues successfully.\r\nThe new behaviour is automatically tested.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/753/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/752", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/752/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/752/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/752/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/752", "id": 1780554035, "node_id": "PR_kwDOEj0F685UOjwO", "number": 752, "title": "CI: use ubuntu-20.04 in serverless workflow", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-29T10:37:18Z", "updated_at": "2023-06-29T15:28:57Z", "closed_at": "2023-06-29T15:28:56Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/752", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/752", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/752.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/752.patch", "merged_at": "2023-06-29T15:28:56Z"}, "body": "ccm requries Python 2 when creating a serverless cluster. Installing Python 2 with actions/setup-python@v2 is now deprecated, so we solve it by explicitly using ubuntu-20.04 runners, which have it installed.\r\n\r\nCloses #751\r\n\r\n## Pre-review checklist\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [X] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/752/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/750", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/750/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/750/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/750/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/750", "id": 1779121801, "node_id": "PR_kwDOEj0F685UJp5j", "number": 750, "title": "Make `CloudConfig` public", "user": {"login": "Gor027", "id": 29541844, "node_id": "MDQ6VXNlcjI5NTQxODQ0", "avatar_url": "https://avatars.githubusercontent.com/u/29541844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gor027", "html_url": "https://github.com/Gor027", "followers_url": "https://api.github.com/users/Gor027/followers", "following_url": "https://api.github.com/users/Gor027/following{/other_user}", "gists_url": "https://api.github.com/users/Gor027/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gor027/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gor027/subscriptions", "organizations_url": "https://api.github.com/users/Gor027/orgs", "repos_url": "https://api.github.com/users/Gor027/repos", "events_url": "https://api.github.com/users/Gor027/events{/privacy}", "received_events_url": "https://api.github.com/users/Gor027/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-06-28T14:46:37Z", "updated_at": "2023-06-30T14:37:37Z", "closed_at": "2023-06-30T14:37:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/750", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/750", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/750.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/750.patch", "merged_at": "2023-06-30T14:37:36Z"}, "body": "Allows to construct `CloudConfig` and manually set it in `SessionConfig`. It will also help to add serverless support in C++ bindings.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/750/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/743", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/743/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/743/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/743/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/743", "id": 1753157437, "node_id": "PR_kwDOEj0F685Sy27g", "number": 743, "title": "Fix RoutingInfo consistency", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/7", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7/labels", "id": 9597943, "node_id": "MI_kwDOEj0F684AknP3", "number": 7, "title": "0.9.0", "description": "", "creator": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-06-29T09:04:46Z", "updated_at": "2023-07-28T10:08:37Z", "due_on": null, "closed_at": "2023-07-28T10:08:37Z"}, "comments": 0, "created_at": "2023-06-12T16:54:29Z", "updated_at": "2023-07-28T06:12:21Z", "closed_at": "2023-07-27T17:08:25Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/743", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/743", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/743.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/743.patch", "merged_at": "2023-07-27T17:08:25Z"}, "body": "A bug has been found that put wrong `Consistency` and `SerialConsistency` into `RoutingInfo`. In order to:\r\n- be sure that it's fully fixed,\r\n- prevent regressions,\r\n- check consistencies in other contexts,\r\n\r\nthe following is done:\r\n- proxy acquires deserialization capabilities for request frames; it understands `Query`, `Execute` and `Batch` frames,\r\n- a test is added to check that request frames contains consistencies that match the specified ones,\r\n- a test is added to check that `RoutingInfo` for `LoadBalancingPolicy` contains the specified consistencies,\r\n- as the latter test confirms the bug in `Session`, the affected methods are fixed,\r\n- minor refactor is done in `Session` to make fiddling with consistency clearer,\r\n- bonus: utilities for single-node dry-mode cluster are added, based on the bindings' test implementation. These will most probably prove useful for writing future tests.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/743/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/743/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/740", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/740/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/740/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/740/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/740", "id": 1746084709, "node_id": "PR_kwDOEj0F685SbH5I", "number": 740, "title": "scylla_cql: autoderive Default for Consistency", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/7", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7/labels", "id": 9597943, "node_id": "MI_kwDOEj0F684AknP3", "number": 7, "title": "0.9.0", "description": "", "creator": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-06-29T09:04:46Z", "updated_at": "2023-07-28T10:08:37Z", "due_on": null, "closed_at": "2023-07-28T10:08:37Z"}, "comments": 3, "created_at": "2023-06-07T14:48:45Z", "updated_at": "2024-03-05T13:05:26Z", "closed_at": "2023-07-27T05:32:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/740", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/740", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/740.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/740.patch", "merged_at": "2023-07-27T05:32:58Z"}, "body": "As the [awaited issue](https://github.com/illicitonion/num_enum/issues/75) in `num_enum` crate has been resolved in its 0.6 release, it is now possible to derive Default for Consistency automatically.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/740/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/737", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/737/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/737/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/737/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/737", "id": 1738009184, "node_id": "PR_kwDOEj0F685R_hTD", "number": 737, "title": "docs: update theme 1.5", "user": {"login": "dgarcia360", "id": 9107969, "node_id": "MDQ6VXNlcjkxMDc5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/9107969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgarcia360", "html_url": "https://github.com/dgarcia360", "followers_url": "https://api.github.com/users/dgarcia360/followers", "following_url": "https://api.github.com/users/dgarcia360/following{/other_user}", "gists_url": "https://api.github.com/users/dgarcia360/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgarcia360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgarcia360/subscriptions", "organizations_url": "https://api.github.com/users/dgarcia360/orgs", "repos_url": "https://api.github.com/users/dgarcia360/repos", "events_url": "https://api.github.com/users/dgarcia360/events{/privacy}", "received_events_url": "https://api.github.com/users/dgarcia360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-06-02T11:21:07Z", "updated_at": "2023-06-07T07:49:50Z", "closed_at": "2023-06-07T07:49:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/737", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/737", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/737.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/737.patch", "merged_at": "2023-06-07T07:49:50Z"}, "body": "Related issue https://github.com/scylladb/sphinx-scylladb-theme/issues/774\r\n\r\nScyllaDB Sphinx Theme 1.5 is now released \ud83e\udd73 This update introduces an interactive feature to receive feedback, allowing readers to like or dislike documentation pages. It also includes subtle user interface enhancements and resolves an existing issue related to the sitemap extension. \r\n\r\nYou can read more about all notable changes [here](https://sphinx-theme.scylladb.com/master/upgrade/CHANGELOG.html#may-2023).\r\n\r\n## How to test this PR\r\n\r\n1. Clone this PR. For more information, see [Cloning pull requests locally](https://docs.github.com/en/github/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally).\r\n\r\n2. Enter the docs folder, and run:\r\n  \r\n    ```\r\n    make preview\r\n    ````\r\n\r\n3. Open http://localhost:5500 with your favorite browser. The doc should render without errors, and the version should be Sphinx Theme version (see the footer) must be ``1.5.x``:\r\n\r\n    ![image](https://github.com/scylladb/python-driver/assets/9107969/f076ba3c-62a8-4b96-9ab0-d51dfbd22a51)\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/737/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/735", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/735/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/735/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/735/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/735", "id": 1736691428, "node_id": "PR_kwDOEj0F685R7AkU", "number": 735, "title": "connection: Add configurable TCP keepalives", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-06-01T16:28:05Z", "updated_at": "2023-07-24T09:56:43Z", "closed_at": "2023-06-05T13:47:20Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/735", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/735", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/735.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/735.patch", "merged_at": "2023-06-05T13:47:19Z"}, "body": "Similarly to other drivers, support for TCP-layer keepalives is added. This is possible, because tokio::net::TcpStream finally implements `AsFd`. This enables creating `socket2::SockRef`, which in turn allows for configuring the underlying socket.\r\nFixes: #132 \r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/735/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/735/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/734", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/734/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/734/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/734/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/734", "id": 1736479865, "node_id": "PR_kwDOEj0F685R6ReO", "number": 734, "title": "CI: Bound all workflows with a timeout", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-06-01T14:42:40Z", "updated_at": "2023-07-24T09:57:10Z", "closed_at": "2023-06-07T14:59:59Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/734", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/734", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/734.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/734.patch", "merged_at": "2023-06-07T14:59:59Z"}, "body": "As it may happen that a pushed PR triggers a nonterminating test, it is desirable to automatically timeout such CI runs. This commit adds timeouts that have been empirically tested to suffice (by past experience with CI execution time).\r\n\r\nFixes: #721\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/734/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/734/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/733", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/733/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/733/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/733/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/733", "id": 1733665609, "node_id": "PR_kwDOEj0F685RwpHm", "number": 733, "title": "Latency awareness: add `scale` parameter", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/7", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7/labels", "id": 9597943, "node_id": "MI_kwDOEj0F684AknP3", "number": 7, "title": "0.9.0", "description": "", "creator": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-06-29T09:04:46Z", "updated_at": "2023-07-28T10:08:37Z", "due_on": null, "closed_at": "2023-07-28T10:08:37Z"}, "comments": 1, "created_at": "2023-05-31T08:35:27Z", "updated_at": "2023-07-03T13:28:59Z", "closed_at": "2023-07-03T12:37:20Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/733", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/733", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/733.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/733.patch", "merged_at": "2023-07-03T12:37:20Z"}, "body": "The parameter was omited accidentally while porting.\r\n\r\nTo the best of my understanding of the previous version of the code, the scale that was implicitly used before was equal to **1 second**. The new default value is, in line with other drivers, **100 milliseconds**. This implies that this is an API-breaking change.\r\n\r\nFixes: #650\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/733/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/731", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/731/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/731/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/731/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/731", "id": 1728107111, "node_id": "PR_kwDOEj0F685Rd2YR", "number": 731, "title": "Close connections on no response to keepalives ", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-05-26T19:05:36Z", "updated_at": "2023-07-24T09:56:44Z", "closed_at": "2023-06-05T16:03:48Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/731", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/731", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/731.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/731.patch", "merged_at": "2023-06-05T16:03:48Z"}, "body": "This PR aims to add a feature that has been supported in other drivers: closing connections when not receiving responses to keepalives. To do so:\r\n- `SessionBuilder`, `SessionConfig` and `ConnectionConfig` get new parameter: `keepalive_timeout`,\r\n- `Keepaliver` is refactored so that it no longer resides in the connection pool layer, but...\r\n- ...it is moved into `Connection` layer, more specifically into `router`. This enables clean closing connection when the keepalive timeout elapses without receiving a response,\r\n- a test is added for the new feature.\r\n\r\nFixes: #718\r\n\r\n## Pre-review checklist\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/731/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/731/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/730", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/730/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/730/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/730/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/730", "id": 1727933675, "node_id": "PR_kwDOEj0F685RdQm7", "number": 730, "title": "Integration tests single binary", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 0, "created_at": "2023-05-26T16:41:27Z", "updated_at": "2023-06-07T09:41:50Z", "closed_at": "2023-05-31T07:08:42Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/730", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/730", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/730.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/730.patch", "merged_at": "2023-05-31T07:08:42Z"}, "body": "Refactor of integration tests into single binary.\r\n\r\nThis, according to https://matklad.github.io/2021/02/27/delete-cargo-integration-tests leads to faster compilation, integration tests run paralelly and smaller artifacts size.\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/730/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/730/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/729", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/729/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/729/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/729/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/729", "id": 1725829687, "node_id": "PR_kwDOEj0F685RWHHV", "number": 729, "title": "exec_profile: Default to SerialConsistency::LocalSerial", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 0, "created_at": "2023-05-25T13:26:04Z", "updated_at": "2024-03-05T13:05:34Z", "closed_at": "2023-06-02T05:18:59Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/729", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/729", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/729.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/729.patch", "merged_at": "2023-06-02T05:18:59Z"}, "body": "Contrary to what is stated in documentation, the default SerialConsistency was None, which resulted in SerialConsistency not being set in the CQL frames. This led to ProtocolError in case of LWT statements. As it is better to always include SerialConsistency (even for statements for which it is not relevant), the previous default is reverted.\r\n\r\nRef: https://github.com/scylladb/scylla-enterprise/issues/2970\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[] I added relevant tests for new features and bug fixes.~~\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/729/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/729/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/728", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/728/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/728/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/728/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/728", "id": 1724838091, "node_id": "PR_kwDOEj0F685RSxQf", "number": 728, "title": "examples: remove clone.rs example", "user": {"login": "cvybhu", "id": 36861778, "node_id": "MDQ6VXNlcjM2ODYxNzc4", "avatar_url": "https://avatars.githubusercontent.com/u/36861778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cvybhu", "html_url": "https://github.com/cvybhu", "followers_url": "https://api.github.com/users/cvybhu/followers", "following_url": "https://api.github.com/users/cvybhu/following{/other_user}", "gists_url": "https://api.github.com/users/cvybhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/cvybhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cvybhu/subscriptions", "organizations_url": "https://api.github.com/users/cvybhu/orgs", "repos_url": "https://api.github.com/users/cvybhu/repos", "events_url": "https://api.github.com/users/cvybhu/events{/privacy}", "received_events_url": "https://api.github.com/users/cvybhu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-05-24T22:57:15Z", "updated_at": "2023-06-07T11:17:27Z", "closed_at": "2023-06-07T11:17:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/728", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/728", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/728.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/728.patch", "merged_at": "2023-06-07T11:17:26Z"}, "body": "`clone.rs` is an old example that uses `SessionBuilder` to build many copies of `Session`.\r\n\r\nI think this example is harmful because it promotes the use of multiple Sessions, which is usually a bad idea.\r\n\r\nOne user started using multiple `Sessions` instead of `Arc<Session>` because they saw such approach in this example: https://github.com/scylladb/scylla-rust-driver/issues/724#issuecomment-1557645457\r\n\r\nThe example itself isn't very useful. It just uses a Builder to Build sessions, this isn't anything tricky, it's what's expected of the Builder pattern.\r\n\r\nI think it would be better to remove it to avoid misleading the users.\r\n\r\nFixes: #727\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/728/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/728/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/726", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/726/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/726/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/726/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/726", "id": 1720270065, "node_id": "PR_kwDOEj0F685RDG8Z", "number": 726, "title": "treewide: remove usages of SimpleStrategy", "user": {"login": "cvybhu", "id": 36861778, "node_id": "MDQ6VXNlcjM2ODYxNzc4", "avatar_url": "https://avatars.githubusercontent.com/u/36861778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cvybhu", "html_url": "https://github.com/cvybhu", "followers_url": "https://api.github.com/users/cvybhu/followers", "following_url": "https://api.github.com/users/cvybhu/following{/other_user}", "gists_url": "https://api.github.com/users/cvybhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/cvybhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cvybhu/subscriptions", "organizations_url": "https://api.github.com/users/cvybhu/orgs", "repos_url": "https://api.github.com/users/cvybhu/repos", "events_url": "https://api.github.com/users/cvybhu/events{/privacy}", "received_events_url": "https://api.github.com/users/cvybhu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2023-05-22T18:59:48Z", "updated_at": "2023-06-16T07:17:00Z", "closed_at": "2023-06-16T07:16:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/726", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/726", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/726.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/726.patch", "merged_at": "2023-06-16T07:16:59Z"}, "body": "As described in https://github.com/scylladb/scylladb/issues/8638, we're moving away from `SimpleStrategy`, in the future it will become deprecated.\r\n\r\nWe should remove all uses of it and replace them with `NetworkTopologyStrategy`.\r\n\r\nThe typical way to use `NetworkTopologyStrategy` is to specify a replication factor for each datacenter. This could be a bit cumbersome, we would have to fetch the list of datacenters, set the repfactors, etc.\r\n\r\nLuckily there is another way - we can just specify a replication factor to use for or each existing datacenter, like this:\r\n```cql\r\nCREATE KEYSPACE {} WITH REPLICATION = {'class' : 'NetworkTopologyStrategy', 'replication_factor' : 1};\r\n```\r\n\r\nThis makes the change rather straightforward - just replace all instances of `'SimpleStrategy'`, with `'NetworkTopologyStrategy'`.\r\n\r\nFixes: #613\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/726/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/725", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/725/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/725/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/725/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/725", "id": 1719638550, "node_id": "PR_kwDOEj0F685RA8l_", "number": 725, "title": "connection: make it possible to switch off write coalescing", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-05-22T12:58:10Z", "updated_at": "2023-06-05T15:29:56Z", "closed_at": "2023-06-05T15:29:56Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/725", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/725", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/725.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/725.patch", "merged_at": "2023-06-05T15:29:56Z"}, "body": "Each connection is managed by a tokio task that reads from and writes to a single socket. The task (called internally as \"router\") polls, amongst others, a future that collects write requests from a channel and pushes them to the socket. It currently has a heuristic that is meant to be a throughput optimization: if there are no more write requests on the channel, the future yields, hoping to give an opportunity for more write requests to arrive on the channel. This improves efficiency as it allows more requests to be batched together into a single write and reduces the number of syscalls issued.\r\n\r\nThe described optimization was implemented in:\r\ne1c0b6f3b48eac2f60c043c05fc0b806189788c4\r\n\r\nHowever, this optimization obviously can cause worse latency in some scenarios. For example, if there aren't many requests being issued but the application otherwise runs lots of unrelated tokio tasks, then a yielded task can be rescheduled again only after a significant delay. If the request rate is low enough then batching won't ever bring any benefit but will only make the latency worse.\r\n\r\nIn order to help in those scenarios, this commit adds a flag that allows turning off the write coalescing optimization. Write coalescing is kept turned on by default, but it can be easily disabled when constructing a new session.\r\n\r\nResults of a test with modified cql-stress that runs 100 tasks which spin for 0.25ms and then yield, in a loop (https://github.com/piodul/cql-stress/commit/f20050e3a3514af20f431e0c4c187cd254500fbd):\r\n\r\n```\r\ncargo run --release --bin cql-stress-scylla-bench -- -max-rate 10000 -mode write -workload uniform -partition-count 128 -concurrency 16 -nodes 127.0.0.1 -duration 10s -noise-task-count 100 -noise-task-hog-duration 250us\r\n```\r\n\r\nWith the coalescing optimization _enabled_:\r\n\r\n```\r\n  99h:          11.5ms\r\n  95h:          7.21ms\r\n  90h:          6.25ms\r\n  median:       3.74ms\r\n  mean:         4.11ms\r\n```\r\n\r\nWith the coalescing optimization _disabled_:\r\n\r\n```\r\n  99h:          6.24ms\r\n  95h:          4.89ms\r\n  90h:          4.25ms\r\n  median:       2.32ms\r\n  mean:         2.44ms\r\n```\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/725/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/723", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/723/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/723/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/723/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/723", "id": 1704738730, "node_id": "PR_kwDOEj0F685QPGOD", "number": 723, "title": "Fixes chrono vulnerability caused by time dependency", "user": {"login": "sagoez", "id": 39674930, "node_id": "MDQ6VXNlcjM5Njc0OTMw", "avatar_url": "https://avatars.githubusercontent.com/u/39674930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sagoez", "html_url": "https://github.com/sagoez", "followers_url": "https://api.github.com/users/sagoez/followers", "following_url": "https://api.github.com/users/sagoez/following{/other_user}", "gists_url": "https://api.github.com/users/sagoez/gists{/gist_id}", "starred_url": "https://api.github.com/users/sagoez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sagoez/subscriptions", "organizations_url": "https://api.github.com/users/sagoez/orgs", "repos_url": "https://api.github.com/users/sagoez/repos", "events_url": "https://api.github.com/users/sagoez/events{/privacy}", "received_events_url": "https://api.github.com/users/sagoez/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-10T23:12:52Z", "updated_at": "2023-05-11T16:04:16Z", "closed_at": "2023-05-11T16:04:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/723", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/723", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/723.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/723.patch", "merged_at": "2023-05-11T16:04:15Z"}, "body": "Fixes #722 \r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/723/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/723/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/719", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/719/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/719/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/719/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/719", "id": 1702243813, "node_id": "PR_kwDOEj0F685QGuYv", "number": 719, "title": "CI: add RUST_BACKTRACE=full env variable to the workflows", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 1, "created_at": "2023-05-09T15:10:30Z", "updated_at": "2023-06-07T09:41:45Z", "closed_at": "2023-05-12T14:04:41Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/719", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/719", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/719.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/719.patch", "merged_at": "2023-05-12T14:04:41Z"}, "body": "Currently, if a test panics in CI, a panic message will be printed which does not contain too much of the context. For example:\r\n\r\n    thread 'transport::session_test::test_tracing' panicked at 'No rows for tracing with this session id!', scylla/src/transport/session_test.rs:1093:5\r\n\r\nFrom this information, it's not always possible to learn much about the issue. In this particular case, the `test_tracing` case calls the function which panicked from multiple places and it's impossible to tell which place has this problem specifically.\r\n\r\nTo help with debugging such issues, this commit modifies the workflow definitions to set the `RUST_BACKTRACE` environment variable. This will make sure that the panic will print a full backtrace from the place where this panic originated from, which should help narrow down the code path that failed.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [?] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/719/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/719/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/717", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/717/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/717/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/717/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/717", "id": 1687087847, "node_id": "PR_kwDOEj0F685PT0Gc", "number": 717, "title": "LWT routing optimisation: plan contains replicas in ring order", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4712022841, "node_id": "LA_kwDOEj0F688AAAABGNvDOQ", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/performance", "name": "performance", "color": "1D76DB", "default": false, "description": "Improves performance of existing features"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 5, "created_at": "2023-04-27T15:27:47Z", "updated_at": "2024-03-05T13:05:36Z", "closed_at": "2023-05-31T10:20:38Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/717", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/717", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/717.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/717.patch", "merged_at": "2023-05-31T10:20:38Z"}, "body": "While routing statements that are confirmed LWTs, replicas are never shuffled but instead attempted in the ring order. This is done according to https://github.com/scylladb/gocql/issues/40.\r\n\r\n### `ReplicaSet` currently\r\nIn case of Network Topology Strategy, the replica iterator we obtain from the `ReplicaLocator` (`ReplicaSetIterator`) does not yield replicas in the ring order.\r\n\r\n### Meet `ReplicasOrdered`\r\nTo support that, `ReplicasOrdered` struct is added and constructible from `ReplicaSet`. It is also convertible into `ReplicasOrderedIterator`, which does yield replicas in the ring order.\r\n\r\n### Costs incurred\r\nThe first call to `next()` on `ReplicasOrderedIterator` is cheap, because the primary replica can be computed cheaply, and this suits the `pick()` method.\r\nThe second call to `next()` is expensive, because all the replicas are materialised in a vector (there is no cheap way to compute the second replica and so on). All subsequent calls are cheap (because replicas are already computed). This suits the `fallback()` method expected high cost. Because of this characteristic, a semantic change was done to `Plan` (and `LoadBalancingPolicy`, as result).\r\n\r\n### Plan semantics change\r\nBefore, `pick()` could return `None` and this signified that the plan is empty, so `fallback()` was not even called in such case.\r\nNow, `pick()` can return `None` and this signifies that _the first node cannot be computed **cheaply**_. `fallback()` is called even then, for it is still possible to compute the first node (and the others) more expensively.\r\n\r\n### Taken approach\r\nIf the first replica computed by `pick()` is believed to be down, then `pick()` doesn't attempt to compute any more replicas, but returns `None`. Then, `fallback()` is called and computes all remaining replicas at once.\r\nThanks to that, `pick()` remains cheap.\r\n\r\nFixes: #672 \r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/717/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/716", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/716/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/716/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/716/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/716", "id": 1684442570, "node_id": "PR_kwDOEj0F685PK4Wk", "number": 716, "title": "examples: logging: removed obsolete comment", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 2, "created_at": "2023-04-26T07:32:28Z", "updated_at": "2023-06-07T09:41:35Z", "closed_at": "2023-05-04T10:10:10Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/716", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/716", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/716.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/716.patch", "merged_at": "2023-05-04T10:10:10Z"}, "body": "The executed request no longer produces any warnings. This was changed in 2af7800c: `session: improve use keyspace queries detection`, since when `USE KEYSPACE ` statement is no longer parsed by the driver. As since then the parsing is delegated to the database (and therefore considered stable), the warning about sending raw `USE KEYSPACE` being experimental is no longer relevant.\r\nFixes: #589 \r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- ~~[ ] I have split my patch into logically separate commits.~~\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/716/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/716/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/715", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/715/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/715/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/715/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/715", "id": 1684427023, "node_id": "PR_kwDOEj0F685PK1Dx", "number": 715, "title": "docs: Updated scylla dep version", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 0, "created_at": "2023-04-26T07:20:42Z", "updated_at": "2023-04-27T12:45:28Z", "closed_at": "2023-04-27T12:45:24Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/715", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/715", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/715.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/715.patch", "merged_at": "2023-04-27T12:45:24Z"}, "body": "Fixes: #706\r\nFixes: #670 \r\n\r\n## Pre-review checklist\r\n\r\n- ~~[ ] I have split my patch into logically separate commits.~~\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/715/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/714", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/714/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/714/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/714/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/714", "id": 1683777582, "node_id": "PR_kwDOEj0F685PIrdL", "number": 714, "title": "latency_awareness: Combat tests flakiness by not relying on timing", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 1, "created_at": "2023-04-25T19:59:21Z", "updated_at": "2023-07-24T09:57:05Z", "closed_at": "2023-05-09T16:51:35Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/714", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/714", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/714.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/714.patch", "merged_at": "2023-05-09T16:51:35Z"}, "body": "The test bearing an undeniably attractive name: `latency_aware_default_policy_stops_penalising_after_min_average_increases_enough_only_after_update_rate_elapses` has shown to be flaky. I suspect it is due to the fact that it relies on timing to be valid, and execution in CI is often extremely slow. The problem, most probably, lies in minimum average updates done periodically: the test code assumes that an update has not yet been triggered at some point, which in CI happens to not be true.\r\nTo combat that:\r\n- min avg update logic is extracted into `MinAvgUpdater` struct\r\n- it is made configurable upon LA creation whether updates are to be scheduled to be periodically issued (as before, used in real cases) _or_ triggered manually by calls on `MinAvgUpdater`, \r\n- the affected tests (those that have relied on timing) are changed to use the `MinAvgUpdater` explicitly instead of scheduling periodic updates. This prevents flakiness.\r\n\r\nFixes: #710 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/714/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/712", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/712/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/712/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/712/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/712", "id": 1682816478, "node_id": "PR_kwDOEj0F685PFb0j", "number": 712, "title": "docs/batch: clarify the wording around what can be put in batches", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/5", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/5/labels", "id": 9310784, "node_id": "MI_kwDOEj0F684AjhJA", "number": 5, "title": "0.8.2", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 14, "state": "closed", "created_at": "2023-04-21T07:56:54Z", "updated_at": "2023-06-07T09:41:50Z", "due_on": null, "closed_at": "2023-06-06T17:13:33Z"}, "comments": 0, "created_at": "2023-04-25T09:43:46Z", "updated_at": "2023-06-07T09:41:30Z", "closed_at": "2023-04-28T07:03:37Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/712", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/712", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/712.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/712.patch", "merged_at": "2023-04-28T07:03:37Z"}, "body": "This commit clarifies the doc page about batches and performs two changes:\r\n\r\n- Occurrences of \"query\" have been changed to \"statement\". Batches do not support putting queries into them, only data-modifying statements. The driver documentation interchangeably uses \"query\" and \"statement\" which is not really correct but is especially confusing in this page.\r\n- The first paragraph now also lists `DELETE` as a possible operation for batch in addition to `INSERT` and `UPDATE`.\r\n\r\nAs a bonus, a single backslash that was unnecessarily rendered at the end of a line was removed.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] ~I have split my patch into logically separate commits.~\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/712/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/708", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/708/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/708/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/708/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/708", "id": 1678731759, "node_id": "PR_kwDOEj0F685O35bd", "number": 708, "title": "session_test: fix flakiness due to slow Cassandra tracing", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-21T15:47:25Z", "updated_at": "2023-04-21T16:01:43Z", "closed_at": "2023-04-21T16:01:43Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/708", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/708", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/708.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/708.patch", "merged_at": "2023-04-21T16:01:43Z"}, "body": "The driver's default configuration for fetching traces from the DB is quite unforgiving. After the query finishes, it tries 5 times to fetch tracing information, waiting 3ms between each attempt. This is too fast for Cassandra in CI and the `test_token_awareness` fails due to that.\r\n\r\nThis commit modifies the test so that it uses a much more relaxed configuration: 50 attempts with 200ms sleeps in between. As a long term solution, we should consider changing the default parameters.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/708/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/708/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/707", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/707/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/707/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/707/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/707", "id": 1678177758, "node_id": "PR_kwDOEj0F685O2CHm", "number": 707, "title": "statement/transport: re-add per-statement setters for retry policy", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-21T09:09:09Z", "updated_at": "2023-04-21T15:09:11Z", "closed_at": "2023-04-21T15:09:10Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/707", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/707", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/707.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/707.patch", "merged_at": "2023-04-21T15:09:10Z"}, "body": "The `set_retry_policy` and `get_retry_policy` methods of `Query`, `PreparedStatement` and `Batch` were removed #592, but are re-added here due to user request and because they will be useful for cpp-rust-driver.\r\n\r\nOne important difference with the old `{set,get}_retry_policy` is that the new methods take and `Arc<dyn RetryPolicy>` instead of `Box<dyn RetryPolicy>`. This was done in order not to introduce additional allocations when a query/statement/batch is cloned.\r\n\r\nThe retry_policy field was added directly to\r\n`Batch`/`Query`/`PreparedStatement` instead of `StatementConfig`. Unfortunately, `StatementConfig` is public along with all of its fields, so adding more fields to it will be a breaking change. This should be fixed during/after #701.\r\n\r\nFixes: #692\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/707/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/705", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/705/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/705/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/705/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/705", "id": 1676729526, "node_id": "PR_kwDOEj0F685OxLAo", "number": 705, "title": "session_builder: known_nodes accept IntoIterator", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-20T13:28:06Z", "updated_at": "2023-05-04T08:54:08Z", "closed_at": "2023-04-28T07:12:02Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/705", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/705", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/705.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/705.patch", "merged_at": "2023-04-28T07:12:02Z"}, "body": "There is no reason why not accept arbitrary `impl IntoIterator` in `SessionBuilder::[known_nodes(), known_nodes_addr()]`. It will also save an allocation in bindings.\r\n\r\nThis is an API mere _extension_, so it can be considered as **non**-API-breaking.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/705/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/704", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/704/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/704/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/704/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/704", "id": 1676606965, "node_id": "PR_kwDOEj0F685OwwrR", "number": 704, "title": "proxy: Add forged_ready()", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-20T12:16:53Z", "updated_at": "2023-04-26T12:29:42Z", "closed_at": "2023-04-20T16:01:05Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/704", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/704", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/704.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/704.patch", "merged_at": "2023-04-20T16:01:05Z"}, "body": "This is a tiny feature addition to proxy, useful in tests. Currently needed for execution profiles testing in bindings.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/704/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/704/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/703", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/703/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/703/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/703/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/703", "id": 1675222194, "node_id": "PR_kwDOEj0F685OsHYo", "number": 703, "title": "Allow ssl-context only for non-cloud session builder", "user": {"login": "Gor027", "id": 29541844, "node_id": "MDQ6VXNlcjI5NTQxODQ0", "avatar_url": "https://avatars.githubusercontent.com/u/29541844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gor027", "html_url": "https://github.com/Gor027", "followers_url": "https://api.github.com/users/Gor027/followers", "following_url": "https://api.github.com/users/Gor027/following{/other_user}", "gists_url": "https://api.github.com/users/Gor027/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gor027/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gor027/subscriptions", "organizations_url": "https://api.github.com/users/Gor027/orgs", "repos_url": "https://api.github.com/users/Gor027/repos", "events_url": "https://api.github.com/users/Gor027/events{/privacy}", "received_events_url": "https://api.github.com/users/Gor027/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/7", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/7/labels", "id": 9597943, "node_id": "MI_kwDOEj0F684AknP3", "number": 7, "title": "0.9.0", "description": "", "creator": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-06-29T09:04:46Z", "updated_at": "2023-07-28T10:08:37Z", "due_on": null, "closed_at": "2023-07-28T10:08:37Z"}, "comments": 1, "created_at": "2023-04-19T16:12:09Z", "updated_at": "2023-06-30T14:11:30Z", "closed_at": "2023-06-30T14:11:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/703", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/703", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/703.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/703.patch", "merged_at": "2023-06-30T14:11:29Z"}, "body": "For serverless clusters, the secure connection bundle should specify the contact points and the SSL context, so setting SSL context for `CloudSessionBuilder` should not be allowed.\r\n\r\nFixes #695\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/703/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/703/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/700", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/700/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/700/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/700/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/700", "id": 1668131991, "node_id": "PR_kwDOEj0F685OUion", "number": 700, "title": "iterator: make token awareness work again with execute_iter", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-14T12:06:20Z", "updated_at": "2023-04-20T09:25:56Z", "closed_at": "2023-04-20T09:25:55Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/700", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/700", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/700.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/700.patch", "merged_at": "2023-04-20T09:25:55Z"}, "body": "Due to an oversight, when the RowIterator asks the load balancing policy to calculate the plan (sequence of nodes that will be tried), it passes a RoutingInfo structure without providing the keyspace relevant to the query. The old token aware policy used to fall back to SimpleStrategy and rf=1, which could provide an illusion of token-aware routing. However, the new default load balancing policy will, in the case described above, treat this as if no routing information is available and will choose a random node.\r\n\r\nThis commit fixes the simple issue and adds a test which verifies that token awareness works both in case of `execute` and `execute_iter`.\r\n\r\nFixes: #699\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce~.\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`~.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/700/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/700/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/697", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/697/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/697/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/697/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/697", "id": 1664784394, "node_id": "PR_kwDOEj0F685OJVfC", "number": 697, "title": "default_policy: Fix deadlock on LatencyAwareness used", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370607, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA3", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-12T15:26:44Z", "updated_at": "2023-04-13T13:02:45Z", "closed_at": "2023-04-13T12:47:46Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/697", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/697", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/697.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/697.patch", "merged_at": "2023-04-13T12:47:46Z"}, "body": "Described in #696.\r\nRust, unfortunately, makes lock guards taken on right side of `if let` expression live for else branch duration, too. This results in taking write lock while holding read lock.\r\n\r\nIn order to compile, I had to hint the `usize` type in one unrelated place, hence that change.\r\n\r\nAdded a regression test for the issue.\r\n\r\nFixes: #696\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/697/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/697/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/694", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/694/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/694/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/694/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/694", "id": 1662152960, "node_id": "PR_kwDOEj0F685OAZTo", "number": 694, "title": "Serverless tests", "user": {"login": "Gor027", "id": 29541844, "node_id": "MDQ6VXNlcjI5NTQxODQ0", "avatar_url": "https://avatars.githubusercontent.com/u/29541844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gor027", "html_url": "https://github.com/Gor027", "followers_url": "https://api.github.com/users/Gor027/followers", "following_url": "https://api.github.com/users/Gor027/following{/other_user}", "gists_url": "https://api.github.com/users/Gor027/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gor027/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gor027/subscriptions", "organizations_url": "https://api.github.com/users/Gor027/orgs", "repos_url": "https://api.github.com/users/Gor027/repos", "events_url": "https://api.github.com/users/Gor027/events{/privacy}", "received_events_url": "https://api.github.com/users/Gor027/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-11T10:03:39Z", "updated_at": "2023-04-21T13:38:12Z", "closed_at": "2023-04-21T13:38:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/694", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/694", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/694.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/694.patch", "merged_at": "2023-04-21T13:38:12Z"}, "body": "## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n\r\nThis PR adjusts session tests to run with a serverless cluster in CI. As a serverless cluster requires a different Session setup, a generic way of session builder creation is added that creates a `CloudSessionBuilder` if the \"cloud\" feature is enabled for session tests.\r\nFixes #688 \r\n\r\nEDIT:\r\nModified CI workflows to run cloud tests separately, as examples required the \"cloud\" feature to be enabled, `cargo test` run session tests for serverless mode.", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/694/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/694/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/693", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/693/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/693/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/693/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/693", "id": 1659168174, "node_id": "PR_kwDOEj0F685N2zJk", "number": 693, "title": "Add serialize/deserialize support for [u8; N]", "user": {"login": "siningma", "id": 2812144, "node_id": "MDQ6VXNlcjI4MTIxNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2812144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siningma", "html_url": "https://github.com/siningma", "followers_url": "https://api.github.com/users/siningma/followers", "following_url": "https://api.github.com/users/siningma/following{/other_user}", "gists_url": "https://api.github.com/users/siningma/gists{/gist_id}", "starred_url": "https://api.github.com/users/siningma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siningma/subscriptions", "organizations_url": "https://api.github.com/users/siningma/orgs", "repos_url": "https://api.github.com/users/siningma/repos", "events_url": "https://api.github.com/users/siningma/events{/privacy}", "received_events_url": "https://api.github.com/users/siningma/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-07T20:35:58Z", "updated_at": "2023-04-11T11:18:58Z", "closed_at": "2023-04-11T11:18:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/693", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/693", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/693.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/693.patch", "merged_at": "2023-04-11T11:18:58Z"}, "body": "Right now the driver supports Vec<u8>. This PR adds serialize/deserialize support for [u8; N]\r\n\r\n@piodul for review\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/693/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/693/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/690", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/690/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/690/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/690/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/690", "id": 1652405763, "node_id": "PR_kwDOEj0F685NggYm", "number": 690, "title": "Execution profiles API extensions", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/3", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3/labels", "id": 9196161, "node_id": "MI_kwDOEj0F684AjFKB", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2023-03-23T10:47:53Z", "updated_at": "2025-03-25T13:55:49Z", "due_on": "2025-02-15T00:00:00Z", "closed_at": "2025-03-06T10:28:21Z"}, "comments": 0, "created_at": "2023-04-03T16:36:34Z", "updated_at": "2023-04-26T12:29:41Z", "closed_at": "2023-04-10T17:25:57Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/690", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/690", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/690.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/690.patch", "merged_at": "2023-04-10T17:25:57Z"}, "body": "In order to implement execution profiles in Cpp-Rust-driver project, the public API of execution profiles needs to be extended. To sum up, this PR:\r\n- derives `Clone` and `Default` for `ExecutionProfileBuilder`,\r\n- reexports `ExecutionProfile` directly from crate root instead of `transport::` - this is just for user convenience and it is similarly done with policies etc.,\r\n- makes `Session::get_default_execution_profile_handle()` public,\r\n- adds `ExecutionProfileHandle::pointee_to_builder()`, which creates a builder with configuration equivalent to one of the profile pointed by provided handle.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/690/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/689", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/689/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/689/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/689/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/689", "id": 1651778781, "node_id": "PR_kwDOEj0F685NeYgk", "number": 689, "title": "Serverless ci", "user": {"login": "Gor027", "id": 29541844, "node_id": "MDQ6VXNlcjI5NTQxODQ0", "avatar_url": "https://avatars.githubusercontent.com/u/29541844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gor027", "html_url": "https://github.com/Gor027", "followers_url": "https://api.github.com/users/Gor027/followers", "following_url": "https://api.github.com/users/Gor027/following{/other_user}", "gists_url": "https://api.github.com/users/Gor027/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gor027/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gor027/subscriptions", "organizations_url": "https://api.github.com/users/Gor027/orgs", "repos_url": "https://api.github.com/users/Gor027/repos", "events_url": "https://api.github.com/users/Gor027/events{/privacy}", "received_events_url": "https://api.github.com/users/Gor027/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-03T10:21:15Z", "updated_at": "2023-04-04T09:58:36Z", "closed_at": "2023-04-04T09:58:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/689", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/689", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/689.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/689.patch", "merged_at": "2023-04-04T09:58:36Z"}, "body": "## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n\r\nThis PR adds a test workflow to CI for a serverless cluster. For now, only the `examples/cloud` example is added to test serverless support, but the existing tests will be adjusted to be run with a serverless cluster, see #688.\r\n\r\nFixes #687", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/689/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/686", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/686/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/686/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/686/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/686", "id": 1648450132, "node_id": "PR_kwDOEj0F685NTiXw", "number": 686, "title": "Handle errors that occur during handshake", "user": {"login": "rukai", "id": 5120858, "node_id": "MDQ6VXNlcjUxMjA4NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5120858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rukai", "html_url": "https://github.com/rukai", "followers_url": "https://api.github.com/users/rukai/followers", "following_url": "https://api.github.com/users/rukai/following{/other_user}", "gists_url": "https://api.github.com/users/rukai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rukai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rukai/subscriptions", "organizations_url": "https://api.github.com/users/rukai/orgs", "repos_url": "https://api.github.com/users/rukai/repos", "events_url": "https://api.github.com/users/rukai/events{/privacy}", "received_events_url": "https://api.github.com/users/rukai/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/3", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3/labels", "id": 9196161, "node_id": "MI_kwDOEj0F684AjFKB", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2023-03-23T10:47:53Z", "updated_at": "2025-03-25T13:55:49Z", "due_on": "2025-02-15T00:00:00Z", "closed_at": "2025-03-06T10:28:21Z"}, "comments": 0, "created_at": "2023-03-30T23:24:00Z", "updated_at": "2023-04-02T12:46:32Z", "closed_at": "2023-03-31T08:29:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/686", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/686", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/686.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/686.patch", "merged_at": "2023-03-31T08:29:36Z"}, "body": "## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n\r\n\r\nThis allows users to see the errors that occurred during the handshake, previously the user just gets a generic `Wrong response to OPTIONS message was received`\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/686/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/685", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/685/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/685/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/685/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/685", "id": 1644504262, "node_id": "PR_kwDOEj0F685NGR_G", "number": 685, "title": "Docs: Add serverless cluster connect code example", "user": {"login": "Gor027", "id": 29541844, "node_id": "MDQ6VXNlcjI5NTQxODQ0", "avatar_url": "https://avatars.githubusercontent.com/u/29541844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gor027", "html_url": "https://github.com/Gor027", "followers_url": "https://api.github.com/users/Gor027/followers", "following_url": "https://api.github.com/users/Gor027/following{/other_user}", "gists_url": "https://api.github.com/users/Gor027/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gor027/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gor027/subscriptions", "organizations_url": "https://api.github.com/users/Gor027/orgs", "repos_url": "https://api.github.com/users/Gor027/repos", "events_url": "https://api.github.com/users/Gor027/events{/privacy}", "received_events_url": "https://api.github.com/users/Gor027/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-28T18:57:40Z", "updated_at": "2023-04-03T08:54:26Z", "closed_at": "2023-04-03T08:54:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/685", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/685", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/685.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/685.patch", "merged_at": "2023-04-03T08:54:26Z"}, "body": "Fixes #677\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/685/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/684", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/684/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/684/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/684/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/684", "id": 1643587785, "node_id": "PR_kwDOEj0F685NDL0-", "number": 684, "title": "docs: don't strip Rust attributes", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-28T09:50:36Z", "updated_at": "2023-03-28T12:35:13Z", "closed_at": "2023-03-28T12:35:13Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/684", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/684", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/684.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/684.patch", "merged_at": "2023-03-28T12:35:13Z"}, "body": "The `prepare_sphinx_source.py` script goes over snippets of Rust code in the docs and removes the lines that start with a pound sign (#). This is done to simulate the mdbook behavior: the snippets are supposed to be valid Rust code that compiles, however making them compile may require adding some boilerplate lines of code that shouldn't be displayed in the final documentation. Sphinx, used to generate the official documentation, doesn't understand that so we need a script to pre-process.\r\n\r\nHowever, the current behavior of the script is not entirely correct. Not every line that starts with a pound sign should be removed - for example, `derive` attributes like this are currently stripped but shouldn't:\r\n\r\n    #[derive(Debug)]\r\n    struct Foo {\r\n        bar: i32,\r\n    }\r\n\r\nIn order to fix this, the code is adjusted to strip lines that start with the '# ' string (pound sign followed by a space). This is what the `rustdoc` tool actually does (and `mdbook`, too). This results in correctly pre-processed snippets of code in the documentation generated by sphinx.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/684/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/684/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/683", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/683/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/683/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/683/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/683", "id": 1643502315, "node_id": "PR_kwDOEj0F685NC5ZU", "number": 683, "title": "Docs update theme 1.4", "user": {"login": "dgarcia360", "id": 9107969, "node_id": "MDQ6VXNlcjkxMDc5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/9107969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgarcia360", "html_url": "https://github.com/dgarcia360", "followers_url": "https://api.github.com/users/dgarcia360/followers", "following_url": "https://api.github.com/users/dgarcia360/following{/other_user}", "gists_url": "https://api.github.com/users/dgarcia360/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgarcia360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgarcia360/subscriptions", "organizations_url": "https://api.github.com/users/dgarcia360/orgs", "repos_url": "https://api.github.com/users/dgarcia360/repos", "events_url": "https://api.github.com/users/dgarcia360/events{/privacy}", "received_events_url": "https://api.github.com/users/dgarcia360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-28T08:59:14Z", "updated_at": "2023-03-28T13:50:20Z", "closed_at": "2023-03-28T13:27:26Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/683", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/683", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/683.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/683.patch", "merged_at": "2023-03-28T13:27:26Z"}, "body": "Related issue https://github.com/scylladb/sphinx-scylladb-theme/issues/707\r\n\r\nScyllaDB Sphinx Theme 1.4 is now released \ud83e\udd73 \r\n\r\nYou can read more about all notable changes [here](https://sphinx-theme.scylladb.com/master/upgrade/CHANGELOG.html#march-2023).\r\n\r\n## How to test this PR\r\n\r\n1. Clone this PR. For more information, see [Cloning pull requests locally](https://docs.github.com/en/github/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally).\r\n\r\n2. Enter the docs folder, and run:\r\n\r\n  ```\r\n  make preview\r\n  ````\r\n\r\n3. Open http://localhost:5500 with your favorite browser. The doc should render without errors, and the version should be Sphinx Theme version (see the footer) must be ``1.4.x``:\r\n\r\n![image](https://user-images.githubusercontent.com/9107969/224791653-701bcc8e-98ef-4998-999f-d03459169850.png)\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/683/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/682", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/682/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/682/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/682/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/682", "id": 1641529118, "node_id": "PR_kwDOEj0F685M8S0B", "number": 682, "title": "pull_request_template.md: add reminder to update docs", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-27T07:15:05Z", "updated_at": "2023-03-28T12:33:18Z", "closed_at": "2023-03-28T12:33:18Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/682", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/682", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/682.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/682.patch", "merged_at": "2023-03-28T12:33:18Z"}, "body": "It's important to have documentation that is up-to-date, and the best time to update it is along with the changes introduced to the code. As not everybody remembers to do it every time (me, in particular), let's add a pre-review check about introducing docstrings and adjusting the documentation in the book.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/682/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/682/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/669", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/669/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/669/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/669/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/669", "id": 1634246019, "node_id": "PR_kwDOEj0F685MkFAj", "number": 669, "title": "treewide: implement Clone for most error types", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-21T16:06:44Z", "updated_at": "2023-03-22T09:02:15Z", "closed_at": "2023-03-22T09:02:15Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/669", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/669", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/669.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/669.patch", "merged_at": "2023-03-22T09:02:15Z"}, "body": "For convenience, adds a `#[derive(Clone)]` for those error types for which it was currently possible. Some error types currently have fields that cannot be cloned (mostly std::io::Error), notably:\r\n\r\n- ParseError, FrameError - extensively used in deserialization, but don't seem to appear in the main API.\r\n- CloudConfigError - only used when creating a session that connects to Scylla Cloud.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/669/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/669/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/668", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/668/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/668/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/668/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/668", "id": 1634193396, "node_id": "PR_kwDOEj0F685Mj5iC", "number": 668, "title": "Extended request spans", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-21T15:43:46Z", "updated_at": "2023-03-22T16:58:36Z", "closed_at": "2023-03-22T16:58:35Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/668", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/668", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/668.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/668.patch", "merged_at": "2023-03-22T16:58:35Z"}, "body": "Provides more information in trace spans emitted for unprepared query, prepared query and batch requests.\r\n\r\nThe following information is provided:\r\n\r\n- `kind`: type of operation (`unprepared`, `prepared`, `batch`),\r\n- `contents` - the query string (applicable only to unprepared queries),\r\n- `routing_key`: routing key of the request (if known, i.e. applies only to prepared queries),\r\n- `token`: partition token relevant to the request (if known, i.e. applies only to prepared queries),\r\n- `request_size`: serialized size of query parameters (not implemented for batches),\r\n- `result_size`: serialized size of rows returned in response,\r\n- `result_rows`: number of rows returned in response,\r\n- `shard`: ID of the shard the request was served on,\r\n- `speculative_executions` - the number of times this request was speculatively executed,\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/668/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/668/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/667", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/667/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/667/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/667/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/667", "id": 1632402857, "node_id": "PR_kwDOEj0F685Md2Yv", "number": 667, "title": "load_balancing: allow to disable shuffling replicas", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-20T15:54:46Z", "updated_at": "2023-03-20T17:51:39Z", "closed_at": "2023-03-20T17:51:39Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/667", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/667", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/667.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/667.patch", "merged_at": "2023-03-20T17:51:39Z"}, "body": "## Pre-review checklist\r\n\r\nWhen token awareness is enabled in the default load balancing policy, it chooses a random replica to send the query to. This is supposed to balance the load however in some scenarios it might be more beneficial to always choose the same replica - for example, reads might benefit from better caching. This PR adds an option to disable this behavior, which will cause the load balancing policy to always choose nodes in the same order for each replica set.\r\n\r\nThis feature was inspired by similar functionality in the cpp driver.\r\n\r\nFixes: #634\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/667/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/667/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/666", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/666/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/666/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/666/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/666", "id": 1631801336, "node_id": "PR_kwDOEj0F685Mb0ZO", "number": 666, "title": "Add rack-awareness to default LBP", "user": {"login": "Gor027", "id": 29541844, "node_id": "MDQ6VXNlcjI5NTQxODQ0", "avatar_url": "https://avatars.githubusercontent.com/u/29541844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gor027", "html_url": "https://github.com/Gor027", "followers_url": "https://api.github.com/users/Gor027/followers", "following_url": "https://api.github.com/users/Gor027/following{/other_user}", "gists_url": "https://api.github.com/users/Gor027/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gor027/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gor027/subscriptions", "organizations_url": "https://api.github.com/users/Gor027/orgs", "repos_url": "https://api.github.com/users/Gor027/repos", "events_url": "https://api.github.com/users/Gor027/events{/privacy}", "received_events_url": "https://api.github.com/users/Gor027/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-03-20T10:19:05Z", "updated_at": "2023-04-05T11:02:33Z", "closed_at": "2023-04-05T11:02:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/666", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/666", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/666.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/666.patch", "merged_at": "2023-04-05T11:02:33Z"}, "body": "Added rack-awareness option to prefer replicas in local rack while picking a coordinator. It will allow to create a top-level tier with local datacenter and local rack replicas in the fallback plan.\r\n\r\nFixes: #604 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/666/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/666/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/664", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/664/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/664/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/664/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/664", "id": 1629099159, "node_id": "PR_kwDOEj0F685MS5h4", "number": 664, "title": "treewide: appease clippy", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-17T10:50:34Z", "updated_at": "2023-03-17T11:44:27Z", "closed_at": "2023-03-17T11:44:26Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/664", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/664", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/664.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/664.patch", "merged_at": "2023-03-17T11:44:26Z"}, "body": "The usual: clippy have been updated in GitHub's CI runner image that we use and it has new lints that our codebase doesn't currently pass.\r\n\r\nThis time, clippy complains about some `impl Default`s being unnecessarily hand-written where they could be easily implemented with an automatic derive. This commit removes the problematic impl for PartitionerName and replaces it with a derive, but the impl for Consistency is left as is and marked with an \"allow\" annotation. Unfortunately, implementing Default with a derive requires adding a #[default] annotation in the enum body which incorrectly interacts with num_enum::TryFromPrimitive macro.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/664/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/664/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/663", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/663/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/663/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/663/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/663", "id": 1629029514, "node_id": "PR_kwDOEj0F685MSqj_", "number": 663, "title": "session: add get_keyspace() method", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-17T10:01:15Z", "updated_at": "2023-03-20T10:08:02Z", "closed_at": "2023-03-20T10:08:02Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/663", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/663", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/663.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/663.patch", "merged_at": "2023-03-20T10:08:01Z"}, "body": "Adds the `get_keyspace()` method which allows to get the keyspace name currently set for the session. Initially, it is set to the keyspace name specified in the session configuration as the keyspace to be USE-d, but it will be updated when calling `Session::use_keyspace()` later. Because of that possibility, `get_keyspace` returns a shared pointer to the keyspace name instead of a reference.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/663/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/663/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/658", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/658/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/658/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/658/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/658", "id": 1620176407, "node_id": "PR_kwDOEj0F685L0-YQ", "number": 658, "title": "Expose calculate_token", "user": {"login": "Ten0", "id": 9094255, "node_id": "MDQ6VXNlcjkwOTQyNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9094255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ten0", "html_url": "https://github.com/Ten0", "followers_url": "https://api.github.com/users/Ten0/followers", "following_url": "https://api.github.com/users/Ten0/following{/other_user}", "gists_url": "https://api.github.com/users/Ten0/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ten0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ten0/subscriptions", "organizations_url": "https://api.github.com/users/Ten0/orgs", "repos_url": "https://api.github.com/users/Ten0/repos", "events_url": "https://api.github.com/users/Ten0/events{/privacy}", "received_events_url": "https://api.github.com/users/Ten0/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-11T23:26:31Z", "updated_at": "2023-03-20T17:57:48Z", "closed_at": "2023-03-20T17:57:48Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/658", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/658", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/658.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/658.patch", "merged_at": "2023-03-20T17:57:48Z"}, "body": "Helps (or arguably fixes) #468\r\n\r\nFor smarter batch constitution (following up on #448), it is required to have access to the token a particular statement would be directed to. However, that is pretty difficult to do without access to calculate_token.\r\n\r\nThat was initially put in #508, but planned to put in a separate PR to keep it minimal\r\n(https://github.com/scylladb/scylla-rust-driver/pull/508#discussion_r949399700)\r\nIt seems I had forgotten to open that separate PR, and I end up getting bitten by that now that I want to constitute my batches in a smarter way. ^^'\r\n\r\nSo here it is.\r\n\r\nI'm only putting \"helps\" above because I think we may want to also expose query planning (\r\n`session.plan(prepared_statement, serialized_values) -> impl Iterator<Item = (Arc<Node>, ShardID)>` ) as that may make it significantly easier on the user to obtain the relevant keys for batching - but I'd like to keep this PR that just *enables* the ideal behavior as simple as possible.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/658/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/658/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/657", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/657/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/657/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/657/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/657", "id": 1620088294, "node_id": "PR_kwDOEj0F685L0ul4", "number": 657, "title": "Minor typo fix in comment", "user": {"login": "Ten0", "id": 9094255, "node_id": "MDQ6VXNlcjkwOTQyNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9094255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ten0", "html_url": "https://github.com/Ten0", "followers_url": "https://api.github.com/users/Ten0/followers", "following_url": "https://api.github.com/users/Ten0/following{/other_user}", "gists_url": "https://api.github.com/users/Ten0/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ten0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ten0/subscriptions", "organizations_url": "https://api.github.com/users/Ten0/orgs", "repos_url": "https://api.github.com/users/Ten0/repos", "events_url": "https://api.github.com/users/Ten0/events{/privacy}", "received_events_url": "https://api.github.com/users/Ten0/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-11T17:42:01Z", "updated_at": "2023-03-14T17:45:11Z", "closed_at": "2023-03-14T15:09:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/657", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/657", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/657.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/657.patch", "merged_at": "2023-03-14T15:09:14Z"}, "body": "- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/657/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/656", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/656/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/656/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/656/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/656", "id": 1620083089, "node_id": "PR_kwDOEj0F685L0tm2", "number": 656, "title": "Don't early-allocate trace arguments (significant perf impact somehow)", "user": {"login": "Ten0", "id": 9094255, "node_id": "MDQ6VXNlcjkwOTQyNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9094255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ten0", "html_url": "https://github.com/Ten0", "followers_url": "https://api.github.com/users/Ten0/followers", "following_url": "https://api.github.com/users/Ten0/following{/other_user}", "gists_url": "https://api.github.com/users/Ten0/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ten0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ten0/subscriptions", "organizations_url": "https://api.github.com/users/Ten0/orgs", "repos_url": "https://api.github.com/users/Ten0/repos", "events_url": "https://api.github.com/users/Ten0/events{/privacy}", "received_events_url": "https://api.github.com/users/Ten0/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4712022841, "node_id": "LA_kwDOEj0F688AAAABGNvDOQ", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/performance", "name": "performance", "color": "1D76DB", "default": false, "description": "Improves performance of existing features"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/1", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/1", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/1/labels", "id": 9009426, "node_id": "MI_kwDOEj0F684AiXkS", "number": 1, "title": "0.8.0", "description": "", "creator": {"login": "mykaul", "id": 4655593, "node_id": "MDQ6VXNlcjQ2NTU1OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/4655593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mykaul", "html_url": "https://github.com/mykaul", "followers_url": "https://api.github.com/users/mykaul/followers", "following_url": "https://api.github.com/users/mykaul/following{/other_user}", "gists_url": "https://api.github.com/users/mykaul/gists{/gist_id}", "starred_url": "https://api.github.com/users/mykaul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mykaul/subscriptions", "organizations_url": "https://api.github.com/users/mykaul/orgs", "repos_url": "https://api.github.com/users/mykaul/repos", "events_url": "https://api.github.com/users/mykaul/events{/privacy}", "received_events_url": "https://api.github.com/users/mykaul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 6, "state": "closed", "created_at": "2023-02-06T10:12:47Z", "updated_at": "2023-03-23T12:32:51Z", "due_on": "2023-03-15T00:00:00Z", "closed_at": "2023-03-23T12:32:51Z"}, "comments": 0, "created_at": "2023-03-11T17:22:45Z", "updated_at": "2023-03-15T09:22:30Z", "closed_at": "2023-03-14T15:35:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/656", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/656", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/656.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/656.patch", "merged_at": "2023-03-14T15:35:45Z"}, "body": "Fixes #655\r\n\r\nThis would have a significant perf impact (see #655) and be unidiomatic (see https://docs.rs/tracing/0.1.37/tracing/#recording-fields)\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [X] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [X] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/656/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/654", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/654/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/654/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/654/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/654", "id": 1617324638, "node_id": "PR_kwDOEj0F685LrjvB", "number": 654, "title": "session_builder: Keepalive interval defaults to 30 secs", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-09T14:04:23Z", "updated_at": "2023-03-09T15:18:40Z", "closed_at": "2023-03-09T15:08:13Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/654", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/654", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/654.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/654.patch", "merged_at": "2023-03-09T15:08:13Z"}, "body": "When testing the new serverless support implementation in the driver, it appeared that while being idle, the driver must deal with server closing the connection every 60 seconds. To prevent such behaviour, the default keepalive interval is set to 30 seconds.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/654/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/654/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/653", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/653/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/653/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/653/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/653", "id": 1615058322, "node_id": "PR_kwDOEj0F685Lj19q", "number": 653, "title": "prepared_statement: Made cloning cheaper by use of Arcs", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-08T10:45:02Z", "updated_at": "2023-03-08T14:12:54Z", "closed_at": "2023-03-08T11:50:09Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/653", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/653", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/653.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/653.patch", "merged_at": "2023-03-08T11:50:09Z"}, "body": "As cloning PreparedStatements may be convenient in some workloads, effort is done to make it possibly cheap. This commit put the heavy heap-allocated PreparedStatement metadata and its statement String behind an Arc, in a shared struct. In order to have cleaner inner API, usages of data referenced in the shared struct access them now through the getter.\r\n\r\nFixes: #635\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/653/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/653/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/649", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/649/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/649/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/649/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/649", "id": 1595161623, "node_id": "PR_kwDOEj0F685KhFXU", "number": 649, "title": "topology: UDTs hold complete definition of themselves", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-22T14:01:05Z", "updated_at": "2023-03-02T16:58:41Z", "closed_at": "2023-03-02T16:56:28Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/649", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/649", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/649.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/649.patch", "merged_at": "2023-03-02T16:56:28Z"}, "body": "It has been requested by a customer to make `CqlType::UserDefinedType` hold a complete definition of the type. \r\n\r\nBefore, the definition was distributed among multiple code locations: the type name was present inside the mentioned variant, the keyspace name was to be deduced from the context, and the fields definitions were only stored in a hash map in each `Keyspace`.\r\n\r\nThis PR:\r\n- introduces `UserDefinedType` struct as a complete UDT definition,\r\n- makes the `Keyspace` hold the hash map from UDT name to  `Arc<UserDefinedType>`,\r\n- makes `CqlType::UserDefinedType` store a complete definition of a UDT (`Result<Arc<UserDefinedType>, MissingUserDefinedType>`, the `Err` variant is used in case when an unknown UDT is defined as a field of another UDT),\r\n- introduces `UdtRow` struct to represent a row with UDT definition,\r\n- adds a topological sort of `UdtRow` to avoid processing references to unknown UDTs. The topological order is always achievable, as UDTs circular dependencies are forbidden and rejected by Scylla.\r\n\r\nThis PR is based on #645, because it is very likely that it will be merged soon and otherwise it would introduce a lot of merge conflicts.\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description~~.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/649/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/647", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/647/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/647/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/647/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/647", "id": 1589471762, "node_id": "PR_kwDOEj0F685KOYIi", "number": 647, "title": "docker-compose.yml: improve settings and the boot order", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-02-17T14:43:01Z", "updated_at": "2023-02-24T11:03:54Z", "closed_at": "2023-02-24T11:03:54Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/647", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/647", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/647.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/647.patch", "merged_at": "2023-02-24T11:03:54Z"}, "body": "Up until now, our docker-compose file that sets up Scylla cluster was starting up all nodes in parallel. This is not something that is supported in Scylla and it can sometimes fail. We didn't see those failures until now because we didn't print the cluster logs. This commit makes sure that nodes are booted up in order.\r\n\r\nIn addition to this, now nodes start with a fixed number of shards (2 each) and memory (1GB each). I'm not sure a more powerful cluster is really needed, and - by default - the shard count is equal to the number of cores of the host machine. A large number of shards can quickly eat up the /proc/sys/fs/aio-nr resource in the system, so the cluster wasn't really usable on machines with a large number of cores.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/647/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/647/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/646", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/646/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/646/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/646/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/646", "id": 1589309519, "node_id": "PR_kwDOEj0F685KN0q3", "number": 646, "title": "CI: print logs from the cluster as a build step", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-17T12:49:55Z", "updated_at": "2023-02-24T00:16:25Z", "closed_at": "2023-02-24T00:16:25Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/646", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/646", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/646.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/646.patch", "merged_at": "2023-02-24T00:16:25Z"}, "body": "Some test failures may be caused due to issues in Cassandra or Scylla and it is hard to identify them if they are silent during the whole CI run.\r\n\r\nThis PR modifies our CI jobs that use docker-compose so that the logs from the cluster are always printed.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/646/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/645", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/645/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/645/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/645/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/645", "id": 1589169390, "node_id": "PR_kwDOEj0F685KNWZT", "number": 645, "title": "Replace Connection::query_all with Connection::query_iter", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-02-17T10:55:04Z", "updated_at": "2023-03-02T13:51:31Z", "closed_at": "2023-03-02T13:51:30Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/645", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/645", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/645.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/645.patch", "merged_at": "2023-03-02T13:51:30Z"}, "body": "For internal queries that can return a large number of rows (topology info, schema) we use currently use `Connection::query_all` to perform them. That method fetches results of the query in multiple pages and then returns it as a single combined `QueryResult`. This PR replaces it with a new `Connection::query_iter` method which has semantics more similar to the iterator-based query methods from the public interface (`Session::query_iter`, `Session::execute_iter`).\r\n\r\nThe motivations for this change are as follows:\r\n\r\n- Although the new methods will use slightly more memory if the query returns only one page (because of the need to spawn a new task/channels/etc.), it should consume less memory if multiple pages are fetched because rows are processed on-line as new pages appear and only 1-2 pages need to exist at a given time.\r\n- The logic that combines multiple pages into a single `QueryResult` will be hard to translate to use the upcoming iterator-based deserialization interface (https://github.com/scylladb/scylla-rust-driver/issues/462). Although the old interface will still be available as a deprecated fallback, I would like to adapt those methods as a form of dogfooding test for the new interface.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/645/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/645/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/644", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/644/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/644/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/644/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/644", "id": 1572457691, "node_id": "PR_kwDOEj0F685JVWBh", "number": 644, "title": "iterator: Return empty iterator on modification stmt", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-02-06T12:11:35Z", "updated_at": "2023-02-09T13:41:49Z", "closed_at": "2023-02-09T08:47:22Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/644", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/644", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/644.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/644.patch", "merged_at": "2023-02-09T08:47:22Z"}, "body": "...instead of ProtocolError as before. This was requested by #631. Also, added a test for this behaviour.\r\n\r\nFixes: #631\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/644/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]