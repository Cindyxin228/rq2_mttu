[{"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1070", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1070/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1070/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1070/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1070", "id": 2507525350, "node_id": "PR_kwDOEj0F6856gv_U", "number": 1070, "title": "Release 0.14", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-09-05T11:31:12Z", "updated_at": "2024-09-05T11:53:18Z", "closed_at": "2024-09-05T11:53:18Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1070", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1070", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1070.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1070.patch", "merged_at": "2024-09-05T11:53:18Z"}, "body": "Proposed release notes:\r\n```\r\nThe ScyllaDB team is pleased to announce ScyllaDB Rust Driver 0.14.0,\r\nan asynchronous CQL driver for Rust, optimized for Scylla, but also compatible with Apache Cassandra!\r\n\r\nSome interesting statistics:\r\n\r\n- over 2.103k downloads on crates!\r\n- over 556 GitHub stars!\r\n\r\n## Changes\r\n\r\n**API cleanups / breaking changes:**\r\n- Our session & paging API was revamped so that it is more intuitive and robust. Now the type of the query (paged / unpaged) is tied to the method used to execute it (`execute_unpaged` / `execute_single_page` / `execute_iter`) rather than the page size associated with the statement object. Other changes include ([#1061](https://github.com/scylladb/scylla-rust-driver/pull/1061)):\r\n\t- Introduced strongly typed paging state instead of using `Bytes`.\r\n\t- Paging state is explicitly returned from `execute_single_page` instead of being a field in `QueryResult`.\r\n\t- Made `page_size` on the statements mandatory and providing the default value.\r\n\t- Updated our docs and examples to point users towards paged queries and explaining the issues with unpaged SELECTs. ([#1069](https://github.com/scylladb/scylla-rust-driver/pull/1069), [#1068](https://github.com/scylladb/scylla-rust-driver/pull/1068))\r\n- Trait `SerializeCql` was renamed to `SerializeValue` because old name turned out to be confusing for users. ([#1000](https://github.com/scylladb/scylla-rust-driver/pull/1000))\r\n- Features `chrono`, `time` and `secret` were renamed to `chrono-04`, `time-03` and `secrecy-08` to allow us to support new major versions of those libraries in the future. ([#939](https://github.com/scylladb/scylla-rust-driver/pull/939))\r\n- Some of our error types were restructured to be more strongly typed (instead of just containing a string) and better reflect the conditions that they appear in. This work will be continued in 0.15. ([#1017](https://github.com/scylladb/scylla-rust-driver/pull/1017), [#1026](https://github.com/scylladb/scylla-rust-driver/pull/1026))\r\n- `QueryResult.col_specs` was changed from being a field to a method in order to allow sharing it with `PreparedStatement`. ([#1065](https://github.com/scylladb/scylla-rust-driver/pull/1065))\r\n- Moved `ResultMetadata.paging_state` field to `Rows.paging_state_response`. This is because paging state is something that changes on each paged request and should not be cached by `PreparedStatement`. ([#1065](https://github.com/scylladb/scylla-rust-driver/pull/1065))\r\n- Some parts of our upcoming deserialization refactor were merged, resulting in very minor breaking changes in our error types. The rest of deserialization refactor is planned for 0.15. ([#970](https://github.com/scylladb/scylla-rust-driver/pull/970), [#1004](https://github.com/scylladb/scylla-rust-driver/pull/1004), [#1024](https://github.com/scylladb/scylla-rust-driver/pull/1024), [#1065](https://github.com/scylladb/scylla-rust-driver/pull/1065))\r\n\r\n**New features / enhancements:**\r\n- Values that driver sends to server to identify itself in `STARTUP` message (`DRIVER_NAME`, `DRIVER_VERSION`) can now be configured using new `SelfIdentity` API in `SessionBuilder`. ([#1039](https://github.com/scylladb/scylla-rust-driver/pull/1039))\r\n- Replaced some `.unwrap()`s with `.expect()`s in the code generated by our derive macros. This is done to avoid angering `unwrap_used` clippy lint and to provide better error messages if those panics are ever triggered. ([#1055](https://github.com/scylladb/scylla-rust-driver/pull/1055))\r\nhttps://github.com/scylladb/scylla-rust-driver/pull/1019\r\n\r\n**Documentation:**\r\n- Documentation about using timeuuid type was improved. ([#980](https://github.com/scylladb/scylla-rust-driver/pull/980))\r\n- Improved documentation about `PreparedStatement`. ([#986](https://github.com/scylladb/scylla-rust-driver/pull/986))\r\n- Updated Scylla Sphinx theme to version 1.7. ([#994](https://github.com/scylladb/scylla-rust-driver/pull/994))\r\n- Added support for building documentation on Mac. ([#927](https://github.com/scylladb/scylla-rust-driver/pull/927))\r\n\r\n**CI / developer tool improvements:**\r\n- [#1011](https://github.com/scylladb/scylla-rust-driver/pull/1011) fixed some issue with tests and CI:\r\n\t- CI now prints versions of used Rust tools so we don't have to wonder what version is running on Github Actions runners again.\r\n\t- Disabled tablets in tests that use LWT because Scylla doesn't support it yet, and other minor tablet-related changes.\r\n\t- Restricted Tokio version because of regression when `[tokio::test]` is used with `[ntest::timeout]`\r\n- [#1019](https://github.com/scylladb/scylla-rust-driver/pull/1019) removed aforementioned Tokio version bounds after regression was fixed there.\r\n- Clippy lints that were previously skipped in two places are enabled again because Darling crate that was triggering them was fixed. ([#1036](https://github.com/scylladb/scylla-rust-driver/pull/1036))\r\n\r\n**Others:**\r\n- Updated maintainers list in `CONTRIBUTING.md`. ([#997](https://github.com/scylladb/scylla-rust-driver/pull/997))\r\n\r\nCongrats to all contributors and thanks everyone for using our driver!\r\n\r\n----------\r\n\r\nThe source code of the driver can be found here:\r\n- [https://github.com/scylladb/scylla-rust-driver](https://github.com/scylladb/scylla-rust-driver)\r\nContributions are most welcome!\r\n\r\nThe official crates.io registry entry is here:\r\n- [https://crates.io/crates/scylla](https://crates.io/crates/scylla)\r\n\r\nThank you for your attention, please do not hesitate to contact us if you have any questions, issues, feature requests, or are simply interested in our driver!\r\n\r\nContributors since the last release:\r\n\r\n| commits | author            |\r\n|---------|-------------------|\r\n| 163     | Wojciech Przytu\u0142a |\r\n| 55      | Miko\u0142aj Uzarski   |\r\n| 17      | Karol Bary\u0142a      |\r\n| 3       | David Garcia      |\r\n| 2       | Lucas Kent        |\r\n| 2       | Piotr Dulikowski  |\r\n| 1       | Daniel Reis       |\r\n| 1       | Dmitry Kropachev  |\r\n| 1       | Kailokk           |\r\n```", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1070/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1070/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1069", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1069/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1069/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1069/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1069", "id": 2491919094, "node_id": "PR_kwDOEj0F6855s6KX", "number": 1069, "title": "examples: replace `query_unpaged` for SELECT queries", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 1, "created_at": "2024-08-28T12:16:55Z", "updated_at": "2024-12-19T16:35:13Z", "closed_at": "2024-08-29T06:35:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1069", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1069", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1069.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1069.patch", "merged_at": "2024-08-29T06:35:09Z"}, "body": "Follow-up of https://github.com/scylladb/scylla-rust-driver/pull/1068\r\n\r\nIn this PR we replace `query_unpaged` occurrences for SELECTs with either `query_iter`.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~[ ] I have provided docstrings for the public items that I want to introduce.~\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- ~[ ] I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1069/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1069/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1068", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1068/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1068/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1068/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1068", "id": 2489653734, "node_id": "PR_kwDOEj0F6855luQN", "number": 1068, "title": "docs: Eradicate unpaged SELECTs and warn about their drawbacks", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}, {"id": 7180919452, "node_id": "LA_kwDOEj0F688AAAABrAQinA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/statement-execution", "name": "area/statement-execution", "color": "1DCEF8", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 17, "created_at": "2024-08-27T15:04:30Z", "updated_at": "2024-09-04T20:12:49Z", "closed_at": "2024-09-04T10:33:20Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1068", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1068", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1068.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1068.patch", "merged_at": "2024-09-04T10:33:20Z"}, "body": "Follow-up of #1061.\r\n\r\n# Motivation\r\n\r\nUnpaged SELECTs should be discouraged due to the following drawbacks:\r\n> However, `query_unpaged` will return all results in one, possibly giant, piece\r\n> (unless a timeout occurs due to high load incurred by the cluster).\r\n> This:\r\n> - increases latency,\r\n> - has large memory footprint,\r\n> - puts high load on the cluster,\r\n> - is more likely to time out (because big work takes more time than little work,\r\n>   and returning one large piece of data is more work than returning one chunk of data).\r\n\r\n# What's done\r\n\r\n- the above caveat is added in the documentation book,\r\n- existing examples are modified to use `query_iter` instead,\r\n- giant bonus: a broad overview over CQL statement kinds is added, together with best practices wrt preparing, batching and paging.\r\n\r\n## Note to reviewers\r\n\r\nPlease make sure (by reading both crate docs and the docs book) that in all places it is clear enough that SELECTs by default should be done using `query_iter` rather than `query_unpaged`, and why so.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1068/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1068/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1065", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1065/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1065/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1065/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1065", "id": 2481320255, "node_id": "PR_kwDOEj0F6855JyiT", "number": 1065, "title": "New deserialization API - preparations", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}, {"id": 7180912560, "node_id": "LA_kwDOEj0F688AAAABrAQHsA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/deserialization", "name": "area/deserialization", "color": "799E5B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/14", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/14", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/14/labels", "id": 11464697, "node_id": "MI_kwDOEj0F684Aru_5", "number": 14, "title": "0.15.0", "description": "- another part of errors refactor\r\n- deserialization API refactor", "creator": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 24, "state": "closed", "created_at": "2024-08-20T11:05:54Z", "updated_at": "2024-11-14T15:59:18Z", "due_on": "2024-11-14T00:00:00Z", "closed_at": "2024-11-14T15:59:18Z"}, "comments": 5, "created_at": "2024-08-22T17:06:01Z", "updated_at": "2024-08-29T09:55:04Z", "closed_at": "2024-08-29T09:55:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1065", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1065", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1065.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1065.patch", "merged_at": "2024-08-29T09:55:01Z"}, "body": "This PR consists the first bunch of minor preparatory steps for the main leap of the deserialization refactor, extracted from #1057 as @Lorak-mmk requested.\r\n\r\nFor explanation and broader context see #1057.\r\nRef: #462\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1065/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1064", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1064/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1064/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1064/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1064", "id": 2481043961, "node_id": "PR_kwDOEj0F6855I7-x", "number": 1064, "title": "Release 0.13.2", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-08-22T15:09:16Z", "updated_at": "2024-08-22T15:27:43Z", "closed_at": "2024-08-22T15:27:42Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1064", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1064", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1064.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1064.patch", "merged_at": "2024-08-22T15:27:42Z"}, "body": "The ScyllaDB team is pleased to announce ScyllaDB Rust Driver 0.13.2,\r\nan asynchronous CQL driver for Rust, optimized for Scylla, but also compatible with Apache Cassandra!\r\n\r\nSome interesting statistics:\r\n\r\n- over 2,080k downloads on crates!\r\n- over 554 GitHub stars!\r\n\r\n## Changes\r\n\r\n**Bug fixes:**\r\n- Made driver issue a warning and continue instead of failing if an invalid peer is encountered in system tables ([#1045](https://github.com/scylladb/scylla-rust-driver/pull/1045))\r\n- Fixed bug that **paged queries would be broken when the recently introduced `use_cached_metadata` flag was set** on a `PreparedStatement`([#1063](https://github.com/scylladb/scylla-rust-driver/pull/1063))\r\n\r\n**Documentation:**\r\n- Documented `DefaultPolicy` (Load Balancing) with a lot of comments intended for developers to understand its logic easier ([#1062](https://github.com/scylladb/scylla-rust-driver/pull/1062))\r\n\r\n**CI / developer tool improvements:**\r\n- Appeased Clippy again ([#1046](https://github.com/scylladb/scylla-rust-driver/pull/1046))\r\n- Turned tablets off for Counter tests, as tablets do not support Counters yet ([#1060](https://github.com/scylladb/scylla-rust-driver/pull/1060))\r\n- Added scylla_cloud_tests to `cfg` allowlist (after such allowlist was made mandatory) ([#1049](https://github.com/scylladb/scylla-rust-driver/pull/1049))\r\n- Fixed semver-checks failure after its unexpected breaking update ([#1050](https://github.com/scylladb/scylla-rust-driver/pull/1050), [#1051](https://github.com/scylladb/scylla-rust-driver/pull/1051))\r\n\r\n\r\nCongrats to all contributors and thanks everyone for using our driver!\r\n\r\n----------\r\n\r\nThe source code of the driver can be found here:\r\n- [https://github.com/scylladb/scylla-rust-driver](https://github.com/scylladb/scylla-rust-driver)\r\nContributions are most welcome!\r\n\r\nThe official crates.io registry entry is here:\r\n- [https://crates.io/crates/scylla](https://crates.io/crates/scylla)\r\n\r\nThank you for your attention, please do not hesitate to contact us if you have any questions, issues, feature requests, or are simply interested in our driver!\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1064/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1063", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1063/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1063/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1063/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1063", "id": 2480067087, "node_id": "PR_kwDOEj0F6855Fkze", "number": 1063, "title": "result: fix bug: paging state taken from PREPARED response instead of RESULT", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370607, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA3", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-08-22T07:40:40Z", "updated_at": "2024-08-22T08:20:03Z", "closed_at": "2024-08-22T08:19:59Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1063", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1063", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1063.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1063.patch", "merged_at": "2024-08-22T08:19:59Z"}, "body": "A bug is fixed that when `set_use_cached_result_metadata` flag is set, then the `ResultMetadata` would be taken from `PreparedStatement` including `paging_state`, effectively yielding empty paging state for every request with the flag set.\r\nA related regression test is added.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1063/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1062", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1062/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1062/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1062/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1062", "id": 2477430358, "node_id": "PR_kwDOEj0F685488Of", "number": 1062, "title": "default_lb: Enrich comments & docstrings", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}, {"id": 2495049049, "node_id": "MDU6TGFiZWwyNDk1MDQ5MDQ5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/load-balancing", "name": "area/load-balancing", "color": "a221d1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2024-08-21T08:35:06Z", "updated_at": "2024-10-02T11:52:26Z", "closed_at": "2024-08-22T13:52:18Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1062", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1062", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1062.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1062.patch", "merged_at": "2024-08-22T13:52:18Z"}, "body": "The DefaultPolicy is a complex machinery. In order to grasp it fully, extensive comments are essential.\r\nSome internal functions' names were changed, to make them more better reflect the functions' semantics.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1062/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1061", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1061/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1061/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1061/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1061", "id": 2475354244, "node_id": "PR_kwDOEj0F685415eR", "number": 1061, "title": "Query paging API: hardening, robustness, explicitness", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}, {"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}, {"id": 7180919452, "node_id": "LA_kwDOEj0F688AAAABrAQinA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/statement-execution", "name": "area/statement-execution", "color": "1DCEF8", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 12, "created_at": "2024-08-20T11:00:59Z", "updated_at": "2024-08-27T10:10:54Z", "closed_at": "2024-08-27T10:10:50Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1061", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1061", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1061.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1061.patch", "merged_at": "2024-08-27T10:10:50Z"}, "body": "# Motivation\r\n\r\nQuery paging API has shown to be unclear for users:\r\n- `{query,execute}_paged` had misleading name (#940),\r\n- `paging_state` was a magic `Bytes` instance (#987),\r\n- `{query,execute}` would silently return only the first page if page size was specified on a statement,\r\n-  users would naturally resort to `{query,execute}` as the methods with the simplest names, even though they should be used with SELECTs with caution:\r\n  - with no page size set, an unpaged SELECT query would have high latency and memory footprint, and could event time out,\r\n  - with page size set, only first page would be returned (see the previous big point).\r\n- it was easy to forget about iterating over pages based on `paging_state`, as it was just a field on `QueryResult`,\r\n- there was lack of examples of a loop together with `{query,execute}_paged`.\r\n\r\nThis PR seeks to address those problems before we attack the **Giant Request Execution Refactor\u2122 (GRER\u2122)** (#978).\r\n\r\n# What's done\r\n\r\n### The core idea incorporated:\r\n\r\n**Shift responsibility about whether to page or not from statements** (by setting `page_size` to `Some` or `None`) **to `Session's` methods**.\r\n\r\n####  Separate paged and unpaged API promotes conscious choice by users and thus prevents API misuse.\r\n\r\n## Detailed changes\r\n1. **Strongly typed `PageSize` is introduced**, which restricts the inner `i32`'s range to positive integers. This is important, because passing nonpositive integer as a page size silently makes the query unpaged. All APIs now accept `PageSize`, and it's user's responsibility to create a `PageSize`, handling possible errors thrown upon its construction.\r\n1. **Paging state is made strongly typed.** Two new types are introduced: `PagingState` and `PagingStateResponse`. `PagingState` is, underneath, just an `Option<Arc>` over the raw bytes from the DB. The idea is that `PagingState` is passed as an argument to request execution API to ask for resuming the query (_continuing it_) from the point specified by given `PagingState`. `PagingStateResponse` is returned always by the DB from paged requests - with information about either more or no more pages being available. `PagingStateResponse` is easily convertible into `PagingState`, so that user can use it in in a loop.\r\n1. **`PageSize` is made mandatory on statements.** Henceforth, paged API will always use it and unpaged API will always ignore it.\r\n1. **`{query,execute}` methods have `_unpaged` prefix appended** and they always perform an unpaged query (ignoring the `PageSize` specified on a statement).\r\n1. **`{query,execute}_paged` are renamed to `{query,execute}_single_page`**. The name `%_paged` has long confused users. The new name indicates explicitly that only a single page is fetched with a single call to those methods.\r\n1. **`{query,execute}_single_page` pass page state explicitly.** As an attempt to make paged queries' API more explicit, robust and self-explanatory, `PagingStateResponse` is decoupled from `QueryResult`. Instead, it's returned from `{query,execute}_single_page` as a second field of a pair, helping users not to forget about it.\r\n  Moreover, internal and external APIs which expect that the query is not paged now warn if a \"more pages\" page state is returned from a query.\r\n1. `select-paging` example is modified to showcase the suggested way to use `{query,execute}_single_page`.\r\n1. Documentation is adjusted to the introduced changes.\r\n\r\nFixes: #940\r\nFixes: #987\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1061/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1061/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1060", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1060/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1060/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1060/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1060", "id": 2473204342, "node_id": "PR_kwDOEj0F6854uj--", "number": 1060, "title": "tests: disable tablets in CQL Counter's tests", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 1, "created_at": "2024-08-19T12:10:01Z", "updated_at": "2024-10-02T11:52:41Z", "closed_at": "2024-08-21T16:36:02Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1060", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1060", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1060.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1060.patch", "merged_at": "2024-08-21T16:36:02Z"}, "body": "As tablets don't support counters yet, they need to be disabled in Counter type tests.\r\nSee https://github.com/scylladb/scylladb/commit/c70f321c6f581357afdf3fd8b4fe8e5c5bb9736e.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1060/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1060/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1055", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1055/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1055/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1055/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1055", "id": 2461397164, "node_id": "PR_kwDOEj0F6854IQ9E", "number": 1055, "title": "Remove Problematic Unwraps In Macros", "user": {"login": "Kailokk", "id": 85956910, "node_id": "MDQ6VXNlcjg1OTU2OTEw", "avatar_url": "https://avatars.githubusercontent.com/u/85956910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kailokk", "html_url": "https://github.com/Kailokk", "followers_url": "https://api.github.com/users/Kailokk/followers", "following_url": "https://api.github.com/users/Kailokk/following{/other_user}", "gists_url": "https://api.github.com/users/Kailokk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kailokk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kailokk/subscriptions", "organizations_url": "https://api.github.com/users/Kailokk/orgs", "repos_url": "https://api.github.com/users/Kailokk/repos", "events_url": "https://api.github.com/users/Kailokk/events{/privacy}", "received_events_url": "https://api.github.com/users/Kailokk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2024-08-12T16:08:13Z", "updated_at": "2024-08-20T12:39:39Z", "closed_at": "2024-08-20T12:37:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1055", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1055", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1055.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1055.patch", "merged_at": "2024-08-20T12:37:29Z"}, "body": "Using unwraps in macros means the code is compiled as part of the end users build.\r\nThis therefore means any lints a user uses will check the macro code as well.\r\nThese unwraps therefore the [clippy lint](https://rust-lang.github.io/rust-clippy/master/index.html#/unwrap_used)  `unwrap_used` will throw a warning/error if the user has enabled it.\r\n\r\nI wanted to enable this in a project that uses scylla, so i've created this merge request to try and fix this in the least invasive way possible.\r\n\r\nI have returned error states where the unwraps were used, but if this feels more in the realm of a `panic` state, then it can simply be swapped for `panic`\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1055/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1055/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1051", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1051/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1051/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1051/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1051", "id": 2441819322, "node_id": "PR_kwDOEj0F6853FhzS", "number": 1051, "title": "semver_checks: Revert previous workaround", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2024-08-01T08:29:45Z", "updated_at": "2024-08-01T09:08:20Z", "closed_at": "2024-08-01T09:02:30Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1051", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1051", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1051.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1051.patch", "merged_at": "2024-08-01T09:02:30Z"}, "body": "The change in semver-checks turned out to be intentional and `cargo install cargo-semver-checks --no-default-features` is no longer expected to work. \r\nThe replacement command is `cargo install cargo-semver-checks --no-default-features --features gix-reqwest`.\r\n\r\nSee the release notes for v0.33.0: https://github.com/obi1kenobi/cargo-semver-checks/releases/tag/v0.33.0\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1051/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1050", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1050/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1050/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1050/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1050", "id": 2440233701, "node_id": "PR_kwDOEj0F6853AVGY", "number": 1050, "title": "ci: fix semver checks by pinning working dep version", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-07-31T14:40:46Z", "updated_at": "2024-08-20T08:07:51Z", "closed_at": "2024-07-31T15:31:53Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1050", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1050", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1050.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1050.patch", "merged_at": "2024-07-31T15:31:53Z"}, "body": "It appears that the update of tame-index from 0.12.1 to 0.12.2 contains API-breaking changes, which result in cargo-semver-checks compilation error. To work around this, a custom setup of cargo-semver-checks is done that pins tame-index to 0.12.1 version.\r\n\r\nThis should be reverted once tame-index issues 0.12.3 that reverts back the breaking changes, or once cargo-semver-checks issues a new release that works around the problem.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1050/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1050/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1049", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1049/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1049/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1049/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1049", "id": 2439911204, "node_id": "PR_kwDOEj0F6852_N9U", "number": 1049, "title": "scylla: add scylla_cloud_tests to cfg allowlist", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-07-31T12:16:01Z", "updated_at": "2024-08-20T08:07:49Z", "closed_at": "2024-07-31T13:31:35Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1049", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1049", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1049.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1049.patch", "merged_at": "2024-07-31T13:31:35Z"}, "body": "With rust 1.80, cfg parameters are checked by the compiler, so that warnings are emitted when unexpected cfg parameter is encountered. As we are using `cfg(scylla_cloud_tests)` to conditionally compile tests applicable for Scylla Serverless Cloud, that parameter is listed in Cargo.toml to prevent warnings.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.~~\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1049/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1046", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1046/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1046/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1046/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1046", "id": 2435788530, "node_id": "PR_kwDOEj0F6852xDFg", "number": 1046, "title": "codewide: appease clippy again", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2024-07-29T15:54:59Z", "updated_at": "2024-08-20T08:07:47Z", "closed_at": "2024-07-30T09:37:28Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1046", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1046", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1046.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1046.patch", "merged_at": "2024-07-30T09:37:27Z"}, "body": "This time clippy got angry about bad indentation in docstrings' lists.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1046/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1046/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1045", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1045/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1045/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1045/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1045", "id": 2435719964, "node_id": "PR_kwDOEj0F6852wz8E", "number": 1045, "title": "topology: skip invalid peers instead of failing", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7180916061, "node_id": "LA_kwDOEj0F688AAAABrAQVXQ", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/metadata", "name": "area/metadata", "color": "3F1566", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2024-07-29T15:24:57Z", "updated_at": "2024-08-01T08:26:10Z", "closed_at": "2024-08-01T08:15:39Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1045", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1045", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1045.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1045.patch", "merged_at": "2024-08-01T08:15:39Z"}, "body": "## Motivation\r\n\r\nIt appears that in some clusters there sometimes emerges a transient state that there are some incomplete/invalid peer entries in system tables. Under such circumstances, the driver would throw an error and fail the metadata refresh altogether, eventually leading to critical conditions such as no hosts to query.\r\n\r\n## Solution\r\n\r\nTo fix this in line with how other drivers approach this, a warning is emitted upon invalid peer entry read, and the entry is skipped with no error returned.\r\n\r\nFixes: #1023\r\nFixes: #235\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1045/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1040", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1040/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1040/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1040/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1040", "id": 2403446154, "node_id": "PR_kwDOEj0F6851HD_W", "number": 1040, "title": "Release 0.13.1", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-07-11T15:12:15Z", "updated_at": "2024-07-11T17:12:50Z", "closed_at": "2024-07-11T17:12:50Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1040", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1040", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1040.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1040.patch", "merged_at": "2024-07-11T17:12:50Z"}, "body": "The ScyllaDB team is pleased to announce ScyllaDB Rust Driver 0.13.1,\r\nan asynchronous CQL driver for Rust, optimized for Scylla, but also compatible with Apache Cassandra!\r\n\r\nSome interesting statistics:\r\n\r\n- over 1,905k downloads on crates!\r\n- over 545 GitHub stars!\r\n\r\n## Changes\r\n\r\n**Bug fixes:**\r\n- Made `log` logger work with the driver again ([#992](https://github.com/scylladb/scylla-rust-driver/pull/992))\r\n- Fixed bug that Batches would be always sent as LOGGED if they contain any unprepared statement (`Query`) ([#1038](https://github.com/scylladb/scylla-rust-driver/pull/1038))\r\n- Fixed two efficiency-related bugs in default load balancing policy ([#1037](https://github.com/scylladb/scylla-rust-driver/pull/1037))\r\n\r\n**Documentation:**\r\n- Documented logging with `tracing` and `log` libraries and provided an example ([#992](https://github.com/scylladb/scylla-rust-driver/pull/992))\r\n\r\n**CI / developer tool improvements:**\r\n- Silenced mock structs unused warning ([#996](https://github.com/scylladb/scylla-rust-driver/pull/996))\r\n- Appeased Clippy again ([#1002](https://github.com/scylladb/scylla-rust-driver/pull/1002) and [#1013](https://github.com/scylladb/scylla-rust-driver/pull/1013))\r\n- Turned tablets off for LWT tests, as tablets do not support LWT yet ([d20aed54](https://github.com/scylladb/scylla-rust-driver/commit/d20aed54))\r\n- Made LWT tests ignored when testing with tablets, as tablets do not support LWT yet ([2bd45560](https://github.com/scylladb/scylla-rust-driver/commit/2bd45560))\r\n\r\nCongrats to all contributors and thanks everyone for using our driver!\r\n\r\n----------\r\n\r\nThe source code of the driver can be found here:\r\n- [https://github.com/scylladb/scylla-rust-driver](https://github.com/scylladb/scylla-rust-driver)\r\nContributions are most welcome!\r\n\r\nThe official crates.io registry entry is here:\r\n- [https://crates.io/crates/scylla](https://crates.io/crates/scylla)\r\n\r\nThank you for your attention, please do not hesitate to contact us if you have any questions, issues, feature requests, or are simply interested in our driver!\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1040/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1039", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1039/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1039/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1039/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1039", "id": 2401132590, "node_id": "PR_kwDOEj0F6850_P5X", "number": 1039, "title": "connection: expose setters for self-identity STARTUP options", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370612, "node_id": "MDU6TGFiZWwyNDQzMzcwNjEy", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "New feature or request"}, {"id": 7177048623, "node_id": "LA_kwDOEj0F688AAAABq8kSLw", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/cpp-rust-driver-p0", "name": "cpp-rust-driver-p0", "color": "FA7D3D", "default": false, "description": "Functionality required by cpp-rust-driver"}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2024-07-10T15:55:50Z", "updated_at": "2024-08-05T17:06:01Z", "closed_at": "2024-08-03T07:32:48Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1039", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1039", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1039.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1039.patch", "merged_at": "2024-08-03T07:32:48Z"}, "body": "Resolves: #1028\r\n\r\n## Motivation\r\nSee #1028.\r\n\r\n# What's done\r\n\r\n## Preparatory steps\r\n\r\n### Reduce allocations by using `Cow<str>` for SUPPORTED/STARTUP options\r\n- `types::write_string_map` was genericised to accept `HashMap`s with keys and values being any form of strings, including `Cow<str>`.\r\n- as majority of keys and significant number of values of STARTUP options are known at compile time and thus statically allocated, `Startup` request now holds `HashMap<Cow<str>, Cow<str>`  instead of `HashMap<String, String>` to reduce needless allocations.\r\n\r\n### refactors for readability\r\n- `setup_tcp_keepalive()` was extracted from `Connection::new()` to reduce clutter.\r\n- keys of SUPPORTED/STARTUP options were extracted as constants to `options` module to have them in one place and avoid using plain string literals in code.\r\n- resolved a dated TODO about whether logic in `open_named_connection` should be part of `Connection::new` - answered the question, justified the answer and added docstrings to convey that answer.\r\n- added many comments to `open_named_connection`, as the function is big and crucial for driver operation, so future readers will benefit.\r\n\r\n### Compression-related small enhancements\r\n- `Compression` name is now no longer allocated, as its name is a `&'static str` anyway.\r\n- warning is now emitted if requested Compression is not supported; before, it would silently fall back to no compression.\r\n\r\n## `SelfIdentity` struct and API\r\n- grouped self-identity-related STARTUP options in `SelfIdentity` struct. It includes:\r\n  - `DRIVER_NAME`\r\n  - `DRIVER_VERSION`\r\n  - `APPLICATION_NAME`\r\n  - `APPLICATION_VERSION`\r\n  - `CLIENT_ID`\r\n  \r\n  `DRIVER_NAME` and `DRIVER_VERSION` are set by default to _\"ScyllaDB Rust Driver\"_ (previously _\"scylla-rust-driver\"_, changed to be consistent with _\"ScyllaDB Python Driver\"_) and Rust driver's package version as declared by Cargo. The remaining ones are unset by default.\r\n\r\n- exposed `SelfIdentity`'s API in `SessionBuilder`, and added a docstring with an example usage.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1039/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1038", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1038/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1038/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1038/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1038", "id": 2401108005, "node_id": "PR_kwDOEj0F6850_Kc1", "number": 1038, "title": "conn: copy a batch type in prepare_batch", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370607, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA3", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": "Something isn't working"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-07-10T15:45:30Z", "updated_at": "2024-10-29T14:35:44Z", "closed_at": "2024-07-10T16:47:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1038", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1038", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1038.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1038.patch", "merged_at": "2024-07-10T16:47:08Z"}, "body": "Fix: https://github.com/scylladb/scylla-rust-driver/issues/1035\r\n\r\nPreviously, there was a bug in prepare_batch function. We wouldn't inherit a BatchType from the `initial_batch` - in result, we would always send LOGGED batches (since LOGGED is a default batch type).\r\n\r\nThis would result in server errors when including a counter statements in a LOGGED batch. I added a test case which checks that it works correctly now, and the driver sends a COUNTER batch when user asks to.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~[ ] I have provided docstrings for the public items that I want to introduce.~\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1038/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1037", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1037/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1037/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1037/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1037", "id": 2399811068, "node_id": "PR_kwDOEj0F68506p1L", "number": 1037, "title": "LWT and rack-aware routing bugfixes", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370607, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA3", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/bug", "name": "bug", "color": "ee0701", "default": true, "description": "Something isn't working"}, {"id": 2495049049, "node_id": "MDU6TGFiZWwyNDk1MDQ5MDQ5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/load-balancing", "name": "area/load-balancing", "color": "a221d1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-07-10T05:50:36Z", "updated_at": "2024-08-20T08:07:58Z", "closed_at": "2024-07-11T12:02:37Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1037", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1037", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1037.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1037.patch", "merged_at": "2024-07-11T12:02:37Z"}, "body": "## Problem solved\r\n\r\nI've noticed two bugs in the routing code in DefaultPolicy:\r\n\r\n1. rack+latency-awareness bug.\r\n    A copy-paste kind of bug made local rack non-replica nodes not present in the fallback iterator earlier than non-local-rack non-replica nodes. This was a fairly edge case bug, though, because for it to manifest, the following conditions would have to be satisfied:\r\n    1. a non-replica node from the preferred rack must be penalised by LatencyAwareness,\r\n    3. a non-replica node from the preferred DC but not preferred rack must be penalised by LatencyAwareness, too.\r\n\r\n2. LWT + no preferred DC + the primary replica down or disabled - bug.\r\n    There is a special logic in default policy that handles the case when computing the first acceptable replica (i.e. such replica that it satisfies `pick_predicate`) is expensive (i.e. requires allocation). That logic was to make `pick` return None, because then `fallback`  would allocate and compute all acceptable replicas. Unfortunately, the logic contained a bug that made `pick` continue execution instead of returning None, leading to a non-necessarily-replica being returned. This would break the LWT optimisation, because in case that the primary replica is filtered out by LB (e.g. it's down, or disabled by HostFilter), the second replica should be targeted instead, deterministically.\r\n    \r\n    The fix involves creating an enum to distinguish between three scenarios:\r\n    1. No replica exists that could satisfy the pick predicate -> `None`;\r\n    2. The primary replica satisfies the pick predicate -> `Some(Computed(primary_replica))`;\r\n    4. The primary replica does not satisfy the pick predicate, but it's\r\n       possible that another replica does -> `Some(ToBeComputedInFallback)`.\r\n    \r\n    Before the fix, the third scenario would merge with the first, leading to incorrect behaviour of not returning None from `pick`.\r\n\r\n### Bonus\r\nAdditionally, this PR comes with typo fixes, comment amendments, and increased test assertions verbosity to aid debugging.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1037/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1037/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1036", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1036/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1036/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1036/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1036", "id": 2398522717, "node_id": "PR_kwDOEj0F68502d5B", "number": 1036, "title": "macros: enable clippy lints after darling fix", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-07-09T15:25:47Z", "updated_at": "2024-10-29T14:35:41Z", "closed_at": "2024-07-09T18:06:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1036", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1036", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1036.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1036.patch", "merged_at": "2024-07-09T18:06:27Z"}, "body": "Fix: https://github.com/scylladb/scylla-rust-driver/issues/1015\r\n\r\nBumped darling to v0.20.10. This version of darling appeases the clippy lints - we don't need to disable them anymore.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~[ ] I have provided docstrings for the public items that I want to introduce.~\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1036/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1036/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1026", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1026/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1026/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1026/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1026", "id": 2383602968, "node_id": "PR_kwDOEj0F6850DtkY", "number": 1026, "title": "errors: Replace `ParseError` with `CqlResponseParseError` in `frame::response` module", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 7, "created_at": "2024-07-01T11:34:40Z", "updated_at": "2024-10-29T14:36:05Z", "closed_at": "2024-08-22T13:51:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1026", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1026", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1026.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1026.patch", "merged_at": "2024-08-22T13:51:09Z"}, "body": "Ref: https://github.com/scylladb/scylla-rust-driver/issues/519\r\n\r\nDepends on: https://github.com/scylladb/scylla-rust-driver/pull/1017\r\n\r\n# Motivation\r\nWe ultimately want to get rid of the `ParseError`. This error type is overloaded with a lot of variants which do not provide much context to the users. In addition, a lot of errors are stringified.\r\n\r\nThis PR gets rid of `ParseError` from the `frame::response` module which is responsible for CQL response deserialization. This is the place where the usage of `ParseError` is abused the most.\r\n\r\n# Changes\r\n## Types of response\r\nThere are multiple types of responses. We introduce a new error type for each of them, e.g. `CqlResultParseError` or `CqlSupportedParseError`. I follow a bottom-to-top approach, starting from implementing an error types for CQL column type deserialization.\r\n\r\nEach commit introduces a new error type, which is firstly encapsulated by `ParseError` (so the higher level functions returning `ParseError` can apply ? operator). Once we exhaust all of the error variants that can be returned by some function, we introduce a new error type which encapsulates error types introduced in previous commits. These error types are then moved out of the `ParseError` (if possible, sometimes the functions are not exclusive to `frame::response` module which is the only module addressed in this PR).\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1026/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1024", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1024/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1024/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1024/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1024", "id": 2377506633, "node_id": "PR_kwDOEj0F685zvRlm", "number": 1024, "title": "Deserialization derive macros", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370612, "node_id": "MDU6TGFiZWwyNDQzMzcwNjEy", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "New feature or request"}, {"id": 4712022841, "node_id": "LA_kwDOEj0F688AAAABGNvDOQ", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/performance", "name": "performance", "color": "1D76DB", "default": false, "description": "Improves performance of existing features"}, {"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}, {"id": 7180912560, "node_id": "LA_kwDOEj0F688AAAABrAQHsA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/deserialization", "name": "area/deserialization", "color": "799E5B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 11, "created_at": "2024-06-27T08:28:23Z", "updated_at": "2024-08-06T16:07:00Z", "closed_at": "2024-08-06T16:05:33Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1024", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1024", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1024.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1024.patch", "merged_at": "2024-08-06T16:05:33Z"}, "body": "Fixes #962\r\n\r\nDerive macros for `DeserializeValue` and `DeserializeRow` are introduced. \r\n\r\n## An example feature-complete use\r\n\r\n```rust\r\n#[derive(scylla_macros::DeserializeValue, PartialEq, Eq, Debug)]\r\n#[scylla(enforce_order, skip_name_checks, forbid_excess_udt_fields)]\r\nstruct Udt<'a> {\r\n    a: &'a str,\r\n    #[scylla(skip)]\r\n    x: String,\r\n    #[scylla(allow_missing)]\r\n    b: Option<i32>,\r\n    #[scylla(rename = \"d\", default_when_null)]\r\n    c: i64,\r\n}\r\n\r\n#[derive(scylla_macros::DeserializeRow, PartialEq, Eq, Debug)]\r\n#[scylla(enforce_order)\r\nstruct MyRow<'a> {\r\n    a: &'a str,\r\n    #[scylla(skip)]\r\n    x: String,\r\n    b: Option<i32>,\r\n    #[scylla(rename = \"d\")]\r\n    c: i64,\r\n}\r\n```\r\n\r\n## Features\r\n\r\n### Flavours\r\nBoth macros support both _unordered_ (the default) and _enforce_order_ flavours. These are analogous to `Serialize{Value,Row}` macros flavours, i.e.\r\n- _unordered_ matches by name and allows for arbitrary order of fields in Rust struct and of fields in CQL UDT or columns in CQL row;\r\n- _enforce_order_ matches by position, verifying that names match (unless `skip_name_checks` attribute is given). This is more strict, but also more performant (because the code, by expecting a specific order, can be more compact and less dynamic).\r\n\r\n### Struct attributes specific to `DeserializeValue`:\r\n- `forbid_excess_udt_fields` - by default, if a UDT definition contains more fields than the Rust struct (in _unordered_ flavour: anywhere, in _enforce_order_: in suffix), those excess fields are ignored. With `forbid_excess_udt_fields` attribute set, type check fails with an error in case such fields are present. For comparison, `DeserializeRow` always requires the same number of Rust fields and CQL columns, effectively rejecting rows with excess columns.\r\n\r\n### Field attributes common to `DeserializeValue` and `DeserializeRow`\r\n- `skip` - a Rust struct field is skipped during type check and deserialization, and initialised with `Default::default()`;\r\n- `rename = \"X\"` - a Rust struct field is matched to CQL UDT field / row column with the name specified instead of its own name.\r\n\r\n### Field attributes specific to `DeserializeValue`\r\nThe following attributes are very important in production when adding new fields to a UDT, if one first updates clients, then the cluster. They allow for seamless transition in such case.\r\n\r\n- `allow_missing` - if a Rust struct field's name is missing from CQL UDT definition, the field is initialised with `Default::default()`;\r\n- `default_when_null` - if a CQL UDT field contains null, but the Rust field's type expects non-null, deserialization would normally fail. With this attribute, the field is initialised with `Default::default()` instead.\r\n\r\n## Errors\r\nThe returned errors are rich and insightful, using the new deserialization error framework. They are well-tested.\r\n\r\n## Testing\r\nAll flavours and attributes should be tested in various combinations. Please verify that I didn't forget about any.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1024/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1024/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1019", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1019/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1019/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1019/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1019", "id": 2369234443, "node_id": "PR_kwDOEj0F685zUC7I", "number": 1019, "title": "Remove tokio version bounds", "user": {"login": "rukai", "id": 5120858, "node_id": "MDQ6VXNlcjUxMjA4NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5120858?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rukai", "html_url": "https://github.com/rukai", "followers_url": "https://api.github.com/users/rukai/followers", "following_url": "https://api.github.com/users/rukai/following{/other_user}", "gists_url": "https://api.github.com/users/rukai/gists{/gist_id}", "starred_url": "https://api.github.com/users/rukai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rukai/subscriptions", "organizations_url": "https://api.github.com/users/rukai/orgs", "repos_url": "https://api.github.com/users/rukai/repos", "events_url": "https://api.github.com/users/rukai/events{/privacy}", "received_events_url": "https://api.github.com/users/rukai/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-06-24T05:18:12Z", "updated_at": "2024-06-26T13:52:05Z", "closed_at": "2024-06-26T13:52:05Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1019", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1019", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1019.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1019.patch", "merged_at": "2024-06-26T13:52:05Z"}, "body": "This is fine now since https://github.com/tokio-rs/tokio/issues/6610 is resolved via https://github.com/becheran/ntest/pull/28 which has now been released in ntest 0.9.3\r\nThis PR also bumps the itertools + base64 versions, since they are trivial upgrades\r\n\r\nThe latest git main branch of scylla-rust-driver fails to build in my project due to the version restriction, these kinds of version restrictions often cause problems like this, so it would be bad for such a version restriction to end up in a release.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1019/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1017", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1017/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1017/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1017/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1017", "id": 2364673513, "node_id": "PR_kwDOEj0F685zFgiB", "number": 1017, "title": "errors: Low level (de)ser errors", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 8, "created_at": "2024-06-20T15:02:01Z", "updated_at": "2024-10-29T14:35:46Z", "closed_at": "2024-07-29T09:06:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1017", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1017", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1017.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1017.patch", "merged_at": "2024-07-29T09:06:52Z"}, "body": "Ref: https://github.com/scylladb/scylla-rust-driver/issues/519\r\n\r\n# Motivation\r\n\r\nThis commit is a small step forward to resolving the issues related to errors in rust driver. The main goal of this PR is to get rid of `ParseError` from `frame::types` module.\r\n\r\nAs a bonus, the newly introduced deserialization module is adjusted as well. Thanks to that, we remove the cycle in error types (`DeserializationError <-> ParseError`).\r\n\r\n# Changes\r\n- introduced new enum error type returned from types module: `LowLevelDeserializationError`\r\n- changed the return error type of `types::read_*` functions to `LowLevelDeserializationError`\r\n-  replaced `value::BuiltinDeserializationErrorKind::GenericParseError` with new variants\r\n- changed the return error type of `deser_cql_value` to DeserializationError\r\n- replaced `TabletsParsingError::Parse` with `TabletsParsingError::DeserializationError` \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- ~[ ] I added appropriate `Fixes:` annotations to PR description.~\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1017/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1013", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1013/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1013/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1013/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1013", "id": 2360288998, "node_id": "PR_kwDOEj0F685y2eFr", "number": 1013, "title": "CI: fix clippy issues", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2024-06-18T16:45:44Z", "updated_at": "2024-10-29T14:35:42Z", "closed_at": "2024-06-20T11:31:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1013", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1013", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1013.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1013.patch", "merged_at": "2024-06-20T11:31:54Z"}, "body": "There were two clippy checks that were failing:\r\n- not using `unwrap_or_default` in the code generated by `darling` crate. See the corresponding issue: https://github.com/TedDriggs/darling/issues/293\r\n- usage of legacy numeric constant - `std::i16::MAX`, instead of `i16::MAX`\r\n\r\nThis PR fixes the issues and makes CI pass.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~[ ] I have provided docstrings for the public items that I want to introduce.~\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- ~[ ] I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1013/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1011", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1011/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1011/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1011/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1011", "id": 2348285462, "node_id": "PR_kwDOEj0F685yNgY4", "number": 1011, "title": "CI: fix issues related to `[tokio::test]`/`[ntest::timeout]` attributes and tablets with LWT", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-06-12T09:31:03Z", "updated_at": "2024-10-29T14:35:32Z", "closed_at": "2024-06-13T09:21:31Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1011", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1011", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1011.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1011.patch", "merged_at": "2024-06-13T09:21:31Z"}, "body": "This PR fixes the issues with CI that happen lately.\r\n\r\nChanges:\r\n- Printing rust tools' versions in CI. This might be helpful for future investigations in case of CI failures.\r\n- Put restrictions on tokio version. Bumped minimal version to 1.34. The version should be lower than 1.38, because of the issues with `[tokio::test]` and `[ntest::timeout]` attributes. Ref: https://github.com/tokio-rs/tokio/issues/6610. Remove this restriction once the issue is fixed.\r\n- Disabling tablets in tests that use LWT.\r\n- Marked `test_lwt_optimization_works_with_tablets` with `#[ignore]` (tests LWT + tablets).\r\n- Removed `tablets.yml` workflow, since tablets are stable in newest releases of Scylla - no need to create a separate job for tablets which creates a cluster with `ccm`.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~[ ] I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~[ ] I have provided docstrings for the public items that I want to introduce.~\r\n- ~[ ] I have adjusted the documentation in `./docs/source/`.~\r\n- ~[ ] I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1011/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1004", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1004/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1004/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1004/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1004", "id": 2307525595, "node_id": "PR_kwDOEj0F685wCsSM", "number": 1004, "title": "Pre-deserialization-refactor preparatory changes", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 2, "created_at": "2024-05-21T07:20:06Z", "updated_at": "2024-05-21T09:43:28Z", "closed_at": "2024-05-21T09:43:24Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1004", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1004", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1004.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1004.patch", "merged_at": "2024-05-21T09:43:24Z"}, "body": "This is a bunch of preparatory changes to come before the proper deserialization refactor.\r\nTo avoid the PR with the first deserialization refactor portion being so big, I extracted them here to be merged sooner.\r\n\r\n### What's done:\r\n- `types::write_bytes_opt()` becomes more generic;\r\n- types: return `std::io::Error` instead of `ParseError` where possible - don't unnecessarily broaden the codomain of those functions (not to have to unnecessarily pattern match on their returned error type);\r\n- scylla-cql: add `assert_matches` as dev-dep. It will be helpful in testing deserialization framework, and will also be used in serialization instead of `assert!(matches!(...))`;\r\n- codewide: ditch assert!(matches!(...)) - as assert_matches!(...) provide superior experience (providing helpful debugging messages with how the mismatched type looked like), all `assert!(matches!(...))` occurences across the code were changed to `assert_matches!(...)`;\r\n- serialize: deduplicate `do_serialize[_err]`;\r\n- serialize errors:\r\n  - names and error messages are changed to better reflect reality;\r\n  - a bunch of typos are fixed, and some names are changed to be more explicit;\r\n  - where possible, `write!(f, ...)` is replaced with `f.write_str(...)` for performance. \r\n\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1004/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1002", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1002/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1002/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1002/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1002", "id": 2307443621, "node_id": "PR_kwDOEj0F685wCaPl", "number": 1002, "title": "codewide: appease Clippy", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-05-21T06:37:27Z", "updated_at": "2024-05-21T07:22:02Z", "closed_at": "2024-05-21T07:21:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1002", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1002", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1002.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1002.patch", "merged_at": "2024-05-21T07:21:58Z"}, "body": "Clippy started to complain again:\r\n- direct impl of ToString instead of taking advantage of blanked impl over Display,\r\n- no Default impl for LegacySerializedValues,\r\n- assigning result of clone() instead of using clone_from().\r\n\r\nThe suggestions were applied.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1002/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1002/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1000", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1000/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1000/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1000/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1000", "id": 2295353751, "node_id": "PR_kwDOEj0F685vZTY0", "number": 1000, "title": "Rename `SerializeCql` to `SerializeValue`", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 4, "created_at": "2024-05-14T12:47:23Z", "updated_at": "2024-10-29T14:35:29Z", "closed_at": "2024-06-04T04:47:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/1000", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/1000", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/1000.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/1000.patch", "merged_at": "2024-06-04T04:47:34Z"}, "body": "Fixes: https://github.com/scylladb/scylla-rust-driver/issues/905\r\n\r\n## Changes\r\n- renamed `SerializeCql` trait/macro to `SerializeValue`. Changed all occurrences of `SerializeCql` to `SerializeValue` (in the docs, etc.)\r\n- renamed `serialize_cql` to `serialize_value` in functions that implement derive macro\r\n- renamed macro `impl_serialize_cql_via_value` to `impl_serialize_value_via_value`\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1000/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/1000/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/997", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/997/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/997/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/997/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/997", "id": 2291196932, "node_id": "PR_kwDOEj0F685vLHuS", "number": 997, "title": "CONTIBUTING.md: update maintainers list", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-05-12T07:00:11Z", "updated_at": "2024-05-14T08:06:36Z", "closed_at": "2024-05-14T08:06:28Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/997", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/997", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/997.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/997.patch", "merged_at": "2024-05-14T08:06:28Z"}, "body": "The list got fully obsolete, so I updated it.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/997/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/996", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/996/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/996/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/996/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/996", "id": 2288970399, "node_id": "PR_kwDOEj0F685vDuO5", "number": 996, "title": "treewide: silence mock structs unused warning", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 7, "created_at": "2024-05-10T05:33:09Z", "updated_at": "2024-05-14T11:39:02Z", "closed_at": "2024-05-14T11:37:53Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/996", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/996", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/996.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/996.patch", "merged_at": "2024-05-14T11:37:53Z"}, "body": "With a new version of Rust toolchain (stable 1.78.0), our never constructed structs used for testing macros began to trigger rustc warnings. Now, they are silenced explicitly using `#[allow(unused)]`.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/996/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/995", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/995/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/995/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/995/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/995", "id": 2287884628, "node_id": "PR_kwDOEj0F685vAE5d", "number": 995, "title": "Release 0.13", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-09T15:05:38Z", "updated_at": "2024-05-09T15:50:41Z", "closed_at": "2024-05-09T15:50:41Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/995", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/995", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/995.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/995.patch", "merged_at": "2024-05-09T15:50:41Z"}, "body": "This is a draft for 0.13 release. \r\nSteps I'll perform after approval:\r\n\r\n```\r\n# Perform fast-forward merge\r\ngit checkout main\r\ngit merge --ff-only branch-0.13.x\r\n\r\n# Create the tag\r\ngit tag -a v0.13.0\r\ngit push origin v0.13.0\r\n\r\n# Push the branch - need to push after the tag because otherwise docs will fail to build\r\ngit push origin main\r\n\r\n# Now verify that docs was built and published successfully\r\n\r\n# Publish new version to crates.io\r\ncargo publish -p scylla-macros\r\ncargo publish -p scylla-cql\r\ncargo publish -p scylla\r\n\r\n# Create a github release with previously approved release notes\r\n\r\n# Create post on the forum about release\r\n```\r\n\r\nProposed release notes:\r\n\r\n---\r\n\r\nThe ScyllaDB team is pleased to announce ScyllaDB Rust Driver 0.13.0,\r\nan asynchronous CQL driver for Rust, optimized for Scylla, but also compatible with Apache Cassandra!\r\n\r\nSome interesting statistics:\r\n\r\n- over 1,615k downloads on crates!\r\n- over 520 GitHub stars!\r\n\r\n## Changes\r\n\r\n**API cleanups / breaking changes:**\r\n\r\n- Implemented support for Tablets, a new major architectural feature of Scylla that will be a part of upcoming 6.0 release. This support is required for token (and shard) awareness to work with Tablet-based tables. You can read more about Tablets [in a blogpost by Tomasz Grabiec](https://www.scylladb.com/2023/07/10/why-scylladb-is-moving-to-a-new-replication-algorithm-tablets/) or watch a [presentation by Avi Kivity](https://www.scylladb.com/presentations/tablets-rethinking-replication/)  ([#937](https://github.com/scylladb/scylla-rust-driver/pull/937))\r\n- Enabled *shard-selecting* load balancing. Before, a `LoadBalancingPolicy` would return a `Plan` consisting of `Node`s;\r\nnow, together with a `Node` it can optionally specify the `Shard` to contact as well. This is crucial for proper Tablets support (see above). Main PR [#944](https://github.com/scylladb/scylla-rust-driver/pull/944), with follow up [#969](https://github.com/scylladb/scylla-rust-driver/pull/969)\r\n- `Token`: added constructor and normalization to increase type-safety ([#948](https://github.com/scylladb/scylla-rust-driver/pull/948))\r\n- Removed another unstable dependency, `histogram::Histogram`, from public API ([#935](https://github.com/scylladb/scylla-rust-driver/pull/935))\r\n- Implemented CQL protocol-level optimisation: prepared statement result metadata can be now used to decode rows. **This saves network bandwidth if that option is enabled, because result metadata need not be sent with each DB query result.** ([#925](https://github.com/scylladb/scylla-rust-driver/pull/925))\r\n- Removed `num_enum` dependency. It was unstable, and we managed to do without it, so it no longer appears in the public API. ([#931](https://github.com/scylladb/scylla-rust-driver/pull/931))\r\n- Decreased pub visibility of `scylla-cql` definitions which weren't intended for access from outside the driver. ([#933](https://github.com/scylladb/scylla-rust-driver/pull/933))\r\n\r\n**New features / enhancements:**\r\n\r\n- Improved the `FromRow` derive macro to suppport structs with unnamed fields. Before, only structs with named fields were supported. ([#985](https://github.com/scylladb/scylla-rust-driver/pull/985))\r\n- testing: Increased timeout for fetching tracing info - Cassandra was so slow in tests that our CI used to fail sometimes... ([#966](https://github.com/scylladb/scylla-rust-driver/pull/966))\r\n- Removed `strum` and `strum_macros` dependencies. They were unstable, and we managed to do without it. ([#934](https://github.com/scylladb/scylla-rust-driver/pull/934))\r\n\r\n**Documentation:**\r\n\r\n- Got rid of (most) uses of `QueryResult::rows`. The preferred method is the more type safe `QueryResult::rows_typed`. Moreover, **`QueryResult::rows` is going to be deprecated** in the next release, once the new lazy deserialization framework is introduced. We thus recommend switching to `rows_typed` wherever possible. ([#955](https://github.com/scylladb/scylla-rust-driver/pull/955))\r\n\r\n**CI / developer tool improvements:**\r\n\r\n- Removed unreachable `pub`s ([#958](https://github.com/scylladb/scylla-rust-driver/pull/958))\r\n- Dealed with `chrono` deprecations ([#951](https://github.com/scylladb/scylla-rust-driver/pull/951))\r\n- CI: run `cargo clean` before tests ([#929](https://github.com/scylladb/scylla-rust-driver/pull/929))\r\n- CI: small fixes in semver checks ([#942](https://github.com/scylladb/scylla-rust-driver/pull/942))\r\n- CI: semver_checks now edits its comment instead of posting new one, so that the PR wall is less cluttered. ([#952](https://github.com/scylladb/scylla-rust-driver/pull/952))\r\n- CI: Tracing output is now shown for a test iff the test failed. This is a major aid in debugging in CI. ([#959](https://github.com/scylladb/scylla-rust-driver/pull/959))\r\n- Reverted *\"CI/Makefile: disable `uninlined_format_args` clippy lint\"*, as `rust-analyzer` now properly supports semantic analysis of such format args. ([#945](https://github.com/scylladb/scylla-rust-driver/pull/945))\r\n- Appeased Clippy again ([#971](https://github.com/scylladb/scylla-rust-driver/pull/971))\r\n\r\nCongrats to all contributors and thanks everyone for using our driver!\r\n\r\n----------\r\n\r\nThe source code of the driver can be found here:\r\n- [https://github.com/scylladb/scylla-rust-driver](https://github.com/scylladb/scylla-rust-driver)\r\nContributions are most welcome!\r\n\r\nThe official crates.io registry entry is here:\r\n- [https://crates.io/crates/scylla](https://crates.io/crates/scylla)\r\n\r\nThank you for your attention, please do not hesitate to contact us if you have any questions, issues, feature requests, or are simply interested in our driver!\r\n\r\nContributors since the last release:\r\n\r\n|commits|author|\r\n|----|--|\r\n| 40 | Karol Bary\u0142a |\r\n| 24 | Miko\u0142aj Uzarski |\r\n| 10 | Wojciech Przytu\u0142a |\r\n| 1 | Piotr Dulikowski |\r\n| 1 | Piotr Grabowski |\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/995/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/995/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/994", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/994/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/994/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/994/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/994", "id": 2283492945, "node_id": "PR_kwDOEj0F685uxR6F", "number": 994, "title": "docs: update theme 1.7", "user": {"login": "dgarcia360", "id": 9107969, "node_id": "MDQ6VXNlcjkxMDc5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/9107969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgarcia360", "html_url": "https://github.com/dgarcia360", "followers_url": "https://api.github.com/users/dgarcia360/followers", "following_url": "https://api.github.com/users/dgarcia360/following{/other_user}", "gists_url": "https://api.github.com/users/dgarcia360/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgarcia360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgarcia360/subscriptions", "organizations_url": "https://api.github.com/users/dgarcia360/orgs", "repos_url": "https://api.github.com/users/dgarcia360/repos", "events_url": "https://api.github.com/users/dgarcia360/events{/privacy}", "received_events_url": "https://api.github.com/users/dgarcia360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2024-05-07T14:17:58Z", "updated_at": "2024-05-14T10:01:17Z", "closed_at": "2024-05-14T10:01:16Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/994", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/994", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/994.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/994.patch", "merged_at": "2024-05-14T10:01:16Z"}, "body": "Related issue https://github.com/scylladb/sphinx-scylladb-theme/issues/1035\r\n\r\nScyllaDB Sphinx Theme 1.7 is out \ud83e\udd73 Now, the docs will automatically publish when backporting changes to previous branches. This release also introduces minor style enhancements to the sidebar and homepage.\r\n\r\nYou can read more about all notable changes [here](https://sphinx-theme.scylladb.com/master/upgrade/CHANGELOG.html#apr-2024).\r\n\r\n## How to test this PR\r\n\r\n1. Clone this PR. For more information, see [Cloning pull requests locally](https://docs.github.com/en/github/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally).\r\n\r\n2. Enter the docs folder, and run:\r\n  \r\n    ```\r\n    make preview\r\n    ````\r\n\r\n3. Open http://localhost:5500 with your favorite browser. The doc should render without errors, and the version should be Sphinx Theme version (see the footer) must be ``1.7.x``:\r\n\r\n![image](https://github.com/scylladb/scylladb/assets/9107969/36a20719-fb03-42be-a7bc-faa40d67eb91)\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/994/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/992", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/992/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/992/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/992/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/992", "id": 2275817919, "node_id": "PR_kwDOEj0F685uX-Kl", "number": 992, "title": "Remove `.with_current_subscriber()` calls", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2024-05-02T15:25:29Z", "updated_at": "2024-05-14T12:02:59Z", "closed_at": "2024-05-14T12:02:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/992", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/992", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/992.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/992.patch", "merged_at": "2024-05-14T12:02:58Z"}, "body": "Those calls were introduced in e5570956758503a8f0a7ed0ad1c649909f370a73,\r\nwith message:\r\n```\r\nNow, when the driver spawns a task to run a new future on it, that\r\nfuture will use the same subscriber as the code that spawned the task in\r\nthe first place.\r\n```\r\n\r\nThere is unfortunately no explanation about when it is necessary.\r\nI don't see any problems after removing those - logs are still collected correctly using a tracing subscriber.\r\nThose calls however have a harmful side-effect: they prevent usage of `log` loggers to listen to driver logs using `log` feature in `tracing` crate, which was reported in https://github.com/scylladb/scylla-rust-driver/issues/860 .\r\nAfter reporting the problem to `tracing` crate (https://github.com/tokio-rs/tracing/issues/2913) one of maintainers said that using `.with_current_subscriber()` in a library is not necessary in general.\r\n\r\nAs I don't see any issue caused by removing these calls, but their existence cause an issue, they are removed in this PR.\r\nThe PR also introduces an example showing usage of the driver with `env_logger` and adjusts documentation about logging.\r\n\r\nFixes: #860 \r\n\r\n@piodul if you remember why those calls were added please explain, because I have no idea in which scenario they could be necessary.\r\n\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/992/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/992/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/986", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/986/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/986/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/986/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/986", "id": 2252319489, "node_id": "PR_kwDOEj0F685tIxcr", "number": 986, "title": "prepared: docs for `PreparedStatement`", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-04-19T07:53:38Z", "updated_at": "2024-10-29T14:35:25Z", "closed_at": "2024-05-14T08:15:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/986", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/986", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/986.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/986.patch", "merged_at": "2024-05-14T08:15:09Z"}, "body": "In response to https://github.com/scylladb/scylla-rust-driver/pull/970#discussion_r1570902278.\r\n\r\nAdded docstring for `PreparedStatement`, which mentions:\r\n- how to prepare a statement\r\n- benefits of using prepared statements\r\n- statement repreparation that is handled by the driver\r\n- prepared statement cloning\r\n- correlation between prepared statements and schema altering \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/986/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/985", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/985/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/985/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/985/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/985", "id": 2252249255, "node_id": "PR_kwDOEj0F685tIiaZ", "number": 985, "title": "derive `FromRow` for structs with unnamed fields", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370612, "node_id": "MDU6TGFiZWwyNDQzMzcwNjEy", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": "New feature or request"}, {"id": 6133263722, "node_id": "LA_kwDOEj0F688AAAABbZItag", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/proc-macros", "name": "area/proc-macros", "color": "8EED0B", "default": false, "description": "Related to procedural macros"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2024-04-19T07:11:53Z", "updated_at": "2024-10-29T14:35:21Z", "closed_at": "2024-05-07T06:43:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/985", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/985", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/985.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/985.patch", "merged_at": "2024-05-07T06:43:09Z"}, "body": "Fixes: https://github.com/scylladb/scylla-rust-driver/issues/852\r\n\r\n## Motivation\r\n\r\nFor some reason, users were not able to derive `FromRow` trait for structs with unnamed fields.\r\nThis PR fixes that.\r\n\r\n## Changes\r\nAdjusted `from_row_derive` function from `scylla-macros` so that it supports structs with unnamed fields as well.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/985/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/985/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/980", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/980/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/980/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/980/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/980", "id": 2245622793, "node_id": "PR_kwDOEj0F685sx-E0", "number": 980, "title": "docs: adding context to timeuuid using v1 feature", "user": {"login": "danielhe4rt", "id": 6912596, "node_id": "MDQ6VXNlcjY5MTI1OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/6912596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielhe4rt", "html_url": "https://github.com/danielhe4rt", "followers_url": "https://api.github.com/users/danielhe4rt/followers", "following_url": "https://api.github.com/users/danielhe4rt/following{/other_user}", "gists_url": "https://api.github.com/users/danielhe4rt/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielhe4rt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielhe4rt/subscriptions", "organizations_url": "https://api.github.com/users/danielhe4rt/orgs", "repos_url": "https://api.github.com/users/danielhe4rt/repos", "events_url": "https://api.github.com/users/danielhe4rt/events{/privacy}", "received_events_url": "https://api.github.com/users/danielhe4rt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2443370609, "node_id": "MDU6TGFiZWwyNDQzMzcwNjA5", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/area/documentation", "name": "area/documentation", "color": "25E487", "default": false, "description": "Improvements or additions to documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2024-04-16T09:51:41Z", "updated_at": "2024-05-13T05:19:33Z", "closed_at": "2024-05-13T05:19:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/980", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/980", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/980.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/980.patch", "merged_at": "2024-05-13T05:19:33Z"}, "body": "## Motivation\r\n\r\nI decided to give more context for newcomers that want to try Timeuuid in the Rust Driver. Since I didn't had that much experience in the beginning and struggled for a while until understand how to use it.\r\n\r\nAlso I still didn't understand when and how I should generate the the node_id on `uuid::new_v1([])` parameters and IMHO it would be a great addition to the docs. \r\n\r\n### Fixes\r\n- [x] Add context to `uuid::v1` usage\r\n- [x] (Optional) Add context to `new_v1()` node_id numbers\r\n\r\n\r\n## Pre-review checklist\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/980/reactions", "total_count": 15, "+1": 0, "-1": 0, "laugh": 0, "hooray": 5, "confused": 0, "heart": 6, "rocket": 4, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/980/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/971", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/971/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/971/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/971/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/971", "id": 2204389144, "node_id": "PR_kwDOEj0F685qlgpB", "number": 971, "title": "treewide: appease Clippy", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-03-24T14:51:14Z", "updated_at": "2024-03-24T16:13:11Z", "closed_at": "2024-03-24T15:43:36Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/971", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/971", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/971.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/971.patch", "merged_at": "2024-03-24T15:43:36Z"}, "body": "With the new update of the toolchain, it found (reasonable) nits.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/971/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/971/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/970", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/970/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/970/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/970/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/970", "id": 2204373525, "node_id": "PR_kwDOEj0F685qldhN", "number": 970, "title": "Deserialization refactor: introduce new deserialization traits", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4712022841, "node_id": "LA_kwDOEj0F688AAAABGNvDOQ", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/performance", "name": "performance", "color": "1D76DB", "default": false, "description": "Improves performance of existing features"}, {"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 39, "created_at": "2024-03-24T14:16:12Z", "updated_at": "2024-06-13T09:45:56Z", "closed_at": "2024-06-13T09:45:48Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/970", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/970", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/970.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/970.patch", "merged_at": "2024-06-13T09:45:48Z"}, "body": "Fixes #961\r\nFixes #963\r\n\r\nHuge credits to @piodul for creating most of the new deserialization framework!\r\n\r\n## The new traits\r\nThis PR introduces the new deserialization traits, `DeserializeValue` and `DeserializeRow`, which are going to replace `FromCqlVal` and `FromRow`, respectively.\r\n\r\nIf a type implements `DeserializeValue<'f>`, this means that it can take a buffer of lifetime `'f` and deserialize itself, treating the contents of the buffer as a CQL value. Analogously, `DeserializeRow<'f>` allows for deserialization of types that are supposed to represent a whole row returned in the results.\r\n\r\nDeserialization is now split into two phases: type checking and actual deserialization. Both traits have two methods: `type_check` and `deserialize`. The idea behind this is to validate the column types of the response only once, after the response is received. The `deserialize` method is then called for each row/value to perform the actual parsing: that method is allowed to assume that `type_check` was called and may skip some type checking for performance (although it cannot use that assumption to perform unsafe operations, it is not an unsafe method).\r\n    \r\nThe previous framework only supported deserialization of types that exclusively own their data, for example `String` or `Vec<u8>`. However, the new framework allows for types that borrow or co-own the frame buffer:\r\n    - Types that borrow the buffer are `&'f str` and `&'f [u8]`. They just point to the raw data from the serialized response. Rust's lifetime system  makes sure that the the user doesn't deallocate the serialized  response until using the deserialized types that point to the buffer are dropped. Apart from the aforementioned types, a bunch of iterator types have been introduced that allow consuming collections without allocations.\r\n    - Serialized frame is represented with `bytes::Bytes`. It is possible to create a subslice (also of type `Bytes`) that keep the original alive. The type being deserialized can obtain access to such subslice. Like in the case of e.g. `&str` vs. `String`, keeping `Bytes`  allows to avoid an allocation, but it is also easier to handle as deserialized type doesn't have to be bound by any lifetime. It important to be careful when handling such types as they keep whole serialized frame alive, even if they only point to a subslice. This can lead to a space leak and more memory being used than necessary.\r\n\r\n## Implementation of the new traits for all supported types\r\n\r\n**All the previously supported types** (i.e. those that could be deserialized using the old framework) **are supported now as well**.\r\nThere is only one exception: CQL List is no longer deserializable into a set (`HashSet` or `BTreeSet`), because such conversion could be lossy, which is an unwanted property for deserialization.\r\n\r\n## Errors\r\n\r\nThe error framework is analogous to one used in the serialization framework: `DeserializationError` is added that resembles `SerializationError` and is type-erased as well.\r\n\r\nAs the new deserialization framework has separate `type_check()` and `deserialize()` function (contrary to the serialization framework, which has only one `serialize()` method), it makes sense for them to return distinct errors.\r\nThat's why a new `TypeCheckError` is added, too, which is type-erased as well.\r\n\r\n## Testing\r\n\r\n- All new types are unit tested. \r\n- Additionally, a decent test suite is added to verify compatibility of the old and the new framework. As in a later commit the old framework (`deser_cql_value`) is refactored to use the new one, the compatibility tests are then removed.\r\n- Another test suite is added to check that serialization composed with deserialization yields identity.\r\n- New errors are tested, too, although not exhaustively. I'd prefer not to bog down too much in testing them thoroughly.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/970/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/969", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/969/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/969/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/969/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/969", "id": 2202223793, "node_id": "PR_kwDOEj0F685qeVSO", "number": 969, "title": "LBP: Return Option<Shard> instead of Shard", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2024-03-22T10:51:57Z", "updated_at": "2024-03-28T12:01:45Z", "closed_at": "2024-03-28T12:01:45Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/969", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/969", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/969.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/969.patch", "merged_at": "2024-03-28T12:01:45Z"}, "body": "This was already documented as such, but due to an oversight the code was in disagreement with documentation. Approach from the documentation is better, because the currently implemented approach prevented deduplication in Plan from working correctly.\r\n\r\nI didn't change deduplication in DefaultPolicy, so currently for unprepared statements everything is deduplicated, and for prepared statements:\r\n- First in plan all are replicas (nodes + shards), properly deduplicated\r\n- Then nodes, also deduplicated\r\n- There is however no deduplication between replicas and nodes, so it's possible for prepared statement plan to first contain replica (node X, Some(n)) and then node (node X, None).\r\n\r\nThis makes sense to me: if none of the replicas responded, then something is very wrong. We can try different nodes, but we might as well try different shards on replica nodes. I don't see any big benefits from either approach, but I might be wrong.\r\n\r\nIn DefaultPolicy code there is a lot of places where `impl Fn...` is passed as a way to filter nodes. I changed some of the types so that:\r\n- The signature fits the purpose of the function. For example, if a function operates on replicas, then it's filter should accept `Shard` instead of `Option<Shard>`. On the contrary, if a function operated only on nodes, its filter now accepts just `NodeRef`.\r\n- Where possible I got rid of `&NodeRef` - NodeRef is alread just a reference and is `Copy`, so this gets rid of unnecessary indirection.\r\n- Where possible I made the functions accept 2 arguments instead of a tuple - the code is imho simpler and easier to read.\r\n\r\nWhen reviewing I'd suggest focusing on\r\n- Are the types used properly or does it make sens to change some of the occurenceS? `Shard` vs `Option<Shard>` vs absence of shard, `&NodeRef` vs `NodeRef`, `&(NodeRef, Shard)` vs `NodeRef, Shard` etc\r\n- Correctness with regards to produced plans, deduplication, API\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/967\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/969/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/966", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/966/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/966/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/966/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/966", "id": 2194892416, "node_id": "PR_kwDOEj0F685qFdXi", "number": 966, "title": "session_test: Increase tracing info timeout", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2024-03-19T12:52:27Z", "updated_at": "2024-03-20T11:38:50Z", "closed_at": "2024-03-19T17:28:04Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/966", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/966", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/966.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/966.patch", "merged_at": "2024-03-19T17:28:04Z"}, "body": "Default values for fetching tracing info are quite strict in the driver: it will make 5 attempts to fetch the data, waiting 3ms between attempts.\r\n\r\nFor Scylla this is enough, but for Cassandra it is not. For this reason our tests sometimes fail.\r\n\r\nThis was partially (for one test) fixed previously: https://github.com/scylladb/scylla-rust-driver/commit/61ad8781f1a01c9ec5ff087296229c2245c429b3\r\nThis PR fixes other test case that might be affected.\r\nPrevious fix used 50 attempts with 200ms wait, I changed it to 200 attempts with 50ms wait in order to not slow down Scylla tests unnecessarily.\r\n\r\nIncreased default retry attempts in Session from 5 to 10 to make tracing fetching more reliable for Scylla users without increasing latency.\r\nI didn't touch default sleep between attempts - for Scylla new values should be ok, and Cassandra users can change them in config. I added a warning in docs so that they are aware of the problem.\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/957\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/709\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/966/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/959", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/959/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/959/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/959/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/959", "id": 2187121359, "node_id": "PR_kwDOEj0F685prAQQ", "number": 959, "title": "Show tracing output only for failed tests", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 5517539332, "node_id": "LA_kwDOEj0F688AAAABSN74BA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/symptom/ci%20stability", "name": "symptom/ci stability", "color": "E99695", "default": false, "description": "Related to continuous integration"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-03-14T19:29:49Z", "updated_at": "2024-03-19T09:53:08Z", "closed_at": "2024-03-19T09:52:02Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/959", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/959", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/959.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/959.patch", "merged_at": "2024-03-19T09:52:02Z"}, "body": "## Motivation\r\n\r\nFlaky tests keep disrupting our CI. Those test failures are often difficult to reproduce locally. A way is needed to debug tests that failed in CI.\r\nOn the other hand, error traces bloat outputs.\r\n\r\n## What's done\r\n- by using `tracing_subscriber`'s `TestWriter,` tracing's prints are now captured and only shown if a test fails;\r\n- for all tests to easily employ the captured tracing, a function `setup_tracing()` is introduced and added to most tests in `scylla` and `scylla-proxy` crates.\r\n- `CONTIBUTING.md` is updated to mention `setup_tracing()`'s intended usage.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- ~~[ ] I have adjusted the documentation in `./docs/source/`.~~\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/959/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/959/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/958", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/958/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/958/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/958/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/958", "id": 2186202152, "node_id": "PR_kwDOEj0F685pn0VU", "number": 958, "title": "Remove unreachable pubs", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-03-14T12:17:31Z", "updated_at": "2024-03-18T17:06:26Z", "closed_at": "2024-03-14T18:30:48Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/958", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/958", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/958.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/958.patch", "merged_at": "2024-03-14T18:30:48Z"}, "body": "Up until now some structs / fields etc were marked as pub despite not being a part of public API.\r\nThis is confusing when reading code: in order to know if something is truly public you need to check all the modules up to lib.rs to verify that each appears in some `pub use`.\r\n\r\nThis PR removes all such occurrences - now something is public if and only if it is marked as pub.\r\nIt also enables rustc lint `unreachable-pub` to prevent such occurences in the future.\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/958/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/955", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/955/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/955/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/955/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/955", "id": 2181890673, "node_id": "PR_kwDOEj0F685pZFwd", "number": 955, "title": "treewide: get rid of (most) uses of `QueryResult::rows`", "user": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-03-12T15:15:16Z", "updated_at": "2024-03-14T16:45:55Z", "closed_at": "2024-03-14T16:37:14Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/955", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/955", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/955.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/955.patch", "merged_at": "2024-03-14T16:37:14Z"}, "body": "Part of #462.\r\n\r\n### This PR serves two purposes:\r\n\r\n- Modernizes the existing examples and internal uses of `QueryResult` in the driver. We have had helpers such as rows_typed etc. for a long time and they are supposed to offer superior experience, although many of our tests still use `QueryResult::rows` directly.\r\n- Prepares for the iterator-based deserialization refactor. The representation of `QueryResult` will change and the rows field will not be available anymore - instead, the helper methods very similar to the current ones will be mandatory.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- ~~[ ] I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- ~~[ ] I have provided docstrings for the public items that I want to introduce.~~\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- ~~[ ] I added appropriate `Fixes:` annotations to PR description.~~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/955/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/955/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/952", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/952/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/952/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/952/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/952", "id": 2177429732, "node_id": "PR_kwDOEj0F685pJ7Wn", "number": 952, "title": "semver_checks: Edit comment instead of posting new one", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-09T22:38:53Z", "updated_at": "2024-03-12T13:57:16Z", "closed_at": "2024-03-12T13:41:18Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/952", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/952", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/952.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/952.patch", "merged_at": "2024-03-12T13:41:18Z"}, "body": "Up until now semver_checks CI posted a new comment after each push to a PR if such push resulted in PR (still) having breaking changes.\r\nThis was quite spammy for PRs that intentionally made breaking changes, because each and every push resulted in a new comment.\r\n\r\nThis commit changes the CI so that it edits already posted comment, and only posts a new one when there was none before.\r\n\r\nIf there are multiple comments already (as is the case with already open PRs) then the oldest one will be chosen for edit.\r\nThe aim is to always have semver status immediately below PR description.\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/938\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/952/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/952/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/951", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/951/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/951/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/951/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/951", "id": 2172432108, "node_id": "PR_kwDOEj0F685o47SM", "number": 951, "title": "Deal with chrono deprecations", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-03-06T21:10:26Z", "updated_at": "2024-03-07T14:59:58Z", "closed_at": "2024-03-07T14:59:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/951", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/951", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/951.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/951.patch", "merged_at": "2024-03-07T14:59:58Z"}, "body": "Chrono deprecated several method in 0.4.35 / 0.4.34\r\n\r\n- chrono::Duration::days -> chrono::Duration::try_days New method was introduced in 0.4.33, so quite recently. This requires us to bump minimum chrono version.\r\n\r\n- NaiveDateTime::from_timestamp_opt -> DateTime::from_timestamp This requires some other changes, because of the switch from NaiveDateTime to DateTime.\r\n\r\n- NaiveDateTime::timestamp_millis -> .and_utc().timestamp_millis()\r\n\r\nI also added a comment explaining the implementation of CqlValueDisplayer and why it doesn't use existing `impl TryInto<NaiveDate> for CqlDate`.\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/950\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/951/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/948", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/948/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/948/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/948/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/948", "id": 2169508110, "node_id": "PR_kwDOEj0F685ou5fW", "number": 948, "title": "Token: add constructor and normalization", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2024-03-05T15:21:05Z", "updated_at": "2024-03-27T10:04:45Z", "closed_at": "2024-03-27T10:04:45Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/948", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/948", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/948.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/948.patch", "merged_at": "2024-03-27T10:04:45Z"}, "body": "`i64::MIN` turns out to be an invalid value for a token: https://github.com/scylladb/scylladb/blob/4be70bfc2bc7f133cab492b4aac7bab9c790a48c/dht/token.hh#L32\r\nHashing algorithm should change `i64::MIN` result to `i64::MAX`.\r\nIn order to have this check in one place and make sure we always perform it I made `value` field of `Token` non-public and created constructor and getter for it.\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/947\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/948/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/945", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/945/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/945/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/945/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/945", "id": 2167214639, "node_id": "PR_kwDOEj0F685onCXu", "number": 945, "title": "Revert \"CI/Makefile: disable `uninlined_format_args` clippy lint\"", "user": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-03-04T16:12:20Z", "updated_at": "2024-03-05T11:07:36Z", "closed_at": "2024-03-05T11:07:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/945", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/945", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/945.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/945.patch", "merged_at": "2024-03-05T11:07:36Z"}, "body": "This reverts commit 4964b4471c3d14bfea75e532b2e7c24cbd48cd65.\r\n\r\nThe main reason that `uninlined_format_args` lint was disabled in Rust Driver's CI/Makefile was that inlined variables in format strings had spotty support in rust-analyzer: rust-analyzer did not support renaming variables inside format strings.\r\n\r\nFortunately, rust-analyzer recently gained support for renaming  variables in format strings: rust-lang/rust-analyzer#16027, therefore 4964b4471 can now be reverted. \r\n\r\nMoreover, Rust 1.67.1 downgraded `uninlined_format_args` to pedantic,  meaning that it's disabled by default and we don't have to disable it manually. If it's ever promoted back to an enforced rule by default, we'll be ready to deal with it again (with a proper rust-analyzer  support) - not addressing it now to avoid merge conflicts with other bigger planned PRs.\r\n\r\nCloses #643\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/945/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/945/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/944", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/944/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/944/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/944/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/944", "id": 2164516263, "node_id": "PR_kwDOEj0F685oeDYW", "number": 944, "title": "Shard selecting load balancing", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2024-03-02T02:26:40Z", "updated_at": "2024-03-14T11:11:01Z", "closed_at": "2024-03-14T11:11:00Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/944", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/944", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/944.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/944.patch", "merged_at": "2024-03-14T11:11:00Z"}, "body": "This is a more polished version of https://github.com/scylladb/scylla-rust-driver/pull/791\r\nThe changes from #791 are:\r\n- Totally reworked commit structure, so that each commit actually compiles and passes all tests and checks. Doing this took quite a lot of time. Original commit structure was... a bit chaotic.\r\n- Fixed all the warnings\r\n- Removed some functions that were no longer used.\r\n- Updated a comment that became incorrect\r\n\r\nPosting the original description, slightly modified, as it is still relevant:\r\n\r\n# Motivation\r\nMost of our drivers, being inherited from Cassandra, load balance only over nodes, not specific shards. Multiple ideas have arised that could benefit from having a shard-selecting load balancing. Among them:\r\n- **shard-aware batching** (#738);\r\n- **tablets support**:\r\nwith tablets enabled (ATM experimental in ScyllaDB), target shard is not derived from token (computed from partition key), but rather read from `system.tablets`. Therefore, a load balancer should be able to decide a target shard on its own, by abstracting over either token ring or tablets being used for cluster topology.\r\n- **overloaded shard optimisation**:\r\nsome tests have shown that sometimes, when a shard is particularly overloaded, it may be beneficial (performance-wise) to send the request to the proper node, **but** a wrong shard. That shard would then do part of the work that the overloaded shard would else have to do itself.\r\n\r\n# Design\r\n- LB policy now is to return a `(NodeRef, Shard)` pair, enabling finer-grained control over targeted shards.\r\n- regarding tablets support: `ReplicaLocator` is the place where the abstraction over either token ring or tablets is to be implemented. Ideally, the LB policy does not have to be aware of the actual mechanism (token ring or tablets) being used for a particular query.\r\n\r\n# What's done\r\n- internal and public load-balancing-related interfaces are changed from `NodeRef` to `(NodeRef, Shard)` pair,\r\n- shard selection logic is removed from `NodeConnectionPool`; a method is added there that returns a connection to a specific shard,\r\n- `Session`'s logic propagates the load balancing policy's target shard down to the connection pool,\r\n- a stub implementation of shard selection is added to `ReplicaLocator`. At the moment, it simply computes the shard based on the token, the same way as it was done in the connection pool layer before.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/944/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/942", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/942/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/942/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/942/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/942", "id": 2157831342, "node_id": "PR_kwDOEj0F685oHK9n", "number": 942, "title": "Fix semver checks", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2024-02-28T00:10:04Z", "updated_at": "2025-02-10T09:37:27Z", "closed_at": "2024-03-08T05:18:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/942", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/942", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/942.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/942.patch", "merged_at": "2024-03-08T05:18:01Z"}, "body": "Previously semver checks CI used `/dev/tty` which seems unavailable in Github Actions.\r\nChanged it to `/proc/self/fd/2` which I expect to be available pretty much anywhere.\r\nChanged this CI step so that the job fails on errors. It wouldn't prevent #936 , because this command is part of pipeline, so it won't be affected by `set -e`, but I think it's a good change anyway.\r\n\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/936\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/942/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/939", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/939/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/939/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/939/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/939", "id": 2149363530, "node_id": "PR_kwDOEj0F685nqcGl", "number": 939, "title": "Rename `chrono`, `time` and `secret` features", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "wprzytula", "id": 59482568, "node_id": "MDQ6VXNlcjU5NDgyNTY4", "avatar_url": "https://avatars.githubusercontent.com/u/59482568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wprzytula", "html_url": "https://github.com/wprzytula", "followers_url": "https://api.github.com/users/wprzytula/followers", "following_url": "https://api.github.com/users/wprzytula/following{/other_user}", "gists_url": "https://api.github.com/users/wprzytula/gists{/gist_id}", "starred_url": "https://api.github.com/users/wprzytula/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wprzytula/subscriptions", "organizations_url": "https://api.github.com/users/wprzytula/orgs", "repos_url": "https://api.github.com/users/wprzytula/repos", "events_url": "https://api.github.com/users/wprzytula/events{/privacy}", "received_events_url": "https://api.github.com/users/wprzytula/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/11", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/11/labels", "id": 10992936, "node_id": "MI_kwDOEj0F684Ap70o", "number": 11, "title": "0.14.0", "description": "- part of errors refactor\r\n- paging API refactor", "creator": {"login": "avelanarius", "id": 10003183, "node_id": "MDQ6VXNlcjEwMDAzMTgz", "avatar_url": "https://avatars.githubusercontent.com/u/10003183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avelanarius", "html_url": "https://github.com/avelanarius", "followers_url": "https://api.github.com/users/avelanarius/followers", "following_url": "https://api.github.com/users/avelanarius/following{/other_user}", "gists_url": "https://api.github.com/users/avelanarius/gists{/gist_id}", "starred_url": "https://api.github.com/users/avelanarius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avelanarius/subscriptions", "organizations_url": "https://api.github.com/users/avelanarius/orgs", "repos_url": "https://api.github.com/users/avelanarius/repos", "events_url": "https://api.github.com/users/avelanarius/events{/privacy}", "received_events_url": "https://api.github.com/users/avelanarius/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 22, "state": "closed", "created_at": "2024-04-30T11:09:39Z", "updated_at": "2024-09-17T09:47:02Z", "due_on": "2024-08-29T00:00:00Z", "closed_at": "2024-09-17T09:47:02Z"}, "comments": 12, "created_at": "2024-02-22T15:43:39Z", "updated_at": "2024-10-29T14:35:33Z", "closed_at": "2024-06-19T09:41:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/939", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/939", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/939.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/939.patch", "merged_at": "2024-06-19T09:41:45Z"}, "body": "Ref: https://github.com/scylladb/scylla-rust-driver/issues/771\r\n\r\n## Motivation\r\n\r\nTo follow the same naming conventions as for other features, we want to add a crate version numbers to the remaining dependencies hidden behind crate features: `chrono`, `time` and `secrecy`.\r\n\r\n## Changes\r\n### Dependecies versions\r\nI bumped `secrecy` crate version from `0.7.0` to `0.8.0` which is the most recent version.\r\n\r\n### Feature names\r\nRenamed following features (and dependencies):\r\n- feature `chrono` => feature `chrono-04`, dependency `chrono` => dependency `chrono_04` (scylla-cql)\r\n- feature `time` => feature `time-03`, dependency `time` => dependency `time_03` (scylla-cql)\r\n- feature `secret` => feature `secrecy-08`, dependency `secrecy` => dependency `secrecy_08` \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/939/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/939/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/937", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/937/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/937/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/937/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/937", "id": 2149309366, "node_id": "PR_kwDOEj0F685nqQU5", "number": 937, "title": "Introduce support for Tablets", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 32, "created_at": "2024-02-22T15:17:20Z", "updated_at": "2024-05-09T13:11:55Z", "closed_at": "2024-05-09T13:11:55Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/937", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/937", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/937.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/937.patch", "merged_at": "2024-05-09T13:11:55Z"}, "body": "This PR introduces support for tablets. The design as a bit different than in the other drivers.\r\n\r\n### For information about what Tablets are see:\r\nhttps://www.scylladb.com/2023/07/10/why-scylladb-is-moving-to-a-new-replication-algorithm-tablets/\r\n\r\n### Driver context\r\nTo give a bit of context of how things are working in Rust Driver now:\r\n`Session` has a `cluster: Cluster` field which in turn has `data: Arc<ArcSwap<ClusterData>>`.\r\n`ClusterData` contains all the schema and topology information. It also contains `ReplicaLocator`, which uses token ring to return a list of replicas for a given token and replication strategy.\r\nDriver can access `ClusterData` cheaply, without the need for any locks. It is used for performing queries and is also exposed to the user: https://docs.rs/scylla/latest/scylla/transport/session/struct.Session.html#method.get_cluster_data\r\nThis data is updated by `ClusterWorker`, running in a separate Tokio task. This worker handles server events, `use_keyspace` requests, manages control connection. When necessary (and also periodically) it re-fetches topology and schema\r\ninformation, creates new `ClusterData` object and then swaps it atomically (for more information see https://docs.rs/arc-swap/latest/arc_swap/ ) with the old one - this way new queries will use new `ClusterData` without disrupting old ones.\r\n\r\n### How does the driver interact with Tablets?\r\nInformation about Tablets are stored in `system.tablets`. Driver could fetch this information to have it always complete and up to date, but that could be overwhelming for the cluster.\r\nThis is because there is just one token ring - token ownership is tied to a node, but in tablets this information is per-table (my intuition about tablets is to see them as per-table token ring that can by dynamically changed). Also there may be more tablets than token ring elements.\r\nNow imagine a scenario where a lot of clients try to reconnect to the cluster, which has a lot of tables. The amount of transferred data would be too big.\r\nFor this reason driver fetches tablets information lazily. When the driver send a statement to a non-replica node, it will receive tablet information in the custom payload of the response.\r\nThis information contains data about the tablet that the statement belongs to: first and last tokens of the tablet + list of tablet replicas (in the form `list<(uuid, shard)>` ).\r\nDriver can then update it's internal tablet information using this feedback, so that the following statements will be sent to a correct replica.\r\n\r\n### Implementation\r\n\r\nInformation about tablets is stored in `ReplicaLocator` (which is inside `ClusterData`), similarly to token ring data.\r\nWhen a connection receives tablet feedback it sends this feedback trough a channel. Receiving end of this channel\r\nis owned by `ClusterWorker`. When it receives something on this channel it clones `ClusterData` (because there is no other way to update it without introducing locks),\r\nupdates tablet info inside and stores it in `ArcSwap` - just like when topology is updated. As an optimisation it tries to retrieve several tablets from the channel at once,\r\nso that when there is a lot of updates we don't perform clone + swap for each of them.\r\n\r\nThis way queries can be executed as before, without any locks and other costly operations, just accessing `ClusterData` which is mostly a simple data structure.\r\n\r\n### Maintanance\r\n\r\nImplementation chosen by Scylla makes things a bit more complicated for the driver.  We only update tablet info when we send a query to a wrong node.\r\nThis means that the information can sometimes become stale\r\n- When a node is removed we would just keep sending queries to other replicas, never receiving new tablet.\r\n- When a keyspace / table is dropped we would unnecessarily keep info about it.\r\n- (may be Rust Driver only) When driver is not aware of one of the replicas yet (e.g. because the node is new and driver didn't yet fetch topology) and we skip this replica we'll increase load on other replicas indefinitely.\r\n- (may be Rust Driver only) When a `Node` object is recreated (this happens when node changes Ip / DC / Rack) tablet info would still contain old objects.\r\n\r\nTo handle those scenarios driver fixes tablet information after fetching new topology. As far as I'm aware other driver don't handle those scenarios, we may need to fix it.\r\nOne scenario which I'm not sure how to handle (and if it's even problematic): what if user changes RF of a keyspace? How does it work with tablets?\r\nIf it just adds a replica to replica list, then we will not use this replica - we'll keep sending requests to other replicas and never receive new tablet info.\r\nI'm not sure how we could detect it and if it's even a problem.\r\n\r\n### Alternative solution\r\n\r\nOne alternative solution would be to use `RwLock` - take a read lock in `ReplicaLocator` to get list of replicas, take a write lock when handling custom payload tablet feedback to update info.\r\nI decided against it because:\r\n- It's possible we would hold a write lock often, slowing down queries. I also don't like the idea of taking a lock in a hot path (executing a query) in general.\r\n- Most of `ClusterData` (pretty much all of it except `Node` objects) is a simple data, without any locks, which makes it simpler to reason about it. I didn't want to change this.\r\n- It makes implementing tablet info maintenance much harder. Doing maintenance would require taking a write lock for a lot of time, hindering performance.\r\n\r\n### Downsides of implemented solution\r\n\r\n- We need to copy `ClusterData` to update tablet info. This won't increase max memory usage - because we already copy it when updating topology - but now we'll copy it more often. Implementing https://github.com/scylladb/scylla-rust-driver/issues/595 will largely mitigate this issue because we won't need to copy schema information, just topology.\r\n- Received tablet info is not immediately used. There may be a brief period after we receive tablet information, but before it is present in `ClusterData` during which we'll keep sending data to wrong nodes. I don't think it's much of a problem - the same thing would happen with any implementation  if you send a few queries to the same parttition at once. The worst thing that happens is that some more queries will be sent to wrong nodes and we'll receive few more feedbacks.\r\n\r\n### LWT\r\nOne note about LWT: with token ring the LWT optimisation (sending LWT prepared statements to the same node from any clients, to avoid conflicts) was working always. Now it requires having tablet info for a given partition - so a first LWT to a given partition will not use the optimisation.\r\n\r\n\r\nTODO:\r\n- [x] Proper commit messages\r\n- [x] Verify content of each commit, change when necessary to ensure each passes CI - There are a few unused function warnings.\r\n- [ ] Run SCT tests with this branch\r\n- [ ] Is there any documentation / comments that need updating?\r\n- [ ] ~~Benchmark possible tablets implementations: vector vs map~~\r\n- [ ] Unit tests for maintenance code \r\n- [x] Don't unwrap when converting number type in Tablet info parsing\r\n- [x] I recently learned that i64::MIN is not a valid token. Need to look into this to check if we properly change it to i64::MAX when hashing. I wonder if such check should instead be moved to `Token` struct.\r\n- [x] CI for tablets, similar to serverless - because it needs unstable scylla version\r\n- [x] Put tablets behind unstable feature flag until they are released in Scylla\r\n\r\n## Past questions / considerations\r\n\r\nDuring implementation I had some dillemas questions, mostly solved / answered now, which are outlined below.\r\n\r\n### Tests with removed / decommisioned nodes\r\n\r\nI'd like to test such scenarios, as suggested by @avelanarius , but I think we don't have a good way to do this now.\r\nThere is proxy, but afaik it can only simulate network errors.\r\nIt would be nice to use ccm (or something like this) in tests and have Rust API for it to manipulate cluster more easily.\r\nNeed to figure out a way to test it now.\r\n\r\nStatus: I'll run some SCT tests using cql-stress built using this branch of driver.\r\n\r\n### Unknown replica\r\n\r\nIs it possible to get a replica uuid in custom payload that we don't know about? What should we do in this case?\r\nRight now I'm just ignoring this replica, but I don't like this. This will cause load to be distributed less evenly\r\nbecause we skip one (or more) of replicas.\r\n\r\nStatus: Implemented tablet maintanance to guard against this and some other problems.\r\n\r\n### What about `ReplicasOrdered`?\r\n\r\nIt returns replicas in ring order, which makes little sense in Tablets tables.\r\nI'm thinking of just editing a comment to say that the order is just consistent, but doesn't have to be ring order.\r\n`ReplicasOrdered` seems to only be used for LWT, so this should be fine.\r\nTo do this, I need to make sure that the order is actually consistent - because it's not obvious.\r\n\r\nAlso, I'd like to have some test that uses the path where it's used - probably neeed to use LWT with Tablet-enabled table?\r\n\r\nStatus: Assumed that replicas are returned in consistent order. Added integration tests performing LWT queries.\r\n\r\n### Integration tests\r\n\r\nI wrote an integration test for tablets (last commit) but it doesn't always work, and I'm not sure how to write a proper test.\r\nThe test first inserts some row. Each query is executed multiple times and the test checks that at least one execution\r\nwas sent to wrong node and recevied tablet feedback. This is not always the case and I'm not sure how to force it.\r\n\r\n@avelanarius suggested that there is `\"tablet_allocator_shuffle\"` HTTP api, but the comment in Scylla tests says\r\n` # Increases the chance of tablet migration concurrent with schema change` which doesn't sound helpful here.\r\n\r\nIn Python driver implementation the test looks into tracing to verify that the query was sent to a correct node.\r\nI'm not a big fan of this approach, as it doesn't verify that we can send things to the wrong nodes when we don't have the data.\r\n\r\nStatus: Managed to write correct integration tests using one-shot LBPs to make sure I send queries to all nodes/shards.\r\n\r\n### Wojciech's commits\r\n\r\nWhat should I do with Wojciech's commits?\r\nI'm considering squashing them (and introducing some changes to them so that resulting commit passes CI).\r\nThe changes are mostly mechanical and it would allow us to have atomic commits in this PR.\r\n\r\nStatus: Opened https://github.com/scylladb/scylla-rust-driver/pull/944 with his changes cleaned up\r\n\r\n\r\n### Tablet feedback handled in Connection, not in Session\r\n\r\nTablet info is extracted from frame in Connection instead of Session + iterators.\r\nI did look into moving that into session, but decided that it's too complicated and error-prone.\r\nIn the current implementation I can have certainty that we handle this for all requests.\r\n\r\nStatus: it will stay that way for now\r\n\r\n\r\n### `FromCqlVal::from_cql` is tablets.rs\r\n\r\nIs it possible for this to fail? I don't see how, but I'm not very familiar with this are of code.\r\nIf it can't fail, I could avoid introducing new error type.\r\n\r\nStatus: I added `.unwrap()`, it seems that this call can't fail.\r\n\r\n\r\n### Parsing fail\r\n\r\nWhat to do when parsing Tablet data from custom payload fails?\r\nErroring whole request seems excessive. Right now I just print a warning. Is it enough?\r\n\r\nStatus: Printing warning is enough, so I'll stick to that.\r\n\r\nFixes: #867 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/937/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/935", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/935/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/935/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/935/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/935", "id": 2136821620, "node_id": "PR_kwDOEj0F685m_iJO", "number": 935, "title": "Remove `histogram::Histogram` from public API", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-02-15T15:27:36Z", "updated_at": "2024-10-29T14:35:13Z", "closed_at": "2024-02-16T08:14:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/935", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/935", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/935.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/935.patch", "merged_at": "2024-02-16T08:14:41Z"}, "body": "Ref: https://github.com/scylladb/scylla-rust-driver/issues/771\r\n\r\n## Motivation\r\n`histogram` is an unstable crate and the types introduced by this crate need to be removed from our public API. The only type being used is `histogram::Histogram`.\r\n\r\nIt's exposed publicly via `MetricsError::Poison`. However, the `MetricsError::Poison` value is never constructed since we always unwrap the `PoisonError` when trying to acquire the lock.\r\n\r\n## Changes\r\nRemoved `MetricsError::Poison` and refactored `MetricsError` to be a struct holding an error cause (`&'static str` returned from the `histogram::Histogram` API).\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/935/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/934", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/934/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/934/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/934/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/934", "id": 2136709361, "node_id": "PR_kwDOEj0F685m_JQp", "number": 934, "title": "Remove `strum` and `strum_macros` dependencies", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2024-02-15T14:42:32Z", "updated_at": "2024-10-29T14:35:11Z", "closed_at": "2024-02-16T08:32:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/934", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/934", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/934.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/934.patch", "merged_at": "2024-02-16T08:32:14Z"}, "body": "Ref: https://github.com/scylladb/scylla-rust-driver/issues/771\r\n\r\n## Motivation\r\n`strum` and `strum_macros` are unstable crates and their usages need to be removed from the public API to stabilize it.\r\n\r\nThese crates are responsible for generating `FromStr` implementations for the types.\r\n\r\n## Changes\r\nReplaced `strum` usages for `NativeType` and `ColumnKind` types with our own implementations of `FromStr`.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/934/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/934/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/933", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/933/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/933/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/933/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/933", "id": 2136527191, "node_id": "PR_kwDOEj0F685m-gcR", "number": 933, "title": "Decrease pub visibility of `scylla-cql` definitions", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/3", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/3/labels", "id": 9196161, "node_id": "MI_kwDOEj0F684AjFKB", "number": 3, "title": "1.0.0", "description": "", "creator": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 47, "state": "closed", "created_at": "2023-03-23T10:47:53Z", "updated_at": "2025-03-25T13:55:49Z", "due_on": "2025-02-15T00:00:00Z", "closed_at": "2025-03-06T10:28:21Z"}, "comments": 3, "created_at": "2024-02-15T13:28:37Z", "updated_at": "2024-10-29T14:35:23Z", "closed_at": "2024-03-28T09:59:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/933", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/933", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/933.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/933.patch", "merged_at": "2024-03-28T09:59:15Z"}, "body": "## Motivation\r\n\r\nSome definitions in `scylla-cql` crate need to be public, so the `scylla` crate can make use of them. However, currently all of the definitions are implicitly re-exported outside and can be seen by the driver users. The idea is to explicitly re-export the types/functions that should be visible outside (and leave the rest of the public definitions for the internal usage of `scylla` crate).\r\n\r\n## re-exported types\r\nThe main difficulty was to decide on what types should be re-exported publicly. The types that got re-exported can be seen in the documentation (`cargo doc --open`).\r\n\r\n### Error types\r\nI wasn't sure whether error types such as `scylla_cql::frame::frame_errors::FrameError` should be public. As of now, they are left public but this can be further discussed.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/933/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/931", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/931/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/931/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/931/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/931", "id": 2131484877, "node_id": "PR_kwDOEj0F685mtR-R", "number": 931, "title": "Remove num_enum dependency", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-02-13T05:19:55Z", "updated_at": "2024-10-29T14:35:08Z", "closed_at": "2024-02-15T12:18:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/931", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/931", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/931.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/931.patch", "merged_at": "2024-02-15T12:18:17Z"}, "body": "Ref: https://github.com/scylladb/scylla-rust-driver/issues/771\r\nI believe this PR closes https://github.com/scylladb/scylla-rust-driver/pull/857.\r\n\r\n## Motivation\r\nTo stabilize our API, we need to get rid of pre-1.0 crates. One of them is [num_enum](https://docs.rs/num_enum/latest/num_enum/).\r\n\r\nThis crate allows us to automatically generate conversions from primitive types to enum values - however, its usages needs to be removed from the library.\r\n\r\n## Changes\r\nTo get rid of the dependency, we needed to implement converters ourselves.\r\n\r\nThis is why, we introduce a `TryFromPrimitiveError` struct which holds the information about the enum name and the actual value that we tried to parse.\r\n\r\nApart from that, we implement `TryFrom` for the types that used the `num_enum` crate:\r\n- `impl TryFrom<u16> for Consistency`\r\n- `impl TryFrom<i16> for SerialConsistency`\r\n- `impl TryFrom<u8> for RequestOpcode`\r\n- `impl TryFrom<u8> for ResponseOpcode`\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/931/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/931/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/929", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/929/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/929/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/929/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/929", "id": 2127608786, "node_id": "PR_kwDOEj0F685mgbG6", "number": 929, "title": "CI: cargo clean before tests", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-02-09T17:55:03Z", "updated_at": "2024-10-29T14:35:05Z", "closed_at": "2024-02-12T09:16:22Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/929", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/929", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/929.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/929.patch", "merged_at": "2024-02-12T09:16:22Z"}, "body": "## Motivation\r\n\r\nRecently, a new issue with CI have arisen. During the `Run tests` step in `build` job, the CI fails due to lack of space on the GH runner machine.\r\n\r\nHere is the output of `du -sh target/debug/* && df -h` executed right before the tests on the runner machine:\r\n```\r\n133M\ttarget/debug/build\r\n2.2G\ttarget/debug/deps\r\n3.1G\ttarget/debug/examples\r\n4.6G\ttarget/debug/incremental\r\n8.0K\ttarget/debug/libscylla.d\r\n4.0K\ttarget/debug/libscylla_cql.d\r\n4.0K\ttarget/debug/libscylla_macros.d\r\n8.0K\ttarget/debug/libscylla_proxy.d\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/root        73G   66G  7.0G  91% /\r\ntmpfs           7.9G  172K  7.9G   1% /dev/shm\r\ntmpfs           3.2G  1.4M  3.2G   1% /run\r\ntmpfs           5.0M     0  5.0M   0% /run/lock\r\n/dev/sda15      105M  6.1M   99M   6% /boot/efi\r\n/dev/sdb1        74G  4.1G   66G   6% /mnt\r\ntmpfs           1.6G   12K  1.6G   1% /run/user/1001\r\n```\r\n\r\nWe see that there is 7GB left on the disk. However, it's still not enough to compile the tests and examples in the debug mode:\r\n```\r\n = note: /usr/bin/ld: final link failed: No space left on device\r\n          collect2: error: ld returned 1 exit status\r\n          \r\n\r\nerror: could not compile `scylla-proxy` (example \"cmdline\") due to previous error\r\n```\r\n\r\n## Changes\r\n- execute `cargo clean` before running the tests in `Run tests` step.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/929/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/927", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/927/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/927/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/927/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/927", "id": 2114850502, "node_id": "PR_kwDOEj0F685l08z5", "number": 927, "title": "docs: support for Mac", "user": {"login": "dgarcia360", "id": 9107969, "node_id": "MDQ6VXNlcjkxMDc5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/9107969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgarcia360", "html_url": "https://github.com/dgarcia360", "followers_url": "https://api.github.com/users/dgarcia360/followers", "following_url": "https://api.github.com/users/dgarcia360/following{/other_user}", "gists_url": "https://api.github.com/users/dgarcia360/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgarcia360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgarcia360/subscriptions", "organizations_url": "https://api.github.com/users/dgarcia360/orgs", "repos_url": "https://api.github.com/users/dgarcia360/repos", "events_url": "https://api.github.com/users/dgarcia360/events{/privacy}", "received_events_url": "https://api.github.com/users/dgarcia360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2024-02-02T12:46:10Z", "updated_at": "2024-06-26T14:30:33Z", "closed_at": "2024-06-26T13:49:13Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/927", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/927", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/927.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/927.patch", "merged_at": "2024-06-26T13:49:13Z"}, "body": "## Motivation\r\n\r\nRelated issues: https://github.com/scylladb/sphinx-scylladb-theme/issues/862\r\n\r\nThis PR addresses an error encountered while building the docs on Mac OS:\r\n\r\n> cp -TLr source _source\r\ncp: illegal option -- T\r\n\r\n## How to test\r\n\r\nThe PR build runs without errors.", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/927/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/927/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/926", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/926/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/926/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/926/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/926", "id": 2113820456, "node_id": "PR_kwDOEj0F685lxaUV", "number": 926, "title": "Docs: Preprocessor for Python < 3.12", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-02-02T00:56:44Z", "updated_at": "2024-02-02T12:13:00Z", "closed_at": "2024-02-02T12:13:00Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/926", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/926", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/926.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/926.patch", "merged_at": "2024-02-02T12:13:00Z"}, "body": "Preprocessor script was using syntax that works with Python 3.12 but not with older version.\r\nNamely, string in format string using the same delimiter as outer string. Example: f'abc{'def'}xyz'\r\n\r\nThis commit changes delimiters of inner string to make script compatible with older versions of Python.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/926/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/925", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/925/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/925/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/925/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/925", "id": 2112989741, "node_id": "PR_kwDOEj0F685lugVJ", "number": 925, "title": "Use prepared statement result metadata to decode rows", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6415039480, "node_id": "LA_kwDOEj0F688AAAABfl27-A", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/semver-checks-breaking", "name": "semver-checks-breaking", "color": "F28D15", "default": false, "description": "cargo-semver-checks reports that this PR introduces breaking API changes"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 27, "created_at": "2024-02-01T17:01:04Z", "updated_at": "2024-10-29T14:35:10Z", "closed_at": "2024-02-16T07:55:50Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/925", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/925", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/925.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/925.patch", "merged_at": "2024-02-16T07:55:50Z"}, "body": "Fixes: https://github.com/scylladb/scylla-rust-driver/issues/169\r\n\r\n## Motivation\r\nCurrently, the driver does not make a use of an optimization that CQL protocol offers during exeuction of prepared statements. The client is allowed to provide `SKIP_METADATA` flag during `Session::execute`, so the server doesn't attach a result set metadata. The driver can use the cached metadata (received in response to `Session::prepare`) to deserialize the results.\r\n\r\n## Changes\r\n### `PreparedStatement`\r\nAs mentioned previously, the driver can cache the prepared statement's result metadata. This is why we extend the `PreparedStatementSharedData` by `result_metadata` field which holds the metadata. The metadata is obtained from the server during statement preparation (`Session::prepare`). This metadata is eventually passed to the function which deserializes the results of query execution.\r\n\r\n### Schema changes\r\nBefore introducing the optimization, the driver was immune to the problems related to prepared statement's result metadata and schema changes.\r\n\r\nAfter some schema change, Scylla and Cassandra invalidate the server-side caches and discard all of the prepared statements. When the driver executes a prepared statement after the schema change for the first time, it receives the `UNPREPARED` error frame (server does not recognize the id of the prepared statement since it was discarded). Currently, Scylla drivers handle such case by repreparation of the statement. Notice that after the schema change, the result metadata may be changed (depends on the actual change of schema). Without the optimization, Scylla always provides a valid (updated during repreparation) result metadata in the response to statement execution so we don't need to worry about it.\r\n\r\nThis raises an issue when we try to cache the metadata on the client side. It should be mutable so the driver holds a metadata that is always up to date (should be updated during reprepares). However, looking at the other drivers we can see that the client-side metadata caches are immutable. This is why we follow the same approach and not care about the schema changes.\r\n\r\n### Config\r\nExtended and `StatementConfig` by `skip_result_metadata` boolean flag which defaults to `false`. When set to `true`, it enables the optimization. Thanks to that, the users can enable the optimization per-statement.\r\n\r\n## Points to discuss\r\n- should maybe `skip_result_metadata` flag be enabled by default? Since it's an optimization, it might make sense for it to be enabled by default.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/925/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/925/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/922", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/922/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/922/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/922/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/922", "id": 2102556879, "node_id": "PR_kwDOEj0F685lLWo1", "number": 922, "title": "Hide public usages of bigdecimal::BigDecimal behind a crate feature", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2024-01-26T17:07:03Z", "updated_at": "2024-10-29T14:35:04Z", "closed_at": "2024-02-01T11:28:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/922", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/922", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/922.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/922.patch", "merged_at": "2024-02-01T11:28:18Z"}, "body": "Refs: https://github.com/scylladb/scylla-rust-driver/issues/771\r\n\r\n## Changes\r\n- introduced `value::CqlDecimal` type\r\n- hidden public usages of `bigdecimal::Bigdecimal` behind crate feature.\r\n- wrapped `CqlDecimal` with `CqlValue::Decimal`\r\n- updated docs\r\n- updated tests\r\n- added docstrings\r\n\r\n## Points to discuss\r\n- how to implement `PartialEq` for `CqlDecimal`? Note that `CqlDecimal` makes use of `CqlVarint`, so the bytes normalization part can be delegated to `CqlVarint`. However, there is an additional issue, because there are multiple pairs (integer, scale) which can represent the same number. Take for example: `1e3` and `100e1`. I don't think it's trivial to implement the comparison without converting bytes (hexadecimal representation) to decimal number.\r\n- Should I create some macros for code repetitions? There are some parts of code that are repeated for each version of the `bigdecimal` crate that unfortunately cannot be expressed using some generic function (e.g. usages of `BigDecimal::new()` constructor).\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/922/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/919", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/919/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/919/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/919/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/919", "id": 2098463095, "node_id": "PR_kwDOEj0F685k9o1v", "number": 919, "title": "cql_types_test: Don't rely on MIN/MAX values of NaiveDate", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2024-01-24T15:00:27Z", "updated_at": "2024-01-25T00:14:50Z", "closed_at": "2024-01-24T15:45:02Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/919", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/919", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/919.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/919.patch", "merged_at": "2024-01-24T15:45:02Z"}, "body": "This PR changes `test_naive_date` so that it doesn't rely on current values of `NaiveDate::MIN`. This is necessary because CI broke after update of chrono changed those values.\r\n\r\nFixes: #917 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/919/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/919/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/914", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/914/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/914/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/914/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/914", "id": 2080891167, "node_id": "PR_kwDOEj0F685kB_Nh", "number": 914, "title": "Docs: Add recommendations about Session usage.", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-01-14T20:45:24Z", "updated_at": "2024-01-24T21:12:48Z", "closed_at": "2024-01-24T21:12:48Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/914", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/914", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/914.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/914.patch", "merged_at": "2024-01-24T21:12:48Z"}, "body": "#216 showed that best practices of `Session` usage are not obvious and should be stated in documentation.\r\nThis PR adds the relevant section that explains how to use it in order to not decrease performance.\r\n\r\nFixes: #216 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/914/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/913", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/913/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/913/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/913/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/913", "id": 2080856151, "node_id": "PR_kwDOEj0F685kB4cd", "number": 913, "title": "Add info about Cargo.lock.msrv to Contributing.md", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-14T18:58:38Z", "updated_at": "2024-01-24T10:55:22Z", "closed_at": "2024-01-24T10:55:21Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/913", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/913", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/913.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/913.patch", "merged_at": "2024-01-24T10:55:21Z"}, "body": "This is so that contributors (external or internal) are able to find information about how to deal with failures in min_rust CI job.\r\n\r\nFixes: #912 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/913/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/913/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/910", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/910/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/910/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/910/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/910", "id": 2075524898, "node_id": "PR_kwDOEj0F685jvx7Q", "number": 910, "title": "Docs: Add a book preprocessor", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/9", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9/labels", "id": 10176355, "node_id": "MI_kwDOEj0F684Am0dj", "number": 9, "title": "0.12.0", "description": "Finalize all API breaking stuff towards 1.0 (without tablets support).", "creator": {"login": "roydahan", "id": 20959584, "node_id": "MDQ6VXNlcjIwOTU5NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/20959584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roydahan", "html_url": "https://github.com/roydahan", "followers_url": "https://api.github.com/users/roydahan/followers", "following_url": "https://api.github.com/users/roydahan/following{/other_user}", "gists_url": "https://api.github.com/users/roydahan/gists{/gist_id}", "starred_url": "https://api.github.com/users/roydahan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roydahan/subscriptions", "organizations_url": "https://api.github.com/users/roydahan/orgs", "repos_url": "https://api.github.com/users/roydahan/repos", "events_url": "https://api.github.com/users/roydahan/events{/privacy}", "received_events_url": "https://api.github.com/users/roydahan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-11-12T16:46:25Z", "updated_at": "2024-02-20T12:26:02Z", "due_on": "2024-01-26T00:00:00Z", "closed_at": "2024-02-20T12:26:02Z"}, "comments": 3, "created_at": "2024-01-11T01:21:27Z", "updated_at": "2024-01-15T15:24:09Z", "closed_at": "2024-01-12T12:12:15Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/910", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/910", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/910.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/910.patch", "merged_at": "2024-01-12T12:12:15Z"}, "body": "This PR adds a preprocessor for the book that removes Sphinx-related sections.\r\nThis was previously done by `docs/build_book.py` script, which this PR removes.\r\nThere are some advantages of new approach:\r\n- No unnecessary file writing. Book content is passed to preprocessor by stdin. This is both faster and more friendly to disk.\r\n- No way to accidentally build a book without preprocessing. Also now developer doesn't need to know about the script or Makefile target that uses it.\r\n- New script is simpler as it doesn't need to handle files anymore. As a contributor I can certify that it's possible to not know about the script or Makefile target and be frustrated about Sphinx sections.\r\n\r\nThere is one disadvantage: book must be built either from main directory, or docs directory. If it's built from different location, build will succeed buy Sphinx sections won't be stripped.\r\nThis is because of mdbook limitation - PWD of build process is the folder the command is executed in, not the folder in which book.toml is located.\r\nThis shouldn't be a problem - I suspect book build is never / very rarely executed from other dir.\r\nIf it becomes a problem, it's possible to fix it. The script in bash.sh will need to be modified:\r\n- if executed with `supports` argument - just exit.\r\n- Otherwise, read stdin using jq. From first element extract `root` element, `cd` to it's value.\r\n- Execute `python ./sphinx_preprocessor.py` with previosuly-read stdin.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/910/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/909", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/909/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/909/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/909/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/909", "id": 2075344673, "node_id": "PR_kwDOEj0F685jvKT1", "number": 909, "title": "Semver checks", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2024-01-10T22:45:02Z", "updated_at": "2025-02-10T09:37:48Z", "closed_at": "2024-02-02T12:15:35Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/909", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/909", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/909.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/909.patch", "merged_at": "2024-02-02T12:15:35Z"}, "body": "This PR introduces cargo-semver-checks to our CI.\r\nThe behavior is very similar to what I described in the issue: https://github.com/scylladb/scylla-rust-driver/issues/906\r\n- On a PR, it sets `semver-checks-breaking` label if the PR breaks API (compared to PR base). Report from the tool, containing info about incompatibilities, is posted as a comment.\r\n- When a tag is pushed, the job will fail if update type (major / minor / patch) was incorrect. This requires new version to NOT be published to crates.io. So we should wait for the workflow to finish before publishing.\r\n\r\nApart from CI integration this PR also modifies `Makefile` and `CONTRIBUTING.MD` to make it easier for contributors to run checks locally.\r\n\r\ncargo-semver-checks has some false-negatives and false-positives, so it is NOT a replacement for a reviewer.\r\nReviewer still needs to check the code to see if it's API-breaking. semver-checks should still be a big help with that, catching many cases that\r\nare very hard to identify manually or that people forget about.\r\n\r\nSecurity:\r\n\r\nPR CI uses `pull_request_target` trigger which can receive read-write GITHUB_TOKEN (while `pull_request` can't if a PR is from a fork - which is a vast majority of PRs).\r\nThis is required in order to be able to add/remove label to a PR. It makes such jobs a valuable target for attackers.\r\n\r\nWorkflows using `pull_request_target` are run in the context of base of a PR instead of head of a PR (like `pull_request` workflows do). This prevents the attacker from modifying the workflow file.\r\n\r\nPR CI is split into two parts. First, unprivileged, job (called `semver-pull-request-check`) performs actual check, which is an insecure process (for example: attacker could add malicious `build.rs` file).\r\nFor this reason, this first job has no permissions (`permissions: {}` attribute), so taking over it should not give anything interesting to the attacker.\r\n\r\nThe second, privileged, job (called `semver-pull-request-label`) has write permissions for pull requests and its only task is adding or removing a label to/from a PR.\r\nIt checks the output from the first job and labels a PR based on that. The only thing done with outputs from unprivileged job is a simple comparison with \"0\",\r\nso modifying those outputs will not result in takeover of privileged job.\r\n\r\nAs far as I can tell, from GitHub docs each job is run on a clean VM, so taking over unprivileged job should not allow attacker to take over privileged job.\r\n\r\nFixes: #906 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~~I added relevant tests for new features and bug fixes.~~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~~I have provided docstrings for the public items that I want to introduce.~~\r\n- [ ] ~~I have adjusted the documentation in `./docs/source/`.~~\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/909/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/907", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/907/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/907/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/907/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/907", "id": 2072345126, "node_id": "PR_kwDOEj0F685jk5t-", "number": 907, "title": "Move derive macros docs to scylla crate", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-01-09T13:09:46Z", "updated_at": "2024-01-12T13:40:29Z", "closed_at": "2024-01-12T13:40:28Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/907", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/907", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/907.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/907.patch", "merged_at": "2024-01-12T13:40:28Z"}, "body": "This PR moves docs for serialization / deserialization related derive macros from scylla-cql crate to scylla crate.\r\nThis is done to work around the issue that this documentation was not rendered correctly on docs.rs for scylla crate.\r\nIt's hard to tell why that is exactly - it's probably a bug / limitation in rustdoc.\r\nIt looks like when we have item X in crate A, re-export X as Y in crate B and document it, and re-export Y az Z in crate C,\r\nY's docs won't be rendered in crate C, only X's and Z's will.\r\n\r\nFixes: #904 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/907/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/903", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/903/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/903/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/903/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/903", "id": 2065751745, "node_id": "PR_kwDOEj0F685jOpF2", "number": 903, "title": "Add `skip` attribute to serialization proc macros", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/9", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9/labels", "id": 10176355, "node_id": "MI_kwDOEj0F684Am0dj", "number": 9, "title": "0.12.0", "description": "Finalize all API breaking stuff towards 1.0 (without tablets support).", "creator": {"login": "roydahan", "id": 20959584, "node_id": "MDQ6VXNlcjIwOTU5NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/20959584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roydahan", "html_url": "https://github.com/roydahan", "followers_url": "https://api.github.com/users/roydahan/followers", "following_url": "https://api.github.com/users/roydahan/following{/other_user}", "gists_url": "https://api.github.com/users/roydahan/gists{/gist_id}", "starred_url": "https://api.github.com/users/roydahan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roydahan/subscriptions", "organizations_url": "https://api.github.com/users/roydahan/orgs", "repos_url": "https://api.github.com/users/roydahan/repos", "events_url": "https://api.github.com/users/roydahan/events{/privacy}", "received_events_url": "https://api.github.com/users/roydahan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-11-12T16:46:25Z", "updated_at": "2024-02-20T12:26:02Z", "due_on": "2024-01-26T00:00:00Z", "closed_at": "2024-02-20T12:26:02Z"}, "comments": 0, "created_at": "2024-01-04T14:23:29Z", "updated_at": "2024-01-15T15:23:46Z", "closed_at": "2024-01-04T15:16:03Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/903", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/903", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/903.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/903.patch", "merged_at": "2024-01-04T15:16:03Z"}, "body": "As requested in https://github.com/scylladb/scylla-rust-driver/issues/899, this PR adds a field attribute to `SerializeCql` and `SerializeRow` macros that allow to skip given field during serialization.\r\nThis can be useful for fields unrelated to database.\r\n\r\nFixes: #899 \r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/903/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/903/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/902", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/902/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/902/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/902/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/902", "id": 2063901955, "node_id": "PR_kwDOEj0F685jIauJ", "number": 902, "title": "Hide public usages of `num_bigint::BigInt` behind a feature flag", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/9", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9/labels", "id": 10176355, "node_id": "MI_kwDOEj0F684Am0dj", "number": 9, "title": "0.12.0", "description": "Finalize all API breaking stuff towards 1.0 (without tablets support).", "creator": {"login": "roydahan", "id": 20959584, "node_id": "MDQ6VXNlcjIwOTU5NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/20959584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roydahan", "html_url": "https://github.com/roydahan", "followers_url": "https://api.github.com/users/roydahan/followers", "following_url": "https://api.github.com/users/roydahan/following{/other_user}", "gists_url": "https://api.github.com/users/roydahan/gists{/gist_id}", "starred_url": "https://api.github.com/users/roydahan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roydahan/subscriptions", "organizations_url": "https://api.github.com/users/roydahan/orgs", "repos_url": "https://api.github.com/users/roydahan/repos", "events_url": "https://api.github.com/users/roydahan/events{/privacy}", "received_events_url": "https://api.github.com/users/roydahan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-11-12T16:46:25Z", "updated_at": "2024-02-20T12:26:02Z", "due_on": "2024-01-26T00:00:00Z", "closed_at": "2024-02-20T12:26:02Z"}, "comments": 10, "created_at": "2024-01-03T12:03:36Z", "updated_at": "2024-10-29T14:35:02Z", "closed_at": "2024-01-26T14:39:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/902", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/902", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/902.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/902.patch", "merged_at": "2024-01-26T14:39:20Z"}, "body": "Related issue: https://github.com/scylladb/scylla-rust-driver/issues/771 (not fixed yet, as `bigdecimal::BigDecimal` is an unstable type as well).\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/679\r\n\r\n# Changes:\r\n- added `CqlVarint` type which is a simple native representation of cql `varint` type\r\n- wrapped `CqlVarint` with `CqlValue::Varint`\r\n- hidden public usages of unstable types (`num_bigint` - v0.3 and v0.4) behind feature flags. Notice, however, that `num_bigint v0.3` is still used within driver's code even without any feature flags. We make use of some library utilities such as pretty printing, or normalization of value's binary representation (e.g. getting rid of leading zeros).\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/902/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/900", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/900/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/900/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/900/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/900", "id": 2060779280, "node_id": "PR_kwDOEj0F685i-GQz", "number": 900, "title": "scylla-cql, examples: fix clippy 1.75 issues", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-30T15:37:37Z", "updated_at": "2024-01-02T23:18:46Z", "closed_at": "2024-01-02T23:18:46Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/900", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/900", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/900.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/900.patch", "merged_at": "2024-01-02T23:18:46Z"}, "body": "With the new rust toolchain version comes a new clippy version, and therefore new complaints of the linter to address. This PR fixes the newly reported issues.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/900/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/900/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/898", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/898/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/898/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/898/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/898", "id": 2058695163, "node_id": "PR_kwDOEj0F685i5hWk", "number": 898, "title": "scylla-cql: Use `#[cfg(feature = \"time\")]` for `time` related `impl SerializeCql`'s", "user": {"login": "oeb25", "id": 2669721, "node_id": "MDQ6VXNlcjI2Njk3MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/2669721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oeb25", "html_url": "https://github.com/oeb25", "followers_url": "https://api.github.com/users/oeb25/followers", "following_url": "https://api.github.com/users/oeb25/following{/other_user}", "gists_url": "https://api.github.com/users/oeb25/gists{/gist_id}", "starred_url": "https://api.github.com/users/oeb25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oeb25/subscriptions", "organizations_url": "https://api.github.com/users/oeb25/orgs", "repos_url": "https://api.github.com/users/oeb25/repos", "events_url": "https://api.github.com/users/oeb25/events{/privacy}", "received_events_url": "https://api.github.com/users/oeb25/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/9", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9/labels", "id": 10176355, "node_id": "MI_kwDOEj0F684Am0dj", "number": 9, "title": "0.12.0", "description": "Finalize all API breaking stuff towards 1.0 (without tablets support).", "creator": {"login": "roydahan", "id": 20959584, "node_id": "MDQ6VXNlcjIwOTU5NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/20959584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roydahan", "html_url": "https://github.com/roydahan", "followers_url": "https://api.github.com/users/roydahan/followers", "following_url": "https://api.github.com/users/roydahan/following{/other_user}", "gists_url": "https://api.github.com/users/roydahan/gists{/gist_id}", "starred_url": "https://api.github.com/users/roydahan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roydahan/subscriptions", "organizations_url": "https://api.github.com/users/roydahan/orgs", "repos_url": "https://api.github.com/users/roydahan/repos", "events_url": "https://api.github.com/users/roydahan/events{/privacy}", "received_events_url": "https://api.github.com/users/roydahan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-11-12T16:46:25Z", "updated_at": "2024-02-20T12:26:02Z", "due_on": "2024-01-26T00:00:00Z", "closed_at": "2024-02-20T12:26:02Z"}, "comments": 4, "created_at": "2023-12-28T18:02:50Z", "updated_at": "2024-01-15T15:23:22Z", "closed_at": "2024-01-03T15:16:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/898", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/898", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/898.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/898.patch", "merged_at": "2024-01-03T15:16:42Z"}, "body": "Fixes: #897, see the issue for details.\r\n\r\nAdditionally I went ahead and checked that `--no-default-features -F time` also works.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [X] I have split my patch into logically separate commits.\r\n- [X] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [X] All commits compile, pass static checks and pass test.\r\n- [X] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/898/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/898/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/894", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/894/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/894/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/894/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/894", "id": 2053490706, "node_id": "PR_kwDOEj0F685ioOjh", "number": 894, "title": "Introduce `CqlTimeuuid` type", "user": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4564362172, "node_id": "LA_kwDOEj0F688AAAABEA6jvA", "url": "https://api.github.com/repos/scylladb/scylla-rust-driver/labels/API-breaking", "name": "API-breaking", "color": "FBCA04", "default": false, "description": "This might introduce incompatible API changes"}], "state": "closed", "locked": false, "assignee": {"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "muzarski", "id": 64713071, "node_id": "MDQ6VXNlcjY0NzEzMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/64713071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzarski", "html_url": "https://github.com/muzarski", "followers_url": "https://api.github.com/users/muzarski/followers", "following_url": "https://api.github.com/users/muzarski/following{/other_user}", "gists_url": "https://api.github.com/users/muzarski/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzarski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzarski/subscriptions", "organizations_url": "https://api.github.com/users/muzarski/orgs", "repos_url": "https://api.github.com/users/muzarski/repos", "events_url": "https://api.github.com/users/muzarski/events{/privacy}", "received_events_url": "https://api.github.com/users/muzarski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9", "html_url": "https://github.com/scylladb/scylla-rust-driver/milestone/9", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/milestones/9/labels", "id": 10176355, "node_id": "MI_kwDOEj0F684Am0dj", "number": 9, "title": "0.12.0", "description": "Finalize all API breaking stuff towards 1.0 (without tablets support).", "creator": {"login": "roydahan", "id": 20959584, "node_id": "MDQ6VXNlcjIwOTU5NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/20959584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roydahan", "html_url": "https://github.com/roydahan", "followers_url": "https://api.github.com/users/roydahan/followers", "following_url": "https://api.github.com/users/roydahan/following{/other_user}", "gists_url": "https://api.github.com/users/roydahan/gists{/gist_id}", "starred_url": "https://api.github.com/users/roydahan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roydahan/subscriptions", "organizations_url": "https://api.github.com/users/roydahan/orgs", "repos_url": "https://api.github.com/users/roydahan/repos", "events_url": "https://api.github.com/users/roydahan/events{/privacy}", "received_events_url": "https://api.github.com/users/roydahan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "open_issues": 0, "closed_issues": 9, "state": "closed", "created_at": "2023-11-12T16:46:25Z", "updated_at": "2024-02-20T12:26:02Z", "due_on": "2024-01-26T00:00:00Z", "closed_at": "2024-02-20T12:26:02Z"}, "comments": 2, "created_at": "2023-12-22T07:13:26Z", "updated_at": "2024-10-29T14:35:00Z", "closed_at": "2024-01-26T07:54:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/894", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/894", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/894.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/894.patch", "merged_at": "2024-01-26T07:54:40Z"}, "body": "Fixes: https://github.com/scylladb/scylla-rust-driver/issues/749\r\n\r\n## Changes\r\n- Introduced `CqlTimeuuid` type as a wrapper for version 1 uuids\r\n- Implemented `uuid::Uuid` delegate methods for `CqlTimeuuid`\r\n- Implemented strong ordering on `CqlTimeuuid` type so it has the same semantics as Scylla/Cassandra\r\n- `CqlValue::Timeuuid` now wraps `CqlTimeuuid`\r\n- Implemented serialization and deserialization logic for `CqlTimeuuid`\r\n- Got rid of `timeuuid` <-> `uuid::Uuid` mapping\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/894/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/894/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/893", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/893/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/893/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/893/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/893", "id": 2052556059, "node_id": "PR_kwDOEj0F685ilCu2", "number": 893, "title": "scylla-macros: bump version to 0.2.3", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-21T14:42:42Z", "updated_at": "2023-12-21T22:04:20Z", "closed_at": "2023-12-21T22:04:20Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/893", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/893", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/893.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/893.patch", "merged_at": "2023-12-21T22:04:20Z"}, "body": "This is a version bump of scylla-macros to 0.2.3 - the last step required to fix https://github.com/scylladb/scylla-rust-driver/issues/891\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/893/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/893/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/892", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/892/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/892/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/892/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/892", "id": 2052479955, "node_id": "PR_kwDOEj0F685ikxye", "number": 892, "title": "Release 0.11.1", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-21T14:01:57Z", "updated_at": "2023-12-21T14:26:37Z", "closed_at": "2023-12-21T14:26:36Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/892", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/892", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/892.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/892.patch", "merged_at": "2023-12-21T14:26:36Z"}, "body": "This is an emergency release to address https://github.com/scylladb/scylla-rust-driver/issues/891\r\nThe steps I'll perform after this is approved:\r\n- `git checkout branch-0.11.x`\r\n- `git tag -a v0.11.1`\r\n- `git push origin v0.11.1`\r\n- `git checkout main`\r\n- `git merge --ff-only branch-0.11.x`\r\n- `git push origin main`\r\n- `Check that documentation was built and published successfully`\r\n- `Create a github release explaining the purpose of the release`\r\n- `cargo publish -p scylla-macros`\r\n- `cargo publish -p scylla-cql`\r\n- `cargo publish -p scylla`\r\n- yank scylla-macros 0.2.2\r\n- yank scylla-cql 0.0.10\r\n- yank scylla 0.11.0\r\n\r\nAfter that I'll bump scylla-macros version on `branch-0.10.x` (will do a PR with this), and publish only `scylla-macros` crate\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/892/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/889", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/889/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/889/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/889/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/889", "id": 2048760833, "node_id": "PR_kwDOEj0F685iYBPb", "number": 889, "title": "Migration guide fix", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-12-19T14:21:58Z", "updated_at": "2023-12-19T14:57:17Z", "closed_at": "2023-12-19T14:57:17Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/889", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/889", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/889.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/889.patch", "merged_at": "2023-12-19T14:57:17Z"}, "body": "This PR fixes 2 problems:\r\n- One broken link to new migration guide.\r\n- Table not rendering correctly in migration guide. It looks like Scylla's documentation system doesn't support tables in Markdown.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/889/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/889/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/888", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/888/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/888/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/888/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/888", "id": 2047320810, "node_id": "PR_kwDOEj0F685iTIN4", "number": 888, "title": "Release 0.11.0", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-12-18T19:34:03Z", "updated_at": "2023-12-19T13:31:58Z", "closed_at": "2023-12-19T13:31:58Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/888", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/888", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/888.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/888.patch", "merged_at": "2023-12-19T13:31:58Z"}, "body": "\r\nThis PR is to review the changes required to release new version. It should NOT be merged, so I opened it as a draft.\r\nAfter the approve, I will perform following steps (correct me if I'm wrong @piodul):\r\n- `git checkout branch-0.11.x`\r\n- `git tag -a v0.11.0`\r\n- `git push origin v0.11.0`\r\n- `git checkout main`\r\n- `git merge --ff-only branch-0.11.x`\r\n- `git push origin main`\r\n- Check that documentation was built and published successfully\r\n- Create a github release with previously approved release notes\r\n- Push new version to crates.io:\r\n- Create post on the forum about release\r\n\r\n\r\n## Pre-review checklist\r\n\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/888/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/888/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/887", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/887/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/887/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/887/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/887", "id": 2045661002, "node_id": "PR_kwDOEj0F685iNfL_", "number": 887, "title": "docs: migration guide", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-18T03:25:36Z", "updated_at": "2023-12-18T14:03:49Z", "closed_at": "2023-12-18T14:03:49Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/887", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/887", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/887.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/887.patch", "merged_at": "2023-12-18T14:03:49Z"}, "body": "In 0.11, the serialization traits are reworked and some guidance will be needed to adapt the existing code to the new traits. A document is added which explains the reason behind the changes, potential issues to watch for and tools that should make migration easier.\r\n\r\nAdditionally, the `ValueList` and `ValueListAdapter` helper types are introduced, which are then mentioned in the migration doc.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/887/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/886", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/886/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/886/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/886/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/886", "id": 2045655741, "node_id": "PR_kwDOEj0F685iNeCt", "number": 886, "title": "docs: update batch.md to warn about automatic preparation", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-18T03:18:58Z", "updated_at": "2023-12-18T11:54:12Z", "closed_at": "2023-12-18T11:54:12Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/886", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/886", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/886.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/886.patch", "merged_at": "2023-12-18T11:54:12Z"}, "body": "Add warnings about the fact that Session::batch now automatically prepares simple statements with non-empty value lists. Update the first example not to use such statements in order not to promote suboptimal usage of the API.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/886/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/885", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/885/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/885/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/885/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/885", "id": 2045550733, "node_id": "PR_kwDOEj0F685iNGaq", "number": 885, "title": "Don't return error on unexpected UDT field in SerializeCql macro", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-18T02:00:20Z", "updated_at": "2023-12-18T17:07:25Z", "closed_at": "2023-12-18T17:07:25Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/885", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/885", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/885.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/885.patch", "merged_at": "2023-12-18T17:07:25Z"}, "body": "In order to properly support ALTERing UDTs in database, code that serializes UDT shouldn't return error when there is column in UDT that is not present in Rust struct.\r\nThis PR changes the default behavior like this, and adds an `force_exact_match` attribute to opt-in to previous behavior.\r\n\r\nCQL specification says:\r\n```\r\n  A UDT value will generally have one value\r\n  for each field of the type it represents, but it is allowed to have less values than\r\n  the type has fields.\r\n```\r\nso I decided to not send anything in place of missing fields rather than send e.g. NULLs.\r\n\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/885/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/885/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/883", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/883/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/883/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/883/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/883", "id": 2044782589, "node_id": "PR_kwDOEj0F685iKoX9", "number": 883, "title": "impl Default for MaybeUnset", "user": {"login": "RoDmitry", "id": 18184039, "node_id": "MDQ6VXNlcjE4MTg0MDM5", "avatar_url": "https://avatars.githubusercontent.com/u/18184039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RoDmitry", "html_url": "https://github.com/RoDmitry", "followers_url": "https://api.github.com/users/RoDmitry/followers", "following_url": "https://api.github.com/users/RoDmitry/following{/other_user}", "gists_url": "https://api.github.com/users/RoDmitry/gists{/gist_id}", "starred_url": "https://api.github.com/users/RoDmitry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RoDmitry/subscriptions", "organizations_url": "https://api.github.com/users/RoDmitry/orgs", "repos_url": "https://api.github.com/users/RoDmitry/repos", "events_url": "https://api.github.com/users/RoDmitry/events{/privacy}", "received_events_url": "https://api.github.com/users/RoDmitry/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-16T15:15:27Z", "updated_at": "2023-12-18T08:58:28Z", "closed_at": "2023-12-18T08:58:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/883", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/883", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/883.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/883.patch", "merged_at": "2023-12-18T08:58:27Z"}, "body": "Simple `Default` trait for `MaybeUnset`", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/883/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/882", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/882/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/882/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/882/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/882", "id": 2043499013, "node_id": "PR_kwDOEj0F685iGTmU", "number": 882, "title": "scylla-macros: attributes for better control over name checks", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-15T10:58:06Z", "updated_at": "2023-12-15T12:18:42Z", "closed_at": "2023-12-15T12:18:42Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/882", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/882", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/882.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/882.patch", "merged_at": "2023-12-15T12:18:41Z"}, "body": "The PR introduces two attributes related to matching Rust struct fields by name in the new `SerializeRow`/`SerializeCql` macros:\r\n\r\n- `#[scylla(rename = \"xyz\")]` - instead of using the name of the field verbatim, the name provided in the attribute is used when matching to a column/bind marker/UDT field. This can be useful e.g. if the user has different naming convention in Rust code and in the schema definitions.\r\n- `#[scylla(skip_name_checks)`] - in `enforce_order` flavor, skips checking the names of the fields as they are being serialized. With this attribute, the names of the corresponding fields in Rust struct and UDT/columns/bind markers don't have to match at all, but their _types_ still need to. This attribute is supposed to help migrate from the old `IntoUserType`/`ValueList` macros.\r\n\r\nRefs: #802\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/882/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/881", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/881/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/881/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/881/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/881", "id": 2041884807, "node_id": "PR_kwDOEj0F685iAyPn", "number": 881, "title": "serialization: implement new, type-safe variants of BatchValues", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-12-14T15:00:49Z", "updated_at": "2023-12-15T15:44:31Z", "closed_at": "2023-12-15T15:44:30Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/881", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/881", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/881.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/881.patch", "merged_at": "2023-12-15T15:44:30Z"}, "body": "This PR replaces the existing BatchValues API with one that leverages the recently introduced `SerializeCql`/`SerializeRow` infrastructure and is type-safe.\r\n\r\nRefs: #801\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/881/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/880", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/880/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/880/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/880/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/880", "id": 2041730199, "node_id": "PR_kwDOEj0F685iAQGs", "number": 880, "title": "Serialization documentation", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-14T13:43:16Z", "updated_at": "2023-12-15T14:41:39Z", "closed_at": "2023-12-15T14:41:39Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/880", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/880", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/880.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/880.patch", "merged_at": "2023-12-15T14:41:39Z"}, "body": "This PR adds warnings about changes introduced in #806 and #812 and updates documentation about new serialization API.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/880/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/880/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/878", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/878/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/878/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/878/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/878", "id": 2039311849, "node_id": "PR_kwDOEj0F685h4Cuy", "number": 878, "title": "serialize: add more tests and docstrings", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-13T09:35:15Z", "updated_at": "2023-12-14T11:02:00Z", "closed_at": "2023-12-14T11:02:00Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/878", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/878", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/878.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/878.patch", "merged_at": "2023-12-14T11:02:00Z"}, "body": "This PR aims to improve the quality of the serialize module:\r\n\r\n- Adds a couple of tests which check that proper errors are returned in case when serialization fails,\r\n- Fixes a couple of bugs in errors reported from serialization logic - thanks to the aforementioned tests,\r\n- Documents remaining public items in the `types/serialize` module and adds a compile-time warning about missing public items in order to prevent regressions.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/878/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/877", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/877/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/877/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/877/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/877", "id": 2036604766, "node_id": "PR_kwDOEj0F685hu3PJ", "number": 877, "title": "Makefile: build and check benches", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-11T22:00:25Z", "updated_at": "2023-12-12T12:04:16Z", "closed_at": "2023-12-12T12:04:16Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/877", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/877", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/877.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/877.patch", "merged_at": "2023-12-12T12:04:16Z"}, "body": "In the current makefile benchmarks are not built or checked with `cargo check` / `cargo clippy` so any errors appearing in them will not be caught locally by a dev running `make ci` to perform checks / tests.\r\n\r\nThis PR adds benchmark building / checking to all relevant makefile targets.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/877/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/877/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/876", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/876/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/876/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/876/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/876", "id": 2033860600, "node_id": "PR_kwDOEj0F685hlmyW", "number": 876, "title": "Typos: fix minor typos in code", "user": {"login": "mykaul", "id": 4655593, "node_id": "MDQ6VXNlcjQ2NTU1OTM=", "avatar_url": "https://avatars.githubusercontent.com/u/4655593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mykaul", "html_url": "https://github.com/mykaul", "followers_url": "https://api.github.com/users/mykaul/followers", "following_url": "https://api.github.com/users/mykaul/following{/other_user}", "gists_url": "https://api.github.com/users/mykaul/gists{/gist_id}", "starred_url": "https://api.github.com/users/mykaul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mykaul/subscriptions", "organizations_url": "https://api.github.com/users/mykaul/orgs", "repos_url": "https://api.github.com/users/mykaul/repos", "events_url": "https://api.github.com/users/mykaul/events{/privacy}", "received_events_url": "https://api.github.com/users/mykaul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-12-09T13:56:25Z", "updated_at": "2023-12-11T09:01:31Z", "closed_at": "2023-12-11T08:59:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/876", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/876", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/876.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/876.patch", "merged_at": "2023-12-11T08:59:55Z"}, "body": "Mainly in comments.\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/875\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/876/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/874", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/874/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/874/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/874/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/874", "id": 2032331847, "node_id": "PR_kwDOEj0F685hgbNc", "number": 874, "title": "docs: add myst parser", "user": {"login": "dgarcia360", "id": 9107969, "node_id": "MDQ6VXNlcjkxMDc5Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/9107969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgarcia360", "html_url": "https://github.com/dgarcia360", "followers_url": "https://api.github.com/users/dgarcia360/followers", "following_url": "https://api.github.com/users/dgarcia360/following{/other_user}", "gists_url": "https://api.github.com/users/dgarcia360/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgarcia360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgarcia360/subscriptions", "organizations_url": "https://api.github.com/users/dgarcia360/orgs", "repos_url": "https://api.github.com/users/dgarcia360/repos", "events_url": "https://api.github.com/users/dgarcia360/events{/privacy}", "received_events_url": "https://api.github.com/users/dgarcia360/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2023-12-08T09:48:30Z", "updated_at": "2024-01-23T15:03:25Z", "closed_at": "2024-01-23T15:03:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/874", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/874", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/874.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/874.patch", "merged_at": "2024-01-23T15:03:25Z"}, "body": "Related PR: https://github.com/scylladb/sphinx-scylladb-theme/pull/803\r\n\r\nThis PR replaces Sphinx's deprecated extension recommonmark with myst-parser, as per https://sphinx-theme.scylladb.com/stable/configuration/markdown.html#recommonmark-parser.\r\n\r\n# How to test\r\n\r\nCheck the docs build and display without errors.", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/874/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/873", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/873/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/873/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/873/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/873", "id": 2032092019, "node_id": "PR_kwDOEj0F685hfmWL", "number": 873, "title": "CI: use container hostname in healthcheck", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-08T07:33:06Z", "updated_at": "2023-12-08T11:01:10Z", "closed_at": "2023-12-08T11:00:50Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/873", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/873", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/873.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/873.patch", "merged_at": "2023-12-08T11:00:50Z"}, "body": "As a workaround for scylladb/scylladb#16329, pass the hostname of the container when checking for its health with `cqlsh`. We need to do this in order to unblock the CI.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/873/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/871", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/871/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/871/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/871/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/871", "id": 2032004690, "node_id": "PR_kwDOEj0F685hfTI6", "number": 871, "title": "serialize: make new serialization traits object-safe", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-08T06:26:35Z", "updated_at": "2023-12-09T09:43:40Z", "closed_at": "2023-12-09T09:43:40Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/871", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/871", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/871.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/871.patch", "merged_at": "2023-12-09T09:43:40Z"}, "body": "As @Lorak-mmk stated in https://github.com/scylladb/scylla-rust-driver/pull/858#issuecomment-1841662378, the new serialization traits are incompatible with dynamic dispatch - `dyn SerializeCql`/`dyn SerializeRow` just isn't usable, while this was supported for `Value`/`ValueList`.\r\n\r\nThis is due to the fact that Rust disallows using traits via `dyn` unless they meet some conditions - and our new traits don't meet them:\r\n\r\n1. Both traits have two methods: `preliminary_type_check` and `serialize`. Having a separate type checking phase helps reduce the amount of actual type checking that needs to be performed when serializing (e.g. in case of collections). However, `preliminary_type_check` is an associated function instead of a method by design (i.e. it doesn't take a `self` parameter), and that prevents from making it object-safe.\r\n2. The `serialize` method takes a generic \"writer\" parameter that it can use to serialize the object. The idea behind the generic writer was to have two implementations: one that doesn't write anything but only counts bytes, and the other that actually appends bytes into a byte buffer. This would allow us to use `serialize` for both things: calculating the needed buffer size and also to actually serialize. However, as Rust uses monomorphisation to implement generics, they cannot be directly used with dynamic dispatch.\r\n\r\nWhile it would be possible to keep the current definitions intact and work around the problem by introducing \"erased\" versions of the traits (credit to [`erased_serde`](https://docs.rs/erased-serde/latest/erased_serde/) for inspiration), it increases complexity and could make serialization of type-erased types inefficient (due to the writers needing to be type-erased, too). Instead, let's simplify it:\r\n\r\n1. In current design, it is perfectly fine to do type checking in `serialize`, so move all type checking there from the existing `preliminary_type_check` methods and then remove them. While it introduces more type checks than necessary, it is not clear whether they have a measurable performance impact and it will be possible to extend the trait to reintroduce the optimization in a backwards-compatible way - for now, let's keep it simple.\r\n2. Remove the byte counting writers and only leave the \"proper\" ones, substituting the current writer traits with the latter ones. Later, we can consider introducing a `size_hint` method for the traits; it would be optional, but would have to be manually implemented (which is not a huge amount of work).\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/871/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/871/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/869", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/869/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/869/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/869/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/869", "id": 2027275430, "node_id": "PR_kwDOEj0F685hPJK2", "number": 869, "title": "SerializeRow: Add is_empty method", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-05T22:56:56Z", "updated_at": "2023-12-06T10:16:23Z", "closed_at": "2023-12-06T10:16:23Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/869", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/869", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/869.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/869.patch", "merged_at": "2023-12-06T10:16:23Z"}, "body": "Currently ongoing serialization refactor requires to only perform queries with values using prepared statements. Session interface still allows to pass values in query* methods, so we need a way to know if we can perform unprepared query or not.\r\n\r\nOne way is to always perform prepared queries, but that is not optimal. Before ongoing refactor we could serialize values and check if they are empty. This will no longer be possible soon, because serializing will require knowing column types, which in this case means having a prepared statement.\r\n\r\nThis commit implements third way - additional method on SerializeRow trait that allows us to check if values are empty (in which case we can skip the prepare).\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/869/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/869/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/865", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/865/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/865/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/865/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/865", "id": 2020375557, "node_id": "PR_kwDOEj0F685g3zG-", "number": 865, "title": "Make SerializationError a newtype", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-01T08:33:10Z", "updated_at": "2023-12-01T09:42:45Z", "closed_at": "2023-12-01T09:42:45Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/865", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/865", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/865.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/865.patch", "merged_at": "2023-12-01T09:42:45Z"}, "body": "## Pre-review checklist\r\n\r\nThis PR consists of first 2 commits of https://github.com/scylladb/scylla-rust-driver/pull/858\r\nIt was split out in order to merge it before #858, so that #862 and #851 can be rebased on top of it.\r\n\r\nThere are 2 changes made here:\r\n- changing `dyn Any` to `dyn Error` in SerializationError - it also supports downcasting, but is more useful interface\r\n- Making SerializationError a newtype instead of type alias. This prevents making conversion implementations too generic, like `impl From<SerializationError> for QueryError`, which after desugaring is `impl From<Arc<dyn Error + Send + Sync>> for QueryError` - and writing such implementations doesn't seem like a good idea.\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/865/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/863", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/863/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/863/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/863/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/863", "id": 2002074196, "node_id": "PR_kwDOEj0F685f50Sa", "number": 863, "title": "scylla-proxy: Add option to filter out control connection messages", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-11-20T12:15:28Z", "updated_at": "2023-11-21T13:55:50Z", "closed_at": "2023-11-21T13:55:50Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/863", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/863", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/863.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/863.patch", "merged_at": "2023-11-21T13:55:50Z"}, "body": "Proxy does not allow filtering of control connection messages. Right now this is not a problem, as all queries performed by driver are not prepared, so tests can filter them out by checking query content.\r\n\r\nThe ongoing serialization refactor changes that and prepares some queries performed automatically by driver, which breaks some tests, as they are not able to differentiate test's queries from internal driver queries.\r\n\r\nThis PR adds a mechanism to filter out control connection messages by ignoring messages on connections that had any event registered. Control connection is the only one in rust driver that does it, so this should by a reliable heuristic.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/863/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/863/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/862", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/862/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/862/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/862/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/862", "id": 2001246457, "node_id": "PR_kwDOEj0F685f3BpK", "number": 862, "title": "serialization: implement new serialization traits for the currently supported types", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-11-20T02:32:03Z", "updated_at": "2023-12-05T09:06:52Z", "closed_at": "2023-12-05T09:06:52Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/862", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/862", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/862.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/862.patch", "merged_at": "2023-12-05T09:06:52Z"}, "body": "The new `SerializeCql` and `SerializeRow` traits are supposed to eventually replace `Value` and `ValueList`. Currently, the new traits are implemented with a blanket implementation based on the old traits - this was just done in order to parallelize work on adapting the whole codebase to the new traits; the blanket implementations are inefficient and not type safe. This PR gets rid of them and, for each type for which we implement `Value` or `ValueList`, introduces proper implementations of `SerializeCql` and `SerializeRow`.\r\n\r\nAll types now check whether the CQL type serialized to matches, and most of them serialize exactly the same as they used to with the old traits. However, some slight differences were made in order to utilize the information available to the new traits and make it more robust:\r\n\r\n- `CqlValue::UserDefinedType` now doesn't assume that the order of the fields is the same as in the CQL type - it sorts the fields according to the CQL type.\r\n- `impl SerializeRow for BTreeMap/HashMap` doesn't serialize in the \"named values\" format anymore as it is no longer supported by the new traits. Instead, it uses provided information about the column names to properly order the values before sending them to the database.\r\n\r\nExisting tests in `value_tests.rs` are adapted so that they perform serialization using both old and new traits and compare the results (with a small number of exceptions where serialization behavior was changed).\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/821\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/862/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/862/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/861", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/861/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/861/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/861/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/861", "id": 1999259891, "node_id": "PR_kwDOEj0F685fwh4a", "number": 861, "title": "value_tests: fix clippy's new complaint about needless_borrows_for_generic_args", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-17T14:29:43Z", "updated_at": "2023-11-17T15:11:44Z", "closed_at": "2023-11-17T15:11:44Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/861", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/861", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/861.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/861.patch", "merged_at": "2023-11-17T15:11:44Z"}, "body": "A new clippy lint started complaining about the `check_ref_tuple` test: its inner `assert_has_batch_values`, supposedly, needlessly borrows its argument.\r\n\r\nAs it looks like one of the points of the test is to verify that batch values taken by reference still implement batch values, the clippy lint seems incorrect. Silence the lint by explicitly specifying that the type of the generic argument for `assert_has_batch_values` is a reference.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/861/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/858", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/858/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/858/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/858/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/858", "id": 1974643517, "node_id": "PR_kwDOEj0F685edEZ0", "number": 858, "title": "Switch Session to new serialization traits", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2023-11-02T16:40:53Z", "updated_at": "2023-12-12T17:03:01Z", "closed_at": "2023-12-12T17:03:01Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/858", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/858", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/858.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/858.patch", "merged_at": "2023-12-12T17:03:01Z"}, "body": "This PR is based on https://github.com/scylladb/scylla-rust-driver/pull/855 and is the main part of serialization refactor - switching public API to new trait.\r\nThe last commit makes the actual change. Previous ones are different changes that were necessary (or helpful) to make the switch.\r\n\r\nThere are still some things to do:\r\n- [x] Comments on new traits / structs\r\n- [ ] Documentation\r\n- [ ] Rename SerializeCQL / SerializeRow / NewSerializedValues to some sensible names\r\n- [ ] (Maybe) Check who calls query_filter_keyspace_name and use prepared statements in those places to avoid unnecessary prepares.\r\n\r\nBut the code changes are pretty much ready for review.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/858/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/858/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/856", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/856/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/856/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/856/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/856", "id": 1963580139, "node_id": "PR_kwDOEj0F685d3qVB", "number": 856, "title": "Commit renamed Cargo.lock file", "user": {"login": "Lorak-mmk", "id": 5958117, "node_id": "MDQ6VXNlcjU5NTgxMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5958117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lorak-mmk", "html_url": "https://github.com/Lorak-mmk", "followers_url": "https://api.github.com/users/Lorak-mmk/followers", "following_url": "https://api.github.com/users/Lorak-mmk/following{/other_user}", "gists_url": "https://api.github.com/users/Lorak-mmk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lorak-mmk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lorak-mmk/subscriptions", "organizations_url": "https://api.github.com/users/Lorak-mmk/orgs", "repos_url": "https://api.github.com/users/Lorak-mmk/repos", "events_url": "https://api.github.com/users/Lorak-mmk/events{/privacy}", "received_events_url": "https://api.github.com/users/Lorak-mmk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-10-26T13:28:56Z", "updated_at": "2023-11-24T01:08:14Z", "closed_at": "2023-10-26T15:58:41Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/856", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/856", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/856.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/856.patch", "merged_at": "2023-10-26T15:58:41Z"}, "body": "It will be used by min_rust workflow to build and check with our MSRV to prevent errors from packages updating their MSRV.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [ ] I have split my patch into logically separate commits.\r\n- [ ] All commit messages clearly explain what they change and why.\r\n- [ ] I added relevant tests for new features and bug fixes.\r\n- [ ] All commits compile, pass static checks and pass test.\r\n- [ ] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [ ] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/856/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/855", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/855/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/855/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/855/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/855", "id": 1963145667, "node_id": "PR_kwDOEj0F685d2Jf3", "number": 855, "title": "types: serialize: constrain the new serialization traits to make them easier and safer to use", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-10-26T09:56:01Z", "updated_at": "2023-11-24T17:29:13Z", "closed_at": "2023-11-24T17:29:12Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/855", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/855", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/855.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/855.patch", "merged_at": "2023-11-24T17:29:12Z"}, "body": "Currently, `SerializeRow` and `SerializeCql` traits are just given a mutable reference to a Vec<u8> and asked to append their CQL representation to the end. While simple, there are some issues with the interface:\r\n\r\n- The serialize method has access to the serialized representation of the values that were appended before it. It's not necessary for a correct implementation to have access to it.\r\n- Implementors technically can append any byte sequence to the end, but actually are expected to produce a CQL [value] containing the serialized value.\r\n\r\nWhile the `SerializeRow` and `SerializeCql` traits are not generally meant to be manually implemented by the users, we can make the interface easier to use and harder to misuse by making it append-only, restricting what the users are allowed to append and requiring the users to append anything by using a dash of type-level magic.\r\n\r\nIntroduce `RowWriter` and `CellWriter` traits which satisfy the above wishes and constraints, and pass them instead of Vec<u8> in `SerializeRow` and `SerializeCql`.\r\n\r\nThe new traits have two implementations - a Vec<u8> backed one that actually appends the bytes given to it, and a usize-backed one which just measures the length of the output without writing anything. Passing the latter before doing the actual serialization will allow to preallocate the right amount of bytes and then serialize without reallocations. It should be measured whether the reallocation cost always outweighs the calculation cost before implementing this optimization.\r\n\r\nRefs: https://github.com/scylladb/scylla-rust-driver/issues/801\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/855/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/853", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/853/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/853/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/853/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/853", "id": 1954199269, "node_id": "PR_kwDOEj0F685dYKvk", "number": 853, "title": "benchmarks/CI: make benchmarks compile and build them in CI", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-10-20T12:34:07Z", "updated_at": "2023-10-26T10:40:57Z", "closed_at": "2023-10-26T10:40:57Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/853", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/853", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/853.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/853.patch", "merged_at": "2023-10-26T10:40:57Z"}, "body": "The recent fix that changed the `types::write_short` function to use u16 instead of i16 broke one of our benchmarks - it tried to call that function with a negative number. The benchmarks aren't compiled in our CI, so it didn't catch it.\r\n\r\nIn order to prevent it from happening in the future, the `rust` workflow now uses the `--all-targets` flag to build and clippy-check the benchmarks as well.\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [ ] ~I added relevant tests for new features and bug fixes.~\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [ ] ~I have provided docstrings for the public items that I want to introduce.~\r\n- [ ] ~I have adjusted the documentation in `./docs/source/`.~\r\n- [ ] ~I added appropriate `Fixes:` annotations to PR description.~\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/853/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/851", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/851/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/851/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/851/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/851", "id": 1953800255, "node_id": "PR_kwDOEj0F685dWzsM", "number": 851, "title": "Serialization refactor: macros for value/row serialization", "user": {"login": "piodul", "id": 4950936, "node_id": "MDQ6VXNlcjQ5NTA5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/4950936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piodul", "html_url": "https://github.com/piodul", "followers_url": "https://api.github.com/users/piodul/followers", "following_url": "https://api.github.com/users/piodul/following{/other_user}", "gists_url": "https://api.github.com/users/piodul/gists{/gist_id}", "starred_url": "https://api.github.com/users/piodul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piodul/subscriptions", "organizations_url": "https://api.github.com/users/piodul/orgs", "repos_url": "https://api.github.com/users/piodul/repos", "events_url": "https://api.github.com/users/piodul/events{/privacy}", "received_events_url": "https://api.github.com/users/piodul/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-10-20T08:31:26Z", "updated_at": "2023-12-09T11:15:01Z", "closed_at": "2023-12-09T11:15:00Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/851", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/851", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/851.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/851.patch", "merged_at": "2023-12-09T11:15:00Z"}, "body": "Introduce derive macros for both of the new serialization traits: `SerializeCql` and `SerializeRow`. They allow to serialize given Rust struct either into a UDT value or a list of values for a query.\r\n\r\nThe most significant difference from the previous `IntoUserType` and `ValueList` is that the new macros match the Rust struct fields to UDT fields or columns by name. This makes the macros less error-prone to use, especially in the UDT case.\r\n\r\nFor users which are already used to the old macros and are willing to guarantee the field order but do not want to pay performance cost associated with sorting the fields, a separate \"flavor\" is introduced. With that flavor enabled, the generated code expects that the field order is correct. The field names are still checked - if the expectation about the matching fields is broken serialization will just fail.\r\n\r\nDepends on https://github.com/scylladb/scylla-rust-driver/pull/862\r\n\r\nRefs: #802\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] I have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [ ] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/851/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/851/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/850", "repository_url": "https://api.github.com/repos/scylladb/scylla-rust-driver", "labels_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/850/labels{/name}", "comments_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/850/comments", "events_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/850/events", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/850", "id": 1952474015, "node_id": "PR_kwDOEj0F685dST1P", "number": 850, "title": "cassandra/docker-compose: go back to using the latest cassandra version", "user": {"login": "cvybhu", "id": 36861778, "node_id": "MDQ6VXNlcjM2ODYxNzc4", "avatar_url": "https://avatars.githubusercontent.com/u/36861778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cvybhu", "html_url": "https://github.com/cvybhu", "followers_url": "https://api.github.com/users/cvybhu/followers", "following_url": "https://api.github.com/users/cvybhu/following{/other_user}", "gists_url": "https://api.github.com/users/cvybhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/cvybhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cvybhu/subscriptions", "organizations_url": "https://api.github.com/users/cvybhu/orgs", "repos_url": "https://api.github.com/users/cvybhu/repos", "events_url": "https://api.github.com/users/cvybhu/events{/privacy}", "received_events_url": "https://api.github.com/users/cvybhu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-10-19T14:59:19Z", "updated_at": "2023-11-02T11:36:54Z", "closed_at": "2023-11-02T11:36:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/pulls/850", "html_url": "https://github.com/scylladb/scylla-rust-driver/pull/850", "diff_url": "https://github.com/scylladb/scylla-rust-driver/pull/850.diff", "patch_url": "https://github.com/scylladb/scylla-rust-driver/pull/850.patch", "merged_at": "2023-11-02T11:36:54Z"}, "body": "In January the tests started failing on Cassandra `4.1`, so we pinned the cassandra version to `4.0.7`, which didn't have these problems. `4.0.7` is the version that we've been using in the CI since then.\r\n\r\nIn the meantime there were new releases of Cassandra, at the moment the latest is `4.1.3`. Let's try to go back to the latest version, maybe the problems fixed themselves during the last nine months.\r\n\r\nRefs: https://github.com/scylladb/scylla-rust-driver/issues/620\r\nRefs: https://github.com/scylladb/scylla-rust-driver/pull/629\r\n\r\nFixes: https://github.com/scylladb/scylla-rust-driver/issues/633\r\n\r\n## Pre-review checklist\r\n\r\n<!--\r\n    Make sure you took care of the issues on the list.\r\n    Put 'x' into those boxes which apply.\r\n    You can also create the PR now and click on all relevant checkboxes.\r\n    See CONTRIBUTING.md for more details.\r\n-->\r\n\r\n- [x] have split my patch into logically separate commits.\r\n- [x] All commit messages clearly explain what they change and why.\r\n- [x] I added relevant tests for new features and bug fixes.\r\n- [x] All commits compile, pass static checks and pass test.\r\n- [x] PR description sums up the changes and reasons why they should be introduced.\r\n- [x] I have provided docstrings for the public items that I want to introduce.\r\n- [x] I have adjusted the documentation in `./docs/source/`.\r\n- [x] I added appropriate `Fixes:` annotations to PR description.\r\n", "reactions": {"url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/scylladb/scylla-rust-driver/issues/850/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]