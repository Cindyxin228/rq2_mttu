[{"url": "https://api.github.com/repos/maciejhirsz/logos/issues/199", "repository_url": "https://api.github.com/repos/maciejhirsz/logos", "labels_url": "https://api.github.com/repos/maciejhirsz/logos/issues/199/labels{/name}", "comments_url": "https://api.github.com/repos/maciejhirsz/logos/issues/199/comments", "events_url": "https://api.github.com/repos/maciejhirsz/logos/issues/199/events", "html_url": "https://github.com/maciejhirsz/logos/pull/199", "id": 798652306, "node_id": "MDExOlB1bGxSZXF1ZXN0NTY1NDMxMTA2", "number": 199, "title": "Prepping release 0.12", "user": {"login": "maciejhirsz", "id": 1096222, "node_id": "MDQ6VXNlcjEwOTYyMjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1096222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maciejhirsz", "html_url": "https://github.com/maciejhirsz", "followers_url": "https://api.github.com/users/maciejhirsz/followers", "following_url": "https://api.github.com/users/maciejhirsz/following{/other_user}", "gists_url": "https://api.github.com/users/maciejhirsz/gists{/gist_id}", "starred_url": "https://api.github.com/users/maciejhirsz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maciejhirsz/subscriptions", "organizations_url": "https://api.github.com/users/maciejhirsz/orgs", "repos_url": "https://api.github.com/users/maciejhirsz/repos", "events_url": "https://api.github.com/users/maciejhirsz/events{/privacy}", "received_events_url": "https://api.github.com/users/maciejhirsz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-01T19:41:28Z", "updated_at": "2021-02-01T19:49:57Z", "closed_at": "2021-02-01T19:49:54Z", "author_association": "OWNER", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/maciejhirsz/logos/pulls/199", "html_url": "https://github.com/maciejhirsz/logos/pull/199", "diff_url": "https://github.com/maciejhirsz/logos/pull/199.diff", "patch_url": "https://github.com/maciejhirsz/logos/pull/199.patch", "merged_at": "2021-02-01T19:49:54Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/maciejhirsz/logos/issues/199/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/198", "repository_url": "https://api.github.com/repos/maciejhirsz/logos", "labels_url": "https://api.github.com/repos/maciejhirsz/logos/issues/198/labels{/name}", "comments_url": "https://api.github.com/repos/maciejhirsz/logos/issues/198/comments", "events_url": "https://api.github.com/repos/maciejhirsz/logos/issues/198/events", "html_url": "https://github.com/maciejhirsz/logos/pull/198", "id": 796469914, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYzNjQ2NTQ3", "number": 198, "title": "Add support for case insensitivity", "user": {"login": "gymore-io", "id": 76853528, "node_id": "MDQ6VXNlcjc2ODUzNTI4", "avatar_url": "https://avatars.githubusercontent.com/u/76853528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gymore-io", "html_url": "https://github.com/gymore-io", "followers_url": "https://api.github.com/users/gymore-io/followers", "following_url": "https://api.github.com/users/gymore-io/following{/other_user}", "gists_url": "https://api.github.com/users/gymore-io/gists{/gist_id}", "starred_url": "https://api.github.com/users/gymore-io/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gymore-io/subscriptions", "organizations_url": "https://api.github.com/users/gymore-io/orgs", "repos_url": "https://api.github.com/users/gymore-io/repos", "events_url": "https://api.github.com/users/gymore-io/events{/privacy}", "received_events_url": "https://api.github.com/users/gymore-io/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-01-29T00:06:09Z", "updated_at": "2021-02-01T19:55:44Z", "closed_at": "2021-02-01T19:11:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/maciejhirsz/logos/pulls/198", "html_url": "https://github.com/maciejhirsz/logos/pull/198", "diff_url": "https://github.com/maciejhirsz/logos/pull/198.diff", "patch_url": "https://github.com/maciejhirsz/logos/pull/198.patch", "merged_at": "2021-02-01T19:11:55Z"}, "body": "Issue: #196 \r\n\r\nCase insensitivity is opt-in using the `ignore(...)` attribute.\r\n\r\n```rust\r\n#[derive(Logos)]\r\nstruct Token {\r\n    /* ... */\r\n    #[token(\"\u00e9t\u00e9\", ignore(case))]\r\n    Ete,\r\n    #[token(\"DR\u00f4LE\", ignore(ascii_case))]\r\n    Drole,\r\n    #[regex(\"[abc]+\", ignore(case))]\r\n    Abc,\r\n}\r\n\r\nlet mut lex = Token::lex(\"\u00e9t\u00e9 \u00c9T\u00c9 Dr\u00d4le Dr\u00f4le AaabbCC\");\r\nassert_eq!((Some(Token::Ete), \"\u00e9t\u00e9\"), (lex.next(), lex.slice()));\r\nassert_eq!((Some(Token::Ete), \"\u00c9T\u00c9\"), (lex.next(), lex.slice()));\r\n// Then a bunch of errors because \u00d4 is not an ascii-uppercase \u00f4.\r\nassert_eq!((Some(Token::Drole), \"Dr\u00f4le\"),  (lex.next(), lex.slice()));\r\nassert_eq!((Some(Token::Abc), \"AaabbCC\"),  (lex.next(), lex.slice()));\r\nassert_eq!(None, lex.next());\r\n```\r\n\r\nFor now, I prevented the user to use both `ascii_case` and `case` at the same time. This can be easily changed.\r\n\r\n--------------------------------------------\r\n\r\nInternally, all this attribute does is converting the original literal (for tokens) or the MIR (for regular expression) into another MIR that accepts both uppercase and lowercase variants of the input.\r\n\r\n```rust\r\n// For example, this ...\r\n#[token(\"hello\", ignore(ascii_case))\r\nHello,\r\n\r\n// ... is treated internally exactly like this\r\n#[regex(\"[Hh][Ee][Ll][Oo]\")]\r\nHello,\r\n```\r\n\r\n# Unanswered questions\r\n\r\n* I created the `IgnoreFlags` struct to make the `ignore` attribute more easily expandable. It uses a basic bit field. I wasn't sure whether a new dependency was ok so I implemented myself what the [`bitflags`](https://crates.io/crates/bitflags) crate do (in much much simpler). Do we want a new dependency to make the code cleaner or the little features I implemented are enough?\r\n* I am using MIR to handle case insensitivity. Is this ok or would directly creating forks be faster? If this is not acceptable/maintenable, I think it is possible to adapt the the whole thing trait to make it work. I might need a little help for that though; I found the `generator` module quite complicated to dig into and understand.\r\n* ~Ranges (eg. `regex(\"[a-z]\", ...)`) are currently using [`ClassUnicode::case_fold_simple`](https://docs.rs/regex-syntax/0.6.22/regex_syntax/hir/struct.ClassUnicode.html#method.case_fold_simple)  and normal literals (eg. `regex(\"abc\", ...)`) are using Rust's [`to_lowercase`](https://doc.rust-lang.org/std/primitive.char.html#method.to_lowercase) and [`to_uppercase`](https://doc.rust-lang.org/std/primitive.char.html#method.to_uppercase) functions. This might lead to inconsistencies if those two methods do not convert characters the same way.~ Now everything uses simple folding.\r\n \r\nPS: This is my first PR ever. If I've done anything wrong, please tell me! I'm both doing this because I needed this feature and to get reviews of my code. Feel free to say it needs some (or a lot) rework :)", "reactions": {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/198/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/maciejhirsz/logos/issues/198/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/197", "repository_url": "https://api.github.com/repos/maciejhirsz/logos", "labels_url": "https://api.github.com/repos/maciejhirsz/logos/issues/197/labels{/name}", "comments_url": "https://api.github.com/repos/maciejhirsz/logos/issues/197/comments", "events_url": "https://api.github.com/repos/maciejhirsz/logos/issues/197/events", "html_url": "https://github.com/maciejhirsz/logos/pull/197", "id": 795799286, "node_id": "MDExOlB1bGxSZXF1ZXN0NTYzMDg3NzQx", "number": 197, "title": "logos-derive: fix RUSTSEC-2020-0122 by upgrading beef: 0.4.1 -> 0.5.0", "user": {"login": "basvandijk", "id": 576355, "node_id": "MDQ6VXNlcjU3NjM1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/576355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/basvandijk", "html_url": "https://github.com/basvandijk", "followers_url": "https://api.github.com/users/basvandijk/followers", "following_url": "https://api.github.com/users/basvandijk/following{/other_user}", "gists_url": "https://api.github.com/users/basvandijk/gists{/gist_id}", "starred_url": "https://api.github.com/users/basvandijk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/basvandijk/subscriptions", "organizations_url": "https://api.github.com/users/basvandijk/orgs", "repos_url": "https://api.github.com/users/basvandijk/repos", "events_url": "https://api.github.com/users/basvandijk/events{/privacy}", "received_events_url": "https://api.github.com/users/basvandijk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-01-28T08:49:20Z", "updated_at": "2021-02-01T19:55:18Z", "closed_at": "2021-01-28T10:53:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/maciejhirsz/logos/pulls/197", "html_url": "https://github.com/maciejhirsz/logos/pull/197", "diff_url": "https://github.com/maciejhirsz/logos/pull/197.diff", "patch_url": "https://github.com/maciejhirsz/logos/pull/197.patch", "merged_at": "2021-01-28T10:53:17Z"}, "body": "See: https://rustsec.org/advisories/RUSTSEC-2020-0122", "reactions": {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/197/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/maciejhirsz/logos/issues/197/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/193", "repository_url": "https://api.github.com/repos/maciejhirsz/logos", "labels_url": "https://api.github.com/repos/maciejhirsz/logos/issues/193/labels{/name}", "comments_url": "https://api.github.com/repos/maciejhirsz/logos/issues/193/comments", "events_url": "https://api.github.com/repos/maciejhirsz/logos/issues/193/events", "html_url": "https://github.com/maciejhirsz/logos/pull/193", "id": 778546363, "node_id": "MDExOlB1bGxSZXF1ZXN0NTQ4NjEyOTAw", "number": 193, "title": "Remove unused lookup! support", "user": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-05T03:29:52Z", "updated_at": "2021-01-28T10:55:34Z", "closed_at": "2021-01-28T10:55:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/maciejhirsz/logos/pulls/193", "html_url": "https://github.com/maciejhirsz/logos/pull/193", "diff_url": "https://github.com/maciejhirsz/logos/pull/193.diff", "patch_url": "https://github.com/maciejhirsz/logos/pull/193.patch", "merged_at": "2021-01-28T10:55:15Z"}, "body": "This is entirely unused by logos's internals now, and is actually currently not correct in the face of explicit discriminants (as the discriminant of an enum variant can exceed `<Token as Logos>::SIZE`. Additionally, since we have to parse the explicit discriminant in a derive macro, said explicit discriminants are restricted to being literals, not expressions such as `u16::MAX`.\r\n\r\nAs support for `lookup!` tables is no longer necessary and is buggy and a cause of very inscrutable compiler errors (#192), I suggest that we just remove it, and suggest externals users use a different crate such as [`enum-map`](https://lib.rs/crates/enum-map) for equivalent functionality.\r\n\r\nFixes #192 (by removing the impacted code).", "reactions": {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/193/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/maciejhirsz/logos/issues/193/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/184", "repository_url": "https://api.github.com/repos/maciejhirsz/logos", "labels_url": "https://api.github.com/repos/maciejhirsz/logos/issues/184/labels{/name}", "comments_url": "https://api.github.com/repos/maciejhirsz/logos/issues/184/comments", "events_url": "https://api.github.com/repos/maciejhirsz/logos/issues/184/events", "html_url": "https://github.com/maciejhirsz/logos/pull/184", "id": 754965279, "node_id": "MDExOlB1bGxSZXF1ZXN0NTMwNzY3MDU4", "number": 184, "title": "Use actions-rs/cargo instead of running cargo test manually", "user": {"login": "lunacookies", "id": 31783266, "node_id": "MDQ6VXNlcjMxNzgzMjY2", "avatar_url": "https://avatars.githubusercontent.com/u/31783266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunacookies", "html_url": "https://github.com/lunacookies", "followers_url": "https://api.github.com/users/lunacookies/followers", "following_url": "https://api.github.com/users/lunacookies/following{/other_user}", "gists_url": "https://api.github.com/users/lunacookies/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunacookies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunacookies/subscriptions", "organizations_url": "https://api.github.com/users/lunacookies/orgs", "repos_url": "https://api.github.com/users/lunacookies/repos", "events_url": "https://api.github.com/users/lunacookies/events{/privacy}", "received_events_url": "https://api.github.com/users/lunacookies/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-12-02T05:52:24Z", "updated_at": "2021-01-28T10:54:44Z", "closed_at": "2021-01-28T10:53:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/maciejhirsz/logos/pulls/184", "html_url": "https://github.com/maciejhirsz/logos/pull/184", "diff_url": "https://github.com/maciejhirsz/logos/pull/184.diff", "patch_url": "https://github.com/maciejhirsz/logos/pull/184.patch", "merged_at": "2021-01-28T10:53:58Z"}, "body": "This shows errors from tests using the GitHub UI, rather than just giving you the text of the error.", "reactions": {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/184/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/maciejhirsz/logos/issues/184/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/183", "repository_url": "https://api.github.com/repos/maciejhirsz/logos", "labels_url": "https://api.github.com/repos/maciejhirsz/logos/issues/183/labels{/name}", "comments_url": "https://api.github.com/repos/maciejhirsz/logos/issues/183/comments", "events_url": "https://api.github.com/repos/maciejhirsz/logos/issues/183/events", "html_url": "https://github.com/maciejhirsz/logos/pull/183", "id": 754932946, "node_id": "MDExOlB1bGxSZXF1ZXN0NTMwNzQwMzI3", "number": 183, "title": "Enforce usage of rustfmt in CI", "user": {"login": "lunacookies", "id": 31783266, "node_id": "MDQ6VXNlcjMxNzgzMjY2", "avatar_url": "https://avatars.githubusercontent.com/u/31783266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunacookies", "html_url": "https://github.com/lunacookies", "followers_url": "https://api.github.com/users/lunacookies/followers", "following_url": "https://api.github.com/users/lunacookies/following{/other_user}", "gists_url": "https://api.github.com/users/lunacookies/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunacookies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunacookies/subscriptions", "organizations_url": "https://api.github.com/users/lunacookies/orgs", "repos_url": "https://api.github.com/users/lunacookies/repos", "events_url": "https://api.github.com/users/lunacookies/events{/privacy}", "received_events_url": "https://api.github.com/users/lunacookies/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-02T04:39:06Z", "updated_at": "2021-01-28T10:56:47Z", "closed_at": "2021-01-28T10:55:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/maciejhirsz/logos/pulls/183", "html_url": "https://github.com/maciejhirsz/logos/pull/183", "diff_url": "https://github.com/maciejhirsz/logos/pull/183.diff", "patch_url": "https://github.com/maciejhirsz/logos/pull/183.patch", "merged_at": "2021-01-28T10:55:01Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/maciejhirsz/logos/issues/183/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/182", "repository_url": "https://api.github.com/repos/maciejhirsz/logos", "labels_url": "https://api.github.com/repos/maciejhirsz/logos/issues/182/labels{/name}", "comments_url": "https://api.github.com/repos/maciejhirsz/logos/issues/182/comments", "events_url": "https://api.github.com/repos/maciejhirsz/logos/issues/182/events", "html_url": "https://github.com/maciejhirsz/logos/pull/182", "id": 754927411, "node_id": "MDExOlB1bGxSZXF1ZXN0NTMwNzM1NzU3", "number": 182, "title": "Run GitHub Actions on Windows and macOS", "user": {"login": "lunacookies", "id": 31783266, "node_id": "MDQ6VXNlcjMxNzgzMjY2", "avatar_url": "https://avatars.githubusercontent.com/u/31783266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunacookies", "html_url": "https://github.com/lunacookies", "followers_url": "https://api.github.com/users/lunacookies/followers", "following_url": "https://api.github.com/users/lunacookies/following{/other_user}", "gists_url": "https://api.github.com/users/lunacookies/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunacookies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunacookies/subscriptions", "organizations_url": "https://api.github.com/users/lunacookies/orgs", "repos_url": "https://api.github.com/users/lunacookies/repos", "events_url": "https://api.github.com/users/lunacookies/events{/privacy}", "received_events_url": "https://api.github.com/users/lunacookies/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-12-02T04:25:16Z", "updated_at": "2021-01-28T10:57:19Z", "closed_at": "2021-01-28T10:55:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/maciejhirsz/logos/pulls/182", "html_url": "https://github.com/maciejhirsz/logos/pull/182", "diff_url": "https://github.com/maciejhirsz/logos/pull/182.diff", "patch_url": "https://github.com/maciejhirsz/logos/pull/182.patch", "merged_at": "2021-01-28T10:55:51Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/maciejhirsz/logos/issues/182/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/maciejhirsz/logos/issues/182/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]