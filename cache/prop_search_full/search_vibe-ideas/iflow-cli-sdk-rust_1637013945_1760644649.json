[{"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/10", "repository_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust", "labels_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/10/labels{/name}", "comments_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/10/comments", "events_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/10/events", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/10", "id": 3510605604, "node_id": "PR_kwDOP3hdgs6tfiqs", "number": 10, "title": "refactor: handle send_message result for error handling in examples", "user": {"login": "ssmath", "id": 45290457, "node_id": "MDQ6VXNlcjQ1MjkwNDU3", "avatar_url": "https://avatars.githubusercontent.com/u/45290457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssmath", "html_url": "https://github.com/ssmath", "followers_url": "https://api.github.com/users/ssmath/followers", "following_url": "https://api.github.com/users/ssmath/following{/other_user}", "gists_url": "https://api.github.com/users/ssmath/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssmath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssmath/subscriptions", "organizations_url": "https://api.github.com/users/ssmath/orgs", "repos_url": "https://api.github.com/users/ssmath/repos", "events_url": "https://api.github.com/users/ssmath/events{/privacy}", "received_events_url": "https://api.github.com/users/ssmath/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-13T16:00:33Z", "updated_at": "2025-10-13T16:18:20Z", "closed_at": "2025-10-13T16:18:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/pulls/10", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/10", "diff_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/10.diff", "patch_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/10.patch", "merged_at": "2025-10-13T16:18:15Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/10/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/10/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/9", "repository_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust", "labels_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/9/labels{/name}", "comments_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/9/comments", "events_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/9/events", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/9", "id": 3488282318, "node_id": "PR_kwDOP3hdgs6sU1_9", "number": 9, "title": "feat: mcp server request support", "user": {"login": "ssmath", "id": 45290457, "node_id": "MDQ6VXNlcjQ1MjkwNDU3", "avatar_url": "https://avatars.githubusercontent.com/u/45290457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssmath", "html_url": "https://github.com/ssmath", "followers_url": "https://api.github.com/users/ssmath/followers", "following_url": "https://api.github.com/users/ssmath/following{/other_user}", "gists_url": "https://api.github.com/users/ssmath/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssmath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssmath/subscriptions", "organizations_url": "https://api.github.com/users/ssmath/orgs", "repos_url": "https://api.github.com/users/ssmath/repos", "events_url": "https://api.github.com/users/ssmath/events{/privacy}", "received_events_url": "https://api.github.com/users/ssmath/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-06T17:16:29Z", "updated_at": "2025-10-13T12:23:09Z", "closed_at": "2025-10-13T12:23:09Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/pulls/9", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/9", "diff_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/9.diff", "patch_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/9.patch", "merged_at": "2025-10-13T12:23:09Z"}, "body": "- ACP: support MCP servers request\r\n- support start iFLOW CLI with --debug flag", "reactions": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/9/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/9/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/4", "repository_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust", "labels_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/4/labels{/name}", "comments_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/4/comments", "events_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/4/events", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/4", "id": 3485533383, "node_id": "PR_kwDOP3hdgs6sLdYM", "number": 4, "title": "fix(logging): enhance logging to debug level with env var support", "user": {"login": "ssmath", "id": 45290457, "node_id": "MDQ6VXNlcjQ1MjkwNDU3", "avatar_url": "https://avatars.githubusercontent.com/u/45290457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssmath", "html_url": "https://github.com/ssmath", "followers_url": "https://api.github.com/users/ssmath/followers", "following_url": "https://api.github.com/users/ssmath/following{/other_user}", "gists_url": "https://api.github.com/users/ssmath/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssmath/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssmath/subscriptions", "organizations_url": "https://api.github.com/users/ssmath/orgs", "repos_url": "https://api.github.com/users/ssmath/repos", "events_url": "https://api.github.com/users/ssmath/events{/privacy}", "received_events_url": "https://api.github.com/users/ssmath/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-06T03:10:00Z", "updated_at": "2025-10-06T11:36:23Z", "closed_at": "2025-10-06T11:36:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/pulls/4", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/4", "diff_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/4.diff", "patch_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/4.patch", "merged_at": "2025-10-06T11:36:23Z"}, "body": "Enable more detailed logging by switching from hardcoded info to debug level and supporting RUST_LOG environment variable configuration across documentation and examples. This improves development debugging capabilities.", "reactions": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/4/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/4/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/3", "repository_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust", "labels_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/3/labels{/name}", "comments_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/3/comments", "events_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/3/events", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/3", "id": 3477571017, "node_id": "PR_kwDOP3hdgs6rxU2H", "number": 3, "title": "feat: complete msg type", "user": {"login": "yeshan333", "id": 39296814, "node_id": "MDQ6VXNlcjM5Mjk2ODE0", "avatar_url": "https://avatars.githubusercontent.com/u/39296814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yeshan333", "html_url": "https://github.com/yeshan333", "followers_url": "https://api.github.com/users/yeshan333/followers", "following_url": "https://api.github.com/users/yeshan333/following{/other_user}", "gists_url": "https://api.github.com/users/yeshan333/gists{/gist_id}", "starred_url": "https://api.github.com/users/yeshan333/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yeshan333/subscriptions", "organizations_url": "https://api.github.com/users/yeshan333/orgs", "repos_url": "https://api.github.com/users/yeshan333/repos", "events_url": "https://api.github.com/users/yeshan333/events{/privacy}", "received_events_url": "https://api.github.com/users/yeshan333/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-02T13:38:03Z", "updated_at": "2025-10-06T01:36:04Z", "closed_at": "2025-10-06T01:36:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/pulls/3", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/3", "diff_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/3.diff", "patch_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/3.patch", "merged_at": "2025-10-06T01:36:04Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/3/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/3/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/2", "repository_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust", "labels_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/2/labels{/name}", "comments_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/2/comments", "events_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/2/events", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/2", "id": 3477330713, "node_id": "PR_kwDOP3hdgs6rwgYz", "number": 2, "title": "feat: enhance plan msg", "user": {"login": "yeshan333", "id": 39296814, "node_id": "MDQ6VXNlcjM5Mjk2ODE0", "avatar_url": "https://avatars.githubusercontent.com/u/39296814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yeshan333", "html_url": "https://github.com/yeshan333", "followers_url": "https://api.github.com/users/yeshan333/followers", "following_url": "https://api.github.com/users/yeshan333/following{/other_user}", "gists_url": "https://api.github.com/users/yeshan333/gists{/gist_id}", "starred_url": "https://api.github.com/users/yeshan333/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yeshan333/subscriptions", "organizations_url": "https://api.github.com/users/yeshan333/orgs", "repos_url": "https://api.github.com/users/yeshan333/repos", "events_url": "https://api.github.com/users/yeshan333/events{/privacy}", "received_events_url": "https://api.github.com/users/yeshan333/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-02T12:26:19Z", "updated_at": "2025-10-02T12:36:44Z", "closed_at": "2025-10-02T12:36:44Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/pulls/2", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/2", "diff_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/2.diff", "patch_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/2.patch", "merged_at": "2025-10-02T12:36:44Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/2/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/2/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/1", "repository_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust", "labels_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/1/labels{/name}", "comments_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/1/comments", "events_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/1/events", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/1", "id": 3474227098, "node_id": "PR_kwDOP3hdgs6rl7S2", "number": 1, "title": "feat: WebSocket Support and Feature Enhancements", "user": {"login": "yeshan333", "id": 39296814, "node_id": "MDQ6VXNlcjM5Mjk2ODE0", "avatar_url": "https://avatars.githubusercontent.com/u/39296814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yeshan333", "html_url": "https://github.com/yeshan333", "followers_url": "https://api.github.com/users/yeshan333/followers", "following_url": "https://api.github.com/users/yeshan333/following{/other_user}", "gists_url": "https://api.github.com/users/yeshan333/gists{/gist_id}", "starred_url": "https://api.github.com/users/yeshan333/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yeshan333/subscriptions", "organizations_url": "https://api.github.com/users/yeshan333/orgs", "repos_url": "https://api.github.com/users/yeshan333/repos", "events_url": "https://api.github.com/users/yeshan333/events{/privacy}", "received_events_url": "https://api.github.com/users/yeshan333/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-10-01T16:10:56Z", "updated_at": "2025-10-01T16:29:31Z", "closed_at": "2025-10-01T16:29:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/pulls/1", "html_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/1", "diff_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/1.diff", "patch_url": "https://github.com/vibe-ideas/iflow-cli-sdk-rust/pull/1.patch", "merged_at": "2025-10-01T16:29:30Z"}, "body": "# WebSocket Support and Feature Enhancements\r\n\r\n## Overview of Major Changes\r\n\r\nThis PR introduces WebSocket communication support to the iFlow CLI SDK Rust version while maintaining the existing stdio communication method. Additionally, it adds permission management modes, improves timeout handling, enhances logging capabilities, and provides new examples to demonstrate these features.\r\n\r\n### \ud83d\ude80 New Features\r\n\r\n1. **WebSocket Communication Support**:\r\n   - Added complete WebSocket transport layer implementation (`websocket_transport.rs`)\r\n   - Implemented ACP protocol-based WebSocket client handling (`acp_protocol.rs`)\r\n   - Supports automatic iFlow process startup and connection to WebSocket endpoints\r\n   - Added connection retry mechanism and improved error handling\r\n\r\n2. **Permission Management Modes**:\r\n   - Introduced `PermissionMode` enum (Auto, Manual, Selective)\r\n   - Implemented permission request handling logic in ACP protocol processing\r\n   - Auto mode automatically approves all tool calls\r\n   - Selective mode automatically approves specific types of tool calls (e.g., read/fetch operations)\r\n   - Manual mode requires manual confirmation for all tool calls\r\n\r\n3. **Timeout Handling Improvements**:\r\n   - Added custom timeout parameters for query functions\r\n   - Implemented more granular timeout control in WebSocket connections and message handling\r\n   - Added timeout handling in message receiving loops\r\n\r\n4. **Examples and Documentation**:\r\n   - Added WebSocket client example (`websocket_client.rs`)\r\n   - Added permission modes example (`permission_modes.rs`)\r\n   - Updated README documentation to reflect new features\r\n\r\n### \ud83d\udee0\ufe0f Technical Implementation Details\r\n\r\n1. **Connection Management**:\r\n   - Refactored connection type to enum (`Connection::Stdio` and `Connection::WebSocket`)\r\n   - Improved process manager to support WebSocket port discovery and verification\r\n   - Added port availability checking and listening state verification\r\n\r\n2. **Protocol Handling**:\r\n   - Implemented complete ACP protocol handling, including initialization, authentication, session creation, and prompt sending\r\n   - Added support for various session update types (agent_message_chunk, tool_call, plan, etc.)\r\n   - Implemented permission request handling mechanism\r\n\r\n3. **Error Handling and Logging**:\r\n   - Enhanced error type definitions with more specific error categories\r\n   - Improved logging functionality with detailed message type and content recording\r\n   - Added more detailed debug information and error tracing\r\n\r\n### \ud83d\udcc8 Performance and Stability Improvements\r\n\r\n1. **Connection Stability**:\r\n   - Implemented WebSocket connection retry mechanism\r\n   - Added better connection state management and error recovery\r\n   - Improved process startup and port listening verification\r\n\r\n2. **Resource Management**:\r\n   - Improved process lifecycle management\r\n   - Added more reasonable resource release and cleanup mechanisms\r\n   - Optimized message processing loops to avoid infinite waiting\r\n\r\n### \ud83e\uddea Testing and Validation\r\n\r\n1. **End-to-End Testing**:\r\n   - Added new E2E test file covering all examples\r\n   - Updated CI configuration to run WebSocket-related tests\r\n   - Added test environment configuration and secret management\r\n\r\n2. **Example Validation**:\r\n   - Provided multiple examples to demonstrate new features\r\n   - Including basic WebSocket client, permission modes examples\r\n   - Updated existing examples to use new APIs\r\n\r\n### \ud83d\udccb Usage\r\n\r\n```rust\r\n// Using WebSocket connection\r\nlet options = IFlowOptions::new()\r\n    .with_websocket_url(\"ws://localhost:8090/acp?peer=iflow\")\r\n    .with_auto_start_process(true)\r\n    .with_permission_mode(PermissionMode::Auto);\r\n\r\nlet mut client = IFlowClient::new(Some(options));\r\nclient.connect().await?;", "reactions": {"url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/1/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/vibe-ideas/iflow-cli-sdk-rust/issues/1/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]