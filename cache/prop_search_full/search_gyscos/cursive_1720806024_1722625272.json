[{"url": "https://api.github.com/repos/gyscos/cursive/issues/792", "repository_url": "https://api.github.com/repos/gyscos/cursive", "labels_url": "https://api.github.com/repos/gyscos/cursive/issues/792/labels{/name}", "comments_url": "https://api.github.com/repos/gyscos/cursive/issues/792/comments", "events_url": "https://api.github.com/repos/gyscos/cursive/issues/792/events", "html_url": "https://github.com/gyscos/cursive/pull/792", "id": 2341746747, "node_id": "PR_kwDOAhtFyc5x3aF9", "number": 792, "title": "Fixed marking cells with bombs for example `mines`", "user": {"login": "xilec", "id": 9982364, "node_id": "MDQ6VXNlcjk5ODIzNjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9982364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xilec", "html_url": "https://github.com/xilec", "followers_url": "https://api.github.com/users/xilec/followers", "following_url": "https://api.github.com/users/xilec/following{/other_user}", "gists_url": "https://api.github.com/users/xilec/gists{/gist_id}", "starred_url": "https://api.github.com/users/xilec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xilec/subscriptions", "organizations_url": "https://api.github.com/users/xilec/orgs", "repos_url": "https://api.github.com/users/xilec/repos", "events_url": "https://api.github.com/users/xilec/events{/privacy}", "received_events_url": "https://api.github.com/users/xilec/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-06-08T17:20:16Z", "updated_at": "2024-07-12T23:33:52Z", "closed_at": "2024-07-12T23:33:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/gyscos/cursive/pulls/792", "html_url": "https://github.com/gyscos/cursive/pull/792", "diff_url": "https://github.com/gyscos/cursive/pull/792.diff", "patch_url": "https://github.com/gyscos/cursive/pull/792.patch", "merged_at": "2024-07-12T23:33:52Z"}, "body": "Actually I don't know goal of this example and would this changes acceptable.\r\n\r\nFor fixing `auto_reveal` behaviour, it needs information about marked cells in model.\r\nWhen `Marked` state moved to border's model. All data about cells state become in the model cells, therefore much easy was remove synchronization cell's state between view and model and cell's state from view and just share cells state from model to view (and draw it).\r\n\r\nThis PR depends on  #790", "reactions": {"url": "https://api.github.com/repos/gyscos/cursive/issues/792/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/gyscos/cursive/issues/792/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/gyscos/cursive/issues/778", "repository_url": "https://api.github.com/repos/gyscos/cursive", "labels_url": "https://api.github.com/repos/gyscos/cursive/issues/778/labels{/name}", "comments_url": "https://api.github.com/repos/gyscos/cursive/issues/778/comments", "events_url": "https://api.github.com/repos/gyscos/cursive/issues/778/events", "html_url": "https://github.com/gyscos/cursive/pull/778", "id": 2237244617, "node_id": "PR_kwDOAhtFyc5sVaCD", "number": 778, "title": "make `cursive` work with `ncurses` v6.0.1", "user": {"login": "correabuscar", "id": 106607441, "node_id": "U_kgDOBlqzUQ", "avatar_url": "https://avatars.githubusercontent.com/u/106607441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/correabuscar", "html_url": "https://github.com/correabuscar", "followers_url": "https://api.github.com/users/correabuscar/followers", "following_url": "https://api.github.com/users/correabuscar/following{/other_user}", "gists_url": "https://api.github.com/users/correabuscar/gists{/gist_id}", "starred_url": "https://api.github.com/users/correabuscar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/correabuscar/subscriptions", "organizations_url": "https://api.github.com/users/correabuscar/orgs", "repos_url": "https://api.github.com/users/correabuscar/repos", "events_url": "https://api.github.com/users/correabuscar/events{/privacy}", "received_events_url": "https://api.github.com/users/correabuscar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2024-04-11T08:59:44Z", "updated_at": "2024-07-12T23:31:59Z", "closed_at": "2024-07-12T23:31:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/gyscos/cursive/pulls/778", "html_url": "https://github.com/gyscos/cursive/pull/778", "diff_url": "https://github.com/gyscos/cursive/pull/778.diff", "patch_url": "https://github.com/gyscos/cursive/pull/778.patch", "merged_at": "2024-07-12T23:31:59Z"}, "body": "<del>but first: `ncurses-rs` needs the changes in this PR: https://github.com/jeaye/ncurses-rs/pull/220  (or ideally the ones in this PR https://github.com/jeaye/ncurses-rs/pull/218 , depending on which PR gets merged I'll (re)test the below)</del>\r\n\r\n`ncurses` crate v 6.0.1 is published and enough.\r\n\r\nHowever `pancurses` doesn't need [these](https://github.com/ihalila/pancurses/pull/93) changes looks like, for `cursive` to work with it, so `0.17` seems good (but `cursive`'s examples are not tested with `0.17`).\r\n\r\nThe following were used successfully:\r\n* `cargo build`\r\n* `cargo test`\r\n* `cargo build --all-features`\r\n* `cargo test --all-features`\r\n* `cargo build --all-targets`\r\n* `cargo test --all-targets`\r\n* `cargo build --all-targets --all-features`\r\n* `cargo test --all-targets --all-features`\r\n* `cargo build --features=\"ncurses-backend\"`\r\n* `cargo test --features=\"ncurses-backend\"`\r\n* `cargo build --features=\"ncurses-backend\" --all-targets`\r\n* `cargo test --features=\"ncurses-backend\" --all-targets`\r\n\r\n... on each of these target environments:\r\n\r\nLegend:\r\n- \u274c = known not to work\r\n- [ ] = untested\r\n- [x] = works\r\n\r\n- [x] Gentoo 2.15 default/linux/amd64/23.0/split-usr/no-multilib (stable) <del>-won't build but it would've if https://github.com/jeaye/ncurses-rs/pull/218 was merged.</del>\r\n  - [ ] some examples tested\r\n  - [ ] all examples tested\r\n- [ ] NixOS (if `PKG_CONFIG_PATH` is set to the dir containing `ncurses.pc` file, or used `nix-shell` command in `cursive` repo dir)\r\n  - [ ] some examples tested\r\n  - [ ] all examples tested\r\n- [ ] Fedora 39\r\n  - [ ] some examples tested\r\n  - [ ] all examples tested\r\n- [ ] Ubuntu Desktop 22.04.4 LTS (needs `libncurses-dev`)\r\n  - [ ] tested to work without `pkg-config` and `pkgconf` installed.\r\n  - [ ] tested to work with `pkg-config` installed.\r\n- [ ] FreeBSD 14.0-RELEASE\r\n  - [ ] some examples tested\r\n  - [ ] all examples tested\r\n- [ ] OpenBSD 7.5 GENERIC\r\n  - [ ] needs one of `LC_CTYPE=en_US.UTF-8` or `LANG=en_US.UTF-8` to be set otherwise it looks as if it doesn't have wide chars support so `cursive` and `pancuses` examples look pretty broken.\r\n- [ ] MacOS Mojave v10.14.6 (with [this](https://github.com/gyscos/cursive/wiki/Install-ncurses#macos))\r\n  - [ ] some examples tested\r\n  - [ ] all examples tested\r\n- [ ] Windows 11 WSL1 [Arch Linux](https://github.com/yuk7/ArchWSL) Linux DESKTOP 4.4.0-22621-Microsoft #2506-Microsoft Fri Jan 01 08:00:00 PST 2016 x86_64 GNU/Linux\r\n  - [ ] some examples tested\r\n  - [ ] all examples tested\r\n\r\n\r\n\r\nTODO:\r\n- [x] compiles(and passes `cargo test`) with `pancurses` (dep) `0.17` but this means it uses `v5.101.0` of `ncurses` crate for `pancurses` and v 6.0.1 for `cursive`, see `cargo tree --all-features | less` (search for `ncurses`)\r\n- [x] compiles(and passes `cargo test`) with `pancurses` `main` branch from github with [this](https://github.com/ihalila/pancurses/pull/93) PR in.\r\n- [ ] does `cursive` need version bump in this PR? ie. `version = \"0.21.0\"` or shall this be left to be done by the repo owner ?!\r\n- [x] use exact `ncurses-rs` version in `Cargo.toml` after it gets published, ie. so it's not lower than that version, because then it would break compilation of `cursive`. Note that `pancurses` doesn't need a version bump (see above), although the examples I'm running are through the PR-ed `pancurses` only.\r\n- [ ] maybe bump `pancurses` in `Cargo.toml` too, after it gets [its PR](https://github.com/ihalila/pancurses/pull/93) for the v6 `ncurses-rs` usage.\r\n- [x] add `cargo test --example select_test -- --nocapture` in addition to the suggested `--bin` which doesn't work.\r\n- [ ] fix all warnings (because they were introduced by this PR / the upgrade to `ncurses-rs` v6)\r\n  - [ ] `warning: attribute should be applied to a foreign function or static` `#[link_name=\"box\"]` `not a foreign function or static`, [this is on `ncurses-rs`](https://github.com/jeaye/ncurses-rs/pull/218#issuecomment-2049572573)\r\n  - [x] `warning: unused `Result` that must be used`, (for all 3 cases) happens due to [`CString::new`](https://doc.rust-lang.org/std/ffi/struct.CString.html#method.new) `This function will return an error if the supplied bytes contain an internal 0 byte.`\r\n    - [x] `ncurses::newterm` `.unwrap()` is safe here due to using `None` as the first arg to [`newterm`](https://github.com/jeaye/ncurses-rs/blob/3aa22bc279e4929e3ab69d49f75a18eda3e431e9/src/lib.rs#L1023-L1029)\r\n    - [x] `ncurses::addstr`\r\n      - [x] `\\0` is already handled by `cursive` (due to PR #786 and followups) so it won't reach the `addstr` call, <del>unless in the future a dep gets updated to include this https://github.com/unicode-rs/unicode-width/commit/4efb1803faa054f1bea3c0457275ad3c8610170b#diff-2ad10836ccce5ac2056d5679cc92449d9ff9094d4ff5c5803f65b5dd1d52ef19R224 </del> this is handled too now.\r\n- [ ] run `cargo clippy` and fix:\r\n  - [x] errors (there were none)\r\n  - [ ] warnings\r\n    - [ ] pre this PR warnings\r\n      - [ ] via `cargo clippy --all-targets`\r\n      - [ ] via `cargo clippy --all-targets --all-features`\r\n- [x] passes `cargo test --features=\"ncurses-backend,ansi,toml\"`\r\n- [x] get rid of old irrelevant commits that this PR introduced, since they're now mostly obsolete due to new `cursive` commits.\r\n- [x] I'm watching(github notifications All Activity) the entire repo for any future-reported breakage, to address it.\r\n- [ ] test that examples compile and run seemingly ok(for  on which OS/distro see above) via `cargo run --features=\"ncurses-backend\" --example NAME`:\r\n  - [x] advanced_user_data\r\n  - [x] ansi via `cargo run --features=\"ncurses-backend,ansi\" --example ansi`\r\n  - [x] autocomplete\r\n  - [x] builder via `cargo run --features=\"ncurses-backend,builder\" --example builder` (but looks better with `crossterm-backend` which is now the default I [noticed](https://github.com/gyscos/cursive/commit/7c676b29f47b6c4e79f8d67ef5509c047f08edd4))\r\n  - [x] colors\r\n  - [x] ctrl_c\r\n  - [x] debug_console\r\n  - [x] dialog\r\n  - [x] edit\r\n  - [x] fixed_layout\r\n  - [x] focus\r\n  - [x] hello_world\r\n  - [x] key_codes\r\n  - [x] linear\r\n  - [x] list_view\r\n  - [x] logs (note: the default aka `crossterm-backend` has no flickering on bottom line which is great)\r\n  - [x] lorem\r\n  - [x] markup\r\n  - [x] menubar\r\n  - [ ] mines\r\n  - [ ] mutation\r\n  - [ ] panels\r\n  - [x] parse\r\n  - [ ] pause\r\n  - [ ] position\r\n  - [ ] progress\r\n  - [ ] radio\r\n  - [ ] refcell_view\r\n  - [ ] scroll\r\n  - [ ] select\r\n  - [x] `select_test` via `cargo test --features=\"ncurses-backend\" --example select_test -- --nocapture`\r\n  - [ ] slider\r\n  - [ ] status\r\n  - [ ] status_bar_ext\r\n  - [ ] stopwatch\r\n  - [ ] tcp_server\r\n  - [ ] terminal_default\r\n  - [ ] text_area\r\n  - [ ] theme\r\n  - [ ] theme_editor\r\n  - [ ] theme_manual\r\n  - [x] themed_view\r\n  - [x] user_data\r\n  - [x] vpv\r\n  - [x] window_title\r\n- [ ] test each of those in [showcases](https://github.com/gyscos/cursive?tab=readme-ov-file#showcases):\r\n  - [ ] [RustyChat](https://github.com/SambaDialloB/RustyChat): Chat client made using Rust and Cursive.\r\n  - [ ] [checkline](https://github.com/sixarm/checkline-rust-crate): Checkbox line picker from stdin to stdout.\r\n  - [ ] [clock-cli](https://github.com/TianyiShi2001/clock-cli-rs): A clock with stopwatch and countdown timer functionalities.\r\n  - [ ] [fui](https://github.com/xliiv/fui): Add CLI & form interface to your program.\r\n  - [ ] [game2048-rs](https://github.com/genieCS/game2048-rs): a tui game2048 using Rust and cursive.\r\n  - [ ] [git-branchless](https://github.com/arxanas/git-branchless): Branchless workflow for Git.\r\n  - [ ] [grin-tui](https://github.com/mimblewimble/grin): Minimal implementation of the MimbleWimble protocol.\r\n  - [ ] [kakikun](https://github.com/file-acomplaint/kakikun): A paint and ASCII art application for the terminal.\r\n  - [ ] [launchk](https://github.com/mach-kernel/launchk): Manage launchd agents and daemons on macOS.\r\n  - [ ] [mythra](https://github.com/deven96/mythra): CLI to search for music.\r\n  - [ ] [ncspot](https://github.com/hrkfdn/ncspot): Cross-platform ncurses Spotify client.\r\n  - [ ] [rbmenu-tui](https://github.com/DevHyperCoder/rbmenu-tui): A TUI for bookmark management.\r\n  - [ ] [retris](https://github.com/genieCS/retris): A simple implementation of the classic tetris game.\r\n  - [ ] [ripasso](https://github.com/cortex/ripasso): A simple password manager written in Rust.\r\n  - [ ] [rusty-man](https://sr.ht/~ireas/rusty-man): Browse rustdoc documentation.\r\n  - [ ] [saci-rs](https://gitlab.com/ihercowitz/saci-rs): Simple API Client Interface.\r\n  - [ ] [so](https://github.com/samtay/so): A terminal interface for Stack Overflow.\r\n  - [ ] [sudoku-tui](https://github.com/TianyiShi2001/sudoku-tui): Play sudoku on the command line.\r\n  - [ ] [tap](https://github.com/timdubbins/tap): An audio player for the terminal with fuzzy finder.\r\n  - [ ] [ttyloop](https://github.com/gamma-delta/ttyloop): Clone of the mobile game Loop.\r\n  - [ ] [wiki-tui](https://github.com/Builditluc/wiki-tui): A simple and easy to use Wikipedia Text User Interface\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/gyscos/cursive/issues/778/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/gyscos/cursive/issues/778/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]