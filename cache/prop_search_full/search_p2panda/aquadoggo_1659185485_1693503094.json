[{"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/539", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/539/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/539/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/539/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/539", "id": 1873432923, "node_id": "PR_kwDOEhY-tc5ZIJp9", "number": 539, "title": "Improve log level user interface", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-30T10:56:55Z", "updated_at": "2023-08-30T13:50:22Z", "closed_at": "2023-08-30T13:50:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/539", "html_url": "https://github.com/p2panda/aquadoggo/pull/539", "diff_url": "https://github.com/p2panda/aquadoggo/pull/539.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/539.patch", "merged_at": "2023-08-30T13:50:19Z"}, "body": "```bash\r\n# Set aquadoggo=INFO\r\nLOG_LEVEL=info aquadoggo\r\n\r\n# .. same, but via command line argument\r\naquadoggo --log-level info\r\n\r\n# Set _all_ to INFO\r\naquadoggo --log-level \"=info\"\r\n\r\n# ... etc.\r\naquadoggo --log-level \"aquadoggo=INFO,libp2p=DEBUG\"\r\n\r\n# One can also set the value in config.toml (haven't included it in the template since using it there seems unlikely)\r\n```\r\n\r\nCloses: #537, #536, #534 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/539/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/538", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/538/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/538/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/538/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/538", "id": 1873421004, "node_id": "PR_kwDOEhY-tc5ZIHDz", "number": 538, "title": "Move deserialization into `PeerMessage` to distinct variants correctly", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-30T10:48:43Z", "updated_at": "2023-08-30T11:42:45Z", "closed_at": "2023-08-30T11:42:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/538", "html_url": "https://github.com/p2panda/aquadoggo/pull/538", "diff_url": "https://github.com/p2panda/aquadoggo/pull/538.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/538.patch", "merged_at": "2023-08-30T11:42:39Z"}, "body": "This fixes an issue where variants of `PeerMessage` have not been correctly determined during deserialization.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] ~~Link this PR to any issues it closes~~\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/538/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/532", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/532/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/532/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/532/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/532", "id": 1867278485, "node_id": "PR_kwDOEhY-tc5Yzrdw", "number": 532, "title": "Prepare README for v0.5.0 release", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2023-08-25T15:47:00Z", "updated_at": "2023-08-31T16:54:08Z", "closed_at": "2023-08-31T15:55:59Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/532", "html_url": "https://github.com/p2panda/aquadoggo/pull/532", "diff_url": "https://github.com/p2panda/aquadoggo/pull/532.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/532.patch", "merged_at": "2023-08-31T15:55:59Z"}, "body": "Closes: https://github.com/p2panda/aquadoggo/issues/526", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/532/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/528", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/528/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/528/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/528/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/528", "id": 1867071393, "node_id": "PR_kwDOEhY-tc5Yy-PZ", "number": 528, "title": "Improve consistency and documentation of configuration API", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-25T13:35:16Z", "updated_at": "2023-08-25T14:16:45Z", "closed_at": "2023-08-25T14:16:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/528", "html_url": "https://github.com/p2panda/aquadoggo/pull/528", "diff_url": "https://github.com/p2panda/aquadoggo/pull/528.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/528.patch", "merged_at": "2023-08-25T14:16:42Z"}, "body": "* Check consistency (code & text) across all places where we have configurations\r\n* Remove wildcards for block list config\r\n* Fix `value_name` in `clap` setup\r\n* Improve documentation\r\n* Do not connect to other relays when relay mode is enabled + give a warning\r\n* Show private key configuration on startup\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~~Add tests that cover your changes~~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] ~~Link this PR to any issues it closes~~\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/528/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/525", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/525/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/525/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/525/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/525", "id": 1866661578, "node_id": "PR_kwDOEhY-tc5YxkEJ", "number": 525, "title": "De-duplicate peer connections during replication session updates", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-25T09:09:01Z", "updated_at": "2023-08-25T11:25:24Z", "closed_at": "2023-08-25T11:12:53Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/525", "html_url": "https://github.com/p2panda/aquadoggo/pull/525", "diff_url": "https://github.com/p2panda/aquadoggo/pull/525.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/525.patch", "merged_at": "2023-08-25T11:12:53Z"}, "body": "Because peers listen on multiple local network addresses and often on discovery dial each other concurrently, it's very hard to set a \"one connection per-peer\" limit on established connections (we have managed to limit it to max two connections now, one as listener, one as dialer). We can however filter out any duplicate connections when choosing peers to initiate replication sessions with.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/525/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/525/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/524", "id": 1866055124, "node_id": "PR_kwDOEhY-tc5YvfbB", "number": 524, "title": "Networking: multiple relays, dial known nodes, allow&block-list", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-25T00:19:44Z", "updated_at": "2023-08-25T11:25:25Z", "closed_at": "2023-08-25T11:12:31Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/524", "html_url": "https://github.com/p2panda/aquadoggo/pull/524", "diff_url": "https://github.com/p2panda/aquadoggo/pull/524.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/524.patch", "merged_at": "2023-08-25T11:12:31Z"}, "body": "- [x] client nodes don't need to listen on tcp\r\n- [x] handle connecting to multiple relay nodes (w/ config changes)\r\n- [x] dial known direct nodes at startup\r\n- [x] introduce allow-list of trusted peers\r\n- [x] introduce block-list of un-trusted peers\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/524/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/519", "id": 1862195780, "node_id": "PR_kwDOEhY-tc5YicUz", "number": 519, "title": "Improved configuration API with TOML file", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-08-22T20:55:18Z", "updated_at": "2023-08-25T11:25:16Z", "closed_at": "2023-08-25T10:47:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/519", "html_url": "https://github.com/p2panda/aquadoggo/pull/519", "diff_url": "https://github.com/p2panda/aquadoggo/pull/519.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/519.patch", "merged_at": "2023-08-25T10:47:42Z"}, "body": "Closes #511, #513, #516, #510\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~~Add tests that cover your changes~~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/519/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/515", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/515/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/515/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/515/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/515", "id": 1858070500, "node_id": "PR_kwDOEhY-tc5YUawy", "number": 515, "title": "Announce supported schema ids in network before replication", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-20T10:18:37Z", "updated_at": "2023-08-25T10:15:30Z", "closed_at": "2023-08-25T10:15:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/515", "html_url": "https://github.com/p2panda/aquadoggo/pull/515", "diff_url": "https://github.com/p2panda/aquadoggo/pull/515.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/515.patch", "merged_at": "2023-08-25T10:15:27Z"}, "body": "This PR introduces our concept of \"Announcements\" (read more here: https://p2panda.org/specification/replication/#1-announcement).\r\n\r\nThere's a specification change involved: We need to give `Announce` messages their own message type. I've took `0` for them and changed the ones for `SyncRequest`, `SyncDone` and `Entry` as well. Related PR: https://github.com/p2panda/handbook/pull/290\r\n\r\nCloses #405 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/515/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/502", "id": 1855453468, "node_id": "PR_kwDOEhY-tc5YLqw5", "number": 502, "title": "Fix relayed connections, add DCUtR and reduce CLI args", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-08-17T17:51:13Z", "updated_at": "2023-08-25T11:25:17Z", "closed_at": "2023-08-22T19:41:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/502", "html_url": "https://github.com/p2panda/aquadoggo/pull/502", "diff_url": "https://github.com/p2panda/aquadoggo/pull/502.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/502.patch", "merged_at": "2023-08-22T19:41:28Z"}, "body": "I had a few goals with this PR:\r\n\r\n1. Troubleshoot and get relayed connection establishment to be more reliable\r\n2. Reduce the number of network related CLI args \r\n3. Integrate and test if DCUtR now works\r\n4. Choose random QUIC and HTTP ports when they're taken\r\n\r\nThis all came with a general refactor, especially of the event loop, which is hopefully now a little easier to follow. The answer to 1. seems to have been to introduce a kind of handshake phase to the initiation process if a relay address has been given. This waits on identify messages to/from the relay, and successful listening on the circuit address before starting any other processes. Good news is, with this, relayed connections seem to be very quick and reliable :star:\r\n\r\nI introduced the DCUtR behaviour but I haven't been able to observe if it works yet, this could just be my particular NAT setup not allowing holepunching though. There are upgrade requests passing back and forth, but the upgrade itself fails. This doesn't seem to have any adverse effect on the existing relayed connection though.\r\n\r\nLastly, I removed the `dial` behaviour which was responsible for redialing peers if they disconnect unexpectedly. This was partly as I thought it might be effecting the DCUtR processes, and partly because I wanted to in general reduce complicating the connection logic at all. It may come back later, lets see (also connections seem pretty reliable anyway).  \r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/423 and https://github.com/p2panda/aquadoggo/issues/361\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/reactions", "total_count": 3, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/502/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/496", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/496/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/496/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/496/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/496", "id": 1843155280, "node_id": "PR_kwDOEhY-tc5XiCOG", "number": 496, "title": "\"prune\" materializer task", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-09T12:41:48Z", "updated_at": "2023-08-12T22:57:31Z", "closed_at": "2023-08-11T22:38:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/496", "html_url": "https://github.com/p2panda/aquadoggo/pull/496", "diff_url": "https://github.com/p2panda/aquadoggo/pull/496.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/496.patch", "merged_at": "2023-08-11T22:38:43Z"}, "body": "Introduces a \"prune\" materialization task which:\r\n- is issued whenever a \"reduce\" task completes when the input was a `DocumentId` (this is a new current view)\r\n- the \"prune\" task looks at the updated document and deletes any rows from the `document_views` and `document_view_fields` table where: they are not the current view AND they are not targeted from a pinned relation of any other document\r\n\r\nI also had to make some changes to `prune_document_views` method which was introduced onto the store in a previous PR cos it was not doing what it's supposed to....\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/496/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/496/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/493", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/493/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/493/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/493/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/493", "id": 1841638745, "node_id": "PR_kwDOEhY-tc5Xc3LF", "number": 493, "title": "\"blob\" materializer task", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-08T16:29:48Z", "updated_at": "2023-08-31T18:04:02Z", "closed_at": "2023-08-22T13:47:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/493", "html_url": "https://github.com/p2panda/aquadoggo/pull/493", "diff_url": "https://github.com/p2panda/aquadoggo/pull/493.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/493.patch", "merged_at": "2023-08-22T13:47:55Z"}, "body": "Introduces a new \"blob\" task to the materializer service which:\r\n- is issued once a dependency task finishes on a `blob_v1` or `blob_piece_v1` document\r\n- if the document in question is part of a completed blob (all dependencies met, this isn't always true when a `blob_piece_v1` document triggered the \"blob\" task) then we persist the blob view to the filesystem at the expected path `../<blob_document_id>/<blob_view_id>`\r\n- we also create a symlink from the expected path to the blob when served by it's document id ../documents/<blob_document_id>`.\r\n  \r\n## Next steps\r\n\r\n- would be good to have a `blob` module which contains all `io` stuff \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/493/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/491", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/491/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/491/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/491/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/491", "id": 1841240467, "node_id": "PR_kwDOEhY-tc5XbgmM", "number": 491, "title": "Enable deletion of dangling `document_views` and related `document_view_fields` from db ", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-08T12:43:51Z", "updated_at": "2023-08-17T12:48:08Z", "closed_at": "2023-08-09T09:36:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/491", "html_url": "https://github.com/p2panda/aquadoggo/pull/491", "diff_url": "https://github.com/p2panda/aquadoggo/pull/491.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/491.patch", "merged_at": "2023-08-09T09:36:48Z"}, "body": "- [x] add fk relation with cascading delete between `document_view_fields` and `document_views`\r\n- [x] introduce method to `DocumentStore` which takes a `DocumentId` and deletes any unpinned+not current views  \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/491/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/489", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/489/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/489/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/489/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/489", "id": 1839875275, "node_id": "PR_kwDOEhY-tc5XW4mW", "number": 489, "title": "Fix: only over-write `http_port` when cli arg is passed", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-07T16:54:31Z", "updated_at": "2023-08-09T09:38:38Z", "closed_at": "2023-08-07T17:06:30Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/489", "html_url": "https://github.com/p2panda/aquadoggo/pull/489", "diff_url": "https://github.com/p2panda/aquadoggo/pull/489.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/489.patch", "merged_at": "2023-08-07T17:06:30Z"}, "body": "## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/489/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/487", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/487/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/487/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/487/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/487", "id": 1839377767, "node_id": "PR_kwDOEhY-tc5XVNK2", "number": 487, "title": "`aquaddogo` configured to support any schema by default", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-07T12:43:35Z", "updated_at": "2023-08-07T21:49:59Z", "closed_at": "2023-08-07T21:43:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/487", "html_url": "https://github.com/p2panda/aquadoggo/pull/487", "diff_url": "https://github.com/p2panda/aquadoggo/pull/487.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/487.patch", "merged_at": "2023-08-07T21:43:50Z"}, "body": "We recently introduced the ability to restrict a nodes behaviour with `supported_schema_ids`, configurable via a `config.toml` file https://github.com/p2panda/aquadoggo/pull/473. The default behaviour when a config file isn't found is for a node to not support any schema.\r\n\r\nThis is a rather strict default behaviour, and although maybe what you expect in a production setting, for development it adds a required steps which new users need to take when exploring `aquadoggo` (create `config.toml`, update it whenever new schema are created, make sure other local nodes support the same schema). \r\n\r\nThis PR makes changes in order to prioritise the \"new user experience\", the result being that if no `config.toml` is found, the node is configured to support _any_ schema. This means that a fresh node will by default replicate all data with any other nodes it discovers, and offer publish and query endpoints for any new schema it receives. No configuration of supported schema required :star2:  \r\n\r\nCreating a `config.toml` file will restrict this behaviour.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/487/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/487/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/484", "id": 1836816158, "node_id": "PR_kwDOEhY-tc5XM4Sn", "number": 484, "title": "`BlobStore` for retrieving raw blob data from the db", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-04T14:08:16Z", "updated_at": "2023-08-17T12:48:06Z", "closed_at": "2023-08-09T09:32:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/484", "html_url": "https://github.com/p2panda/aquadoggo/pull/484", "diff_url": "https://github.com/p2panda/aquadoggo/pull/484.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/484.patch", "merged_at": "2023-08-09T09:32:29Z"}, "body": "_caveat: I'm still on the fence about whether we want to store blobs like this (all pieces as their own document) but I wanted to try out this approach first as a) it fits so smoothly in with our current documents system b) it's easy to do and the api won't really change if we take a different approach to storing blobs anyway. So, this is the minimal-changes approach, and we can iterate from here :+1:_ \r\n\r\nIntroduces `BlobStore` with one method: `get_blob`.\r\n\r\nUnder the hood this:\r\n- gets the target document by id\r\n- checks it's schema id is `blob_v1`\r\n- fetches all related pieces in it's `pieces` field\r\n- validates that all pieces have been collected\r\n- combines them into one string\r\n- validates that the length matches the claimed length on the blob document\r\n- returns this string\r\n\r\nThis is done without introducing a new `Blob` type into `p2panda-rs` (as was the approach with `Schema`, our other system schema type). I actually think this works ok for now, but interested in any thoughts on this.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/484/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/483", "id": 1836733952, "node_id": "PR_kwDOEhY-tc5XMmSk", "number": 483, "title": "Add static file server to `http` service", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-04T13:18:49Z", "updated_at": "2023-08-17T12:48:09Z", "closed_at": "2023-08-09T09:37:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/483", "html_url": "https://github.com/p2panda/aquadoggo/pull/483", "diff_url": "https://github.com/p2panda/aquadoggo/pull/483.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/483.patch", "merged_at": "2023-08-09T09:37:41Z"}, "body": "Use https://docs.rs/tower-http/latest/tower_http/services/struct.ServeDir.html# to add a static file server to the http service which serves content from `$HOME/.local/share/aquadoggo/blobs` by default.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/483/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/480", "id": 1833912032, "node_id": "PR_kwDOEhY-tc5XDJOF", "number": 480, "title": "Add static file server to `http` service", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-02T21:13:45Z", "updated_at": "2023-08-04T13:09:47Z", "closed_at": "2023-08-04T13:09:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": true, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/480", "html_url": "https://github.com/p2panda/aquadoggo/pull/480", "diff_url": "https://github.com/p2panda/aquadoggo/pull/480.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/480.patch", "merged_at": "2023-08-04T13:09:47Z"}, "body": "Use https://docs.rs/tower-http/latest/tower_http/services/struct.ServeDir.html# to add a static file server to the http service which serves content from `$HOME/.local/share/aquadoggo/blobs` by default.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [ ] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [ ] Link this PR to any issues it closes\r\n- [ ] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/480/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/475", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/475/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/475/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/475/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/475", "id": 1825290760, "node_id": "PR_kwDOEhY-tc5WmFHn", "number": 475, "title": "`mdns` and `autonat` disabled by default", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-27T22:07:48Z", "updated_at": "2023-07-27T22:43:01Z", "closed_at": "2023-07-27T22:43:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/475", "html_url": "https://github.com/p2panda/aquadoggo/pull/475", "diff_url": "https://github.com/p2panda/aquadoggo/pull/475.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/475.patch", "merged_at": "2023-07-27T22:43:01Z"}, "body": "## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/475/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/474", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/474/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/474/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/474/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/474", "id": 1825258105, "node_id": "PR_kwDOEhY-tc5Wl-AF", "number": 474, "title": "On document_views insertion conflict `DO NOTHING`", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-27T21:33:04Z", "updated_at": "2023-08-09T09:38:49Z", "closed_at": "2023-07-27T21:53:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/474", "html_url": "https://github.com/p2panda/aquadoggo/pull/474", "diff_url": "https://github.com/p2panda/aquadoggo/pull/474.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/474.patch", "merged_at": "2023-07-27T21:53:38Z"}, "body": "## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/474/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/474/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/473", "id": 1825249643, "node_id": "PR_kwDOEhY-tc5Wl8K6", "number": 473, "title": "Parse supported schema ids from `config.toml` file", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-27T21:24:07Z", "updated_at": "2023-08-09T09:38:54Z", "closed_at": "2023-07-27T21:42:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/473", "html_url": "https://github.com/p2panda/aquadoggo/pull/473", "diff_url": "https://github.com/p2panda/aquadoggo/pull/473.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/473.patch", "merged_at": "2023-07-27T21:42:13Z"}, "body": "Describe your changes here.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/473/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/472", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/472/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/472/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/472/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/472", "id": 1824863338, "node_id": "PR_kwDOEhY-tc5Wkm2Y", "number": 472, "title": "Don't update or announce an update in schema provider if a schema with this id exists already", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-27T17:31:39Z", "updated_at": "2023-07-27T21:00:16Z", "closed_at": "2023-07-27T21:00:13Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/472", "html_url": "https://github.com/p2panda/aquadoggo/pull/472", "diff_url": "https://github.com/p2panda/aquadoggo/pull/472.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/472.patch", "merged_at": "2023-07-27T21:00:13Z"}, "body": "Don't update or announce an update in schema provider if a schema with this id exists already.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/472/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/472/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/471", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/471/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/471/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/471/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/471", "id": 1824204434, "node_id": "PR_kwDOEhY-tc5WiYFe", "number": 471, "title": "Correct selection of comparison field during pagination", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-27T11:49:04Z", "updated_at": "2023-07-27T16:19:23Z", "closed_at": "2023-07-27T15:40:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/471", "html_url": "https://github.com/p2panda/aquadoggo/pull/471", "diff_url": "https://github.com/p2panda/aquadoggo/pull/471.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/471.patch", "merged_at": "2023-07-27T15:40:50Z"}, "body": "Closes: https://github.com/p2panda/aquadoggo/issues/470\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- ~~Add tests that cover your changes~~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/471/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/469", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/469/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/469/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/469/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/469", "id": 1823241351, "node_id": "PR_kwDOEhY-tc5WfIr9", "number": 469, "title": "Reject `SyncRequest` containing unsupported `TargetSet`", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-26T21:55:43Z", "updated_at": "2023-07-27T16:19:41Z", "closed_at": "2023-07-27T16:00:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/469", "html_url": "https://github.com/p2panda/aquadoggo/pull/469", "diff_url": "https://github.com/p2panda/aquadoggo/pull/469.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/469.patch", "merged_at": "2023-07-27T16:00:41Z"}, "body": "- [x] Accept list of schema ids in `cli`\r\n- [x] Add `supported_schema` field to node config\r\n- [x] Optionally set `supported_schema` on `SchemaProvider` which if set, is used to check schema added to the provider are supported\r\n- [x] Only add supported schema to the GraphQL schema\r\n- [x] Add `dynamic_schema` flag to node config if you want your node to dynamically support any schema (for programmatic use of `aquadoggo` not configurable via the cli)   \r\n- [x] Introduce `IngestError::SchemaNotFound` for when a schema wasn't materialized yet, but we do support it. This error is not elevated out of the replication manager and doesn't close the session or connection with the peer.\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/469/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/469/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/468", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/468/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/468/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/468/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/468", "id": 1822947577, "node_id": "PR_kwDOEhY-tc5WeIVX", "number": 468, "title": "Do nothing on log insertion conflict", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-26T18:30:14Z", "updated_at": "2023-07-27T15:38:42Z", "closed_at": "2023-07-26T19:22:06Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/468", "html_url": "https://github.com/p2panda/aquadoggo/pull/468", "diff_url": "https://github.com/p2panda/aquadoggo/pull/468.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/468.patch", "merged_at": "2023-07-26T19:22:06Z"}, "body": "closes: #462 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/468/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/468/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/467", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/467/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/467/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/467/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/467", "id": 1822923135, "node_id": "PR_kwDOEhY-tc5WeDHG", "number": 467, "title": "Reduce chatty warnings in network and replication services", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-07-26T18:11:37Z", "updated_at": "2023-07-27T15:38:44Z", "closed_at": "2023-07-26T18:19:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/467", "html_url": "https://github.com/p2panda/aquadoggo/pull/467", "diff_url": "https://github.com/p2panda/aquadoggo/pull/467.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/467.patch", "merged_at": "2023-07-26T18:19:19Z"}, "body": "- [x] don't `warn!` (just `debug!`) when a session wasn't found for a replication message, this has normally been followed by the actual error which closed the session\r\n- [x] reduce most logging which we are bubbling up from `libp2p` in the network service to `debug!` (only `warn!` when it's a connection closure event that we are explicitly responding to in panda land) \r\n- [x] don't `warn` when dial attempts fail, this is normally because there is an existing dial attempt in progress, it's not an actual connection error, these get picked up elsewhere.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/467/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/467/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/463", "id": 1822331005, "node_id": "PR_kwDOEhY-tc5WcDLf", "number": 463, "title": "Perform peer sampling before initiating replication requests", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-26T12:38:59Z", "updated_at": "2023-07-27T09:00:08Z", "closed_at": "2023-07-27T09:00:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/463", "html_url": "https://github.com/p2panda/aquadoggo/pull/463", "diff_url": "https://github.com/p2panda/aquadoggo/pull/463.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/463.patch", "merged_at": "2023-07-27T09:00:04Z"}, "body": "Take a random sample of the available peers in the replication service and only initiate replication sessions with them.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/463/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/461", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/461/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/461/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/461/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/461", "id": 1820652922, "node_id": "PR_kwDOEhY-tc5WWbnq", "number": 461, "title": "Don't check affected rows when deleting task", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-25T15:59:39Z", "updated_at": "2023-07-26T08:47:12Z", "closed_at": "2023-07-26T08:47:09Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/461", "html_url": "https://github.com/p2panda/aquadoggo/pull/461", "diff_url": "https://github.com/p2panda/aquadoggo/pull/461.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/461.patch", "merged_at": "2023-07-26T08:47:09Z"}, "body": "closes: #458 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/461/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/460", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/460/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/460/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/460/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/460", "id": 1818786328, "node_id": "PR_kwDOEhY-tc5WQE99", "number": 460, "title": "Do not critically fail when view does not exist", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-24T16:51:09Z", "updated_at": "2023-07-26T11:01:20Z", "closed_at": "2023-07-25T17:49:05Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/460", "html_url": "https://github.com/p2panda/aquadoggo/pull/460", "diff_url": "https://github.com/p2panda/aquadoggo/pull/460.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/460.patch", "merged_at": "2023-07-25T17:49:05Z"}, "body": "Closes #457 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/460/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/460/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/455", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/455/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/455/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/455/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/455", "id": 1814253483, "node_id": "PR_kwDOEhY-tc5WBCRO", "number": 455, "title": "Update CI actions", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-20T15:21:46Z", "updated_at": "2023-07-20T16:07:55Z", "closed_at": "2023-07-20T16:07:52Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/455", "html_url": "https://github.com/p2panda/aquadoggo/pull/455", "diff_url": "https://github.com/p2panda/aquadoggo/pull/455.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/455.patch", "merged_at": "2023-07-20T16:07:52Z"}, "body": "* Remove unreliable tarpaulin and use source-based code coverage and grcov for coverage\r\n* Use https://github.com/moonrepo/setup-rust instead of unmaintained `actions-rs`, this action also handles caching internally for us\r\n* Separate build task from test\r\n\r\nCloses https://github.com/p2panda/aquadoggo/issues/453\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/455/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/451", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/451/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/451/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/451/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/451", "id": 1805059818, "node_id": "PR_kwDOEhY-tc5Vh5NO", "number": 451, "title": "Fix composing of circuit relay address", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-14T15:22:06Z", "updated_at": "2023-07-18T14:55:37Z", "closed_at": "2023-07-14T15:27:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/451", "html_url": "https://github.com/p2panda/aquadoggo/pull/451", "diff_url": "https://github.com/p2panda/aquadoggo/pull/451.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/451.patch", "merged_at": "2023-07-14T15:27:02Z"}, "body": "Fixes: #449 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/451/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/450", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/450/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/450/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/450/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/450", "id": 1805040999, "node_id": "PR_kwDOEhY-tc5Vh1IW", "number": 450, "title": "Remove `quick_commit` from materialization service", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-14T15:08:50Z", "updated_at": "2023-07-18T14:55:35Z", "closed_at": "2023-07-14T15:28:19Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/450", "html_url": "https://github.com/p2panda/aquadoggo/pull/450", "diff_url": "https://github.com/p2panda/aquadoggo/pull/450.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/450.patch", "merged_at": "2023-07-14T15:28:19Z"}, "body": "This is a stop-gap solution to #448 \r\n\r\nEventually we want to move `quick_commit` logic into the `reduce` tasks, but that takes a little bit more thought, and as it is only an optimisation in any case we can do without it for now.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [X] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/450/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/444", "id": 1802365932, "node_id": "PR_kwDOEhY-tc5VYrLZ", "number": 444, "title": "Implement `dialer` behaviour", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-13T07:17:43Z", "updated_at": "2023-07-14T08:02:23Z", "closed_at": "2023-07-14T08:02:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/444", "html_url": "https://github.com/p2panda/aquadoggo/pull/444", "diff_url": "https://github.com/p2panda/aquadoggo/pull/444.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/444.patch", "merged_at": "2023-07-14T08:02:20Z"}, "body": "Introduce a `Dialer` behaviour which:\r\n\r\n- handles new dial attempts for known peers or peers which disconnect unexpectedly\r\n- when a dial attempt fails retries according to a configured backoff schedule and retry limit\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~ I'm struggling to find a meaningful way to test this, open to any ideas, otherwise it can go in without tests..... (I tested locally and expected behaviour occurs)\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/444/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/442", "id": 1795271930, "node_id": "PR_kwDOEhY-tc5VAiWx", "number": 442, "title": "Replicate operations in topo order", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-09T07:03:38Z", "updated_at": "2023-07-09T07:17:32Z", "closed_at": "2023-07-09T07:17:25Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/442", "html_url": "https://github.com/p2panda/aquadoggo/pull/442", "diff_url": "https://github.com/p2panda/aquadoggo/pull/442.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/442.patch", "merged_at": "2023-07-09T07:17:25Z"}, "body": "We want to validate all operations which arrive at a node via replication before persisting them to the node and performing materialization. In order to do this the document they are part of needs to be in it's most recent state before the in-coming operation was published. This can be achieved if entries are ordered appropriately _before_ they are sent to a remote node in replication request responses.\r\n\r\nWhen preparing entries response messages in `LogHeighStrategy` they should be grouped by document id and then ordered by `sorted_index` of their operations. This way a remote can simply use `publish` to ingest all arriving entries as they arrive in their topologically sorted order and can be directly validated and added to the document.\r\n\r\nWhen consuming entries in `Ingest` we should use the `publish` method provided by `p2panda-rs`, this already performs all required validation.\r\n\r\n- [x] Use `publish` to ingest entries arriving on a node via replication\r\n- [x] Order entries correctly before sending them to a node during replication\r\n- [x] Tests\r\n\r\nThese changes mean that we now require that authors don't publish concurrently to the same document with the same key pair, this needs adding to the spec: https://github.com/p2panda/handbook/issues/284\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/442/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/440", "id": 1793020509, "node_id": "PR_kwDOEhY-tc5U46j8", "number": 440, "title": "Use fork of `asynchronous-codec` ", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-07-07T08:05:47Z", "updated_at": "2023-07-07T11:31:07Z", "closed_at": "2023-07-07T11:31:03Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/440", "html_url": "https://github.com/p2panda/aquadoggo/pull/440", "diff_url": "https://github.com/p2panda/aquadoggo/pull/440.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/440.patch", "merged_at": "2023-07-07T11:31:03Z"}, "body": "We forked `asynchronous-codec` in order to introduce a change which fixes a bug we have (being discussed [here](https://github.com/mxinden/asynchronous-codec/issues/6).\r\n\r\nIt would be nice to have a test for this, but I've never seen it occur in tests before and am not sure how we could re-produce it.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] ~Add tests that cover your changes~\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/440/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/439", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/439/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/439/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/439/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/439", "id": 1792880743, "node_id": "PR_kwDOEhY-tc5U4c2E", "number": 439, "title": "Ingest check for duplicate entries", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-07T06:25:54Z", "updated_at": "2023-07-07T11:29:22Z", "closed_at": "2023-07-07T11:29:18Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/439", "html_url": "https://github.com/p2panda/aquadoggo/pull/439", "diff_url": "https://github.com/p2panda/aquadoggo/pull/439.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/439.patch", "merged_at": "2023-07-07T11:29:18Z"}, "body": "Check if an entry already exists on the node before consuming in `Ingest`. If the entry is present, don't ingest it again and don't prematurely close the sync session.\r\n\r\nThis is to account for the case where the same entry is sent by two different peers at the same time.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/439/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/438", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/438/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/438/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/438/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/438", "id": 1792880150, "node_id": "PR_kwDOEhY-tc5U4ct8", "number": 438, "title": "Maintain sorted operation indexes", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-07-07T06:25:28Z", "updated_at": "2023-07-07T12:07:21Z", "closed_at": "2023-07-07T12:04:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/438", "html_url": "https://github.com/p2panda/aquadoggo/pull/438", "diff_url": "https://github.com/p2panda/aquadoggo/pull/438.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/438.patch", "merged_at": "2023-07-07T12:04:17Z"}, "body": "We want to persist and maintain sorted position indexes for all operations which have been materialized into a document. This index is the operations position once topological sorting has occurred and can be understood as the `sorted_index` of a particular operation, or also the documents \"depth\" at that point in it's history.\r\n\r\nThis is done by introducing the following:\r\n- add a `sorted_index` column to the `operations_v1` table\r\n- update all operation models and data types accordingly\r\n- introduce a `update_operation_index` method to the `OperationStore`\r\n- in a `reduce` task update the `sorted_index` of all operations in a document\r\n\r\nNote, there is a period of time when an operation has been inserted into the store, but it's `sorted_index` is `None` because materialization has not been performed yet. As we have a \"retry\" system already in-place to account for a node shutting down unexpectedly before tasks could be completed, then we can be confident all operations will be processed and have their `sorted_index` set eventually.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/438/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/438/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/434", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/434/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/434/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/434/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/434", "id": 1786358939, "node_id": "PR_kwDOEhY-tc5UiSjL", "number": 434, "title": "Reverse lookup for pinned relations in dependency task", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-07-03T15:04:56Z", "updated_at": "2023-07-05T08:38:14Z", "closed_at": "2023-07-05T08:38:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/434", "html_url": "https://github.com/p2panda/aquadoggo/pull/434", "diff_url": "https://github.com/p2panda/aquadoggo/pull/434.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/434.patch", "merged_at": "2023-07-05T08:38:11Z"}, "body": "See diagram for more details: https://whimsical.com/materializer-DbV6FUs51pqhouKff7Q546\r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/418 and https://github.com/p2panda/aquadoggo/issues/411 and https://github.com/p2panda/aquadoggo/issues/152\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/434/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/434/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/429", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/429/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/429/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/429/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/429", "id": 1779367138, "node_id": "PR_kwDOEhY-tc5UKgAV", "number": 429, "title": "Make `TaskInput` an enum and other minor clean ups in materialiser", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-28T17:12:08Z", "updated_at": "2023-07-03T08:28:30Z", "closed_at": "2023-07-03T02:31:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/429", "html_url": "https://github.com/p2panda/aquadoggo/pull/429", "diff_url": "https://github.com/p2panda/aquadoggo/pull/429.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/429.patch", "merged_at": "2023-07-03T02:31:34Z"}, "body": "This PR cleans up and refactors the materialisation logic slightly:\r\n\r\n* Make `TaskInput` an enum\r\n* Remove TODO for graceful shutdown, not sure we want this actually .. #164 \r\n* Fix \"task failure\" message in logs #264 \r\n* A bunch of minor documentation clean ups and typo fixes\r\n* Make some logging less verbose\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/429/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/429/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/425", "id": 1776137725, "node_id": "PR_kwDOEhY-tc5T_enz", "number": 425, "title": "Use `libp2p` `v0.52.0`", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-27T05:48:32Z", "updated_at": "2023-07-07T12:07:37Z", "closed_at": "2023-07-01T10:47:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/425", "html_url": "https://github.com/p2panda/aquadoggo/pull/425", "diff_url": "https://github.com/p2panda/aquadoggo/pull/425.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/425.patch", "merged_at": "2023-07-01T10:47:07Z"}, "body": "## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/425/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/420", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/420/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/420/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/420/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/420", "id": 1767979877, "node_id": "PR_kwDOEhY-tc5TkWwG", "number": 420, "title": "Fix race condition when check for existing view ids was too early", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-21T16:30:43Z", "updated_at": "2023-06-22T06:22:40Z", "closed_at": "2023-06-22T03:31:49Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/420", "html_url": "https://github.com/p2panda/aquadoggo/pull/420", "diff_url": "https://github.com/p2panda/aquadoggo/pull/420.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/420.patch", "merged_at": "2023-06-22T03:31:49Z"}, "body": "This fixes a race condition where the check for duplicate document view ids in the database was too early.\r\n\r\nThe `reduce` task started, checked if a view id existed, if not, it happily went on, while another task could have created the view id in the meantime before we come to the point where we created the view id (again). Probably because of the ON CONFLICT clause we didn't notice that issue before.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/420/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/417", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/417/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/417/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/417/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/417", "id": 1767507530, "node_id": "PR_kwDOEhY-tc5TivZP", "number": 417, "title": "CI: Temporary workaround for Rust compiler bug", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-21T12:36:06Z", "updated_at": "2023-06-21T12:54:45Z", "closed_at": "2023-06-21T12:54:42Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/417", "html_url": "https://github.com/p2panda/aquadoggo/pull/417", "diff_url": "https://github.com/p2panda/aquadoggo/pull/417.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/417.patch", "merged_at": "2023-06-21T12:54:42Z"}, "body": "Related issue: https://github.com/p2panda/aquadoggo/issues/414", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/417/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/413", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/413/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/413/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/413/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/413", "id": 1766504561, "node_id": "PR_kwDOEhY-tc5TfdOk", "number": 413, "title": "Fix early document view insertion", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-06-21T01:16:59Z", "updated_at": "2023-06-21T12:31:21Z", "closed_at": "2023-06-21T12:31:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/413", "html_url": "https://github.com/p2panda/aquadoggo/pull/413", "diff_url": "https://github.com/p2panda/aquadoggo/pull/413.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/413.patch", "merged_at": "2023-06-21T12:31:17Z"}, "body": "Solution for #407 which implements checking a document has been materialized in a reduce task before inserting a document view into the store. If the document does not exist yet, the task is re-issued, assuming that the document reduce task is already in the queue somewhere.\r\n\r\nFor safety, and for assisting in identifying potential future bugs, I also introduced a foreign relation constraint onto the `document_id` column in `document_views` table. We don't rely on this being hit in our code though. \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/413/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/413/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/412", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/412/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/412/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/412/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/412", "id": 1765758610, "node_id": "PR_kwDOEhY-tc5TdQLR", "number": 412, "title": "Fix cursor pagination over ordered queries", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-06-20T16:34:53Z", "updated_at": "2023-07-07T12:07:19Z", "closed_at": "2023-06-23T01:01:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/412", "html_url": "https://github.com/p2panda/aquadoggo/pull/412", "diff_url": "https://github.com/p2panda/aquadoggo/pull/412.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/412.patch", "merged_at": "2023-06-23T01:01:48Z"}, "body": "We paginate with the help of a unique `cursor`, there is one per document field.\r\n\r\n```\r\nDocument {\r\n  username <- Cursor #31c\r\n  timestamp <- Cursor #21a\r\n  message <- Cursor #d32\r\n}\r\n\r\nDocument {\r\n  username <- Cursor #a51\r\n  ... and so on\r\n}\r\n```\r\n\r\nWhen the client choses to order the resulting documents by some field (for example \"timestamp\") it is important that the comparison value for pagination comes from this field.\r\n\r\n```\r\nQuery: Order \"Chat\" documents by \"timestamp\"\r\n\r\nDocument {\r\n  username\r\n  timestamp <- Compare\r\n  message\r\n}\r\n\r\nDocument {\r\n  username\r\n  timestamp <- Compare\r\n  message\r\n}\r\n\r\nDocument {\r\n  username\r\n  timestamp <- Compare\r\n  message\r\n}\r\n```\n\r\nAt the same time we _need_ to always return the last `cursor` for each document to the client, since this is the point where we can safely paginate to the next document.\r\n\r\n```\r\nDocument {\r\n  username\r\n  timestamp\r\n  message <- Cursor\r\n}\r\n\r\nDocument {\r\n  username\r\n  timestamp\r\n  message <- Cursor\r\n}\r\n\r\nDocument {\r\n  username\r\n  timestamp\r\n  message <- Cursor\r\n}\r\n```\n\nThe bug resulted from us using the cursor to determine the field, which was only accidentally sometimes the same as chosen by the ordering.\r\n\nAlso, this fix uncovered a second bug which was that not always we returned the last cursor per document since the SQL sometimes orders them slightly different, indeterministicly.\r\n\r\nThis PR fixes the problem by:\r\n\r\n1. Making sure that always the last field is selected as a cursor in `convert_rows` (before it's been a bit random, as the SQL query returns fields in different order sometimes)\r\n2. Extending the pagination query to select the correct operation field based on the cursor and ordering setting\r\n\r\nCloses https://github.com/p2panda/aquadoggo/issues/381\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/412/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/412/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/410", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/410/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/410/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/410/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/410", "id": 1764733490, "node_id": "PR_kwDOEhY-tc5TZ0aL", "number": 410, "title": "Handle duplicate document view insertions", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-06-20T06:27:48Z", "updated_at": "2023-06-21T12:26:43Z", "closed_at": "2023-06-21T12:26:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/410", "html_url": "https://github.com/p2panda/aquadoggo/pull/410", "diff_url": "https://github.com/p2panda/aquadoggo/pull/410.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/410.patch", "merged_at": "2023-06-21T12:26:39Z"}, "body": "Document views have a `UNIQUE` constraint on their `document_view_id` which means if double insertion of the same document view occurs then a fatal database error is returned. Although this is the expected behaviour, and there is no reason to want to update a document view (once inserted, no values on a document view should change), it can happen that a document is inserted twice because of two materializer tasks working towards the same document view (see issue and discussion here: https://github.com/p2panda/aquadoggo/issues/398).\r\n\r\nThis PR retains the `UNIQUE` restraint on document view id, and ~changes the behaviour of `insert_document_view` on `SqlStore`~ checks if a document view has already been materialized in the reduce task before performing any insertion.\r\n\r\nCloses https://github.com/p2panda/aquadoggo/issues/398\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/410/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/409", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/409/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/409/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/409/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/409", "id": 1763958141, "node_id": "PR_kwDOEhY-tc5TXQ7a", "number": 409, "title": "Fix issue where filtered queries fail on updated fields", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-06-19T17:53:19Z", "updated_at": "2023-06-20T22:15:33Z", "closed_at": "2023-06-20T22:13:47Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/409", "html_url": "https://github.com/p2panda/aquadoggo/pull/409", "diff_url": "https://github.com/p2panda/aquadoggo/pull/409.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/409.patch", "merged_at": "2023-06-20T22:13:47Z"}, "body": "Closes https://github.com/p2panda/aquadoggo/issues/379\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/409/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/408", "id": 1763719706, "node_id": "PR_kwDOEhY-tc5TWdYI", "number": 408, "title": "Decouple p2panda's authentication data types from libp2p's", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-19T14:59:55Z", "updated_at": "2023-06-20T22:08:31Z", "closed_at": "2023-06-20T22:08:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/408", "html_url": "https://github.com/p2panda/aquadoggo/pull/408", "diff_url": "https://github.com/p2panda/aquadoggo/pull/408.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/408.patch", "merged_at": "2023-06-20T22:08:27Z"}, "body": "## Separation of worlds\r\n\r\nThis separates the worlds of libp2p and p2panda a bit better. Before we would deal with libp2p's `Keypair` inside of our `Configuration` struct to handle and store secrets.\r\n\r\nThe only place where we \"leak\" libp2p into our other parts is the replication service, there we have still a notion of `PeerId`. We could wrap that around our own type to abstract it away, but at this point that seems too much.\r\n\r\n## Making `KeyPair` more visible\r\n\r\nThis PR brings `KeyPair` into the picture by moving it out of `Configuration`, into its own `Context` field and on top into the `Node.start(key_pair, config)` method.\r\n\r\nCloses https://github.com/p2panda/aquadoggo/issues/388\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/408/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/387", "id": 1723673476, "node_id": "PR_kwDOEhY-tc5ROypx", "number": 387, "title": "Integrate replication manager with networking stack", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2023-05-24T10:31:04Z", "updated_at": "2023-06-19T07:56:21Z", "closed_at": "2023-06-19T07:41:40Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/387", "html_url": "https://github.com/p2panda/aquadoggo/pull/387", "diff_url": "https://github.com/p2panda/aquadoggo/pull/387.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/387.patch", "merged_at": "2023-06-19T07:41:40Z"}, "body": "This PR introduces a new replication service which represents the replication protocol layer on top of the networking stack. It uses the service bus to communicate with the networking service, gets informed about established and closed connection with peers and new incoming replication messages.\r\n\r\nThe replication service keeps track of all currently available peers, can initiate new replication sessions with a simple scheduler logic and maintains the sync manager which is the state machine dealing with the actual replication protocol logic.\r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/373 and https://github.com/p2panda/aquadoggo/issues/396\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/387/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/380", "id": 1714474304, "node_id": "PR_kwDOEhY-tc5Qvt9N", "number": 380, "title": "Implement naive replication protocol", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-17T18:48:45Z", "updated_at": "2023-05-22T23:19:23Z", "closed_at": "2023-05-22T23:19:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/380", "html_url": "https://github.com/p2panda/aquadoggo/pull/380", "diff_url": "https://github.com/p2panda/aquadoggo/pull/380.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/380.patch", "merged_at": "2023-05-22T23:19:20Z"}, "body": "Database methods, log height diffing logic, state and message handling for the naive replication protocol. \r\n\r\nCloses #368 and #376\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/380/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/375", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/375/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/375/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/375/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/375", "id": 1709935894, "node_id": "PR_kwDOEhY-tc5QgWPL", "number": 375, "title": "Replication message de- / serialization", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-15T11:54:30Z", "updated_at": "2023-05-16T10:00:56Z", "closed_at": "2023-05-16T09:59:18Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/375", "html_url": "https://github.com/p2panda/aquadoggo/pull/375", "diff_url": "https://github.com/p2panda/aquadoggo/pull/375.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/375.patch", "merged_at": "2023-05-16T09:59:18Z"}, "body": "Implement `Serialize` and `Deserialize` traits for the basic replication message types: `SyncRequest`, `Entry` and `SyncDone`.\r\n\r\nCloses #374 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/375/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/365", "id": 1706045925, "node_id": "PR_kwDOEhY-tc5QTf-3", "number": 365, "title": "libp2p networking layer for replication protocol", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-11T15:23:51Z", "updated_at": "2023-05-16T10:20:07Z", "closed_at": "2023-05-16T10:20:04Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/365", "html_url": "https://github.com/p2panda/aquadoggo/pull/365", "diff_url": "https://github.com/p2panda/aquadoggo/pull/365.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/365.patch", "merged_at": "2023-05-16T10:20:04Z"}, "body": "Implement a `NetworkBehaviour` and `ConnectionHandler` for the libp2p swarm stack. It handles connection upgrades to our replication protocol, establishes in- and outbound streams, decodes CBOR bytes into our own message format in these streams and has some mechanisms of sending (with queues) and receiving messages.\r\n\r\nAll of this can be glued together with the work from https://github.com/p2panda/aquadoggo/pull/363 which is the actual replication protocol manager. This PR handles the networking layer of it.\r\n\r\nCloses #371 \r\n\r\n## Next Steps\r\n\r\n- #373 \r\n- #370 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/365/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/363", "id": 1704125704, "node_id": "PR_kwDOEhY-tc5QNEyf", "number": 363, "title": "Replication protocol session manager", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-10T14:56:35Z", "updated_at": "2023-05-15T10:17:06Z", "closed_at": "2023-05-15T10:06:12Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/363", "html_url": "https://github.com/p2panda/aquadoggo/pull/363", "diff_url": "https://github.com/p2panda/aquadoggo/pull/363.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/363.patch", "merged_at": "2023-05-15T10:06:12Z"}, "body": "Implementation of a manager handling sessions of the p2panda replication protocol as specified in https://p2panda.org/specification/replication/.\r\n\r\nThe manager makes sure that multiple replication sessions can be handled at the same time with different / same peers. It makes sure that no duplicate work is done and no dead locks occur when two peers initiate the same session at the same time.\r\n\r\nOn top it provides a pluggable interface for different replication \"strategies\", which we implement in separate PRs.\r\n\r\nThis implementation is agnostic of the underlying networking layer or async runtime. The glue to the aquadoggo libp2p networking stack is handled here: https://github.com/p2panda/aquadoggo/pull/365\r\n\r\nCloses #372 \r\n\r\n## Next Steps\r\n\r\n- #374 \r\n- #368\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/363/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/362", "id": 1700393418, "node_id": "PR_kwDOEhY-tc5QAflm", "number": 362, "title": "Property tests for GraphQL query API", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-08T14:47:07Z", "updated_at": "2023-05-16T16:12:44Z", "closed_at": "2023-05-16T16:12:41Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/362", "html_url": "https://github.com/p2panda/aquadoggo/pull/362", "diff_url": "https://github.com/p2panda/aquadoggo/pull/362.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/362.patch", "merged_at": "2023-05-16T16:12:41Z"}, "body": "Introduce property tests which run against high-level GraphQL query api. This is done using the `proptest` library which works by defining strategies for generating test data. When failing tests are found the strategies perform \"shrinking\" which reduces the input values to their simplest form which still triggers the failure. The inputs for failed tests are stored in a `.regressions` file and the tests are run against these values first every time.\r\n\r\nThe following strategies are implemented:\r\n- generate an AST representing schema with (nested) relations\r\n  - target depth, fields and number of nodes can be configured\r\n- generate collections of documents from schema AST\r\n- generate query filters based on schema AST\r\n\r\nThe following tests are performed:\r\n- pagination tests where the returned results are validated against expected values and pagination loops until completion\r\n  - this is performed against a query for only meta data, and a query for only application fields\r\n- perform a query which includes filter arguments for meta and application fields on the root query as well as any list fields\r\n  - this does not check the returned collection for correctness, only tests that the queries do not error\r\n\r\nCloses https://github.com/p2panda/aquadoggo/issues/360\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/362/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/359", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/359/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/359/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/359/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/359", "id": 1692927220, "node_id": "PR_kwDOEhY-tc5PnP8Y", "number": 359, "title": "Fix missing field when filtering owner", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-02T18:46:32Z", "updated_at": "2023-05-02T20:32:38Z", "closed_at": "2023-05-02T20:32:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/359", "html_url": "https://github.com/p2panda/aquadoggo/pull/359", "diff_url": "https://github.com/p2panda/aquadoggo/pull/359.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/359.patch", "merged_at": "2023-05-02T20:32:34Z"}, "body": "We can't use aliased fields like `owner` in a WHERE clause and this broke some filter queries against `owner`. This issue fixes that bug by introducing a sub-query instead.\r\n\r\nCloses #353 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/359/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/358", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/358/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/358/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/358/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/358", "id": 1692804504, "node_id": "PR_kwDOEhY-tc5Pm1W2", "number": 358, "title": "Bind filter arguments in SQL query", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-02T17:22:45Z", "updated_at": "2023-05-06T11:34:08Z", "closed_at": "2023-05-02T19:09:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/358", "html_url": "https://github.com/p2panda/aquadoggo/pull/358", "diff_url": "https://github.com/p2panda/aquadoggo/pull/358.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/358.patch", "merged_at": "2023-05-02T19:09:17Z"}, "body": "Binds untrusted filter values as SQL arguments. This helps sanitization and prevention of possible SQL injection attacks.\r\n\r\nCloses #349\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/358/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/358/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/354", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/354/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/354/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/354/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/354", "id": 1687661101, "node_id": "PR_kwDOEhY-tc5PVvyV", "number": 354, "title": "Not so basic collection e2e tests", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-27T23:02:36Z", "updated_at": "2023-05-02T15:42:19Z", "closed_at": "2023-05-02T15:42:15Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/354", "html_url": "https://github.com/p2panda/aquadoggo/pull/354", "diff_url": "https://github.com/p2panda/aquadoggo/pull/354.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/354.patch", "merged_at": "2023-05-02T15:42:15Z"}, "body": "## Todo\r\n- [x] add e2e tests\r\n- [x] #348\r\n- [x] ~#353~\r\n- [x] ~#349~\r\n- [x] #350\r\n- [x] ~un-comment failing tests~\r\n\r\nSeparated this PR into multiple to deal with the other issues :+1: \r\n\r\ncloses: #348 #350 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/354/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/354/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/352", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/352/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/352/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/352/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/352", "id": 1686477662, "node_id": "PR_kwDOEhY-tc5PRvJ3", "number": 352, "title": "Sort by document id by default for root queries", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-27T09:30:06Z", "updated_at": "2023-05-02T15:43:43Z", "closed_at": "2023-05-02T15:42:32Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/352", "html_url": "https://github.com/p2panda/aquadoggo/pull/352", "diff_url": "https://github.com/p2panda/aquadoggo/pull/352.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/352.patch", "merged_at": "2023-05-02T15:42:31Z"}, "body": "Closes #351 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/352/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/352/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/347", "id": 1685529681, "node_id": "PR_kwDOEhY-tc5POiSh", "number": 347, "title": "Fix SQL ordering to correctly assemble resulting rows to documents", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2023-04-26T18:43:11Z", "updated_at": "2023-04-27T22:05:57Z", "closed_at": "2023-04-27T14:15:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/347", "html_url": "https://github.com/p2panda/aquadoggo/pull/347", "diff_url": "https://github.com/p2panda/aquadoggo/pull/347.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/347.patch", "merged_at": "2023-04-27T14:15:35Z"}, "body": "\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/347/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/346", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/346/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/346/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/346/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/346", "id": 1685287258, "node_id": "PR_kwDOEhY-tc5PNuZe", "number": 346, "title": "Remove duplicate `Cursor` implementation, query code clean up", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-26T15:48:49Z", "updated_at": "2023-04-28T22:57:50Z", "closed_at": "2023-04-28T16:35:50Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/346", "html_url": "https://github.com/p2panda/aquadoggo/pull/346", "diff_url": "https://github.com/p2panda/aquadoggo/pull/346.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/346.patch", "merged_at": "2023-04-28T16:35:50Z"}, "body": "Closes #344 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/346/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/346/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/345", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/345/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/345/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/345/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/345", "id": 1685244687, "node_id": "PR_kwDOEhY-tc5PNlXT", "number": 345, "title": "Fix race conditions in SQLite database test runner", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-26T15:22:46Z", "updated_at": "2023-04-26T15:53:14Z", "closed_at": "2023-04-26T15:53:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/345", "html_url": "https://github.com/p2panda/aquadoggo/pull/345", "diff_url": "https://github.com/p2panda/aquadoggo/pull/345.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/345.patch", "merged_at": "2023-04-26T15:53:10Z"}, "body": "This makes sure that every individual test runs against its own database in memory by giving it a random identifier. Apparently this was not the case before and some tests shared the same database which led to unexpected race conditions.\r\n\r\nCloses #270 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/345/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/343", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/343/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/343/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/343/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/343", "id": 1684815373, "node_id": "PR_kwDOEhY-tc5PMIx8", "number": 343, "title": "Move GraphQL types into separate modules", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-26T11:13:03Z", "updated_at": "2023-04-26T12:19:54Z", "closed_at": "2023-04-26T12:19:48Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/343", "html_url": "https://github.com/p2panda/aquadoggo/pull/343", "diff_url": "https://github.com/p2panda/aquadoggo/pull/343.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/343.patch", "merged_at": "2023-04-26T12:19:48Z"}, "body": "This PR restructures the `graphql::types` module.\r\n\r\n* Separate GraphQL Objects, Input Values and Responses into new modules\r\n* Convert \"constructors\" to simple \"build\" methods\r\n* Move resolvers into separate module, make them simple methods as well\r\n* Rename `DocumentValue` to `Resolved` and implement `downcast` method on it\r\n* Move `PaginationData` to `stores::query` as it is not related to GraphQL\r\n* Rename `all_documents` query to `collection`\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [ ] ~~Link this PR to any issues it closes~~\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/343/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/342", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/342/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/342/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/342/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/342", "id": 1683057006, "node_id": "PR_kwDOEhY-tc5PGPZO", "number": 342, "title": "Finalize e2e GraphQL tests", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-25T12:15:22Z", "updated_at": "2023-04-25T17:38:20Z", "closed_at": "2023-04-25T17:38:11Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/342", "html_url": "https://github.com/p2panda/aquadoggo/pull/342", "diff_url": "https://github.com/p2panda/aquadoggo/pull/342.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/342.patch", "merged_at": "2023-04-25T17:38:11Z"}, "body": "Brings back \"dead\" e2e tests and fixes an issue where using `__typename` in the query resulted in an empty response.\r\n\r\nCloses #330 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/342/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/339", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/339/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/339/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/339/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/339", "id": 1682927470, "node_id": "PR_kwDOEhY-tc5PFzXf", "number": 339, "title": "Make `value` on `QueryRow` an option", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-25T10:52:59Z", "updated_at": "2023-04-25T17:43:41Z", "closed_at": "2023-04-25T16:16:38Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/339", "html_url": "https://github.com/p2panda/aquadoggo/pull/339", "diff_url": "https://github.com/p2panda/aquadoggo/pull/339.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/339.patch", "merged_at": "2023-04-25T16:16:38Z"}, "body": "## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/339/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/338", "id": 1682128479, "node_id": "PR_kwDOEhY-tc5PDIhl", "number": 338, "title": "Introduce property tests for the GraphQL query API", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-24T22:24:44Z", "updated_at": "2023-04-25T11:40:30Z", "closed_at": "2023-04-25T11:40:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/338", "html_url": "https://github.com/p2panda/aquadoggo/pull/338", "diff_url": "https://github.com/p2panda/aquadoggo/pull/338.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/338.patch", "merged_at": "2023-04-25T11:40:26Z"}, "body": "We could put all this behind a feature flag, which might be nice.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/338/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/336", "id": 1678607390, "node_id": "PR_kwDOEhY-tc5O3evU", "number": 336, "title": "Handle parsing fields containing an empty relation list in and out of storage", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-21T14:19:16Z", "updated_at": "2023-04-24T22:16:04Z", "closed_at": "2023-04-24T19:31:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/336", "html_url": "https://github.com/p2panda/aquadoggo/pull/336", "diff_url": "https://github.com/p2panda/aquadoggo/pull/336.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/336.patch", "merged_at": "2023-04-24T19:31:57Z"}, "body": "https://github.com/p2panda/aquadoggo/issues/334\r\n\r\nIn order to do this we make `value` on operation and document field rows optional and interpret this to mean an empty relation list when parsing values from the store.\r\n\r\nThen this threw up another bug which i believe originates in `p2panda-rs` where we don't handle decoding pinned relation lists if they contain no items. https://github.com/p2panda/p2panda/pull/489\r\n\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/336/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/331", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/331/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/331/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/331/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/331", "id": 1672758424, "node_id": "PR_kwDOEhY-tc5Oj3Yn", "number": 331, "title": "Dial peers discovered via mDNS", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-04-18T09:55:58Z", "updated_at": "2023-04-18T10:28:01Z", "closed_at": "2023-04-18T10:27:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/331", "html_url": "https://github.com/p2panda/aquadoggo/pull/331", "diff_url": "https://github.com/p2panda/aquadoggo/pull/331.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/331.patch", "merged_at": "2023-04-18T10:27:58Z"}, "body": "Addresses https://github.com/p2panda/aquadoggo/issues/305\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/331/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/323", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/323/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/323/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/323/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/323", "id": 1668167857, "node_id": "PR_kwDOEhY-tc5OUqX6", "number": 323, "title": "Fix paginated collection API", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-14T12:32:46Z", "updated_at": "2023-04-14T16:40:42Z", "closed_at": "2023-04-14T16:32:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/323", "html_url": "https://github.com/p2panda/aquadoggo/pull/323", "diff_url": "https://github.com/p2panda/aquadoggo/pull/323.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/323.patch", "merged_at": "2023-04-14T16:32:01Z"}, "body": null, "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/323/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/322", "id": 1668094231, "node_id": "PR_kwDOEhY-tc5OUa0I", "number": 322, "title": "Simplify network CLI options and configuration", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-14T11:43:00Z", "updated_at": "2023-04-18T09:02:35Z", "closed_at": "2023-04-18T09:02:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/322", "html_url": "https://github.com/p2panda/aquadoggo/pull/322", "diff_url": "https://github.com/p2panda/aquadoggo/pull/322.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/322.patch", "merged_at": "2023-04-18T09:02:31Z"}, "body": "Addresses https://github.com/p2panda/aquadoggo/issues/319\r\n\r\nReduces the existing set of network-related CLI options:\r\n\r\n```\r\n--rendezvous-address\r\n--rendezvous-peer-id\r\n--rendezvous-server\r\n--rendezvous-client\r\n--relay-address\r\n--relay-peer-id\r\n--relay-server\r\n--relay-client\r\n```\r\n\r\nTo this:\r\n\r\n```\r\n--rendezvous-address\r\n--relay-address\r\n--enable-rendezvous-server\r\n--enable-relay-server\r\n```\r\n\r\nRendezvous client mode is enabled if `--rendezvous-address` is provided. The same is true for `--relay-address`. These two options now include the peer's ID as part of the multiaddress.\r\n\r\n-----\r\n\r\nThis PR also bumps `libp2p` version to `0.51.3` and removes deprecated code:\r\n\r\n- [x] Replace `swarm::ConnectionLimits` with new `connection_limits::Behaviour`\r\n- [x] Remove match on `BannedPeer` `SwarmEvent`\r\n- [x] Change `quic` to use separate crate dependency\r\n\r\nSee https://github.com/libp2p/rust-libp2p/blob/master/libp2p/CHANGELOG.md#0512\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/322/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/318", "id": 1644332086, "node_id": "PR_kwDOEhY-tc5NFtR7", "number": 318, "title": "Custom validation for GraphQL `Scalar` types", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-28T16:51:25Z", "updated_at": "2023-03-29T14:00:00Z", "closed_at": "2023-03-29T13:58:10Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/318", "html_url": "https://github.com/p2panda/aquadoggo/pull/318", "diff_url": "https://github.com/p2panda/aquadoggo/pull/318.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/318.patch", "merged_at": "2023-03-29T13:58:10Z"}, "body": "This PR implements custom validation on GraphQL scalar types. This means that any invalid errors passed into the api as arguments are internally validated and if they fail, errors are returned to the user with context information about which argument in the query failed and what value type was expected.\r\n\r\nHowever, a side effect of this change is that in some cases (well, two i think) the actual validation errors returned from attempting to parse the value into it's expected type are lost. \r\n\r\nSo there is a slight trade off involved here. In some places specific validation failure errors are lost, but in other places we gain useful context about which passed value was invalid.\r\n\r\nSee the changes for examples of the differences.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/318/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/314", "id": 1643282642, "node_id": "PR_kwDOEhY-tc5NCKU0", "number": 314, "title": "Introduce `autonat` and `relay` network protocols", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-28T06:26:23Z", "updated_at": "2023-04-13T13:28:36Z", "closed_at": "2023-04-13T12:05:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/314", "html_url": "https://github.com/p2panda/aquadoggo/pull/314", "diff_url": "https://github.com/p2panda/aquadoggo/pull/314.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/314.patch", "merged_at": "2023-04-13T12:05:57Z"}, "body": "Addresses https://github.com/p2panda/aquadoggo/issues/306\r\n\r\n- [x] Add configuration options for `autonat`\r\n- [x] Add configuration options for `relay`\r\n- [x] Expose `autonat` configuration options via CLI\r\n- [x] Expose `relay` configuration options via CLI\r\n- [x] Add the `autonat` network behaviour / protocol\r\n  - [x] Handle `autonat::Event::StatusChanged` events\r\n  - [x] Handle all other `autonat` events with catch-all logging\r\n- [x] Add the `relay` network behaviour / protocol\r\n  - [x] Handle client and server events with catch-all logging\r\n- [x] Refactoring\r\n  - [x] Move transport builder into separate module\r\n  - [x] Move swarm builder into separate module\r\n- [x] Improve log-level stratification\r\n \r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/314/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/311", "id": 1637892841, "node_id": "PR_kwDOEhY-tc5MwSbZ", "number": 311, "title": "`query` method for store API", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-23T16:42:36Z", "updated_at": "2023-04-24T22:14:33Z", "closed_at": "2023-04-24T18:17:29Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/311", "html_url": "https://github.com/p2panda/aquadoggo/pull/311", "diff_url": "https://github.com/p2panda/aquadoggo/pull/311.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/311.patch", "merged_at": "2023-04-24T18:17:29Z"}, "body": "This PR implements the \"backend\" for our new \"Query\" API to paginate, filter and sort collections based off the work in https://github.com/p2panda/aquadoggo/pull/302 and https://github.com/p2panda/aquadoggo/pull/308. Specifically this involves designing the SQL query which gets the data from the database, to then return it back to the GraphQL API consumer.\r\n\r\nThe SQL query is fairly complex as it a) is based on our \"operation-graph-like\" table structure and b) covers a lot of features. The goal is to only make _one_ SQL query per API request. No index optimizations took place yet, this requires some heavy-load testing and benchmarking (just setting arbitrary indexes can worsen performance).\r\n\r\n**Todo**\r\n\r\n- [x] Revisit GraphQL API for pagination info and collection response (https://github.com/p2panda/aquadoggo/pull/323)\r\n- [x] Introduce `endCursor` in pagination info response\r\n- [x] Encode pagination cursor as base64 string or similar to make it opaque\r\n- [x] Handle (pinned) relation lists and relations in nested GraphQL queries. Revisit API here (especially pagination for collection queries)\r\n  - [x] Make cursor contain the id of the parent document, so we can identify _which_ list inside that collection we're paginating\r\n  - [x] Experiment with JOINs to properly paginate over relation list values\r\n- [x] Fix assembling document list after SQL query for relation lists, since documents can occur multiple times in a row there. A solution would be to group the rows by number of selected fields\r\n- [x] Make query compatible with PostgreSQL\r\n- [x] Separate the cursor type `DocumentCursor` from the scalar type `CursorScalar` in the GraphQL API, sticking to the separation of concerns we already have introduced in all other places\r\n- [x] Set filter default to not query deleted documents, improve upsert method of `Filter` struct to overwrite previously set boolean filters to allow users to override that default\r\n\r\n**Next Steps**\r\n\r\n- Add indices to SQL tables connected to heavy-load testing and benchmarking\r\n- Allow ordering over meta fields like document view id, owner, edited and deleted status\r\n- `edited` in GraphQL `meta` API\r\n- `deleted` in GraphQL `meta` API\r\n- Implement backwards pagination as well\r\n- Finish tests from previous PRs\r\n- Check if all arguments are correctly validated (it crashes when entering an unknown field in `orderBy`)\r\n- Define good pagination defaults and limits (for example max page sizes)\r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/310\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/311/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/308", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/308/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/308/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/308/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/308", "id": 1634052004, "node_id": "PR_kwDOEhY-tc5MjbJE", "number": 308, "title": "Introduce filtering, ordering and pagination to graphql api", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-21T14:28:23Z", "updated_at": "2023-04-18T10:28:47Z", "closed_at": "2023-03-28T17:19:55Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/308", "html_url": "https://github.com/p2panda/aquadoggo/pull/308", "diff_url": "https://github.com/p2panda/aquadoggo/pull/308.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/308.patch", "merged_at": "2023-03-28T17:19:55Z"}, "body": "This PR introduces the ability to pass arguments for filtering, ordering and paginating collection queries and parses these arguments into our own types with validation.\r\n\r\ndraft api ideas:\r\nhttps://laub.liebechaos.org/ZDW0yABySHSkc2aeG_ctWQ?view\r\nhttps://laub.liebechaos.org/fplolxRFSvumhEzgdYSxiQ\r\n\r\n- [x] filtering\r\n  - [x] static filter objects for all operation value types\r\n  - [x] dynamically build filter input object per schema\r\n  - [x] accept these arguments in `all_x` queries\r\n  - [x] ~~accept these arguments in single document query~~ (i don't think we want this)\r\n  - [x] filter by meta fields\r\n  - [x] parse abstract filter from field filter arguments\r\n  - [x] parse abstract filter from meta filter arguments\r\n- [x] pagination\r\n  - [x] accept all arguments for performing cursor based pagination in `all_x` queries\r\n  - [x] query for documents at root of collection query and pass the values up to children\r\n  - [x] introduce pagination response wrapper type\r\n  - [x] parse abstract query struct\r\n- [x] ordering\r\n  - [x] static order direction type for `ASC` & `DESC`\r\n  - [x] dynamically build enum of possible `orderBy` options \r\n  - [x] accept these arguments in `all_x` queries\r\n  - [x] order by meta fields\r\n  - [x] parse abstract query\r\n- [x] all of the above for relation lists\r\n- [x] docs and descriptions for all new types / methods / arguments\r\n\r\n### Query a collection with pagination, ordering and filtering:\r\n\r\n```gql\r\n{\r\n  all_event_0020c3560ffcfa50f14ab01740cd8f832e0fb35035eeb8cd4aca124bac2d42a47a2a(\r\n    after: \"0_00205406410aefce40c5cbbb04488f50714b7d5657b9f17eed7358da35379bc20331\" \r\n    first: 10\r\n    orderBy: OWNER\r\n    orderDirection: ASC\r\n    filter: {\r\n      date: {\r\n        gt: \"01-12-2012\"\r\n        lt: \"01-12-2022\"\r\n        notIn: [\"01-02-2016\", \"01-02-2017\"]\r\n        notEq: \"01-02-2018\"\r\n      }\r\n      band: {\r\n        eq: \"00205406410aefce40c5cbbb04488f50714b7d5657b9f17eed7358da35379bc20331\"\r\n      }\r\n      description: {\r\n        contains: \"panda is cool\"\r\n      }\r\n    }\r\n    meta: {\r\n      owner: {\r\n        in: [\"7cf4f58a2d89e93313f2de99604a814ecea9800cf217b140e9c3a7ba59a5d982\"]\r\n      }\r\n      edited: {\r\n        eq: true\r\n      }\r\n      documentId : {\r\n        in: [\"00205406410aefce40c5cbbb04488f50714b7d5657b9f17eed7358da35379bc20331\"]\r\n      }\r\n      viewId : {\r\n        notIn: [\"00205406410aefce40c5cbbb04488f50714b7d5657b9f17eed7358da35379bc20331\"]\r\n      }\r\n    }\r\n  ) {\r\n    document {\r\n      fields {\r\n        band {\r\n          fields {\r\n            name\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n### Query a relation list on a document with pagination, ordering and filtering:\r\n\r\n```gql\r\n{\r\n  all_schema_definition_v1 {\r\n    document {\r\n      fields {\r\n        name\r\n        fields(\r\n          after: \"0_002099dd2c7a77ce59fddb48bcfd18baefc73888849436d471d4aba40aa8f027e13a\"\r\n          first: 50\r\n          orderBy: name\r\n          orderDirection: ASC\r\n          filter: { name: { eq: \"hello\" } }\r\n        ) {\r\n          totalCount\r\n          document {\r\n            meta {\r\n              documentId\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## NEXT:\r\n  - implement filter nesting for relation fields (to a max depth)\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/308/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/307", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/307/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/307/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/307/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/307", "id": 1633979189, "node_id": "PR_kwDOEhY-tc5MjLPZ", "number": 307, "title": "Restructure graphql modules", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-21T13:54:35Z", "updated_at": "2023-03-22T11:32:49Z", "closed_at": "2023-03-21T14:33:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/307", "html_url": "https://github.com/p2panda/aquadoggo/pull/307", "diff_url": "https://github.com/p2panda/aquadoggo/pull/307.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/307.patch", "merged_at": "2023-03-21T14:33:07Z"}, "body": "Moved modules and methods around in `graphql` so they better reflect the design patterns we're following. Now things look like:\r\n\r\n```\r\n\u251c\u2500\u2500 constants.rs\r\n\u251c\u2500\u2500 mod.rs\r\n\u251c\u2500\u2500 mutations\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mod.rs\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 publish.rs\r\n\u251c\u2500\u2500 queries\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 all_documents.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 document.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mod.rs\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 next_args.rs\r\n\u251c\u2500\u2500 scalars\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 document_id_scalar.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 document_view_id_scalar.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 encoded_entry_scalar.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 encoded_operation_scalar.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 entry_hash_scalar.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 log_id_scalar.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mod.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 public_key_scalar.rs\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 seq_num_scalar.rs\r\n\u251c\u2500\u2500 schema.rs\r\n\u251c\u2500\u2500 tests.rs\r\n\u251c\u2500\u2500 types\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 document_fields.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 document_meta.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 document.rs\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mod.rs\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 next_arguments.rs\r\n\u2514\u2500\u2500 utils.rs\r\n```\r\n\r\nAlso moved dynamic schema `build` and `resolve` methods onto \"empty\" structs representing graphql types cos it makes the api quite nice.\r\n\r\nNaming is still not quite there, especially whether the types should be called `document_x` or `schema_x`, but I will tackle that incrementally over the next few PRs.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/307/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/307/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/304", "id": 1629215617, "node_id": "PR_kwDOEhY-tc5MTS5T", "number": 304, "title": "Introduce `identify` and `rendezvous` network protocols", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-17T12:15:24Z", "updated_at": "2023-04-18T10:28:46Z", "closed_at": "2023-03-23T16:28:17Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/304", "html_url": "https://github.com/p2panda/aquadoggo/pull/304", "diff_url": "https://github.com/p2panda/aquadoggo/pull/304.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/304.patch", "merged_at": "2023-03-23T16:28:17Z"}, "body": "Addresses https://github.com/p2panda/aquadoggo/issues/303\r\n\r\n- [x] Move `NetworkBehaviour` into a separate module (`behaviour.rs`)\r\n- [x] Add the `identify` network behaviour / protocol\r\n  - [x] Manually add an external address when reported via remote peer\r\n  - [x] Handle `identify::Event::Received` event\r\n  - [x] Handle `identify::Event::Sent` event\r\n  - [x] Handle `identify::Event::Error` event\r\n- [x] Add the `rendezvous` network behaviour / protocol\r\n  - [x] Handle `rendezvous::client::Event::Registered` event\r\n  - [x] Handle `rendezvous::client::Event::Discovered` event\r\n  - [x] Handle `rendezvous::client::Event::Failed` event\r\n  - [x] Handle `rendezvous::server::Event::PeerRegistered` event\r\n  - [x] Handle `rendezvous::server::Event::DiscoverServed` event\r\n- [x] Add configuration options for rendezvous\r\n- [x] Expose rendezvous configuration options via CLI\r\n- [x] Replace `String` with `Multiaddr` for `--remote-node-addresses` and `--rendezvous-address` (results in validation by parser)\r\n- [x] Replace `String` with `PeerId` for `--rendezvous-peer-id` (results in validation by parser)\r\n- [x] Add `glyph` to list of authors\r\n- [x] Update CLI `README` with latest usage instructions\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/304/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/302", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/302/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/302/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/302/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/302", "id": 1629073412, "node_id": "PR_kwDOEhY-tc5MS0Bu", "number": 302, "title": "Create and validate abstract queries", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-17T10:31:21Z", "updated_at": "2023-04-18T10:28:41Z", "closed_at": "2023-03-24T08:53:01Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/302", "html_url": "https://github.com/p2panda/aquadoggo/pull/302", "diff_url": "https://github.com/p2panda/aquadoggo/pull/302.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/302.patch", "merged_at": "2023-03-24T08:53:01Z"}, "body": "This PR introduces types and methods to represent and validate \"abstract queries\".  What makes all of this \"abstract\" is that these types are agnostic of their \"frontend\" and \"backend\".\r\n\r\nThis should allow developers to: a) use them to construct SQL queries to retrieve data b) design GraphQL queries on top of it which can be converted to their abstract representation.\r\n\r\nIn detail this entails:\r\n\r\n- [x] Abstract query types to represent selection (`Select`), filtering (`Filter`), ordering (`Order`) and pagination (`Pagination`) settings\r\n  - Filter (can be negated, except intervals)\r\n    - Fields \r\n      - Element matches query exactly (all types) `{ username: \"panda\" }` `{ username_not: \"panda\" }`\r\n      - Element is contained in query set (all types) `{ city_in: [\"Berlin\", \"Warsaw\"] }` `{ city_not_in: [\"London\", \"Berlin\", \"Warsaw\"] }`\r\n      - Element is between interval (currently no support for multi-ranges) (only integer, float, string)\r\n        - Closed `{ year_gte: 2020, year_lte: 2024 }`\r\n        - Open `{ year_gt: 2020, year_lt: 2024 }`\r\n        - Half-open intervals `{ year_gte: 2020, year_lt: 2024 }`\r\n        - Unbounded `{ year_lt: 2022 }` `{ year_gte: 1900 }`\r\n      - Element contains string (only string) `{ username_contains: \"panda\" }` `{ username_not_contains: \"panda\" }`\r\n    - Meta\r\n      - Document ID, document view ID, owner, edited flag or deleted flag matches query exactly\r\n      - Document ID, document view ID or owner is contained in query set\r\n   - Order\r\n     - Any field and meta field can be ordered\r\n     - Ascending (default) or descending order\r\n   - Pagination\r\n     - Cursor-based pagination via string cursors\r\n     - Abstract cursor trait\r\n   - Select\r\n- [x] Methods to \"clean up\" queries as what we might get from the outside might not be \"efficient\"\r\n   - Merge intervals\r\n   - Merge sets\r\n   - Merge single elements into sets\r\n   - Convert sets w. one value into element query\r\n- [x] Test helper method to convert from string representation to abstract query types\r\n- [x] Validate query against schema\r\n- [x] Select fields for query\r\n\r\nCloses: #299 \r\n\r\nNext Step: https://github.com/p2panda/aquadoggo/issues/310\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/302/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/302/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/298", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/298/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/298/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/298/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/298", "id": 1629039993, "node_id": "PR_kwDOEhY-tc5MSs3t", "number": 298, "title": "Ignore libp2p deprecation warnings (clippy)", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-03-17T10:07:29Z", "updated_at": "2023-03-17T10:13:51Z", "closed_at": "2023-03-17T10:13:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/298", "html_url": "https://github.com/p2panda/aquadoggo/pull/298", "diff_url": "https://github.com/p2panda/aquadoggo/pull/298.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/298.patch", "merged_at": "2023-03-17T10:13:44Z"}, "body": "Silences clippy warnings for usage of deprecated `libp2p` methods in the `save()` and `load()` methods implementing `Identity` for `Keypair`.\r\n\r\nSee https://github.com/p2panda/aquadoggo/issues/295 for details.\r\n\r\nI've also removed unused import warnings for `aquadoggo/src/test_utils/client.rs` (encountered when running tests).", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/298/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/298/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/296", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/296/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/296/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/296/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/296", "id": 1627327202, "node_id": "PR_kwDOEhY-tc5MM6n6", "number": 296, "title": "Remove Replication Service for now", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-16T11:59:43Z", "updated_at": "2023-03-16T15:53:53Z", "closed_at": "2023-03-16T14:10:32Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/296", "html_url": "https://github.com/p2panda/aquadoggo/pull/296", "diff_url": "https://github.com/p2panda/aquadoggo/pull/296.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/296.patch", "merged_at": "2023-03-16T14:10:32Z"}, "body": "Removes unused replication service and related test runner. These are all preparations for the upcoming work on a new replication protocol.\r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/297\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/296/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/293", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/293/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/293/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/293/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/293", "id": 1627244403, "node_id": "PR_kwDOEhY-tc5MMokD", "number": 293, "title": "Update breaking API calls for new `p2panda-rs` version", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-16T11:09:45Z", "updated_at": "2023-03-16T11:35:47Z", "closed_at": "2023-03-16T11:35:43Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/293", "html_url": "https://github.com/p2panda/aquadoggo/pull/293", "diff_url": "https://github.com/p2panda/aquadoggo/pull/293.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/293.patch", "merged_at": "2023-03-16T11:35:42Z"}, "body": "In `p2panda-rs` version `0.7.0` we introduced new APIs around the creation of schemas and the storage provider traits which led to breaking code in `aquadoggo`. This PR updates everything to be compatible with the latest version.\r\n\r\nCloses: https://github.com/p2panda/aquadoggo/issues/294\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/293/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/293/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/289", "id": 1623173335, "node_id": "PR_kwDOEhY-tc5L-3gx", "number": 289, "title": "Migrate CLI from `structopt` to `clap`", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-14T10:26:11Z", "updated_at": "2023-03-16T15:53:54Z", "closed_at": "2023-03-15T09:17:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/289", "html_url": "https://github.com/p2panda/aquadoggo/pull/289", "diff_url": "https://github.com/p2panda/aquadoggo/pull/289.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/289.patch", "merged_at": "2023-03-15T09:17:28Z"}, "body": "This is a drop-in replacement (more or less) of `structopt` with `clap`. See https://github.com/p2panda/aquadoggo/issues/288 for additional context.\r\n\r\n- [x] Replace `structopt` dependency with `clap`\r\n- [x] Rename `struct` from `Opt` to `Cli`\r\n- [x] Update `README` with latest usage\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/289/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/287", "id": 1619346501, "node_id": "PR_kwDOEhY-tc5LyVww", "number": 287, "title": "Use new version of `async-graphql` for dynamic schema generation", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-03-10T17:34:22Z", "updated_at": "2023-04-29T00:21:37Z", "closed_at": "2023-03-16T11:54:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/287", "html_url": "https://github.com/p2panda/aquadoggo/pull/287", "diff_url": "https://github.com/p2panda/aquadoggo/pull/287.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/287.patch", "merged_at": "2023-03-16T11:54:17Z"}, "body": "Use https://github.com/async-graphql/async-graphql and https://github.com/smmoosavi/dynamic-graphql to implement dynamic schema handling in our graphql api.\r\n\r\nThis took a little bit of time as I had to get to grips with the new `async-graphql` dynamic schema creation patterns, but I'm very happy with the result, it will be much more enjoyable (and quite quick) to expand our query api now with new features. \r\n\r\n## Design decisions\r\n- we use `async-graphql` to build all queries dynamically. It doesn't seem possible to combine \"statically\" defined queries with dynamic ones, so even `nextArgs` is defined using the dynamic API\r\n- all scalar and known types are defined using `dynamic-graphql` which offers macro wrappers for `async-graphql`, these are then registered on the root schema and can be referenced by name in dynamic queries where object types can be defined\r\n- the resolver pattern i adopted (i believe it's the recommended way) is to have each field perform a single db query to retrieve it's own value. The query bubbles up from it's root to tips, only resolving actual values in it's final step. For this to be efficient, we may want to make two changes:\r\n  1) implement a data loader which helps cache results for duplicate queries which occur in the same query tree (avoids N+1).\r\n  2) write a new SQL query for the field resolver which only targets the requested field. \r\n\r\n## Tasks\r\n\r\n- [x] remove old `graphql` module\r\n- [x] remove replication end points (we might want these back later, but for now they're gone)\r\n- [x] re-implement all functionality using above crates\r\n  - [x] scalar types\r\n  - [x] types \r\n    - [x] document meta \r\n    - [x] next args\r\n  - [x] build document fields schema\r\n  - [x] build document schema\r\n  - [x] build document query one\r\n  - [x] relations (single and lists)\r\n  - [x] build document query all \r\n  - [x] build next args\r\n  - [x] mutations: publish\r\n- [x] bring back all tests\r\n  - [x] make them pass.... \r\n- [x] ~add some more tests~ let's do this in next steps :face_in_clouds: we at least shouldn't have fewer tests than we did before!\r\n- [x] ~get `dynamic-schema` published or remove it from this PR~ it already was\r\n\r\n## Next steps\r\n- implement a data loader for efficient query caching\r\n- write field only SQL queries for field resolver (optional)\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/287/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/286", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/286/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/286/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/286/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/286", "id": 1611920853, "node_id": "PR_kwDOEhY-tc5LZTKk", "number": 286, "title": "Introduce requeue flag", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2023-03-06T17:43:51Z", "updated_at": "2023-03-14T15:33:44Z", "closed_at": "2023-03-14T15:33:39Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/286", "html_url": "https://github.com/p2panda/aquadoggo/pull/286", "diff_url": "https://github.com/p2panda/aquadoggo/pull/286.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/286.patch", "merged_at": "2023-03-14T15:33:39Z"}, "body": "Introduces a `requeue` boolean-flag in the input index of our `Factory` implementation (task worker queue) which allows tasks to get re-scheduled after completion.\r\n\r\nThis fixes a nasty bug which can be only reproduced on very fast machines: https://github.com/p2panda/aquadoggo/issues/281\r\n\r\nThis branches off Sam's work on https://github.com/p2panda/aquadoggo/pull/285 which surely made the bug easier to track down.\r\n\r\n## Problem\r\n\r\nLet's say we have operations arriving in the following order at the node: `C1 [D1]`, `U2 [D1]`, `C1 [D2]`, `U3 [D1]` and `U2 [D2]`. That's an CREATE, UPDATE and another UPDATE operation for a \"Document 1\" and another CREATE and UPDATE operation for a \"Document 2\", they arrive at the same time at the GraphQL API and get put in this order on the service bus where they get broadcasted.\r\n\r\nThe current factory implementation would now look at each of these operations arriving through the service bus and queue them up IF we don't handle that document yet. In the \"dispatcher\" this would look like that:\r\n\r\n1. `C1 [D1]` arrives. Do we already work on `D1`? No, let's queue it!\r\n2. `U2 [D1]` arrives. Do we already work on `D1`? Yes. Ignore.\r\n3. `C1 [D2]` arrives. Do we already work on `D2`? No, let's queue it!\r\n4. `U3 [D1]` arrives. Do we already work on `D1`? Yes. Ignore.\r\n5. `U2 [D2]` arrives. Do we already work on `D2`? Yes. Ignore.\r\n\r\n.. concurrently we're already running a whole worker pool eagerly waiting to look at the queue, taking the tasks off it. So depending on how the \"dispatcher\" races with the \"workers\" the outcome might always look a little bit different. For example, if we finished working on `C1 [D1]` _before_ the dispatcher looks at `U3 [D1]`, it might actually get queued as well.\r\n\r\nThat design of \"looking at duplicates\" had one purpose: Avoid working on the same document twice, aka \"we're already working on it, why do it a second time\". This is a nice optimization, but it also assumes that we have all possible operations in the database _already_ in the moment _before_ `C1 [D1]` or a later D1-related task kicks in.\r\n\r\nFunnily, this worked quite well so far, we never noticed a problem. Most of the time the requests were slow enough for the factory to queue _every_ operation and ignore nothing:\r\n\r\n1. `C1 [D1]` arrives. Do we already work on `D1`? No, let's queue it!\r\n... (the worker happily crunches that operation in the background, seeing C1 in the database)\r\n... some short fraction of time later ..\r\n2. `U2 [D1]` arrives. Do we already work on `D1`? No, let's queue it!\r\n... (the worker happily crunches that operation in the background, seeing U2 in the database)\r\n... and so on ..\r\n\r\nSince our requests get faster now (due to client-side caching in `shirokuma`) we observed the following problem:\r\n\r\n1. `C1 [D1]` arrives. Do we already work on `D1`? No, let's queue it!\r\n... (the worker happily crunches that operation in the background, seeing C1 in the database)\r\n... some short fraction of time later ..\r\n2. `U2 [D1]` arrives! Woah. FAST! Surprise!! Do we already work on `D1`? Yes. Ignore.\r\n... and so on ..\r\n\r\nThe new operations `U2` etc. arrived in the database _after_ the worker looked at them but _before_ it finished working on `C1`! Thus, we lost `U2` ..\r\n\r\n## Solution\r\n\r\nAfter some analysis I realized that the system makes still sense in its basic assumption: We don't need to work on documents more than we have to! `aquadoggo` is an event-sourcing system where \"events\" kick-in work, independent of the amount of data arriving. Here is an example:\r\n\r\n```\r\nD: [U U U] [U U U U U U U] U U U U U U U U ...\r\n          Work!           Work! \r\n```\r\n\r\nNote how the brackets `[...]` \"group\" the operations in work units. They simply get loaded from the database as they already were there before the work started.\r\n\r\nThere is an ongoing stream of incoming UPDATE operations and every time we kick in the worker for that document it takes the \"fresh\" ones and materializes them. We don't need to have a worker for _each_ operation, we just have to make sure that we consider them all exactly _once_ - and this is where the previous system failed, as operations just got lost ..\r\n\r\nIn this PR a \"re-queue\" flag got introduced which restarts a task for a document D when operations have been observed which came in while the worker was already running on D. It works like this:\r\n\r\n1. `C1 [D1]` arrives. Do we already work on `D1`? No, let's queue it!\r\n2. `U2 [D1]` arrives. Do we already work on `D1`? Yes. Set requeue flag for `D1` to `true` \r\n3. `C1 [D2]` arrives. Do we already work on `D2`? No, let's queue it!\r\n4. `U3 [D1]` arrives. Do we already work on `D1`? Yes, and the requeue flag is set. Ignore.\r\n5. `U2 [D2]` arrives. Do we already work on `D2`? Yes. Set requeue flag for `D2` to `true` \r\n\r\nThis scenario assumes that the worker for `D1` and the other worker for `D2` are still running while all other operations get dispatched, that's the \"worst-case scenario\" in terms of maximum pressure on the dispatcher which made the previous implementation fail.\r\n\r\nWhat this does now is quite nice: As soon as the work on `C1` finished and the requeue flag was detected, it will just add a new task to the queue to continue working on `D1`, making sure to also account for all these operations which arrived a little bit later (`U2` and `U3`).\r\n\r\nWhat we get from this is:\r\n\r\n1. Some sort of \"batching\" of operations for the same document when they arrive _very_ fast\r\n2. The queue does not get \"blocked\" by waiting operations, we can still continue looking at other operations for other documents and assigning them to different workers\r\n3. Accounting for moments of very high pressure on the dispatcher without losing any information\r\n4. Still making sure that we only working on a document _once_ at a time, to avoid concurrent work overwriting each other\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [ ] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/286/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 1, "eyes": 1}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/286/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/285", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/285/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/285/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/285/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/285", "id": 1605058069, "node_id": "PR_kwDOEhY-tc5LCVWP", "number": 285, "title": "Do transactions correctly", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-01T14:14:44Z", "updated_at": "2023-03-14T14:23:18Z", "closed_at": "2023-03-14T14:21:17Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/285", "html_url": "https://github.com/p2panda/aquadoggo/pull/285", "diff_url": "https://github.com/p2panda/aquadoggo/pull/285.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/285.patch", "merged_at": "2023-03-14T14:21:17Z"}, "body": "closes: https://github.com/p2panda/aquadoggo/issues/283\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/285/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/282", "id": 1602887765, "node_id": "PR_kwDOEhY-tc5K68vT", "number": 282, "title": "Add libp2p service and configuration", "user": {"login": "mycognosist", "id": 23633979, "node_id": "MDQ6VXNlcjIzNjMzOTc5", "avatar_url": "https://avatars.githubusercontent.com/u/23633979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mycognosist", "html_url": "https://github.com/mycognosist", "followers_url": "https://api.github.com/users/mycognosist/followers", "following_url": "https://api.github.com/users/mycognosist/following{/other_user}", "gists_url": "https://api.github.com/users/mycognosist/gists{/gist_id}", "starred_url": "https://api.github.com/users/mycognosist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mycognosist/subscriptions", "organizations_url": "https://api.github.com/users/mycognosist/orgs", "repos_url": "https://api.github.com/users/mycognosist/repos", "events_url": "https://api.github.com/users/mycognosist/events{/privacy}", "received_events_url": "https://api.github.com/users/mycognosist/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2023-02-28T11:46:30Z", "updated_at": "2023-03-14T15:56:47Z", "closed_at": "2023-03-13T10:53:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/282", "html_url": "https://github.com/p2panda/aquadoggo/pull/282", "diff_url": "https://github.com/p2panda/aquadoggo/pull/282.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/282.patch", "merged_at": "2023-03-13T10:53:59Z"}, "body": "Implements a minimal networking layer using the `libp2p` library, including transport establishment, networking configuration and network behaviour composition.\r\n\r\nRelates to https://github.com/p2panda/aquadoggo/issues/278\r\n\r\n## To Do\r\n\r\n- [x] Keypair configuration\r\n  - [x] Generate a new keypair when one doesn't exist\r\n  - [x] Persist the keypair to file using PEM format\r\n  - [x] Load the keypair from file \r\n- [x] Define swarm configuration parameters\r\n  - [x] Set connection-related defaults \r\n  - [x] Decide on default QUIC port\r\n- [x] Define the NetworkBehaviour of the node\r\n  - [x] ping\r\n  - [x] mDNS\r\n- [x] Swarm\r\n  - [x] Configure and create QUIC transport  \r\n  - [x] Listen for incoming connections\r\n  - [x] Dial peer addresses for replication (if provided)\r\n  - [x] Log events\r\n- [x] Install Protocol Buffers compiler for CI workflows\r\n- [x] Add Protocol Buffers compiler installation requirement note to `README`\r\n\r\n## Notes\r\n\r\n`aquadoggo` currently uses `envy` to parse environment variables and overlay them onto the default configuration parameters. However, it does not currently handle nested `struct`s. This means that it is not possible to tune libp2p configuration parameters given the current code structure (the same applies to `ReplicationConfig`). I will need to use the `flatten` attribute from `serde` ([docs](https://serde.rs/attr-flatten.html)) to achieve this.\r\n\r\n## Out of Scope\r\n\r\nI'm noting this down here for future iterations on the networking layer functionality.\r\n\r\n- Dummy replication (self-implemented behaviour for learning purposes)\r\n  - Let's rather do this after the base networking functionality has been merged\r\n- Address book\r\n  - Read from file\r\n  - Add discovered peers (via mDNS, for example)\r\n  - Write to file\r\n- `TOML` configuration file for the application\r\n  - I'll tackle this in another PR\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/282/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/280", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/280/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/280/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/280/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/280", "id": 1600000998, "node_id": "PR_kwDOEhY-tc5KxUze", "number": 280, "title": "Perform \"quick commit\" in materializer service", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-02-26T10:18:59Z", "updated_at": "2023-05-24T07:22:29Z", "closed_at": "2023-05-24T07:22:22Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/280", "html_url": "https://github.com/p2panda/aquadoggo/pull/280", "diff_url": "https://github.com/p2panda/aquadoggo/pull/280.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/280.patch", "merged_at": "2023-05-24T07:22:22Z"}, "body": "Uses https://github.com/p2panda/p2panda/pull/485 to perform a quick commit on a document instead of materializing from scratch.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/280/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/279", "id": 1599850057, "node_id": "PR_kwDOEhY-tc5Kw3vl", "number": 279, "title": "Import `publish` and `next_args` from `p2panda-rs`", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-25T21:39:45Z", "updated_at": "2023-03-07T11:45:24Z", "closed_at": "2023-03-07T11:45:20Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/279", "html_url": "https://github.com/p2panda/aquadoggo/pull/279", "diff_url": "https://github.com/p2panda/aquadoggo/pull/279.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/279.patch", "merged_at": "2023-03-07T11:45:20Z"}, "body": "Use `api` module exposed in `p2panda-rs` here: https://github.com/p2panda/p2panda/pull/483\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/279/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/277", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/277/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/277/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/277/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/277", "id": 1582096973, "node_id": "PR_kwDOEhY-tc5J1iUa", "number": 277, "title": "Refactor test runner injection patterns", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-13T10:39:50Z", "updated_at": "2023-02-14T09:39:25Z", "closed_at": "2023-02-14T09:39:21Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/277", "html_url": "https://github.com/p2panda/aquadoggo/pull/277", "diff_url": "https://github.com/p2panda/aquadoggo/pull/277.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/277.patch", "merged_at": "2023-02-14T09:39:21Z"}, "body": "Fun weekend refactoring project ;-p\r\n\r\nHaven't changed any functionality here, just some nice tidy-up I've been wanting to do forever. Main objectives:\r\n- use similar pattern for injecting one test db into a test or working with the test db manager for creating many\r\n- separate the test runner logic from the store population logic for transparency and flexibility\r\n- don't use rstest for injecting the test runner\r\n- take the chance to add a few more doc strings to test utils and tests where needed\r\n\r\nThere are some naming changes and reorganising the modules a little too.\r\n\r\nI don't think there is anything controversial here, mostly involved a lot of brainless method renaming :rofl: so I don't think a thorough review is required. Happy to chat about the naming choices if you have input there though @adzialocha.\r\n\r\ncloses: https://github.com/p2panda/aquadoggo/issues/276  https://github.com/p2panda/aquadoggo/issues/208 https://github.com/p2panda/aquadoggo/issues/183\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/277/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/275", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/275/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/275/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/275/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/275", "id": 1580765046, "node_id": "PR_kwDOEhY-tc5JxQpH", "number": 275, "title": "Unify test_utils", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-02-11T09:51:53Z", "updated_at": "2023-02-13T11:07:21Z", "closed_at": "2023-02-11T10:15:34Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/275", "html_url": "https://github.com/p2panda/aquadoggo/pull/275", "diff_url": "https://github.com/p2panda/aquadoggo/pull/275.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/275.patch", "merged_at": "2023-02-11T10:15:34Z"}, "body": "Move all test utils into one module.\r\n\r\ncloses: https://github.com/p2panda/aquadoggo/issues/274\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/275/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/269", "id": 1554681818, "node_id": "PR_kwDOEhY-tc5IaPr7", "number": 269, "title": "Fix test-runner race conditions", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-24T10:10:07Z", "updated_at": "2023-01-25T11:47:47Z", "closed_at": "2023-01-25T11:11:56Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/269", "html_url": "https://github.com/p2panda/aquadoggo/pull/269", "diff_url": "https://github.com/p2panda/aquadoggo/pull/269.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/269.patch", "merged_at": "2023-01-25T11:11:56Z"}, "body": "Some of our tests use the underlying static schema provider which is a static mutable data store (due to a workaround for `async-graphql`). This mutable store is accessible across all test runner threads in parallel mode as they all run in the same process. To prevent overwriting data across threads (race condition) we have to run these test in serial.\r\n\r\nRead more: https://users.rust-lang.org/t/static-mutables-in-tests/49321\r\n\r\n## Background\r\n\r\nThis PR is blantantly stolen from https://github.com/p2panda/aquadoggo/pull/266 which is the in-depth research of @sandreae to find out where the race-conditions came from.\r\n\r\nThe following changes have been made in comparison to PR #266:\r\n\r\n1. Added comments around the places where we add `[#serial]`. It's fairly special-case and I can see how that same problem will come up in the future when we (and others) add new tests and forget to make them execute in serial. These comments will not necessarily prevent that but it's better than nothing maybe.\r\n2. Removed all code which was somewhat _optional_ around solving these kinds of race conditions. #266 adds a feature to reliably inform about if an async task (like building a new schema) was finished. There is more race conditions to tackle, but they are more unlikely to happen (for now we can naively bump the waiting times).\r\n\r\nI'm wondering if there's another way to tackle the issue in the future. We could have a mocked static schema store only for test environments which puts the data behind a randomized key which is set once per thread. Then all parallelly-running tests would have the schema store behind the same memory address, but access different areas _inside_ of it.\r\n\r\nCloses: #247\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/269/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/268", "id": 1526007712, "node_id": "PR_kwDOEhY-tc5G_6_v", "number": 268, "title": "Storage trait API changes", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-01-09T17:26:10Z", "updated_at": "2023-02-20T16:32:58Z", "closed_at": "2023-02-10T18:13:07Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/268", "html_url": "https://github.com/p2panda/aquadoggo/pull/268", "diff_url": "https://github.com/p2panda/aquadoggo/pull/268.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/268.patch", "merged_at": "2023-02-10T18:13:07Z"}, "body": "Implement changes from https://github.com/p2panda/p2panda/pull/469, refactoring (especially in `DocumentStore`) and a chance for better docs!\r\n\r\n- [x] make changes required by https://github.com/p2panda/p2panda/pull/469\r\n  - [x] update store APIs\r\n  - [x] remove deprecated `StorageEntry` and `EntryWithOperation`\r\n  - [x] meaningful changes to the methods on `DocumentStore` which now returns `Documents` from all getter methods \r\n- [x] big refactor of document and document view insertion methods (these methods are not defined on `DocumentStore` trait anymore)\r\n- [x] add `document_id` column to `document_views` table\r\n- [x] update tests\r\n- [x] update effected modules\r\n- [x] update and a chance to improve docs for these stores\r\n  - [x] `entry`\r\n  - [x] `log`\r\n  - [x] `operation`\r\n  - [x] `document`\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/268/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/263", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/263/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/263/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/263/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/263", "id": 1364389986, "node_id": "PR_kwDOEhY-tc4-fyi9", "number": 263, "title": "Lib-level doc string", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-07T09:45:05Z", "updated_at": "2022-09-07T09:57:56Z", "closed_at": "2022-09-07T09:57:53Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/263", "html_url": "https://github.com/p2panda/aquadoggo/pull/263", "diff_url": "https://github.com/p2panda/aquadoggo/pull/263.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/263.patch", "merged_at": "2022-09-07T09:57:53Z"}, "body": "Closes #246 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/263/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/263/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/262", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/262/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/262/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/262/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/262", "id": 1363453886, "node_id": "PR_kwDOEhY-tc4-ctqn", "number": 262, "title": "Update p2panda api", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-06T15:21:01Z", "updated_at": "2022-09-06T16:12:07Z", "closed_at": "2022-09-06T16:12:02Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/262", "html_url": "https://github.com/p2panda/aquadoggo/pull/262", "diff_url": "https://github.com/p2panda/aquadoggo/pull/262.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/262.patch", "merged_at": "2022-09-06T16:12:02Z"}, "body": "- `Author` -> `PublicKey` and associated API changes\r\n- `previous_operations` -> `previous` \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/262/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/259", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/259/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/259/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/259/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/259", "id": 1360933684, "node_id": "PR_kwDOEhY-tc4-UaJA", "number": 259, "title": "Wrap document insertion methods in transaction", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-09-03T18:29:17Z", "updated_at": "2022-09-04T00:35:39Z", "closed_at": "2022-09-04T00:35:35Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/259", "html_url": "https://github.com/p2panda/aquadoggo/pull/259", "diff_url": "https://github.com/p2panda/aquadoggo/pull/259.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/259.patch", "merged_at": "2022-09-04T00:35:35Z"}, "body": "In `insert_document` perform two db insertions, these should be wrapped in a transaction.\r\n\r\nFix for: #254  and _hopefully_ #247 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/259/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/258", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/258/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/258/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/258/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/258", "id": 1360609308, "node_id": "PR_kwDOEhY-tc4-TbFW", "number": 258, "title": "Load `DocumentId` to be able to resolve it in meta field query", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-02T21:01:37Z", "updated_at": "2022-09-03T08:53:06Z", "closed_at": "2022-09-03T06:14:54Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/258", "html_url": "https://github.com/p2panda/aquadoggo/pull/258", "diff_url": "https://github.com/p2panda/aquadoggo/pull/258.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/258.patch", "merged_at": "2022-09-03T06:14:54Z"}, "body": "Closes #253 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/258/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/257", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/257/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/257/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/257/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/257", "id": 1360585187, "node_id": "PR_kwDOEhY-tc4-TV_E", "number": 257, "title": "Increase broadcast channel sizes", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-02T20:26:31Z", "updated_at": "2022-09-03T08:53:07Z", "closed_at": "2022-09-03T06:17:26Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/257", "html_url": "https://github.com/p2panda/aquadoggo/pull/257", "diff_url": "https://github.com/p2panda/aquadoggo/pull/257.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/257.patch", "merged_at": "2022-09-03T06:17:26Z"}, "body": "Closes #245 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/257/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/257/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/256", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/256/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/256/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/256/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/256", "id": 1360572635, "node_id": "PR_kwDOEhY-tc4-TTQQ", "number": 256, "title": "`seqNum` param need to be a string during replication", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-02T20:10:36Z", "updated_at": "2022-09-03T08:53:08Z", "closed_at": "2022-09-03T06:16:27Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/256", "html_url": "https://github.com/p2panda/aquadoggo/pull/256", "diff_url": "https://github.com/p2panda/aquadoggo/pull/256.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/256.patch", "merged_at": "2022-09-03T06:16:27Z"}, "body": "Closes https://github.com/p2panda/aquadoggo/issues/199\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/256/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/252", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/252/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/252/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/252/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/252", "id": 1346689825, "node_id": "PR_kwDOEhY-tc49k6Oi", "number": 252, "title": "Do not forget to register `DocumentIdScalar`", "user": {"login": "adzialocha", "id": 1822473, "node_id": "MDQ6VXNlcjE4MjI0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adzialocha", "html_url": "https://github.com/adzialocha", "followers_url": "https://api.github.com/users/adzialocha/followers", "following_url": "https://api.github.com/users/adzialocha/following{/other_user}", "gists_url": "https://api.github.com/users/adzialocha/gists{/gist_id}", "starred_url": "https://api.github.com/users/adzialocha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adzialocha/subscriptions", "organizations_url": "https://api.github.com/users/adzialocha/orgs", "repos_url": "https://api.github.com/users/adzialocha/repos", "events_url": "https://api.github.com/users/adzialocha/events{/privacy}", "received_events_url": "https://api.github.com/users/adzialocha/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-22T16:32:33Z", "updated_at": "2022-08-22T18:05:40Z", "closed_at": "2022-08-22T17:35:57Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/252", "html_url": "https://github.com/p2panda/aquadoggo/pull/252", "diff_url": "https://github.com/p2panda/aquadoggo/pull/252.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/252.patch", "merged_at": "2022-08-22T17:35:57Z"}, "body": "Closing: https://github.com/p2panda/aquadoggo/issues/242\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/252/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/251", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/251/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/251/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/251/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/251", "id": 1345412843, "node_id": "PR_kwDOEhY-tc49gtkz", "number": 251, "title": "Human info logs", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-21T07:41:09Z", "updated_at": "2022-09-03T08:44:30Z", "closed_at": "2022-09-03T08:44:28Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/251", "html_url": "https://github.com/p2panda/aquadoggo/pull/251", "diff_url": "https://github.com/p2panda/aquadoggo/pull/251.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/251.patch", "merged_at": "2022-09-03T08:44:28Z"}, "body": "In `info` level logs use human display strings.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/251/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/251/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/249", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/249/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/249/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/249/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/249", "id": 1345228839, "node_id": "PR_kwDOEhY-tc49gJD0", "number": 249, "title": "Use `DocumentStore` trait from p2panda rs", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-20T17:21:15Z", "updated_at": "2022-08-22T14:45:39Z", "closed_at": "2022-08-20T17:26:53Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/249", "html_url": "https://github.com/p2panda/aquadoggo/pull/249", "diff_url": "https://github.com/p2panda/aquadoggo/pull/249.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/249.patch", "merged_at": "2022-08-20T17:26:53Z"}, "body": "Use `DocumentStore` defined in `p2panda-rs`, remove `DocumentStore` defined in `aquadoggo`.\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/249/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/237", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/237/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/237/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/237/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/237", "id": 1337924907, "node_id": "PR_kwDOEhY-tc49IN8K", "number": 237, "title": "Detach `add_document` and `add_schema` from `TestDatabase`", "user": {"login": "cafca", "id": 278463, "node_id": "MDQ6VXNlcjI3ODQ2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/278463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cafca", "html_url": "https://github.com/cafca", "followers_url": "https://api.github.com/users/cafca/followers", "following_url": "https://api.github.com/users/cafca/following{/other_user}", "gists_url": "https://api.github.com/users/cafca/gists{/gist_id}", "starred_url": "https://api.github.com/users/cafca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cafca/subscriptions", "organizations_url": "https://api.github.com/users/cafca/orgs", "repos_url": "https://api.github.com/users/cafca/repos", "events_url": "https://api.github.com/users/cafca/events{/privacy}", "received_events_url": "https://api.github.com/users/cafca/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-13T10:28:00Z", "updated_at": "2022-08-22T14:45:17Z", "closed_at": "2022-08-22T14:45:15Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/237", "html_url": "https://github.com/p2panda/aquadoggo/pull/237", "diff_url": "https://github.com/p2panda/aquadoggo/pull/237.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/237.patch", "merged_at": "2022-08-22T14:45:14Z"}, "body": "Refactors these methods as independent helpers as discussed in https://github.com/p2panda/aquadoggo/pull/141#discussion_r934700925\n\n## \ud83d\udccb Checklist\n\n- [x] Add tests that cover your changes\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\n- [x] Link this PR to any issues it closes\n- [x] New files contain a SPDX license header\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/237/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/236", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/236/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/236/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/236/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/236", "id": 1337227111, "node_id": "PR_kwDOEhY-tc49F74z", "number": 236, "title": "Fix GraphQL responses", "user": {"login": "cafca", "id": 278463, "node_id": "MDQ6VXNlcjI3ODQ2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/278463?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cafca", "html_url": "https://github.com/cafca", "followers_url": "https://api.github.com/users/cafca/followers", "following_url": "https://api.github.com/users/cafca/following{/other_user}", "gists_url": "https://api.github.com/users/cafca/gists{/gist_id}", "starred_url": "https://api.github.com/users/cafca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cafca/subscriptions", "organizations_url": "https://api.github.com/users/cafca/orgs", "repos_url": "https://api.github.com/users/cafca/repos", "events_url": "https://api.github.com/users/cafca/events{/privacy}", "received_events_url": "https://api.github.com/users/cafca/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-12T13:44:10Z", "updated_at": "2022-08-22T11:46:16Z", "closed_at": "2022-08-22T11:46:08Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/236", "html_url": "https://github.com/p2panda/aquadoggo/pull/236", "diff_url": "https://github.com/p2panda/aquadoggo/pull/236.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/236.patch", "merged_at": "2022-08-22T11:46:08Z"}, "body": "Closes #234 and #233 \r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/236/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/235", "repository_url": "https://api.github.com/repos/p2panda/aquadoggo", "labels_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/235/labels{/name}", "comments_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/235/comments", "events_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/235/events", "html_url": "https://github.com/p2panda/aquadoggo/pull/235", "id": 1337153360, "node_id": "PR_kwDOEhY-tc49Fr8e", "number": 235, "title": "Untagged operation format & schema validation", "user": {"login": "sandreae", "id": 24291662, "node_id": "MDQ6VXNlcjI0MjkxNjYy", "avatar_url": "https://avatars.githubusercontent.com/u/24291662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandreae", "html_url": "https://github.com/sandreae", "followers_url": "https://api.github.com/users/sandreae/followers", "following_url": "https://api.github.com/users/sandreae/following{/other_user}", "gists_url": "https://api.github.com/users/sandreae/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandreae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandreae/subscriptions", "organizations_url": "https://api.github.com/users/sandreae/orgs", "repos_url": "https://api.github.com/users/sandreae/repos", "events_url": "https://api.github.com/users/sandreae/events{/privacy}", "received_events_url": "https://api.github.com/users/sandreae/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": true, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2022-08-12T12:35:03Z", "updated_at": "2022-08-22T14:45:34Z", "closed_at": "2022-08-19T18:21:23Z", "author_association": "MEMBER", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/p2panda/aquadoggo/pulls/235", "html_url": "https://github.com/p2panda/aquadoggo/pull/235", "diff_url": "https://github.com/p2panda/aquadoggo/pull/235.diff", "patch_url": "https://github.com/p2panda/aquadoggo/pull/235.patch", "merged_at": "2022-08-19T18:21:22Z"}, "body": "Integrate new API for the \"monster\" https://github.com/p2panda/p2panda/pull/415 including some changes needed for this PR here https://github.com/p2panda/p2panda/pull/434\r\n\r\n- [x] implement all simple API changes implemented here: https://github.com/p2panda/p2panda/pull/415\r\n- [x] refactor tests which are simple to update\r\n- [x] remove tests which are hard to update\r\n- [x] update `domain` methods to use new validation methods\r\n- [x] fetch schema from provider before passing it, entry and operation, into `publish`\r\n- [x] correct method for parsing `EncodedEntry` + `EncodedOperation` in gql scalar traits\r\n- [x] re-implement storing entry + payloads which arrive via replication\r\n- [x] re-implement test utilities `send_to_store` etc...\r\n- [x] fix existing tests which are failing\r\n- [x] bring back all deleted tests\r\n- [x] add tests for schema validation\r\n- [x] update doc strings for `publish`\r\n- [x] update `nextEntryArgs` to accept a document view id\r\n- [x] e2e test poetry :pancakes: \r\n\r\n# Next up\r\n- there is still this mysterious GraphQL issue: https://github.com/p2panda/aquadoggo/issues/242\r\n\r\n## \ud83d\udccb Checklist\r\n\r\n- [x] Add tests that cover your changes\r\n- [x] Add this PR to the _Unreleased_ section in `CHANGELOG.md`\r\n- [x] Link this PR to any issues it closes\r\n- [x] New files contain a SPDX license header\r\n", "reactions": {"url": "https://api.github.com/repos/p2panda/aquadoggo/issues/235/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/p2panda/aquadoggo/issues/235/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]