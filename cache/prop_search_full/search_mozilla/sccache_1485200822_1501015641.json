[{"url": "https://api.github.com/repos/mozilla/sccache/issues/159", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/159/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/159/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/159/events", "html_url": "https://github.com/mozilla/sccache/pull/159", "id": 245242090, "node_id": "MDExOlB1bGxSZXF1ZXN0MTMyMTY3NzY2", "number": 159, "title": "Treat -include as a preprocessor flag", "user": {"login": "glandium", "id": 1038527, "node_id": "MDQ6VXNlcjEwMzg1Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glandium", "html_url": "https://github.com/glandium", "followers_url": "https://api.github.com/users/glandium/followers", "following_url": "https://api.github.com/users/glandium/following{/other_user}", "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}", "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glandium/subscriptions", "organizations_url": "https://api.github.com/users/glandium/orgs", "repos_url": "https://api.github.com/users/glandium/repos", "events_url": "https://api.github.com/users/glandium/events{/privacy}", "received_events_url": "https://api.github.com/users/glandium/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-24T23:37:40Z", "updated_at": "2017-07-25T10:47:33Z", "closed_at": "2017-07-25T10:47:33Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/159", "html_url": "https://github.com/mozilla/sccache/pull/159", "diff_url": "https://github.com/mozilla/sccache/pull/159.diff", "patch_url": "https://github.com/mozilla/sccache/pull/159.patch", "merged_at": "2017-07-25T10:47:33Z"}, "body": "When the original compiler invocation contains -include, passing the\r\nflag to the compiler invocation for the preprocessed source can lead to\r\nerrors because it will cause another pass of the preprocessor (although\r\narguably, with -x cpp-output, it shouldn't).\r\n\r\nIdeally, other flags like -I, -idirafter, etc. should be handled the\r\nsame, but there are other issues that should be addressed for those\r\n(as well as -include, but this addresses the most immediate issue)\r\nSee https://github.com/mozilla/sccache/issues/117#issuecomment-315569559\r\n\r\nFixes #117", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/159/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/156", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/156/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/156/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/156/events", "html_url": "https://github.com/mozilla/sccache/pull/156", "id": 244632396, "node_id": "MDExOlB1bGxSZXF1ZXN0MTMxNzQ2NzEw", "number": 156, "title": "Vendor my fork of lru-cache. Fixes #152", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-07-21T10:41:14Z", "updated_at": "2017-07-25T12:29:15Z", "closed_at": "2017-07-25T12:29:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/156", "html_url": "https://github.com/mozilla/sccache/pull/156", "diff_url": "https://github.com/mozilla/sccache/pull/156.diff", "patch_url": "https://github.com/mozilla/sccache/pull/156.patch", "merged_at": "2017-07-25T12:29:15Z"}, "body": "I just vendored the lru-cache lib.rs into lru-disk-cache and tweaked a few things to match. This should let us publish on crates.io again.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/156/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/156/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/149", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/149/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/149/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/149/events", "html_url": "https://github.com/mozilla/sccache/pull/149", "id": 242368769, "node_id": "MDExOlB1bGxSZXF1ZXN0MTMwMTMwNDM4", "number": 149, "title": "Miscellaneous changes", "user": {"login": "glandium", "id": 1038527, "node_id": "MDQ6VXNlcjEwMzg1Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glandium", "html_url": "https://github.com/glandium", "followers_url": "https://api.github.com/users/glandium/followers", "following_url": "https://api.github.com/users/glandium/following{/other_user}", "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}", "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glandium/subscriptions", "organizations_url": "https://api.github.com/users/glandium/orgs", "repos_url": "https://api.github.com/users/glandium/repos", "events_url": "https://api.github.com/users/glandium/events{/privacy}", "received_events_url": "https://api.github.com/users/glandium/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-12T12:50:15Z", "updated_at": "2017-07-17T15:19:03Z", "closed_at": "2017-07-13T21:39:18Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/149", "html_url": "https://github.com/mozilla/sccache/pull/149", "diff_url": "https://github.com/mozilla/sccache/pull/149.diff", "patch_url": "https://github.com/mozilla/sccache/pull/149.patch", "merged_at": "2017-07-13T21:39:18Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/149/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/149/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/145", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/145/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/145/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/145/events", "html_url": "https://github.com/mozilla/sccache/pull/145", "id": 239310589, "node_id": "MDExOlB1bGxSZXF1ZXN0MTI4MDI5NzE4", "number": 145, "title": "Fix compilation with GCC to properly handle preprocessor arguments", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-28T22:00:51Z", "updated_at": "2017-07-05T19:24:04Z", "closed_at": "2017-07-05T19:24:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/145", "html_url": "https://github.com/mozilla/sccache/pull/145", "diff_url": "https://github.com/mozilla/sccache/pull/145.diff", "patch_url": "https://github.com/mozilla/sccache/pull/145.patch", "merged_at": "2017-07-05T19:24:04Z"}, "body": "... when re-compiling when the first compile fails with -Werror.\r\n\r\nThis patch isn't complete, I just don't have GCC handy locally and want to verify that the new test I wrote currently fails.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/145/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/143", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/143/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/143/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/143/events", "html_url": "https://github.com/mozilla/sccache/pull/143", "id": 235822676, "node_id": "MDExOlB1bGxSZXF1ZXN0MTI1NTUzNDAw", "number": 143, "title": "Fix build with --no-default-features --features=redis", "user": {"login": "aperezdc", "id": 723451, "node_id": "MDQ6VXNlcjcyMzQ1MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/723451?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aperezdc", "html_url": "https://github.com/aperezdc", "followers_url": "https://api.github.com/users/aperezdc/followers", "following_url": "https://api.github.com/users/aperezdc/following{/other_user}", "gists_url": "https://api.github.com/users/aperezdc/gists{/gist_id}", "starred_url": "https://api.github.com/users/aperezdc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aperezdc/subscriptions", "organizations_url": "https://api.github.com/users/aperezdc/orgs", "repos_url": "https://api.github.com/users/aperezdc/repos", "events_url": "https://api.github.com/users/aperezdc/events{/privacy}", "received_events_url": "https://api.github.com/users/aperezdc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-14T09:46:57Z", "updated_at": "2017-06-14T17:00:11Z", "closed_at": "2017-06-14T16:22:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/143", "html_url": "https://github.com/mozilla/sccache/pull/143", "diff_url": "https://github.com/mozilla/sccache/pull/143.diff", "patch_url": "https://github.com/mozilla/sccache/pull/143.patch", "merged_at": "2017-06-14T16:22:03Z"}, "body": "The `serde_json` crate is always needed by `src/commands.rs` even when building only with support for Redis, but `serde_json` would be left out when the S3 feature is disabled. This make it possible to build `sccache` only with Redis support.\r\n\r\nBuilding with S3 disabled trims down a stripped release build from 5.1 MiB down to 4.4 MiB on x86_64.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/143/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/141", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/141/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/141/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/141/events", "html_url": "https://github.com/mozilla/sccache/pull/141", "id": 234634196, "node_id": "MDExOlB1bGxSZXF1ZXN0MTI0NzI4MTUy", "number": 141, "title": "Update gcc to build sccache with MSVC2017", "user": {"login": "tetsuharuohzeki", "id": 180104, "node_id": "MDQ6VXNlcjE4MDEwNA==", "avatar_url": "https://avatars.githubusercontent.com/u/180104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tetsuharuohzeki", "html_url": "https://github.com/tetsuharuohzeki", "followers_url": "https://api.github.com/users/tetsuharuohzeki/followers", "following_url": "https://api.github.com/users/tetsuharuohzeki/following{/other_user}", "gists_url": "https://api.github.com/users/tetsuharuohzeki/gists{/gist_id}", "starred_url": "https://api.github.com/users/tetsuharuohzeki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tetsuharuohzeki/subscriptions", "organizations_url": "https://api.github.com/users/tetsuharuohzeki/orgs", "repos_url": "https://api.github.com/users/tetsuharuohzeki/repos", "events_url": "https://api.github.com/users/tetsuharuohzeki/events{/privacy}", "received_events_url": "https://api.github.com/users/tetsuharuohzeki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-08T19:38:30Z", "updated_at": "2017-06-08T23:42:03Z", "closed_at": "2017-06-08T23:42:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/141", "html_url": "https://github.com/mozilla/sccache/pull/141", "diff_url": "https://github.com/mozilla/sccache/pull/141.diff", "patch_url": "https://github.com/mozilla/sccache/pull/141.patch", "merged_at": "2017-06-08T23:42:03Z"}, "body": "This update includes `gcc`'s MSVC2017 support.\r\n\r\n- https://github.com/alexcrichton/gcc-rs/pull/160\r\n- https://github.com/alexcrichton/gcc-rs/pull/161\r\n- https://github.com/alexcrichton/gcc-rs/pull/163\r\n- https://github.com/alexcrichton/gcc-rs/pull/164\r\n- https://github.com/alexcrichton/gcc-rs/pull/166", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/141/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/140", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/140/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/140/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/140/events", "html_url": "https://github.com/mozilla/sccache/pull/140", "id": 234575282, "node_id": "MDExOlB1bGxSZXF1ZXN0MTI0Njg1ODYz", "number": 140, "title": "Don't pass flags to `wide_char_to_multi_byte`.", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-06-08T15:56:49Z", "updated_at": "2017-06-08T18:01:34Z", "closed_at": "2017-06-08T18:01:34Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/140", "html_url": "https://github.com/mozilla/sccache/pull/140", "diff_url": "https://github.com/mozilla/sccache/pull/140.diff", "patch_url": "https://github.com/mozilla/sccache/pull/140.patch", "merged_at": "2017-06-08T18:01:34Z"}, "body": "The MSDN docs for WideCharToMultiByte say:\r\n\"WC_ERR_INVALID_CHARS - ... Note that this flag only applies when CodePage is\r\nspecified as CP_UTF8 or 54936 (for Windows Vista and later). It cannot be used\r\nwith other code page values.\"\r\nhttps://msdn.microsoft.com/en-us/library/windows/desktop/dd374130(v=vs.85).aspx\r\n\r\nWe're currently getting ERROR_INVALID_FLAGS here. I've also added a test\r\nthat -deps works for MSVC which catches this error.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/140/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/137", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/137/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/137/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/137/events", "html_url": "https://github.com/mozilla/sccache/pull/137", "id": 233694107, "node_id": "MDExOlB1bGxSZXF1ZXN0MTI0MDQ4MTYx", "number": 137, "title": "Add GCS Support", "user": {"login": "cramertj", "id": 5963049, "node_id": "MDQ6VXNlcjU5NjMwNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5963049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cramertj", "html_url": "https://github.com/cramertj", "followers_url": "https://api.github.com/users/cramertj/followers", "following_url": "https://api.github.com/users/cramertj/following{/other_user}", "gists_url": "https://api.github.com/users/cramertj/gists{/gist_id}", "starred_url": "https://api.github.com/users/cramertj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cramertj/subscriptions", "organizations_url": "https://api.github.com/users/cramertj/orgs", "repos_url": "https://api.github.com/users/cramertj/repos", "events_url": "https://api.github.com/users/cramertj/events{/privacy}", "received_events_url": "https://api.github.com/users/cramertj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-06-05T20:02:28Z", "updated_at": "2017-06-19T16:11:12Z", "closed_at": "2017-06-19T09:54:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/137", "html_url": "https://github.com/mozilla/sccache/pull/137", "diff_url": "https://github.com/mozilla/sccache/pull/137.diff", "patch_url": "https://github.com/mozilla/sccache/pull/137.patch", "merged_at": "2017-06-19T09:54:10Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/137/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/137/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/136", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/136/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/136/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/136/events", "html_url": "https://github.com/mozilla/sccache/pull/136", "id": 232061400, "node_id": "MDExOlB1bGxSZXF1ZXN0MTIyOTIxMzg3", "number": 136, "title": "Clean use of future::ok and future::error", "user": {"login": "F3real", "id": 7493206, "node_id": "MDQ6VXNlcjc0OTMyMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/7493206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/F3real", "html_url": "https://github.com/F3real", "followers_url": "https://api.github.com/users/F3real/followers", "following_url": "https://api.github.com/users/F3real/following{/other_user}", "gists_url": "https://api.github.com/users/F3real/gists{/gist_id}", "starred_url": "https://api.github.com/users/F3real/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/F3real/subscriptions", "organizations_url": "https://api.github.com/users/F3real/orgs", "repos_url": "https://api.github.com/users/F3real/repos", "events_url": "https://api.github.com/users/F3real/events{/privacy}", "received_events_url": "https://api.github.com/users/F3real/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-29T16:24:45Z", "updated_at": "2017-06-14T15:57:01Z", "closed_at": "2017-06-14T15:56:55Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/136", "html_url": "https://github.com/mozilla/sccache/pull/136", "diff_url": "https://github.com/mozilla/sccache/pull/136.diff", "patch_url": "https://github.com/mozilla/sccache/pull/136.patch", "merged_at": "2017-06-14T15:56:55Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/136/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/136/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/134", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/134/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/134/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/134/events", "html_url": "https://github.com/mozilla/sccache/pull/134", "id": 231474624, "node_id": "MDExOlB1bGxSZXF1ZXN0MTIyNTM3Mjk3", "number": 134, "title": "Add clang arguments to the list of arguments that take values.", "user": {"login": "russellmcc", "id": 603279, "node_id": "MDQ6VXNlcjYwMzI3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/603279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/russellmcc", "html_url": "https://github.com/russellmcc", "followers_url": "https://api.github.com/users/russellmcc/followers", "following_url": "https://api.github.com/users/russellmcc/following{/other_user}", "gists_url": "https://api.github.com/users/russellmcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/russellmcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/russellmcc/subscriptions", "organizations_url": "https://api.github.com/users/russellmcc/orgs", "repos_url": "https://api.github.com/users/russellmcc/repos", "events_url": "https://api.github.com/users/russellmcc/events{/privacy}", "received_events_url": "https://api.github.com/users/russellmcc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-25T22:13:55Z", "updated_at": "2017-05-26T22:42:38Z", "closed_at": "2017-05-26T22:42:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/134", "html_url": "https://github.com/mozilla/sccache/pull/134", "diff_url": "https://github.com/mozilla/sccache/pull/134.diff", "patch_url": "https://github.com/mozilla/sccache/pull/134.patch", "merged_at": "2017-05-26T22:42:38Z"}, "body": "These arguments are passed by xcode during normal builds, so should be supported by sccache.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/134/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/134/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/133", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/133/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/133/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/133/events", "html_url": "https://github.com/mozilla/sccache/pull/133", "id": 231316654, "node_id": "MDExOlB1bGxSZXF1ZXN0MTIyNDIzODE1", "number": 133, "title": "Use base64 instead of rustc-serialize", "user": {"login": "tetsuharuohzeki", "id": 180104, "node_id": "MDQ6VXNlcjE4MDEwNA==", "avatar_url": "https://avatars.githubusercontent.com/u/180104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tetsuharuohzeki", "html_url": "https://github.com/tetsuharuohzeki", "followers_url": "https://api.github.com/users/tetsuharuohzeki/followers", "following_url": "https://api.github.com/users/tetsuharuohzeki/following{/other_user}", "gists_url": "https://api.github.com/users/tetsuharuohzeki/gists{/gist_id}", "starred_url": "https://api.github.com/users/tetsuharuohzeki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tetsuharuohzeki/subscriptions", "organizations_url": "https://api.github.com/users/tetsuharuohzeki/orgs", "repos_url": "https://api.github.com/users/tetsuharuohzeki/repos", "events_url": "https://api.github.com/users/tetsuharuohzeki/events{/privacy}", "received_events_url": "https://api.github.com/users/tetsuharuohzeki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "tetsuharuohzeki", "id": 180104, "node_id": "MDQ6VXNlcjE4MDEwNA==", "avatar_url": "https://avatars.githubusercontent.com/u/180104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tetsuharuohzeki", "html_url": "https://github.com/tetsuharuohzeki", "followers_url": "https://api.github.com/users/tetsuharuohzeki/followers", "following_url": "https://api.github.com/users/tetsuharuohzeki/following{/other_user}", "gists_url": "https://api.github.com/users/tetsuharuohzeki/gists{/gist_id}", "starred_url": "https://api.github.com/users/tetsuharuohzeki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tetsuharuohzeki/subscriptions", "organizations_url": "https://api.github.com/users/tetsuharuohzeki/orgs", "repos_url": "https://api.github.com/users/tetsuharuohzeki/repos", "events_url": "https://api.github.com/users/tetsuharuohzeki/events{/privacy}", "received_events_url": "https://api.github.com/users/tetsuharuohzeki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "tetsuharuohzeki", "id": 180104, "node_id": "MDQ6VXNlcjE4MDEwNA==", "avatar_url": "https://avatars.githubusercontent.com/u/180104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tetsuharuohzeki", "html_url": "https://github.com/tetsuharuohzeki", "followers_url": "https://api.github.com/users/tetsuharuohzeki/followers", "following_url": "https://api.github.com/users/tetsuharuohzeki/following{/other_user}", "gists_url": "https://api.github.com/users/tetsuharuohzeki/gists{/gist_id}", "starred_url": "https://api.github.com/users/tetsuharuohzeki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tetsuharuohzeki/subscriptions", "organizations_url": "https://api.github.com/users/tetsuharuohzeki/orgs", "repos_url": "https://api.github.com/users/tetsuharuohzeki/repos", "events_url": "https://api.github.com/users/tetsuharuohzeki/events{/privacy}", "received_events_url": "https://api.github.com/users/tetsuharuohzeki/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2017-05-25T11:41:22Z", "updated_at": "2017-05-26T02:41:35Z", "closed_at": "2017-05-25T13:11:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/133", "html_url": "https://github.com/mozilla/sccache/pull/133", "diff_url": "https://github.com/mozilla/sccache/pull/133.diff", "patch_url": "https://github.com/mozilla/sccache/pull/133.patch", "merged_at": "2017-05-25T13:11:59Z"}, "body": "[rustc-serialize has been deprecated](https://github.com/rust-lang-deprecated/rustc-serialize).\r\nInstead, this pull request switchs to [base64](https://crates.io/crates/base64)", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/133/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/125", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/125/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/125/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/125/events", "html_url": "https://github.com/mozilla/sccache/pull/125", "id": 229956884, "node_id": "MDExOlB1bGxSZXF1ZXN0MTIxNDg3MjU4", "number": 125, "title": "Support Rust compilation with -l and stop caching non-rlib/staticlib crate output", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-19T12:13:09Z", "updated_at": "2017-05-19T16:38:54Z", "closed_at": "2017-05-19T16:36:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/125", "html_url": "https://github.com/mozilla/sccache/pull/125", "diff_url": "https://github.com/mozilla/sccache/pull/125.diff", "patch_url": "https://github.com/mozilla/sccache/pull/125.patch", "merged_at": "2017-05-19T16:36:45Z"}, "body": "As discussed in https://github.com/mozilla/sccache/issues/88 and https://github.com/mozilla/sccache/issues/123 .", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/125/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/120", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/120/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/120/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/120/events", "html_url": "https://github.com/mozilla/sccache/pull/120", "id": 227984173, "node_id": "MDExOlB1bGxSZXF1ZXN0MTIwMTAxMTIz", "number": 120, "title": "Get rid of Storage::start_put and rename finish_put", "user": {"login": "flxo", "id": 129436, "node_id": "MDQ6VXNlcjEyOTQzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/129436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flxo", "html_url": "https://github.com/flxo", "followers_url": "https://api.github.com/users/flxo/followers", "following_url": "https://api.github.com/users/flxo/following{/other_user}", "gists_url": "https://api.github.com/users/flxo/gists{/gist_id}", "starred_url": "https://api.github.com/users/flxo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flxo/subscriptions", "organizations_url": "https://api.github.com/users/flxo/orgs", "repos_url": "https://api.github.com/users/flxo/repos", "events_url": "https://api.github.com/users/flxo/events{/privacy}", "received_events_url": "https://api.github.com/users/flxo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-05-11T13:04:21Z", "updated_at": "2017-05-29T06:24:47Z", "closed_at": "2017-05-16T10:02:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/120", "html_url": "https://github.com/mozilla/sccache/pull/120", "diff_url": "https://github.com/mozilla/sccache/pull/120.diff", "patch_url": "https://github.com/mozilla/sccache/pull/120.patch", "merged_at": "2017-05-16T10:02:30Z"}, "body": "This patch removes the start_put function from the `Storage` trait. The `finish_put` function is renamed\r\nto `put` get a nice `get`/`put` pair in `Storage.\r\n\r\nThis fixes #71.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/120/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/119", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/119/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/119/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/119/events", "html_url": "https://github.com/mozilla/sccache/pull/119", "id": 227345591, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE5NjQ2MTI0", "number": 119, "title": "Handle storage get failure", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-05-09T12:15:15Z", "updated_at": "2017-05-12T17:35:24Z", "closed_at": "2017-05-09T13:35:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/119", "html_url": "https://github.com/mozilla/sccache/pull/119", "diff_url": "https://github.com/mozilla/sccache/pull/119.diff", "patch_url": "https://github.com/mozilla/sccache/pull/119.patch", "merged_at": "2017-05-09T13:35:40Z"}, "body": "We're seeing failures reading cache entries in Firefox CI. I'm not sure if we're getting a truncated response from S3 or what, but it's failing to parse the zip file. This change makes storage failures like that non-fatal, they're just handled as cache misses. I believe this was the original behavior of sccache and it got changed during the tokio refactor.\r\n\r\nI've also added another change to check that the response body matches the `Content-Length` header for S3 requests, and a diagnostic log for the response body in all cases.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/119/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/119/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/113", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/113/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/113/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/113/events", "html_url": "https://github.com/mozilla/sccache/pull/113", "id": 224967953, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE4MDcyMDM4", "number": 113, "title": "Read SCCACHE_RECACHE from the client", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-28T03:07:22Z", "updated_at": "2017-05-03T15:42:02Z", "closed_at": "2017-05-03T15:42:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/113", "html_url": "https://github.com/mozilla/sccache/pull/113", "diff_url": "https://github.com/mozilla/sccache/pull/113.diff", "patch_url": "https://github.com/mozilla/sccache/pull/113.patch", "merged_at": "2017-05-03T15:42:01Z"}, "body": "Now that client env vars are sent to the server, this was much easier! This\r\nallows forcing a recache from the client rather than having to set it for the\r\nentire server.\r\n\r\nCloses #96", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/113/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/112", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/112/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/112/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/112/events", "html_url": "https://github.com/mozilla/sccache/pull/112", "id": 224967324, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE4MDcxNTkx", "number": 112, "title": "Leverage OsString much more deeply througout", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-04-28T03:02:22Z", "updated_at": "2017-05-12T19:41:01Z", "closed_at": "2017-05-12T19:40:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/112", "html_url": "https://github.com/mozilla/sccache/pull/112", "diff_url": "https://github.com/mozilla/sccache/pull/112.diff", "patch_url": "https://github.com/mozilla/sccache/pull/112.patch", "merged_at": "2017-05-12T19:40:59Z"}, "body": "This initially started out tackling #93 and ended up plumbing the `OsStr` type\r\nbasically everywhere! This knocked out a TODO or two along the way and should\r\nremove some pesky unwraps and/or error handling around handling of arguments and\r\npaths that may not be unicode.\r\n\r\nSome notable other points are:\r\n\r\n* A few utilities were added to `src/util.rs` to assist with handling os strings\r\n* The Rust implementation doesn't deal with os strings in argument parsing at\r\n  all, but otherwise internally stores os strings for maximal compatibility\r\n  (more comments in the code).\r\n* Some unsafe transmutes were removed in util in favor of a more stable\r\n  implementation.\r\n* The `output_file` function was renamed to `output_pretty` as it turns out it's\r\n  not actually the actual output file but rather just a pretty description of it\r\n  (for logging and such).\r\n\r\nCloses #93", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/112/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/112/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/111", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/111/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/111/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/111/events", "html_url": "https://github.com/mozilla/sccache/pull/111", "id": 224913932, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE4MDMzMDA2", "number": 111, "title": "Attempt to debug fatal errors more easily", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-27T21:09:27Z", "updated_at": "2017-05-03T15:27:47Z", "closed_at": "2017-05-03T15:08:52Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/111", "html_url": "https://github.com/mozilla/sccache/pull/111", "diff_url": "https://github.com/mozilla/sccache/pull/111.diff", "patch_url": "https://github.com/mozilla/sccache/pull/111.patch", "merged_at": "2017-05-03T15:08:52Z"}, "body": "This is an attempt to assist in debuggin \"Error 254\" situations which represent\r\nwhen the sccache server itself has a fatal error when executing the compiler.\r\nThis serializes the entire error context into a string and ships it back as\r\nstderr so it gets printed out by the calling context, hopefully providing\r\ncontextual information about the error happening.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/111/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/110", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/110/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/110/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/110/events", "html_url": "https://github.com/mozilla/sccache/pull/110", "id": 224424901, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE3Njg0NjUw", "number": 110, "title": "Retry compilation with gcc if -Werror is passed and the compilation of preprocessed source fails", "user": {"login": "flxo", "id": 129436, "node_id": "MDQ6VXNlcjEyOTQzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/129436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flxo", "html_url": "https://github.com/flxo", "followers_url": "https://api.github.com/users/flxo/followers", "following_url": "https://api.github.com/users/flxo/following{/other_user}", "gists_url": "https://api.github.com/users/flxo/gists{/gist_id}", "starred_url": "https://api.github.com/users/flxo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flxo/subscriptions", "organizations_url": "https://api.github.com/users/flxo/orgs", "repos_url": "https://api.github.com/users/flxo/repos", "events_url": "https://api.github.com/users/flxo/events{/privacy}", "received_events_url": "https://api.github.com/users/flxo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-04-26T10:48:55Z", "updated_at": "2017-05-30T12:50:56Z", "closed_at": "2017-05-25T16:00:28Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/110", "html_url": "https://github.com/mozilla/sccache/pull/110", "diff_url": "https://github.com/mozilla/sccache/pull/110.diff", "patch_url": "https://github.com/mozilla/sccache/pull/110.patch", "merged_at": "2017-05-25T16:00:28Z"}, "body": "In some (`gcc`) compiler and source combinations the compilations of the preprocessed source issues warnings that are present when compiling the original source file. This patch adds a compile retry to `gcc` in the same manner as `clang` does if `-Werror` is passed.\r\n\r\nI needed this extension to use `sccache` for `Android` builds. Somewhere in `bionic` (which is built with `-Werror`) the compilation of the preprocessed source throws a warning and the build fails.\r\nThe difference to the `clang` implementation here in `sccache` is that first attempt uses the preprocessed  source on `stdin` along with the `-x` argument.\r\n\r\nSidenote: To use `sccache` when building `Android`, export\r\n```\r\nCC_WRAPPER=sccache\r\nCXX_WRAPPER=sccache\r\n```\r\nbefore building. See `build/core/ccache.mk` for reference.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/110/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/110/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/109", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/109/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/109/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/109/events", "html_url": "https://github.com/mozilla/sccache/pull/109", "id": 223270672, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE2OTA4NTE3", "number": 109, "title": "Switch from SHA-1 to SHA-512", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-04-21T04:11:31Z", "updated_at": "2017-05-16T10:07:40Z", "closed_at": "2017-05-15T20:51:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/109", "html_url": "https://github.com/mozilla/sccache/pull/109", "diff_url": "https://github.com/mozilla/sccache/pull/109.diff", "patch_url": "https://github.com/mozilla/sccache/pull/109.patch", "merged_at": "2017-05-15T20:51:19Z"}, "body": "Local benchmarking showed that the implementation of SHA-512 in the *ring* crate\r\nis 3x faster than the implementation of SHA-1 in the `sha1` crate. I've also\r\nnoticed that 80%+ of sccache's runtime on a fully cached build is spent hashing.\r\nWith this change I noticed a decrease from 108s to 92s when building a fully\r\ncached LLVM from the network. Not a huge win but if the network were faster\r\ncould perhaps add up!\r\n\r\nCloses #108", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/109/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/109/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/106", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/106/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/106/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/106/events", "html_url": "https://github.com/mozilla/sccache/pull/106", "id": 220979521, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE1MzQwNTc0", "number": 106, "title": "Actually support -showIncludes on MSVC", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-11T14:54:52Z", "updated_at": "2017-04-11T19:47:39Z", "closed_at": "2017-04-11T19:37:41Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/106", "html_url": "https://github.com/mozilla/sccache/pull/106", "diff_url": "https://github.com/mozilla/sccache/pull/106.diff", "patch_url": "https://github.com/mozilla/sccache/pull/106.patch", "merged_at": "2017-04-11T19:37:41Z"}, "body": "Various problems locally meant that I wasn't able to thoroughly test before\r\npushing up a patch, but now I've fixed those issues and this is tested locally!\r\nNamely:\r\n\r\n* Pass `-showIncludes` to the preprocessor even if there's no dep file output\r\n  requested.\r\n* When a dep file is requested and `-showIncludes` is passed then ship all\r\n  output of dep files to the compiler's stdout.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/106/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/105", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/105/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/105/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/105/events", "html_url": "https://github.com/mozilla/sccache/pull/105", "id": 220872877, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE1MjY0Mjg1", "number": 105, "title": "Treat error exit codes of compilation as compile fail", "user": {"login": "flxo", "id": 129436, "node_id": "MDQ6VXNlcjEyOTQzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/129436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flxo", "html_url": "https://github.com/flxo", "followers_url": "https://api.github.com/users/flxo/followers", "following_url": "https://api.github.com/users/flxo/following{/other_user}", "gists_url": "https://api.github.com/users/flxo/gists{/gist_id}", "starred_url": "https://api.github.com/users/flxo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flxo/subscriptions", "organizations_url": "https://api.github.com/users/flxo/orgs", "repos_url": "https://api.github.com/users/flxo/repos", "events_url": "https://api.github.com/users/flxo/events{/privacy}", "received_events_url": "https://api.github.com/users/flxo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-11T08:16:16Z", "updated_at": "2017-04-24T07:33:40Z", "closed_at": "2017-04-11T10:29:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/105", "html_url": "https://github.com/mozilla/sccache/pull/105", "diff_url": "https://github.com/mozilla/sccache/pull/105.diff", "patch_url": "https://github.com/mozilla/sccache/pull/105.patch", "merged_at": "2017-04-11T10:29:02Z"}, "body": "If the invocation of a compilation fails with a non zero exit\r\ncode the compilation failed. This patch forwards stdout and\r\nstderr with the compiler exit code to the client.\r\n\r\nThis fixes #103.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/105/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/98", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/98/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/98/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/98/events", "html_url": "https://github.com/mozilla/sccache/pull/98", "id": 219601404, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE0Mzg5NjYw", "number": 98, "title": "Re-enable s3 by default, build with --features=all in CI", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-04-05T14:26:04Z", "updated_at": "2017-04-05T15:56:07Z", "closed_at": "2017-04-05T15:56:07Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/98", "html_url": "https://github.com/mozilla/sccache/pull/98", "diff_url": "https://github.com/mozilla/sccache/pull/98.diff", "patch_url": "https://github.com/mozilla/sccache/pull/98.patch", "merged_at": "2017-04-05T15:56:07Z"}, "body": "I think I missed this when the redis storage patch landed. Opening a PR to make sure the CI builds are OK before I land this.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/98/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/98/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/94", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/94/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/94/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/94/events", "html_url": "https://github.com/mozilla/sccache/pull/94", "id": 217511910, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyOTM0Nzc5", "number": 94, "title": "Remove line break in release script", "user": {"login": "flxo", "id": 129436, "node_id": "MDQ6VXNlcjEyOTQzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/129436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flxo", "html_url": "https://github.com/flxo", "followers_url": "https://api.github.com/users/flxo/followers", "following_url": "https://api.github.com/users/flxo/following{/other_user}", "gists_url": "https://api.github.com/users/flxo/gists{/gist_id}", "starred_url": "https://api.github.com/users/flxo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flxo/subscriptions", "organizations_url": "https://api.github.com/users/flxo/orgs", "repos_url": "https://api.github.com/users/flxo/repos", "events_url": "https://api.github.com/users/flxo/events{/privacy}", "received_events_url": "https://api.github.com/users/flxo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-03-28T10:16:46Z", "updated_at": "2017-03-31T14:24:48Z", "closed_at": "2017-03-28T10:42:35Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/94", "html_url": "https://github.com/mozilla/sccache/pull/94", "diff_url": "https://github.com/mozilla/sccache/pull/94.diff", "patch_url": "https://github.com/mozilla/sccache/pull/94.patch", "merged_at": "2017-03-28T10:42:35Z"}, "body": "With `2349791` a line break in the release script is introduced that breaks\r\nit. This patch removes that one. I noticed that when rereading the patch yesterday.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/94/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/94/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/92", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/92/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/92/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/92/events", "html_url": "https://github.com/mozilla/sccache/pull/92", "id": 217405629, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyODYxMTYz", "number": 92, "title": "Send environment variables from client, hash CARGO_ env vars in Rust", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-03-27T23:34:06Z", "updated_at": "2017-03-29T00:36:16Z", "closed_at": "2017-03-28T17:03:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/92", "html_url": "https://github.com/mozilla/sccache/pull/92", "diff_url": "https://github.com/mozilla/sccache/pull/92.diff", "patch_url": "https://github.com/mozilla/sccache/pull/92.patch", "merged_at": "2017-03-28T17:03:24Z"}, "body": "This fixes a longstanding issue about not using the client's environment for compilation, and then uses that fix to include CARGO_ env vars in Rust hash generation.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/92/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/92/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/90", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/90/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/90/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/90/events", "html_url": "https://github.com/mozilla/sccache/pull/90", "id": 216505320, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyMjkxNDc3", "number": 90, "title": "Try to get more info out of server crashes", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-23T17:13:43Z", "updated_at": "2017-03-23T19:40:46Z", "closed_at": "2017-03-23T19:40:43Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/90", "html_url": "https://github.com/mozilla/sccache/pull/90", "diff_url": "https://github.com/mozilla/sccache/pull/90.diff", "patch_url": "https://github.com/mozilla/sccache/pull/90.patch", "merged_at": "2017-03-23T19:40:43Z"}, "body": "Apply two separate techniques:\r\n\r\n* Ensure that core dumps come out of the server by calling `setrlimit` manually\r\n* Install some signal handlers which print out the signal that was received\r\n\r\nHopefully this'll help debugging issues by at least confirming what happens.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/90/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/90/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/86", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/86/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/86/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/86/events", "html_url": "https://github.com/mozilla/sccache/pull/86", "id": 216265922, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyMTQ4NTMx", "number": 86, "title": "Go back to raw process spawning on Windows", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-23T02:05:33Z", "updated_at": "2017-03-23T10:35:00Z", "closed_at": "2017-03-23T10:34:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/86", "html_url": "https://github.com/mozilla/sccache/pull/86", "diff_url": "https://github.com/mozilla/sccache/pull/86.diff", "patch_url": "https://github.com/mozilla/sccache/pull/86.patch", "merged_at": "2017-03-23T10:34:59Z"}, "body": "Unfortunately a crucial detail I missed is that the previous incarnation of this\r\nfunction set `bInheritHandles` to `FALSE` which caused the server process to not\r\ninherit any handles from the parent process. The Rust standard library, however,\r\nunconditionally passes `TRUE` for this variable right now.\r\n\r\nI discovered, though, that with CMake the `cmake` process itself would hang\r\nuntil all of its child pipes were closed, and one of those pipes was one that\r\nleaked all the way into the server process. I unfortunately could not figure out\r\na way to stop the leak, so I've opted to just revert the part to use the\r\nstandard library's spawning mechanism back to calling `CreateProcess` manually.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/86/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/86/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/85", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/85/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/85/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/85/events", "html_url": "https://github.com/mozilla/sccache/pull/85", "id": 216149479, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyMDY4MDAw", "number": 85, "title": "Move from protobuf to bincode for a wire format ", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-03-22T17:32:55Z", "updated_at": "2017-03-27T17:14:14Z", "closed_at": "2017-03-27T17:14:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/85", "html_url": "https://github.com/mozilla/sccache/pull/85", "diff_url": "https://github.com/mozilla/sccache/pull/85.diff", "patch_url": "https://github.com/mozilla/sccache/pull/85.patch", "merged_at": "2017-03-27T17:14:12Z"}, "body": "This commit migrates away from the `protobuf` crate to instead just working with\r\nbincode on the wire as a serialization format. This is done by leveraging a few\r\ndifferent crates:\r\n\r\n* The `bincode` and `serde_derive` crates are used to define serialization\r\n  for Rust structures as well as provide a bincode implementation.\r\n* The `tokio_io::codec::length_delimited` module implements framing via length\r\n  prefixes to transform an asynchronous stream of bytes into a literal `Stream`\r\n  of `BytesMut`.\r\n* The `tokio_serde_bincode` crate is then used to tie it all together, parsing\r\n  these `BytesMut` as the request/response types of sccache.\r\n\r\nMost of the changes here are related to moving away from the protobuf API\r\nthroughout the codebase (e.g. `has_foo` and `take_foo`) towards a more\r\nrustic-ish API that just uses enums/structs. Overall it felt quite natural (as\r\none would expect) to just use the raw enum/struct values.\r\n\r\nThis may not be quite as performant as before but that doesn't really apply to\r\nsccache's use case where perf is hugely dominated by actually compiling and\r\nhashing, so I'm not too too worried about that.\r\n\r\nMy personal motivation for this is twofold:\r\n\r\n1. Using `protobuf` was a little clunky throughout the codebase and definitely\r\n   had some sharp edges that felt good to smooth out.\r\n2. There's currently what I believe some mysterious segfault and/or stray write\r\n   happening in sccache and I'm not sure where. The `protobuf` crate had a lot\r\n   of `unsafe` code and in lieu of actually auditing it I figured it'd be good\r\n   to kill two birds with one stone. I have no idea if this fixes my segfault\r\n   problem (I never could reproduce it) but I figured it's worth a shot.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/85/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/85/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/83", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/83/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/83/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/83/events", "html_url": "https://github.com/mozilla/sccache/pull/83", "id": 215834595, "node_id": "MDExOlB1bGxSZXF1ZXN0MTExODQ3MzYx", "number": 83, "title": "Remove dependency on `named_pipe`", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-21T18:22:43Z", "updated_at": "2017-03-21T22:12:45Z", "closed_at": "2017-03-21T19:51:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/83", "html_url": "https://github.com/mozilla/sccache/pull/83", "diff_url": "https://github.com/mozilla/sccache/pull/83.diff", "patch_url": "https://github.com/mozilla/sccache/pull/83.patch", "merged_at": "2017-03-21T19:51:54Z"}, "body": "I was sporadically receiving a segfault locally when trying to debug issues on\r\nWindows and in tracking this down I discovered blackbeam/named_pipe#3 which\r\nleads to segfaults locally on startup.\r\n\r\nThis switches the one use case to the relevant functionality in\r\n`mio-named-pipes` (already pulled in as part of `tokio-process`) and then\r\notherwise mirrors the same logic as the Unix version, just waiting for a byte\r\nwith a timeout.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/83/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/83/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/82", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/82/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/82/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/82/events", "html_url": "https://github.com/mozilla/sccache/pull/82", "id": 215261612, "node_id": "MDExOlB1bGxSZXF1ZXN0MTExNDQ4NTY0", "number": 82, "title": "Don't silently ignore errors", "user": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-19T12:45:26Z", "updated_at": "2017-03-19T15:39:22Z", "closed_at": "2017-03-19T15:27:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/82", "html_url": "https://github.com/mozilla/sccache/pull/82", "diff_url": "https://github.com/mozilla/sccache/pull/82.diff", "patch_url": "https://github.com/mozilla/sccache/pull/82.patch", "merged_at": "2017-03-19T15:27:42Z"}, "body": "", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/82/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/82/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/81", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/81/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/81/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/81/events", "html_url": "https://github.com/mozilla/sccache/pull/81", "id": 214943121, "node_id": "MDExOlB1bGxSZXF1ZXN0MTExMjM3NTk1", "number": 81, "title": "Fix non-GMT time stamp in HTTP Date header", "user": {"login": "na-g", "id": 2036397, "node_id": "MDQ6VXNlcjIwMzYzOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2036397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/na-g", "html_url": "https://github.com/na-g", "followers_url": "https://api.github.com/users/na-g/followers", "following_url": "https://api.github.com/users/na-g/following{/other_user}", "gists_url": "https://api.github.com/users/na-g/gists{/gist_id}", "starred_url": "https://api.github.com/users/na-g/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/na-g/subscriptions", "organizations_url": "https://api.github.com/users/na-g/orgs", "repos_url": "https://api.github.com/users/na-g/repos", "events_url": "https://api.github.com/users/na-g/events{/privacy}", "received_events_url": "https://api.github.com/users/na-g/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-03-17T08:56:21Z", "updated_at": "2017-03-25T00:01:23Z", "closed_at": "2017-03-24T20:05:32Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/81", "html_url": "https://github.com/mozilla/sccache/pull/81", "diff_url": "https://github.com/mozilla/sccache/pull/81.diff", "patch_url": "https://github.com/mozilla/sccache/pull/81.patch", "merged_at": "2017-03-24T20:05:32Z"}, "body": "HTTP/1.1 [requires](https://tools.ietf.org/html/rfc2616#section-3.3.1) that all time stamps created be in GMT. Posts to S3 were using local time with a numerical offset instead.  Ceph's radosgw is [picky](http://tracker.ceph.com/issues/3973) enough to care, so this was preventing sccache from POSTing to ceph's S3 interface.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/81/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/81/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/79", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/79/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/79/events", "html_url": "https://github.com/mozilla/sccache/pull/79", "id": 213789431, "node_id": "MDExOlB1bGxSZXF1ZXN0MTEwNDE5OTI4", "number": 79, "title": "Add timeouts to cache lookups and handle server eofs", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-13T14:47:14Z", "updated_at": "2017-03-25T01:36:46Z", "closed_at": "2017-03-25T01:36:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/79", "html_url": "https://github.com/mozilla/sccache/pull/79", "diff_url": "https://github.com/mozilla/sccache/pull/79.diff", "patch_url": "https://github.com/mozilla/sccache/pull/79.patch", "merged_at": "2017-03-25T01:36:44Z"}, "body": "We've unfortunately been having a lot of trouble over at https://github.com/rust-lang/rust/issues/40240 with sccache causing spurious failures. A number of logs are linked from that issue and to try to diagnose these issues I've enabled sccache logging which we cat to the Travis logs on failures.\r\n\r\nToday we got a [new failure](https://github.com/rust-lang/rust/pull/40329#issuecomment-286054302) whose [failing build](https://travis-ci.org/rust-lang/rust/jobs/210484803) pointed to:\r\n\r\n```\r\nerror: failed to execute compile\r\ncaused by: error reading compile response from server\r\ncaused by: IoError(Error { repr: Custom(Custom { kind: Other, error: StringError(\"unexpected EOF\") }) })\r\ncaused by: unexpected EOF\r\n```\r\n\r\nUpon inspection of the sccache server debug logs (at the end of the build log) I noticed the failing object was `ELFDumper.cpp.o`, we attempted to fetch this object from the cache (I think), and no other messages about `ELFDumper.cpp.o` (success or not) happened on the server. My theory for what happened looks like:\r\n\r\n* We sent off an S3 request \r\n* This S3 request then takes *forever*, presumably an \"infinite\" amount of time\r\n* The sccache server decided to shut down due to being idle\r\n* sccache waited 10 seconds for the S3 connection to finish\r\n* It didn't, so we shut down the whole server, closing active connections\r\n* The client then receives EOF unexpectedly, causing the error\r\n\r\nTo handle this failure mode this PR makes a few modifications\r\n\r\n* The client now handles `UnexpectedEof` the same way it handles \"unhandled compilation\", it just compiles the object locally. This should protect against this in the future and other spurious races like this which are generally benign.\r\n* I've added logging to shutdown of the server just to know when it happens\r\n* I've added a timeout to cache lookups (60s currently) which should help avoiding waiting on S3 for too long.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/79/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/79/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/78", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/78/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/78/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/78/events", "html_url": "https://github.com/mozilla/sccache/pull/78", "id": 212823125, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA5NzU5ODA5", "number": 78, "title": "Changes for sccache+msvc+LLVM", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-03-08T18:53:48Z", "updated_at": "2017-04-11T14:55:30Z", "closed_at": "2017-04-11T10:27:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/78", "html_url": "https://github.com/mozilla/sccache/pull/78", "diff_url": "https://github.com/mozilla/sccache/pull/78.diff", "patch_url": "https://github.com/mozilla/sccache/pull/78.patch", "merged_at": "2017-04-11T10:27:33Z"}, "body": "This few commits were what I found was necessary to get sccache fully working on MSVC when compiling LLVM in rust-lang/rust. It basically boiled down to:\r\n\r\nFixes https://github.com/mozilla/sccache/issues/61\r\nFixes https://github.com/mozilla/sccache/issues/47", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/78/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/78/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/77", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/77/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/77/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/77/events", "html_url": "https://github.com/mozilla/sccache/pull/77", "id": 212529390, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA5NTQ5MzQw", "number": 77, "title": "Add support for caching Rust compilations. Fixes #42", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2017-03-07T19:10:57Z", "updated_at": "2017-03-24T20:04:43Z", "closed_at": "2017-03-24T20:03:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/77", "html_url": "https://github.com/mozilla/sccache/pull/77", "diff_url": "https://github.com/mozilla/sccache/pull/77.diff", "patch_url": "https://github.com/mozilla/sccache/pull/77.patch", "merged_at": "2017-03-24T20:03:59Z"}, "body": "This is a pretty large set of changes, but it breaks down into a few parts:\r\n* First, I spent some time refactoring the existing logic from `CompilerInfo::get_cached_or_compile`, since it was all tangled with the logic of running the C preprocessor. I split that out into a separate method and moved a few other things around while I was there. This is the \"Pre-Rust support refactoring, Part 1\" change.\r\n* Next, I added some traits to hide implementation details of the actual compilation process: `Compiler`, `CompilerHasher`, and `Compilation`. I changed `get_cached_or_compile` and everywhere else that was interacting with compilers to only work with boxed trait objects of these types, and made it so that `Compiler::parse_arguments` returns a boxed `CompilerHasher`, and then `CompilerHasher::generate_hash_key` returns a boxed `Compilation`. This way the C compiler implementation and the Rust compiler implementation can each persist some private state through the process. I refactored the C compilation bits further into an implementation of these traits that's generic over a `CCompilerImpl` trait, implementations of which simply call into the existing gcc/clang/msvc functions. This is the \"Pre-Rust support refactoring, Part 2\" and \"Part 3\" changes.\r\n* Finally, I added a Rust implementation of the traits. A few refactoring-type changes snuck in to this changeset but I was too lazy to split them out at this point.\r\n\r\nThere are also a few tiny refactoring changesets mixed in there, I tried to split small, separable changes out when possible to make the whole thing easier to follow.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/77/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/77/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/76", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/76/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/76/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/76/events", "html_url": "https://github.com/mozilla/sccache/pull/76", "id": 210244988, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA3OTY2OTA0", "number": 76, "title": "Update mio-named-pipes", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-02-25T16:30:44Z", "updated_at": "2017-02-25T16:53:40Z", "closed_at": "2017-02-25T16:53:29Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/76", "html_url": "https://github.com/mozilla/sccache/pull/76", "diff_url": "https://github.com/mozilla/sccache/pull/76.diff", "patch_url": "https://github.com/mozilla/sccache/pull/76.patch", "merged_at": "2017-02-25T16:53:29Z"}, "body": "This fixes a bug in EOF handling which can cause spurious failures on Windows", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/76/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/76/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/75", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/75/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/75/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/75/events", "html_url": "https://github.com/mozilla/sccache/pull/75", "id": 210224651, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA3OTU1MDU1", "number": 75, "title": "Update gcc crate in Cargo.lock", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-02-25T09:48:34Z", "updated_at": "2017-02-25T16:53:41Z", "closed_at": "2017-02-25T16:53:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/75", "html_url": "https://github.com/mozilla/sccache/pull/75", "diff_url": "https://github.com/mozilla/sccache/pull/75.diff", "patch_url": "https://github.com/mozilla/sccache/pull/75.patch", "merged_at": "2017-02-25T16:53:24Z"}, "body": "Picks up support for `-C target-feature=+crt-static` on MSVC and such", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/75/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/75/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/74", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/74/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/74/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/74/events", "html_url": "https://github.com/mozilla/sccache/pull/74", "id": 210224601, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA3OTU1MDIw", "number": 74, "title": "Prevent double borrow_mut() error", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-25T09:47:19Z", "updated_at": "2017-02-26T01:13:53Z", "closed_at": "2017-02-25T16:53:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/74", "html_url": "https://github.com/mozilla/sccache/pull/74", "diff_url": "https://github.com/mozilla/sccache/pull/74.diff", "patch_url": "https://github.com/mozilla/sccache/pull/74.patch", "merged_at": "2017-02-25T16:53:19Z"}, "body": "Mistake left in from a refactoring I made unfortunately", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/74/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/74/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/70", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/70/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/70/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/70/events", "html_url": "https://github.com/mozilla/sccache/pull/70", "id": 207693661, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA2MjMzMjgy", "number": 70, "title": "Plumb futures through caching/spawning layer, leverage error-chain", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-02-15T02:37:37Z", "updated_at": "2017-02-17T18:59:39Z", "closed_at": "2017-02-17T18:39:03Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/70", "html_url": "https://github.com/mozilla/sccache/pull/70", "diff_url": "https://github.com/mozilla/sccache/pull/70.diff", "patch_url": "https://github.com/mozilla/sccache/pull/70.patch", "merged_at": "2017-02-17T18:39:03Z"}, "body": "This PR builds on https://github.com/mozilla/sccache/pull/68 by plumbing futures all the way through the caching layer, effectively future-izing the entire server. The master branch of hyper is used for HTTP requests and tokio-process is used for process management.\r\n\r\nThis also cleans up a bit along the way related to error handling by leveraging error-chain in as many places as possible. To facilitate that an `SFuture` (\"sccache future\") alias was introduced to easily pass around and return types of futures.\r\n\r\nNote that this should probably hold off on merging until https://github.com/mozilla/sccache/pull/68 lands, but I figured it'd be interesting at least!", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/70/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/70/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/69", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/69/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/69/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/69/events", "html_url": "https://github.com/mozilla/sccache/pull/69", "id": 204996243, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA0NDIzNTk3", "number": 69, "title": "Fix a regression in us-east-1 buckets", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-02-02T21:06:16Z", "updated_at": "2017-02-02T21:35:41Z", "closed_at": "2017-02-02T21:35:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/69", "html_url": "https://github.com/mozilla/sccache/pull/69", "diff_url": "https://github.com/mozilla/sccache/pull/69.diff", "patch_url": "https://github.com/mozilla/sccache/pull/69.patch", "merged_at": "2017-02-02T21:35:38Z"}, "body": "It looks like the logic in #27 changed the default host name from\r\n$bucket.s3.amazonaws.com to s3.amazonaws.com, but didn't accompany with changes\r\nto upload to /$bucket in the path name. This restores the original behavior by\r\nuploading to $bucket.s3.amazonaws.com without requiring changes to how paths are\r\nconstructed.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/69/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/69/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/68", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/68/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/68/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/68/events", "html_url": "https://github.com/mozilla/sccache/pull/68", "id": 204194925, "node_id": "MDExOlB1bGxSZXF1ZXN0MTAzODY1ODQz", "number": 68, "title": "Rewrite the server module with Tokio", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-01-31T03:18:17Z", "updated_at": "2017-02-15T11:20:32Z", "closed_at": "2017-02-15T11:19:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/68", "html_url": "https://github.com/mozilla/sccache/pull/68", "diff_url": "https://github.com/mozilla/sccache/pull/68.diff", "patch_url": "https://github.com/mozilla/sccache/pull/68.patch", "merged_at": "2017-02-15T11:19:58Z"}, "body": "This commit rewrites the `server` module of sccache to be backed with Tokio. The\r\nprevious version was written with `mio`, which Tokio is built on, but is\r\nunfortunately less ergonomic. Tokio is the state-of-the-art for asynchronous\r\nprogramming in Rust and sccache serves as a great testing ground for ergonomics!\r\n\r\nIt's intended that the support added here will eventually extend to many other\r\noperations that sccache does as well. For example thread spawning has all been\r\nreplaced with `CpuPool` to have a shared pool for I/O operations and such\r\n(namely the filesystem). Eventually the HTTP requests made by the S3 backend can\r\nbe integrated with the Tokio branch of Hyper as well to run that on the event\r\nloop instead of in a worker thread. I'd also like to eventually extend this with\r\n`tokio-process` as well to move process spawning off helper threads as well, but\r\nI'm leaving that to a future commit as well.\r\n\r\nOverall I found the transition was quite smooth, with the high level\r\narchitecture look like:\r\n\r\n* The `tokio-proto` crate is used in streaming mode. The streaming part is used\r\n  for the one RPC sccache gets which requires a second response to be sent later\r\n  on. This second response is the \"response body\" in tokio-proto terms.\r\n* All of sccache's logic is manifested in an implementation of the `Service`\r\n  trait.\r\n* The transport layer is provided with `tokio_core::io::{Framed, Codec}`, and\r\n  simple deserialization/serialization is performed with protobuf.\r\n\r\nSome differences in design are:\r\n\r\n* The `SccacheService` for now is just a bunch of reference-counted pointers,\r\n  making it cheap to clone. As the futures it returns progress they will each\r\n  retain a reference to a cloned copy of the `SccacheService`. Before all this\r\n  data was just stored and manipulated in a struct directly, but it's now\r\n  directly managed through shared memory.\r\n* The storage backends share a thread pool with the main server instead of\r\n  spawning threads.\r\n\r\nAnd finally, some things I've learned along the way:\r\n\r\n* Sharing data between futures isn't a trivial operation. It took an explicit\r\n  decision to use `Rc` and I'm not sure I'm 100% happy with how the ergonomics\r\n  played out.\r\n* Shutdown is pretty tricky here. I've tried to carry over all the previous\r\n  logic but it definitely required not using `TcpServer` in tokio-proto at the\r\n  very least, and otherwise required a few custom futures and such to track the\r\n  various states. I have a hunch that tokio-proto could provide more options out\r\n  of the box for something like this.\r\n* Getting a transport up and running isn't always the easiest. I wanted\r\n  to use sink/stream combinators here but was unable to unfortunately.", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/68/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/68/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/66", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/66/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/66/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/66/events", "html_url": "https://github.com/mozilla/sccache/pull/66", "id": 203999785, "node_id": "MDExOlB1bGxSZXF1ZXN0MTAzNzI4NDE4", "number": 66, "title": "Remove unused import", "user": {"login": "nierob", "id": 917054, "node_id": "MDQ6VXNlcjkxNzA1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/917054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nierob", "html_url": "https://github.com/nierob", "followers_url": "https://api.github.com/users/nierob/followers", "following_url": "https://api.github.com/users/nierob/following{/other_user}", "gists_url": "https://api.github.com/users/nierob/gists{/gist_id}", "starred_url": "https://api.github.com/users/nierob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nierob/subscriptions", "organizations_url": "https://api.github.com/users/nierob/orgs", "repos_url": "https://api.github.com/users/nierob/repos", "events_url": "https://api.github.com/users/nierob/events{/privacy}", "received_events_url": "https://api.github.com/users/nierob/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-30T12:39:36Z", "updated_at": "2017-01-30T13:11:49Z", "closed_at": "2017-01-30T13:11:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/66", "html_url": "https://github.com/mozilla/sccache/pull/66", "diff_url": "https://github.com/mozilla/sccache/pull/66.diff", "patch_url": "https://github.com/mozilla/sccache/pull/66.patch", "merged_at": "2017-01-30T13:11:49Z"}, "body": "warning: unused import: `std::time::Duration`, #[warn(unused_imports)] on by default\r\n   --> src/commands.rs:107:9\r\n    |\r\n107 |     use std::time::Duration;\r\n    |         ^^^^^^^^^^^^^^^^^^^", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/66/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/66/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/65", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/65/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/65/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/65/events", "html_url": "https://github.com/mozilla/sccache/pull/65", "id": 203907188, "node_id": "MDExOlB1bGxSZXF1ZXN0MTAzNjY2NDQ2", "number": 65, "title": "Add support for gcc `@file` options", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-30T00:06:36Z", "updated_at": "2017-01-30T13:10:40Z", "closed_at": "2017-01-30T13:10:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/65", "html_url": "https://github.com/mozilla/sccache/pull/65", "diff_url": "https://github.com/mozilla/sccache/pull/65.diff", "patch_url": "https://github.com/mozilla/sccache/pull/65.patch", "merged_at": "2017-01-30T13:10:40Z"}, "body": "This commit adds support for the `@file` option that gcc/clang supports. This\r\noption means that an `file` should be read and `@file` should be replaced with\r\nall the options specified in `file`.\r\n\r\nThe online documentation indicates that gcc supports arguments with spaces\r\nthrough quoting, but this seemed like it may be nontrivial to implement, so I\r\nfigured that for now those cases could continue to be un-cacheable.\r\n\r\nCloses #43", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/65/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/65/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/56", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/56/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/56/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/56/events", "html_url": "https://github.com/mozilla/sccache/pull/56", "id": 197886916, "node_id": "MDExOlB1bGxSZXF1ZXN0OTk1NzI1OTI=", "number": 56, "title": "Add a Redis cache variant", "user": {"login": "flxo", "id": 129436, "node_id": "MDQ6VXNlcjEyOTQzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/129436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flxo", "html_url": "https://github.com/flxo", "followers_url": "https://api.github.com/users/flxo/followers", "following_url": "https://api.github.com/users/flxo/following{/other_user}", "gists_url": "https://api.github.com/users/flxo/gists{/gist_id}", "starred_url": "https://api.github.com/users/flxo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flxo/subscriptions", "organizations_url": "https://api.github.com/users/flxo/orgs", "repos_url": "https://api.github.com/users/flxo/repos", "events_url": "https://api.github.com/users/flxo/events{/privacy}", "received_events_url": "https://api.github.com/users/flxo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 23, "created_at": "2016-12-28T17:19:04Z", "updated_at": "2017-05-23T12:59:16Z", "closed_at": "2017-03-27T19:39:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/56", "html_url": "https://github.com/mozilla/sccache/pull/56", "diff_url": "https://github.com/mozilla/sccache/pull/56.diff", "patch_url": "https://github.com/mozilla/sccache/pull/56.patch", "merged_at": "2017-03-27T19:39:39Z"}, "body": "This patch adds support for using a [Redis](http://redis.io) instance as cache. The cache is used when `SCCACHE_REDIS` is set to a url that matches `redis://[:<passwd>@]<hostname>[:port][/<db>]`.  The S3 storage options overrule Redis.\r\n\r\nFor the connection to the Redis a connection pool is used. It is managed by [r2d2](https://github.com/sfackler/r2d2). The size of the connection pool can be controlled by `SCCACHE_REDIS_CONNECTIONS` and default to the number of cpus multiplied by 2. I'm not sure that this fallback is a good idea, but I wanted to have `SCCACHE_REDIS_CONNECTIONS` optional. What do you think?\r\n\r\nThe `current_size` method of `Storage` uses a lua script to sum the individual key sizes. This might not perform well on larger systems. During my tests this was not a problem for ~50k keys - but I limited the cache size to 10Gb. \r\n\r\nEverything else is quite straight forward. Some parts are borrowed from the `disk` and `S3` cache implementation. Thanks for that!", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/56/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/56/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}, {"url": "https://api.github.com/repos/mozilla/sccache/issues/46", "repository_url": "https://api.github.com/repos/mozilla/sccache", "labels_url": "https://api.github.com/repos/mozilla/sccache/issues/46/labels{/name}", "comments_url": "https://api.github.com/repos/mozilla/sccache/issues/46/comments", "events_url": "https://api.github.com/repos/mozilla/sccache/issues/46/events", "html_url": "https://github.com/mozilla/sccache/pull/46", "id": 195106776, "node_id": "MDExOlB1bGxSZXF1ZXN0OTc2NDkzNjE=", "number": 46, "title": "Support sccache being copied/hardlinked to a different name", "user": {"login": "glandium", "id": 1038527, "node_id": "MDQ6VXNlcjEwMzg1Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glandium", "html_url": "https://github.com/glandium", "followers_url": "https://api.github.com/users/glandium/followers", "following_url": "https://api.github.com/users/glandium/following{/other_user}", "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}", "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glandium/subscriptions", "organizations_url": "https://api.github.com/users/glandium/orgs", "repos_url": "https://api.github.com/users/glandium/repos", "events_url": "https://api.github.com/users/glandium/events{/privacy}", "received_events_url": "https://api.github.com/users/glandium/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-12-12T22:38:54Z", "updated_at": "2017-01-27T21:02:42Z", "closed_at": "2017-01-27T21:02:39Z", "author_association": "COLLABORATOR", "type": null, "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/mozilla/sccache/pulls/46", "html_url": "https://github.com/mozilla/sccache/pull/46", "diff_url": "https://github.com/mozilla/sccache/pull/46.diff", "patch_url": "https://github.com/mozilla/sccache/pull/46.patch", "merged_at": "2017-01-27T21:02:39Z"}, "body": "Resolves #44.\r\n\r\nThere's a bunch of unwrap() in there, but they should be \"safe\", as in, as far as reading the doc goes, they shouldn't ever be panicking in the code paths they are used under. (For example, exe.file_name().unwrap() shouldn't panic considering env::current_exe succeeded (actually, it could panic if the executable was removed since the process started, but panicking in that case doesn't sound too bad)).", "reactions": {"url": "https://api.github.com/repos/mozilla/sccache/issues/46/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/mozilla/sccache/issues/46/timeline", "performed_via_github_app": null, "state_reason": null, "score": 1.0}]