# Hop=1 下游修复 PR 抓取与分类分析报告

## 数据概览

- **总事件数**: 31,781 条 Hop=1 传播修复事件
- **分析时间**: 2026-01-20
- **数据源**: `outputs/propagation_hop1/propagation_events_hop1_full.csv`
- **结果文件**: `outputs/pr_repair_hop1/pr_mapping_full_hop1.csv`

---

## 1. Search Status 分布

| Status | 数量 | 占比 | 说明 |
|--------|------|------|------|
| **found** | 14,541 | 45.75% | 成功找到符合条件的 PR |
| **not_found_in_window** | 8,840 | 27.82% | 时间窗口内无合并 PR |
| **skipped_no_repo** | 7,317 | 23.02% | 无法获取 GitHub 仓库（可能已删除/私有/非 GitHub） |
| **candidates_filtered_out** | 1,083 | 3.41% | 有 PR 但未改动 Cargo.toml/lock |

**关键发现**：
- **PR 找到率**: 45.75% (14,541/31,781)
- 约 **27.82%** 的事件在时间窗口内完全没有合并的 PR（可能为直接 push 或静默发布）
- 约 **23.02%** 的事件因无法获取仓库信息而跳过（数据缺失）

---

## 2. 修复类型 (Classification) 分布

| 类型 | 数量 | 占比 | 说明 |
|------|------|------|------|
| **manual** | 11,922 | 37.51% | 人工提交的修复 PR |
| **direct** | 9,923 | 31.22% | 静默修复（无 PR 记录） |
| **unknown** | 7,317 | 23.02% | 数据缺失（无仓库信息） |
| **semi_auto** | 2,275 | 7.16% | Bot 提交，人工合并 |
| **automated** | 344 | 1.08% | 全自动（Bot 提交并自动合并） |

**关键发现**：
- **人工修复占主导**: 在找到 PR 的事件中，**81.99%** (11,922/14,541) 是人工提交
- **自动化修复比例较低**: 仅 **2.37%** (344/14,541) 为全自动，**15.65%** (2,275/14,541) 为半自动
- **静默修复比例高**: 约 **31.22%** 的事件没有 PR 记录（直接发布或非 PR 流程）

---

## 3. Found PR 的修复类型详细分布

在成功找到 PR 的 **14,541** 条事件中：

| 类型 | 数量 | 占比 | 说明 |
|------|------|------|------|
| **manual** | 11,922 | 81.99% | 真实用户提交的修复 |
| **semi_auto** | 2,275 | 15.65% | Dependabot/Renovate 等 Bot 提交，但需要人工审核合并 |
| **automated** | 344 | 2.37% | Bot 提交并自动合并（无需人工干预） |

**洞察**：
- 即使有自动化工具（Dependabot/Renovate），**绝大多数修复仍需要人工参与**（manual + semi_auto = 97.63%）
- 全自动修复比例极低（2.37%），说明 Rust 生态中依赖升级修复通常需要人工审核

---

## 4. 关键指标总结

| 指标 | 数值 | 说明 |
|------|------|------|
| **PR 找到率** | 45.75% | 能找到 PR 的事件比例 |
| **静默修复率** | 31.22% | 无 PR 记录的事件比例 |
| **数据缺失率** | 23.02% | 无法获取仓库信息的事件比例 |
| **人工修复占比** | 81.99% | 在找到的 PR 中，人工提交的比例 |
| **自动化修复占比** | 2.37% | 在找到的 PR 中，全自动修复的比例 |
| **半自动修复占比** | 15.65% | 在找到的 PR 中，Bot 提交但人工合并的比例 |

---

## 5. 自动化修复样例

### Automated (全自动)
- **数量**: 344 条
- **示例**: `dkregistry -> https://github.com/camallo/dkregistry-rs/pull/50`
- **特征**: Bot 提交并自动合并，无需人工干预

### Semi-Auto (半自动)
- **数量**: 2,275 条
- **示例**: `engineioxide -> https://github.com/Totodore/socketioxide/pull/144`
- **特征**: Bot 提交，但需要人工审核后合并

---

## 6. 结论与启示

### 主要发现

1. **人工修复占主导地位**
   - 在能找到 PR 的事件中，超过 80% 是人工提交的修复
   - 说明 Rust 生态中依赖升级修复通常需要开发者主动关注和手动处理

2. **自动化工具使用率低**
   - 全自动修复仅占 2.37%，半自动修复占 15.65%
   - 即使有 Dependabot/Renovate 等工具，大多数项目仍需要人工审核合并

3. **静默修复比例高**
   - 约 31% 的事件没有 PR 记录
   - 可能原因：直接 push 到主分支、使用其他发布流程、或修复方式不是依赖升级

4. **数据完整性挑战**
   - 约 23% 的事件因无法获取仓库信息而跳过
   - 可能原因：仓库已删除、设为私有、或不在 GitHub 上

### 研究意义

- **漏洞传播延迟分析**: 可以进一步分析不同修复类型（manual vs automated）的 lag 差异
- **自动化工具效果评估**: 自动化修复比例低，说明 Rust 生态在依赖管理自动化方面仍有提升空间
- **修复行为模式**: 高比例的静默修复可能反映了某些项目的发布流程特点

---

## 附录：数据文件

- **输入**: `outputs/propagation_hop1/propagation_events_hop1_full.csv` (31,781 行)
- **输出**: `outputs/pr_repair_hop1/pr_mapping_full_hop1.csv` (31,783 行，含 header)
- **缓存**: `cache/prop_search_full/` (GitHub API 响应缓存)

---

*报告生成时间: 2026-01-20*
